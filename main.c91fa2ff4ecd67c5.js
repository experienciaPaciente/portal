"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[792],{1076:(yn,wt,ie)=>{ie.d(wt,{Am:()=>ln,FA:()=>ye,Fy:()=>Ht,I9:()=>Lo,Im:()=>si,Ku:()=>Qe,T9:()=>Tt,Tj:()=>On,Uj:()=>rt,XA:()=>Ct,ZQ:()=>Xt,bD:()=>Br,cY:()=>kt,eX:()=>Ve,g:()=>pe,hp:()=>Ft,jZ:()=>Qt,lT:()=>le,lV:()=>Bt,nr:()=>Un,sr:()=>xn,tD:()=>dn,u:()=>me,yU:()=>Tn,zW:()=>De});const Be=function(de){const _e=[];let Re=0;for(let lt=0;lt<de.length;lt++){let qe=de.charCodeAt(lt);qe<128?_e[Re++]=qe:qe<2048?(_e[Re++]=qe>>6|192,_e[Re++]=63&qe|128):55296==(64512&qe)&&lt+1<de.length&&56320==(64512&de.charCodeAt(lt+1))?(qe=65536+((1023&qe)<<10)+(1023&de.charCodeAt(++lt)),_e[Re++]=qe>>18|240,_e[Re++]=qe>>12&63|128,_e[Re++]=qe>>6&63|128,_e[Re++]=63&qe|128):(_e[Re++]=qe>>12|224,_e[Re++]=qe>>6&63|128,_e[Re++]=63&qe|128)}return _e},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(de,_e){if(!Array.isArray(de))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Re=_e?this.byteToCharMapWebSafe_:this.byteToCharMap_,lt=[];for(let qe=0;qe<de.length;qe+=3){const Kt=de[qe],bn=qe+1<de.length,zn=bn?de[qe+1]:0,Kr=qe+2<de.length,mr=Kr?de[qe+2]:0;let Li=(15&zn)<<2|mr>>6,Hr=63&mr;Kr||(Hr=64,bn||(Li=64)),lt.push(Re[Kt>>2],Re[(3&Kt)<<4|zn>>4],Re[Li],Re[Hr])}return lt.join("")},encodeString(de,_e){return this.HAS_NATIVE_SUPPORT&&!_e?btoa(de):this.encodeByteArray(Be(de),_e)},decodeString(de,_e){return this.HAS_NATIVE_SUPPORT&&!_e?atob(de):function(de){const _e=[];let Re=0,lt=0;for(;Re<de.length;){const qe=de[Re++];if(qe<128)_e[lt++]=String.fromCharCode(qe);else if(qe>191&&qe<224){const Kt=de[Re++];_e[lt++]=String.fromCharCode((31&qe)<<6|63&Kt)}else if(qe>239&&qe<365){const Kr=((7&qe)<<18|(63&de[Re++])<<12|(63&de[Re++])<<6|63&de[Re++])-65536;_e[lt++]=String.fromCharCode(55296+(Kr>>10)),_e[lt++]=String.fromCharCode(56320+(1023&Kr))}else{const Kt=de[Re++],bn=de[Re++];_e[lt++]=String.fromCharCode((15&qe)<<12|(63&Kt)<<6|63&bn)}}return _e.join("")}(this.decodeStringToByteArray(de,_e))},decodeStringToByteArray(de,_e){this.init_();const Re=_e?this.charToByteMapWebSafe_:this.charToByteMap_,lt=[];for(let qe=0;qe<de.length;){const Kt=Re[de.charAt(qe++)],zn=qe<de.length?Re[de.charAt(qe)]:0;++qe;const mr=qe<de.length?Re[de.charAt(qe)]:64;++qe;const er=qe<de.length?Re[de.charAt(qe)]:64;if(++qe,null==Kt||null==zn||null==mr||null==er)throw new Ke;lt.push(Kt<<2|zn>>4),64!==mr&&(lt.push(zn<<4&240|mr>>2),64!==er&&lt.push(mr<<6&192|er))}return lt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let de=0;de<this.ENCODED_VALS.length;de++)this.byteToCharMap_[de]=this.ENCODED_VALS.charAt(de),this.charToByteMap_[this.byteToCharMap_[de]]=de,this.byteToCharMapWebSafe_[de]=this.ENCODED_VALS_WEBSAFE.charAt(de),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[de]]=de,de>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(de)]=de,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(de)]=de)}}};class Ke extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rt=function(de){return function(de){const _e=Be(de);return Ce.encodeByteArray(_e,!0)}(de).replace(/\./g,"")},me=function(de){try{return Ce.decodeString(de,!0)}catch(_e){console.error("base64Decode failed: ",_e)}return null},Nt=()=>{try{return function Ue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const de=process.env.__FIREBASE_DEFAULTS__;return de?JSON.parse(de):void 0})()||(()=>{if(typeof document>"u")return;let de;try{de=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const _e=de&&me(de[1]);return _e&&JSON.parse(_e)})()}catch(de){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${de}`)}},On=de=>{var _e,Re;return null===(Re=null===(_e=Nt())||void 0===_e?void 0:_e.emulatorHosts)||void 0===Re?void 0:Re[de]},Tn=de=>{const _e=On(de);if(!_e)return;const Re=_e.lastIndexOf(":");if(Re<=0||Re+1===_e.length)throw new Error(`Invalid host ${_e} with no separate hostname and port!`);const lt=parseInt(_e.substring(Re+1),10);return"["===_e[0]?[_e.substring(1,Re-1),lt]:[_e.substring(0,Re),lt]},Tt=()=>{var de;return null===(de=Nt())||void 0===de?void 0:de.config},Ct=de=>{var _e;return null===(_e=Nt())||void 0===_e?void 0:_e[`_${de}`]};class kt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((_e,Re)=>{this.resolve=_e,this.reject=Re})}wrapCallback(_e){return(Re,lt)=>{Re?this.reject(Re):this.resolve(lt),"function"==typeof _e&&(this.promise.catch(()=>{}),1===_e.length?_e(Re):_e(Re,lt))}}}function Ht(de,_e){if(de.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const lt=_e||"demo-project",qe=de.iat||0,Kt=de.sub||de.user_id;if(!Kt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const bn=Object.assign({iss:`https://securetoken.google.com/${lt}`,aud:lt,iat:qe,exp:qe+3600,auth_time:qe,sub:Kt,user_id:Kt,firebase:{sign_in_provider:"custom",identities:{}}},de);return[rt(JSON.stringify({alg:"none",type:"JWT"})),rt(JSON.stringify(bn)),""].join(".")}function Xt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Qt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function xn(){const de="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof de&&void 0!==de.id}function Bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function le(){const de=Xt();return de.indexOf("MSIE ")>=0||de.indexOf("Trident/")>=0}function Un(){return!function Xe(){var de;const _e=null===(de=Nt())||void 0===de?void 0:de.forceEnvironment;if("node"===_e)return!0;if("browser"===_e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function De(){try{return"object"==typeof indexedDB}catch{return!1}}function Ve(){return new Promise((de,_e)=>{try{let Re=!0;const lt="validate-browser-context-for-indexeddb-analytics-module",qe=self.indexedDB.open(lt);qe.onsuccess=()=>{qe.result.close(),Re||self.indexedDB.deleteDatabase(lt),de(!0)},qe.onupgradeneeded=()=>{Re=!1},qe.onerror=()=>{var Kt;_e((null===(Kt=qe.error)||void 0===Kt?void 0:Kt.message)||"")}}catch(Re){_e(Re)}})}class pe extends Error{constructor(_e,Re,lt){super(Re),this.code=_e,this.customData=lt,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ye.prototype.create)}}class ye{constructor(_e,Re,lt){this.service=_e,this.serviceName=Re,this.errors=lt}create(_e,...Re){const lt=Re[0]||{},qe=`${this.service}/${_e}`,Kt=this.errors[_e],bn=Kt?function _t(de,_e){return de.replace(zt,(Re,lt)=>{const qe=_e[lt];return null!=qe?String(qe):`<${lt}?>`})}(Kt,lt):"Error";return new pe(qe,`${this.serviceName}: ${bn} (${qe}).`,lt)}}const zt=/\{\$([^}]+)}/g;function si(de){for(const _e in de)if(Object.prototype.hasOwnProperty.call(de,_e))return!1;return!0}function Br(de,_e){if(de===_e)return!0;const Re=Object.keys(de),lt=Object.keys(_e);for(const qe of Re){if(!lt.includes(qe))return!1;const Kt=de[qe],bn=_e[qe];if(ai(Kt)&&ai(bn)){if(!Br(Kt,bn))return!1}else if(Kt!==bn)return!1}for(const qe of lt)if(!Re.includes(qe))return!1;return!0}function ai(de){return null!==de&&"object"==typeof de}function ln(de){const _e=[];for(const[Re,lt]of Object.entries(de))Array.isArray(lt)?lt.forEach(qe=>{_e.push(encodeURIComponent(Re)+"="+encodeURIComponent(qe))}):_e.push(encodeURIComponent(Re)+"="+encodeURIComponent(lt));return _e.length?"&"+_e.join("&"):""}function Lo(de){const _e={};return de.replace(/^\?/,"").split("&").forEach(lt=>{if(lt){const[qe,Kt]=lt.split("=");_e[decodeURIComponent(qe)]=decodeURIComponent(Kt)}}),_e}function Ft(de){const _e=de.indexOf("?");if(!_e)return"";const Re=de.indexOf("#",_e);return de.substring(_e,Re>0?Re:void 0)}function dn(de,_e){const Re=new Wt(de,_e);return Re.subscribe.bind(Re)}class Wt{constructor(_e,Re){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Re,this.task.then(()=>{_e(this)}).catch(lt=>{this.error(lt)})}next(_e){this.forEachObserver(Re=>{Re.next(_e)})}error(_e){this.forEachObserver(Re=>{Re.error(_e)}),this.close(_e)}complete(){this.forEachObserver(_e=>{_e.complete()}),this.close()}subscribe(_e,Re,lt){let qe;if(void 0===_e&&void 0===Re&&void 0===lt)throw new Error("Missing Observer.");qe=function ki(de,_e){if("object"!=typeof de||null===de)return!1;for(const Re of _e)if(Re in de&&"function"==typeof de[Re])return!0;return!1}(_e,["next","error","complete"])?_e:{next:_e,error:Re,complete:lt},void 0===qe.next&&(qe.next=Dr),void 0===qe.error&&(qe.error=Dr),void 0===qe.complete&&(qe.complete=Dr);const Kt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?qe.error(this.finalError):qe.complete()}catch{}}),this.observers.push(qe),Kt}unsubscribeOne(_e){void 0===this.observers||void 0===this.observers[_e]||(delete this.observers[_e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(_e){if(!this.finalized)for(let Re=0;Re<this.observers.length;Re++)this.sendOne(Re,_e)}sendOne(_e,Re){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[_e])try{Re(this.observers[_e])}catch(lt){typeof console<"u"&&console.error&&console.error(lt)}})}close(_e){this.finalized||(this.finalized=!0,void 0!==_e&&(this.finalError=_e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dr(){}function Qe(de){return de&&de._delegate?de._delegate:de}},8010:(yn,wt,ie)=>{ie.d(wt,{u:()=>Ce});var D=ie(467),T=ie(3953),L=ie(2418),Be=ie(6335),Ze=ie(6114);let Ce=(()=>{class Ke{constructor(rt){this.firestore=rt,this.auth=(0,T.WQX)(Be.Nj),this.authState$=(0,Be.wh)(this.auth),this.errorMessage=null}signUpWithEmailAndPassword(rt){var me=this;return(0,D.A)(function*(){try{const Ae=yield(0,Be.eJ)(me.auth,rt.email,rt.password);Ae.user&&(yield(0,Be.r7)(Ae.user,{displayName:`${rt.name} ${rt.lastName}`}));const Pe=(0,L.H9)(me.firestore,`users/${Ae.user?.uid}`);yield(0,L.BN)(Pe,{uid:Ae.user?.uid,name:rt.name,lastName:rt.lastName,dni:rt.dni,email:rt.email,grupoSanguineo:rt.grupoSanguineo,alergia:rt.alergia,otraAlergia:rt.otraAlergia})}catch(Ae){if("auth/email-already-in-use"===Ae.code)throw me.errorMessage="El correo ya est\xe1 registrado.",console.error("Error creating user:",Ae),Ae;me.errorMessage="Error al registrar el usuario."}})()}logInWithEmailAndPassword(rt){return(0,Be.x9)(this.auth,rt.email,rt.password)}logOut(){return this.auth.signOut()}signInWithGoogleProvider(){const rt=new Ze.HF;return this.callPopUp(rt)}signInWithGithubProvider(){const rt=new Ze.Dt;return this.callPopUp(rt)}callPopUp(rt){var me=this;return(0,D.A)(function*(){try{return yield(0,Be.df)(me.auth,rt)}catch(Ae){return Ae}})()}static#e=this.\u0275fac=function(me){return new(me||Ke)(T.KVO(L._7))};static#t=this.\u0275prov=T.jDH({token:Ke,factory:Ke.\u0275fac,providedIn:"root"})}return Ke})()},6418:(yn,wt,ie)=>{ie.d(wt,{J:()=>L});var D=ie(4412),T=ie(3953);let L=(()=>{class Be{constructor(){this.notificationsSubject=new D.t([]),this.notifications$=this.notificationsSubject.asObservable()}addNotification(Ce,Ke){this.notificationsSubject.next([...this.notificationsSubject.value,{message:Ce,severity:Ke}]),setTimeout(()=>{this.removeNotification(0)},3e3)}removeNotification(Ce){const Ke=this.notificationsSubject.value;Ke.splice(Ce,1),this.notificationsSubject.next([...Ke])}clearNotifications(){this.notificationsSubject.next([])}static#e=this.\u0275fac=function(Ke){return new(Ke||Be)};static#t=this.\u0275prov=T.jDH({token:Be,factory:Be.\u0275fac,providedIn:"root"})}return Be})()},4258:(yn,wt,ie)=>{ie.d(wt,{m:()=>Ze});var D=ie(467),T=ie(3953),L=ie(2418);const Be="registros";let Ze=(()=>{class Ce{constructor(){this._firestore=(0,T.WQX)(L._7),this._collection=(0,L.rJ)(this._firestore,Be)}getRegistros(){return(0,L.xs)(this._collection,{idField:"id"})}getRegistro(Et){var rt=this;return(0,D.A)(function*(){try{return(yield(0,L.x7)(rt.document(Et))).data()}catch{return}})()}searchRegistroByQuery(Et){var rt=this;return(0,D.A)(function*(){const me=(0,L.P)(rt._collection,(0,L._M)("fullName",">=",Et),(0,L._M)("fullName","<=",Et+"\uf8ff")),Ae=yield(0,L.GG)(me);let Pe=[];return Ae.forEach(pt=>{Pe=[...Pe,{id:pt.id,...pt.data()}]}),Pe})()}createRegistro(Et){return(0,L.gS)(this._collection,Et)}updateRegistro(Et,rt){return(0,L.mZ)(this.document(Et),{...rt})}deleteRegistro(Et){return(0,L.kd)(this.document(Et))}getRegistrosByUserId(Et){const rt=(0,L.P)(this._collection,(0,L._M)("userId","==",Et));return(0,L.xs)(rt,{idField:"id"})}document(Et){return(0,L.H9)(this._firestore,`${Be}/${Et}`)}static#e=this.\u0275fac=function(rt){return new(rt||Ce)};static#t=this.\u0275prov=T.jDH({token:Ce,factory:Ce.\u0275fac,providedIn:"root"})}return Ce})()},6553:(yn,wt,ie)=>{ie.r(wt),ie.d(wt,{default:()=>It});var D=ie(467),T=ie(3953),L=ie(4341),Be=ie(177),Ze=ie(7407),Ce=ie(8010),Ke=ie(1827),Et=ie(1229),rt=ie(5699),me=ie(7533);const Ae=()=>["/registrarse"];function Pe(Mt,tn){if(1&Mt&&(T.j41(0,"small",21),T.EFF(1),T.k0s()),2&Mt){const Nt=tn.ngIf;T.R7$(),T.JRh(Nt)}}function pt(Mt,tn){1&Mt&&(T.j41(0,"small",21),T.EFF(1," La contrase\xf1a es obligatoria "),T.k0s())}function Ue(Mt,tn){if(1&Mt&&(T.j41(0,"app-card",20),T.nrm(1,"app-label",22),T.k0s()),2&Mt){const Nt=T.XpG();T.Y8G("variant","fab")("severity",Nt.errorMessage?"danger":"success")("closable",Nt.hide),T.R7$(),T.Y8G("label",Nt.errorMessage?"No se ha podido autenticar el usuario":"El usuario ha sido creado exitosamente")("subtitle",Nt.errorMessage?Nt.errorMessage:Nt.successMessage)("icon",Nt.errorMessage?"alert-circle":"info-circle")}}let It=(()=>{class Mt{constructor(){this.hide=!0,this.successMessage="",this.errorMessage="",this.isMobile=!1,this.formBuilder=(0,T.WQX)(L.ok),this.authService=(0,T.WQX)(Ce.u),this.router=(0,T.WQX)(Ze.Ix),this.form=this.formBuilder.group({nombre:this.formBuilder.control(""),apellido:this.formBuilder.control(""),dni:this.formBuilder.control(""),email:this.formBuilder.control("",{validators:[L.k0.required,L.k0.email],nonNullable:!0}),password:this.formBuilder.control("",{validators:L.k0.required,nonNullable:!0}),grupoSanguineo:this.formBuilder.control("",{nonNullable:!0}),alergia:this.formBuilder.control("",{nonNullable:!0}),otraAlergia:this.formBuilder.control("",{nonNullable:!0})})}onResize(Nt){this.checkIfMobile(Nt.target.innerWidth)}ngOnInit(){this.checkIfMobile(window.innerWidth)}checkIfMobile(Nt){this.isMobile=Nt<768}get isEmailValid(){const Nt=this.form.get("email");return!(!Nt?.invalid||!Nt.touched)&&(Nt.hasError("required")?"Este campo es requerido":"Ingrese un mail v\xe1lido")}logIn(){var Nt=this;return(0,D.A)(function*(){if(Nt.form.invalid)return;const On={name:Nt.form.value.email||"",lastName:Nt.form.value.email||"",dni:Nt.form.value.dni||"",email:Nt.form.value.email||"",password:Nt.form.value.password||"",grupoSanguineo:Nt.form.value.grupoSanguineo||"",alergia:Nt.form.value.alergia||"",otraAlergia:Nt.form.value.otraAlergia||""};try{yield Nt.authService.logInWithEmailAndPassword(On),Nt.successMessage="Usuario autenticado, redirigiendo...",Nt.errorMessage="",Nt.router.navigateByUrl("/")}catch{Nt.successMessage="",Nt.errorMessage="Las credenciales ingresadas no son correctas"}})()}openSnackBar(){return alert("Succesfully Log in")}static#e=this.\u0275fac=function(On){return new(On||Mt)};static#t=this.\u0275cmp=T.VBU({type:Mt,selectors:[["app-sign-in"]],hostBindings:function(On,Tn){1&On&&T.bIt("resize",function(Ct){return Tn.onResize(Ct)},!1,T.tSv)},standalone:!0,features:[T.aNF],decls:29,vars:31,consts:[["id","signIn"],[1,"page__bg--overlay"],[1,"page__panel--sidebar",3,"ngSubmit","formGroup"],["type","flex"],["href","https://experienciapaciente.org/","target","_blank",1,"panel__img--center"],["width","84","height","84","src","./assets/img/ep__marca--sqr.png","alt","logo experiencia paciente"],["size","md","subtitle","Aqu\xed comienza tu historia de Salud",3,"prefix","label","direction"],[1,"form__input-wrapper--col"],[3,"label","control"],["type","email","formControlName","email"],["class","required",4,"ngIf"],[1,"form__input-wrapper--row"],["formControlName","password",3,"type"],["size","sm",3,"click","severity","variant","icon","direction"],[1,"body__text--center"],[1,"body__text--title"],["href","",1,"body__text--link",3,"routerLink"],[1,"panel__footer"],[3,"size","severity","variant","icon","direction","label","path"],["severity","success","type","submit","variant","fill","icon","arrow-right",3,"bottom","right","direction","label","size","disabled"],["size","lg","direction","row","bottom","20px","left","calc(50vw - 180px)",3,"variant","severity","closable"],[1,"required"],["size","xxs","variant","outline","direction","row","severity","danger",3,"label","subtitle","icon"]],template:function(On,Tn){1&On&&(T.j41(0,"section",0),T.nrm(1,"span",1),T.j41(2,"form",2),T.bIt("ngSubmit",function(){return Tn.logIn()}),T.j41(3,"section",3)(4,"a",4),T.nrm(5,"img",5),T.k0s(),T.nrm(6,"app-label",6),T.k0s(),T.j41(7,"section",3)(8,"div",7),T.nrm(9,"app-required",8)(10,"input",9),T.DNE(11,Pe,2,1,"small",10),T.k0s(),T.j41(12,"div",11)(13,"div",7),T.nrm(14,"app-required",8)(15,"input",12),T.DNE(16,pt,2,0,"small",10),T.k0s(),T.j41(17,"app-button",13),T.bIt("click",function(){return Tn.hide=!Tn.hide}),T.k0s()()(),T.j41(18,"small",14)(19,"b",15),T.EFF(20,"\xbfA\xfan no cont\xe1s con tus datos de salud?"),T.k0s(),T.nrm(21,"br"),T.j41(22,"a",16),T.EFF(23,"Registrate"),T.k0s(),T.EFF(24," en experienciaPaciente para comenzar a tener control sobre tus datos de salud. "),T.k0s(),T.j41(25,"footer",17),T.nrm(26,"app-button",18)(27,"app-button",19),T.k0s()(),T.DNE(28,Ue,2,6,"app-card",20),T.k0s()),2&On&&(T.R7$(2),T.Y8G("formGroup",Tn.form),T.R7$(4),T.Y8G("prefix","Ingreso")("label","Bienvenido")("direction","column"),T.R7$(3),T.Y8G("label","Email")("control","email"),T.R7$(2),T.Y8G("ngIf",Tn.isEmailValid),T.R7$(3),T.Y8G("label","Contrase\xf1a")("control","password"),T.R7$(),T.Y8G("type",Tn.hide?"password":"text"),T.R7$(),T.Y8G("ngIf",(null==Tn.form.controls.password?null:Tn.form.controls.password.invalid)&&(null==Tn.form.controls.password?null:Tn.form.controls.password.touched)),T.R7$(),T.Y8G("severity","primary")("variant","outline")("icon","eye")("direction","none"),T.R7$(5),T.Y8G("routerLink",T.lJ4(30,Ae)),T.R7$(4),T.Y8G("size",Tn.isMobile?"xxs":"xs")("severity","primary")("variant","link")("icon","heart")("direction","row")("label","Registrarse")("path","registrarse"),T.R7$(),T.Y8G("bottom","24px")("right","24px")("direction","row")("label","Acceder")("size",Tn.isMobile?"xxs":"xs")("disabled",Tn.form.invalid),T.R7$(),T.vxM(Tn.errorMessage?28:-1))},dependencies:[L.X1,L.qT,L.me,L.BC,L.cb,L.j4,L.JD,Ze.iI,Ze.Wk,Ke.U,Et.Q,rt.d,me.i,Be.MD,Be.bT],encapsulation:2})}return Mt})()},903:(yn,wt,ie)=>{ie.r(wt),ie.d(wt,{default:()=>xn});var D=ie(467),T=ie(3953),L=ie(177),Be=ie(4341),Ze=ie(7407),Ce=ie(2418);const Ke="pacientes";let Et=(()=>{class Bt{constructor(){this._firestore=(0,T.WQX)(Ce._7),this._collection=(0,Ce.rJ)(this._firestore,Ke)}getPacientes(){return(0,Ce.xs)(this._collection,{idField:"id"})}getPaciente(le){var gt=this;return(0,D.A)(function*(){try{return(yield(0,Ce.x7)(gt.document(le))).data()}catch{return}})()}searchPacienteByQuery(le){var gt=this;return(0,D.A)(function*(){const St=(0,Ce.P)(gt._collection,(0,Ce._M)("fullName",">=",le),(0,Ce._M)("fullName","<=",le+"\uf8ff")),Un=yield(0,Ce.GG)(St);let De=[];return Un.forEach(Ve=>{De=[...De,{id:Ve.id,...Ve.data()}]}),De})()}createPaciente(le){return(0,Ce.gS)(this._collection,le)}updatePaciente(le,gt){return(0,Ce.mZ)(this.document(le),{...gt})}deletePaciente(le){return(0,Ce.kd)(this.document(le))}document(le){return(0,Ce.H9)(this._firestore,`${Ke}/${le}`)}static#e=this.\u0275fac=function(gt){return new(gt||Bt)};static#t=this.\u0275prov=T.jDH({token:Bt,factory:Bt.\u0275fac,providedIn:"root"})}return Bt})();var rt=ie(8010),me=ie(1229),Ae=ie(1827),Pe=ie(5699),pt=ie(7533);function Ue(Bt,Mn){1&Bt&&T.nrm(0,"img",32)}function It(Bt,Mn){1&Bt&&T.nrm(0,"img",33)}function Mt(Bt,Mn){if(1&Bt&&(T.j41(0,"app-card",8),T.nrm(1,"app-label",34),T.k0s()),2&Bt){const le=T.XpG();T.Y8G("variant","fill")("severity","warning")("closable",!0)("selectable",le.showErrorMsg),T.R7$(),T.Y8G("icon","triangle-exclamation")}}function tn(Bt,Mn){if(1&Bt&&(T.j41(0,"small",35),T.EFF(1),T.k0s()),2&Bt){const le=T.XpG();T.R7$(),T.SpI(" ",null!=le.form.controls.email.errors&&le.form.controls.email.errors.required?"Email es obligatorio":"Email no es v\xe1lido"," ")}}function Nt(Bt,Mn){if(1&Bt&&(T.j41(0,"small",35),T.EFF(1),T.k0s()),2&Bt){const le=T.XpG();T.R7$(),T.SpI(" ",le.errorMessage," ")}}function On(Bt,Mn){1&Bt&&(T.j41(0,"small",35),T.EFF(1," El nombre es obligatorio "),T.k0s())}function Tn(Bt,Mn){1&Bt&&(T.j41(0,"small",35),T.EFF(1," El apellido es obligatorio "),T.k0s())}function Tt(Bt,Mn){if(1&Bt&&(T.j41(0,"small",35),T.EFF(1),T.k0s()),2&Bt){const le=T.XpG();T.R7$(),T.SpI(" ",null!=le.form.controls.password.errors&&le.form.controls.password.errors.required?"La contrase\xf1a es obligatoria":"Al menos 8 caracteres, n\xfamero y may\xfascula."," ")}}function Ct(Bt,Mn){1&Bt&&(T.j41(0,"small",35),T.EFF(1," Las contrase\xf1as no coinciden "),T.k0s())}function kt(Bt,Mn){if(1&Bt&&(T.j41(0,"option",37),T.EFF(1),T.k0s()),2&Bt){const le=Mn.$implicit;T.Y8G("value",le),T.R7$(),T.SpI(" ",le," ")}}function Ht(Bt,Mn){if(1&Bt&&(T.j41(0,"option",37),T.EFF(1),T.k0s()),2&Bt){const le=Mn.$implicit;T.Y8G("value",le),T.R7$(),T.SpI(" ",le," ")}}function Xt(Bt,Mn){1&Bt&&(T.j41(0,"div",19),T.nrm(1,"app-required",11)(2,"textarea",39),T.k0s()),2&Bt&&(T.R7$(),T.Y8G("label","Otras alergias")("control","otraAlergia"))}function Qt(Bt,Mn){if(1&Bt){const le=T.RV6();T.j41(0,"div",19),T.nrm(1,"app-required",11),T.j41(2,"select",36),T.bIt("change",function(){T.eBV(le);const St=T.XpG();return T.Njj(St.onGruposChange())}),T.Z7z(3,kt,2,2,"option",37,T.fX1),T.k0s()(),T.j41(5,"div",19),T.nrm(6,"app-required",11),T.j41(7,"select",38),T.bIt("change",function(){T.eBV(le);const St=T.XpG();return T.Njj(St.onAlergiasChange())}),T.Z7z(8,Ht,2,2,"option",37,T.fX1),T.k0s()(),T.DNE(10,Xt,3,2,"div",19)}if(2&Bt){const le=T.XpG();T.R7$(),T.Y8G("label","Grupo sangu\xedneo")("control","grupoSanguineo"),T.R7$(2),T.Dyx(le.grupos),T.R7$(3),T.Y8G("label","Alergias")("control","alergia"),T.R7$(2),T.Dyx(le.alergias),T.R7$(2),T.vxM(le.otraAlergia?10:-1)}}function Xe(Bt,Mn){if(1&Bt&&(T.j41(0,"app-card",25),T.nrm(1,"app-label",34),T.k0s()),2&Bt){const le=T.XpG();T.Y8G("variant","fill")("severity","warning")("closable",!0)("selectable",le.showErrorMsg),T.R7$(),T.Y8G("icon","triangle-exclamation")}}function Vn(Bt,Mn){if(1&Bt&&(T.j41(0,"app-card",40),T.nrm(1,"app-label",41),T.k0s()),2&Bt){const le=T.XpG();T.Y8G("variant","fab")("severity",le.showErrorMsg?"danger":"success")("closable",!0)("selectable",!1),T.R7$(),T.Y8G("label",le.showErrorMsg?"No se ha podido registrar el usuario":"El usuario ha sido creado exitosamente")("subtitle",le.showErrorMsg?le.errorMessage:"Ser\xe1 redirigido al login")("icon",le.showErrorMsg?"alert-circle":"info-circle")}}let xn=(()=>{class Bt{constructor(){this.hide=!0,this.isMobile=!1,this.direction="column",this.hasChange=!1,this.otraAlergia=!1,this.moreInfo=!0,this.editableType="",this.showConfirmMsg=!1,this.showErrorMsg=!1,this.confirmPassword="",this.passHasChange=!1,this.passwordHelpText='\n  Por favor, aseg\xfarate de que tu contrase\xf1a cumpla con los siguientes requisitos:\n  Longitud M\xednima: La contrase\xf1a debe tener al menos 8 caracteres.\n  Incluye un N\xfamero: Debe contener al menos un n\xfamero (0-9).\n  May\xfasculas: Debe incluir al menos una letra may\xfascula (A-Z).\n  S\xedmbolos Especiales: Debe tener al menos un s\xedmbolo especial, como: ! @ # $ % ^ & * ( ) , . ? " : { } | < >.\n',this.router=(0,T.WQX)(Ze.Ix),this.pacienteId="",this.formBuilder=(0,T.WQX)(Be.ok).nonNullable,this.authService=(0,T.WQX)(rt.u),this.pacienteService=(0,T.WQX)(Et),this.form=this.formBuilder.group({nombre:this.formBuilder.control(""),apellido:this.formBuilder.control(""),dni:this.formBuilder.control("",{validators:[this.documentValidator(),Be.k0.required]}),email:this.formBuilder.control("",{validators:[Be.k0.email,Be.k0.required]}),password:this.formBuilder.control("",Be.k0.required),grupoSanguineo:this.formBuilder.control(""),alergia:this.formBuilder.control(""),otraAlergia:this.formBuilder.control(""),confirmPassword:this.formBuilder.control("",{validators:[Be.k0.required,this.passwordFormatValidator()]})}),this.grupos=["A+","A\u2212","B+","B\u2212","AB+","AB\u2212","O+","O\u2212"],this.alergias=["\xc1caros del polvo","P\xf3lenes","Hongos ambientales","Pelo de gato","Pelo de perro","Picaduras de insectos","L\xe1cteos","Man\xed","Frutos secos","Soja","Trigo (gluten)","Pescado","Mariscos","Huevos","Penicilina","Aspirina","Antiinflamatorios","Latex","Ni\u0301quel","Otra"]}get _pacienteId(){return this.pacienteId}ngOnInit(){this.checkIfMobile(window.innerWidth)}checkIfMobile(le){this.isMobile=le<768,this.moreInfo=this.isMobile}passwordFormatValidator(){return le=>{const gt=/\d/.test(le.value),St=/[A-Z]/.test(le.value),Un=/[!@#$%^&*(),.?":{}|<>]/.test(le.value);return gt&&St&&Un&&le.value?.length>=8?null:{invalidPasswordFormat:!0}}}documentValidator(){return le=>{const gt=le.value?.toString()||"";return/^\d{1,8}$/.test(gt)?null:{invalidDocumentoFormat:!0}}}traducirErrorFirebase(le){switch(le.code||le.message){case"auth/email-already-in-use":return"El correo electr\xf3nico ya est\xe1 en uso.";case"auth/invalid-email":return"El correo electr\xf3nico no es v\xe1lido.";case"auth/weak-password":return"La contrase\xf1a es demasiado d\xe9bil. Debe tener al menos 6 caracteres.";case"auth/missing-password":return"Debe ingresar una contrase\xf1a.";case"auth/network-request-failed":return"Error de red. Verifique su conexi\xf3n.";default:return"Ha ocurrido un error. Intente nuevamente."}}signUp(){var le=this;return(0,D.A)(function*(){if(le.form.invalid||le.passwordsDoNotMatch)return void(le.showErrorMsg=!0);const gt={name:le.form.value.nombre||"",lastName:le.form.value.apellido||"",dni:le.form.value.dni||"",email:le.form.value.email||"",password:le.form.value.password||"",grupoSanguineo:le.form.value.grupoSanguineo||"",alergia:le.form.value.alergia||"",otraAlergia:le.form.value.otraAlergia||""};try{yield le.authService.signUpWithEmailAndPassword(gt),le.showConfirmMsg=!0,setTimeout(()=>{le.router.navigateByUrl("/ingresar")},1500)}catch(St){le.showErrorMsg=!0,le.errorMessage=le.traducirErrorFirebase(St),console.error(St)}})()}get isEmailValid(){const le=this.form.get("email");return!(!le?.invalid||!le.touched)&&(le.hasError("required")?"Este campo es requerido":"Ingrese un mail v\xe1lido")}get passwordsDoNotMatch(){return this.form.controls.password.value!==this.form.controls.confirmPassword.value}onGruposChange(){const le=this.form.controls.grupoSanguineo.value;this.hasChange=!0,this.editableType=le}onAlergiasChange(){const le=this.form.get("alergia")?.value;this.otraAlergia="Otra"===le,this.otraAlergia||this.form.get("otraAlergia")?.reset()}static#e=this.\u0275fac=function(gt){return new(gt||Bt)};static#t=this.\u0275cmp=T.VBU({type:Bt,selectors:[["app-sign-up"]],standalone:!0,features:[T.Jv_([]),T.aNF],decls:51,vars:56,consts:[["id","signUp"],[1,"page__bg--overlay"],[1,"page__panel--float",3,"ngSubmit","formGroup"],[1,"panel__inner--left"],["class","panel__img--center","width","240","src","./assets/img/ep__marca--row.svg","alt","logo experiencia paciente",4,"ngIf"],["class","panel__img--center","width","60","height","60","src","./assets/img/ep__marca--sqr.png","alt","logo experiencia paciente",4,"ngIf"],["type","flex",1,"panel__inner--right"],["size","md","subtitle","Aqu\xed comienza tu historia de Salud",3,"prefix","label","direction"],["size","lg","direction","row","bottom","20px",3,"variant","severity","closable","selectable"],["type","wrap"],[1,"form__input-wrapper--col","flex--block"],[3,"label","control"],["formControlName","email"],["class","required",4,"ngIf"],[1,"form__input-wrapper--col","flex--1"],["formControlName","nombre"],["formControlName","apellido"],["type","flex"],[1,"form__input-wrapper--row"],[1,"form__input-wrapper--col"],["formControlName","password",3,"type"],["size","sm",3,"click","type","severity","variant","icon","direction"],["formControlName","confirmPassword",3,"input","type"],[1,"flex--block"],[3,"click","size","severity","variant","icon","direction","label"],["size","block","direction","row","bottom","20px",3,"variant","severity","closable","selectable"],[1,"panel__prefooter"],[1,"footer__text--sm"],[1,"panel__footer"],[3,"size","severity","variant","icon","direction","label","path"],["severity","success","type","submit","variant","fill",3,"icon","direction","label","size","disabled"],["size","lg","direction","row","bottom","20px","left","calc(50vw - 180px)",3,"variant","severity","closable","selectable",4,"ngIf"],["width","240","src","./assets/img/ep__marca--row.svg","alt","logo experiencia paciente",1,"panel__img--center"],["width","60","height","60","src","./assets/img/ep__marca--sqr.png","alt","logo experiencia paciente",1,"panel__img--center"],["size","xxs","label","Esta es una versi\xf3n en desarrollo","subtitle","Evit\xe1 almacenar datos sensibles. A\xfan puede haber errores.","variant","outline","direction","row","severity","info",3,"icon"],[1,"required"],["id","grupoSanguineo","formControlName","grupoSanguineo",1,"form__select--custom",3,"change"],[3,"value"],["id","alergia","formControlName","alergia",1,"form__select--custom",3,"change"],["rows","3","type","text","id","otraAlergia","placeholder","Especifique sus otras alergias","formControlName","otraAlergia"],["size","lg","direction","row","bottom","20px","left","calc(50vw - 180px)",3,"variant","severity","closable","selectable"],["size","xxs","variant","outline","direction","row","severity","success",3,"label","subtitle","icon"]],template:function(gt,St){1&gt&&(T.j41(0,"main",0),T.nrm(1,"span",1),T.j41(2,"form",2),T.bIt("ngSubmit",function(){return St.signUp()}),T.j41(3,"section",3),T.DNE(4,Ue,1,0,"img",4)(5,It,1,0,"img",5),T.k0s(),T.j41(6,"section",6),T.nrm(7,"app-label",7),T.DNE(8,Mt,2,5,"app-card",8),T.j41(9,"div",9)(10,"div",10),T.nrm(11,"app-required",11)(12,"input",12),T.DNE(13,tn,2,1,"small",13)(14,Nt,2,1,"small",13),T.k0s(),T.j41(15,"div",14),T.nrm(16,"app-required",11)(17,"input",15),T.DNE(18,On,2,0,"small",13),T.k0s(),T.j41(19,"div",14),T.nrm(20,"app-required",11)(21,"input",16),T.DNE(22,Tn,2,0,"small",13),T.k0s(),T.j41(23,"section",17)(24,"span",18)(25,"div",18)(26,"div",19),T.nrm(27,"app-required",11)(28,"input",20),T.DNE(29,Tt,2,1,"small",13),T.k0s(),T.j41(30,"app-button",21),T.bIt("click",function(){return St.hide=!St.hide}),T.k0s()(),T.j41(31,"div",18)(32,"div",19),T.nrm(33,"app-required",11),T.j41(34,"input",22),T.bIt("input",function(){let De;return null==(De=St.form.get("confirmPassword"))?null:De.updateValueAndValidity()}),T.k0s(),T.DNE(35,Ct,2,0,"small",13),T.k0s(),T.j41(36,"app-button",21),T.bIt("click",function(){return St.hide=!St.hide}),T.k0s()()()(),T.j41(37,"div",23)(38,"app-button",24),T.bIt("click",function(){return St.moreInfo=!St.moreInfo}),T.k0s()(),T.DNE(39,Qt,11,5),T.k0s()(),T.DNE(40,Xe,2,5,"app-card",25),T.j41(41,"section",26)(42,"small",27)(43,"b"),T.EFF(44,"Aviso legal y t\xe9rminos de uso"),T.k0s(),T.nrm(45,"br"),T.EFF(46," Al registrarte en experienciaPaciente, reconoces que la plataforma pero te posibilita acceder, registrar y compartir tus propios datos de salud, sin depender exclusivamente de sistemas tradicionales. experienciaPaciente no sustituye la atenci\xf3n m\xe9dica. "),T.k0s()(),T.j41(47,"footer",28),T.nrm(48,"app-button",29)(49,"app-button",30),T.k0s()(),T.DNE(50,Vn,2,7,"app-card",31),T.k0s()),2&gt&&(T.R7$(2),T.Y8G("formGroup",St.form),T.R7$(2),T.Y8G("ngIf",!St.isMobile),T.R7$(),T.Y8G("ngIf",St.isMobile),T.R7$(2),T.Y8G("prefix","Ingreso")("label","Bienvenido")("direction",St.isMobile?"column":"row"),T.R7$(),T.vxM(St.isMobile?8:-1),T.R7$(3),T.Y8G("label","Email")("control","email"),T.R7$(2),T.Y8G("ngIf",St.form.controls.email.invalid&&(null==St.form.controls.email?null:St.form.controls.email.touched)),T.R7$(),T.Y8G("ngIf",St.errorMessage),T.R7$(2),T.Y8G("label","Nombre (opcional)")("control","nombre"),T.R7$(2),T.Y8G("ngIf",(null==St.form.controls.nombre?null:St.form.controls.nombre.invalid)&&(null==St.form.controls.nombre?null:St.form.controls.nombre.touched)),T.R7$(2),T.Y8G("label","Apellido (opcional)")("control","apellido"),T.R7$(2),T.Y8G("ngIf",(null==St.form.controls.apellido?null:St.form.controls.apellido.invalid)&&(null==St.form.controls.apellido?null:St.form.controls.apellido.touched)),T.R7$(5),T.Y8G("label","Contrase\xf1a")("control","password"),T.R7$(),T.Y8G("type",St.hide?"password":"text"),T.R7$(),T.Y8G("ngIf",(null==St.form.controls.password?null:St.form.controls.password.invalid)&&(null==St.form.controls.password?null:St.form.controls.password.touched)),T.R7$(),T.Y8G("type","button")("severity","primary")("variant","outline")("icon","eye")("direction","none"),T.R7$(3),T.Y8G("label","Repetir contrase\xf1a")("control","confirmPassword"),T.R7$(),T.Y8G("type",St.hide?"password":"text"),T.R7$(),T.Y8G("ngIf",St.passwordsDoNotMatch),T.R7$(),T.Y8G("type","button")("severity","primary")("variant","outline")("icon","eye")("direction","none"),T.R7$(2),T.Y8G("size",St.isMobile?"xxs":"xs")("severity","primary")("variant","link")("icon","chevron-down")("direction","row")("label","Informaci\xf3n de salud (opcional)"),T.R7$(),T.vxM(St.moreInfo?39:-1),T.R7$(),T.vxM(St.isMobile?-1:40),T.R7$(8),T.Y8G("size",St.isMobile?"xxs":"xs")("severity","primary")("variant","link")("icon","arrow-left")("direction","row")("label","Volver")("path","ingresar"),T.R7$(),T.Y8G("icon","heart")("direction","row")("label","Registrarme")("size",St.isMobile?"xxs":"xs")("disabled",St.form.invalid||St.passwordsDoNotMatch),T.R7$(),T.Y8G("ngIf",St.showConfirmMsg||St.showErrorMsg))},dependencies:[Be.X1,Be.qT,Be.xH,Be.y7,Be.me,Be.wz,Be.BC,Be.cb,Be.j4,Be.JD,Ze.iI,me.Q,Ae.U,Pe.d,pt.i,L.MD,L.bT],encapsulation:2})}return Bt})()},4908:(yn,wt,ie)=>{ie.d(wt,{s:()=>xn});var D=ie(467),T=ie(3953),L=ie(1827),Be=ie(6335),Ze=ie(5558),Ce=ie(6354),Ke=ie(9172),Et=ie(7673),rt=ie(4572),me=ie(177),Ae=ie(7533),Pe=ie(223),pt=ie(1229);function Ue(Bt,Mn){if(1&Bt){const le=T.RV6();T.qex(0),T.j41(1,"app-card",2),T.bIt("click",function(){const St=T.eBV(le).$implicit,Un=T.XpG();return T.Njj(Un.toggleSelectable(St))}),T.nrm(2,"app-label",3),T.k0s(),T.bVm()}if(2&Bt){const le=Mn.$implicit;T.R7$(),T.Y8G("selectable",!0)("variant","fill")("severity","custom")("color",le.color)("selected",le.selectable),T.R7$(),T.Y8G("label",le.label)("icon",le.icon)}}let It=(()=>{class Bt{constructor(){this.items=[],this.categorySelected=new T.bkB}toggleSelectable(le){le.selectable=!le.selectable,this.categorySelected.emit(le.selectable?le.label:"")}trackByFn(le,gt){return gt.label}static#e=this.\u0275fac=function(gt){return new(gt||Bt)};static#t=this.\u0275cmp=T.VBU({type:Bt,selectors:[["app-navbar"]],inputs:{items:"items"},outputs:{categorySelected:"categorySelected"},standalone:!0,features:[T.aNF],decls:2,vars:2,consts:[[1,"nav__wrapper--row"],[4,"ngFor","ngForOf","ngForTrackBy"],["size","xs","direction","column",3,"click","selectable","variant","severity","color","selected"],["size","xxs",3,"label","icon"]],template:function(gt,St){1&gt&&(T.j41(0,"nav",0),T.DNE(1,Ue,3,7,"ng-container",1),T.k0s()),2&gt&&(T.R7$(),T.Y8G("ngForOf",St.items)("ngForTrackBy",St.trackByFn))},dependencies:[L.U,Ae.i,me.MD,me.Sq],styles:["nav.nav__wrapper--row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;overflow-x:scroll;column-gap:var(--wrapper__gap--col)}nav.nav__wrapper[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;height:var(--footer__height);display:flex;align-items:flex-end;width:420px;box-sizing:border-box;background-color:#d3d3d3}nav.nav__wrapper[_ngcontent-%COMP%]   .nav__list--row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:72px;align-items:center;justify-content:space-around;width:100%;background-color:#4682b4}"]})}return Bt})();var Mt=ie(5023),tn=ie(4341),Nt=ie(7587),On=ie(4258),Tn=ie(7407),Tt=ie(6418);function Ct(Bt,Mn){if(1&Bt&&T.nrm(0,"app-label",1),2&Bt){const le=T.XpG();T.Mz_("prefix","Hola ",le.name,""),T.Y8G("label","Tus registros de salud")}}function kt(Bt,Mn){if(1&Bt){const le=T.RV6();T.j41(0,"app-navbar",11),T.bIt("categorySelected",function(St){T.eBV(le);const Un=T.XpG();return T.Njj(Un.onCategorySelected(St))}),T.k0s()}if(2&Bt){const le=T.XpG();T.Y8G("items",le.categoriaItems)}}function Ht(Bt,Mn){if(1&Bt&&(T.j41(0,"ul",14),T.nrm(1,"app-label",15),T.k0s()),2&Bt){const le=T.XpG(2);T.R7$(),T.Y8G("size",le.isMobile?"xs":"sm")("icon","pen-to-square")("prefix","Tus registros")("label","Comienza a escribir tu historia de salud")("direction","column")}}function Xt(Bt,Mn){if(1&Bt&&T.nrm(0,"app-badge",20),2&Bt){const le=T.XpG().$implicit;T.Y8G("label",le.lugar)}}function Qt(Bt,Mn){if(1&Bt){const le=T.RV6();T.j41(0,"li",16),T.bIt("click",function(){const St=T.eBV(le).$implicit,Un=T.XpG(2);return T.Njj(Un.onItemSelected(St))}),T.j41(1,"app-card",17),T.bIt("cardSelected",function(){const St=T.eBV(le).$implicit,Un=T.XpG(2);return T.Njj(Un.onCardSelected(St))}),T.j41(2,"app-label",18),T.nrm(3,"app-badge",19),T.DNE(4,Xt,1,1,"app-badge",20),T.j41(5,"app-button",21),T.bIt("click",function(St){const Un=T.eBV(le).$implicit,De=T.XpG(2);return T.Njj(De.openModal(St,Un))}),T.k0s(),T.nrm(6,"app-dropdown",22),T.k0s()()()}if(2&Bt){const le=Mn.$implicit,gt=T.XpG(2);T.R7$(),T.Y8G("selectable",!0)("selected",gt.selectedItemId===le.id)("variant","fill")("color",gt.getColorForCategoria(le.categoria)),T.R7$(),T.Y8G("size","xs")("label",le.titulo)("prefix",le.categoria)("subtitle",gt.isMobile?"":le.descripcion)("icon",gt.getIconForCategoria(le.categoria))("severity","custom")("color",gt.getColorForCategoria(le.categoria)),T.R7$(),T.Y8G("severity",le.validado?"success":"info")("label",le.validado?"Validado":"Auto-registro"),T.R7$(),T.vxM(le.lugar?4:-1),T.R7$(2),T.Y8G("items",gt.getMenuItems(le))("position",gt.dropdownPosition)}}function Xe(Bt,Mn){if(1&Bt&&(T.qex(0),T.DNE(1,Ht,2,5,"ul",12),T.j41(2,"ul"),T.DNE(3,Qt,7,16,"li",13),T.nI1(4,"async"),T.k0s(),T.bVm()),2&Bt){const le=Mn.ngIf,gt=T.XpG();T.R7$(),T.Y8G("ngIf",!le.length),T.R7$(),T.ZvI("list__wrapper--",gt.type,""),T.R7$(),T.Y8G("ngForOf",T.bMT(4,6,gt.filteredRegistros$))("ngForTrackBy",gt.trackByFn)}}function Vn(Bt,Mn){if(1&Bt){const le=T.RV6();T.j41(0,"app-modal",23),T.bIt("closeModal",function(){T.eBV(le);const St=T.XpG();return T.Njj(St.onCancel())}),T.j41(1,"app-button",24),T.bIt("click",function(){T.eBV(le);const St=T.XpG();return T.Njj(St.onCancel())}),T.k0s(),T.j41(2,"app-button",25),T.bIt("click",function(){T.eBV(le);const St=T.XpG();return T.Njj(St.onConfirm())}),T.k0s()()}if(2&Bt){const le=T.XpG();T.Y8G("prefix","Eliminar registro")("title","\xbfDesea eliminar "+le.itemToDelete.titulo+"?")("subtitle","Esta acci\xf3n es irreversible, si elimina el registro no podr\xe1 recuperar su contenido.")("size",le.isMobile?"sm":"md")}}let xn=(()=>{class Bt{onCardSelected(le){this.selectedItemId=le.id}getMenuItems(le){return[{label:"Ver detalle",icon:"file-lines",disabled:!1,callback:()=>this.onItemSelected(le)},{label:"Editar",icon:"pencil",disabled:!1,callback:()=>this.navigateToEdit(le)},{label:"Destacar",icon:"star",disabled:!0},{label:"Gestionar permisos",icon:"user-lock",disabled:!0},{label:"Asociar a registro",icon:"link",disabled:!0},{label:"Eliminar",icon:"trash",disabled:!1,callback:gt=>this.openModal(gt,le)}]}getRegistroOptions(le){return[{label:"Registro manual",icon:"file-lines",path:"/registrar",disabled:!1},{label:"Registro QR",icon:"qrcode",path:"/scan",disabled:!1}]}constructor(le,gt,St){this.registroService=le,this.router=gt,this.notificationService=St,this.loggedUser=!0,this.email=null,this.name=null,this.searchControl=new tn.MJ(""),this.selectedCategory="",this.selectedItemId=null,this.isModalOpen=!1,this.itemToDelete=null,this.auth=(0,T.WQX)(Be.Nj),this.authState$=(0,Be.wh)(this.auth),this.type="flex",this.direction="horizontal",this.categoriaMap={Cardiolog\u00eda:{icon:"heart",color:"#dc3545"},Dermatolog\u00eda:{icon:"hand-dots",color:"#fd7e14"},Guardia:{icon:"square-h",color:"#f44336"},Endocrinolog\u00eda:{icon:"hand-holding-medical",color:"#ffc107"},Gastroenterolog\u00eda:{icon:"viruses",color:"#795548"},"Ginecolog\xeda y Obstetricia":{icon:"venus",color:"#e83e8c"},Hemoterapia:{icon:"tint",color:"#c0392b"},Infectolog\u00eda:{icon:"virus",color:"#ff5722"},Kinesiolog\u00eda:{icon:"dumbbell",color:"#fd7e14"},Laboratorio:{icon:"flask",color:"#8e44ad"},"Medicina General":{icon:"user-md",color:"#007bff"},Nefrolog\u00eda:{icon:"filter",color:"#3f51b5"},Neumolog\u00eda:{icon:"lungs",color:"#87ceeb"},Neurolog\u00eda:{icon:"brain",color:"#6f42c1"},Nutrici\u00f3n:{icon:"apple-whole",color:"#a2d729"},Odontolog\u00eda:{icon:"tooth",color:"#ffffff"},Oftalmolog\u00eda:{icon:"eye-dropper",color:"#17a2b8"},Oncolog\u00eda:{icon:"ribbon",color:"#6f42c1"},Otorrinolaringolog\u00eda:{icon:"head-side-cough",color:"#6610f2"},Pediatr\u00eda:{icon:"child",color:"#28a745"},Psiquiatr\u00eda:{icon:"comments",color:"#20c997"},"Terapia Intensiva":{icon:"bed-pulse",color:"#212529"},"Traumatolog\xeda y Ortopedia":{icon:"crutch",color:"#6c757d"},Urolog\u00eda:{icon:"x-ray",color:"#007bff"},Vacunatorio:{icon:"syringe",color:"#00bcd4"}},this.dropdownPosition={top:"35px",left:"-170px"},this.splitButtonPosition={top:"45px",left:"-160px"},this.categoriaItems=Object.keys(this.categoriaMap).map(Un=>({label:Un,icon:this.categoriaMap[Un].icon,color:this.categoriaMap[Un].color,path:`/categories/${Un}`,selectable:!1}))}triggerSuccess(){this.notificationService.addNotification("Registro eliminado!","danger")}triggerError(){this.notificationService.addNotification("Error al eliminar registro","warning")}ngOnInit(){this.authState$.subscribe(le=>{le?(this.email=le.email,this.name=le.displayName):(this.email=null,this.name="Usuario")}),this.authState$.subscribe(le=>{le&&(this.registros$=this.authState$.pipe((0,Ze.n)(gt=>gt?this.registroService.getRegistrosByUserId(gt.uid).pipe((0,Ce.T)(St=>St.sort((Un,De)=>Un.titulo.localeCompare(De.titulo))),(0,Ke.Z)([])):(0,Et.of)([]))),this.filteredRegistros$=(0,rt.z)([this.searchControl.valueChanges.pipe((0,Ke.Z)("")),this.registros$]).pipe((0,Ce.T)(([gt,St])=>St.filter(Un=>Un.titulo.toLowerCase().includes((gt??"").toLowerCase())&&(""===this.selectedCategory||Un.categoria===this.selectedCategory)))))}),this.checkIfMobile(window.innerWidth)}onResize(le){this.checkIfMobile(le.target.innerWidth)}checkIfMobile(le){this.isMobile=le<768}onItemSelected(le){this.router.navigate([`/item/${le.id}`])}navigateToEdit(le){this.router.navigate([`/actualizar/${le.id}`])}navigateToDelete(le){var gt=this;return(0,D.A)(function*(){try{yield gt.registroService.deleteRegistro(le.id)}catch(St){console.error("Error deleting registro",St)}})()}onCategorySelected(le){this.selectedCategory=le,this.filteredRegistros$=this.filterRegistros(this.searchControl.value||"",this.selectedCategory)}filterRegistros(le,gt){const St=le.toLowerCase()||"";return this.registros$.pipe((0,Ce.T)(Un=>Un.filter(De=>De.titulo.toLowerCase().includes(St)&&(""===gt||De.categoria===gt)).sort((De,Ve)=>De.titulo.localeCompare(Ve.titulo))))}getIconForCategoria(le){return this.categoriaMap[le]?.icon||"question-circle"}getColorForCategoria(le){return this.categoriaMap[le]?.color||"gray"}trackByFn(le,gt){return gt.id}showMedCategories(le){this.medCategories=!this.medCategories}openModal(le,gt){le?.stopPropagation(),this.selectedItemId=gt.id,this.itemToDelete=gt,this.isModalOpen=!0}onConfirm(){var le=this;return(0,D.A)(function*(){if(le.isModalOpen=!1,le.itemToDelete)try{yield le.registroService.deleteRegistro(le.itemToDelete.id),le.triggerSuccess()}catch{le.triggerError()}finally{le.itemToDelete=null,le.selectedItemId=null}})()}onCancel(){this.isModalOpen=!1,this.itemToDelete=null}static#e=this.\u0275fac=function(gt){return new(gt||Bt)(T.rXU(On.m),T.rXU(Tn.Ix),T.rXU(Tt.J))};static#t=this.\u0275cmp=T.VBU({type:Bt,selectors:[["app-list"]],hostBindings:function(gt,St){1&gt&&T.bIt("resize",function(De){return St.onResize(De)},!1,T.tSv)},inputs:{type:"type",direction:"direction"},standalone:!0,features:[T.aNF],decls:14,vars:12,consts:[[1,"sidebar__header"],["size","md","direction","row",3,"label","prefix"],[1,"input__group"],[1,"input__wrapper"],["for","titulo"],["type","text","placeholder","Busca por t\xedtulo del registro",1,"input__size--sm",3,"formControl"],["type","button","size","xs","severity","primary","direction","none",3,"clickEvent","direction","icon","variant"],["buttonSize","xs","buttonDirection","none","buttonVariant","fill","buttonSeverity","success","buttonIcon","plus",3,"items","position"],[3,"items"],[4,"ngIf"],["icon","trash-can",3,"prefix","title","subtitle","size"],[3,"categorySelected","items"],["class","list__wrapper--center",4,"ngIf"],[3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list__wrapper--center"],["subtitle","Aqu\xed se listar\xe1n los datos de salud que registres manualmente o a trav\xe9s del QR facilitado por qui\xe9n haya gestionado tu registro de salud.",3,"size","icon","prefix","label","direction"],[3,"click"],["direction","row","severity","custom",3,"cardSelected","selectable","selected","variant","color"],["direction","row",3,"size","label","prefix","subtitle","icon","severity","color"],["size","xs",3,"severity","label"],["severity","info","size","xs","icon","hospital",3,"label"],["variant","icon","icon","trash-can","size","xs","severity","neutral",3,"click"],["buttonLabel","","buttonIcon","ellipsis-vertical",3,"items","position"],["icon","trash-can",3,"closeModal","prefix","title","subtitle","size"],["direction","none","size","sm","label","Cancelar","variant","outline","severity","danger",3,"click"],["direction","none","size","sm","label","Si, eliminar","variant","fill","severity","success",3,"click"]],template:function(gt,St){1&gt&&(T.j41(0,"section",0),T.DNE(1,Ct,1,3,"app-label",1),T.j41(2,"section",2)(3,"span",3)(4,"label",4),T.EFF(5,"Buscador"),T.k0s(),T.nrm(6,"input",5),T.k0s(),T.j41(7,"app-button",6),T.bIt("clickEvent",function(De){return St.showMedCategories(De)}),T.k0s(),T.nrm(8,"app-dropdown",7),T.k0s(),T.DNE(9,kt,1,1,"app-navbar",8),T.nrm(10,"hr"),T.k0s(),T.DNE(11,Xe,5,8,"ng-container",9),T.nI1(12,"async"),T.DNE(13,Vn,3,4,"app-modal",10)),2&gt&&(T.R7$(),T.vxM(St.loggedUser?1:-1),T.R7$(5),T.Y8G("formControl",St.searchControl),T.R7$(),T.Y8G("direction","none")("icon",St.medCategories?"chevron-up":"chevron-down")("variant","outline"),T.R7$(),T.Y8G("items",St.getRegistroOptions())("position",St.splitButtonPosition),T.R7$(),T.vxM(St.medCategories?9:-1),T.R7$(2),T.Y8G("ngIf",T.bMT(12,10,St.registros$)),T.R7$(2),T.vxM(St.isModalOpen&&St.itemToDelete?13:-1))},dependencies:[L.U,me.MD,me.Sq,me.bT,me.Jj,Ae.i,Pe.n,pt.Q,It,Mt.P,tn.X1,tn.me,tn.BC,tn.l_,Nt.z],styles:["ul[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box}ul.list__wrapper--flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--form__gap--col)}ul.list__wrapper--center[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:0 1vw}ul.list__wrapper--grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;row-gap:var(--list__item--gap);column-gap:var(--list__item--gap);padding:var(--list__item--padding);width:100%;box-sizing:border-box;box-shadow:0 0 4px 0 var(--shadow);height:-moz-fit-content;height:fit-content;min-height:120px;border-radius:var(--card__border--radius);border-bottom:solid 1px var(--primaryLight)}ul.list__item--row[_ngcontent-%COMP%]{flex-direction:row}ul.list__item--vertical[_ngcontent-%COMP%]{flex-direction:column}"]})}return Bt})()},223:(yn,wt,ie)=>{ie.d(wt,{n:()=>Be});var D=ie(177),T=ie(3953);function L(Ze,Ce){if(1&Ze&&T.nrm(0,"i"),2&Ze){const Ke=T.XpG();T.HbH(Ke.badgeIconClass)}}let Be=(()=>{class Ze{constructor(){this.severity="info",this.size="md",this.badgeStyle={},this.badgeIconClass=""}ngOnChanges(){this.setBadgeProperties()}setBadgeProperties(){switch(this.severity){case"success":this.badgeStyle={"background-color":"var(--success--light)",color:"var(--success--dark)"},this.badgeIconClass="fa-solid fa-circle-check";break;case"warning":this.badgeStyle={"background-color":"var(--warning--light)",color:"var(--warning)"},this.badgeIconClass="fa-solid fa-circle-exclamation";break;case"danger":this.badgeStyle={"background-color":"var(--danger--light)",color:"var(--danger)"},this.badgeIconClass="fa-solid fa-triangle-exclamation";break;case"info":this.badgeStyle={"background-color":"var(--info--light)",color:"var(--info)"},this.badgeIconClass="fa-solid fa-circle-info";break;case"neutral":this.badgeStyle={"background-color":"#e0e0e0",color:"#6c757d"},this.badgeIconClass="fa-solid fa-circle-question"}}static#e=this.\u0275fac=function(Et){return new(Et||Ze)};static#t=this.\u0275cmp=T.VBU({type:Ze,selectors:[["app-badge"]],inputs:{severity:"severity",size:"size",label:"label"},standalone:!0,features:[T.OA$,T.aNF],decls:4,vars:5,consts:[[3,"ngStyle"],[3,"class",4,"ngIf"]],template:function(Et,rt){1&Et&&(T.j41(0,"span",0),T.DNE(1,L,1,2,"i",1),T.j41(2,"p"),T.EFF(3),T.k0s()()),2&Et&&(T.HbH("badge__wrapper--"+rt.size),T.Y8G("ngStyle",rt.badgeStyle),T.R7$(),T.Y8G("ngIf",rt.badgeIconClass),T.R7$(2),T.JRh(rt.label))},dependencies:[D.MD,D.bT,D.B3],styles:["app-badge[_ngcontent-%COMP%]   [class^=badge__wrapper][_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.5em 1em;border-radius:6px;font-weight:400;font-size:var(--badge__font--size);align-self:center;text-wrap:nowrap;text-overflow:ellipsis}app-badge[_ngcontent-%COMP%]   [class^=badge__wrapper][_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5em}"]})}return Ze})()},1229:(yn,wt,ie)=>{ie.d(wt,{Q:()=>Ke});var D=ie(3953),T=ie(177),L=ie(1827),Be=ie(7407);const Ze=Et=>[Et];function Ce(Et,rt){if(1&Et&&(D.j41(0,"span",3),D.EFF(1),D.k0s()),2&Et){const me=D.XpG();D.R7$(),D.JRh(me.badgeCount)}}let Ke=(()=>{class Et{constructor(me){this.router=me,this.variant="fill",this.type="button",this.severity="info",this.size="md",this.direction="column",this.clickEvent=new D.bkB}handleClick(){this.clickEvent.emit(),this.path&&this.router.navigate([this.path]).catch(me=>{console.error("Navigation error:",me)})}setButtonClass(){return`button__size--${this.size} button__${this.variant}--${this.severity}`}setFabPositionStyles(){return"fab"===this.variant?{top:this.top,right:this.right,bottom:this.bottom,left:this.left}:{}}static#e=this.\u0275fac=function(Ae){return new(Ae||Et)(D.rXU(Be.Ix))};static#t=this.\u0275cmp=D.VBU({type:Et,selectors:[["app-button"]],inputs:{variant:"variant",type:"type",severity:"severity",size:"size",icon:"icon",label:"label",badgeCount:"badgeCount",prefix:"prefix",subtitle:"subtitle",path:"path",direction:"direction",top:"top",right:"right",bottom:"bottom",left:"left",disabled:"disabled"},outputs:{clickEvent:"clickEvent"},standalone:!0,features:[D.aNF],decls:3,vars:14,consts:[[3,"click","type","disabled","ngClass","ngStyle"],[3,"icon","severity","label","subtitle","prefix","direction","size"],["class","button__badge",4,"ngIf"],[1,"button__badge"]],template:function(Ae,Pe){1&Ae&&(D.j41(0,"button",0),D.bIt("click",function(){return Pe.handleClick()}),D.nrm(1,"app-label",1),D.DNE(2,Ce,2,1,"span",2),D.k0s()),2&Ae&&(D.FS9("type",Pe.type),D.Y8G("disabled",Pe.disabled)("ngClass",D.eq3(12,Ze,"button__size--"+Pe.size+" button__"+Pe.variant+"--"+Pe.severity))("ngStyle",Pe.setFabPositionStyles()),D.R7$(),D.Y8G("icon",Pe.icon)("severity",Pe.severity)("label",Pe.label)("subtitle",Pe.subtitle)("prefix",Pe.prefix)("direction",Pe.direction)("size",Pe.size),D.R7$(),D.Y8G("ngIf",Pe.badgeCount))},dependencies:[T.MD,T.YU,T.bT,T.B3,L.U],styles:["app-button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:var(--button__padding);background:var(--button__bg--color);font-size:var(--button__font--size);color:var(--button__text--color);text-align:var(--button__text--align);border-radius:var(--button__border--radius);width:var(--button__width);text-transform:capitalize;text-wrap:nowrap}app-button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{filter:brightness(120%);cursor:pointer}app-button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background-color:var(--secondary);filter:brightness(95%);cursor:grab}app-button[_ngcontent-%COMP%] > button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.5;-webkit-user-select:none;user-select:none}app-button[_ngcontent-%COMP%] > button[class*=__fill][_ngcontent-%COMP%]{--button__text--color: white!important;--label__title--color: white;--button__border--color: transparent!important;border:solid 2px var(--button__border--color)}app-button[_ngcontent-%COMP%] > button[class*=__outline][_ngcontent-%COMP%]{--label__title--color: var(--button__bg--color);--button__border--color: var(--button__bg--color);background:transparent!important;border:solid 2px var(--button__bg--color);color:var(--label__title--color)}app-button[_ngcontent-%COMP%] > button[class*=__link][_ngcontent-%COMP%]{--button__border--color: var(--button__bg--color);--button__padding: 0;background:transparent!important;border:none!important;color:var(--button__bg--color)!important}app-button[_ngcontent-%COMP%] > button[class*=__fab][_ngcontent-%COMP%]{--button__text--color: white!important;--label__title--color: white;--button__border--color: transparent!important;position:absolute;width:calc(var(--button__font--size) * 7.5);height:calc(var(--button__font--size) * 7.5);border:solid 2px var(--button__border--color);border-radius:50%;z-index:3}app-button[_ngcontent-%COMP%] > button[class*=__icon][_ngcontent-%COMP%]{background-color:transparent;color:var(--label__title--color);padding:.5rem}app-button[_ngcontent-%COMP%] > button[class$=--primary][_ngcontent-%COMP%]{--button__text--color: inherit;--button__border--color: var(--primary);--button__bg--color: var(--primary)}app-button[_ngcontent-%COMP%] > button[class$=--secondary][_ngcontent-%COMP%]{--button__text--color: inherit;--button__border--color: var(--secondary);--button__bg--color: var(--secondary)}app-button[_ngcontent-%COMP%] > button[class$=--tertiary][_ngcontent-%COMP%]{--button__text--color: inherit;--button__border--color: var(--tertiary);--button__bg--color: var(--tertiary)}app-button[_ngcontent-%COMP%] > button[class$=--success][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--success)}app-button[_ngcontent-%COMP%] > button[class$=--warning][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--warning)}app-button[_ngcontent-%COMP%] > button[class$=--danger][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--danger)}app-button[_ngcontent-%COMP%] > button[class$=--info][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--info)}app-button[_ngcontent-%COMP%] > button[class$=--neutral][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--neutral)}app-button[_ngcontent-%COMP%] > button.button__size--xxs[_ngcontent-%COMP%]{--button__padding: .1rem .2rem;--button__font--size: 8px}app-button[_ngcontent-%COMP%] > button.button__size--xs[_ngcontent-%COMP%]{--button__padding: .2rem .25rem;--button__font--size: 10px}app-button[_ngcontent-%COMP%] > button.button__size--sm[_ngcontent-%COMP%]{--button__padding: .4rem .6rem;--button__font--size: 12px}app-button[_ngcontent-%COMP%] > button.button__size--md[_ngcontent-%COMP%]{--button__padding: .5rem 1rem;--button__font--size: 14px}app-button[_ngcontent-%COMP%] > button.button__size--lg[_ngcontent-%COMP%]{--button__padding: .65rem 1.25rem;--button__font--size: 16px}app-button[_ngcontent-%COMP%] > button.button__size--xl[_ngcontent-%COMP%]{--button__padding: .9rem 1.5rem;--button__font--size: 18px}app-button[_ngcontent-%COMP%] > button.button__size--full[_ngcontent-%COMP%]{display:block}"]})}return Et})()},7533:(yn,wt,ie)=>{ie.d(wt,{i:()=>rt});var D=ie(3953),T=ie(1827),L=ie(177),Be=ie(1229);const Ze=["cardColor"],Ce=[[["app-label"]]],Ke=["app-label"];function Et(me,Ae){if(1&me){const Pe=D.RV6();D.j41(0,"app-button",3),D.bIt("click",function(Ue){D.eBV(Pe);const It=D.XpG();return D.Njj(It.closeCard(Ue))}),D.k0s()}}let rt=(()=>{class me{constructor(){this.selected=!1,this.aligned="center",this.selectable=!1,this.align="center",this.size="md",this.severity="neutral",this.variant="outline",this.direction="column",this.color="",this.closable=!1,this.cardSelected=new D.bkB}get cssDirection(){return"row"===this.direction?"card__wrapper--row":"card__wrapper--column"}ngAfterViewInit(){this.label&&(this.label.direction=this.direction),"custom"===this.severity&&this.color&&this.applyCustomColor()}applyCustomColor(){this.cardColor.nativeElement.style.setProperty("--card__border--color",this.color),this.cardColor.nativeElement.style.setProperty("--card__bg--color",`${this.color}25`),this.label&&(this.label.severity=this.color)}ngOnChanges(Pe){Pe.direction&&this.label&&(this.label.direction=this.direction)}closeCard(Pe){Pe.stopPropagation(),this.cardColor.nativeElement.remove()}onCardClick(){this.selectable&&this.cardSelected.emit()}setFabPositionStyles(){return"fab"===this.variant?{position:"absolute",top:this.top,right:this.right,bottom:this.bottom,left:this.left}:{}}static#e=this.\u0275fac=function(pt){return new(pt||me)};static#t=this.\u0275cmp=D.VBU({type:me,selectors:[["app-card"]],viewQuery:function(pt,Ue){if(1&pt&&(D.GBs(Ze,7),D.GBs(T.U,7)),2&pt){let It;D.mGM(It=D.lsd())&&(Ue.cardColor=It.first),D.mGM(It=D.lsd())&&(Ue.label=It.first)}},inputs:{selected:"selected",aligned:"aligned",selectable:"selectable",align:"align",size:"size",severity:"severity",variant:"variant",direction:"direction",color:"color",closable:"closable",top:"top",right:"right",bottom:"bottom",left:"left"},outputs:{cardSelected:"cardSelected"},standalone:!0,features:[D.OA$,D.aNF],ngContentSelectors:Ke,decls:4,vars:13,consts:[["cardColor",""],["tabindex","0",3,"click","ngStyle","ngClass"],["variant","link","icon","close","size","xs","severity","neutral"],["variant","link","icon","close","size","xs","severity","neutral",3,"click"]],template:function(pt,Ue){if(1&pt){const It=D.RV6();D.NAR(Ce),D.j41(0,"div",1,0),D.bIt("click",function(){return D.eBV(It),D.Njj(Ue.onCardClick())}),D.SdG(2),D.DNE(3,Et,1,0,"app-button",2),D.k0s()}2&pt&&(D.ee0("card card__",Ue.variant,"--",Ue.severity," card--",Ue.size," card--",Ue.aligned,""),D.AVh("card--selectable",Ue.selectable)("card--selected",Ue.selected),D.Y8G("ngStyle",Ue.setFabPositionStyles())("ngClass",Ue.cssDirection),D.R7$(3),D.vxM(Ue.closable?3:-1))},dependencies:[L.MD,L.YU,L.B3,Be.Q],styles:["app-card[_ngcontent-%COMP%]{width:100%}app-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:var(--card__direction);justify-content:var(--card__wrapper--justify);align-items:var(--card__wrapper--align);background-color:transparent;padding:var(--card__padding);gap:var(--card__gap);text-align:var(--card__text--align);border-radius:var(--card__border--radius);box-sizing:border-box;width:var(--card__width);height:var(--card__height);z-index:3}app-card[_ngcontent-%COMP%]   .card__wrapper--row[_ngcontent-%COMP%]{--card__direction: row;--card__wrapper--justify: space-between;--card__text--align: left}app-card[_ngcontent-%COMP%]   .card__wrapper--row[_ngcontent-%COMP%]   .card__inner-wrapper--left[_ngcontent-%COMP%]{width:180px}app-card[_ngcontent-%COMP%]   .card__wrapper--row[_ngcontent-%COMP%]   .card__inner-wrapper--right[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;width:-moz-fit-content;width:fit-content}app-card[_ngcontent-%COMP%]   .card__wrapper--column[_ngcontent-%COMP%]{--card__wrapper--justify: flex-start;--card__direction: column}app-card[_ngcontent-%COMP%]   .card--center[_ngcontent-%COMP%]{justify-self:center}app-card[_ngcontent-%COMP%]   .card.card__fill--custom[_ngcontent-%COMP%], app-card[_ngcontent-%COMP%]   .card.card__outline--custom[_ngcontent-%COMP%], app-card[_ngcontent-%COMP%]   .card.card__fab--custom[_ngcontent-%COMP%]{--card__bg--color: var(--card__bg--color);--card__border--color: var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--custom.card--selectable[_ngcontent-%COMP%]:hover, app-card[_ngcontent-%COMP%]   .card.card__outline--custom.card--selectable[_ngcontent-%COMP%]:hover, app-card[_ngcontent-%COMP%]   .card.card__fab--custom.card--selectable[_ngcontent-%COMP%]:hover{background-color:var(--card__bg--color);border:solid 2px var(--card__border--color);cursor:pointer}app-card[_ngcontent-%COMP%]   .card.card__fill--primary[_ngcontent-%COMP%]{--card__border--color: var(--primary)}app-card[_ngcontent-%COMP%]   .card.card__fill--primary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--primaryLight);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--primary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--secondary[_ngcontent-%COMP%]{--card__border--color: var(--secondary)}app-card[_ngcontent-%COMP%]   .card.card__fill--secondary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--secondaryLight);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--secondary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--tertiary[_ngcontent-%COMP%]{--card__border--color: var(--tertiary)}app-card[_ngcontent-%COMP%]   .card.card__fill--tertiary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--tertiaryLight);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--tertiary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--info[_ngcontent-%COMP%]{--card__border--color: var(--info)}app-card[_ngcontent-%COMP%]   .card.card__fill--info.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--info--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--info.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--neutral[_ngcontent-%COMP%]{--card__border--color: var(--neutral)}app-card[_ngcontent-%COMP%]   .card.card__fill--neutral.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--neutral--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--neutral.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--success[_ngcontent-%COMP%]{--card__border--color: var(--success);--card__bg--color: var(--success--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--success.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--success--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--success.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--warning[_ngcontent-%COMP%]{--card__border--color: var(--warning);--card__bg--color: var(--warning--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--warning.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--warning--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--warning.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--danger[_ngcontent-%COMP%]{--card__border--color: var(--danger);--card__bg--color: var(--danger--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--danger.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--danger--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--danger.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--primary[_ngcontent-%COMP%]{--card__border--color: var(--card__text--color);border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--primary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--primaryLighter);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--primary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--secondary[_ngcontent-%COMP%]{--card__border--color: var(--secondary)}app-card[_ngcontent-%COMP%]   .card.card__outline--secondary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--secondaryLighter);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--secondary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--tertiary[_ngcontent-%COMP%]{--card__border--color: var(--tertiary)}app-card[_ngcontent-%COMP%]   .card.card__outline--tertiary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--tertiaryLighter);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--tertiary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--info[_ngcontent-%COMP%]{--card__border--color: var(--info)}app-card[_ngcontent-%COMP%]   .card.card__outline--info.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--info--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--info.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--neutral[_ngcontent-%COMP%]{--card__border--color: var(--neutral)}app-card[_ngcontent-%COMP%]   .card.card__outline--neutral.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--neutral--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--neutral.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab[_ngcontent-%COMP%]{animation:fade-in 1.5s ease-in}app-card[_ngcontent-%COMP%]   .card.card__fab--success[_ngcontent-%COMP%]{--card__border--color: var(--success);--card__bg--color: var(--success--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--success.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--success--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--success.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--warning[_ngcontent-%COMP%]{--card__border--color: var(--warning);--card__bg--color: var(--warning--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--warning.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--warning--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--warning.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--danger[_ngcontent-%COMP%]{--card__border--color: var(--danger);--card__bg--color: var(--danger--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--danger.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--danger--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--danger.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--info[_ngcontent-%COMP%]{--card__border--color: var(--info);--card__bg--color: var(--info--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--info.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--info--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--info.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card--selected[_ngcontent-%COMP%]{border:solid 2px var(--card__border--color);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card--xs[_ngcontent-%COMP%]{--card__width: 90px;--card__padding: 12px;--card__height: 100%;background-color:#f1f4f5;width:var(--card__width);height:var(--card__height)}app-card[_ngcontent-%COMP%]   .card--sm[_ngcontent-%COMP%]{--card__padding: 6px 14px}app-card[_ngcontent-%COMP%]   .card--md[_ngcontent-%COMP%]{--card__padding: 0 0 0 12px;--card__width: 100%;--card__height: 100%;width:var(--card__width);height:var(--card__height)}app-card[_ngcontent-%COMP%]   .card--md[_ngcontent-%COMP%]   .label__content[_ngcontent-%COMP%]{row-gap:4px}app-card[_ngcontent-%COMP%]   .card--lg[_ngcontent-%COMP%]{--card__padding: 10px 18px}app-card[_ngcontent-%COMP%]   .card--xl[_ngcontent-%COMP%]{--card__padding: 12px 24px}app-card[_ngcontent-%COMP%]   .card--block[_ngcontent-%COMP%]{width:100%}app-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{margin-bottom:.75rem;object-fit:cover}"]})}return me})()},5023:(yn,wt,ie)=>{ie.d(wt,{P:()=>Ae});var D=ie(3953),T=ie(177),L=ie(1229),Be=ie(7407);const Ze=(Pe,pt)=>({top:Pe,left:pt}),Ce=Pe=>({nested:Pe});function Ke(Pe,pt){if(1&Pe){const Ue=D.RV6();D.qex(0),D.j41(1,"app-button",8),D.bIt("clickEvent",function(){D.eBV(Ue);const Mt=D.XpG().$implicit;return D.Njj(Mt.callback?Mt.callback():null)}),D.k0s(),D.bVm()}if(2&Pe){const Ue=D.XpG().$implicit;D.R7$(),D.Y8G("variant","link")("direction","row")("size","xxs")("icon",Ue.icon)("label",Ue.label)("path",Ue.path)("disabled",Ue.disabled)}}function Et(Pe,pt){if(1&Pe){const Ue=D.RV6();D.j41(0,"app-button",8),D.bIt("clickEvent",function(){D.eBV(Ue);const Mt=D.XpG().$implicit;return D.Njj(Mt.callback?Mt.callback():null)}),D.k0s()}if(2&Pe){const Ue=D.XpG().$implicit;D.Y8G("variant","link")("direction","row")("size","xxs")("icon",Ue.icon)("label",Ue.label)("path",Ue.path)("disabled",Ue.disabled)}}function rt(Pe,pt){if(1&Pe&&(D.qex(0),D.DNE(1,Ke,2,7,"ng-container",7)(2,Et,1,7,"ng-template",null,0,D.C5r),D.bVm()),2&Pe){const Ue=pt.$implicit,It=D.sdS(3);D.R7$(),D.Y8G("ngIf",!Ue.subItems)("ngIfElse",It)}}function me(Pe,pt){if(1&Pe&&(D.j41(0,"div",4)(1,"div",5),D.DNE(2,rt,4,2,"ng-container",6),D.k0s()()),2&Pe){const Ue=D.XpG();D.Y8G("ngStyle",D.l_i(3,Ze,null==Ue.position?null:Ue.position.top,null==Ue.position?null:Ue.position.left)),D.R7$(),D.Y8G("ngClass",D.eq3(6,Ce,Ue.hasNestedItems)),D.R7$(),D.Y8G("ngForOf",Ue.items)}}let Ae=(()=>{class Pe{constructor(Ue){this.router=Ue,this.items=[],this.buttonVariant="link",this.buttonSeverity="info",this.buttonDirection="none",this.buttonSize="sm",this.itemSelected=new D.bkB,this.isOpen=!1,this.hasNestedItems=!1}onClick(Ue){!Ue.target.closest(".dropdown-container")&&this.isOpen&&this.close()}toggle(Ue){this.isOpen=!this.isOpen,this.hasNestedItems=this.items.some(It=>It.subItems&&It.subItems.length>0),Ue.stopPropagation()}onItemClicked(Ue){this.itemSelected.emit(Ue),Ue.callback&&Ue.callback(),this.close()}handleNestedItemClick(Ue){this.itemSelected.emit(Ue),this.close()}close(){this.isOpen=!1}static#e=this.\u0275fac=function(It){return new(It||Pe)(D.rXU(Be.Ix))};static#t=this.\u0275cmp=D.VBU({type:Pe,selectors:[["app-dropdown"]],hostBindings:function(It,Mt){1&It&&D.bIt("click",function(Nt){return Mt.onClick(Nt)},!1,D.EBC)},inputs:{items:"items",position:"position",buttonLabel:"buttonLabel",buttonIcon:"buttonIcon",buttonVariant:"buttonVariant",buttonSeverity:"buttonSeverity",buttonDirection:"buttonDirection",buttonSize:"buttonSize"},outputs:{itemSelected:"itemSelected"},standalone:!0,features:[D.aNF],decls:3,vars:7,consts:[["nestedItems",""],[1,"dropdown-container"],[3,"click","size","severity","variant","direction","icon","label"],["class","dropdown-menu",3,"ngStyle",4,"ngIf"],[1,"dropdown-menu",3,"ngStyle"],[1,"dropdown-content",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[3,"clickEvent","variant","direction","size","icon","label","path","disabled"]],template:function(It,Mt){1&It&&(D.j41(0,"div",1)(1,"app-button",2),D.bIt("click",function(Nt){return Mt.toggle(Nt)}),D.k0s(),D.DNE(2,me,3,8,"div",3),D.k0s()),2&It&&(D.R7$(),D.Y8G("size",Mt.buttonSize)("severity",Mt.buttonSeverity)("variant",Mt.buttonVariant)("direction",Mt.buttonDirection)("icon",Mt.buttonIcon)("label",Mt.buttonLabel),D.R7$(),D.Y8G("ngIf",Mt.isOpen))},dependencies:[T.MD,T.YU,T.Sq,T.bT,T.B3,L.Q],styles:[".dropdown-container[_ngcontent-%COMP%]{position:relative}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;z-index:1000;background-color:#fff;border:1px solid #ccc;box-shadow:0 2px 10px #0003;width:200px;overflow:hidden}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-label[_ngcontent-%COMP%], .dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{margin-bottom:.5rem}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-label[_ngcontent-%COMP%]:last-child, .dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]})}return Pe})()},1827:(yn,wt,ie)=>{ie.d(wt,{U:()=>Ae});var D=ie(177),T=ie(3953);const L=["labelColor"],Be=[[["app-badge"]],[["app-button"]],[["app-dropdown"]]],Ze=["app-badge","app-button","app-dropdown"],Ce=(Pe,pt,Ue)=>[Pe,pt,Ue];function Ke(Pe,pt){if(1&Pe&&(T.j41(0,"div",3),T.nrm(1,"i"),T.k0s()),2&Pe){const Ue=T.XpG();T.Y8G("ngClass",Ue.label?"":"icon__border--none"),T.R7$(),T.ZvI("fa-solid fa-",Ue.icon,""),T.BMQ("aria-label",Ue.iconLabel)}}function Et(Pe,pt){if(1&Pe&&(T.j41(0,"div",5),T.EFF(1),T.k0s()),2&Pe){const Ue=T.XpG();T.R7$(),T.JRh(Ue.prefix)}}function rt(Pe,pt){if(1&Pe&&(T.j41(0,"div",6),T.EFF(1),T.k0s()),2&Pe){const Ue=T.XpG();T.R7$(),T.JRh(Ue.label)}}function me(Pe,pt){if(1&Pe&&(T.j41(0,"div",7),T.EFF(1),T.k0s()),2&Pe){const Ue=T.XpG();T.R7$(),T.JRh(Ue.subtitle)}}let Ae=(()=>{class Pe{constructor(){this.severity="neutral",this.direction="column",this.size="md"}ngOnChanges(Ue){this.updateIconColor()}updateIconColor(){"string"==typeof this.severity&&(["primary","secondary","tertiary","neutral"].includes(this.severity)?this.labelColor.nativeElement.style.setProperty("--label__icon--color",`var(--${this.severity})`):this.labelColor.nativeElement.style.setProperty("--label__icon--color",this.color))}static#e=this.\u0275fac=function(It){return new(It||Pe)};static#t=this.\u0275cmp=T.VBU({type:Pe,selectors:[["app-label"]],viewQuery:function(It,Mt){if(1&It&&T.GBs(L,7),2&It){let tn;T.mGM(tn=T.lsd())&&(Mt.labelColor=tn.first)}},inputs:{icon:"icon",img:"img",iconLabel:"iconLabel",severity:"severity",color:"color",label:"label",subtitle:"subtitle",prefix:"prefix",direction:"direction",size:"size"},standalone:!0,features:[T.OA$,T.aNF],ngContentSelectors:Ze,decls:13,vars:9,consts:[["labelColor",""],[1,"panel__header"],[1,"label",3,"ngClass"],[1,"label__icon",3,"ngClass"],[1,"label__content"],[1,"label__prefix"],[1,"label__title"],[1,"label__subtitle"],[1,"button__group"],[1,"label__menu"]],template:function(It,Mt){1&It&&(T.NAR(Be),T.j41(0,"section",1)(1,"span",2,0),T.DNE(3,Ke,2,5,"div",3),T.j41(4,"div",4),T.DNE(5,Et,2,1,"div",5)(6,rt,2,1,"div",6)(7,me,2,1,"div",7),T.j41(8,"span",8),T.SdG(9),T.k0s()(),T.j41(10,"div",9),T.SdG(11,1),T.SdG(12,2),T.k0s()()()),2&It&&(T.R7$(),T.Y8G("ngClass",T.sMw(5,Ce,Mt.size,Mt.direction,Mt.severity)),T.R7$(2),T.vxM(Mt.icon?3:-1),T.R7$(2),T.vxM(Mt.prefix?5:-1),T.R7$(),T.vxM(Mt.label?6:-1),T.R7$(),T.vxM(Mt.subtitle?7:-1))},dependencies:[D.MD,D.YU],styles:["app-label[_ngcontent-%COMP%]   .label__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}app-label[_ngcontent-%COMP%]{width:100%}app-label[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%;height:-moz-fit-content;height:fit-content}app-label[_ngcontent-%COMP%]   .label.row[_ngcontent-%COMP%]{flex-direction:row;align-items:center;column-gap:.65rem}app-label[_ngcontent-%COMP%]   .label.row[_ngcontent-%COMP%] > .label__icon[_ngcontent-%COMP%]{--label__icon--align: center}app-label[_ngcontent-%COMP%]   .label.column[_ngcontent-%COMP%]{--button__text--align: center;flex-direction:column;align-items:center;justify-content:center;row-gap:var(--label__gap);text-align:center}app-label[_ngcontent-%COMP%]   .label.xxs[_ngcontent-%COMP%]{--label__prefix--size: 8px;--label__subtitle--size: 10px;--label__icon--size: 12px}app-label[_ngcontent-%COMP%]   .label.xs[_ngcontent-%COMP%]{--label__prefix--size: 10px;--label__subtitle--size: 11px;--label__icon--size: 14px}app-label[_ngcontent-%COMP%]   .label.sm[_ngcontent-%COMP%]{--label__prefix--size: 11px;--label__subtitle--size: 12px;--label__icon--size: 16px}app-label[_ngcontent-%COMP%]   .label.md[_ngcontent-%COMP%]{--label__prefix--size: 12px;--label__subtitle--size: 14px;--label__icon--size: 36px}app-label[_ngcontent-%COMP%]   .label.md[_ngcontent-%COMP%] > .label__content[_ngcontent-%COMP%]{row-gap:8px}app-label[_ngcontent-%COMP%]   .label.lg[_ngcontent-%COMP%]{--label__prefix--size: 14px;--label__subtitle--size: 16px;--label__icon--size: 56px}app-label[_ngcontent-%COMP%]   .label.xl[_ngcontent-%COMP%]{--label__prefix--size: 18px;--label__subtitle--size: 20px;--label__icon--size: 64px}app-label[_ngcontent-%COMP%]   .label__icon[_ngcontent-%COMP%]{padding:.5rem;border:solid 2px var(--label__icon--color);border-radius:50%;color:var(--label__icon--color);width:var(--label__icon--size);height:var(--label__icon--size);align-self:var(--label__icon--align)}app-label[_ngcontent-%COMP%]   .label__icon.icon__border--none[_ngcontent-%COMP%]{border:none}app-label[_ngcontent-%COMP%]   .label.column[_ngcontent-%COMP%]   .label__icon[_ngcontent-%COMP%]{--label__icon--align: center}app-label[_ngcontent-%COMP%]   .label__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;overflow:hidden;line-height:1.5;width:var(--label__width)}app-label[_ngcontent-%COMP%]   .label__prefix[_ngcontent-%COMP%]{font-size:var(--label__prefix--size);color:var(--label__prefix--color);text-transform:uppercase}app-label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{color:var(--label__title--color);font-weight:600;line-height:1.25;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;text-overflow:ellipsis;overflow:hidden}app-label[_ngcontent-%COMP%]   .label__subtitle[_ngcontent-%COMP%]{font-size:var(--label__subtitle--size);color:var(--label__subtitle--color);width:-webkit-fill-available;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;text-overflow:ellipsis;overflow:hidden}.button__group[_ngcontent-%COMP%]{--panel__direction: row;display:flex;flex-direction:row;align-items:center;justify-content:flex-start;column-gap:var(--wrapper__gap--col);width:100%}.label.xxs[_ngcontent-%COMP%]{font-size:12px}.label.xs[_ngcontent-%COMP%]{font-size:14px}.label.sm[_ngcontent-%COMP%]{font-size:16px}.label.md[_ngcontent-%COMP%]{font-size:20px}.label.lg[_ngcontent-%COMP%]{font-size:30px}.label.xl[_ngcontent-%COMP%]{font-size:40px}"]})}return Pe})()},7587:(yn,wt,ie)=>{ie.d(wt,{z:()=>rt});var D=ie(3953),T=ie(1827),L=ie(1229);const Be=[[["app-button","severity","danger"]],[["app-button","variant","outline"]],[["app-button","severity","success"]]],Ze=["app-button[severity=danger]","app-button[variant=outline]","app-button[severity=success]"];function Ce(me,Ae){if(1&me){const Pe=D.RV6();D.j41(0,"app-button",12),D.bIt("click",function(){D.eBV(Pe);const Ue=D.XpG();return D.Njj(Ue.close())}),D.k0s()}}function Ke(me,Ae){if(1&me&&D.nrm(0,"img",7),2&me){const Pe=D.XpG();D.FS9("alt",Pe.caption),D.Y8G("src",Pe.img,D.B4B)}}function Et(me,Ae){if(1&me&&(D.j41(0,"p",8),D.EFF(1),D.k0s()),2&me){const Pe=D.XpG();D.R7$(),D.JRh(Pe.caption)}}let rt=(()=>{class me{constructor(){this.size="md",this.closeModal=new D.bkB,this.confirmAction=new D.bkB}close(){this.closeModal.emit()}confirm(){this.confirmAction.emit(),this.close()}static#e=this.\u0275fac=function(pt){return new(pt||me)};static#t=this.\u0275cmp=D.VBU({type:me,selectors:[["app-modal"]],inputs:{img:"img",caption:"caption",prefix:"prefix",title:"title",subtitle:"subtitle",icon:"icon",size:"size",closeable:"closeable"},outputs:{closeModal:"closeModal",confirmAction:"confirmAction"},standalone:!0,features:[D.aNF],ngContentSelectors:Ze,decls:15,vars:8,consts:[[1,"modal__backdrop",3,"click"],[1,"modal__wrapper",3,"click"],[1,"modal__header"],["direction","row",3,"prefix","icon","size","label","subtitle"],["icon","close","variant","icon","severity","primary"],[1,"modal__body"],[1,"modal__img--wrapper"],[1,"modal__img",3,"src","alt"],[1,"modal__caption"],[1,"modal__footer"],[1,"modal__footer--left"],[1,"modal__footer--right"],["icon","close","variant","icon","severity","primary",3,"click"]],template:function(pt,Ue){1&pt&&(D.NAR(Be),D.j41(0,"span",0),D.bIt("click",function(){return Ue.close()}),D.j41(1,"section",1),D.bIt("click",function(Mt){return Mt.stopPropagation()}),D.j41(2,"header",2)(3,"app-label",3),D.DNE(4,Ce,1,0,"app-button",4),D.k0s()(),D.j41(5,"div",5)(6,"figure",6),D.DNE(7,Ke,1,2,"img",7)(8,Et,2,1,"p",8),D.k0s()(),D.j41(9,"footer",9)(10,"span",10),D.SdG(11),D.SdG(12,1),D.k0s(),D.j41(13,"span",11),D.SdG(14,2),D.k0s()()()()),2&pt&&(D.R7$(3),D.Y8G("prefix",Ue.prefix)("icon",Ue.icon)("size",Ue.size)("label",Ue.title)("subtitle",Ue.subtitle),D.R7$(),D.vxM(Ue.closeable?4:-1),D.R7$(3),D.vxM(Ue.img?7:-1),D.R7$(),D.vxM(Ue.caption?8:-1))},dependencies:[T.U,L.Q],styles:[".modal__backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:3}.modal__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:var(--wrapper__gap);background-color:#fff;padding:1.5rem;border-radius:8px;max-width:80vw;max-height:75vh;width:500px;height:-moz-fit-content;height:fit-content;position:relative;box-shadow:var(--box-shadow)}.modal__wrapper[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:var(--wrapper__gap)}.modal__wrapper[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]   .modal__img--wrapper[_ngcontent-%COMP%]   .modal__img[_ngcontent-%COMP%]{width:100%;max-height:280px;object-fit:contain}.modal__wrapper[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]   .modal__img--wrapper[_ngcontent-%COMP%]   .modal__caption[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.875rem;color:var(--neutral)}.modal__wrapper[_ngcontent-%COMP%]   .modal__footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}@media screen and (max-width: 768px){.modal__content[_ngcontent-%COMP%]{max-width:90%;padding:1rem}}"]})}return me})()},5699:(yn,wt,ie)=>{ie.d(wt,{d:()=>L});var D=ie(4341),T=ie(3953);let L=(()=>{class Be{constructor(Ce){this.formGroupDirective=Ce,this.isRequired=!1}ngOnInit(){if(this.control){const Ce=this.getFormControl(this.control);Ce&&(this.isRequired=this.hasRequiredValidator(Ce))}}getFormControl(Ce){return this.formGroupDirective.form.get(Ce)}hasRequiredValidator(Ce){return Ce.hasValidator(D.k0.required)}static#e=this.\u0275fac=function(Ke){return new(Ke||Be)(T.rXU(D.j4))};static#t=this.\u0275cmp=T.VBU({type:Be,selectors:[["app-required"]],inputs:{label:"label",control:"control"},standalone:!0,features:[T.aNF],decls:4,vars:3,consts:[[3,"for"],[1,"required"]],template:function(Ke,Et){1&Ke&&(T.j41(0,"label",0),T.EFF(1),T.k0s(),T.j41(2,"span",1),T.EFF(3),T.k0s()),2&Ke&&(T.Y8G("for",Et.control),T.R7$(),T.SpI(" ",Et.label,"\n"),T.R7$(2),T.JRh(Et.isRequired?"*":" "))}})}return Be})()},6184:(yn,wt,ie)=>{var D=ie(345),T=ie(7407),L=ie(3953),Be=ie(8010),Ze=ie(6354);const Ce=()=>(0,L.WQX)(T.Ix),Ke=()=>(0,L.WQX)(Be.u).authState$;var me=ie(467),Ae=ie(4341),Pe=ie(4258),pt=ie(6335),Ue=ie(1827),It=ie(223),Mt=ie(1229),tn=ie(8359),Nt=ie(177);function On(i,e){if(1&i&&(L.j41(0,"label",4),L.EFF(1),L.k0s()),2&i){const n=L.XpG();L.STu("switcher__label switcher__label--right switcher--",n.size," ",n.on?"switcher--on":"switcher--off",""),L.R7$(),L.JRh(n.on?n.onLabel:n.offLabel)}}let Tn=(()=>{class i{constructor(){this.size="md",this.onLabel="On",this.offLabel="Off",this.colorOn="green",this.colorOff="gray",this.disabled=!1,this.labelPosition="right",this.toggle=new L.bkB}onToggle(){this.disabled||(this.on=!this.on,this.toggle.emit(this.on))}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-switcher"]],inputs:{on:"on",size:"size",onLabel:"onLabel",offLabel:"offLabel",colorOn:"colorOn",colorOff:"colorOff",disabled:"disabled",labelPosition:"labelPosition"},outputs:{toggle:"toggle"},standalone:!0,features:[L.aNF],decls:4,vars:4,consts:[[1,"switcher"],["type","checkbox",3,"click","checked"],[1,"slider","round"],["for","",3,"class",4,"ngIf"],["for",""]],template:function(s,c){1&s&&(L.j41(0,"section",0)(1,"input",1),L.bIt("click",function(){return c.onToggle()}),L.k0s(),L.nrm(2,"span",2),L.DNE(3,On,2,5,"label",3),L.k0s()),2&s&&(L.AVh("switcher--disabled",c.disabled),L.R7$(),L.Y8G("checked",c.on),L.R7$(2),L.Y8G("ngIf","right"===c.labelPosition))},dependencies:[Nt.MD,Nt.bT],styles:['.switcher[_ngcontent-%COMP%]{--switcher--color-on: var(--color-on, --success);--switcher--color-off: var(--color-off, --neutralLight);--switcher__height: 36px;--switcher__width: 60px;position:relative;height:200px;display:flex;justify-content:space-between;column-gap:var(--panel__gap--col);align-items:center;width:100%;max-width:max-content;height:var(--switcher__height);margin:calc(var(--panel__gap--col) / 2) 0}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{opacity:0;width:calc(var(--switcher__width) + 20px);height:var(--switcher__height);z-index:1}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:34px;width:var(--switcher__width);height:var(--switcher__height)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:var(--primary)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider.round[_ngcontent-%COMP%]{border-radius:var(--switcher__height)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px var(--primary)}.switcher--disabled[_ngcontent-%COMP%]{cursor:not-allowed;pointer-events:none;opacity:.5}.switcher__label[_ngcontent-%COMP%]{font-size:var(--input__label--size);line-height:var(--input__label--lineHeight)}']})}return i})();var Tt=ie(3586),Ct=ie(7440),kt=ie(2214),Ht=ie(7852),Xt=ie(1076),Qt=ie(1362);const Xe="firebasestorage.googleapis.com",Vn="storageBucket";class le extends Xt.g{constructor(e,n,s=0){super(St(e),`Firebase Storage: ${n} (${St(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,le.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return St(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var gt=function(i){return i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment",i}(gt||{});function St(i){return"storage/"+i}function Un(){return new le(gt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ye(){return new le(gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _t(){return new le(gt.CANCELED,"User canceled the upload/download.")}function Qn(){return new le(gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qr(i){return new le(gt.INVALID_ARGUMENT,i)}function An(){return new le(gt.APP_DELETED,"The Firebase app was deleted.")}function si(i,e){return new le(gt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function wn(i){throw new le(gt.INTERNAL_ERROR,"Internal error: "+i)}class Br{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Br.makeFromUrl(e,n)}catch{return new Br(e,"")}if(""===s.path)return s;throw function $n(i){return new le(gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}(e)}static makeFromUrl(e,n){let s=null;const c="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+c+"(/(.*))?$","i");function b(at){at.path_=decodeURIComponent(at.path)}const B=n.replace(/[.]/g,"\\."),Ye=[{regex:m,indices:{bucket:1,path:3},postModify:function l(at){"/"===at.path.charAt(at.path.length-1)&&(at.path_=at.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${B}/v[A-Za-z0-9_]+/b/${c}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${n===Xe?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${c}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let at=0;at<Ye.length;at++){const Lt=Ye[at],$t=Lt.regex.exec(e);if($t){let mn=$t[Lt.indices.path];mn||(mn=""),s=new Br($t[Lt.indices.bucket],mn),Lt.postModify(s);break}}if(null==s)throw function zt(i){return new le(gt.INVALID_URL,"Invalid URL '"+i+"'.")}(e);return s}}class ai{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function dn(i){return"string"==typeof i||i instanceof String}function Wt(i){return zr()&&i instanceof Blob}function zr(){return typeof Blob<"u"}function ki(i,e,n,s){if(s<e)throw qr(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw qr(`Invalid value for '${i}'. Expected ${n} or less.`)}function Dr(i,e,n){let s=e;return null==n&&(s=`https://${e}`),`${n}://${s}/v0${i}`}function mi(i){const e=encodeURIComponent;let n="?";for(const s in i)i.hasOwnProperty(s)&&(n=n+(e(s)+"=")+e(i[s])+"&");return n=n.slice(0,-1),n}var ci=function(i){return i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT",i}(ci||{});function Wr(i,e){const n=i>=500&&i<600,c=-1!==[408,429].indexOf(i),l=-1!==e.indexOf(i);return n||c||l}class _i{constructor(e,n,s,c,l,g,m,y,b,P,B,z=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=c,this.successCodes_=l,this.additionalRetryCodes_=g,this.callback_=m,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=P,this.connectionFactory_=B,this.retry=z,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,ae)=>{this.resolve_=K,this.reject_=ae,this.start_()})}start_(){const n=(s,c)=>{const l=this.resolve_,g=this.reject_,m=c.connection;if(c.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());!function Lo(i){return void 0!==i}(y)?l():l(y)}catch(y){g(y)}else if(null!==m){const y=Un();y.serverResponse=m.getErrorText(),g(this.errorCallback_?this.errorCallback_(m,y):y)}else g(c.canceled?this.appDelete_?An():_t():ye())};this.canceled_?n(0,new jn(!1,null,!0)):this.backoffId_=function Yn(i,e,n){let s=1,c=null,l=null,g=!1,m=0;function y(){return 2===m}let b=!1;function P(...Me){b||(b=!0,e.apply(null,Me))}function B(Me){c=setTimeout(()=>{c=null,i(K,y())},Me)}function z(){l&&clearTimeout(l)}function K(Me,...Le){if(b)return void z();if(Me)return z(),void P.call(null,Me,...Le);if(y()||g)return z(),void P.call(null,Me,...Le);let Ye;s<64&&(s*=2),1===m?(m=2,Ye=0):Ye=1e3*(s+Math.random()),B(Ye)}let ae=!1;function Ee(Me){ae||(ae=!0,z(),!b&&(null!==c?(Me||(m=2),clearTimeout(c),B(0)):Me||(m=1)))}return B(0),l=setTimeout(()=>{g=!0,Ee(!0)},n),Ee}((s,c)=>{if(c)return void s(!1,new jn(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const g=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(g),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(g),this.pendingConnection_=null;const m=l.getErrorCode()===ci.NO_ERROR,y=l.getStatus();if(!m||Wr(y,this.additionalRetryCodes_)&&this.retry){const P=l.getErrorCode()===ci.ABORT;return void s(!1,new jn(!1,null,P))}const b=-1!==this.successCodes_.indexOf(y);s(!0,new jn(b,l))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function ln(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class jn{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function Cr(...i){const e=function ei(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let s=0;s<i.length;s++)n.append(i[s]);return n.getBlob()}if(zr())return new Blob(i);throw new le(gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Te={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qe{constructor(e,n){this.data=e,this.contentType=n||null}}function _e(i){const e=[];for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);s<=127?e.push(s):s<=2047?e.push(192|s>>6,128|63&s):55296==(64512&s)?n<i.length-1&&56320==(64512&i.charCodeAt(n+1))?(s=65536|(1023&s)<<10|1023&i.charCodeAt(++n),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):e.push(239,191,189):56320==(64512&s)?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(e)}function lt(i,e){switch(i){case Te.BASE64:{const c=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(c||l)throw si(i,"Invalid character '"+(c?"-":"_")+"' found: is it base64url encoded?");break}case Te.BASE64URL:{const c=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(c||l)throw si(i,"Invalid character '"+(c?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function tt(i){if(typeof atob>"u")throw function lr(i){return new le(gt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(i)}(e)}catch(c){throw c.message.includes("polyfill")?c:si(i,"Invalid character found")}const s=new Uint8Array(n.length);for(let c=0;c<n.length;c++)s[c]=n.charCodeAt(c);return s}class qe{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw si(Te.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;null!=s&&(this.base64=function zn(i,e){return i.length>=e.length&&i.substring(i.length-e.length)===e}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}class Kr{constructor(e,n){let s=0,c="";Wt(e)?(this.data_=e,s=e.size,c=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=c}size(){return this.size_}type(){return this.type_}slice(e,n){if(Wt(this.data_)){const c=function he(i,e,n){return i.webkitSlice?i.webkitSlice(e,n):i.mozSlice?i.mozSlice(e,n):i.slice?i.slice(e,n):null}(this.data_,e,n);return null===c?null:new Kr(c)}{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Kr(s,!0)}}static getBlob(...e){if(zr()){const n=e.map(s=>s instanceof Kr?s.data_:s);return new Kr(Cr.apply(null,n))}{const n=e.map(g=>dn(g)?function de(i,e){switch(i){case Te.RAW:return new Qe(_e(e));case Te.BASE64:case Te.BASE64URL:return new Qe(lt(i,e));case Te.DATA_URL:return new Qe(function Kt(i){const e=new qe(i);return e.base64?lt(Te.BASE64,e.rest):function Re(i){let e;try{e=decodeURIComponent(i)}catch{throw si(Te.DATA_URL,"Malformed data URL.")}return _e(e)}(e.rest)}(e),function bn(i){return new qe(i).contentType}(e))}throw Un()}(Te.RAW,g).data:g.data_);let s=0;n.forEach(g=>{s+=g.byteLength});const c=new Uint8Array(s);let l=0;return n.forEach(g=>{for(let m=0;m<g.length;m++)c[l++]=g[m]}),new Kr(c,!0)}}uploadData(){return this.data_}}function mr(i){let e;try{e=JSON.parse(i)}catch{return null}return function Jn(i){return"object"==typeof i&&!Array.isArray(i)}(e)?e:null}function Li(i){const e=i.lastIndexOf("/",i.length-2);return-1===e?i:i.slice(e+1)}function Hr(i,e){return e}class ui{constructor(e,n,s,c){this.server=e,this.local=n||e,this.writable=!!s,this.xform=c||Hr}}let Us=null;function no(){if(Us)return Us;const i=[];i.push(new ui("bucket")),i.push(new ui("generation")),i.push(new ui("metageneration")),i.push(new ui("name","fullPath",!0));const n=new ui("name");n.xform=function e(l,g){return function yo(i){return!dn(i)||i.length<2?i:Li(i)}(g)},i.push(n);const c=new ui("size");return c.xform=function s(l,g){return void 0!==g?Number(g):g},i.push(c),i.push(new ui("timeCreated")),i.push(new ui("updated")),i.push(new ui("md5Hash",null,!0)),i.push(new ui("cacheControl",null,!0)),i.push(new ui("contentDisposition",null,!0)),i.push(new ui("contentEncoding",null,!0)),i.push(new ui("contentLanguage",null,!0)),i.push(new ui("contentType",null,!0)),i.push(new ui("metadata","customMetadata",!0)),Us=i,Us}function As(i,e,n){const s=mr(e);return null===s?null:function kc(i,e,n){const s={type:"file"},c=n.length;for(let l=0;l<c;l++){const g=n[l];s[g.local]=g.xform(s,e[g.server])}return function Is(i,e){Object.defineProperty(i,"ref",{get:function n(){const l=new Br(i.bucket,i.fullPath);return e._makeStorageReference(l)}})}(s,i),s}(i,s,n)}function vt(i,e){const n={},s=e.length;for(let c=0;c<s;c++){const l=e[c];l.writable&&(n[l.server]=i[l.local])}return JSON.stringify(n)}class Pn{constructor(e,n,s,c){this.url=e,this.method=n,this.handler=s,this.timeout=c,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function kn(i){if(!i)throw Un()}function Rr(i,e){return function n(s,c){const l=As(i,c,e);return kn(null!==l),l}}function Vo(i){return function e(n,s){let c;return c=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function Ne(){return new le(gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function bt(){return new le(gt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function Ve(i){return new le(gt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===n.getStatus()?function pe(i){return new le(gt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}(i.path):s,c.status=n.getStatus(),c.serverResponse=s.serverResponse,c}}function Xr(i){const e=Vo(i);return function n(s,c){let l=e(s,c);return 404===s.getStatus()&&(l=function De(i){return new le(gt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}(i.path)),l.serverResponse=c.serverResponse,l}}function Ts(i,e,n){const s=Object.assign({},n);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=function hc(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}(null,e)),s}class lo{constructor(e,n,s,c){this.current=e,this.total=n,this.finalized=!!s,this.metadata=c||null}}function bo(i,e){let n=null;try{n=i.getResponseHeader("X-Goog-Upload-Status")}catch{kn(!1)}return kn(!!n&&-1!==(e||["active"]).indexOf(n)),n}function ua(i){switch(i){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class qi{constructor(e,n,s){if(function Ft(i){return"function"==typeof i}(e)||null!=n||null!=s)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function Ri(i){return(...e)=>{Promise.resolve().then(()=>i(...e))}}let js=null;class Bl{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ci.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ci.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ci.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,c){if(this.sent_)throw wn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==c)for(const l in c)c.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,c[l].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Vi extends Bl{initXhr(){this.xhr_.responseType="text"}}function Bo(){return js?js():new Vi}class la{constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=no(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=c=>{if(this._request=void 0,this._chunkMultiplier=1,c._codeEquals(gt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(Wr(c.status,[])){if(!l)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();c=ye()}this._error=c,this._transition("error")}},this._metadataErrorHandler=c=>{this._request=void 0,c._codeEquals(gt.CANCELED)?this.completeTransitions_():(this._error=c,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((c,l)=>{this._resolve=c,this._reject=l,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const s=function Zo(i,e,n,s,c){const l=e.bucketOnlyServerUrl(),g=Ts(e,s,c),m={name:g.fullPath},y=Dr(l,i.host,i._protocol),P={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":g.contentType,"Content-Type":"application/json; charset=utf-8"},B=vt(g,n),ae=new Pn(y,"POST",function K(Ee){let Me;bo(Ee);try{Me=Ee.getResponseHeader("X-Goog-Upload-URL")}catch{kn(!1)}return kn(dn(Me)),Me},i.maxUploadRetryTime);return ae.urlParams=m,ae.headers=P,ae.body=B,ae.errorHandler=Vo(e),ae}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),c=this._ref.storage._makeRequest(s,Bo,e,n);this._request=c,c.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const c=function ro(i,e,n,s){const y=new Pn(n,"POST",function l(b){const P=bo(b,["active","final"]);let B=null;try{B=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{kn(!1)}B||kn(!1);const z=Number(B);return kn(!isNaN(z)),new lo(z,s.size(),"final"===P)},i.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=Vo(e),y}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(c,Bo,n,s);this._request=l,l.getPromise().then(g=>{this._request=void 0,this._updateProgress(g.current),this._needToFetchStatus=!1,g.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new lo(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((c,l)=>{let g;try{g=function as(i,e,n,s,c,l,g,m){const y=new lo(0,0);if(g?(y.current=g.current,y.total=g.total):(y.current=0,y.total=s.size()),s.size()!==y.total)throw function jr(){return new le(gt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const b=y.total-y.current;let P=b;c>0&&(P=Math.min(P,c));const B=y.current;let K="";K=0===P?"finalize":b===P?"upload, finalize":"upload";const ae={"X-Goog-Upload-Command":K,"X-Goog-Upload-Offset":`${y.current}`},Ee=s.slice(B,B+P);if(null===Ee)throw Qn();const Ye=new Pn(n,"POST",function Me(at,Lt){const $t=bo(at,["active","final"]),Jt=y.current+P,mn=s.size();let nr;return nr="final"===$t?Rr(e,l)(at,Lt):null,new lo(Jt,mn,"final"===$t,nr)},e.maxUploadRetryTime);return Ye.headers=ae,Ye.body=Ee.uploadData(),Ye.progressCallback=m||null,Ye.errorHandler=Vo(i),Ye}(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const m=this._ref.storage._makeRequest(g,Bo,c,l,!1);this._request=m,m.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=function $a(i,e,n){const c=Dr(e.fullServerUrl(),i.host,i._protocol),g=i.maxOperationRetryTime,m=new Pn(c,"GET",Rr(i,n),g);return m.errorHandler=Xr(e),m}(this._ref.storage,this._ref._location,this._mappings),c=this._ref.storage._makeRequest(s,Bo,e,n);this._request=c,c.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=function Bn(i,e,n,s,c){const l=e.bucketOnlyServerUrl(),g={"X-Goog-Upload-Protocol":"multipart"},y=function m(){let Ye="";for(let at=0;at<2;at++)Ye+=Math.random().toString().slice(2);return Ye}();g["Content-Type"]="multipart/related; boundary="+y;const b=Ts(e,s,c),P=vt(b,n),K=Kr.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+P+"\r\n--"+y+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",s,"\r\n--"+y+"--");if(null===K)throw Qn();const ae={name:b.fullPath},Ee=Dr(l,i.host,i._protocol),Le=i.maxUploadRetryTime,ke=new Pn(Ee,"POST",Rr(i,n),Le);return ke.urlParams=ae,ke.headers=g,ke.body=K.uploadData(),ke.errorHandler=Vo(e),ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),c=this._ref.storage._makeRequest(s,Bo,e,n);this._request=c,c.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=_t(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ua(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,c){const l=new qi(n||void 0,s||void 0,c||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ua(this._state)){case"success":Ri(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":Ri(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ua(this._state)){case"running":case"paused":e.next&&Ri(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&Ri(e.complete.bind(e))();break;default:e.error&&Ri(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class To{constructor(e,n){this._service=e,this._location=n instanceof Br?n:Br.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new To(e,n)}get root(){const e=new Br(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Li(this._location.path)}get storage(){return this._service}get parent(){const e=function vi(i){if(0===i.length)return null;const e=i.lastIndexOf("/");return-1===e?"":i.slice(0,e)}(this._location.path);if(null===e)return null;const n=new Br(this._location.bucket,e);return new To(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw function pr(i){return new le(gt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function pc(i){i._throwIfRoot("getDownloadURL");const e=function ca(i,e,n){const c=Dr(e.fullServerUrl(),i.host,i._protocol),g=i.maxOperationRetryTime,m=new Pn(c,"GET",function uo(i,e){return function n(s,c){const l=As(i,c,e);return kn(null!==l),function du(i,e,n,s){const c=mr(e);if(null===c||!dn(c.downloadTokens))return null;const l=c.downloadTokens;if(0===l.length)return null;const g=encodeURIComponent;return l.split(",").map(b=>{const B=i.fullPath;return Dr("/b/"+g(i.bucket)+"/o/"+g(B),n,s)+mi({alt:"media",token:b})})[0]}(l,c,i.host,i._protocol)}}(i,n),g);return m.errorHandler=Xr(e),m}(i.storage,i._location,no());return i.storage.makeRequestWithTokens(e,Bo).then(n=>{if(null===n)throw function to(){return new le(gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function fo(i,e){if(i instanceof xo){const n=i;if(null==n._bucket)throw function nn(){return new le(gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Vn+"' property when initializing the app?")}();const s=new To(n,n._bucket);return null!=e?fo(s,e):s}return void 0!==e?function Gs(i,e){const n=function er(i,e){const n=e.split("/").filter(s=>s.length>0).join("/");return 0===i.length?n:i+"/"+n}(i._location.path,e),s=new Br(i._location.bucket,n);return new To(i.storage,s)}(i,e):i}function es(i,e){const n=e?.[Vn];return null==n?null:Br.makeFromBucketSpec(n,i)}class xo{constructor(e,n,s,c,l){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=c,this._firebaseVersion=l,this._bucket=null,this._host=Xe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=c?Br.makeFromBucketSpec(c,this._host):es(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Br.makeFromBucketSpec(this._url,e):es(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ki("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ki("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const s=yield n.getToken();if(null!==s)return s.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.A)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new To(this,e)}_makeRequest(e,n,s,c,l=!0){if(this._deleted)return new ai(An());{const g=function Fi(i,e,n,s,c,l,g=!0){const m=mi(i.urlParams),y=i.url+m,b=Object.assign({},i.headers);return function zi(i,e){e&&(i["X-Firebase-GMPID"]=e)}(b,e),function Er(i,e){null!==e&&e.length>0&&(i.Authorization="Firebase "+e)}(b,n),function ri(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(b,l),function Wi(i,e){null!==e&&(i["X-Firebase-AppCheck"]=e)}(b,s),new _i(y,i.method,b,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,c,g)}(e,this._appId,s,c,n,this._firebaseVersion,l);return this._requests.add(g),g.getPromise().then(()=>this._requests.delete(g),()=>this._requests.delete(g)),g}}makeRequestWithTokens(e,n){var s=this;return(0,me.A)(function*(){const[c,l]=yield Promise.all([s._getAuthToken(),s._getAppCheckToken()]);return s._makeRequest(e,n,c,l).getPromise()})()}}const Da="@firebase/storage",Uo="storage";function Eo(i,e,n){return function Hs(i,e,n){return i._throwIfRoot("uploadBytesResumable"),new la(i,new Kr(e),n)}(i=(0,Xt.Ku)(i),e,n)}function on(i){return pc(i=(0,Xt.Ku)(i))}function hr(i,e){return function za(i,e){if(e&&function ls(i){return/^[A-Za-z]+:\/\//.test(i)}(e)){if(i instanceof xo)return function hu(i,e){return new To(i,e)}(i,e);throw qr("To use ref(service, url), the first argument must be a Storage instance.")}return fo(i,e)}(i=(0,Xt.Ku)(i),e)}function Ra(i=(0,Ht.Sx)(),e){i=(0,Xt.Ku)(i);const s=(0,Ht.j6)(i,Uo).getImmediate({identifier:e}),c=(0,Xt.yU)("storage");return c&&function Ma(i,e,n,s={}){!function ha(i,e,n,s={}){i.host=`${e}:${n}`,i._protocol="http";const{mockUserToken:c}=s;c&&(i._overrideAuthToken="string"==typeof c?c:(0,Xt.Fy)(c,i.app.options.projectId))}(i,e,n,s)}(s,...c),s}function ga(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),c=i.getProvider("app-check-internal");return new xo(n,s,c,e,Ht.MF)}!function ds(){(0,Ht.om)(new Qt.uA(Uo,ga,"PUBLIC").setMultipleInstances(!0)),(0,Ht.KO)(Da,"0.12.5",""),(0,Ht.KO)(Da,"0.12.5","esm2017")}();class ra{constructor(e){return e}}const Vc="storage",so=new L.nKC("angularfire2.storage-instances");function _a(i){return(e,n)=>{const s=e.runOutsideAngular(()=>i(n));return new ra(s)}}const xd={provide:class mc{constructor(){return(0,Tt.CA)(Vc)}},deps:[[new L.Xx1,so]]},Gr={provide:ra,useFactory:function Ei(i,e){const n=(0,Tt.lR)(Vc,i,e);return n&&new ra(n)},deps:[[new L.Xx1,so],Ct.XU]},Xi=(0,Tt.S3)(on,!0),Go=(0,Tt.S3)(Ra,!0),So=(0,Tt.S3)(hr,!0),Y=(0,Tt.S3)(Eo,!0);var H=ie(2418);var Ot=function(){var i=function(n,s){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(c[g]=l[g])})(n,s)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),qn=function(i){function e(n,s){var c=this.constructor,l=i.call(this,n,s)||this;return Object.defineProperty(l,"name",{value:c.name,enumerable:!1,configurable:!0}),function se(i,e){var n=Object.setPrototypeOf;n?n(i,e):i.__proto__=e}(l,c.prototype),function xe(i,e){void 0===e&&(e=i.constructor);var n=Error.captureStackTrace;n&&n(i,e)}(l),l}return Ot(e,i),e}(Error),Do=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Sn=function(i){function e(n){void 0===n&&(n=void 0);var s=i.call(this,n)||this;return s.message=n,s}return Do(e,i),e.prototype.getKind=function(){return this.constructor.kind},e.kind="Exception",e}(qn);var gu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Zr=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return gu(e,i),e.kind="ArgumentException",e}(Sn);var fs=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const fn=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return fs(e,i),e.kind="IllegalArgumentException",e}(Sn),jc=function(){function i(e){if(this.binarizer=e,null===e)throw new fn("Binarizer must be non-null.")}return i.prototype.getWidth=function(){return this.binarizer.getWidth()},i.prototype.getHeight=function(){return this.binarizer.getHeight()},i.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},i.prototype.getBlackMatrix=function(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},i.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},i.prototype.crop=function(e,n,s,c){var l=this.binarizer.getLuminanceSource().crop(e,n,s,c);return new i(this.binarizer.createBinarizer(l))},i.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},i.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new i(this.binarizer.createBinarizer(e))},i.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new i(this.binarizer.createBinarizer(e))},i.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},i}();var tr=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const li=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return tr(e,i),e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Sn),Xa=function(){function i(e){this.source=e}return i.prototype.getLuminanceSource=function(){return this.source},i.prototype.getWidth=function(){return this.source.getWidth()},i.prototype.getHeight=function(){return this.source.getHeight()},i}(),Ur=function(){function i(){}return i.arraycopy=function(e,n,s,c,l){for(;l--;)s[c++]=e[n++]},i.currentTimeMillis=function(){return Date.now()},i}();var ll=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const yc=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return ll(e,i),e.kind="IndexOutOfBoundsException",e}(Sn);var mu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ul=function(i){function e(n,s){void 0===n&&(n=void 0),void 0===s&&(s=void 0);var c=i.call(this,s)||this;return c.index=n,c.message=s,c}return mu(e,i),e.kind="ArrayIndexOutOfBoundsException",e}(yc),Jr=function(){function i(){}return i.fill=function(e,n){for(var s=0,c=e.length;s<c;s++)e[s]=n},i.fillWithin=function(e,n,s,c){i.rangeCheck(e.length,n,s);for(var l=n;l<s;l++)e[l]=c},i.rangeCheck=function(e,n,s){if(n>s)throw new fn("fromIndex("+n+") > toIndex("+s+")");if(n<0)throw new Ul(n);if(s>e)throw new Ul(s)},i.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},i.create=function(e,n,s){return Array.from({length:e}).map(function(l){return Array.from({length:n}).fill(s)})},i.createInt32Array=function(e,n,s){return Array.from({length:e}).map(function(l){return Int32Array.from({length:n}).fill(s)})},i.equals=function(e,n){if(!(e&&n&&e.length&&n.length&&e.length===n.length))return!1;for(var s=0,c=e.length;s<c;s++)if(e[s]!==n[s])return!1;return!0},i.hashCode=function(e){var n,s;if(null===e)return 0;var c=1;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),g=l.next();!g.done;g=l.next())c=31*c+g.value}catch(y){n={error:y}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return c},i.fillUint8Array=function(e,n){for(var s=0;s!==e.length;s++)e[s]=n},i.copyOf=function(e,n){return e.slice(0,n)},i.copyOfUint8Array=function(e,n){if(e.length<=n){var s=new Uint8Array(n);return s.set(e),s}return e.slice(0,n)},i.copyOfRange=function(e,n,s){var c=s-n,l=new Int32Array(c);return Ur.arraycopy(e,n,l,0,c),l},i.binarySearch=function(e,n,s){void 0===s&&(s=i.numberComparator);for(var c=0,l=e.length-1;c<=l;){var g=l+c>>1,m=s(n,e[g]);if(m>0)c=g+1;else{if(!(m<0))return g;l=g-1}}return-c-1},i.numberComparator=function(e,n){return e-n},i}(),cr=function(){function i(){}return i.numberOfTrailingZeros=function(e){var n;if(0===e)return 32;var s=31;return 0!=(n=e<<16)&&(s-=16,e=n),0!=(n=e<<8)&&(s-=8,e=n),0!=(n=e<<4)&&(s-=4,e=n),0!=(n=e<<2)&&(s-=2,e=n),s-(e<<1>>>31)},i.numberOfLeadingZeros=function(e){if(0===e)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-(e>>>31)},i.toHexString=function(e){return e.toString(16)},i.toBinaryString=function(e){return String(parseInt(String(e),2))},i.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,63&(e+=e>>>8)+(e>>>16)},i.truncDivision=function(e,n){return Math.trunc(e/n)},i.parseInt=function(e,n){return void 0===n&&(n=void 0),parseInt(e,n)},i.MIN_VALUE_32_BITS=-2147483648,i.MAX_VALUE=Number.MAX_SAFE_INTEGER,i}(),Ci=function(){function i(e,n){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=null==n?i.makeArray(e):n)}return i.prototype.getSize=function(){return this.size},i.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},i.prototype.ensureCapacity=function(e){if(e>32*this.bits.length){var n=i.makeArray(e);Ur.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},i.prototype.get=function(e){return!!(this.bits[Math.floor(e/32)]&1<<(31&e))},i.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},i.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},i.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var s=this.bits,c=Math.floor(e/32),l=s[c];l&=~((1<<(31&e))-1);for(var g=s.length;0===l;){if(++c===g)return n;l=s[c]}var m=32*c+cr.numberOfTrailingZeros(l);return m>n?n:m},i.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var s=this.bits,c=Math.floor(e/32),l=~s[c];l&=~((1<<(31&e))-1);for(var g=s.length;0===l;){if(++c===g)return n;l=~s[c]}var m=32*c+cr.numberOfTrailingZeros(l);return m>n?n:m},i.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},i.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new fn;if(n!==e){n--;for(var s=Math.floor(e/32),c=Math.floor(n/32),l=this.bits,g=s;g<=c;g++)l[g]|=(2<<(g<c?31:31&n))-(1<<(g>s?0:31&e))}},i.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,s=0;s<e;s++)n[s]=0},i.prototype.isRange=function(e,n,s){if(n<e||e<0||n>this.size)throw new fn;if(n===e)return!0;n--;for(var c=Math.floor(e/32),l=Math.floor(n/32),g=this.bits,m=c;m<=l;m++){var P=(2<<(m<l?31:31&n))-(1<<(m>c?0:31&e))&4294967295;if((g[m]&P)!==(s?P:0))return!1}return!0},i.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},i.prototype.appendBits=function(e,n){if(n<0||n>32)throw new fn("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var s=n;s>0;s--)this.appendBit(1==(e>>s-1&1))},i.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var s=0;s<n;s++)this.appendBit(e.get(s))},i.prototype.xor=function(e){if(this.size!==e.size)throw new fn("Sizes don't match");for(var n=this.bits,s=0,c=n.length;s<c;s++)n[s]^=e.bits[s]},i.prototype.toBytes=function(e,n,s,c){for(var l=0;l<c;l++){for(var g=0,m=0;m<8;m++)this.get(e)&&(g|=1<<7-m),e++;n[s+l]=g}},i.prototype.getBitArray=function(){return this.bits},i.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),s=n+1,c=this.bits,l=0;l<s;l++){var g=c[l];e[n-l]=g=(g=(g=(g=(g=g>>1&1431655765|(1431655765&g)<<1)>>2&858993459|(858993459&g)<<2)>>4&252645135|(252645135&g)<<4)>>8&16711935|(16711935&g)<<8)>>16&65535|(65535&g)<<16}if(this.size!==32*s){var m=32*s-this.size,y=e[0]>>>m;for(l=1;l<s;l++){var b=e[l];e[l-1]=y|=b<<32-m,y=b>>>m}e[s-1]=y}this.bits=e},i.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},i.prototype.equals=function(e){return e instanceof i&&(this.size===e.size&&Jr.equals(this.bits,e.bits))},i.prototype.hashCode=function(){return 31*this.size+Jr.hashCode(this.bits)},i.prototype.toString=function(){for(var e="",n=0,s=this.size;n<s;n++)7&n||(e+=" "),e+=this.get(n)?"X":".";return e},i.prototype.clone=function(){return new i(this.size,this.bits.slice())},i.prototype.toArray=function(){for(var e=[],n=0,s=this.size;n<s;n++)e.push(this.get(n));return e},i}();var Na=function(i){return i[i.OTHER=0]="OTHER",i[i.PURE_BARCODE=1]="PURE_BARCODE",i[i.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",i[i.TRY_HARDER=3]="TRY_HARDER",i[i.CHARACTER_SET=4]="CHARACTER_SET",i[i.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",i[i.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",i[i.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",i[i.ASSUME_GS1=8]="ASSUME_GS1",i[i.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",i[i.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",i[i.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS",i}(Na||{});const Gn=Na;var Kn=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Zt=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Kn(e,i),e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Sn);var _r=function(i){return i[i.Cp437=0]="Cp437",i[i.ISO8859_1=1]="ISO8859_1",i[i.ISO8859_2=2]="ISO8859_2",i[i.ISO8859_3=3]="ISO8859_3",i[i.ISO8859_4=4]="ISO8859_4",i[i.ISO8859_5=5]="ISO8859_5",i[i.ISO8859_6=6]="ISO8859_6",i[i.ISO8859_7=7]="ISO8859_7",i[i.ISO8859_8=8]="ISO8859_8",i[i.ISO8859_9=9]="ISO8859_9",i[i.ISO8859_10=10]="ISO8859_10",i[i.ISO8859_11=11]="ISO8859_11",i[i.ISO8859_13=12]="ISO8859_13",i[i.ISO8859_14=13]="ISO8859_14",i[i.ISO8859_15=14]="ISO8859_15",i[i.ISO8859_16=15]="ISO8859_16",i[i.SJIS=16]="SJIS",i[i.Cp1250=17]="Cp1250",i[i.Cp1251=18]="Cp1251",i[i.Cp1252=19]="Cp1252",i[i.Cp1256=20]="Cp1256",i[i.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",i[i.UTF8=22]="UTF8",i[i.ASCII=23]="ASCII",i[i.Big5=24]="Big5",i[i.GB18030=25]="GB18030",i[i.EUC_KR=26]="EUC_KR",i}(_r||{});const po=function(){function i(e,n,s){for(var c,l,g=[],m=3;m<arguments.length;m++)g[m-3]=arguments[m];this.valueIdentifier=e,this.name=s,this.values="number"==typeof n?Int32Array.from([n]):n,this.otherEncodingNames=g,i.VALUE_IDENTIFIER_TO_ECI.set(e,this),i.NAME_TO_ECI.set(s,this);for(var y=this.values,b=0,P=y.length;b!==P;b++)i.VALUES_TO_ECI.set(y[b],this);try{for(var z=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),K=z.next();!K.done;K=z.next())i.NAME_TO_ECI.set(K.value,this)}catch(Ee){c={error:Ee}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}}return i.prototype.getValueIdentifier=function(){return this.valueIdentifier},i.prototype.getName=function(){return this.name},i.prototype.getValue=function(){return this.values[0]},i.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Zt("incorect value");var n=i.VALUES_TO_ECI.get(e);if(void 0===n)throw new Zt("incorect value");return n},i.getCharacterSetECIByName=function(e){var n=i.NAME_TO_ECI.get(e);if(void 0===n)throw new Zt("incorect value");return n},i.prototype.equals=function(e){if(!(e instanceof i))return!1;var n=e;return this.getName()===n.getName()},i.VALUE_IDENTIFIER_TO_ECI=new Map,i.VALUES_TO_ECI=new Map,i.NAME_TO_ECI=new Map,i.Cp437=new i(_r.Cp437,Int32Array.from([0,2]),"Cp437"),i.ISO8859_1=new i(_r.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),i.ISO8859_2=new i(_r.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),i.ISO8859_3=new i(_r.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),i.ISO8859_4=new i(_r.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),i.ISO8859_5=new i(_r.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),i.ISO8859_6=new i(_r.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),i.ISO8859_7=new i(_r.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),i.ISO8859_8=new i(_r.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),i.ISO8859_9=new i(_r.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),i.ISO8859_10=new i(_r.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),i.ISO8859_11=new i(_r.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),i.ISO8859_13=new i(_r.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),i.ISO8859_14=new i(_r.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),i.ISO8859_15=new i(_r.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),i.ISO8859_16=new i(_r.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),i.SJIS=new i(_r.SJIS,20,"SJIS","Shift_JIS"),i.Cp1250=new i(_r.Cp1250,21,"Cp1250","windows-1250"),i.Cp1251=new i(_r.Cp1251,22,"Cp1251","windows-1251"),i.Cp1252=new i(_r.Cp1252,23,"Cp1252","windows-1252"),i.Cp1256=new i(_r.Cp1256,24,"Cp1256","windows-1256"),i.UnicodeBigUnmarked=new i(_r.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),i.UTF8=new i(_r.UTF8,26,"UTF8","UTF-8"),i.ASCII=new i(_r.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),i.Big5=new i(_r.Big5,28,"Big5"),i.GB18030=new i(_r.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),i.EUC_KR=new i(_r.EUC_KR,30,"EUC_KR","EUC-KR"),i}();var F=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const W=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return F(e,i),e.kind="UnsupportedOperationException",e}(Sn),we=function(){function i(){}return i.decode=function(e,n){var s=this.encodingName(n);return this.customDecoder?this.customDecoder(e,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(e,s):new TextDecoder(s).decode(e)},i.shouldDecodeOnFallback=function(e){return!i.isBrowser()&&"ISO-8859-1"===e},i.encode=function(e,n){var s=this.encodingName(n);return this.customEncoder?this.customEncoder(e,s):typeof TextEncoder>"u"?this.encodeFallback(e):(new TextEncoder).encode(e)},i.isBrowser=function(){return typeof window<"u"&&"[object Window]"==={}.toString.call(window)},i.encodingName=function(e){return"string"==typeof e?e:e.getName()},i.encodingCharacterSet=function(e){return e instanceof po?e:po.getCharacterSetECIByName(e)},i.decodeFallback=function(e,n){var s=this.encodingCharacterSet(n);if(i.isDecodeFallbackSupported(s)){for(var c="",l=0,g=e.length;l<g;l++){var m=e[l].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(s.equals(po.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new W("Encoding "+this.encodingName(n)+" not supported by fallback.")},i.isDecodeFallbackSupported=function(e){return e.equals(po.UTF8)||e.equals(po.ISO8859_1)||e.equals(po.ASCII)},i.encodeFallback=function(e){for(var s=btoa(unescape(encodeURIComponent(e))).split(""),c=[],l=0;l<s.length;l++)c.push(s[l].charCodeAt(0));return new Uint8Array(c)},i}(),mt=function(){function i(){}return i.castAsNonUtf8Char=function(e,n){void 0===n&&(n=null);var s=n?n.getName():this.ISO88591;return we.decode(new Uint8Array([e]),s)},i.guessEncoding=function(e,n){if(null!=n&&void 0!==n.get(Gn.CHARACTER_SET))return n.get(Gn.CHARACTER_SET).toString();for(var s=e.length,c=!0,l=!0,g=!0,m=0,y=0,b=0,P=0,B=0,z=0,K=0,ae=0,Ee=0,Me=0,Le=0,ke=e.length>3&&239===e[0]&&187===e[1]&&191===e[2],Ye=0;Ye<s&&(c||l||g);Ye++){var at=255&e[Ye];g&&(m>0?128&at?m--:g=!1:128&at&&(64&at?(m++,32&at?(m++,16&at?(m++,8&at?g=!1:P++):b++):y++):g=!1)),c&&(at>127&&at<160?c=!1:at>159&&(at<192||215===at||247===at)&&Le++),l&&(B>0?at<64||127===at||at>252?l=!1:B--:128===at||160===at||at>239?l=!1:at>160&&at<224?(z++,ae=0,++K>Ee&&(Ee=K)):at>127?(B++,K=0,++ae>Me&&(Me=ae)):(K=0,ae=0))}return g&&m>0&&(g=!1),l&&B>0&&(l=!1),g&&(ke||y+b+P>0)?i.UTF8:l&&(i.ASSUME_SHIFT_JIS||Ee>=3||Me>=3)?i.SHIFT_JIS:c&&l?2===Ee&&2===z||10*Le>=s?i.SHIFT_JIS:i.ISO88591:c?i.ISO88591:l?i.SHIFT_JIS:g?i.UTF8:i.PLATFORM_DEFAULT_ENCODING},i.format=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var c=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function l(m,y,b,P,B,z){if("%%"===m)return"%";if(void 0!==n[++c]){m=P?parseInt(P.substr(1)):void 0;var ae,K=B?parseInt(B.substr(1)):void 0;switch(z){case"s":ae=n[c];break;case"c":ae=n[c][0];break;case"f":ae=parseFloat(n[c]).toFixed(m);break;case"p":ae=parseFloat(n[c]).toPrecision(m);break;case"e":ae=parseFloat(n[c]).toExponential(m);break;case"x":ae=parseInt(n[c]).toString(K||16);break;case"d":ae=parseFloat(parseInt(n[c],K||10).toPrecision(m)).toFixed(0)}ae="object"==typeof ae?JSON.stringify(ae):(+ae).toString(K);for(var Ee=parseInt(b),Me=b&&b[0]+""=="0"?"0":" ";ae.length<Ee;)ae=void 0!==y?ae+Me:Me+ae;return ae}})},i.getBytes=function(e,n){return we.encode(e,n)},i.getCharCode=function(e,n){return void 0===n&&(n=0),e.charCodeAt(n)},i.getCharAt=function(e){return String.fromCharCode(e)},i.SHIFT_JIS=po.SJIS.getName(),i.GB2312="GB2312",i.ISO88591=po.ISO8859_1.getName(),i.EUC_JP="EUC_JP",i.UTF8=po.UTF8.getName(),i.PLATFORM_DEFAULT_ENCODING=i.UTF8,i.ASSUME_SHIFT_JIS=!1,i}(),hn=function(){function i(e){void 0===e&&(e=""),this.value=e}return i.prototype.enableDecoding=function(e){return this.encoding=e,this},i.prototype.append=function(e){return this.value+="string"==typeof e?e.toString():this.encoding?mt.castAsNonUtf8Char(e,this.encoding):String.fromCharCode(e),this},i.prototype.appendChars=function(e,n,s){for(var c=n;n<n+s;c++)this.append(e[c]);return this},i.prototype.length=function(){return this.value.length},i.prototype.charAt=function(e){return this.value.charAt(e)},i.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},i.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},i.prototype.substring=function(e,n){return this.value.substring(e,n)},i.prototype.setLengthToZero=function(){this.value=""},i.prototype.toString=function(){return this.value},i.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},i}(),rr=function(){function i(e,n,s,c){if(this.width=e,this.height=n,this.rowSize=s,this.bits=c,null==n&&(n=e),this.height=n,e<1||n<1)throw new fn("Both dimensions must be greater than 0");null==s&&(s=Math.floor((e+31)/32)),this.rowSize=s,null==c&&(this.bits=new Int32Array(this.rowSize*this.height))}return i.parseFromBooleanArray=function(e){for(var n=e.length,s=e[0].length,c=new i(s,n),l=0;l<n;l++)for(var g=e[l],m=0;m<s;m++)g[m]&&c.set(m,l);return c},i.parseFromString=function(e,n,s){if(null===e)throw new fn("stringRepresentation cannot be null");for(var c=new Array(e.length),l=0,g=0,m=-1,y=0,b=0;b<e.length;)if("\n"===e.charAt(b)||"\r"===e.charAt(b)){if(l>g){if(-1===m)m=l-g;else if(l-g!==m)throw new fn("row lengths do not match");g=l,y++}b++}else if(e.substring(b,b+n.length)===n)b+=n.length,c[l]=!0,l++;else{if(e.substring(b,b+s.length)!==s)throw new fn("illegal character encountered: "+e.substring(b));b+=s.length,c[l]=!1,l++}if(l>g){if(-1===m)m=l-g;else if(l-g!==m)throw new fn("row lengths do not match");y++}for(var P=new i(m,y),B=0;B<l;B++)c[B]&&P.set(Math.floor(B%m),Math.floor(B/m));return P},i.prototype.get=function(e,n){var s=n*this.rowSize+Math.floor(e/32);return!!(this.bits[s]>>>(31&e)&1)},i.prototype.set=function(e,n){var s=n*this.rowSize+Math.floor(e/32);this.bits[s]|=1<<(31&e)&4294967295},i.prototype.unset=function(e,n){var s=n*this.rowSize+Math.floor(e/32);this.bits[s]&=~(1<<(31&e)&4294967295)},i.prototype.flip=function(e,n){var s=n*this.rowSize+Math.floor(e/32);this.bits[s]^=1<<(31&e)&4294967295},i.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new fn("input matrix dimensions do not match");for(var n=new Ci(Math.floor(this.width/32)+1),s=this.rowSize,c=this.bits,l=0,g=this.height;l<g;l++)for(var m=l*s,y=e.getRow(l,n).getBitArray(),b=0;b<s;b++)c[m+b]^=y[b]},i.prototype.clear=function(){for(var e=this.bits,n=e.length,s=0;s<n;s++)e[s]=0},i.prototype.setRegion=function(e,n,s,c){if(n<0||e<0)throw new fn("Left and top must be nonnegative");if(c<1||s<1)throw new fn("Height and width must be at least 1");var l=e+s,g=n+c;if(g>this.height||l>this.width)throw new fn("The region must fit inside the matrix");for(var m=this.rowSize,y=this.bits,b=n;b<g;b++)for(var P=b*m,B=e;B<l;B++)y[P+Math.floor(B/32)]|=1<<(31&B)&4294967295},i.prototype.getRow=function(e,n){null==n||n.getSize()<this.width?n=new Ci(this.width):n.clear();for(var s=this.rowSize,c=this.bits,l=e*s,g=0;g<s;g++)n.setBulk(32*g,c[l+g]);return n},i.prototype.setRow=function(e,n){Ur.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},i.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),s=new Ci(e),c=new Ci(e),l=0,g=Math.floor((n+1)/2);l<g;l++)s=this.getRow(l,s),c=this.getRow(n-1-l,c),s.reverse(),c.reverse(),this.setRow(l,c),this.setRow(n-1-l,s)},i.prototype.getEnclosingRectangle=function(){for(var n=this.height,s=this.rowSize,c=this.bits,l=this.width,g=n,m=-1,y=-1,b=0;b<n;b++)for(var P=0;P<s;P++){var B=c[b*s+P];if(0!==B){if(b<g&&(g=b),b>y&&(y=b),32*P<l){for(var z=0;!(B<<31-z&4294967295);)z++;32*P+z<l&&(l=32*P+z)}if(32*P+31>m){for(z=31;!(B>>>z);)z--;32*P+z>m&&(m=32*P+z)}}}return m<l||y<g?null:Int32Array.from([l,g,m-l+1,y-g+1])},i.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,s=0;s<n.length&&0===n[s];)s++;if(s===n.length)return null;for(var c=s/e,l=s%e*32,g=n[s],m=0;!(g<<31-m&4294967295);)m++;return Int32Array.from([l+=m,c])},i.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,s=n.length-1;s>=0&&0===n[s];)s--;if(s<0)return null;for(var c=Math.floor(s/e),l=32*Math.floor(s%e),g=n[s],m=31;!(g>>>m);)m--;return Int32Array.from([l+=m,c])},i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.getRowSize=function(){return this.rowSize},i.prototype.equals=function(e){return e instanceof i&&(this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&Jr.equals(this.bits,e.bits))},i.prototype.hashCode=function(){var e=this.width;return 31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+Jr.hashCode(this.bits)},i.prototype.toString=function(e,n,s){return void 0===e&&(e="X "),void 0===n&&(n="  "),void 0===s&&(s="\n"),this.buildToString(e,n,s)},i.prototype.buildToString=function(e,n,s){for(var c=new hn,l=0,g=this.height;l<g;l++){for(var m=0,y=this.width;m<y;m++)c.append(this.get(m,l)?e:n);c.append(s)}return c.toString()},i.prototype.clone=function(){return new i(this.width,this.height,this.rowSize,this.bits.slice())},i}();var wr=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const We=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return wr(e,i),e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Sn);var Qi=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const ns=function(i){function e(n){var s=i.call(this,n)||this;return s.luminances=e.EMPTY,s.buckets=new Int32Array(e.LUMINANCE_BUCKETS),s}return Qi(e,i),e.prototype.getBlackRow=function(n,s){var c=this.getLuminanceSource(),l=c.getWidth();null==s||s.getSize()<l?s=new Ci(l):s.clear(),this.initArrays(l);for(var g=c.getRow(n,this.luminances),m=this.buckets,y=0;y<l;y++)m[(255&g[y])>>e.LUMINANCE_SHIFT]++;var b=e.estimateBlackPoint(m);if(l<3)for(y=0;y<l;y++)(255&g[y])<b&&s.set(y);else{var P=255&g[0],B=255&g[1];for(y=1;y<l-1;y++){var z=255&g[y+1];(4*B-P-z)/2<b&&s.set(y),P=B,B=z}}return s},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),s=n.getWidth(),c=n.getHeight(),l=new rr(s,c);this.initArrays(s);for(var g=this.buckets,m=1;m<5;m++)for(var y=Math.floor(c*m/5),b=n.getRow(y,this.luminances),P=Math.floor(4*s/5),B=Math.floor(s/5);B<P;B++)g[(255&b[B])>>e.LUMINANCE_SHIFT]++;var K=e.estimateBlackPoint(g),ae=n.getMatrix();for(m=0;m<c;m++){var Ee=m*s;for(B=0;B<s;B++)(255&ae[Ee+B])<K&&l.set(B,m)}return l},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var s=this.buckets,c=0;c<e.LUMINANCE_BUCKETS;c++)s[c]=0},e.estimateBlackPoint=function(n){for(var s=n.length,c=0,l=0,g=0,m=0;m<s;m++)n[m]>g&&(l=m,g=n[m]),n[m]>c&&(c=n[m]);var y=0,b=0;for(m=0;m<s;m++){var P=m-l;(B=n[m]*P*P)>b&&(y=m,b=B)}if(l>y){var z=l;l=y,y=z}if(y-l<=s/16)throw new We;var K=y-1,ae=-1;for(m=y-1;m>l;m--){var B,Ee=m-l;(B=Ee*Ee*(y-m)*(c-n[m]))>ae&&(K=m,ae=B)}return K<<e.LUMINANCE_SHIFT},e.LUMINANCE_SHIFT=8-(e.LUMINANCE_BITS=5),e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Xa);var Ro=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Oi=function(i){function e(n){var s=i.call(this,n)||this;return s.matrix=null,s}return Ro(e,i),e.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var n=this.getLuminanceSource(),s=n.getWidth(),c=n.getHeight();if(s>=e.MINIMUM_DIMENSION&&c>=e.MINIMUM_DIMENSION){var l=n.getMatrix(),g=s>>e.BLOCK_SIZE_POWER;s&e.BLOCK_SIZE_MASK&&g++;var m=c>>e.BLOCK_SIZE_POWER;c&e.BLOCK_SIZE_MASK&&m++;var y=e.calculateBlackPoints(l,g,m,s,c),b=new rr(s,c);e.calculateThresholdForBlock(l,g,m,s,c,y,b),this.matrix=b}else this.matrix=i.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,s,c,l,g,m,y){for(var b=g-e.BLOCK_SIZE,P=l-e.BLOCK_SIZE,B=0;B<c;B++){var z=B<<e.BLOCK_SIZE_POWER;z>b&&(z=b);for(var K=e.cap(B,2,c-3),ae=0;ae<s;ae++){var Ee=ae<<e.BLOCK_SIZE_POWER;Ee>P&&(Ee=P);for(var Me=e.cap(ae,2,s-3),Le=0,ke=-2;ke<=2;ke++){var Ye=m[K+ke];Le+=Ye[Me-2]+Ye[Me-1]+Ye[Me]+Ye[Me+1]+Ye[Me+2]}e.thresholdBlock(n,Ee,z,Le/25,l,y)}}},e.cap=function(n,s,c){return n<s?s:n>c?c:n},e.thresholdBlock=function(n,s,c,l,g,m){for(var y=0,b=c*g+s;y<e.BLOCK_SIZE;y++,b+=g)for(var P=0;P<e.BLOCK_SIZE;P++)(255&n[b+P])<=l&&m.set(s+P,c+y)},e.calculateBlackPoints=function(n,s,c,l,g){for(var m=g-e.BLOCK_SIZE,y=l-e.BLOCK_SIZE,b=new Array(c),P=0;P<c;P++){b[P]=new Int32Array(s);var B=P<<e.BLOCK_SIZE_POWER;B>m&&(B=m);for(var z=0;z<s;z++){var K=z<<e.BLOCK_SIZE_POWER;K>y&&(K=y);for(var ae=0,Ee=255,Me=0,Le=0,ke=B*l+K;Le<e.BLOCK_SIZE;Le++,ke+=l){for(var Ye=0;Ye<e.BLOCK_SIZE;Ye++){var at=255&n[ke+Ye];ae+=at,at<Ee&&(Ee=at),at>Me&&(Me=at)}if(Me-Ee>e.MIN_DYNAMIC_RANGE)for(Le++,ke+=l;Le<e.BLOCK_SIZE;Le++,ke+=l)for(Ye=0;Ye<e.BLOCK_SIZE;Ye++)ae+=255&n[ke+Ye]}var Lt=ae>>2*e.BLOCK_SIZE_POWER;if(Me-Ee<=e.MIN_DYNAMIC_RANGE&&(Lt=Ee/2,P>0&&z>0)){var $t=(b[P-1][z]+2*b[P][z-1]+b[P-1][z-1])/4;Ee<$t&&(Lt=$t)}b[P][z]=Lt}}return b},e.BLOCK_SIZE_MASK=(e.BLOCK_SIZE=1<<(e.BLOCK_SIZE_POWER=3))-1,e.MINIMUM_DIMENSION=5*e.BLOCK_SIZE,e.MIN_DYNAMIC_RANGE=24,e}(ns),_n=function(){function i(e,n){this.width=e,this.height=n}return i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.isCropSupported=function(){return!1},i.prototype.crop=function(e,n,s,c){throw new W("This luminance source does not support cropping.")},i.prototype.isRotateSupported=function(){return!1},i.prototype.rotateCounterClockwise=function(){throw new W("This luminance source does not support rotation by 90 degrees.")},i.prototype.rotateCounterClockwise45=function(){throw new W("This luminance source does not support rotation by 45 degrees.")},i.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new hn,s=0;s<this.height;s++){for(var c=this.getRow(s,e),l=0;l<this.width;l++){var g=255&c[l];n.append(g<64?"#":g<128?"+":g<192?".":" ")}n.append("\n")}return n.toString()},i}();var hs=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Mo=function(i){function e(n){var s=i.call(this,n.getWidth(),n.getHeight())||this;return s.delegate=n,s}return hs(e,i),e.prototype.getRow=function(n,s){for(var c=this.delegate.getRow(n,s),l=this.getWidth(),g=0;g<l;g++)c[g]=255-(255&c[g]);return c},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(s),l=0;l<s;l++)c[l]=255-(255&n[l]);return c},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,s,c,l){return new e(this.delegate.crop(n,s,c,l))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(_n);var dl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Rd=function(i){function e(n){var s=i.call(this,n.width,n.height)||this;return s.canvas=n,s.tempCanvasElement=null,s.buffer=e.makeBufferFromCanvasImageData(n),s}return dl(e,i),e.makeBufferFromCanvasImageData=function(n){var s=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(s.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,s,c){var l=new Uint8ClampedArray(s*c);if(e.FRAME_INDEX=!e.FRAME_INDEX)for(var g=0,m=0,y=n.length;g<y;g+=4,m++){l[m]=0===n[g+3]?255:306*n[g]+601*n[g+1]+117*n[g+2]+512>>10}else{g=0,m=0;for(var ae=n.length;g<ae;g+=4,m++)void 0,l[m]=255-(0===n[g+3]?255:306*n[g]+601*n[g+1]+117*n[g+2]+512>>10)}return l},e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new fn("Requested row is outside the image: "+n);var c=this.getWidth(),l=n*c;return null===s?s=this.buffer.slice(l,l+c):(s.length<c&&(s=new Uint8ClampedArray(c)),s.set(this.buffer.slice(l,l+c))),s},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return i.prototype.crop.call(this,n,s,c,l),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var s=this.getTempCanvasElement(),c=s.getContext("2d"),l=n*e.DEGREE_TO_RADIANS,g=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(l))*g+Math.abs(Math.sin(l))*m),b=Math.ceil(Math.abs(Math.sin(l))*g+Math.abs(Math.cos(l))*m);return s.width=y,s.height=b,c.translate(y/2,b/2),c.rotate(l),c.drawImage(this.canvas,g/-2,m/-2),this.buffer=e.makeBufferFromCanvasImageData(s),this},e.prototype.invert=function(){return new Mo(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(_n),Md=function(){function i(e,n,s){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=s||void 0}return i.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},i}(),ps=function(i,e,n,s){return new(n||(n=Promise))(function(l,g){function m(P){try{b(s.next(P))}catch(B){g(B)}}function y(P){try{b(s.throw(P))}catch(B){g(B)}}function b(P){P.done?l(P.value):function c(l){return l instanceof n?l:new n(function(g){g(l)})}(P.value).then(m,y)}b((s=s.apply(i,e||[])).next())})},di=function(i,e){var s,c,l,g,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return g={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function m(b){return function(P){return function y(b){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,c&&(l=2&b[0]?c.return:b[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,b[1])).done)return l;switch(c=0,l&&(b=[2&b[0],l.value]),b[0]){case 0:case 1:l=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===b[0]||2===b[0])){n=0;continue}if(3===b[0]&&(!l||b[1]>l[0]&&b[1]<l[3])){n.label=b[1];break}if(6===b[0]&&n.label<l[1]){n.label=l[1],l=b;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(b);break}l[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(i,n)}catch(P){b=[6,P],c=0}finally{s=l=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,P])}}},oa=function(){function i(e,n,s){void 0===n&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(i.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),i.prototype.listVideoInputDevices=function(){return ps(this,void 0,void 0,function(){var e,n,s,c,l,g,B,z;return di(this,function(K){switch(K.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=K.sent(),n=[];try{for(s=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),c=s.next();!c.done;c=s.next())"videoinput"===(g="video"===(l=c.value).kind?"videoinput":l.kind)&&n.push({deviceId:l.deviceId||l.id,label:l.label||"Video device "+(n.length+1),kind:g,groupId:l.groupId})}catch(ae){B={error:ae}}finally{try{c&&!c.done&&(z=s.return)&&z.call(s)}finally{if(B)throw B.error}}return[2,n]}})})},i.prototype.getVideoInputDevices=function(){return ps(this,void 0,void 0,function(){return di(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,n.sent().map(function(s){return new Md(s.deviceId,s.label)})]}})})},i.prototype.findDeviceById=function(e){return ps(this,void 0,void 0,function(){var n;return di(this,function(s){switch(s.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(n=s.sent())?[2,n.find(function(c){return c.deviceId===e})]:[2,null]}})})},i.prototype.decodeFromInputVideoDevice=function(e,n){return ps(this,void 0,void 0,function(){return di(this,function(s){switch(s.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,s.sent()]}})})},i.prototype.decodeOnceFromVideoDevice=function(e,n){return ps(this,void 0,void 0,function(){return di(this,function(l){switch(l.label){case 0:return this.reset(),[4,this.decodeOnceFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n)];case 1:return[2,l.sent()]}})})},i.prototype.decodeOnceFromConstraints=function(e,n){return ps(this,void 0,void 0,function(){var s;return di(this,function(c){switch(c.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return s=c.sent(),[4,this.decodeOnceFromStream(s,n)];case 2:return[2,c.sent()]}})})},i.prototype.decodeOnceFromStream=function(e,n){return ps(this,void 0,void 0,function(){var s;return di(this,function(l){switch(l.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return s=l.sent(),[4,this.decodeOnce(s)];case 2:return[2,l.sent()]}})})},i.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,s){return ps(this,void 0,void 0,function(){return di(this,function(c){switch(c.label){case 0:return[4,this.decodeFromVideoDevice(e,n,s)];case 1:return[2,c.sent()]}})})},i.prototype.decodeFromVideoDevice=function(e,n,s){return ps(this,void 0,void 0,function(){return di(this,function(g){switch(g.label){case 0:return[4,this.decodeFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n,s)];case 1:return[2,g.sent()]}})})},i.prototype.decodeFromConstraints=function(e,n,s){return ps(this,void 0,void 0,function(){var c;return di(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return c=l.sent(),[4,this.decodeFromStream(c,n,s)];case 2:return[2,l.sent()]}})})},i.prototype.decodeFromStream=function(e,n,s){return ps(this,void 0,void 0,function(){var c;return di(this,function(l){switch(l.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return c=l.sent(),[4,this.decodeContinuously(c,s)];case 2:return[2,l.sent()]}})})},i.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},i.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},i.prototype.attachStreamToVideo=function(e,n){return ps(this,void 0,void 0,function(){var s;return di(this,function(c){switch(c.label){case 0:return s=this.prepareVideoElement(n),this.addVideoSource(s,e),this.videoElement=s,this.stream=e,[4,this.playVideoOnLoadAsync(s)];case 1:return c.sent(),[2,s]}})})},i.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(s,c){return n.playVideoOnLoad(e,function(){return s()})})},i.prototype.playVideoOnLoad=function(e,n){var s=this;this.videoEndedListener=function(){return s.stopStreams()},this.videoCanPlayListener=function(){return s.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},i.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},i.prototype.tryPlayVideo=function(e){return ps(this,void 0,void 0,function(){return di(this,function(s){switch(s.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.play()];case 2:return s.sent(),[3,4];case 3:return s.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},i.prototype.getMediaElement=function(e,n){var s=document.getElementById(e);if(!s)throw new Zr("element with id '"+e+"' not found");if(s.nodeName.toLowerCase()!==n.toLowerCase())throw new Zr("element with id '"+e+"' must be an "+n+" element");return s},i.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new Zr("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},i.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new Zr("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},i.prototype.decodeFromVideoContinuously=function(e,n,s){if(void 0===e&&void 0===n)throw new Zr("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,s):this.decodeFromVideoElementContinuously(e,s)},i.prototype.decodeFromImageElement=function(e){if(!e)throw new Zr("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);return this.imageElement=n,this.isImageLoaded(n)?this.decodeOnce(n,!1,!0):this._decodeOnLoadImage(n)},i.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},i.prototype.decodeFromVideoElementContinuously=function(e,n){var s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(s,n)},i.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Zr("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},i.prototype.decodeFromImageUrl=function(e){if(!e)throw new Zr("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var s=this._decodeOnLoadImage(n);return n.src=e,s},i.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Zr("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),s=this.decodeFromVideoElement(n);return n.src=e,s},i.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new Zr("An URL must be provided.");this.reset();var s=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(s,n);return s.src=e,c},i.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(s,c){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(s,c)},e.addEventListener("load",n.imageLoadedListener)})},i.prototype._decodeOnLoadVideo=function(e){return ps(this,void 0,void 0,function(){return di(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},i.prototype._decodeOnLoadVideoContinuously=function(e,n){return ps(this,void 0,void 0,function(){return di(this,function(s){switch(s.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return s.sent(),this.decodeContinuously(e,n),[2]}})})},i.prototype.isImageLoaded=function(e){return!(!e.complete||0===e.naturalWidth)},i.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&((n=document.createElement("img")).width=200,n.height=200),"string"==typeof e&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},i.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&((n=document.createElement("video")).width=200,n.height=200),"string"==typeof e&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},i.prototype.decodeOnce=function(e,n,s){var c=this;void 0===n&&(n=!0),void 0===s&&(s=!0),this._stopAsyncDecode=!1;var l=function(g,m){if(c._stopAsyncDecode)return m(new We("Video stream has ended before any code could be detected.")),void(c._stopAsyncDecode=void 0);try{g(c.decode(e))}catch(z){if(n&&z instanceof We||(z instanceof li||z instanceof Zt)&&s)return setTimeout(l,c._timeBetweenDecodingAttempts,g,m);m(z)}};return new Promise(function(g,m){return l(g,m)})},i.prototype.decodeContinuously=function(e,n){var s=this;this._stopContinuousDecode=!1;var c=function(){if(s._stopContinuousDecode)s._stopContinuousDecode=void 0;else try{var l=s.decode(e);n(l,null),setTimeout(c,s.timeBetweenScansMillis)}catch(y){n(null,y),(y instanceof li||y instanceof Zt||y instanceof We)&&setTimeout(c,s._timeBetweenDecodingAttempts)}};c()},i.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},i.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var s=this.getCaptureCanvas(e),c=new Rd(s),l=new Oi(c);return new jc(l)},i.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),s=void 0;try{s=n.getContext("2d",{willReadFrequently:!0})}catch{s=n.getContext("2d")}this.captureCanvasContext=s}return this.captureCanvasContext},i.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},i.prototype.drawFrameOnCanvas=function(e,n,s){void 0===n&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),void 0===s&&(s=this.captureCanvasContext),s.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},i.prototype.drawImageOnCanvas=function(e,n,s){void 0===n&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),void 0===s&&(s=this.captureCanvasContext),s.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},i.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},i.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var s,c,n=document.createElement("canvas");return typeof e<"u"&&(e instanceof HTMLVideoElement?(s=e.videoWidth,c=e.videoHeight):e instanceof HTMLImageElement&&(s=e.naturalWidth||e.width,c=e.naturalHeight||e.height)),n.style.width=s+"px",n.style.height=c+"px",n.width=s,n.height=c,n},i.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},i.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},i.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},i.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},i.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},i.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},i.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},i}();const ao=function(){function i(e,n,s,c,l,g){void 0===s&&(s=null==n?0:8*n.length),void 0===g&&(g=Ur.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=s,this.resultPoints=c,this.format=l,this.timestamp=g,this.text=e,this.rawBytes=n,this.numBits=null==s?null==n?0:8*n.length:s,this.resultPoints=c,this.format=l,this.resultMetadata=null,this.timestamp=null==g?Ur.currentTimeMillis():g}return i.prototype.getText=function(){return this.text},i.prototype.getRawBytes=function(){return this.rawBytes},i.prototype.getNumBits=function(){return this.numBits},i.prototype.getResultPoints=function(){return this.resultPoints},i.prototype.getBarcodeFormat=function(){return this.format},i.prototype.getResultMetadata=function(){return this.resultMetadata},i.prototype.putMetadata=function(e,n){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},i.prototype.putAllMetadata=function(e){null!==e&&(this.resultMetadata=null===this.resultMetadata?e:new Map(e))},i.prototype.addResultPoints=function(e){var n=this.resultPoints;if(null===n)this.resultPoints=e;else if(null!==e&&e.length>0){var s=new Array(n.length+e.length);Ur.arraycopy(n,0,s,0,n.length),Ur.arraycopy(e,0,s,n.length,e.length),this.resultPoints=s}},i.prototype.getTimestamp=function(){return this.timestamp},i.prototype.toString=function(){return this.text},i}();var ju=function(i){return i[i.AZTEC=0]="AZTEC",i[i.CODABAR=1]="CODABAR",i[i.CODE_39=2]="CODE_39",i[i.CODE_93=3]="CODE_93",i[i.CODE_128=4]="CODE_128",i[i.DATA_MATRIX=5]="DATA_MATRIX",i[i.EAN_8=6]="EAN_8",i[i.EAN_13=7]="EAN_13",i[i.ITF=8]="ITF",i[i.MAXICODE=9]="MAXICODE",i[i.PDF_417=10]="PDF_417",i[i.QR_CODE=11]="QR_CODE",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",i}(ju||{});const cn=ju;var Cc=function(i){return i[i.OTHER=0]="OTHER",i[i.ORIENTATION=1]="ORIENTATION",i[i.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",i[i.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",i[i.ISSUE_NUMBER=4]="ISSUE_NUMBER",i[i.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",i[i.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",i[i.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",i[i.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",i[i.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",i[i.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",i}(Cc||{});const Yi=Cc,wc=function(){function i(e,n,s,c,l,g){void 0===l&&(l=-1),void 0===g&&(g=-1),this.rawBytes=e,this.text=n,this.byteSegments=s,this.ecLevel=c,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=g,this.numBits=null==e?0:8*e.length}return i.prototype.getRawBytes=function(){return this.rawBytes},i.prototype.getNumBits=function(){return this.numBits},i.prototype.setNumBits=function(e){this.numBits=e},i.prototype.getText=function(){return this.text},i.prototype.getByteSegments=function(){return this.byteSegments},i.prototype.getECLevel=function(){return this.ecLevel},i.prototype.getErrorsCorrected=function(){return this.errorsCorrected},i.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},i.prototype.getErasures=function(){return this.erasures},i.prototype.setErasures=function(e){this.erasures=e},i.prototype.getOther=function(){return this.other},i.prototype.setOther=function(e){this.other=e},i.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},i.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},i.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},i}(),Gu=function(){function i(){}return i.prototype.exp=function(e){return this.expTable[e]},i.prototype.log=function(e){if(0===e)throw new fn;return this.logTable[e]},i.addOrSubtract=function(e,n){return e^n},i}(),zo=function(){function i(e,n){if(0===n.length)throw new fn;this.field=e;var s=n.length;if(s>1&&0===n[0]){for(var c=1;c<s&&0===n[c];)c++;c===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-c),Ur.arraycopy(n,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return i.prototype.getCoefficients=function(){return this.coefficients},i.prototype.getDegree=function(){return this.coefficients.length-1},i.prototype.isZero=function(){return 0===this.coefficients[0]},i.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},i.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var s,n=this.coefficients;if(1===e){s=0;for(var c=0,l=n.length;c!==l;c++)s=Gu.addOrSubtract(s,n[c]);return s}s=n[0];var m=n.length,y=this.field;for(c=1;c<m;c++)s=Gu.addOrSubtract(y.multiply(e,s),n[c]);return s},i.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new fn("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,s=e.coefficients;if(n.length>s.length){var c=n;n=s,s=c}var l=new Int32Array(s.length),g=s.length-n.length;Ur.arraycopy(s,0,l,0,g);for(var m=g;m<s.length;m++)l[m]=Gu.addOrSubtract(n[m-g],s[m]);return new i(this.field,l)},i.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new fn("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,s=n.length,c=e.coefficients,l=c.length,g=new Int32Array(s+l-1),m=this.field,y=0;y<s;y++)for(var b=n[y],P=0;P<l;P++)g[y+P]=Gu.addOrSubtract(g[y+P],m.multiply(b,c[P]));return new i(m,g)},i.prototype.multiplyScalar=function(e){if(0===e)return this.field.getZero();if(1===e)return this;for(var n=this.coefficients.length,s=this.field,c=new Int32Array(n),l=this.coefficients,g=0;g<n;g++)c[g]=s.multiply(l[g],e);return new i(s,c)},i.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new fn;if(0===n)return this.field.getZero();for(var s=this.coefficients,c=s.length,l=new Int32Array(c+e),g=this.field,m=0;m<c;m++)l[m]=g.multiply(s[m],n);return new i(g,l)},i.prototype.divide=function(e){if(!this.field.equals(e.field))throw new fn("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new fn("Divide by 0");for(var n=this.field,s=n.getZero(),c=this,l=e.getCoefficient(e.getDegree()),g=n.inverse(l);c.getDegree()>=e.getDegree()&&!c.isZero();){var m=c.getDegree()-e.getDegree(),y=n.multiply(c.getCoefficient(c.getDegree()),g),b=e.multiplyByMonomial(m,y),P=n.buildMonomial(m,y);s=s.addOrSubtract(P),c=c.addOrSubtract(b)}return[s,c]},i.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var s=this.getCoefficient(n);if(0!==s){if(s<0?(e+=" - ",s=-s):e.length>0&&(e+=" + "),0===n||1!==s){var c=this.field.log(s);0===c?e+="1":1===c?e+="a":(e+="a^",e+=c)}0!==n&&(1===n?e+="x":(e+="x^",e+=n))}}return e},i}();var Wo=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Gc=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Wo(e,i),e.kind="ArithmeticException",e}(Sn);var Co=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const pi=function(i){function e(n,s,c){var l=i.call(this)||this;l.primitive=n,l.size=s,l.generatorBase=c;for(var g=new Int32Array(s),m=1,y=0;y<s;y++)g[y]=m,(m*=2)>=s&&(m^=n,m&=s-1);l.expTable=g;var b=new Int32Array(s);for(y=0;y<s-1;y++)b[g[y]]=y;return l.logTable=b,l.zero=new zo(l,Int32Array.from([0])),l.one=new zo(l,Int32Array.from([1])),l}return Co(e,i),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,s){if(n<0)throw new fn;if(0===s)return this.zero;var c=new Int32Array(n+1);return c[0]=s,new zo(this,c)},e.prototype.inverse=function(n){if(0===n)throw new Gc;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,s){return 0===n||0===s?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+cr.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Gu);var Pr=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const zu=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Pr(e,i),e.kind="ReedSolomonException",e}(Sn);var Pd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const gs=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Pd(e,i),e.kind="IllegalStateException",e}(Sn),La=function(){function i(e){this.field=e}return i.prototype.decode=function(e,n){for(var s=this.field,c=new zo(s,e),l=new Int32Array(n),g=!0,m=0;m<n;m++){var y=c.evaluateAt(s.exp(m+s.getGeneratorBase()));l[l.length-1-m]=y,0!==y&&(g=!1)}if(!g){var b=new zo(s,l),P=this.runEuclideanAlgorithm(s.buildMonomial(n,1),b,n),z=P[1],K=this.findErrorLocations(P[0]),ae=this.findErrorMagnitudes(z,K);for(m=0;m<K.length;m++){var Ee=e.length-1-s.log(K[m]);if(Ee<0)throw new zu("Bad error location");e[Ee]=pi.addOrSubtract(e[Ee],ae[m])}}},i.prototype.runEuclideanAlgorithm=function(e,n,s){if(e.getDegree()<n.getDegree()){var c=e;e=n,n=c}for(var l=this.field,g=e,m=n,y=l.getZero(),b=l.getOne();m.getDegree()>=(s/2|0);){var P=g,B=y;if(y=b,(g=m).isZero())throw new zu("r_{i-1} was zero");m=P;for(var z=l.getZero(),K=g.getCoefficient(g.getDegree()),ae=l.inverse(K);m.getDegree()>=g.getDegree()&&!m.isZero();){var Ee=m.getDegree()-g.getDegree(),Me=l.multiply(m.getCoefficient(m.getDegree()),ae);z=z.addOrSubtract(l.buildMonomial(Ee,Me)),m=m.addOrSubtract(g.multiplyByMonomial(Ee,Me))}if(b=z.multiply(y).addOrSubtract(B),m.getDegree()>=g.getDegree())throw new gs("Division algorithm failed to reduce polynomial?")}var Le=b.getCoefficient(0);if(0===Le)throw new zu("sigmaTilde(0) was zero");var ke=l.inverse(Le);return[b.multiplyScalar(ke),m.multiplyScalar(ke)]},i.prototype.findErrorLocations=function(e){var n=e.getDegree();if(1===n)return Int32Array.from([e.getCoefficient(1)]);for(var s=new Int32Array(n),c=0,l=this.field,g=1;g<l.getSize()&&c<n;g++)0===e.evaluateAt(g)&&(s[c]=l.inverse(g),c++);if(c!==n)throw new zu("Error locator degree does not match number of roots");return s},i.prototype.findErrorMagnitudes=function(e,n){for(var s=n.length,c=new Int32Array(s),l=this.field,g=0;g<s;g++){for(var m=l.inverse(n[g]),y=1,b=0;b<s;b++)if(g!==b){var P=l.multiply(n[b],m);y=l.multiply(y,1&P?-2&P:1|P)}c[g]=l.multiply(e.evaluateAt(m),l.inverse(y)),0!==l.getGeneratorBase()&&(c[g]=l.multiply(c[g],m))}return c},i}();var Zi=function(i){return i[i.UPPER=0]="UPPER",i[i.LOWER=1]="LOWER",i[i.MIXED=2]="MIXED",i[i.DIGIT=3]="DIGIT",i[i.PUNCT=4]="PUNCT",i[i.BINARY=5]="BINARY",i}(Zi||{});const Wu=function(){function i(){}return i.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),s=this.extractBits(n),c=this.correctBits(s),l=i.convertBoolArrayToByteArray(c),g=i.getEncodedData(c),m=new wc(l,g,null,null);return m.setNumBits(c.length),m},i.highLevelDecode=function(e){return this.getEncodedData(e)},i.getEncodedData=function(e){for(var n=e.length,s=Zi.UPPER,c=Zi.UPPER,l="",g=0;g<n;)if(c===Zi.BINARY){if(n-g<5)break;var m=i.readCode(e,g,5);if(g+=5,0===m){if(n-g<11)break;m=i.readCode(e,g,11)+31,g+=11}for(var y=0;y<m;y++){if(n-g<8){g=n;break}var b=i.readCode(e,g,8);l+=mt.castAsNonUtf8Char(b),g+=8}c=s}else{var P=c===Zi.DIGIT?4:5;if(n-g<P)break;b=i.readCode(e,g,P),g+=P;var B=i.getCharacter(c,b);B.startsWith("CTRL_")?(s=c,c=i.getTable(B.charAt(5)),"L"===B.charAt(6)&&(s=c)):(l+=B,c=s)}return l},i.getTable=function(e){switch(e){case"L":return Zi.LOWER;case"P":return Zi.PUNCT;case"M":return Zi.MIXED;case"D":return Zi.DIGIT;case"B":return Zi.BINARY;default:return Zi.UPPER}},i.getCharacter=function(e,n){switch(e){case Zi.UPPER:return i.UPPER_TABLE[n];case Zi.LOWER:return i.LOWER_TABLE[n];case Zi.MIXED:return i.MIXED_TABLE[n];case Zi.PUNCT:return i.PUNCT_TABLE[n];case Zi.DIGIT:return i.DIGIT_TABLE[n];default:throw new gs("Bad table")}},i.prototype.correctBits=function(e){var n,s;this.ddata.getNbLayers()<=2?(s=6,n=pi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,n=pi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,n=pi.AZTEC_DATA_10):(s=12,n=pi.AZTEC_DATA_12);var c=this.ddata.getNbDatablocks(),l=e.length/s;if(l<c)throw new Zt;for(var g=e.length%s,m=new Int32Array(l),y=0;y<l;y++,g+=s)m[y]=i.readCode(e,g,s);try{new La(n).decode(m,l-c)}catch(Me){throw new Zt(Me)}var P=(1<<s)-1,B=0;for(y=0;y<c;y++){if(0===(z=m[y])||z===P)throw new Zt;(1===z||z===P-1)&&B++}var K=new Array(c*s-B),ae=0;for(y=0;y<c;y++){var z;if(1===(z=m[y])||z===P-1)K.fill(z>1,ae,ae+s-1),ae+=s-1;else for(var Ee=s-1;Ee>=0;--Ee)K[ae++]=!!(z&1<<Ee)}return K},i.prototype.extractBits=function(e){var n=this.ddata.isCompact(),s=this.ddata.getNbLayers(),c=(n?11:14)+4*s,l=new Int32Array(c),g=new Array(this.totalBitsInLayer(s,n));if(n)for(var m=0;m<l.length;m++)l[m]=m;else{var y=c+1+2*cr.truncDivision(cr.truncDivision(c,2)-1,15),b=c/2,P=cr.truncDivision(y,2);for(m=0;m<b;m++){var B=m+cr.truncDivision(m,15);l[b-m-1]=P-B-1,l[b+m]=P+B+1}}m=0;for(var z=0;m<s;m++){for(var K=4*(s-m)+(n?9:12),ae=2*m,Ee=c-1-ae,Me=0;Me<K;Me++)for(var Le=2*Me,ke=0;ke<2;ke++)g[z+Le+ke]=e.get(l[ae+ke],l[ae+Me]),g[z+2*K+Le+ke]=e.get(l[ae+Me],l[Ee-ke]),g[z+4*K+Le+ke]=e.get(l[Ee-ke],l[Ee-Me]),g[z+6*K+Le+ke]=e.get(l[Ee-Me],l[ae+ke]);z+=8*K}return g},i.readCode=function(e,n,s){for(var c=0,l=n;l<n+s;l++)c<<=1,e[l]&&(c|=1);return c},i.readByte=function(e,n){var s=e.length-n;return s>=8?i.readCode(e,n,8):i.readCode(e,n,s)<<8-s},i.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),s=0;s<n.length;s++)n[s]=i.readByte(e,8*s);return n},i.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},i.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],i.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],i.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],i.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],i.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],i}(),Ir=function(){function i(){}return i.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},i.distance=function(e,n,s,c){var l=e-s,g=n-c;return Math.sqrt(l*l+g*g)},i.sum=function(e){for(var n=0,s=0,c=e.length;s!==c;s++)n+=e[s];return n},i}(),hl=function(){function i(){}return i.floatToIntBits=function(e){return e},i.MAX_VALUE=Number.MAX_SAFE_INTEGER,i}(),gn=function(){function i(e,n){this.x=e,this.y=n}return i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.equals=function(e){return e instanceof i&&(this.x===e.x&&this.y===e.y)},i.prototype.hashCode=function(){return 31*hl.floatToIntBits(this.x)+hl.floatToIntBits(this.y)},i.prototype.toString=function(){return"("+this.x+","+this.y+")"},i.orderBestPatterns=function(e){var l,g,m,n=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),c=this.distance(e[0],e[2]);if(s>=n&&s>=c?(g=e[0],l=e[1],m=e[2]):c>=s&&c>=n?(g=e[1],l=e[0],m=e[2]):(g=e[2],l=e[0],m=e[1]),this.crossProductZ(l,g,m)<0){var y=l;l=m,m=y}e[0]=l,e[1]=g,e[2]=m},i.distance=function(e,n){return Ir.distance(e.x,e.y,n.x,n.y)},i.crossProductZ=function(e,n,s){var c=n.x,l=n.y;return(s.x-c)*(e.y-l)-(s.y-l)*(e.x-c)},i}(),pl=function(){function i(e,n){this.bits=e,this.points=n}return i.prototype.getBits=function(){return this.bits},i.prototype.getPoints=function(){return this.points},i}();var Va=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ba=function(i){function e(n,s,c,l,g){var m=i.call(this,n,s)||this;return m.compact=c,m.nbDatablocks=l,m.nbLayers=g,m}return Va(e,i),e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(pl),Nd=function(){function i(e,n,s,c){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==n&&(n=i.INIT_SIZE),null==s&&(s=e.getWidth()/2|0),null==c&&(c=e.getHeight()/2|0);var l=n/2|0;if(this.leftInit=s-l,this.rightInit=s+l,this.upInit=c-l,this.downInit=c+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new We}return i.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,s=this.upInit,c=this.downInit,l=!1,g=!0,m=!1,y=!1,b=!1,P=!1,B=!1,z=this.width,K=this.height;g;){g=!1;for(var ae=!0;(ae||!y)&&n<z;)(ae=this.containsBlackPoint(s,c,n,!1))?(n++,g=!0,y=!0):y||n++;if(n>=z){l=!0;break}for(var Ee=!0;(Ee||!b)&&c<K;)(Ee=this.containsBlackPoint(e,n,c,!0))?(c++,g=!0,b=!0):b||c++;if(c>=K){l=!0;break}for(var Me=!0;(Me||!P)&&e>=0;)(Me=this.containsBlackPoint(s,c,e,!1))?(e--,g=!0,P=!0):P||e--;if(e<0){l=!0;break}for(var Le=!0;(Le||!B)&&s>=0;)(Le=this.containsBlackPoint(e,n,s,!0))?(s--,g=!0,B=!0):B||s--;if(s<0){l=!0;break}g&&(m=!0)}if(!l&&m){for(var ke=n-e,Ye=null,at=1;null===Ye&&at<ke;at++)Ye=this.getBlackPointOnSegment(e,c-at,e+at,c);if(null==Ye)throw new We;var Lt=null;for(at=1;null===Lt&&at<ke;at++)Lt=this.getBlackPointOnSegment(e,s+at,e+at,s);if(null==Lt)throw new We;var $t=null;for(at=1;null===$t&&at<ke;at++)$t=this.getBlackPointOnSegment(n,s+at,n-at,s);if(null==$t)throw new We;var Jt=null;for(at=1;null===Jt&&at<ke;at++)Jt=this.getBlackPointOnSegment(n,c-at,n-at,c);if(null==Jt)throw new We;return this.centerEdges(Jt,Ye,$t,Lt)}throw new We},i.prototype.getBlackPointOnSegment=function(e,n,s,c){for(var l=Ir.round(Ir.distance(e,n,s,c)),g=(s-e)/l,m=(c-n)/l,y=this.image,b=0;b<l;b++){var P=Ir.round(e+b*g),B=Ir.round(n+b*m);if(y.get(P,B))return new gn(P,B)}return null},i.prototype.centerEdges=function(e,n,s,c){var l=e.getX(),g=e.getY(),m=n.getX(),y=n.getY(),b=s.getX(),P=s.getY(),B=c.getX(),z=c.getY(),K=i.CORR;return l<this.width/2?[new gn(B-K,z+K),new gn(m+K,y+K),new gn(b-K,P-K),new gn(l+K,g-K)]:[new gn(B+K,z+K),new gn(m+K,y-K),new gn(b-K,P+K),new gn(l-K,g-K)]},i.prototype.containsBlackPoint=function(e,n,s,c){var l=this.image;if(c){for(var g=e;g<=n;g++)if(l.get(g,s))return!0}else for(var m=e;m<=n;m++)if(l.get(s,m))return!0;return!1},i.INIT_SIZE=10,i.CORR=1,i}(),gl=function(){function i(){}return i.checkAndNudgePoints=function(e,n){for(var s=e.getWidth(),c=e.getHeight(),l=!0,g=0;g<n.length&&l;g+=2){var m=Math.floor(n[g]),y=Math.floor(n[g+1]);if(m<-1||m>s||y<-1||y>c)throw new We;l=!1,-1===m?(n[g]=0,l=!0):m===s&&(n[g]=s-1,l=!0),-1===y?(n[g+1]=0,l=!0):y===c&&(n[g+1]=c-1,l=!0)}for(l=!0,g=n.length-2;g>=0&&l;g-=2){if(m=Math.floor(n[g]),y=Math.floor(n[g+1]),m<-1||m>s||y<-1||y>c)throw new We;l=!1,-1===m?(n[g]=0,l=!0):m===s&&(n[g]=s-1,l=!0),-1===y?(n[g+1]=0,l=!0):y===c&&(n[g+1]=c-1,l=!0)}},i}(),$c=function(){function i(e,n,s,c,l,g,m,y,b){this.a11=e,this.a21=n,this.a31=s,this.a12=c,this.a22=l,this.a32=g,this.a13=m,this.a23=y,this.a33=b}return i.quadrilateralToQuadrilateral=function(e,n,s,c,l,g,m,y,b,P,B,z,K,ae,Ee,Me){var Le=i.quadrilateralToSquare(e,n,s,c,l,g,m,y);return i.squareToQuadrilateral(b,P,B,z,K,ae,Ee,Me).times(Le)},i.prototype.transformPoints=function(e){for(var n=e.length,s=this.a11,c=this.a12,l=this.a13,g=this.a21,m=this.a22,y=this.a23,b=this.a31,P=this.a32,B=this.a33,z=0;z<n;z+=2){var K=e[z],ae=e[z+1],Ee=l*K+y*ae+B;e[z]=(s*K+g*ae+b)/Ee,e[z+1]=(c*K+m*ae+P)/Ee}},i.prototype.transformPointsWithValues=function(e,n){for(var s=this.a11,c=this.a12,l=this.a13,g=this.a21,m=this.a22,y=this.a23,b=this.a31,P=this.a32,B=this.a33,z=e.length,K=0;K<z;K++){var ae=e[K],Ee=n[K],Me=l*ae+y*Ee+B;e[K]=(s*ae+g*Ee+b)/Me,n[K]=(c*ae+m*Ee+P)/Me}},i.squareToQuadrilateral=function(e,n,s,c,l,g,m,y){var b=e-s+l-m,P=n-c+g-y;if(0===b&&0===P)return new i(s-e,l-s,e,c-n,g-c,n,0,0,1);var B=s-l,z=m-l,K=c-g,ae=y-g,Ee=B*ae-z*K,Me=(b*ae-z*P)/Ee,Le=(B*P-b*K)/Ee;return new i(s-e+Me*s,m-e+Le*m,e,c-n+Me*c,y-n+Le*y,n,Me,Le,1)},i.quadrilateralToSquare=function(e,n,s,c,l,g,m,y){return i.squareToQuadrilateral(e,n,s,c,l,g,m,y).buildAdjoint()},i.prototype.buildAdjoint=function(){return new i(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},i.prototype.times=function(e){return new i(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},i}();var R=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const M=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return R(e,i),e.prototype.sampleGrid=function(n,s,c,l,g,m,y,b,P,B,z,K,ae,Ee,Me,Le,ke,Ye,at){var Lt=$c.quadrilateralToQuadrilateral(l,g,m,y,b,P,B,z,K,ae,Ee,Me,Le,ke,Ye,at);return this.sampleGridWithTransform(n,s,c,Lt)},e.prototype.sampleGridWithTransform=function(n,s,c,l){if(s<=0||c<=0)throw new We;for(var g=new rr(s,c),m=new Float32Array(2*s),y=0;y<c;y++){for(var b=m.length,P=y+.5,B=0;B<b;B+=2)m[B]=B/2+.5,m[B+1]=P;l.transformPoints(m),gl.checkAndNudgePoints(n,m);try{for(B=0;B<b;B+=2)n.get(Math.floor(m[B]),Math.floor(m[B+1]))&&g.set(B/2,y)}catch{throw new We}}return g},e}(gl),Q=function(){function i(){}return i.setGridSampler=function(e){i.gridSampler=e},i.getInstance=function(){return i.gridSampler},i.gridSampler=new M,i}();var oe=function(){function i(e,n){this.x=e,this.y=n}return i.prototype.toResultPoint=function(){return new gn(this.getX(),this.getY())},i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i}();const dt=function(){function i(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return i.prototype.detect=function(){return this.detectMirror(!1)},i.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),s=this.getBullsEyeCorners(n);if(e){var c=s[0];s[0]=s[2],s[2]=c}this.extractParameters(s);var l=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),g=this.getMatrixCornerPoints(s);return new Ba(l,g,this.compact,this.nbDataBlocks,this.nbLayers)},i.prototype.extractParameters=function(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new We;var n=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(s,n);for(var c=0,l=0;l<4;l++){var g=s[(this.shift+l)%4];this.compact?(c<<=7,c+=g>>1&127):(c<<=10,c+=(g>>2&992)+(g>>1&31))}var m=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=1+(m>>6),this.nbDataBlocks=1+(63&m)):(this.nbLayers=1+(m>>11),this.nbDataBlocks=1+(2047&m))},i.prototype.getRotation=function(e,n){var s=0;e.forEach(function(l,g,m){s=(l>>n-2<<1)+(1&l)+(s<<3)}),s=((1&s)<<11)+(s>>1);for(var c=0;c<4;c++)if(cr.bitCount(s^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new We},i.prototype.getCorrectedParameterData=function(e,n){var s,c;n?(s=7,c=2):(s=10,c=4);for(var l=s-c,g=new Int32Array(s),m=s-1;m>=0;--m)g[m]=15&e,e>>=4;try{new La(pi.AZTEC_PARAM).decode(g,l)}catch{throw new We}var b=0;for(m=0;m<c;m++)b=(b<<4)+g[m];return b},i.prototype.getBullsEyeCorners=function(e){var n=e,s=e,c=e,l=e,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var m=this.getFirstDifferent(n,g,1,-1),y=this.getFirstDifferent(s,g,1,1),b=this.getFirstDifferent(c,g,-1,1),P=this.getFirstDifferent(l,g,-1,-1);if(this.nbCenterLayers>2){var B=this.distancePoint(P,m)*this.nbCenterLayers/(this.distancePoint(l,n)*(this.nbCenterLayers+2));if(B<.75||B>1.25||!this.isWhiteOrBlackRectangle(m,y,b,P))break}n=m,s=y,c=b,l=P,g=!g}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new We;this.compact=5===this.nbCenterLayers;var z=new gn(n.getX()+.5,n.getY()-.5),K=new gn(s.getX()+.5,s.getY()+.5),ae=new gn(c.getX()-.5,c.getY()+.5),Ee=new gn(l.getX()-.5,l.getY()-.5);return this.expandSquare([z,K,ae,Ee],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},i.prototype.getMatrixCenter=function(){var e,n,s,c;try{e=(l=new Nd(this.image).detect())[0],n=l[1],s=l[2],c=l[3]}catch{var g=this.image.getWidth()/2,m=this.image.getHeight()/2;e=this.getFirstDifferent(new oe(g+7,m-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new oe(g+7,m+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new oe(g-7,m+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new oe(g-7,m-7),!1,-1,-1).toResultPoint()}var y=Ir.round((e.getX()+c.getX()+n.getX()+s.getX())/4),b=Ir.round((e.getY()+c.getY()+n.getY()+s.getY())/4);try{var l;e=(l=new Nd(this.image,15,y,b).detect())[0],n=l[1],s=l[2],c=l[3]}catch{e=this.getFirstDifferent(new oe(y+7,b-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new oe(y+7,b+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new oe(y-7,b+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new oe(y-7,b-7),!1,-1,-1).toResultPoint()}return y=Ir.round((e.getX()+c.getX()+n.getX()+s.getX())/4),b=Ir.round((e.getY()+c.getY()+n.getY()+s.getY())/4),new oe(y,b)},i.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},i.prototype.sampleGrid=function(e,n,s,c,l){var g=Q.getInstance(),m=this.getDimension(),y=m/2-this.nbCenterLayers,b=m/2+this.nbCenterLayers;return g.sampleGrid(e,m,m,y,y,b,y,b,b,y,b,n.getX(),n.getY(),s.getX(),s.getY(),c.getX(),c.getY(),l.getX(),l.getY())},i.prototype.sampleLine=function(e,n,s){for(var c=0,l=this.distanceResultPoint(e,n),g=l/s,m=e.getX(),y=e.getY(),b=g*(n.getX()-e.getX())/l,P=g*(n.getY()-e.getY())/l,B=0;B<s;B++)this.image.get(Ir.round(m+B*b),Ir.round(y+B*P))&&(c|=1<<s-B-1);return c},i.prototype.isWhiteOrBlackRectangle=function(e,n,s,c){e=new oe(e.getX()-3,e.getY()+3),n=new oe(n.getX()-3,n.getY()-3),s=new oe(s.getX()+3,s.getY()-3),c=new oe(c.getX()+3,c.getY()+3);var g=this.getColor(c,e);if(0===g)return!1;var m=this.getColor(e,n);return m===g&&(m=this.getColor(n,s))===g&&(m=this.getColor(s,c))===g},i.prototype.getColor=function(e,n){for(var s=this.distancePoint(e,n),c=(n.getX()-e.getX())/s,l=(n.getY()-e.getY())/s,g=0,m=e.getX(),y=e.getY(),b=this.image.get(e.getX(),e.getY()),P=Math.ceil(s),B=0;B<P;B++)y+=l,this.image.get(Ir.round(m+=c),Ir.round(y))!==b&&g++;var z=g/s;return z>.1&&z<.9?0:z<=.1===b?1:-1},i.prototype.getFirstDifferent=function(e,n,s,c){for(var l=e.getX()+s,g=e.getY()+c;this.isValid(l,g)&&this.image.get(l,g)===n;)l+=s,g+=c;for(l-=s,g-=c;this.isValid(l,g)&&this.image.get(l,g)===n;)l+=s;for(l-=s;this.isValid(l,g)&&this.image.get(l,g)===n;)g+=c;return new oe(l,g-=c)},i.prototype.expandSquare=function(e,n,s){var c=s/(2*n),l=e[0].getX()-e[2].getX(),g=e[0].getY()-e[2].getY(),m=(e[0].getX()+e[2].getX())/2,y=(e[0].getY()+e[2].getY())/2,b=new gn(m+c*l,y+c*g),P=new gn(m-c*l,y-c*g);return l=e[1].getX()-e[3].getX(),g=e[1].getY()-e[3].getY(),m=(e[1].getX()+e[3].getX())/2,y=(e[1].getY()+e[3].getY())/2,[b,new gn(m+c*l,y+c*g),P,new gn(m-c*l,y-c*g)]},i.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},i.prototype.isValidPoint=function(e){var n=Ir.round(e.getX()),s=Ir.round(e.getY());return this.isValid(n,s)},i.prototype.distancePoint=function(e,n){return Ir.distance(e.getX(),e.getY(),n.getX(),n.getY())},i.prototype.distanceResultPoint=function(e,n){return Ir.distance(e.getX(),e.getY(),n.getX(),n.getY())},i.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(cr.truncDivision(this.nbLayers-4,8)+1)+15},i}(),Pt=function(){function i(){}return i.prototype.decode=function(e,n){void 0===n&&(n=null);var s=null,c=new dt(e.getBlackMatrix()),l=null,g=null;try{l=(m=c.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(n,l),g=(new Wu).decode(m)}catch(B){s=B}if(null==g)try{var m;l=(m=c.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(n,l),g=(new Wu).decode(m)}catch(B){throw s??B}var y=new ao(g.getText(),g.getRawBytes(),g.getNumBits(),l,cn.AZTEC,Ur.currentTimeMillis()),b=g.getByteSegments();null!=b&&y.putMetadata(Yi.BYTE_SEGMENTS,b);var P=g.getECLevel();return null!=P&&y.putMetadata(Yi.ERROR_CORRECTION_LEVEL,P),y},i.prototype.reportFoundResultPoints=function(e,n){if(null!=e){var s=e.get(Gn.NEED_RESULT_POINT_CALLBACK);null!=s&&n.forEach(function(c,l,g){s.foundPossibleResultPoint(c)})}},i.prototype.reset=function(){},i}();var i,pn=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();pn(function e(n){return void 0===n&&(n=500),i.call(this,new Pt,n)||this},i=oa);const sr=function(){function i(){}return i.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{if(n&&!0===n.get(Gn.TRY_HARDER)&&e.isRotateSupported()){var c=e.rotateCounterClockwise(),l=this.doDecode(c,n),g=l.getResultMetadata(),m=270;null!==g&&!0===g.get(Yi.ORIENTATION)&&(m+=g.get(Yi.ORIENTATION)%360),l.putMetadata(Yi.ORIENTATION,m);var y=l.getResultPoints();if(null!==y)for(var b=c.getHeight(),P=0;P<y.length;P++)y[P]=new gn(b-y[P].getY()-1,y[P].getX());return l}throw new We}},i.prototype.reset=function(){},i.prototype.doDecode=function(e,n){var y,s=e.getWidth(),c=e.getHeight(),l=new Ci(s),g=n&&!0===n.get(Gn.TRY_HARDER),m=Math.max(1,c>>(g?8:5));y=g?c:15;for(var b=Math.trunc(c/2),P=0;P<y;P++){var B=Math.trunc((P+1)/2),K=b+m*(1&P?-B:B);if(K<0||K>=c)break;try{l=e.getBlackRow(K,l)}catch{continue}for(var ae=function(ke){if(1===ke&&(l.reverse(),n&&!0===n.get(Gn.NEED_RESULT_POINT_CALLBACK))){var Ye=new Map;n.forEach(function($t,Jt){return Ye.set(Jt,$t)}),Ye.delete(Gn.NEED_RESULT_POINT_CALLBACK),n=Ye}try{var at=Ee.decodeRow(K,l,n);if(1===ke){at.putMetadata(Yi.ORIENTATION,180);var Lt=at.getResultPoints();null!==Lt&&(Lt[0]=new gn(s-Lt[0].getX()-1,Lt[0].getY()),Lt[1]=new gn(s-Lt[1].getX()-1,Lt[1].getY()))}return{value:at}}catch{}},Ee=this,Me=0;Me<2;Me++){var Le=ae(Me);if("object"==typeof Le)return Le.value}}throw new We},i.recordPattern=function(e,n,s){for(var c=s.length,l=0;l<c;l++)s[l]=0;var g=e.getSize();if(n>=g)throw new We;for(var m=!e.get(n),y=0,b=n;b<g;){if(e.get(b)!==m)s[y]++;else{if(++y===c)break;s[y]=1,m=!m}b++}if(y!==c&&(y!==c-1||b!==g))throw new We},i.recordPatternInReverse=function(e,n,s){for(var c=s.length,l=e.get(n);n>0&&c>=0;)e.get(--n)!==l&&(c--,l=!l);if(c>=0)throw new We;i.recordPattern(e,n+1,s)},i.patternMatchVariance=function(e,n,s){for(var c=e.length,l=0,g=0,m=0;m<c;m++)l+=e[m],g+=n[m];if(l<g)return Number.POSITIVE_INFINITY;var y=l/g;s*=y;for(var b=0,P=0;P<c;P++){var B=e[P],z=n[P]*y,K=B>z?B-z:z-B;if(K>s)return Number.POSITIVE_INFINITY;b+=K}return b/l},i}();var rs=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ps=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return rs(e,i),e.findStartPattern=function(n){for(var s=n.getSize(),c=n.getNextSet(0),l=0,g=Int32Array.from([0,0,0,0,0,0]),m=c,y=!1,P=c;P<s;P++)if(n.get(P)!==y)g[l]++;else{if(5===l){for(var B=e.MAX_AVG_VARIANCE,z=-1,K=e.CODE_START_A;K<=e.CODE_START_C;K++){var ae=sr.patternMatchVariance(g,e.CODE_PATTERNS[K],e.MAX_INDIVIDUAL_VARIANCE);ae<B&&(B=ae,z=K)}if(z>=0&&n.isRange(Math.max(0,m-(P-m)/2),m,!1))return Int32Array.from([m,P,z]);m+=g[0]+g[1],(g=g.slice(2,g.length))[l-1]=0,g[l]=0,l--}else l++;g[l]=1,y=!y}throw new We},e.decodeCode=function(n,s,c){sr.recordPattern(n,c,s);for(var l=e.MAX_AVG_VARIANCE,g=-1,m=0;m<e.CODE_PATTERNS.length;m++){var b=this.patternMatchVariance(s,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);b<l&&(l=b,g=m)}if(g>=0)return g;throw new We},e.prototype.decodeRow=function(n,s,c){var P,l=c&&!0===c.get(Gn.ASSUME_GS1),g=e.findStartPattern(s),m=g[2],y=0,b=new Uint8Array(20);switch(b[y++]=m,m){case e.CODE_START_A:P=e.CODE_CODE_A;break;case e.CODE_START_B:P=e.CODE_CODE_B;break;case e.CODE_START_C:P=e.CODE_CODE_C;break;default:throw new Zt}for(var B=!1,z=!1,K="",ae=g[0],Ee=g[1],Me=Int32Array.from([0,0,0,0,0,0]),Le=0,ke=0,Ye=m,at=0,Lt=!0,$t=!1,Jt=!1;!B;){var mn=z;switch(z=!1,Le=ke,ke=e.decodeCode(s,Me,Ee),b[y++]=ke,ke!==e.CODE_STOP&&(Lt=!0),ke!==e.CODE_STOP&&(Ye+=++at*ke),ae=Ee,Ee+=Me.reduce(function(hf,mh){return hf+mh},0),ke){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Zt}switch(P){case e.CODE_CODE_A:if(ke<64)K+=String.fromCharCode(Jt===$t?32+ke:32+ke+128),Jt=!1;else if(ke<96)K+=String.fromCharCode(Jt===$t?ke-64:ke+64),Jt=!1;else switch(ke!==e.CODE_STOP&&(Lt=!1),ke){case e.CODE_FNC_1:l&&(K+=0===K.length?"]C1":"\x1d");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!$t&&Jt?($t=!0,Jt=!1):$t&&Jt?($t=!1,Jt=!1):Jt=!0;break;case e.CODE_SHIFT:z=!0,P=e.CODE_CODE_B;break;case e.CODE_CODE_B:P=e.CODE_CODE_B;break;case e.CODE_CODE_C:P=e.CODE_CODE_C;break;case e.CODE_STOP:B=!0}break;case e.CODE_CODE_B:if(ke<96)K+=String.fromCharCode(Jt===$t?32+ke:32+ke+128),Jt=!1;else switch(ke!==e.CODE_STOP&&(Lt=!1),ke){case e.CODE_FNC_1:l&&(K+=0===K.length?"]C1":"\x1d");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!$t&&Jt?($t=!0,Jt=!1):$t&&Jt?($t=!1,Jt=!1):Jt=!0;break;case e.CODE_SHIFT:z=!0,P=e.CODE_CODE_A;break;case e.CODE_CODE_A:P=e.CODE_CODE_A;break;case e.CODE_CODE_C:P=e.CODE_CODE_C;break;case e.CODE_STOP:B=!0}break;case e.CODE_CODE_C:if(ke<100)ke<10&&(K+="0"),K+=ke;else switch(ke!==e.CODE_STOP&&(Lt=!1),ke){case e.CODE_FNC_1:l&&(K+=0===K.length?"]C1":"\x1d");break;case e.CODE_CODE_A:P=e.CODE_CODE_A;break;case e.CODE_CODE_B:P=e.CODE_CODE_B;break;case e.CODE_STOP:B=!0}}mn&&(P=P===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var nr=Ee-ae;if(Ee=s.getNextUnset(Ee),!s.isRange(Ee,Math.min(s.getSize(),Ee+(Ee-ae)/2),!1))throw new We;if((Ye-=at*Le)%103!==Le)throw new li;var ur=K.length;if(0===ur)throw new We;ur>0&&Lt&&(K=K.substring(0,P===e.CODE_CODE_C?ur-2:ur-1));for(var ss=(g[1]+g[0])/2,oi=ae+nr/2,Fo=b.length,uu=new Uint8Array(Fo),Nl=0;Nl<Fo;Nl++)uu[Nl]=b[Nl];var bp=[new gn(ss,n),new gn(oi,n)];return new ao(K,uu,0,bp,cn.CODE_128,(new Date).getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(sr);var zc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Za=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Cu=function(i){function e(n,s){void 0===n&&(n=!1),void 0===s&&(s=!1);var c=i.call(this)||this;return c.usingCheckDigit=n,c.extendedMode=s,c.decodeRowResult="",c.counters=new Int32Array(9),c}return zc(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m,y,b=this.counters;b.fill(0),this.decodeRowResult="";var K,ae,P=e.findAsteriskPattern(s,b),B=s.getNextSet(P[1]),z=s.getSize();do{e.recordPattern(s,B,b);var Ee=e.toNarrowWidePattern(b);if(Ee<0)throw new We;K=e.patternToChar(Ee),this.decodeRowResult+=K,ae=B;try{for(var Me=(l=void 0,Za(b)),Le=Me.next();!Le.done;Le=Me.next())B+=Le.value}catch(Fo){l={error:Fo}}finally{try{Le&&!Le.done&&(g=Me.return)&&g.call(Me)}finally{if(l)throw l.error}}B=s.getNextSet(B)}while("*"!==K);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var ur,Ye=0;try{for(var at=Za(b),Lt=at.next();!Lt.done;Lt=at.next())Ye+=Lt.value}catch(Fo){m={error:Fo}}finally{try{Lt&&!Lt.done&&(y=at.return)&&y.call(at)}finally{if(m)throw m.error}}if(B!==z&&2*(B-ae-Ye)<Ye)throw new We;if(this.usingCheckDigit){for(var Jt=this.decodeRowResult.length-1,mn=0,nr=0;nr<Jt;nr++)mn+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(nr));if(this.decodeRowResult.charAt(Jt)!==e.ALPHABET_STRING.charAt(mn%43))throw new li;this.decodeRowResult=this.decodeRowResult.substring(0,Jt)}if(0===this.decodeRowResult.length)throw new We;ur=this.extendedMode?e.decodeExtended(this.decodeRowResult):this.decodeRowResult;var oi=ae+Ye/2;return new ao(ur,null,0,[new gn((P[1]+P[0])/2,n),new gn(oi,n)],cn.CODE_39,(new Date).getTime())},e.findAsteriskPattern=function(n,s){for(var c=n.getSize(),l=n.getNextSet(0),g=0,m=l,y=!1,b=s.length,P=l;P<c;P++)if(n.get(P)!==y)s[g]++;else{if(g===b-1){if(this.toNarrowWidePattern(s)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,m-Math.floor((P-m)/2)),m,!1))return[m,P];m+=s[0]+s[1],s.copyWithin(0,2,2+g-1),s[g-1]=0,s[g]=0,g--}else g++;s[g]=1,y=!y}throw new We},e.toNarrowWidePattern=function(n){var s,c,m,l=n.length,g=0;do{var y=2147483647;try{for(var b=(s=void 0,Za(n)),P=b.next();!P.done;P=b.next())(B=P.value)<y&&B>g&&(y=B)}catch(Ee){s={error:Ee}}finally{try{P&&!P.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}g=y,m=0;for(var z=0,K=0,ae=0;ae<l;ae++)(B=n[ae])>g&&(K|=1<<l-1-ae,m++,z+=B);if(3===m){for(ae=0;ae<l&&m>0;ae++){var B;if((B=n[ae])>g&&(m--,2*B>=z))return-1}return K}}while(m>3);return-1},e.patternToChar=function(n){for(var s=0;s<e.CHARACTER_ENCODINGS.length;s++)if(e.CHARACTER_ENCODINGS[s]===n)return e.ALPHABET_STRING.charAt(s);if(n===e.ASTERISK_ENCODING)return"*";throw new We},e.decodeExtended=function(n){for(var s=n.length,c="",l=0;l<s;l++){var g=n.charAt(l);if("+"===g||"$"===g||"%"===g||"/"===g){var m=n.charAt(l+1),y="\0";switch(g){case"+":if(!(m>="A"&&m<="Z"))throw new Zt;y=String.fromCharCode(m.charCodeAt(0)+32);break;case"$":if(!(m>="A"&&m<="Z"))throw new Zt;y=String.fromCharCode(m.charCodeAt(0)-64);break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if("U"===m)y="\0";else if("V"===m)y="@";else if("W"===m)y="`";else{if("X"!==m&&"Y"!==m&&"Z"!==m)throw new Zt;y="\x7f"}break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else{if("Z"!==m)throw new Zt;y=":"}}c+=y,l++}else c+=g}return c},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(sr);var ml=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),kd=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Tf=function(i){function e(){var n=i.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return ml(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m,y,K,ae,b=this.findAsteriskPattern(s),P=s.getNextSet(b[1]),B=s.getSize(),z=this.counters;z.fill(0),this.decodeRowResult="";do{e.recordPattern(s,P,z);var Ee=this.toPattern(z);if(Ee<0)throw new We;K=this.patternToChar(Ee),this.decodeRowResult+=K,ae=P;try{for(var Me=(l=void 0,kd(z)),Le=Me.next();!Le.done;Le=Me.next())P+=Le.value}catch(nr){l={error:nr}}finally{try{Le&&!Le.done&&(g=Me.return)&&g.call(Me)}finally{if(l)throw l.error}}P=s.getNextSet(P)}while("*"!==K);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var Ye=0;try{for(var at=kd(z),Lt=at.next();!Lt.done;Lt=at.next())Ye+=Lt.value}catch(nr){m={error:nr}}finally{try{Lt&&!Lt.done&&(y=at.return)&&y.call(at)}finally{if(m)throw m.error}}if(P===B||!s.get(P))throw new We;if(this.decodeRowResult.length<2)throw new We;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var $t=this.decodeExtended(this.decodeRowResult),mn=ae+Ye/2;return new ao($t,null,0,[new gn((b[1]+b[0])/2,n),new gn(mn,n)],cn.CODE_93,(new Date).getTime())},e.prototype.findAsteriskPattern=function(n){var s=n.getSize(),c=n.getNextSet(0);this.counters.fill(0);for(var l=this.counters,g=c,m=!1,y=l.length,b=0,P=c;P<s;P++)if(n.get(P)!==m)l[b]++;else{if(b===y-1){if(this.toPattern(l)===e.ASTERISK_ENCODING)return new Int32Array([g,P]);g+=l[0]+l[1],l.copyWithin(0,2,2+b-1),l[b-1]=0,l[b]=0,b--}else b++;l[b]=1,m=!m}throw new We},e.prototype.toPattern=function(n){var s,c,l=0;try{for(var g=kd(n),m=g.next();!m.done;m=g.next())l+=m.value}catch(ae){s={error:ae}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}for(var b=0,P=n.length,B=0;B<P;B++){var z=Math.round(9*n[B]/l);if(z<1||z>4)return-1;if(1&B)b<<=z;else for(var K=0;K<z;K++)b=b<<1|1}return b},e.prototype.patternToChar=function(n){for(var s=0;s<e.CHARACTER_ENCODINGS.length;s++)if(e.CHARACTER_ENCODINGS[s]===n)return e.ALPHABET_STRING.charAt(s);throw new We},e.prototype.decodeExtended=function(n){for(var s=n.length,c="",l=0;l<s;l++){var g=n.charAt(l);if(g>="a"&&g<="d"){if(l>=s-1)throw new Zt;var m=n.charAt(l+1),y="\0";switch(g){case"d":if(!(m>="A"&&m<="Z"))throw new Zt;y=String.fromCharCode(m.charCodeAt(0)+32);break;case"a":if(!(m>="A"&&m<="Z"))throw new Zt;y=String.fromCharCode(m.charCodeAt(0)-64);break;case"b":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if("U"===m)y="\0";else if("V"===m)y="@";else if("W"===m)y="`";else{if(!(m>="X"&&m<="Z"))throw new Zt;y="\x7f"}break;case"c":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else{if("Z"!==m)throw new Zt;y=":"}}c+=y,l++}else c+=g}return c},e.prototype.checkChecksums=function(n){var s=n.length;this.checkOneChecksum(n,s-2,20),this.checkOneChecksum(n,s-1,15)},e.prototype.checkOneChecksum=function(n,s,c){for(var l=1,g=0,m=s-1;m>=0;m--)g+=l*e.ALPHABET_STRING.indexOf(n.charAt(m)),++l>c&&(l=1);if(n.charAt(s)!==e.ALPHABET_STRING[g%47])throw new li},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.ASTERISK_ENCODING=(e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350])[47],e}(sr);var $l=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const qu=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return $l(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m=this.decodeStart(s),y=this.decodeEnd(s),b=new hn;e.decodeMiddle(s,m[1],y[0],b);var P=b.toString(),B=null;null!=c&&(B=c.get(Gn.ALLOWED_LENGTHS)),null==B&&(B=e.DEFAULT_ALLOWED_LENGTHS);var z=P.length,K=!1,ae=0;try{for(var Ee=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(B),Me=Ee.next();!Me.done;Me=Ee.next()){var Le=Me.value;if(z===Le){K=!0;break}Le>ae&&(ae=Le)}}catch(at){l={error:at}}finally{try{Me&&!Me.done&&(g=Ee.return)&&g.call(Ee)}finally{if(l)throw l.error}}if(!K&&z>ae&&(K=!0),!K)throw new Zt;var ke=[new gn(m[1],n),new gn(y[0],n)];return new ao(P,null,0,ke,cn.ITF,(new Date).getTime())},e.decodeMiddle=function(n,s,c,l){var g=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(g.fill(0),m.fill(0),y.fill(0);s<c;){sr.recordPattern(n,s,g);for(var b=0;b<5;b++){var P=2*b;m[b]=g[P],y[b]=g[P+1]}var B=e.decodeDigit(m);l.append(B.toString()),B=this.decodeDigit(y),l.append(B.toString()),g.forEach(function(z){s+=z})}},e.prototype.decodeStart=function(n){var s=e.skipWhiteSpace(n),c=e.findGuardPattern(n,s,e.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(n,c[0]),c},e.prototype.validateQuietZone=function(n,s){var c=10*this.narrowLineWidth;c=c<s?c:s;for(var l=s-1;c>0&&l>=0&&!n.get(l);l--)c--;if(0!==c)throw new We},e.skipWhiteSpace=function(n){var s=n.getSize(),c=n.getNextSet(0);if(c===s)throw new We;return c},e.prototype.decodeEnd=function(n){n.reverse();try{var s=e.skipWhiteSpace(n),c=void 0;try{c=e.findGuardPattern(n,s,e.END_PATTERN_REVERSED[0])}catch(g){g instanceof We&&(c=e.findGuardPattern(n,s,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,c[0]);var l=c[0];return c[0]=n.getSize()-c[1],c[1]=n.getSize()-l,c}finally{n.reverse()}},e.findGuardPattern=function(n,s,c){var l=c.length,g=new Int32Array(l),m=n.getSize(),y=!1,b=0,P=s;g.fill(0);for(var B=s;B<m;B++)if(n.get(B)!==y)g[b]++;else{if(b===l-1){if(sr.patternMatchVariance(g,c,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[P,B];P+=g[0]+g[1],Ur.arraycopy(g,2,g,0,b-1),g[b-1]=0,g[b]=0,b--}else b++;g[b]=1,y=!y}throw new We},e.decodeDigit=function(n){for(var s=e.MAX_AVG_VARIANCE,c=-1,l=e.PATTERNS.length,g=0;g<l;g++){var y=sr.patternMatchVariance(n,e.PATTERNS[g],e.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,c=g):y===s&&(c=-1)}if(c>=0)return c%10;throw new We},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(sr);var zl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Wc=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return zl(e,i),e.findStartGuardPattern=function(n){for(var c,s=!1,l=0,g=Int32Array.from([0,0,0]);!s;){g=Int32Array.from([0,0,0]);var m=(c=e.findGuardPattern(n,l,!1,this.START_END_PATTERN,g))[0],y=m-((l=c[1])-m);y>=0&&(s=n.isRange(y,m,!1))}return c},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var s=n.length;if(0===s)return!1;var c=parseInt(n.charAt(s-1),10);return e.getStandardUPCEANChecksum(n.substring(0,s-1))===c},e.getStandardUPCEANChecksum=function(n){for(var s=n.length,c=0,l=s-1;l>=0;l-=2){if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Zt;c+=g}for(c*=3,l=s-2;l>=0;l-=2){var g;if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Zt;c+=g}return(1e3-c)%10},e.decodeEnd=function(n,s){return e.findGuardPattern(n,s,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,s,c,l){return this.findGuardPattern(n,s,c,l,new Int32Array(l.length))},e.findGuardPattern=function(n,s,c,l,g){for(var m=n.getSize(),y=0,b=s=c?n.getNextUnset(s):n.getNextSet(s),P=l.length,B=c,z=s;z<m;z++)if(n.get(z)!==B)g[y]++;else{if(y===P-1){if(sr.patternMatchVariance(g,l,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([b,z]);b+=g[0]+g[1];for(var K=g.slice(2,g.length),ae=0;ae<y-1;ae++)g[ae]=K[ae];g[y-1]=0,g[y]=0,y--}else y++;g[y]=1,B=!B}throw new We},e.decodeDigit=function(n,s,c,l){this.recordPattern(n,c,s);for(var g=this.MAX_AVG_VARIANCE,m=-1,y=l.length,b=0;b<y;b++){var B=sr.patternMatchVariance(s,l[b],e.MAX_INDIVIDUAL_VARIANCE);B<g&&(g=B,m=b)}if(m>=0)return m;throw new We},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(sr);var Wl=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const _l=function(){function i(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return i.prototype.decodeRow=function(e,n,s){var c=this.decodeRowStringBuffer,l=this.decodeMiddle(n,s,c),g=c.toString(),m=i.parseExtensionString(g),y=[new gn((s[0]+s[1])/2,e),new gn(l,e)],b=new ao(g,null,0,y,cn.UPC_EAN_EXTENSION,(new Date).getTime());return null!=m&&b.putAllMetadata(m),b},i.prototype.decodeMiddle=function(e,n,s){var c,l,g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var m=e.getSize(),y=n[1],b=0,P=0;P<5&&y<m;P++){var B=Wc.decodeDigit(e,g,y,Wc.L_AND_G_PATTERNS);s+=String.fromCharCode(48+B%10);try{for(var z=(c=void 0,Wl(g)),K=z.next();!K.done;K=z.next())y+=K.value}catch(Me){c={error:Me}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}B>=10&&(b|=1<<4-P),4!==P&&(y=e.getNextSet(y),y=e.getNextUnset(y))}if(5!==s.length)throw new We;var Ee=this.determineCheckDigit(b);if(i.extensionChecksum(s.toString())!==Ee)throw new We;return y},i.extensionChecksum=function(e){for(var n=e.length,s=0,c=n-2;c>=0;c-=2)s+=e.charAt(c).charCodeAt(0)-48;for(s*=3,c=n-1;c>=0;c-=2)s+=e.charAt(c).charCodeAt(0)-48;return(s*=3)%10},i.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new We},i.parseExtensionString=function(e){if(5!==e.length)return null;var n=i.parseExtension5String(e);return null==n?null:new Map([[Yi.SUGGESTED_PRICE,n]])},i.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="\xa3";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n=""}var s=parseInt(e.substring(1)),l=s%100;return n+(s/100).toString()+"."+(l<10?"0"+l:l.toString())},i}();var bh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const qo=function(){function i(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return i.prototype.decodeRow=function(e,n,s){var c=this.decodeRowStringBuffer,l=this.decodeMiddle(n,s,c),g=c.toString(),m=i.parseExtensionString(g),y=[new gn((s[0]+s[1])/2,e),new gn(l,e)],b=new ao(g,null,0,y,cn.UPC_EAN_EXTENSION,(new Date).getTime());return null!=m&&b.putAllMetadata(m),b},i.prototype.decodeMiddle=function(e,n,s){var c,l,g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var m=e.getSize(),y=n[1],b=0,P=0;P<2&&y<m;P++){var B=Wc.decodeDigit(e,g,y,Wc.L_AND_G_PATTERNS);s+=String.fromCharCode(48+B%10);try{for(var z=(c=void 0,bh(g)),K=z.next();!K.done;K=z.next())y+=K.value}catch(Ee){c={error:Ee}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}B>=10&&(b|=1<<1-P),1!==P&&(y=e.getNextSet(y),y=e.getNextUnset(y))}if(2!==s.length)throw new We;if(parseInt(s.toString())%4!==b)throw new We;return y},i.parseExtensionString=function(e){return 2!==e.length?null:new Map([[Yi.ISSUE_NUMBER,parseInt(e)]])},i}(),ja=function(){function i(){}return i.decodeRow=function(e,n,s){var c=Wc.findGuardPattern(n,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new _l).decodeRow(e,n,c)}catch{return(new qo).decodeRow(e,n,c)}},i.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),i}();var Th=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Lr=function(i){function e(){var n=i.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(m){return Int32Array.from(m)});for(var s=10;s<20;s++){for(var c=e.L_PATTERNS[s-10],l=new Int32Array(c.length),g=0;g<c.length;g++)l[g]=c[c.length-g-1];e.L_AND_G_PATTERNS[s]=l}return n}return Th(e,i),e.prototype.decodeRow=function(n,s,c){var l=e.findStartGuardPattern(s),g=null==c?null:c.get(Gn.NEED_RESULT_POINT_CALLBACK);if(null!=g){var m=new gn((l[0]+l[1])/2,n);g.foundPossibleResultPoint(m)}var y=this.decodeMiddle(s,l,this.decodeRowStringBuffer),b=y.rowOffset,P=y.resultString;if(null!=g){var B=new gn(b,n);g.foundPossibleResultPoint(B)}var z=e.decodeEnd(s,b);if(null!=g){var K=new gn((z[0]+z[1])/2,n);g.foundPossibleResultPoint(K)}var ae=z[1],Ee=ae+(ae-z[0]);if(Ee>=s.getSize()||!s.isRange(ae,Ee,!1))throw new We;var Me=P.toString();if(Me.length<8)throw new Zt;if(!e.checkChecksum(Me))throw new li;var Le=(l[1]+l[0])/2,ke=(z[1]+z[0])/2,Ye=this.getBarcodeFormat(),at=[new gn(Le,n),new gn(ke,n)],Lt=new ao(Me,null,0,at,Ye,(new Date).getTime()),$t=0;try{var Jt=ja.decodeRow(n,s,z[1]);Lt.putMetadata(Yi.UPC_EAN_EXTENSION,Jt.getText()),Lt.putAllMetadata(Jt.getResultMetadata()),Lt.addResultPoints(Jt.getResultPoints()),$t=Jt.getText().length}catch{}var mn=null==c?null:c.get(Gn.ALLOWED_EAN_EXTENSIONS);if(null!=mn){var nr=!1;for(var ur in mn)if($t.toString()===ur){nr=!0;break}if(!nr)throw new We}return Lt},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var s=n.length;if(0===s)return!1;var c=parseInt(n.charAt(s-1),10);return e.getStandardUPCEANChecksum(n.substring(0,s-1))===c},e.getStandardUPCEANChecksum=function(n){for(var s=n.length,c=0,l=s-1;l>=0;l-=2){if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Zt;c+=g}for(c*=3,l=s-2;l>=0;l-=2){var g;if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Zt;c+=g}return(1e3-c)%10},e.decodeEnd=function(n,s){return e.findGuardPattern(n,s,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Wc);var qc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Xu=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Ld=function(i){function e(){var n=i.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return qc(e,i),e.prototype.decodeMiddle=function(n,s,c){var l,g,m,y,b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;for(var P=n.getSize(),B=s[1],z=0,K=0;K<6&&B<P;K++){var ae=Lr.decodeDigit(n,b,B,Lr.L_AND_G_PATTERNS);c+=String.fromCharCode(48+ae%10);try{for(var Ee=(l=void 0,Xu(b)),Me=Ee.next();!Me.done;Me=Ee.next())B+=Me.value}catch(Lt){l={error:Lt}}finally{try{Me&&!Me.done&&(g=Ee.return)&&g.call(Ee)}finally{if(l)throw l.error}}ae>=10&&(z|=1<<5-K)}for(c=e.determineFirstDigit(c,z),B=Lr.findGuardPattern(n,B,!0,Lr.MIDDLE_PATTERN,new Int32Array(Lr.MIDDLE_PATTERN.length).fill(0))[1],K=0;K<6&&B<P;K++){ae=Lr.decodeDigit(n,b,B,Lr.L_PATTERNS),c+=String.fromCharCode(48+ae);try{for(var Ye=(m=void 0,Xu(b)),at=Ye.next();!at.done;at=Ye.next())B+=at.value}catch(Jt){m={error:Jt}}finally{try{at&&!at.done&&(y=Ye.return)&&y.call(Ye)}finally{if(m)throw m.error}}}return{rowOffset:B,resultString:c}},e.prototype.getBarcodeFormat=function(){return cn.EAN_13},e.determineFirstDigit=function(n,s){for(var c=0;c<10;c++)if(s===this.FIRST_DIGIT_ENCODINGS[c])return String.fromCharCode(48+c)+n;throw new We},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Lr);var ec=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),bc=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const tc=function(i){function e(){var n=i.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return ec(e,i),e.prototype.decodeMiddle=function(n,s,c){var l,g,m,y,b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;for(var P=n.getSize(),B=s[1],z=0;z<4&&B<P;z++){var K=Lr.decodeDigit(n,b,B,Lr.L_PATTERNS);c+=String.fromCharCode(48+K);try{for(var ae=(l=void 0,bc(b)),Ee=ae.next();!Ee.done;Ee=ae.next())B+=Ee.value}catch(at){l={error:at}}finally{try{Ee&&!Ee.done&&(g=ae.return)&&g.call(ae)}finally{if(l)throw l.error}}}for(B=Lr.findGuardPattern(n,B,!0,Lr.MIDDLE_PATTERN,new Int32Array(Lr.MIDDLE_PATTERN.length).fill(0))[1],z=0;z<4&&B<P;z++){K=Lr.decodeDigit(n,b,B,Lr.L_PATTERNS),c+=String.fromCharCode(48+K);try{for(var ke=(m=void 0,bc(b)),Ye=ke.next();!Ye.done;Ye=ke.next())B+=Ye.value}catch($t){m={error:$t}}finally{try{Ye&&!Ye.done&&(y=ke.return)&&y.call(ke)}finally{if(m)throw m.error}}}return{rowOffset:B,resultString:c}},e.prototype.getBarcodeFormat=function(){return cn.EAN_8},e}(Lr);var Iu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Df=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.ean13Reader=new Ld,n}return Iu(e,i),e.prototype.getBarcodeFormat=function(){return cn.UPC_A},e.prototype.decode=function(n,s){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,s,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,s,c))},e.prototype.decodeMiddle=function(n,s,c){return this.ean13Reader.decodeMiddle(n,s,c)},e.prototype.maybeReturnResult=function(n){var s=n.getText();if("0"===s.charAt(0)){var c=new ao(s.substring(1),null,null,n.getResultPoints(),cn.UPC_A);return null!=n.getResultMetadata()&&c.putAllMetadata(n.getResultMetadata()),c}throw new We},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Lr);var wi=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Dh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Kc=function(i){function e(){var n=i.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return wi(e,i),e.prototype.decodeMiddle=function(n,s,c){var l,g,m=this.decodeMiddleCounters.map(function(Me){return Me});m[0]=0,m[1]=0,m[2]=0,m[3]=0;for(var y=n.getSize(),b=s[1],P=0,B=0;B<6&&b<y;B++){var z=e.decodeDigit(n,m,b,e.L_AND_G_PATTERNS);c+=String.fromCharCode(48+z%10);try{for(var K=(l=void 0,Dh(m)),ae=K.next();!ae.done;ae=K.next())b+=ae.value}catch(Me){l={error:Me}}finally{try{ae&&!ae.done&&(g=K.return)&&g.call(K)}finally{if(l)throw l.error}}z>=10&&(P|=1<<5-B)}return e.determineNumSysAndCheckDigit(new hn(c),P),b},e.prototype.decodeEnd=function(n,s){return e.findGuardPatternWithoutCounters(n,s,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return Lr.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,s){for(var c=0;c<=1;c++)for(var l=0;l<10;l++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][l])return n.insert(0,"0"+c),void n.append("0"+l);throw We.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return cn.UPC_E},e.convertUPCEtoUPCA=function(n){var s=n.slice(1,7).split("").map(function(g){return g.charCodeAt(0)}),c=new hn;c.append(n.charAt(0));var l=s[5];switch(l){case 0:case 1:case 2:c.appendChars(s,0,2),c.append(l),c.append("0000"),c.appendChars(s,2,3);break;case 3:c.appendChars(s,0,3),c.append("00000"),c.appendChars(s,3,2);break;case 4:c.appendChars(s,0,4),c.append("00000"),c.append(s[4]);break;default:c.appendChars(s,0,5),c.append("0000"),c.append(l)}return n.length>=8&&c.append(n.charAt(7)),c.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Lr);var xm=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Xl=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Au=function(i){function e(n){var s=i.call(this)||this,c=null==n?null:n.get(Gn.POSSIBLE_FORMATS),l=[];return null!=c&&(c.indexOf(cn.EAN_13)>-1&&l.push(new Ld),c.indexOf(cn.UPC_A)>-1&&l.push(new Df),c.indexOf(cn.EAN_8)>-1&&l.push(new tc),c.indexOf(cn.UPC_E)>-1&&l.push(new Kc)),0===l.length&&(l.push(new Ld),l.push(new Df),l.push(new tc),l.push(new Kc)),s.readers=l,s}return xm(e,i),e.prototype.decodeRow=function(n,s,c){var l,g;try{for(var m=Xl(this.readers),y=m.next();!y.done;y=m.next()){var b=y.value;try{var P=b.decodeRow(n,s,c),B=P.getBarcodeFormat()===cn.EAN_13&&"0"===P.getText().charAt(0),z=null==c?null:c.get(Gn.POSSIBLE_FORMATS),K=null==z||z.includes(cn.UPC_A);if(B&&K){var ae=P.getRawBytes(),Ee=new ao(P.getText().substring(1),ae,ae?ae.length:null,P.getResultPoints(),cn.UPC_A);return Ee.putAllMetadata(P.getResultMetadata()),Ee}return P}catch{}}}catch(Me){l={error:Me}}finally{try{y&&!y.done&&(g=m.return)&&g.call(m)}finally{if(l)throw l.error}}throw new We},e.prototype.reset=function(){var n,s;try{for(var c=Xl(this.readers),l=c.next();!l.done;l=c.next())l.value.reset()}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}},e}(sr);var Rf=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Vd=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return Rf(e,i),e.prototype.decodeRow=function(n,s,c){var l=this.getValidRowData(s);if(!l)throw new We;var g=this.codaBarDecodeRow(l.row);if(!g)throw new We;return new ao(g,null,0,[new gn(l.left,n),new gn(l.right,n)],cn.CODABAR,(new Date).getTime())},e.prototype.getValidRowData=function(n){var s=n.toArray(),c=s.indexOf(!0);if(-1===c)return null;var l=s.lastIndexOf(!0);if(l<=c)return null;for(var g=[],m=(s=s.slice(c,l+1))[0],y=1,b=1;b<s.length;b++)s[b]===m?y++:(m=s[b],g.push(y),y=1);return g.push(y),g.length<23&&(g.length+1)%8!=0?null:{row:g,left:c,right:l}},e.prototype.codaBarDecodeRow=function(n){for(var s=[],c=Math.ceil(n.reduce(function(y,b){return(y+b)/2},0));n.length>0;){var g=n.splice(0,8).splice(0,7).map(function(y){return y<c?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[g])return null;s.push(this.CODA_BAR_CHAR_SET[g])}var m=s.join("");return this.validCodaBarString(m)?m:null},e.prototype.validCodaBarString=function(n){return/^[A-D].{1,}[A-D]$/.test(n)},e}(sr);var Bd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Dn=function(i){function e(){var n=i.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return Bd(e,i),e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,s){for(var c=0;c<s.length;c++)if(sr.patternMatchVariance(n,s[c],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return c;throw new We},e.count=function(n){return Ir.sum(new Int32Array(n))},e.increment=function(n,s){for(var c=0,l=s[0],g=1;g<n.length;g++)s[g]>l&&(l=s[g],c=g);n[c]++},e.decrement=function(n,s){for(var c=0,l=s[0],g=1;g<n.length;g++)s[g]<l&&(l=s[g],c=g);n[c]--},e.isFinderPattern=function(n){var s,c,l=n[0]+n[1],m=l/(l+n[2]+n[3]);if(m>=e.MIN_FINDER_PATTERN_RATIO&&m<=e.MAX_FINDER_PATTERN_RATIO){var y=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER;try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),B=P.next();!B.done;B=P.next()){var z=B.value;z>b&&(b=z),z<y&&(y=z)}}catch(K){s={error:K}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}return b<10*y}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(sr),ms=function(){function i(e,n){this.value=e,this.checksumPortion=n}return i.prototype.getValue=function(){return this.value},i.prototype.getChecksumPortion=function(){return this.checksumPortion},i.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},i.prototype.equals=function(e){return e instanceof i&&(this.value===e.value&&this.checksumPortion===e.checksumPortion)},i.prototype.hashCode=function(){return this.value^this.checksumPortion},i}(),vs=function(){function i(e,n,s,c,l){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new gn(s,l)),this.resultPoints.push(new gn(c,l))}return i.prototype.getValue=function(){return this.value},i.prototype.getStartEnd=function(){return this.startEnd},i.prototype.getResultPoints=function(){return this.resultPoints},i.prototype.equals=function(e){return e instanceof i&&this.value===e.value},i.prototype.hashCode=function(){return this.value},i}(),Pi=function(){function i(){}return i.getRSSvalue=function(e,n,s){var c,l,g=0;try{for(var m=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),y=m.next();!y.done;y=m.next())g+=y.value}catch(ke){c={error:ke}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}for(var P=0,B=0,z=e.length,K=0;K<z-1;K++){var ae=void 0;for(ae=1,B|=1<<K;ae<e[K];ae++,B&=~(1<<K)){var Ee=i.combins(g-ae-1,z-K-2);if(s&&0===B&&g-ae-(z-K-1)>=z-K-1&&(Ee-=i.combins(g-ae-(z-K),z-K-2)),z-K-1>1){for(var Me=0,Le=g-ae-(z-K-2);Le>n;Le--)Me+=i.combins(g-ae-Le-1,z-K-3);Ee-=Me*(z-1-K)}else g-ae>n&&Ee--;P+=Ee}g-=ae}return P},i.combins=function(e,n){var s,c;e-n>n?(c=n,s=e-n):(c=e-n,s=n);for(var l=1,g=1,m=e;m>s;m--)l*=m,g<=c&&(l/=g,g++);for(;g<=c;)l/=g,g++;return l},i}(),ir=function(){function i(){}return i.buildBitArray=function(e){var n=2*e.length-1;null==e[e.length-1].getRightChar()&&(n-=1);for(var c=new Ci(12*n),l=0,m=e[0].getRightChar().getValue(),y=11;y>=0;--y)m&1<<y&&c.set(l),l++;for(y=1;y<e.length;++y){for(var b=e[y],P=b.getLeftChar().getValue(),B=11;B>=0;--B)P&1<<B&&c.set(l),l++;if(null!==b.getRightChar()){var z=b.getRightChar().getValue();for(B=11;B>=0;--B)z&1<<B&&c.set(l),l++}}return c},i}(),nc=function(){function i(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return i.prototype.getDecodedInformation=function(){return this.decodedInformation},i.prototype.isFinished=function(){return this.finished},i}(),Ai=function(){function i(e){this.newPosition=e}return i.prototype.getNewPosition=function(){return this.newPosition},i}();var Qu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const go=function(i){function e(n,s){var c=i.call(this,n)||this;return c.value=s,c}return Qu(e,i),e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Ai);var El=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ns=function(i){function e(n,s,c){var l=i.call(this,n)||this;return c?(l.remaining=!0,l.remainingValue=l.remainingValue):(l.remaining=!1,l.remainingValue=0),l.newString=s,l}return El(e,i),e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Ai);var bu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Nn=function(i){function e(n,s,c){var l=i.call(this,n)||this;if(s<0||s>10||c<0||c>10)throw new Zt;return l.firstDigit=s,l.secondDigit=c,l}return bu(e,i),e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Ai);var Tu=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Tc=function(){function i(){}return i.parseFieldsInGeneralPurpose=function(e){var n,s,c,l,g,m,y,b;if(!e)return null;if(e.length<2)throw new We;var P=e.substring(0,2);try{for(var B=Tu(i.TWO_DIGIT_DATA_LENGTH),z=B.next();!z.done;z=B.next())if((K=z.value)[0]===P)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(2,K[2],e):i.processFixedAI(2,K[1],e)}catch($t){n={error:$t}}finally{try{z&&!z.done&&(s=B.return)&&s.call(B)}finally{if(n)throw n.error}}if(e.length<3)throw new We;var ae=e.substring(0,3);try{for(var Ee=Tu(i.THREE_DIGIT_DATA_LENGTH),Me=Ee.next();!Me.done;Me=Ee.next())if((K=Me.value)[0]===ae)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(3,K[2],e):i.processFixedAI(3,K[1],e)}catch($t){c={error:$t}}finally{try{Me&&!Me.done&&(l=Ee.return)&&l.call(Ee)}finally{if(c)throw c.error}}try{for(var Le=Tu(i.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),ke=Le.next();!ke.done;ke=Le.next())if((K=ke.value)[0]===ae)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(4,K[2],e):i.processFixedAI(4,K[1],e)}catch($t){g={error:$t}}finally{try{ke&&!ke.done&&(m=Le.return)&&m.call(Le)}finally{if(g)throw g.error}}if(e.length<4)throw new We;var Ye=e.substring(0,4);try{for(var at=Tu(i.FOUR_DIGIT_DATA_LENGTH),Lt=at.next();!Lt.done;Lt=at.next()){var K;if((K=Lt.value)[0]===Ye)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(4,K[2],e):i.processFixedAI(4,K[1],e)}}catch($t){y={error:$t}}finally{try{Lt&&!Lt.done&&(b=at.return)&&b.call(at)}finally{if(y)throw y.error}}throw new We},i.processFixedAI=function(e,n,s){if(s.length<e)throw new We;var c=s.substring(0,e);if(s.length<e+n)throw new We;var l=s.substring(e,e+n),g=s.substring(e+n),m="("+c+")"+l,y=i.parseFieldsInGeneralPurpose(g);return null==y?m:m+y},i.processVariableAI=function(e,n,s){var l,c=s.substring(0,e),g=s.substring(e,l=s.length<e+n?s.length:e+n),m=s.substring(l),y="("+c+")"+g,b=i.parseFieldsInGeneralPurpose(m);return null==b?y:y+b},i.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",i.VARIABLE_LENGTH=[],20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",i.VARIABLE_LENGTH,20],["22",i.VARIABLE_LENGTH,29],["30",i.VARIABLE_LENGTH,8],["37",i.VARIABLE_LENGTH,8],["90",i.VARIABLE_LENGTH,30],["91",i.VARIABLE_LENGTH,30],["92",i.VARIABLE_LENGTH,30],["93",i.VARIABLE_LENGTH,30],["94",i.VARIABLE_LENGTH,30],["95",i.VARIABLE_LENGTH,30],["96",i.VARIABLE_LENGTH,30],["97",i.VARIABLE_LENGTH,3],["98",i.VARIABLE_LENGTH,30],["99",i.VARIABLE_LENGTH,30]],i.THREE_DIGIT_DATA_LENGTH=[["240",i.VARIABLE_LENGTH,30],["241",i.VARIABLE_LENGTH,30],["242",i.VARIABLE_LENGTH,6],["250",i.VARIABLE_LENGTH,30],["251",i.VARIABLE_LENGTH,30],["253",i.VARIABLE_LENGTH,17],["254",i.VARIABLE_LENGTH,20],["400",i.VARIABLE_LENGTH,30],["401",i.VARIABLE_LENGTH,30],["402",17],["403",i.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",i.VARIABLE_LENGTH,20],["421",i.VARIABLE_LENGTH,15],["422",3],["423",i.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],i.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",i.VARIABLE_LENGTH,15],["391",i.VARIABLE_LENGTH,18],["392",i.VARIABLE_LENGTH,15],["393",i.VARIABLE_LENGTH,18],["703",i.VARIABLE_LENGTH,30]],i.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",i.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",i.VARIABLE_LENGTH,20],["8003",i.VARIABLE_LENGTH,30],["8004",i.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",i.VARIABLE_LENGTH,30],["8008",i.VARIABLE_LENGTH,12],["8018",18],["8020",i.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",i.VARIABLE_LENGTH,70],["8200",i.VARIABLE_LENGTH,70]],i}(),Qc=function(){function i(e){this.buffer=new hn,this.information=e}return i.prototype.decodeAllCodes=function(e,n){for(var s=n,c=null;;){var l=this.decodeGeneralPurposeField(s,c),g=Tc.parseFieldsInGeneralPurpose(l.getNewString());if(null!=g&&e.append(g),c=l.isRemaining()?""+l.getRemainingValue():null,s===l.getNewPosition())break;s=l.getNewPosition()}return e.toString()},i.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},i.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return new Nn(this.information.getSize(),0===n?Nn.FNC1:n-1,Nn.FNC1)}var s=this.extractNumericValueFromBitArray(e,7);return new Nn(e+7,(s-8)/11,(s-8)%11)},i.prototype.extractNumericValueFromBitArray=function(e,n){return i.extractNumericValueFromBitArray(this.information,e,n)},i.extractNumericValueFromBitArray=function(e,n,s){for(var c=0,l=0;l<s;++l)e.get(n+l)&&(c|=1<<s-l-1);return c},i.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),null!=n&&this.buffer.append(n),this.current.setPosition(e);var s=this.parseBlocks();return null!=s&&s.isRemaining()?new Ns(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new Ns(this.current.getPosition(),this.buffer.toString())},i.prototype.parseBlocks=function(){var e,n;do{var s=this.current.getPosition();if(e=this.current.isAlpha()?(n=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(n=this.parseIsoIec646Block()).isFinished():(n=this.parseNumericBlock()).isFinished(),s===this.current.getPosition()&&!e)break}while(!e);return n.getDecodedInformation()},i.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return n=e.isSecondDigitFNC1()?new Ns(this.current.getPosition(),this.buffer.toString()):new Ns(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new nc(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return n=new Ns(this.current.getPosition(),this.buffer.toString()),new nc(!0,n);this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new nc(!1)},i.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Ns(this.current.getPosition(),this.buffer.toString());return new nc(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new nc(!1)},i.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Ns(this.current.getPosition(),this.buffer.toString());return new nc(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new nc(!1)},i.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<116)return!0;if(e+8>this.information.getSize())return!1;var c=this.extractNumericValueFromBitArray(e,8);return c>=232&&c<253},i.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(15===n)return new go(e+5,go.FNC1);if(n>=5&&n<15)return new go(e+5,"0"+(n-5));var l,s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<90)return new go(e+7,""+(s+1));if(s>=90&&s<116)return new go(e+7,""+(s+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new Zt}return new go(e+8,l)},i.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(e,6);return s>=16&&s<63},i.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(15===n)return new go(e+5,go.FNC1);if(n>=5&&n<15)return new go(e+5,"0"+(n-5));var c,s=this.extractNumericValueFromBitArray(e,6);if(s>=32&&s<58)return new go(e+6,""+(s+33));switch(s){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new gs("Decoding invalid alphanumeric value: "+s)}return new go(e+6,c)},i.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(2===n){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},i.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},i.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},i}(),wl=function(){function i(e){this.information=e,this.generalDecoder=new Qc(e)}return i.prototype.getInformation=function(){return this.information},i.prototype.getGeneralDecoder=function(){return this.generalDecoder},i}();var Oo=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ks=function(i){function e(n){return i.call(this,n)||this}return Oo(e,i),e.prototype.encodeCompressedGtin=function(n,s){n.append("(01)");var c=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,s,c)},e.prototype.encodeCompressedGtinWithoutAI=function(n,s,c){for(var l=0;l<4;++l){var g=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*l,10);g/100==0&&n.append("0"),g/10==0&&n.append("0"),n.append(g)}e.appendCheckDigit(n,c)},e.appendCheckDigit=function(n,s){for(var c=0,l=0;l<13;l++){var g=n.charAt(l+s).charCodeAt(0)-48;c+=1&l?g:3*g}10==(c=10-c%10)&&(c=0),n.append(c)},e.GTIN_SIZE=40,e}(wl);var Yc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ca=function(i){function e(n){return i.call(this,n)||this}return Yc(e,i),e.prototype.parseInformation=function(){var n=new hn;n.append("(01)");var s=n.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(c),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Ks);var xc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ud=function(i){function e(n){return i.call(this,n)||this}return xc(e,i),e.prototype.parseInformation=function(){var n=new hn;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(wl);var Zu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const jd=function(i){function e(n){return i.call(this,n)||this}return Zu(e,i),e.prototype.encodeCompressedWeight=function(n,s,c){var l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,c);this.addWeightCode(n,l);for(var g=this.checkWeight(l),m=1e5,y=0;y<5;++y)g/m==0&&n.append("0"),m/=10;n.append(g)},e}(Ks);var Al=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const bl=function(i){function e(n){return i.call(this,n)||this}return Al(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+jd.GTIN_SIZE+e.WEIGHT_SIZE)throw new We;var n=new hn;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+jd.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(jd);var $p=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const zp=function(i){function e(n){return i.call(this,n)||this}return $p(e,i),e.prototype.addWeightCode=function(n,s){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(bl);var Wp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Nf=function(i){function e(n){return i.call(this,n)||this}return Wp(e,i),e.prototype.addWeightCode=function(n,s){n.append(s<1e4?"(3202)":"(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(bl);var Hd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ph=function(i){function e(n){return i.call(this,n)||this}return Hd(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ks.GTIN_SIZE)throw new We;var n=new hn;this.encodeCompressedGtin(n,e.HEADER_SIZE);var s=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ks.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(s),n.append(")");var c=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ks.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(c.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Ks);var Nh=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const O=function(i){function e(n){return i.call(this,n)||this}return Nh(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ks.GTIN_SIZE)throw new We;var n=new hn;this.encodeCompressedGtin(n,e.HEADER_SIZE);var s=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ks.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(s),n.append(")");var c=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ks.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);c/100==0&&n.append("0"),c/10==0&&n.append("0"),n.append(c);var l=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ks.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(l.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Ks);var E=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const k=function(i){function e(n,s,c){var l=i.call(this,n)||this;return l.dateCode=c,l.firstAIdigits=s,l}return E(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new We;var n=new hn;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,s){var c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,e.DATE_SIZE);if(38400!==c){n.append("("),n.append(this.dateCode),n.append(")");var l=c%32,g=(c/=32)%12+1,m=c/=12;m/10==0&&n.append("0"),n.append(m),g/10==0&&n.append("0"),n.append(g),l/10==0&&n.append("0"),n.append(l)}},e.prototype.addWeightCode=function(n,s){n.append("("),n.append(this.firstAIdigits),n.append(s/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(jd),Ge=function(){function i(e,n,s,c){this.leftchar=e,this.rightchar=n,this.finderpattern=s,this.maybeLast=c}return i.prototype.mayBeLast=function(){return this.maybeLast},i.prototype.getLeftChar=function(){return this.leftchar},i.prototype.getRightChar=function(){return this.rightchar},i.prototype.getFinderPattern=function(){return this.finderpattern},i.prototype.mustBeLast=function(){return null==this.rightchar},i.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},i.equals=function(e,n){return e instanceof i&&i.equalsOrNull(e.leftchar,n.leftchar)&&i.equalsOrNull(e.rightchar,n.rightchar)&&i.equalsOrNull(e.finderpattern,n.finderpattern)},i.equalsOrNull=function(e,n){return null===e?null===n:i.equals(e,n)},i.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},i}(),jt=function(){function i(e,n,s){this.pairs=e,this.rowNumber=n,this.wasReversed=s}return i.prototype.getPairs=function(){return this.pairs},i.prototype.getRowNumber=function(){return this.rowNumber},i.prototype.isReversed=function(){return this.wasReversed},i.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},i.prototype.toString=function(){return"{ "+this.pairs+" }"},i.prototype.equals=function(e,n){return e instanceof i&&this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed},i.prototype.checkEqualitity=function(e,n){var s;if(e&&n)return e.forEach(function(c,l){n.forEach(function(g){c.getLeftChar().getValue()===g.getLeftChar().getValue()&&c.getRightChar().getValue()===g.getRightChar().getValue()&&c.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(s=!0)})}),s},i}();var Cn=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),In=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const ys=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return Cn(e,i),e.prototype.decodeRow=function(n,s,c){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,s))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,s))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,s){for(var c=!1;!c;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,n))}catch(m){if(m instanceof We){if(!this.pairs.length)throw new We;c=!0}}if(this.checkChecksum())return this.pairs;var l;if(l=!!this.rows.length,this.storeRow(n,!1),l){var g=this.checkRowsBoolean(!1);if(null!=g||null!=(g=this.checkRowsBoolean(!0)))return g}throw new We},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var s=null;try{s=this.checkRows(new Array,0)}catch(c){console.log(c)}return n&&(this.rows=this.rows.reverse()),s},e.prototype.checkRows=function(n,s){for(var c,l,g=s;g<this.rows.length;g++){var m=this.rows[g];this.pairs.length=0;try{for(var y=(c=void 0,In(n)),b=y.next();!b.done;b=y.next())this.pairs.push(b.value.getPairs())}catch(z){c={error:z}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(c)throw c.error}}if(this.pairs.push(m.getPairs()),e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var B=new Array(n);B.push(m);try{return this.checkRows(B,g+1)}catch(z){console.log(z)}}}throw new We},e.isValidSequence=function(n){var s,c;try{for(var l=In(e.FINDER_PATTERN_SEQUENCES),g=l.next();!g.done;g=l.next()){var m=g.value;if(!(n.length>m.length)){for(var y=!0,b=0;b<n.length;b++)if(n[b].getFinderPattern().getValue()!==m[b]){y=!1;break}if(y)return!0}}}catch(P){s={error:P}}finally{try{g&&!g.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}return!1},e.prototype.storeRow=function(n,s){for(var c=0,l=!1,g=!1;c<this.rows.length;){var m=this.rows[c];if(m.getRowNumber()>n){g=m.isEquivalent(this.pairs);break}l=m.isEquivalent(this.pairs),c++}g||l||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new jt(this.pairs,n,s)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,s){var c,l,g,m,y,b;try{for(var P=In(s),B=P.next();!B.done;B=P.next()){var z=B.value;if(z.getPairs().length!==n.length)try{for(var ae=(g=void 0,In(z.getPairs())),Ee=ae.next();!Ee.done;Ee=ae.next()){var Me=Ee.value;try{for(var ke=(y=void 0,In(n)),Ye=ke.next();!Ye.done;Ye=ke.next())if(Ge.equals(Me,Ye.value)){!0;break}}catch(Lt){y={error:Lt}}finally{try{Ye&&!Ye.done&&(b=ke.return)&&b.call(ke)}finally{if(y)throw y.error}}}}catch(Lt){g={error:Lt}}finally{try{Ee&&!Ee.done&&(m=ae.return)&&m.call(ae)}finally{if(g)throw g.error}}}}catch(Lt){c={error:Lt}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}},e.isPartialRow=function(n,s){var c,l,g,m,y,b;try{for(var P=In(s),B=P.next();!B.done;B=P.next()){var z=B.value,K=!0;try{for(var ae=(g=void 0,In(n)),Ee=ae.next();!Ee.done;Ee=ae.next()){var Me=Ee.value,Le=!1;try{for(var ke=(y=void 0,In(z.getPairs())),Ye=ke.next();!Ye.done;Ye=ke.next())if(Me.equals(Ye.value)){Le=!0;break}}catch(Lt){y={error:Lt}}finally{try{Ye&&!Ye.done&&(b=ke.return)&&b.call(ke)}finally{if(y)throw y.error}}if(!Le){K=!1;break}}}catch(Lt){g={error:Lt}}finally{try{Ee&&!Ee.done&&(m=ae.return)&&m.call(ae)}finally{if(g)throw g.error}}if(K)return!0}}catch(Lt){c={error:Lt}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var c=function te(i){try{if(i.get(1))return new Ca(i);if(!i.get(2))return new Ud(i);switch(Qc.extractNumericValueFromBitArray(i,1,4)){case 4:return new zp(i);case 5:return new Nf(i)}switch(Qc.extractNumericValueFromBitArray(i,1,5)){case 12:return new Ph(i);case 13:return new O(i)}switch(Qc.extractNumericValueFromBitArray(i,1,7)){case 56:return new k(i,"310","11");case 57:return new k(i,"320","11");case 58:return new k(i,"310","13");case 59:return new k(i,"320","13");case 60:return new k(i,"310","15");case 61:return new k(i,"320","15");case 62:return new k(i,"310","17");case 63:return new k(i,"320","17")}}catch(c){throw console.log(c),new gs("unknown decoder: "+i)}}(ir.buildBitArray(n)),l=c.parseInformation(),g=n[0].getFinderPattern().getResultPoints(),m=n[n.length-1].getFinderPattern().getResultPoints();return new ao(l,null,null,[g[0],g[1],m[0],m[1]],cn.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),s=n.getLeftChar(),c=n.getRightChar();if(null===c)return!1;for(var l=c.getChecksumPortion(),g=2,m=1;m<this.pairs.size();++m){var y=this.pairs.get(m);l+=y.getLeftChar().getChecksumPortion(),g++;var b=y.getRightChar();null!=b&&(l+=b.getChecksumPortion(),g++)}return 211*(g-4)+(l%=211)===s.getValue()},e.getNextSecondBar=function(n,s){var c;return n.get(s)?(c=n.getNextUnset(s),c=n.getNextSet(c)):(c=n.getNextSet(s),c=n.getNextUnset(c)),c},e.prototype.retrieveNextPair=function(n,s,c){var l=s.length%2==0;this.startFromEven&&(l=!l);var g,m=!0,y=-1;do{this.findNextPair(n,s,y),null===(g=this.parseFoundFinderPattern(n,c,l))?y=e.getNextSecondBar(n,this.startEnd[0]):m=!1}while(m);var P,b=this.decodeDataCharacter(n,g,l,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new We;try{P=this.decodeDataCharacter(n,g,l,!1)}catch(B){P=null,console.log(B)}return new Ge(b,P,g,!0)},e.prototype.isEmptyPair=function(n){return 0===n.length},e.prototype.findNextPair=function(n,s,c){var l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;var m,g=n.getSize();m=c>=0?c:this.isEmptyPair(s)?0:s[s.length-1].getFinderPattern().getStartEnd()[1];var b=s.length%2!=0;this.startFromEven&&(b=!b);for(var P=!1;m<g&&(P=!n.get(m));)m++;for(var B=0,z=m,K=m;K<g;K++)if(n.get(K)!==P)l[B]++;else{if(3===B){if(b&&e.reverseCounters(l),e.isFinderPattern(l))return this.startEnd[0]=z,void(this.startEnd[1]=K);b&&e.reverseCounters(l),z+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,B--}else B++;l[B]=1,P=!P}throw new We},e.reverseCounters=function(n){for(var s=n.length,c=0;c<s/2;++c){var l=n[c];n[c]=n[s-c-1],n[s-c-1]=l}},e.prototype.parseFoundFinderPattern=function(n,s,c){var l,g,m;if(c){for(var y=this.startEnd[0]-1;y>=0&&!n.get(y);)y--;y++,l=this.startEnd[0]-y,g=y,m=this.startEnd[1]}else g=this.startEnd[0],l=(m=n.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var P,b=this.getDecodeFinderCounters();Ur.arraycopy(b,0,b,1,b.length-1),b[0]=l;try{P=this.parseFinderValue(b,e.FINDER_PATTERNS)}catch{return null}return new vs(P,[g,m],g,m,s)},e.prototype.decodeDataCharacter=function(n,s,c,l){for(var g=this.getDataCharacterCounters(),m=0;m<g.length;m++)g[m]=0;if(l)e.recordPatternInReverse(n,s.getStartEnd()[0],g);else{e.recordPattern(n,s.getStartEnd()[1],g);for(var y=0,b=g.length-1;y<b;y++,b--){var P=g[y];g[y]=g[b],g[b]=P}}var z=Ir.sum(new Int32Array(g))/17,K=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(z-K)/K>.3)throw new We;var ae=this.getOddCounts(),Ee=this.getEvenCounts(),Me=this.getOddRoundingErrors(),Le=this.getEvenRoundingErrors();for(y=0;y<g.length;y++){var ke=1*g[y]/z,Ye=ke+.5;if(Ye<1){if(ke<.3)throw new We;Ye=1}else if(Ye>8){if(ke>8.7)throw new We;Ye=8}var at=y/2;1&y?(Ee[at]=Ye,Le[at]=ke-Ye):(ae[at]=Ye,Me[at]=ke-Ye)}this.adjustOddEvenCounts(17);var Lt=4*s.getValue()+(c?0:2)+(l?0:1)-1,$t=0,Jt=0;for(y=ae.length-1;y>=0;y--)e.isNotA1left(s,c,l)&&(Jt+=ae[y]*e.WEIGHTS[Lt][2*y]),$t+=ae[y];var nr=0;for(y=Ee.length-1;y>=0;y--)e.isNotA1left(s,c,l)&&(nr+=Ee[y]*e.WEIGHTS[Lt][2*y+1]);var ur=Jt+nr;if(1&$t||$t>13||$t<4)throw new We;var ss=(13-$t)/2,oi=e.SYMBOL_WIDEST[ss],Fo=9-oi,uu=Pi.getRSSvalue(ae,oi,!0),Nl=Pi.getRSSvalue(Ee,Fo,!1);return new ms(uu*e.EVEN_TOTAL_SUBSET[ss]+Nl+e.GSUM[ss],ur)},e.isNotA1left=function(n,s,c){return!(0===n.getValue()&&s&&c)},e.prototype.adjustOddEvenCounts=function(n){var s=Ir.sum(new Int32Array(this.getOddCounts())),c=Ir.sum(new Int32Array(this.getEvenCounts())),l=!1,g=!1;s>13?g=!0:s<4&&(l=!0);var m=!1,y=!1;c>13?y=!0:c<4&&(m=!0);var b=s+c-n,P=!(1&~s),B=!(1&c);if(1===b)if(P){if(B)throw new We;g=!0}else{if(!B)throw new We;y=!0}else if(-1===b)if(P){if(B)throw new We;l=!0}else{if(!B)throw new We;m=!0}else{if(0!==b)throw new We;if(P){if(!B)throw new We;s<c?(l=!0,y=!0):(g=!0,m=!0)}else if(B)throw new We}if(l){if(g)throw new We;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new We;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A=0,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B=1,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C=2,e.FINDER_PAT_B,e.FINDER_PAT_D=3],[e.FINDER_PAT_A,e.FINDER_PAT_E=4,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F=5],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Dn);var Zc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const kh=function(i){function e(n,s,c){var l=i.call(this,n,s)||this;return l.count=0,l.finderPattern=c,l}return Zc(e,i),e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(ms);var Ha=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Zl=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Nr=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return Ha(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m,y,b=this.decodePair(s,!1,n,c);e.addOrTally(this.possibleLeftPairs,b),s.reverse();var P=this.decodePair(s,!0,n,c);e.addOrTally(this.possibleRightPairs,P),s.reverse();try{for(var B=Zl(this.possibleLeftPairs),z=B.next();!z.done;z=B.next()){var K=z.value;if(K.getCount()>1)try{for(var ae=(m=void 0,Zl(this.possibleRightPairs)),Ee=ae.next();!Ee.done;Ee=ae.next()){var Me=Ee.value;if(Me.getCount()>1&&e.checkChecksum(K,Me))return e.constructResult(K,Me)}}catch(Le){m={error:Le}}finally{try{Ee&&!Ee.done&&(y=ae.return)&&y.call(ae)}finally{if(m)throw m.error}}}}catch(Le){l={error:Le}}finally{try{z&&!z.done&&(g=B.return)&&g.call(B)}finally{if(l)throw l.error}}throw new We},e.addOrTally=function(n,s){var c,l;if(null!=s){var g=!1;try{for(var m=Zl(n),y=m.next();!y.done;y=m.next()){var b=y.value;if(b.getValue()===s.getValue()){b.incrementCount(),g=!0;break}}}catch(P){c={error:P}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}g||n.push(s)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,s){for(var c=4537077*n.getValue()+s.getValue(),l=new String(c).toString(),g=new hn,m=13-l.length;m>0;m--)g.append("0");g.append(l);var y=0;for(m=0;m<13;m++){var b=g.charAt(m).charCodeAt(0)-48;y+=1&m?b:3*b}10==(y=10-y%10)&&(y=0),g.append(y.toString());var P=n.getFinderPattern().getResultPoints(),B=s.getFinderPattern().getResultPoints();return new ao(g.toString(),null,0,[P[0],P[1],B[0],B[1]],cn.RSS_14,(new Date).getTime())},e.checkChecksum=function(n,s){var c=(n.getChecksumPortion()+16*s.getChecksumPortion())%79,l=9*n.getFinderPattern().getValue()+s.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,c===l},e.prototype.decodePair=function(n,s,c,l){try{var g=this.findFinderPattern(n,s),m=this.parseFoundFinderPattern(n,c,s,g),y=null==l?null:l.get(Gn.NEED_RESULT_POINT_CALLBACK);if(null!=y){var b=(g[0]+g[1])/2;s&&(b=n.getSize()-1-b),y.foundPossibleResultPoint(new gn(b,c))}var P=this.decodeDataCharacter(n,m,!0),B=this.decodeDataCharacter(n,m,!1);return new kh(1597*P.getValue()+B.getValue(),P.getChecksumPortion()+4*B.getChecksumPortion(),m)}catch{return null}},e.prototype.decodeDataCharacter=function(n,s,c){for(var l=this.getDataCharacterCounters(),g=0;g<l.length;g++)l[g]=0;if(c)sr.recordPatternInReverse(n,s.getStartEnd()[0],l);else{sr.recordPattern(n,s.getStartEnd()[1]+1,l);for(var m=0,y=l.length-1;m<y;m++,y--){var b=l[m];l[m]=l[y],l[y]=b}}var P=c?16:15,B=Ir.sum(new Int32Array(l))/P,z=this.getOddCounts(),K=this.getEvenCounts(),ae=this.getOddRoundingErrors(),Ee=this.getEvenRoundingErrors();for(m=0;m<l.length;m++){var Me=l[m]/B,Le=Math.floor(Me+.5);Le<1?Le=1:Le>8&&(Le=8);var ke=Math.floor(m/2);1&m?(K[ke]=Le,Ee[ke]=Me-Le):(z[ke]=Le,ae[ke]=Me-Le)}this.adjustOddEvenCounts(c,P);var Ye=0,at=0;for(m=z.length-1;m>=0;m--)at*=9,at+=z[m],Ye+=z[m];var Lt=0,$t=0;for(m=K.length-1;m>=0;m--)Lt*=9,Lt+=K[m],$t+=K[m];var mn,nr,Jt=at+3*Lt;if(c){if(1&Ye||Ye>12||Ye<4)throw new We;var ur=9-(nr=e.OUTSIDE_ODD_WIDEST[mn=(12-Ye)/2]),ss=Pi.getRSSvalue(z,nr,!1),oi=Pi.getRSSvalue(K,ur,!0);return new ms(ss*e.OUTSIDE_EVEN_TOTAL_SUBSET[mn]+oi+e.OUTSIDE_GSUM[mn],Jt)}if(1&$t||$t>10||$t<4)throw new We;return ur=9-(nr=e.INSIDE_ODD_WIDEST[mn=(10-$t)/2]),ss=Pi.getRSSvalue(z,nr,!0),oi=Pi.getRSSvalue(K,ur,!1),new ms(oi*e.INSIDE_ODD_TOTAL_SUBSET[mn]+ss+e.INSIDE_GSUM[mn],Jt)},e.prototype.findFinderPattern=function(n,s){var c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var l=n.getSize(),g=!1,m=0;m<l&&s!==(g=!n.get(m));)m++;for(var y=0,b=m,P=m;P<l;P++)if(n.get(P)!==g)c[y]++;else{if(3===y){if(Dn.isFinderPattern(c))return[b,P];b+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,g=!g}throw new We},e.prototype.parseFoundFinderPattern=function(n,s,c,l){for(var g=n.get(l[0]),m=l[0]-1;m>=0&&g!==n.get(m);)m--;m++;var y=l[0]-m,b=this.getDecodeFinderCounters(),P=new Int32Array(b.length);Ur.arraycopy(b,0,P,1,b.length-1),P[0]=y;var B=this.parseFinderValue(P,e.FINDER_PATTERNS),z=m,K=l[1];return c&&(z=n.getSize()-1-z,K=n.getSize()-1-K),new vs(B,[m,l[1]],z,K,s)},e.prototype.adjustOddEvenCounts=function(n,s){var c=Ir.sum(new Int32Array(this.getOddCounts())),l=Ir.sum(new Int32Array(this.getEvenCounts())),g=!1,m=!1,y=!1,b=!1;n?(c>12?m=!0:c<4&&(g=!0),l>12?b=!0:l<4&&(y=!0)):(c>11?m=!0:c<5&&(g=!0),l>10?b=!0:l<4&&(y=!0));var P=c+l-s,B=(1&c)==(n?1:0),z=!(1&~l);if(1===P)if(B){if(z)throw new We;m=!0}else{if(!z)throw new We;b=!0}else if(-1===P)if(B){if(z)throw new We;g=!0}else{if(!z)throw new We;y=!0}else{if(0!==P)throw new We;if(B){if(!z)throw new We;c<l?(g=!0,b=!0):(m=!0,y=!0)}else if(z)throw new We}if(g){if(m)throw new We;Dn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Dn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(b)throw new We;Dn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&Dn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Dn);var xl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ji=function(i){function e(n){var s=i.call(this)||this;s.readers=[];var c=n?n.get(Gn.POSSIBLE_FORMATS):null,l=n&&void 0!==n.get(Gn.ASSUME_CODE_39_CHECK_DIGIT),g=n&&void 0!==n.get(Gn.ENABLE_CODE_39_EXTENDED_MODE);return c&&((c.includes(cn.EAN_13)||c.includes(cn.UPC_A)||c.includes(cn.EAN_8)||c.includes(cn.UPC_E))&&s.readers.push(new Au(n)),c.includes(cn.CODE_39)&&s.readers.push(new Cu(l,g)),c.includes(cn.CODE_93)&&s.readers.push(new Tf),c.includes(cn.CODE_128)&&s.readers.push(new Ps),c.includes(cn.ITF)&&s.readers.push(new qu),c.includes(cn.CODABAR)&&s.readers.push(new Vd),c.includes(cn.RSS_14)&&s.readers.push(new Nr),c.includes(cn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),s.readers.push(new ys))),0===s.readers.length&&(s.readers.push(new Au(n)),s.readers.push(new Cu),s.readers.push(new Tf),s.readers.push(new Au(n)),s.readers.push(new Ps),s.readers.push(new qu),s.readers.push(new Nr)),s}return xl(e,i),e.prototype.decodeRow=function(n,s,c){for(var l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(n,s,c)}catch{}throw new We},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(sr);var Jl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),oc=(function(i){Jl(function e(n,s){return void 0===n&&(n=500),i.call(this,new Ji(s),n,s)||this},i)}(oa),function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}),gr=function(){function i(e,n,s){this.ecCodewords=e,this.ecBlocks=[n],s&&this.ecBlocks.push(s)}return i.prototype.getECCodewords=function(){return this.ecCodewords},i.prototype.getECBlocks=function(){return this.ecBlocks},i}(),ii=function(){function i(e,n){this.count=e,this.dataCodewords=n}return i.prototype.getCount=function(){return this.count},i.prototype.getDataCodewords=function(){return this.dataCodewords},i}();const Sl=function(){function i(e,n,s,c,l,g){var m,y;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=s,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=l,this.ecBlocks=g;var b=0,P=g.getECCodewords(),B=g.getECBlocks();try{for(var z=oc(B),K=z.next();!K.done;K=z.next()){var ae=K.value;b+=ae.getCount()*(ae.getDataCodewords()+P)}}catch(Ee){m={error:Ee}}finally{try{K&&!K.done&&(y=z.return)&&y.call(z)}finally{if(m)throw m.error}}this.totalCodewords=b}return i.prototype.getVersionNumber=function(){return this.versionNumber},i.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},i.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},i.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},i.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},i.prototype.getTotalCodewords=function(){return this.totalCodewords},i.prototype.getECBlocks=function(){return this.ecBlocks},i.getVersionForDimensions=function(e,n){var s,c;if(1&e||1&n)throw new Zt;try{for(var l=oc(i.VERSIONS),g=l.next();!g.done;g=l.next()){var m=g.value;if(m.symbolSizeRows===e&&m.symbolSizeColumns===n)return m}}catch(y){s={error:y}}finally{try{g&&!g.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}throw new Zt},i.prototype.toString=function(){return""+this.versionNumber},i.buildVersions=function(){return[new i(1,10,10,8,8,new gr(5,new ii(1,3))),new i(2,12,12,10,10,new gr(7,new ii(1,5))),new i(3,14,14,12,12,new gr(10,new ii(1,8))),new i(4,16,16,14,14,new gr(12,new ii(1,12))),new i(5,18,18,16,16,new gr(14,new ii(1,18))),new i(6,20,20,18,18,new gr(18,new ii(1,22))),new i(7,22,22,20,20,new gr(20,new ii(1,30))),new i(8,24,24,22,22,new gr(24,new ii(1,36))),new i(9,26,26,24,24,new gr(28,new ii(1,44))),new i(10,32,32,14,14,new gr(36,new ii(1,62))),new i(11,36,36,16,16,new gr(42,new ii(1,86))),new i(12,40,40,18,18,new gr(48,new ii(1,114))),new i(13,44,44,20,20,new gr(56,new ii(1,144))),new i(14,48,48,22,22,new gr(68,new ii(1,174))),new i(15,52,52,24,24,new gr(42,new ii(2,102))),new i(16,64,64,14,14,new gr(56,new ii(2,140))),new i(17,72,72,16,16,new gr(36,new ii(4,92))),new i(18,80,80,18,18,new gr(48,new ii(4,114))),new i(19,88,88,20,20,new gr(56,new ii(4,144))),new i(20,96,96,22,22,new gr(68,new ii(4,174))),new i(21,104,104,24,24,new gr(56,new ii(6,136))),new i(22,120,120,18,18,new gr(68,new ii(6,175))),new i(23,132,132,20,20,new gr(62,new ii(8,163))),new i(24,144,144,22,22,new gr(62,new ii(8,156),new ii(2,155))),new i(25,8,18,6,16,new gr(7,new ii(1,5))),new i(26,8,32,6,14,new gr(11,new ii(1,10))),new i(27,12,26,10,24,new gr(14,new ii(1,16))),new i(28,12,36,10,16,new gr(18,new ii(1,22))),new i(29,16,36,14,16,new gr(24,new ii(1,32))),new i(30,16,48,14,22,new gr(28,new ii(1,49)))]},i.VERSIONS=i.buildVersions(),i}(),Sm=function(){function i(e){var n=e.getHeight();if(n<8||n>144||1&n)throw new Zt;this.version=i.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new rr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return i.prototype.getVersion=function(){return this.version},i.readVersion=function(e){var n=e.getHeight(),s=e.getWidth();return Sl.getVersionForDimensions(n,s)},i.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,s=4,c=0,l=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth(),m=!1,y=!1,b=!1,P=!1;do{if(s!==l||0!==c||m)if(s===l-2&&0===c&&3&g&&!y)e[n++]=255&this.readCorner2(l,g),s-=2,c+=2,y=!0;else if(s!==l+4||2!==c||7&g||b)if(s!==l-2||0!==c||4!=(7&g)||P){do{s<l&&c>=0&&!this.readMappingMatrix.get(c,s)&&(e[n++]=255&this.readUtah(s,c,l,g)),s-=2,c+=2}while(s>=0&&c<g);s+=1,c+=3;do{s>=0&&c<g&&!this.readMappingMatrix.get(c,s)&&(e[n++]=255&this.readUtah(s,c,l,g)),s+=2,c-=2}while(s<l&&c>=0);s+=3,c+=1}else e[n++]=255&this.readCorner4(l,g),s-=2,c+=2,P=!0;else e[n++]=255&this.readCorner3(l,g),s-=2,c+=2,b=!0;else e[n++]=255&this.readCorner1(l,g),s-=2,c+=2,m=!0}while(s<l||c<g);if(n!==this.version.getTotalCodewords())throw new Zt;return e},i.prototype.readModule=function(e,n,s,c){return e<0&&(e+=s,n+=4-(s+4&7)),n<0&&(n+=c,e+=4-(c+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},i.prototype.readUtah=function(e,n,s,c){var l=0;return this.readModule(e-2,n-2,s,c)&&(l|=1),l<<=1,this.readModule(e-2,n-1,s,c)&&(l|=1),l<<=1,this.readModule(e-1,n-2,s,c)&&(l|=1),l<<=1,this.readModule(e-1,n-1,s,c)&&(l|=1),l<<=1,this.readModule(e-1,n,s,c)&&(l|=1),l<<=1,this.readModule(e,n-2,s,c)&&(l|=1),l<<=1,this.readModule(e,n-1,s,c)&&(l|=1),l<<=1,this.readModule(e,n,s,c)&&(l|=1),l},i.prototype.readCorner1=function(e,n){var s=0;return this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,1,e,n)&&(s|=1),s<<=1,this.readModule(e-1,2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(2,n-1,e,n)&&(s|=1),s<<=1,this.readModule(3,n-1,e,n)&&(s|=1),s},i.prototype.readCorner2=function(e,n){var s=0;return this.readModule(e-3,0,e,n)&&(s|=1),s<<=1,this.readModule(e-2,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(0,n-4,e,n)&&(s|=1),s<<=1,this.readModule(0,n-3,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s},i.prototype.readCorner3=function(e,n){var s=0;return this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(0,n-3,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-3,e,n)&&(s|=1),s<<=1,this.readModule(1,n-2,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s},i.prototype.readCorner4=function(e,n){var s=0;return this.readModule(e-3,0,e,n)&&(s|=1),s<<=1,this.readModule(e-2,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(2,n-1,e,n)&&(s|=1),s<<=1,this.readModule(3,n-1,e,n)&&(s|=1),s},i.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new fn("Dimension of bitMatrix must match the version size");for(var c=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),g=n/c|0,m=s/l|0,P=new rr(m*l,g*c),B=0;B<g;++B)for(var z=B*c,K=0;K<m;++K)for(var ae=K*l,Ee=0;Ee<c;++Ee)for(var Me=B*(c+2)+1+Ee,Le=z+Ee,ke=0;ke<l;++ke)e.get(K*(l+2)+1+ke,Me)&&P.set(ae+ke,Le);return P},i}();var Fh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const ed=function(){function i(e,n){this.numDataCodewords=e,this.codewords=n}return i.getDataBlocks=function(e,n){var s,c,l,g,m=n.getECBlocks(),y=0,b=m.getECBlocks();try{for(var P=Fh(b),B=P.next();!B.done;B=P.next())y+=(z=B.value).getCount()}catch(uu){s={error:uu}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}var K=new Array(y),ae=0;try{for(var Ee=Fh(b),Me=Ee.next();!Me.done;Me=Ee.next())for(var z=Me.value,Le=0;Le<z.getCount();Le++){var ke=z.getDataCodewords(),Ye=m.getECCodewords()+ke;K[ae++]=new i(ke,new Uint8Array(Ye))}}catch(uu){l={error:uu}}finally{try{Me&&!Me.done&&(g=Ee.return)&&g.call(Ee)}finally{if(l)throw l.error}}var Lt=K[0].codewords.length-m.getECCodewords(),$t=Lt-1,Jt=0;for(Le=0;Le<$t;Le++)for(var mn=0;mn<ae;mn++)K[mn].codewords[Le]=e[Jt++];var nr=24===n.getVersionNumber(),ur=nr?8:ae;for(mn=0;mn<ur;mn++)K[mn].codewords[Lt-1]=e[Jt++];var ss=K[0].codewords.length;for(Le=Lt;Le<ss;Le++)for(mn=0;mn<ae;mn++){var oi=nr?(mn+8)%ae:mn;K[oi].codewords[nr&&oi>7?Le-1:Le]=e[Jt++]}if(Jt!==e.length)throw new fn;return K},i.prototype.getNumDataCodewords=function(){return this.numDataCodewords},i.prototype.getCodewords=function(){return this.codewords},i}(),td=function(){function i(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return i.prototype.getBitOffset=function(){return this.bitOffset},i.prototype.getByteOffset=function(){return this.byteOffset},i.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new fn(""+e);var n=0,s=this.bitOffset,c=this.byteOffset,l=this.bytes;if(s>0){var g=8-s,m=e<g?e:g;n=(l[c]&255>>8-m<<(y=g-m))>>y,e-=m,8===(s+=m)&&(s=0,c++)}if(e>0){for(;e>=8;)n=n<<8|255&l[c],c++,e-=8;var y;e>0&&(n=n<<e|(l[c]&255>>(y=8-e)<<y)>>y,s+=e)}return this.bitOffset=s,this.byteOffset=c,n},i.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},i}();var Ko=function(i){return i[i.PAD_ENCODE=0]="PAD_ENCODE",i[i.ASCII_ENCODE=1]="ASCII_ENCODE",i[i.C40_ENCODE=2]="C40_ENCODE",i[i.TEXT_ENCODE=3]="TEXT_ENCODE",i[i.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",i[i.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",i[i.BASE256_ENCODE=6]="BASE256_ENCODE",i}(Ko||{});const xu=function(){function i(){}return i.decode=function(e){var n=new td(e),s=new hn,c=new hn,l=new Array,g=Ko.ASCII_ENCODE;do{if(g===Ko.ASCII_ENCODE)g=this.decodeAsciiSegment(n,s,c);else{switch(g){case Ko.C40_ENCODE:this.decodeC40Segment(n,s);break;case Ko.TEXT_ENCODE:this.decodeTextSegment(n,s);break;case Ko.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,s);break;case Ko.EDIFACT_ENCODE:this.decodeEdifactSegment(n,s);break;case Ko.BASE256_ENCODE:this.decodeBase256Segment(n,s,l);break;default:throw new Zt}g=Ko.ASCII_ENCODE}}while(g!==Ko.PAD_ENCODE&&n.available()>0);return c.length()>0&&s.append(c.toString()),new wc(e,s.toString(),0===l.length?null:l,null)},i.decodeAsciiSegment=function(e,n,s){var c=!1;do{var l=e.readBits(8);if(0===l)throw new Zt;if(l<=128)return c&&(l+=128),n.append(String.fromCharCode(l-1)),Ko.ASCII_ENCODE;if(129===l)return Ko.PAD_ENCODE;if(l<=229){var g=l-130;g<10&&n.append("0"),n.append(""+g)}else switch(l){case 230:return Ko.C40_ENCODE;case 231:return Ko.BASE256_ENCODE;case 232:n.append("\x1d");break;case 233:case 234:case 241:break;case 235:c=!0;break;case 236:n.append("[)>\x1e05\x1d"),s.insert(0,"\x1e\x04");break;case 237:n.append("[)>\x1e06\x1d"),s.insert(0,"\x1e\x04");break;case 238:return Ko.ANSIX12_ENCODE;case 239:return Ko.TEXT_ENCODE;case 240:return Ko.EDIFACT_ENCODE;default:if(254!==l||0!==e.available())throw new Zt}}while(e.available()>0);return Ko.ASCII_ENCODE},i.decodeC40Segment=function(e,n){var s=!1,c=[],l=0;do{if(8===e.available())return;var g=e.readBits(8);if(254===g)return;this.parseTwoBytes(g,e.readBits(8),c);for(var m=0;m<3;m++){var y=c[m];switch(l){case 0:if(y<3)l=y+1;else{if(!(y<this.C40_BASIC_SET_CHARS.length))throw new Zt;var b=this.C40_BASIC_SET_CHARS[y];s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b)}break;case 1:s?(n.append(String.fromCharCode(y+128)),s=!1):n.append(String.fromCharCode(y)),l=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length)b=this.C40_SHIFT2_SET_CHARS[y],s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b);else switch(y){case 27:n.append("\x1d");break;case 30:s=!0;break;default:throw new Zt}l=0;break;case 3:s?(n.append(String.fromCharCode(y+224)),s=!1):n.append(String.fromCharCode(y+96)),l=0;break;default:throw new Zt}}}while(e.available()>0)},i.decodeTextSegment=function(e,n){var s=!1,c=[],l=0;do{if(8===e.available())return;var g=e.readBits(8);if(254===g)return;this.parseTwoBytes(g,e.readBits(8),c);for(var m=0;m<3;m++){var y=c[m];switch(l){case 0:if(y<3)l=y+1;else{if(!(y<this.TEXT_BASIC_SET_CHARS.length))throw new Zt;var b=this.TEXT_BASIC_SET_CHARS[y];s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b)}break;case 1:s?(n.append(String.fromCharCode(y+128)),s=!1):n.append(String.fromCharCode(y)),l=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length)b=this.TEXT_SHIFT2_SET_CHARS[y],s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b);else switch(y){case 27:n.append("\x1d");break;case 30:s=!0;break;default:throw new Zt}l=0;break;case 3:if(!(y<this.TEXT_SHIFT3_SET_CHARS.length))throw new Zt;b=this.TEXT_SHIFT3_SET_CHARS[y],s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b),l=0;break;default:throw new Zt}}}while(e.available()>0)},i.decodeAnsiX12Segment=function(e,n){var s=[];do{if(8===e.available())return;var c=e.readBits(8);if(254===c)return;this.parseTwoBytes(c,e.readBits(8),s);for(var l=0;l<3;l++){var g=s[l];switch(g){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(g<14)n.append(String.fromCharCode(g+44));else{if(!(g<40))throw new Zt;n.append(String.fromCharCode(g+51))}}}}while(e.available()>0)},i.parseTwoBytes=function(e,n,s){var c=(e<<8)+n-1,l=Math.floor(c/1600);s[0]=l,c-=1600*l,l=Math.floor(c/40),s[1]=l,s[2]=c-40*l},i.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var s=0;s<4;s++){var c=e.readBits(6);if(31===c){var l=8-e.getBitOffset();return void(8!==l&&e.readBits(l))}32&c||(c|=64),n.append(String.fromCharCode(c))}}while(e.available()>0)},i.decodeBase256Segment=function(e,n,s){var g,c=1+e.getByteOffset(),l=this.unrandomize255State(e.readBits(8),c++);if((g=0===l?e.available()/8|0:l<250?l:250*(l-249)+this.unrandomize255State(e.readBits(8),c++))<0)throw new Zt;for(var m=new Uint8Array(g),y=0;y<g;y++){if(e.available()<8)throw new Zt;m[y]=this.unrandomize255State(e.readBits(8),c++)}s.push(m);try{n.append(we.decode(m,mt.ISO88591))}catch(b){throw new gs("Platform does not support required encoding: "+b.message)}},i.unrandomize255State=function(e,n){var c=e-(149*n%255+1);return c>=0?c:c+256},i.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],i.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i.TEXT_SHIFT2_SET_CHARS=i.C40_SHIFT2_SET_CHARS,i.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7f"],i}(),Dl=function(){function i(){this.rsDecoder=new La(pi.DATA_MATRIX_FIELD_256)}return i.prototype.decode=function(e){var n,s,c=new Sm(e),l=c.getVersion(),g=c.readCodewords(),m=ed.getDataBlocks(g,l),y=0;try{for(var b=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(m),P=b.next();!P.done;P=b.next())y+=P.value.getNumDataCodewords()}catch(Ye){n={error:Ye}}finally{try{P&&!P.done&&(s=b.return)&&s.call(b)}finally{if(n)throw n.error}}for(var z=new Uint8Array(y),K=m.length,ae=0;ae<K;ae++){var Ee=m[ae],Me=Ee.getCodewords(),Le=Ee.getNumDataCodewords();this.correctErrors(Me,Le);for(var ke=0;ke<Le;ke++)z[ke*K+ae]=Me[ke]}return xu.decode(z)},i.prototype.correctErrors=function(e,n){var s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-n)}catch{throw new li}for(var c=0;c<n;c++)e[c]=s[c]},i}(),n1=function(){function i(e){this.image=e,this.rectangleDetector=new Nd(this.image)}return i.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new We;var s=(n=this.shiftToModuleCenter(n))[0],c=n[1],l=n[2],g=n[3],m=this.transitionsBetween(s,g)+1,y=this.transitionsBetween(l,g)+1;!(1&~m)&&(m+=1),!(1&~y)&&(y+=1),4*m<7*y&&4*y<7*m&&(m=y=Math.max(m,y));var b=i.sampleGrid(this.image,s,c,l,g,m,y);return new pl(b,[s,c,l,g])},i.shiftPoint=function(e,n,s){var c=(n.getX()-e.getX())/(s+1),l=(n.getY()-e.getY())/(s+1);return new gn(e.getX()+c,e.getY()+l)},i.moveAway=function(e,n,s){var c=e.getX(),l=e.getY();return c<n?c-=1:c+=1,l<s?l-=1:l+=1,new gn(c,l)},i.prototype.detectSolid1=function(e){var n=e[0],s=e[1],c=e[3],l=e[2],g=this.transitionsBetween(n,s),m=this.transitionsBetween(s,c),y=this.transitionsBetween(c,l),b=this.transitionsBetween(l,n),P=g,B=[l,n,s,c];return P>m&&(P=m,B[0]=n,B[1]=s,B[2]=c,B[3]=l),P>y&&(P=y,B[0]=s,B[1]=c,B[2]=l,B[3]=n),P>b&&(B[0]=c,B[1]=l,B[2]=n,B[3]=s),B},i.prototype.detectSolid2=function(e){var n=e[0],s=e[1],c=e[2],l=e[3],g=this.transitionsBetween(n,l),m=i.shiftPoint(s,c,4*(g+1)),y=i.shiftPoint(c,s,4*(g+1));return this.transitionsBetween(m,n)<this.transitionsBetween(y,l)?(e[0]=n,e[1]=s,e[2]=c,e[3]=l):(e[0]=s,e[1]=c,e[2]=l,e[3]=n),e},i.prototype.correctTopRight=function(e){var n=e[0],s=e[1],c=e[2],l=e[3],g=this.transitionsBetween(n,l),m=this.transitionsBetween(s,l),y=i.shiftPoint(n,s,4*(m+1)),b=i.shiftPoint(c,s,4*(g+1));g=this.transitionsBetween(y,l),m=this.transitionsBetween(b,l);var P=new gn(l.getX()+(c.getX()-s.getX())/(g+1),l.getY()+(c.getY()-s.getY())/(g+1)),B=new gn(l.getX()+(n.getX()-s.getX())/(m+1),l.getY()+(n.getY()-s.getY())/(m+1));return this.isValid(P)?this.isValid(B)?this.transitionsBetween(y,P)+this.transitionsBetween(b,P)>this.transitionsBetween(y,B)+this.transitionsBetween(b,B)?P:B:P:this.isValid(B)?B:null},i.prototype.shiftToModuleCenter=function(e){var n=e[0],s=e[1],c=e[2],l=e[3],g=this.transitionsBetween(n,l)+1,m=this.transitionsBetween(c,l)+1,y=i.shiftPoint(n,s,4*m),b=i.shiftPoint(c,s,4*g);!(1&~(g=this.transitionsBetween(y,l)+1))&&(g+=1),!(1&~(m=this.transitionsBetween(b,l)+1))&&(m+=1);var z,K,P=(n.getX()+s.getX()+c.getX()+l.getX())/4,B=(n.getY()+s.getY()+c.getY()+l.getY())/4;return n=i.moveAway(n,P,B),s=i.moveAway(s,P,B),c=i.moveAway(c,P,B),l=i.moveAway(l,P,B),y=i.shiftPoint(n,s,4*m),y=i.shiftPoint(y,l,4*g),z=i.shiftPoint(s,n,4*m),z=i.shiftPoint(z,c,4*g),b=i.shiftPoint(c,l,4*m),b=i.shiftPoint(b,s,4*g),K=i.shiftPoint(l,c,4*m),[y,z,b,K=i.shiftPoint(K,n,4*g)]},i.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},i.sampleGrid=function(e,n,s,c,l,g,m){return Q.getInstance().sampleGrid(e,g,m,.5,.5,g-.5,.5,g-.5,m-.5,.5,m-.5,n.getX(),n.getY(),l.getX(),l.getY(),c.getX(),c.getY(),s.getX(),s.getY())},i.prototype.transitionsBetween=function(e,n){var s=Math.trunc(e.getX()),c=Math.trunc(e.getY()),l=Math.trunc(n.getX()),g=Math.trunc(n.getY()),m=Math.abs(g-c)>Math.abs(l-s);if(m){var y=s;s=c,c=y,y=l,l=g,g=y}for(var b=Math.abs(l-s),P=Math.abs(g-c),B=-b/2,z=c<g?1:-1,K=s<l?1:-1,ae=0,Ee=this.image.get(m?c:s,m?s:c),Me=s,Le=c;Me!==l;Me+=K){var ke=this.image.get(m?Le:Me,m?Me:Le);if(ke!==Ee&&(ae++,Ee=ke),(B+=P)>0){if(Le===g)break;Le+=z,B-=b}}return ae},i}(),Bf=function(){function i(){this.decoder=new Dl}return i.prototype.decode=function(e,n){var s,c;if(void 0===n&&(n=null),null!=n&&n.has(Gn.PURE_BARCODE)){var l=i.extractPureBits(e.getBlackMatrix());s=this.decoder.decode(l),c=i.NO_POINTS}else{var g=new n1(e.getBlackMatrix()).detect();s=this.decoder.decode(g.getBits()),c=g.getPoints()}var m=s.getRawBytes(),y=new ao(s.getText(),m,8*m.length,c,cn.DATA_MATRIX,Ur.currentTimeMillis()),b=s.getByteSegments();null!=b&&y.putMetadata(Yi.BYTE_SEGMENTS,b);var P=s.getECLevel();return null!=P&&y.putMetadata(Yi.ERROR_CORRECTION_LEVEL,P),y},i.prototype.reset=function(){},i.extractPureBits=function(e){var n=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(null==n||null==s)throw new We;var c=this.moduleSize(n,e),l=n[1],m=n[0],b=(s[0]-m+1)/c,P=(s[1]-l+1)/c;if(b<=0||P<=0)throw new We;var B=c/2;l+=B,m+=B;for(var z=new rr(b,P),K=0;K<P;K++)for(var ae=l+K*c,Ee=0;Ee<b;Ee++)e.get(m+Ee*c,ae)&&z.set(Ee,K);return z},i.moduleSize=function(e,n){for(var s=n.getWidth(),c=e[0],l=e[1];c<s&&n.get(c,l);)c++;if(c===s)throw new We;var g=c-e[0];if(0===g)throw new We;return g},i.NO_POINTS=[],i}();var Rm=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ac=(function(i){Rm(function e(n){return void 0===n&&(n=500),i.call(this,new Bf,n)||this},i)}(oa),function(i){return i[i.L=0]="L",i[i.M=1]="M",i[i.Q=2]="Q",i[i.H=3]="H",i}(ac||{}));const eu=function(){function i(e,n,s){this.value=e,this.stringValue=n,this.bits=s,i.FOR_BITS.set(s,this),i.FOR_VALUE.set(e,this)}return i.prototype.getValue=function(){return this.value},i.prototype.getBits=function(){return this.bits},i.fromString=function(e){switch(e){case"L":return i.L;case"M":return i.M;case"Q":return i.Q;case"H":return i.H;default:throw new Zr(e+"not available")}},i.prototype.toString=function(){return this.stringValue},i.prototype.equals=function(e){return e instanceof i&&this.value===e.value},i.forBits=function(e){if(e<0||e>=i.FOR_BITS.size)throw new fn;return i.FOR_BITS.get(e)},i.FOR_BITS=new Map,i.FOR_VALUE=new Map,i.L=new i(ac.L,"L",1),i.M=new i(ac.M,"M",0),i.Q=new i(ac.Q,"Q",3),i.H=new i(ac.H,"H",2),i}(),Mm=function(){function i(e){this.errorCorrectionLevel=eu.forBits(e>>3&3),this.dataMask=7&e}return i.numBitsDiffering=function(e,n){return cr.bitCount(e^n)},i.decodeFormatInformation=function(e,n){var s=i.doDecodeFormatInformation(e,n);return null!==s?s:i.doDecodeFormatInformation(e^i.FORMAT_INFO_MASK_QR,n^i.FORMAT_INFO_MASK_QR)},i.doDecodeFormatInformation=function(e,n){var s,c,l=Number.MAX_SAFE_INTEGER,g=0;try{for(var m=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i.FORMAT_INFO_DECODE_LOOKUP),y=m.next();!y.done;y=m.next()){var b=y.value,P=b[0];if(P===e||P===n)return new i(b[1]);var B=i.numBitsDiffering(e,P);B<l&&(g=b[1],l=B),e!==n&&(B=i.numBitsDiffering(n,P))<l&&(g=b[1],l=B)}}catch(z){s={error:z}}finally{try{y&&!y.done&&(c=m.return)&&c.call(m)}finally{if(s)throw s.error}}return l<=3?new i(g):null},i.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},i.prototype.getDataMask=function(){return this.dataMask},i.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},i.prototype.equals=function(e){return e instanceof i&&(this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask)},i.FORMAT_INFO_MASK_QR=21522,i.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],i}(),ft=function(){function i(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return i.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},i.prototype.getNumBlocks=function(){var e,n,s=0,c=this.ecBlocks;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),g=l.next();!g.done;g=l.next())s+=g.value.getCount()}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s},i.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},i.prototype.getECBlocks=function(){return this.ecBlocks},i}(),ve=function(){function i(e,n){this.count=e,this.dataCodewords=n}return i.prototype.getCount=function(){return this.count},i.prototype.getDataCodewords=function(){return this.dataCodewords},i}(),Fs=function(){function i(e,n){for(var s,c,l=[],g=2;g<arguments.length;g++)l[g-2]=arguments[g];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=l;var m=0,y=l[0].getECCodewordsPerBlock(),b=l[0].getECBlocks();try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(b),B=P.next();!B.done;B=P.next()){var z=B.value;m+=z.getCount()*(z.getDataCodewords()+y)}}catch(K){s={error:K}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}this.totalCodewords=m}return i.prototype.getVersionNumber=function(){return this.versionNumber},i.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},i.prototype.getTotalCodewords=function(){return this.totalCodewords},i.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},i.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},i.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw new Zt;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Zt}},i.getVersionForNumber=function(e){if(e<1||e>40)throw new fn;return i.VERSIONS[e-1]},i.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,s=0,c=0;c<i.VERSION_DECODE_INFO.length;c++){var l=i.VERSION_DECODE_INFO[c];if(l===e)return i.getVersionForNumber(c+7);var g=Mm.numBitsDiffering(e,l);g<n&&(s=c+7,n=g)}return n<=3?i.getVersionForNumber(s):null},i.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new rr(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var s=this.alignmentPatternCenters.length,c=0;c<s;c++)for(var l=this.alignmentPatternCenters[c]-2,g=0;g<s;g++)0===c&&(0===g||g===s-1)||c===s-1&&0===g||n.setRegion(this.alignmentPatternCenters[g]-2,l,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},i.prototype.toString=function(){return""+this.versionNumber},i.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),i.VERSIONS=[new i(1,new Int32Array(0),new ft(7,new ve(1,19)),new ft(10,new ve(1,16)),new ft(13,new ve(1,13)),new ft(17,new ve(1,9))),new i(2,Int32Array.from([6,18]),new ft(10,new ve(1,34)),new ft(16,new ve(1,28)),new ft(22,new ve(1,22)),new ft(28,new ve(1,16))),new i(3,Int32Array.from([6,22]),new ft(15,new ve(1,55)),new ft(26,new ve(1,44)),new ft(18,new ve(2,17)),new ft(22,new ve(2,13))),new i(4,Int32Array.from([6,26]),new ft(20,new ve(1,80)),new ft(18,new ve(2,32)),new ft(26,new ve(2,24)),new ft(16,new ve(4,9))),new i(5,Int32Array.from([6,30]),new ft(26,new ve(1,108)),new ft(24,new ve(2,43)),new ft(18,new ve(2,15),new ve(2,16)),new ft(22,new ve(2,11),new ve(2,12))),new i(6,Int32Array.from([6,34]),new ft(18,new ve(2,68)),new ft(16,new ve(4,27)),new ft(24,new ve(4,19)),new ft(28,new ve(4,15))),new i(7,Int32Array.from([6,22,38]),new ft(20,new ve(2,78)),new ft(18,new ve(4,31)),new ft(18,new ve(2,14),new ve(4,15)),new ft(26,new ve(4,13),new ve(1,14))),new i(8,Int32Array.from([6,24,42]),new ft(24,new ve(2,97)),new ft(22,new ve(2,38),new ve(2,39)),new ft(22,new ve(4,18),new ve(2,19)),new ft(26,new ve(4,14),new ve(2,15))),new i(9,Int32Array.from([6,26,46]),new ft(30,new ve(2,116)),new ft(22,new ve(3,36),new ve(2,37)),new ft(20,new ve(4,16),new ve(4,17)),new ft(24,new ve(4,12),new ve(4,13))),new i(10,Int32Array.from([6,28,50]),new ft(18,new ve(2,68),new ve(2,69)),new ft(26,new ve(4,43),new ve(1,44)),new ft(24,new ve(6,19),new ve(2,20)),new ft(28,new ve(6,15),new ve(2,16))),new i(11,Int32Array.from([6,30,54]),new ft(20,new ve(4,81)),new ft(30,new ve(1,50),new ve(4,51)),new ft(28,new ve(4,22),new ve(4,23)),new ft(24,new ve(3,12),new ve(8,13))),new i(12,Int32Array.from([6,32,58]),new ft(24,new ve(2,92),new ve(2,93)),new ft(22,new ve(6,36),new ve(2,37)),new ft(26,new ve(4,20),new ve(6,21)),new ft(28,new ve(7,14),new ve(4,15))),new i(13,Int32Array.from([6,34,62]),new ft(26,new ve(4,107)),new ft(22,new ve(8,37),new ve(1,38)),new ft(24,new ve(8,20),new ve(4,21)),new ft(22,new ve(12,11),new ve(4,12))),new i(14,Int32Array.from([6,26,46,66]),new ft(30,new ve(3,115),new ve(1,116)),new ft(24,new ve(4,40),new ve(5,41)),new ft(20,new ve(11,16),new ve(5,17)),new ft(24,new ve(11,12),new ve(5,13))),new i(15,Int32Array.from([6,26,48,70]),new ft(22,new ve(5,87),new ve(1,88)),new ft(24,new ve(5,41),new ve(5,42)),new ft(30,new ve(5,24),new ve(7,25)),new ft(24,new ve(11,12),new ve(7,13))),new i(16,Int32Array.from([6,26,50,74]),new ft(24,new ve(5,98),new ve(1,99)),new ft(28,new ve(7,45),new ve(3,46)),new ft(24,new ve(15,19),new ve(2,20)),new ft(30,new ve(3,15),new ve(13,16))),new i(17,Int32Array.from([6,30,54,78]),new ft(28,new ve(1,107),new ve(5,108)),new ft(28,new ve(10,46),new ve(1,47)),new ft(28,new ve(1,22),new ve(15,23)),new ft(28,new ve(2,14),new ve(17,15))),new i(18,Int32Array.from([6,30,56,82]),new ft(30,new ve(5,120),new ve(1,121)),new ft(26,new ve(9,43),new ve(4,44)),new ft(28,new ve(17,22),new ve(1,23)),new ft(28,new ve(2,14),new ve(19,15))),new i(19,Int32Array.from([6,30,58,86]),new ft(28,new ve(3,113),new ve(4,114)),new ft(26,new ve(3,44),new ve(11,45)),new ft(26,new ve(17,21),new ve(4,22)),new ft(26,new ve(9,13),new ve(16,14))),new i(20,Int32Array.from([6,34,62,90]),new ft(28,new ve(3,107),new ve(5,108)),new ft(26,new ve(3,41),new ve(13,42)),new ft(30,new ve(15,24),new ve(5,25)),new ft(28,new ve(15,15),new ve(10,16))),new i(21,Int32Array.from([6,28,50,72,94]),new ft(28,new ve(4,116),new ve(4,117)),new ft(26,new ve(17,42)),new ft(28,new ve(17,22),new ve(6,23)),new ft(30,new ve(19,16),new ve(6,17))),new i(22,Int32Array.from([6,26,50,74,98]),new ft(28,new ve(2,111),new ve(7,112)),new ft(28,new ve(17,46)),new ft(30,new ve(7,24),new ve(16,25)),new ft(24,new ve(34,13))),new i(23,Int32Array.from([6,30,54,78,102]),new ft(30,new ve(4,121),new ve(5,122)),new ft(28,new ve(4,47),new ve(14,48)),new ft(30,new ve(11,24),new ve(14,25)),new ft(30,new ve(16,15),new ve(14,16))),new i(24,Int32Array.from([6,28,54,80,106]),new ft(30,new ve(6,117),new ve(4,118)),new ft(28,new ve(6,45),new ve(14,46)),new ft(30,new ve(11,24),new ve(16,25)),new ft(30,new ve(30,16),new ve(2,17))),new i(25,Int32Array.from([6,32,58,84,110]),new ft(26,new ve(8,106),new ve(4,107)),new ft(28,new ve(8,47),new ve(13,48)),new ft(30,new ve(7,24),new ve(22,25)),new ft(30,new ve(22,15),new ve(13,16))),new i(26,Int32Array.from([6,30,58,86,114]),new ft(28,new ve(10,114),new ve(2,115)),new ft(28,new ve(19,46),new ve(4,47)),new ft(28,new ve(28,22),new ve(6,23)),new ft(30,new ve(33,16),new ve(4,17))),new i(27,Int32Array.from([6,34,62,90,118]),new ft(30,new ve(8,122),new ve(4,123)),new ft(28,new ve(22,45),new ve(3,46)),new ft(30,new ve(8,23),new ve(26,24)),new ft(30,new ve(12,15),new ve(28,16))),new i(28,Int32Array.from([6,26,50,74,98,122]),new ft(30,new ve(3,117),new ve(10,118)),new ft(28,new ve(3,45),new ve(23,46)),new ft(30,new ve(4,24),new ve(31,25)),new ft(30,new ve(11,15),new ve(31,16))),new i(29,Int32Array.from([6,30,54,78,102,126]),new ft(30,new ve(7,116),new ve(7,117)),new ft(28,new ve(21,45),new ve(7,46)),new ft(30,new ve(1,23),new ve(37,24)),new ft(30,new ve(19,15),new ve(26,16))),new i(30,Int32Array.from([6,26,52,78,104,130]),new ft(30,new ve(5,115),new ve(10,116)),new ft(28,new ve(19,47),new ve(10,48)),new ft(30,new ve(15,24),new ve(25,25)),new ft(30,new ve(23,15),new ve(25,16))),new i(31,Int32Array.from([6,30,56,82,108,134]),new ft(30,new ve(13,115),new ve(3,116)),new ft(28,new ve(2,46),new ve(29,47)),new ft(30,new ve(42,24),new ve(1,25)),new ft(30,new ve(23,15),new ve(28,16))),new i(32,Int32Array.from([6,34,60,86,112,138]),new ft(30,new ve(17,115)),new ft(28,new ve(10,46),new ve(23,47)),new ft(30,new ve(10,24),new ve(35,25)),new ft(30,new ve(19,15),new ve(35,16))),new i(33,Int32Array.from([6,30,58,86,114,142]),new ft(30,new ve(17,115),new ve(1,116)),new ft(28,new ve(14,46),new ve(21,47)),new ft(30,new ve(29,24),new ve(19,25)),new ft(30,new ve(11,15),new ve(46,16))),new i(34,Int32Array.from([6,34,62,90,118,146]),new ft(30,new ve(13,115),new ve(6,116)),new ft(28,new ve(14,46),new ve(23,47)),new ft(30,new ve(44,24),new ve(7,25)),new ft(30,new ve(59,16),new ve(1,17))),new i(35,Int32Array.from([6,30,54,78,102,126,150]),new ft(30,new ve(12,121),new ve(7,122)),new ft(28,new ve(12,47),new ve(26,48)),new ft(30,new ve(39,24),new ve(14,25)),new ft(30,new ve(22,15),new ve(41,16))),new i(36,Int32Array.from([6,24,50,76,102,128,154]),new ft(30,new ve(6,121),new ve(14,122)),new ft(28,new ve(6,47),new ve(34,48)),new ft(30,new ve(46,24),new ve(10,25)),new ft(30,new ve(2,15),new ve(64,16))),new i(37,Int32Array.from([6,28,54,80,106,132,158]),new ft(30,new ve(17,122),new ve(4,123)),new ft(28,new ve(29,46),new ve(14,47)),new ft(30,new ve(49,24),new ve(10,25)),new ft(30,new ve(24,15),new ve(46,16))),new i(38,Int32Array.from([6,32,58,84,110,136,162]),new ft(30,new ve(4,122),new ve(18,123)),new ft(28,new ve(13,46),new ve(32,47)),new ft(30,new ve(48,24),new ve(14,25)),new ft(30,new ve(42,15),new ve(32,16))),new i(39,Int32Array.from([6,26,54,82,110,138,166]),new ft(30,new ve(20,117),new ve(4,118)),new ft(28,new ve(40,47),new ve(7,48)),new ft(30,new ve(43,24),new ve(22,25)),new ft(30,new ve(10,15),new ve(67,16))),new i(40,Int32Array.from([6,30,58,86,114,142,170]),new ft(30,new ve(19,118),new ve(6,119)),new ft(28,new ve(18,47),new ve(31,48)),new ft(30,new ve(34,24),new ve(34,25)),new ft(30,new ve(20,15),new ve(61,16)))],i}();var _o=function(i){return i[i.DATA_MASK_000=0]="DATA_MASK_000",i[i.DATA_MASK_001=1]="DATA_MASK_001",i[i.DATA_MASK_010=2]="DATA_MASK_010",i[i.DATA_MASK_011=3]="DATA_MASK_011",i[i.DATA_MASK_100=4]="DATA_MASK_100",i[i.DATA_MASK_101=5]="DATA_MASK_101",i[i.DATA_MASK_110=6]="DATA_MASK_110",i[i.DATA_MASK_111=7]="DATA_MASK_111",i}(_o||{});const Xp=function(){function i(e,n){this.value=e,this.isMasked=n}return i.prototype.unmaskBitMatrix=function(e,n){for(var s=0;s<n;s++)for(var c=0;c<n;c++)this.isMasked(s,c)&&e.flip(c,s)},i.values=new Map([[_o.DATA_MASK_000,new i(_o.DATA_MASK_000,function(e,n){return!(e+n&1)})],[_o.DATA_MASK_001,new i(_o.DATA_MASK_001,function(e,n){return!(1&e)})],[_o.DATA_MASK_010,new i(_o.DATA_MASK_010,function(e,n){return n%3==0})],[_o.DATA_MASK_011,new i(_o.DATA_MASK_011,function(e,n){return(e+n)%3==0})],[_o.DATA_MASK_100,new i(_o.DATA_MASK_100,function(e,n){return!(Math.floor(e/2)+Math.floor(n/3)&1)})],[_o.DATA_MASK_101,new i(_o.DATA_MASK_101,function(e,n){return e*n%6==0})],[_o.DATA_MASK_110,new i(_o.DATA_MASK_110,function(e,n){return e*n%6<3})],[_o.DATA_MASK_111,new i(_o.DATA_MASK_111,function(e,n){return!(e+n+e*n%3&1)})]]),i}(),r1=function(){function i(e){var n=e.getHeight();if(n<21||1!=(3&n))throw new Zt;this.bitMatrix=e}return i.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var s=5;s>=0;s--)e=this.copyBit(8,s,e);var c=this.bitMatrix.getHeight(),l=0,g=c-7;for(s=c-1;s>=g;s--)l=this.copyBit(8,s,l);for(n=c-8;n<c;n++)l=this.copyBit(n,8,l);if(this.parsedFormatInfo=Mm.decodeFormatInformation(e,l),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new Zt},i.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Fs.getVersionForNumber(n);for(var s=0,c=e-11,l=5;l>=0;l--)for(var g=e-9;g>=c;g--)s=this.copyBit(g,l,s);var m=Fs.decodeVersionInformation(s);if(null!==m&&m.getDimensionForVersion()===e)return this.parsedVersion=m,m;for(s=0,g=5;g>=0;g--)for(l=e-9;l>=c;l--)s=this.copyBit(g,l,s);if(null!==(m=Fs.decodeVersionInformation(s))&&m.getDimensionForVersion()===e)return this.parsedVersion=m,m;throw new Zt},i.prototype.copyBit=function(e,n,s){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?s<<1|1:s<<1},i.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),s=Xp.values.get(e.getDataMask()),c=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,c);for(var l=n.buildFunctionPattern(),g=!0,m=new Uint8Array(n.getTotalCodewords()),y=0,b=0,P=0,B=c-1;B>0;B-=2){6===B&&B--;for(var z=0;z<c;z++)for(var K=g?c-1-z:z,ae=0;ae<2;ae++)l.get(B-ae,K)||(P++,b<<=1,this.bitMatrix.get(B-ae,K)&&(b|=1),8===P&&(m[y++]=b,P=0,b=0));g=!g}if(y!==n.getTotalCodewords())throw new Zt;return m},i.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=Xp.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},i.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},i.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,s=e.getWidth();n<s;n++)for(var c=n+1,l=e.getHeight();c<l;c++)e.get(n,c)!==e.get(c,n)&&(e.flip(c,n),e.flip(n,c))},i}();var Qp=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Uh=function(){function i(e,n){this.numDataCodewords=e,this.codewords=n}return i.getDataBlocks=function(e,n,s){var c,l,g,m;if(e.length!==n.getTotalCodewords())throw new fn;var y=n.getECBlocksForLevel(s),b=0,P=y.getECBlocks();try{for(var B=Qp(P),z=B.next();!z.done;z=B.next())b+=(K=z.value).getCount()}catch(Fo){c={error:Fo}}finally{try{z&&!z.done&&(l=B.return)&&l.call(B)}finally{if(c)throw c.error}}var ae=new Array(b),Ee=0;try{for(var Me=Qp(P),Le=Me.next();!Le.done;Le=Me.next())for(var K=Le.value,ke=0;ke<K.getCount();ke++){var Ye=K.getDataCodewords(),at=y.getECCodewordsPerBlock()+Ye;ae[Ee++]=new i(Ye,new Uint8Array(at))}}catch(Fo){g={error:Fo}}finally{try{Le&&!Le.done&&(m=Me.return)&&m.call(Me)}finally{if(g)throw g.error}}for(var Lt=ae[0].codewords.length,$t=ae.length-1;$t>=0&&ae[$t].codewords.length!==Lt;)$t--;$t++;var mn=Lt-y.getECCodewordsPerBlock(),nr=0;for(ke=0;ke<mn;ke++)for(var ur=0;ur<Ee;ur++)ae[ur].codewords[ke]=e[nr++];for(ur=$t;ur<Ee;ur++)ae[ur].codewords[mn]=e[nr++];var ss=ae[0].codewords.length;for(ke=mn;ke<ss;ke++)for(ur=0;ur<Ee;ur++)ae[ur].codewords[ur<$t?ke:ke+1]=e[nr++];return ae},i.prototype.getNumDataCodewords=function(){return this.numDataCodewords},i.prototype.getCodewords=function(){return this.codewords},i}();var Gi=function(i){return i[i.TERMINATOR=0]="TERMINATOR",i[i.NUMERIC=1]="NUMERIC",i[i.ALPHANUMERIC=2]="ALPHANUMERIC",i[i.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",i[i.BYTE=4]="BYTE",i[i.ECI=5]="ECI",i[i.KANJI=6]="KANJI",i[i.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",i[i.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",i[i.HANZI=9]="HANZI",i}(Gi||{});const eo=function(){function i(e,n,s,c){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=s,this.bits=c,i.FOR_BITS.set(c,this),i.FOR_VALUE.set(e,this)}return i.forBits=function(e){var n=i.FOR_BITS.get(e);if(void 0===n)throw new fn;return n},i.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber();return this.characterCountBitsForVersions[n<=9?0:n<=26?1:2]},i.prototype.getValue=function(){return this.value},i.prototype.getBits=function(){return this.bits},i.prototype.equals=function(e){return e instanceof i&&this.value===e.value},i.prototype.toString=function(){return this.stringValue},i.FOR_BITS=new Map,i.FOR_VALUE=new Map,i.TERMINATOR=new i(Gi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),i.NUMERIC=new i(Gi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),i.ALPHANUMERIC=new i(Gi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),i.STRUCTURED_APPEND=new i(Gi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),i.BYTE=new i(Gi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),i.ECI=new i(Gi.ECI,"ECI",Int32Array.from([0,0,0]),7),i.KANJI=new i(Gi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),i.FNC1_FIRST_POSITION=new i(Gi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),i.FNC1_SECOND_POSITION=new i(Gi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),i.HANZI=new i(Gi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),i}(),ru=function(){function i(){}return i.decode=function(e,n,s,c){var l=new td(e),g=new hn,m=new Array,y=-1,b=-1;try{var P=null,B=!1,z=void 0;do{if(l.available()<4)z=eo.TERMINATOR;else{var K=l.readBits(4);z=eo.forBits(K)}switch(z){case eo.TERMINATOR:break;case eo.FNC1_FIRST_POSITION:case eo.FNC1_SECOND_POSITION:B=!0;break;case eo.STRUCTURED_APPEND:if(l.available()<16)throw new Zt;y=l.readBits(8),b=l.readBits(8);break;case eo.ECI:var ae=i.parseECIValue(l);if(null===(P=po.getCharacterSetECIByValue(ae)))throw new Zt;break;case eo.HANZI:var Ee=l.readBits(4),Me=l.readBits(z.getCharacterCountBits(n));Ee===i.GB2312_SUBSET&&i.decodeHanziSegment(l,g,Me);break;default:var Le=l.readBits(z.getCharacterCountBits(n));switch(z){case eo.NUMERIC:i.decodeNumericSegment(l,g,Le);break;case eo.ALPHANUMERIC:i.decodeAlphanumericSegment(l,g,Le,B);break;case eo.BYTE:i.decodeByteSegment(l,g,Le,P,m,c);break;case eo.KANJI:i.decodeKanjiSegment(l,g,Le);break;default:throw new Zt}}}while(z!==eo.TERMINATOR)}catch{throw new Zt}return new wc(e,g.toString(),0===m.length?null:m,null===s?null:s.toString(),y,b)},i.decodeHanziSegment=function(e,n,s){if(13*s>e.available())throw new Zt;for(var c=new Uint8Array(2*s),l=0;s>0;){var g=e.readBits(13),m=g/96<<8&4294967295|g%96;c[l]=(m+=m<959?41377:42657)>>8&255,c[l+1]=255&m,l+=2,s--}try{n.append(we.decode(c,mt.GB2312))}catch(y){throw new Zt(y)}},i.decodeKanjiSegment=function(e,n,s){if(13*s>e.available())throw new Zt;for(var c=new Uint8Array(2*s),l=0;s>0;){var g=e.readBits(13),m=g/192<<8&4294967295|g%192;c[l]=(m+=m<7936?33088:49472)>>8,c[l+1]=m,l+=2,s--}try{n.append(we.decode(c,mt.SHIFT_JIS))}catch(y){throw new Zt(y)}},i.decodeByteSegment=function(e,n,s,c,l,g){if(8*s>e.available())throw new Zt;for(var m=new Uint8Array(s),y=0;y<s;y++)m[y]=e.readBits(8);var b;b=null===c?mt.guessEncoding(m,g):c.getName();try{n.append(we.decode(m,b))}catch(P){throw new Zt(P)}l.push(m)},i.toAlphaNumericChar=function(e){if(e>=i.ALPHANUMERIC_CHARS.length)throw new Zt;return i.ALPHANUMERIC_CHARS[e]},i.decodeAlphanumericSegment=function(e,n,s,c){for(var l=n.length();s>1;){if(e.available()<11)throw new Zt;var g=e.readBits(11);n.append(i.toAlphaNumericChar(Math.floor(g/45))),n.append(i.toAlphaNumericChar(g%45)),s-=2}if(1===s){if(e.available()<6)throw new Zt;n.append(i.toAlphaNumericChar(e.readBits(6)))}if(c)for(var m=l;m<n.length();m++)"%"===n.charAt(m)&&(m<n.length()-1&&"%"===n.charAt(m+1)?n.deleteCharAt(m+1):n.setCharAt(m,"\x1d"))},i.decodeNumericSegment=function(e,n,s){for(;s>=3;){if(e.available()<10)throw new Zt;var c=e.readBits(10);if(c>=1e3)throw new Zt;n.append(i.toAlphaNumericChar(Math.floor(c/100))),n.append(i.toAlphaNumericChar(Math.floor(c/10)%10)),n.append(i.toAlphaNumericChar(c%10)),s-=3}if(2===s){if(e.available()<7)throw new Zt;var l=e.readBits(7);if(l>=100)throw new Zt;n.append(i.toAlphaNumericChar(Math.floor(l/10))),n.append(i.toAlphaNumericChar(l%10))}else if(1===s){if(e.available()<4)throw new Zt;var g=e.readBits(4);if(g>=10)throw new Zt;n.append(i.toAlphaNumericChar(g))}},i.parseECIValue=function(e){var n=e.readBits(8);if(!(128&n))return 127&n;if(128==(192&n))return(63&n)<<8&4294967295|e.readBits(8);if(192==(224&n))return(31&n)<<16&4294967295|e.readBits(16);throw new Zt},i.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.GB2312_SUBSET=1,i}(),jh=function(){function i(e){this.mirrored=e}return i.prototype.isMirrored=function(){return this.mirrored},i.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},i}();var Hh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Gh=function(){function i(){this.rsDecoder=new La(pi.QR_CODE_FIELD_256)}return i.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(rr.parseFromBooleanArray(e),n)},i.prototype.decodeBitMatrix=function(e,n){var s=new r1(e),c=null;try{return this.decodeBitMatrixParser(s,n)}catch(g){c=g}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();var l=this.decodeBitMatrixParser(s,n);return l.setOther(new jh(!0)),l}catch(g){throw null!==c?c:g}},i.prototype.decodeBitMatrixParser=function(e,n){var s,c,l,g,m=e.readVersion(),y=e.readFormatInformation().getErrorCorrectionLevel(),b=e.readCodewords(),P=Uh.getDataBlocks(b,m,y),B=0;try{for(var z=Hh(P),K=z.next();!K.done;K=z.next())B+=(ae=K.value).getNumDataCodewords()}catch($t){s={error:$t}}finally{try{K&&!K.done&&(c=z.return)&&c.call(z)}finally{if(s)throw s.error}}var Ee=new Uint8Array(B),Me=0;try{for(var Le=Hh(P),ke=Le.next();!ke.done;ke=Le.next()){var ae,Ye=(ae=ke.value).getCodewords(),at=ae.getNumDataCodewords();this.correctErrors(Ye,at);for(var Lt=0;Lt<at;Lt++)Ee[Me++]=Ye[Lt]}}catch($t){l={error:$t}}finally{try{ke&&!ke.done&&(g=Le.return)&&g.call(Le)}finally{if(l)throw l.error}}return ru.decode(Ee,m,y,n)},i.prototype.correctErrors=function(e,n){var s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-n)}catch{throw new li}for(var c=0;c<n;c++)e[c]=s[c]},i}();var Zp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const jf=function(i){function e(n,s,c){var l=i.call(this,n,s)||this;return l.estimatedModuleSize=c,l}return Zp(e,i),e.prototype.aboutEquals=function(n,s,c){if(Math.abs(s-this.getY())<=n&&Math.abs(c-this.getX())<=n){var l=Math.abs(n-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,s,c){return new e((this.getX()+s)/2,(this.getY()+n)/2,(this.estimatedModuleSize+c)/2)},e}(gn),eg=function(){function i(e,n,s,c,l,g,m){this.image=e,this.startX=n,this.startY=s,this.width=c,this.height=l,this.moduleSize=g,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return i.prototype.find=function(){for(var e=this.startX,n=this.height,c=e+this.width,l=this.startY+n/2,g=new Int32Array(3),m=this.image,y=0;y<n;y++){var b=l+(1&y?-Math.floor((y+1)/2):Math.floor((y+1)/2));g[0]=0,g[1]=0,g[2]=0;for(var P=e;P<c&&!m.get(P,b);)P++;for(var B=0;P<c;){if(m.get(P,b))if(1===B)g[1]++;else if(2===B){var z;if(this.foundPatternCross(g)&&null!==(z=this.handlePossibleCenter(g,b,P)))return z;g[0]=g[2],g[1]=1,g[2]=0,B=1}else g[++B]++;else 1===B&&B++,g[B]++;P++}if(this.foundPatternCross(g)&&null!==(z=this.handlePossibleCenter(g,b,c)))return z}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new We},i.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},i.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,s=n/2,c=0;c<3;c++)if(Math.abs(n-e[c])>=s)return!1;return!0},i.prototype.crossCheckVertical=function(e,n,s,c){var l=this.image,g=l.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;for(var y=e;y>=0&&l.get(n,y)&&m[1]<=s;)m[1]++,y--;if(y<0||m[1]>s)return NaN;for(;y>=0&&!l.get(n,y)&&m[0]<=s;)m[0]++,y--;if(m[0]>s)return NaN;for(y=e+1;y<g&&l.get(n,y)&&m[1]<=s;)m[1]++,y++;if(y===g||m[1]>s)return NaN;for(;y<g&&!l.get(n,y)&&m[2]<=s;)m[2]++,y++;return m[2]>s||5*Math.abs(m[0]+m[1]+m[2]-c)>=2*c?NaN:this.foundPatternCross(m)?i.centerFromEnd(m,y):NaN},i.prototype.handlePossibleCenter=function(e,n,s){var c,l,g=e[0]+e[1]+e[2],m=i.centerFromEnd(e,s),y=this.crossCheckVertical(n,m,2*e[1],g);if(!isNaN(y)){var b=(e[0]+e[1]+e[2])/3;try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.possibleCenters),B=P.next();!B.done;B=P.next()){var z=B.value;if(z.aboutEquals(b,y,m))return z.combineEstimate(y,m,b)}}catch(ae){c={error:ae}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}var K=new jf(m,y,b);this.possibleCenters.push(K),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(K)}return null},i}();var Pm=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const km=function(i){function e(n,s,c,l){var g=i.call(this,n,s)||this;return g.estimatedModuleSize=c,g.count=l,void 0===l&&(g.count=1),g}return Pm(e,i),e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,s,c){if(Math.abs(s-this.getY())<=n&&Math.abs(c-this.getX())<=n){var l=Math.abs(n-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,s,c){var l=this.count+1;return new e((this.count*this.getX()+s)/l,(this.count*this.getY()+n)/l,(this.count*this.estimatedModuleSize+c)/l,l)},e}(gn),tg=function(){function i(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return i.prototype.getBottomLeft=function(){return this.bottomLeft},i.prototype.getTopLeft=function(){return this.topLeft},i.prototype.getTopRight=function(){return this.topRight},i}();var rd=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Ju=function(){function i(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return i.prototype.getImage=function(){return this.image},i.prototype.getPossibleCenters=function(){return this.possibleCenters},i.prototype.find=function(e){var n=null!=e&&void 0!==e.get(Gn.TRY_HARDER),s=null!=e&&void 0!==e.get(Gn.PURE_BARCODE),c=this.image,l=c.getHeight(),g=c.getWidth(),m=Math.floor(3*l/(4*i.MAX_MODULES));(m<i.MIN_SKIP||n)&&(m=i.MIN_SKIP);for(var y=!1,b=new Int32Array(5),P=m-1;P<l&&!y;P+=m){b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0;for(var B=0,z=0;z<g;z++)if(c.get(z,P))!(1&~B)&&B++,b[B]++;else if(1&B)b[B]++;else if(4===B)if(i.foundPatternCross(b)){if(!0!==this.handlePossibleCenter(b,P,z,s)){b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,B=3;continue}if(m=2,!0===this.hasSkipped)y=this.haveMultiplyConfirmedCenters();else{var ae=this.findRowSkip();ae>b[2]&&(P+=ae-b[2]-m,z=g-1)}B=0,b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0}else b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,B=3;else b[++B]++;i.foundPatternCross(b)&&!0===this.handlePossibleCenter(b,P,g,s)&&(m=b[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}var Ee=this.selectBestPatterns();return gn.orderBestPatterns(Ee),new tg(Ee)},i.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},i.foundPatternCross=function(e){for(var n=0,s=0;s<5;s++){var c=e[s];if(0===c)return!1;n+=c}if(n<7)return!1;var l=n/7,g=l/2;return Math.abs(l-e[0])<g&&Math.abs(l-e[1])<g&&Math.abs(3*l-e[2])<3*g&&Math.abs(l-e[3])<g&&Math.abs(l-e[4])<g},i.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},i.prototype.crossCheckDiagonal=function(e,n,s,c){for(var l=this.getCrossCheckStateCount(),g=0,m=this.image;e>=g&&n>=g&&m.get(n-g,e-g);)l[2]++,g++;if(e<g||n<g)return!1;for(;e>=g&&n>=g&&!m.get(n-g,e-g)&&l[1]<=s;)l[1]++,g++;if(e<g||n<g||l[1]>s)return!1;for(;e>=g&&n>=g&&m.get(n-g,e-g)&&l[0]<=s;)l[0]++,g++;if(l[0]>s)return!1;var y=m.getHeight(),b=m.getWidth();for(g=1;e+g<y&&n+g<b&&m.get(n+g,e+g);)l[2]++,g++;if(e+g>=y||n+g>=b)return!1;for(;e+g<y&&n+g<b&&!m.get(n+g,e+g)&&l[3]<s;)l[3]++,g++;if(e+g>=y||n+g>=b||l[3]>=s)return!1;for(;e+g<y&&n+g<b&&m.get(n+g,e+g)&&l[4]<s;)l[4]++,g++;return!(l[4]>=s)&&Math.abs(l[0]+l[1]+l[2]+l[3]+l[4]-c)<2*c&&i.foundPatternCross(l)},i.prototype.crossCheckVertical=function(e,n,s,c){for(var l=this.image,g=l.getHeight(),m=this.getCrossCheckStateCount(),y=e;y>=0&&l.get(n,y);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!l.get(n,y)&&m[1]<=s;)m[1]++,y--;if(y<0||m[1]>s)return NaN;for(;y>=0&&l.get(n,y)&&m[0]<=s;)m[0]++,y--;if(m[0]>s)return NaN;for(y=e+1;y<g&&l.get(n,y);)m[2]++,y++;if(y===g)return NaN;for(;y<g&&!l.get(n,y)&&m[3]<s;)m[3]++,y++;if(y===g||m[3]>=s)return NaN;for(;y<g&&l.get(n,y)&&m[4]<s;)m[4]++,y++;return m[4]>=s||5*Math.abs(m[0]+m[1]+m[2]+m[3]+m[4]-c)>=2*c?NaN:i.foundPatternCross(m)?i.centerFromEnd(m,y):NaN},i.prototype.crossCheckHorizontal=function(e,n,s,c){for(var l=this.image,g=l.getWidth(),m=this.getCrossCheckStateCount(),y=e;y>=0&&l.get(y,n);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!l.get(y,n)&&m[1]<=s;)m[1]++,y--;if(y<0||m[1]>s)return NaN;for(;y>=0&&l.get(y,n)&&m[0]<=s;)m[0]++,y--;if(m[0]>s)return NaN;for(y=e+1;y<g&&l.get(y,n);)m[2]++,y++;if(y===g)return NaN;for(;y<g&&!l.get(y,n)&&m[3]<s;)m[3]++,y++;if(y===g||m[3]>=s)return NaN;for(;y<g&&l.get(y,n)&&m[4]<s;)m[4]++,y++;return m[4]>=s||5*Math.abs(m[0]+m[1]+m[2]+m[3]+m[4]-c)>=c?NaN:i.foundPatternCross(m)?i.centerFromEnd(m,y):NaN},i.prototype.handlePossibleCenter=function(e,n,s,c){var l=e[0]+e[1]+e[2]+e[3]+e[4],g=i.centerFromEnd(e,s),m=this.crossCheckVertical(n,Math.floor(g),e[2],l);if(!isNaN(m)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(m),e[2],l),!isNaN(g)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(g),e[2],l)))){for(var y=l/7,b=!1,P=this.possibleCenters,B=0,z=P.length;B<z;B++){var K=P[B];if(K.aboutEquals(y,m,g)){P[B]=K.combineEstimate(m,g,y),b=!0;break}}if(!b){var ae=new km(g,m,y);P.push(ae),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(ae)}return!0}return!1},i.prototype.findRowSkip=function(){var e,n;if(this.possibleCenters.length<=1)return 0;var c=null;try{for(var l=rd(this.possibleCenters),g=l.next();!g.done;g=l.next()){var m=g.value;if(m.getCount()>=i.CENTER_QUORUM){if(null!=c)return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-m.getX())-Math.abs(c.getY()-m.getY()))/2);c=m}}}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return 0},i.prototype.haveMultiplyConfirmedCenters=function(){var e,n,s,c,l=0,g=0,m=this.possibleCenters.length;try{for(var y=rd(this.possibleCenters),b=y.next();!b.done;b=y.next())(P=b.value).getCount()>=i.CENTER_QUORUM&&(l++,g+=P.getEstimatedModuleSize())}catch(Ee){e={error:Ee}}finally{try{b&&!b.done&&(n=y.return)&&n.call(y)}finally{if(e)throw e.error}}if(l<3)return!1;var B=g/m,z=0;try{for(var K=rd(this.possibleCenters),ae=K.next();!ae.done;ae=K.next()){var P=ae.value;z+=Math.abs(P.getEstimatedModuleSize()-B)}}catch(Ee){s={error:Ee}}finally{try{ae&&!ae.done&&(c=K.return)&&c.call(K)}finally{if(s)throw s.error}}return z<=.05*g},i.prototype.selectBestPatterns=function(){var e,n,s,c,l=this.possibleCenters.length;if(l<3)throw new We;var m,g=this.possibleCenters;if(l>3){var y=0,b=0;try{for(var P=rd(this.possibleCenters),B=P.next();!B.done;B=P.next()){var K=B.value.getEstimatedModuleSize();y+=K,b+=K*K}}catch(Lt){e={error:Lt}}finally{try{B&&!B.done&&(n=P.return)&&n.call(P)}finally{if(e)throw e.error}}m=y/l;var ae=Math.sqrt(b/l-m*m);g.sort(function(Lt,$t){var Jt=Math.abs($t.getEstimatedModuleSize()-m),mn=Math.abs(Lt.getEstimatedModuleSize()-m);return Jt<mn?-1:Jt>mn?1:0});for(var Ee=Math.max(.2*m,ae),Me=0;Me<g.length&&g.length>3;Me++)Math.abs(g[Me].getEstimatedModuleSize()-m)>Ee&&(g.splice(Me,1),Me--)}if(g.length>3){y=0;try{for(var ke=rd(g),Ye=ke.next();!Ye.done;Ye=ke.next())y+=Ye.value.getEstimatedModuleSize()}catch($t){s={error:$t}}finally{try{Ye&&!Ye.done&&(c=ke.return)&&c.call(ke)}finally{if(s)throw s.error}}m=y/g.length,g.sort(function($t,Jt){if(Jt.getCount()===$t.getCount()){var mn=Math.abs(Jt.getEstimatedModuleSize()-m),nr=Math.abs($t.getEstimatedModuleSize()-m);return mn<nr?1:mn>nr?-1:0}return Jt.getCount()-$t.getCount()}),g.splice(3)}return[g[0],g[1],g[2]]},i.CENTER_QUORUM=2,i.MIN_SKIP=3,i.MAX_MODULES=57,i}(),ng=function(){function i(e){this.image=e}return i.prototype.getImage=function(){return this.image},i.prototype.getResultPointCallback=function(){return this.resultPointCallback},i.prototype.detect=function(e){this.resultPointCallback=null==e?null:e.get(Gn.NEED_RESULT_POINT_CALLBACK);var s=new Ju(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(s)},i.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),s=e.getTopRight(),c=e.getBottomLeft(),l=this.calculateModuleSize(n,s,c);if(l<1)throw new We("No pattern found in proccess finder.");var g=i.computeDimension(n,s,c,l),m=Fs.getProvisionalVersionForDimension(g),y=m.getDimensionForVersion()-7,b=null;if(m.getAlignmentPatternCenters().length>0)for(var P=s.getX()-n.getX()+c.getX(),B=s.getY()-n.getY()+c.getY(),z=1-3/y,K=Math.floor(n.getX()+z*(P-n.getX())),ae=Math.floor(n.getY()+z*(B-n.getY())),Ee=4;Ee<=16;Ee<<=1)try{b=this.findAlignmentInRegion(l,K,ae,Ee);break}catch(Ye){if(!(Ye instanceof We))throw Ye}var Me=i.createTransform(n,s,c,b,g),Le=i.sampleGrid(this.image,Me,g);return new pl(Le,null===b?[c,n,s]:[c,n,s,b])},i.createTransform=function(e,n,s,c,l){var m,y,b,P,g=l-3.5;return null!==c?(m=c.getX(),y=c.getY(),P=b=g-3):(m=n.getX()-e.getX()+s.getX(),y=n.getY()-e.getY()+s.getY(),b=g,P=g),$c.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,b,P,3.5,g,e.getX(),e.getY(),n.getX(),n.getY(),m,y,s.getX(),s.getY())},i.sampleGrid=function(e,n,s){return Q.getInstance().sampleGridWithTransform(e,s,s,n)},i.computeDimension=function(e,n,s,c){var l=Ir.round(gn.distance(e,n)/c),g=Ir.round(gn.distance(e,s)/c),m=Math.floor((l+g)/2)+7;switch(3&m){case 0:m++;break;case 2:m--;break;case 3:throw new We("Dimensions could be not found.")}return m},i.prototype.calculateModuleSize=function(e,n,s){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,s))/2},i.prototype.calculateModuleSizeOneWay=function(e,n){var s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(s)?c/7:isNaN(c)?s/7:(s+c)/14},i.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,s,c){var l=this.sizeOfBlackWhiteBlackRun(e,n,s,c),g=1,m=e-(s-e);m<0?(g=e/(e-m),m=0):m>=this.image.getWidth()&&(g=(this.image.getWidth()-1-e)/(m-e),m=this.image.getWidth()-1);var y=Math.floor(n-(c-n)*g);return g=1,y<0?(g=n/(n-y),y=0):y>=this.image.getHeight()&&(g=(this.image.getHeight()-1-n)/(y-n),y=this.image.getHeight()-1),m=Math.floor(e+(m-e)*g),(l+=this.sizeOfBlackWhiteBlackRun(e,n,m,y))-1},i.prototype.sizeOfBlackWhiteBlackRun=function(e,n,s,c){var l=Math.abs(c-n)>Math.abs(s-e);if(l){var g=e;e=n,n=g,g=s,s=c,c=g}for(var m=Math.abs(s-e),y=Math.abs(c-n),b=-m/2,P=e<s?1:-1,B=n<c?1:-1,z=0,K=s+P,ae=e,Ee=n;ae!==K;ae+=P){if(1===z===this.image.get(l?Ee:ae,l?ae:Ee)){if(2===z)return Ir.distance(ae,Ee,e,n);z++}if((b+=y)>0){if(Ee===c)break;Ee+=B,b-=m}}return 2===z?Ir.distance(s+P,c,e,n):NaN},i.prototype.findAlignmentInRegion=function(e,n,s,c){var l=Math.floor(c*e),g=Math.max(0,n-l),m=Math.min(this.image.getWidth()-1,n+l);if(m-g<3*e)throw new We("Alignment top exceeds estimated module size.");var y=Math.max(0,s-l),b=Math.min(this.image.getHeight()-1,s+l);if(b-y<3*e)throw new We("Alignment bottom exceeds estimated module size.");return new eg(this.image,g,y,m-g,b-y,e,this.resultPointCallback).find()},i}(),zd=function(){function i(){this.decoder=new Gh}return i.prototype.getDecoder=function(){return this.decoder},i.prototype.decode=function(e,n){var s,c;if(null!=n&&void 0!==n.get(Gn.PURE_BARCODE)){var l=i.extractPureBits(e.getBlackMatrix());s=this.decoder.decodeBitMatrix(l,n),c=i.NO_POINTS}else{var g=new ng(e.getBlackMatrix()).detect(n);s=this.decoder.decodeBitMatrix(g.getBits(),n),c=g.getPoints()}s.getOther()instanceof jh&&s.getOther().applyMirroredCorrection(c);var m=new ao(s.getText(),s.getRawBytes(),void 0,c,cn.QR_CODE,void 0),y=s.getByteSegments();null!==y&&m.putMetadata(Yi.BYTE_SEGMENTS,y);var b=s.getECLevel();return null!==b&&m.putMetadata(Yi.ERROR_CORRECTION_LEVEL,b),s.hasStructuredAppend()&&(m.putMetadata(Yi.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),m.putMetadata(Yi.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),m},i.prototype.reset=function(){},i.extractPureBits=function(e){var n=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(null===n||null===s)throw new We;var c=this.moduleSize(n,e),l=n[1],g=s[1],m=n[0],y=s[0];if(m>=y||l>=g)throw new We;if(g-l!=y-m&&(y=m+(g-l))>=e.getWidth())throw new We;var b=Math.round((y-m+1)/c),P=Math.round((g-l+1)/c);if(b<=0||P<=0)throw new We;if(P!==b)throw new We;var B=Math.floor(c/2);l+=B;var z=(m+=B)+Math.floor((b-1)*c)-y;if(z>0){if(z>B)throw new We;m-=z}var K=l+Math.floor((P-1)*c)-g;if(K>0){if(K>B)throw new We;l-=K}for(var ae=new rr(b,P),Ee=0;Ee<P;Ee++)for(var Me=l+Math.floor(Ee*c),Le=0;Le<b;Le++)e.get(m+Math.floor(Le*c),Me)&&ae.set(Le,Ee);return ae},i.moduleSize=function(e,n){for(var s=n.getHeight(),c=n.getWidth(),l=e[0],g=e[1],m=!0,y=0;l<c&&g<s;){if(m!==n.get(l,g)){if(5==++y)break;m=!m}l++,g++}if(l===c||g===s)throw new We;return(l-e[0])/7},i.NO_POINTS=new Array,i}(),ti=function(){function i(){}return i.prototype.PDF417Common=function(){},i.getBitCountSum=function(e){return Ir.sum(e)},i.toIntArray=function(e){var n,s;if(null==e||!e.length)return i.EMPTY_INT_ARRAY;var c=new Int32Array(e.length),l=0;try{for(var g=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),m=g.next();!m.done;m=g.next())c[l++]=m.value}catch(b){n={error:b}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}return c},i.getCodeword=function(e){var n=Jr.binarySearch(i.SYMBOL_TABLE,262143&e);return n<0?-1:(i.CODEWORD_TABLE[n]-1)%i.NUMBER_OF_CODEWORDS},i.MAX_CODEWORDS_IN_BARCODE=(i.NUMBER_OF_CODEWORDS=929)-1,i.MIN_ROWS_IN_BARCODE=3,i.MAX_ROWS_IN_BARCODE=90,i.MODULES_IN_CODEWORD=17,i.MODULES_IN_STOP_PATTERN=18,i.BARS_IN_MODULE=8,i.EMPTY_INT_ARRAY=new Int32Array([]),i.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),i.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),i}(),iu=function(){function i(e,n){this.bits=e,this.points=n}return i.prototype.getBits=function(){return this.bits},i.prototype.getPoints=function(){return this.points},i}();var rg=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const qh=function(){function i(){}return i.detectMultiple=function(e,n,s){var c=e.getBlackMatrix(),l=i.detect(s,c);return l.length||((c=c.clone()).rotate180(),l=i.detect(s,c)),new iu(c,l)},i.detect=function(e,n){for(var s,c,l=new Array,g=0,m=0,y=!1;g<n.getHeight();){var b=i.findVertices(n,g,m);if(null!=b[0]||null!=b[3]){if(y=!0,l.push(b),!e)break;null!=b[2]?(m=Math.trunc(b[2].getX()),g=Math.trunc(b[2].getY())):(m=Math.trunc(b[4].getX()),g=Math.trunc(b[4].getY()))}else{if(!y)break;y=!1,m=0;try{for(var P=(s=void 0,rg(l)),B=P.next();!B.done;B=P.next()){var z=B.value;null!=z[1]&&(g=Math.trunc(Math.max(g,z[1].getY()))),null!=z[3]&&(g=Math.max(g,Math.trunc(z[3].getY())))}}catch(K){s={error:K}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}g+=i.ROW_STEP}}return l},i.findVertices=function(e,n,s){var c=e.getHeight(),l=e.getWidth(),g=new Array(8);return i.copyToResult(g,i.findRowsWithPattern(e,c,l,n,s,i.START_PATTERN),i.INDEXES_START_PATTERN),null!=g[4]&&(s=Math.trunc(g[4].getX()),n=Math.trunc(g[4].getY())),i.copyToResult(g,i.findRowsWithPattern(e,c,l,n,s,i.STOP_PATTERN),i.INDEXES_STOP_PATTERN),g},i.copyToResult=function(e,n,s){for(var c=0;c<s.length;c++)e[s[c]]=n[c]},i.findRowsWithPattern=function(e,n,s,c,l,g){for(var m=new Array(4),y=!1,b=new Int32Array(g.length);c<n;c+=i.ROW_STEP)if(null!=(P=i.findGuardPattern(e,l,c,s,!1,g,b))){for(;c>0;){if(null==(B=i.findGuardPattern(e,l,--c,s,!1,g,b))){c++;break}P=B}m[0]=new gn(P[0],c),m[1]=new gn(P[1],c),y=!0;break}var z=c+1;if(y){for(var K=0,B=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);z<n;z++){var P;if(null!=(P=i.findGuardPattern(e,B[0],z,s,!1,g,b))&&Math.abs(B[0]-P[0])<i.MAX_PATTERN_DRIFT&&Math.abs(B[1]-P[1])<i.MAX_PATTERN_DRIFT)B=P,K=0;else{if(K>i.SKIPPED_ROW_COUNT_MAX)break;K++}}m[2]=new gn(B[0],z-=K+1),m[3]=new gn(B[1],z)}return z-c<i.BARCODE_MIN_HEIGHT&&Jr.fill(m,null),m},i.findGuardPattern=function(e,n,s,c,l,g,m){Jr.fillWithin(m,0,m.length,0);for(var y=n,b=0;e.get(y,s)&&y>0&&b++<i.MAX_PIXEL_DRIFT;)y--;for(var P=y,B=0,z=g.length,K=l;P<c;P++)if(e.get(P,s)!==K)m[B]++;else{if(B===z-1){if(i.patternMatchVariance(m,g,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE)return new Int32Array([y,P]);y+=m[0]+m[1],Ur.arraycopy(m,2,m,0,B-1),m[B-1]=0,m[B]=0,B--}else B++;m[B]=1,K=!K}return B===z-1&&i.patternMatchVariance(m,g,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE?new Int32Array([y,P-1]):null},i.patternMatchVariance=function(e,n,s){for(var c=e.length,l=0,g=0,m=0;m<c;m++)l+=e[m],g+=n[m];if(l<g)return 1/0;var y=l/g;s*=y;for(var b=0,P=0;P<c;P++){var B=e[P],z=n[P]*y,K=B>z?B-z:z-B;if(K>s)return 1/0;b+=K}return b/l},i.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),i.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),i.MAX_AVG_VARIANCE=.42,i.MAX_INDIVIDUAL_VARIANCE=.8,i.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),i.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),i.MAX_PIXEL_DRIFT=3,i.MAX_PATTERN_DRIFT=5,i.SKIPPED_ROW_COUNT_MAX=25,i.ROW_STEP=5,i.BARCODE_MIN_HEIGHT=10,i}(),Su=function(){function i(e,n){if(0===n.length)throw new fn;this.field=e;var s=n.length;if(s>1&&0===n[0]){for(var c=1;c<s&&0===n[c];)c++;c===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-c),Ur.arraycopy(n,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return i.prototype.getCoefficients=function(){return this.coefficients},i.prototype.getDegree=function(){return this.coefficients.length-1},i.prototype.isZero=function(){return 0===this.coefficients[0]},i.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},i.prototype.evaluateAt=function(e){var n,s;if(0===e)return this.getCoefficient(0);if(1===e){var c=0;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.coefficients),g=l.next();!g.done;g=l.next())c=this.field.add(c,g.value)}catch(B){n={error:B}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return c}for(var y=this.coefficients[0],b=this.coefficients.length,P=1;P<b;P++)y=this.field.add(this.field.multiply(e,y),this.coefficients[P]);return y},i.prototype.add=function(e){if(!this.field.equals(e.field))throw new fn("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,s=e.coefficients;if(n.length>s.length){var c=n;n=s,s=c}var l=new Int32Array(s.length),g=s.length-n.length;Ur.arraycopy(s,0,l,0,g);for(var m=g;m<s.length;m++)l[m]=this.field.add(n[m-g],s[m]);return new i(this.field,l)},i.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new fn("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},i.prototype.multiply=function(e){return e instanceof i?this.multiplyOther(e):this.multiplyScalar(e)},i.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new fn("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new i(this.field,new Int32Array([0]));for(var n=this.coefficients,s=n.length,c=e.coefficients,l=c.length,g=new Int32Array(s+l-1),m=0;m<s;m++)for(var y=n[m],b=0;b<l;b++)g[m+b]=this.field.add(g[m+b],this.field.multiply(y,c[b]));return new i(this.field,g)},i.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),s=0;s<e;s++)n[s]=this.field.subtract(0,this.coefficients[s]);return new i(this.field,n)},i.prototype.multiplyScalar=function(e){if(0===e)return new i(this.field,new Int32Array([0]));if(1===e)return this;for(var n=this.coefficients.length,s=new Int32Array(n),c=0;c<n;c++)s[c]=this.field.multiply(this.coefficients[c],e);return new i(this.field,s)},i.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new fn;if(0===n)return new i(this.field,new Int32Array([0]));for(var s=this.coefficients.length,c=new Int32Array(s+e),l=0;l<s;l++)c[l]=this.field.multiply(this.coefficients[l],n);return new i(this.field,c)},i.prototype.toString=function(){for(var e=new hn,n=this.getDegree();n>=0;n--){var s=this.getCoefficient(n);0!==s&&(s<0?(e.append(" - "),s=-s):e.length()>0&&e.append(" + "),(0===n||1!==s)&&e.append(s),0!==n&&(1===n?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},i}(),og=function(){function i(){}return i.prototype.add=function(e,n){return(e+n)%this.modulus},i.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},i.prototype.exp=function(e){return this.expTable[e]},i.prototype.log=function(e){if(0===e)throw new fn;return this.logTable[e]},i.prototype.inverse=function(e){if(0===e)throw new Gc;return this.expTable[this.modulus-this.logTable[e]-1]},i.prototype.multiply=function(e,n){return 0===e||0===n?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},i.prototype.getSize=function(){return this.modulus},i.prototype.equals=function(e){return e===this},i}();var qd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const sg=function(i){function e(n,s){var c=i.call(this)||this;c.modulus=n,c.expTable=new Int32Array(n),c.logTable=new Int32Array(n);for(var l=1,g=0;g<n;g++)c.expTable[g]=l,l=l*s%n;for(g=0;g<n-1;g++)c.logTable[c.expTable[g]]=g;return c.zero=new Su(c,new Int32Array([0])),c.one=new Su(c,new Int32Array([1])),c}return qd(e,i),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,s){if(n<0)throw new fn;if(0===s)return this.zero;var c=new Int32Array(n+1);return c[0]=s,new Su(this,c)},e.PDF417_GF=new e(ti.NUMBER_OF_CODEWORDS,3),e}(og),Lm=function(){function i(){this.field=sg.PDF417_GF}return i.prototype.decode=function(e,n,s){for(var c,l,g=new Su(this.field,e),m=new Int32Array(n),y=!1,b=n;b>0;b--){var P=g.evaluateAt(this.field.exp(b));m[n-b]=P,0!==P&&(y=!0)}if(!y)return 0;var B=this.field.getOne();if(null!=s)try{for(var z=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),K=z.next();!K.done;K=z.next()){var Ee=this.field.exp(e.length-1-K.value),Me=new Su(this.field,new Int32Array([this.field.subtract(0,Ee),1]));B=B.multiply(Me)}}catch(mn){c={error:mn}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}var Le=new Su(this.field,m),ke=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),Le,n),Ye=ke[0],at=ke[1],Lt=this.findErrorLocations(Ye),$t=this.findErrorMagnitudes(at,Ye,Lt);for(b=0;b<Lt.length;b++){var Jt=e.length-1-this.field.log(Lt[b]);if(Jt<0)throw li.getChecksumInstance();e[Jt]=this.field.subtract(e[Jt],$t[b])}return Lt.length},i.prototype.runEuclideanAlgorithm=function(e,n,s){if(e.getDegree()<n.getDegree()){var c=e;e=n,n=c}for(var l=e,g=n,m=this.field.getZero(),y=this.field.getOne();g.getDegree()>=Math.round(s/2);){var b=l,P=m;if(m=y,(l=g).isZero())throw li.getChecksumInstance();g=b;for(var B=this.field.getZero(),z=l.getCoefficient(l.getDegree()),K=this.field.inverse(z);g.getDegree()>=l.getDegree()&&!g.isZero();){var ae=g.getDegree()-l.getDegree(),Ee=this.field.multiply(g.getCoefficient(g.getDegree()),K);B=B.add(this.field.buildMonomial(ae,Ee)),g=g.subtract(l.multiplyByMonomial(ae,Ee))}y=B.multiply(m).subtract(P).negative()}var Me=y.getCoefficient(0);if(0===Me)throw li.getChecksumInstance();var Le=this.field.inverse(Me);return[y.multiply(Le),g.multiply(Le)]},i.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),s=new Int32Array(n),c=0,l=1;l<this.field.getSize()&&c<n;l++)0===e.evaluateAt(l)&&(s[c]=this.field.inverse(l),c++);if(c!==n)throw li.getChecksumInstance();return s},i.prototype.findErrorMagnitudes=function(e,n,s){for(var c=n.getDegree(),l=new Int32Array(c),g=1;g<=c;g++)l[c-g]=this.field.multiply(g,n.getCoefficient(g));var m=new Su(this.field,l),y=s.length,b=new Int32Array(y);for(g=0;g<y;g++){var P=this.field.inverse(s[g]),B=this.field.subtract(0,e.evaluateAt(P)),z=this.field.inverse(m.evaluateAt(P));b[g]=this.field.multiply(B,z)}return b},i}(),Vm=function(){function i(e,n,s,c,l){e instanceof i?this.constructor_2(e):this.constructor_1(e,n,s,c,l)}return i.prototype.constructor_1=function(e,n,s,c,l){var g=null==n||null==s,m=null==c||null==l;if(g&&m)throw new We;g?(n=new gn(0,c.getY()),s=new gn(0,l.getY())):m&&(c=new gn(e.getWidth()-1,n.getY()),l=new gn(e.getWidth()-1,s.getY())),this.image=e,this.topLeft=n,this.bottomLeft=s,this.topRight=c,this.bottomRight=l,this.minX=Math.trunc(Math.min(n.getX(),s.getX())),this.maxX=Math.trunc(Math.max(c.getX(),l.getX())),this.minY=Math.trunc(Math.min(n.getY(),c.getY())),this.maxY=Math.trunc(Math.max(s.getY(),l.getY()))},i.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},i.merge=function(e,n){return null==e?n:null==n?e:new i(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},i.prototype.addMissingRows=function(e,n,s){var c=this.topLeft,l=this.bottomLeft,g=this.topRight,m=this.bottomRight;if(e>0){var y=s?this.topLeft:this.topRight,b=Math.trunc(y.getY()-e);b<0&&(b=0);var P=new gn(y.getX(),b);s?c=P:g=P}if(n>0){var B=s?this.bottomLeft:this.bottomRight,z=Math.trunc(B.getY()+n);z>=this.image.getHeight()&&(z=this.image.getHeight()-1);var K=new gn(B.getX(),z);s?l=K:m=K}return new i(this.image,c,l,g,m)},i.prototype.getMinX=function(){return this.minX},i.prototype.getMaxX=function(){return this.maxX},i.prototype.getMinY=function(){return this.minY},i.prototype.getMaxY=function(){return this.maxY},i.prototype.getTopLeft=function(){return this.topLeft},i.prototype.getTopRight=function(){return this.topRight},i.prototype.getBottomLeft=function(){return this.bottomLeft},i.prototype.getBottomRight=function(){return this.bottomRight},i}(),ou=function(){function i(e,n,s,c){this.columnCount=e,this.errorCorrectionLevel=c,this.rowCountUpperPart=n,this.rowCountLowerPart=s,this.rowCount=n+s}return i.prototype.getColumnCount=function(){return this.columnCount},i.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},i.prototype.getRowCount=function(){return this.rowCount},i.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},i.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},i}(),cg=function(){function i(){this.buffer=""}return i.form=function(e,n){var s=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function c(g,m,y,b,P,B){if("%%"===g)return"%";if(void 0!==n[++s]){g=b?parseInt(b.substr(1)):void 0;var K,z=P?parseInt(P.substr(1)):void 0;switch(B){case"s":K=n[s];break;case"c":K=n[s][0];break;case"f":K=parseFloat(n[s]).toFixed(g);break;case"p":K=parseFloat(n[s]).toPrecision(g);break;case"e":K=parseFloat(n[s]).toExponential(g);break;case"x":K=parseInt(n[s]).toString(z||16);break;case"d":K=parseFloat(parseInt(n[s],z||10).toPrecision(g)).toFixed(0)}K="object"==typeof K?JSON.stringify(K):(+K).toString(z);for(var ae=parseInt(y),Ee=y&&y[0]+""=="0"?"0":" ";K.length<ae;)K=void 0!==m?K+Ee:Ee+K;return K}})},i.prototype.format=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];this.buffer+=i.form(e,n)},i.prototype.toString=function(){return this.buffer},i}(),$f=function(){function i(e){this.boundingBox=new Vm(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return i.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(null!=n)return n;for(var s=1;s<i.MAX_NEARBY_DISTANCE;s++){var c=this.imageRowToCodewordIndex(e)-s;if(c>=0&&null!=(n=this.codewords[c])||(c=this.imageRowToCodewordIndex(e)+s)<this.codewords.length&&null!=(n=this.codewords[c]))return n}return null},i.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},i.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},i.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},i.prototype.getBoundingBox=function(){return this.boundingBox},i.prototype.getCodewords=function(){return this.codewords},i.prototype.toString=function(){var e,n,s=new cg,c=0;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.codewords),g=l.next();!g.done;g=l.next()){var m=g.value;null!=m?s.format("%3d: %3d|%3d%n",c++,m.getRowNumber(),m.getValue()):s.format("%3d:    |   %n",c++)}}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s.toString()},i.MAX_NEARBY_DISTANCE=5,i}();var jm=function(i,e){var n="function"==typeof Symbol&&i[Symbol.iterator];if(!n)return i;var c,g,s=n.call(i),l=[];try{for(;(void 0===e||e-- >0)&&!(c=s.next()).done;)l.push(c.value)}catch(m){g={error:m}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(g)throw g.error}}return l};const zf=function(){function i(){this.values=new Map}return i.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);null==n&&(n=0),n++,this.values.set(e,n)},i.prototype.getValue=function(){var e,n,s=-1,c=new Array,l=function(B,z){var K_getKey=function(){return B},K_getValue=function(){return z};K_getValue()>s?(s=K_getValue(),(c=[]).push(K_getKey())):K_getValue()===s&&c.push(K_getKey())};try{for(var g=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.values.entries()),m=g.next();!m.done;m=g.next()){var y=jm(m.value,2);l(y[0],y[1])}}catch(B){e={error:B}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(e)throw e.error}}return ti.toIntArray(c)},i.prototype.getConfidence=function(e){return this.values.get(e)},i}();var Dc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),lg=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Wf=function(i){function e(n,s){var c=i.call(this,n)||this;return c._isLeft=s,c}return Dc(e,i),e.prototype.setRowNumbers=function(){var n,s;try{for(var c=lg(this.getCodewords()),l=c.next();!l.done;l=c.next()){var g=l.value;g?.setRowNumberAsRowIndicatorColumn()}}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,n);for(var c=this.getBoundingBox(),l=this._isLeft?c.getTopLeft():c.getTopRight(),g=this._isLeft?c.getBottomLeft():c.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(l.getY())),y=this.imageRowToCodewordIndex(Math.trunc(g.getY())),b=-1,P=1,B=0,z=m;z<y;z++)if(null!=s[z]){var K=s[z],ae=K.getRowNumber()-b;if(0===ae)B++;else if(1===ae)P=Math.max(P,B),B=1,b=K.getRowNumber();else if(ae<0||K.getRowNumber()>=n.getRowCount()||ae>z)s[z]=null;else{for(var Ee,Me=(Ee=P>2?(P-2)*ae:ae)>=z,Le=1;Le<=Ee&&!Me;Le++)Me=null!=s[z-Le];Me?s[z]=null:(b=K.getRowNumber(),B=1)}}},e.prototype.getRowHeights=function(){var n,s,c=this.getBarcodeMetadata();if(null==c)return null;this.adjustIncompleteIndicatorColumnRowNumbers(c);var l=new Int32Array(c.getRowCount());try{for(var g=lg(this.getCodewords()),m=g.next();!m.done;m=g.next()){var y=m.value;if(null!=y){var b=y.getRowNumber();if(b>=l.length)continue;l[b]++}}}catch(P){n={error:P}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}return l},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var s=this.getBoundingBox(),c=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(l.getY())),y=this.getCodewords(),b=-1,P=1,B=0,z=g;z<m;z++)if(null!=y[z]){var K=y[z];K.setRowNumberAsRowIndicatorColumn();var ae=K.getRowNumber()-b;0===ae?B++:1===ae?(P=Math.max(P,B),B=1,b=K.getRowNumber()):K.getRowNumber()>=n.getRowCount()?y[z]=null:(b=K.getRowNumber(),B=1)}},e.prototype.getBarcodeMetadata=function(){var n,s,c=this.getCodewords(),l=new zf,g=new zf,m=new zf,y=new zf;try{for(var b=lg(c),P=b.next();!P.done;P=b.next()){var B=P.value;if(null!=B){B.setRowNumberAsRowIndicatorColumn();var z=B.getValue()%30,K=B.getRowNumber();switch(this._isLeft||(K+=2),K%3){case 0:g.setValue(3*z+1);break;case 1:y.setValue(z/3),m.setValue(z%3);break;case 2:l.setValue(z+1)}}}}catch(Ee){n={error:Ee}}finally{try{P&&!P.done&&(s=b.return)&&s.call(b)}finally{if(n)throw n.error}}if(0===l.getValue().length||0===g.getValue().length||0===m.getValue().length||0===y.getValue().length||l.getValue()[0]<1||g.getValue()[0]+m.getValue()[0]<ti.MIN_ROWS_IN_BARCODE||g.getValue()[0]+m.getValue()[0]>ti.MAX_ROWS_IN_BARCODE)return null;var ae=new ou(l.getValue()[0],g.getValue()[0],m.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(c,ae),ae},e.prototype.removeIncorrectCodewords=function(n,s){for(var c=0;c<n.length;c++){var l=n[c];if(null!=n[c]){var g=l.getValue()%30,m=l.getRowNumber();if(m>s.getRowCount()){n[c]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:3*g+1!==s.getRowCountUpperPart()&&(n[c]=null);break;case 1:(Math.trunc(g/3)!==s.getErrorCorrectionLevel()||g%3!==s.getRowCountLowerPart())&&(n[c]=null);break;case 2:g+1!==s.getColumnCount()&&(n[c]=null)}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+i.prototype.toString.call(this)},e}($f),dg=function(){function i(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return i.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var n,e=ti.MAX_CODEWORDS_IN_BARCODE;do{n=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<n);return this.detectionResultColumns},i.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},i.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var s=this.detectionResultColumns[n].getCodewords(),c=0;c<s.length;c++)null!=s[c]&&(s[c].hasValidRowNumber()||this.adjustRowNumbers(n,c,s));return e},i.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},i.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),s=0;s<e.length;s++)if(null!=e[s]&&null!=n[s]&&e[s].getRowNumber()===n[s].getRowNumber())for(var c=1;c<=this.barcodeColumnCount;c++){var l=this.detectionResultColumns[c].getCodewords()[s];null!=l&&(l.setRowNumber(e[s].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[s]=null))}},i.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),s=0;s<n.length;s++)if(null!=n[s])for(var c=n[s].getRowNumber(),l=0,g=this.barcodeColumnCount+1;g>0&&l<this.ADJUST_ROW_NUMBER_SKIP;g--){var m=this.detectionResultColumns[g].getCodewords()[s];null!=m&&(l=i.adjustRowNumberIfValid(c,l,m),m.hasValidRowNumber()||e++)}return e},i.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),s=0;s<n.length;s++)if(null!=n[s])for(var c=n[s].getRowNumber(),l=0,g=1;g<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;g++){var m=this.detectionResultColumns[g].getCodewords()[s];null!=m&&(l=i.adjustRowNumberIfValid(c,l,m),m.hasValidRowNumber()||e++)}return e},i.adjustRowNumberIfValid=function(e,n,s){return null==s||s.hasValidRowNumber()||(s.isValidRowNumber(e)?(s.setRowNumber(e),n=0):++n),n},i.prototype.adjustRowNumbers=function(e,n,s){var c,l;if(null!=this.detectionResultColumns[e-1]){var g=s[n],m=this.detectionResultColumns[e-1].getCodewords(),y=m;null!=this.detectionResultColumns[e+1]&&(y=this.detectionResultColumns[e+1].getCodewords());var b=new Array(14);b[2]=m[n],b[3]=y[n],n>0&&(b[0]=s[n-1],b[4]=m[n-1],b[5]=y[n-1]),n>1&&(b[8]=s[n-2],b[10]=m[n-2],b[11]=y[n-2]),n<s.length-1&&(b[1]=s[n+1],b[6]=m[n+1],b[7]=y[n+1]),n<s.length-2&&(b[9]=s[n+2],b[12]=m[n+2],b[13]=y[n+2]);try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(b),B=P.next();!B.done;B=P.next())if(i.adjustRowNumber(g,B.value))return}catch(K){c={error:K}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}}},i.adjustRowNumber=function(e,n){return!(null==n||!n.hasValidRowNumber()||n.getBucket()!==e.getBucket()||(e.setRowNumber(n.getRowNumber()),0))},i.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},i.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},i.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},i.prototype.setBoundingBox=function(e){this.boundingBox=e},i.prototype.getBoundingBox=function(){return this.boundingBox},i.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},i.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},i.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new cg,s=0;s<e.getCodewords().length;s++){n.format("CW %3d:",s);for(var c=0;c<this.barcodeColumnCount+2;c++)if(null!=this.detectionResultColumns[c]){var l=this.detectionResultColumns[c].getCodewords()[s];null!=l?n.format(" %3d|%3d",l.getRowNumber(),l.getValue()):n.format("    |   ")}else n.format("    |   ");n.format("%n")}return n.toString()},i}(),Qh=function(){function i(e,n,s,c){this.rowNumber=i.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(s),this.value=Math.trunc(c)}return i.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},i.prototype.isValidRowNumber=function(e){return e!==i.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},i.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},i.prototype.getWidth=function(){return this.endX-this.startX},i.prototype.getStartX=function(){return this.startX},i.prototype.getEndX=function(){return this.endX},i.prototype.getBucket=function(){return this.bucket},i.prototype.getValue=function(){return this.value},i.prototype.getRowNumber=function(){return this.rowNumber},i.prototype.setRowNumber=function(e){this.rowNumber=e},i.prototype.toString=function(){return this.rowNumber+"|"+this.value},i.BARCODE_ROW_UNKNOWN=-1,i}(),Yh=function(){function i(){}return i.initialize=function(){for(var e=0;e<ti.SYMBOL_TABLE.length;e++)for(var n=ti.SYMBOL_TABLE[e],s=1&n,c=0;c<ti.BARS_IN_MODULE;c++){for(var l=0;(1&n)===s;)l+=1,n>>=1;s=1&n,i.RATIOS_TABLE[e]||(i.RATIOS_TABLE[e]=new Array(ti.BARS_IN_MODULE)),i.RATIOS_TABLE[e][ti.BARS_IN_MODULE-c-1]=Math.fround(l/ti.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},i.getDecodedValue=function(e){var n=i.getDecodedCodewordValue(i.sampleBitCounts(e));return-1!==n?n:i.getClosestDecodedValue(e)},i.sampleBitCounts=function(e){for(var n=Ir.sum(e),s=new Int32Array(ti.BARS_IN_MODULE),c=0,l=0,g=0;g<ti.MODULES_IN_CODEWORD;g++)l+e[c]<=n/(2*ti.MODULES_IN_CODEWORD)+g*n/ti.MODULES_IN_CODEWORD&&(l+=e[c],c++),s[c]++;return s},i.getDecodedCodewordValue=function(e){var n=i.getBitValue(e);return-1===ti.getCodeword(n)?-1:n},i.getBitValue=function(e){for(var n=0,s=0;s<e.length;s++)for(var c=0;c<e[s];c++)n=n<<1|(s%2==0?1:0);return Math.trunc(n)},i.getClosestDecodedValue=function(e){var n=Ir.sum(e),s=new Array(ti.BARS_IN_MODULE);if(n>1)for(var c=0;c<s.length;c++)s[c]=Math.fround(e[c]/n);var l=hl.MAX_VALUE,g=-1;this.bSymbolTableReady||i.initialize();for(var m=0;m<i.RATIOS_TABLE.length;m++){for(var y=0,b=i.RATIOS_TABLE[m],P=0;P<ti.BARS_IN_MODULE;P++){var B=Math.fround(b[P]-s[P]);if((y+=Math.fround(B*B))>=l)break}y<l&&(l=y,g=ti.SYMBOL_TABLE[m])}return g},i.bSymbolTableReady=!1,i.RATIOS_TABLE=new Array(ti.SYMBOL_TABLE.length).map(function(e){return new Array(ti.BARS_IN_MODULE)}),i}(),fg=function(){function i(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return i.prototype.getSegmentIndex=function(){return this.segmentIndex},i.prototype.setSegmentIndex=function(e){this.segmentIndex=e},i.prototype.getFileId=function(){return this.fileId},i.prototype.setFileId=function(e){this.fileId=e},i.prototype.getOptionalData=function(){return this.optionalData},i.prototype.setOptionalData=function(e){this.optionalData=e},i.prototype.isLastSegment=function(){return this.lastSegment},i.prototype.setLastSegment=function(e){this.lastSegment=e},i.prototype.getSegmentCount=function(){return this.segmentCount},i.prototype.setSegmentCount=function(e){this.segmentCount=e},i.prototype.getSender=function(){return this.sender||null},i.prototype.setSender=function(e){this.sender=e},i.prototype.getAddressee=function(){return this.addressee||null},i.prototype.setAddressee=function(e){this.addressee=e},i.prototype.getFileName=function(){return this.fileName},i.prototype.setFileName=function(e){this.fileName=e},i.prototype.getFileSize=function(){return this.fileSize},i.prototype.setFileSize=function(e){this.fileSize=e},i.prototype.getChecksum=function(){return this.checksum},i.prototype.setChecksum=function(e){this.checksum=e},i.prototype.getTimestamp=function(){return this.timestamp},i.prototype.setTimestamp=function(e){this.timestamp=e},i}(),cc=function(){function i(){}return i.parseLong=function(e,n){return void 0===n&&(n=void 0),parseInt(e,n)},i}();var S0=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const hg=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return S0(e,i),e.kind="NullPointerException",e}(Sn),cd=function(){function i(){}return i.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},i.prototype.writeBytesOffset=function(e,n,s){if(null==e)throw new hg;if(n<0||n>e.length||s<0||n+s>e.length||n+s<0)throw new yc;if(0!==s)for(var c=0;c<s;c++)this.write(e[n+c])},i.prototype.flush=function(){},i.prototype.close=function(){},i}();var Po=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Gm=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Po(e,i),e}(Sn);var pg=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Xf=function(i){function e(n){void 0===n&&(n=32);var s=i.call(this)||this;if(s.count=0,n<0)throw new fn("Negative initial size: "+n);return s.buf=new Uint8Array(n),s}return pg(e,i),e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var c=this.buf.length<<1;if(c-n<0&&(c=n),c<0){if(n<0)throw new Gm;c=cr.MAX_VALUE}this.buf=Jr.copyOfUint8Array(this.buf,c)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,s,c){if(s<0||s>n.length||c<0||s+c-n.length>0)throw new yc;this.ensureCapacity(this.count+c),Ur.arraycopy(n,s,this.buf,this.count,c),this.count+=c},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Jr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?"string"==typeof n?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(cd);var ud,fi=function(i){return i[i.ALPHA=0]="ALPHA",i[i.LOWER=1]="LOWER",i[i.MIXED=2]="MIXED",i[i.PUNCT=3]="PUNCT",i[i.ALPHA_SHIFT=4]="ALPHA_SHIFT",i[i.PUNCT_SHIFT=5]="PUNCT_SHIFT",i}(fi||{});function ep(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function au(i){if(typeof ud>"u"&&(ud=ep()),null===ud)throw new Error("BigInt is not supported!");return ud(i)}const np=function(){function i(){}return i.decode=function(e,n){var s=new hn(""),c=po.ISO8859_1;s.enableDecoding(c);for(var l=1,g=e[l++],m=new fg;l<e[0];){switch(g){case i.TEXT_COMPACTION_MODE_LATCH:l=i.textCompaction(e,l,s);break;case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:l=i.byteCompaction(g,e,c,l,s);break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(e[l++]);break;case i.NUMERIC_COMPACTION_MODE_LATCH:l=i.numericCompaction(e,l,s);break;case i.ECI_CHARSET:po.getCharacterSetECIByValue(e[l++]);break;case i.ECI_GENERAL_PURPOSE:l+=2;break;case i.ECI_USER_DEFINED:l++;break;case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=i.decodeMacroBlock(e,l,m);break;case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:throw new Zt;default:l--,l=i.textCompaction(e,l,s)}if(!(l<e.length))throw Zt.getFormatInstance();g=e[l++]}if(0===s.length())throw Zt.getFormatInstance();var b=new wc(null,s.toString(),null,n);return b.setOther(m),b},i.decodeMacroBlock=function(e,n,s){if(n+i.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Zt.getFormatInstance();for(var c=new Int32Array(i.NUMBER_OF_SEQUENCE_CODEWORDS),l=0;l<i.NUMBER_OF_SEQUENCE_CODEWORDS;l++,n++)c[l]=e[n];s.setSegmentIndex(cr.parseInt(i.decodeBase900toBase10(c,i.NUMBER_OF_SEQUENCE_CODEWORDS)));var g=new hn;n=i.textCompaction(e,n,g),s.setFileId(g.toString());var m=-1;for(e[n]===i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=n+1);n<e[0];)switch(e[n]){case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++n]){case i.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var y=new hn;n=i.textCompaction(e,n+1,y),s.setFileName(y.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var b=new hn;n=i.textCompaction(e,n+1,b),s.setSender(b.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var P=new hn;n=i.textCompaction(e,n+1,P),s.setAddressee(P.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var B=new hn;n=i.numericCompaction(e,n+1,B),s.setSegmentCount(cr.parseInt(B.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var z=new hn;n=i.numericCompaction(e,n+1,z),s.setTimestamp(cc.parseLong(z.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var K=new hn;n=i.numericCompaction(e,n+1,K),s.setChecksum(cr.parseInt(K.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var ae=new hn;n=i.numericCompaction(e,n+1,ae),s.setFileSize(cc.parseLong(ae.toString()));break;default:throw Zt.getFormatInstance()}break;case i.MACRO_PDF417_TERMINATOR:n++,s.setLastSegment(!0);break;default:throw Zt.getFormatInstance()}if(-1!==m){var Ee=n-m;s.isLastSegment()&&Ee--,s.setOptionalData(Jr.copyOfRange(e,m,m+Ee))}return n},i.textCompaction=function(e,n,s){for(var c=new Int32Array(2*(e[0]-n)),l=new Int32Array(2*(e[0]-n)),g=0,m=!1;n<e[0]&&!m;){var y=e[n++];if(y<i.TEXT_COMPACTION_MODE_LATCH)c[g]=y/30,c[g+1]=y%30,g+=2;else switch(y){case i.TEXT_COMPACTION_MODE_LATCH:c[g++]=i.TEXT_COMPACTION_MODE_LATCH;break;case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:n--,m=!0;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[g]=i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=e[n++],l[g]=y,g++}}return i.decodeTextCompaction(c,l,g,s),n},i.decodeTextCompaction=function(e,n,s,c){for(var l=fi.ALPHA,g=fi.ALPHA,m=0;m<s;){var y=e[m],b="";switch(l){case fi.ALPHA:if(y<26)b=String.fromCharCode(65+y);else switch(y){case 26:b=" ";break;case i.LL:l=fi.LOWER;break;case i.ML:l=fi.MIXED;break;case i.PS:g=l,l=fi.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=fi.ALPHA}break;case fi.LOWER:if(y<26)b=String.fromCharCode(97+y);else switch(y){case 26:b=" ";break;case i.AS:g=l,l=fi.ALPHA_SHIFT;break;case i.ML:l=fi.MIXED;break;case i.PS:g=l,l=fi.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=fi.ALPHA}break;case fi.MIXED:if(y<i.PL)b=i.MIXED_CHARS[y];else switch(y){case i.PL:l=fi.PUNCT;break;case 26:b=" ";break;case i.LL:l=fi.LOWER;break;case i.AL:l=fi.ALPHA;break;case i.PS:g=l,l=fi.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=fi.ALPHA}break;case fi.PUNCT:if(y<i.PAL)b=i.PUNCT_CHARS[y];else switch(y){case i.PAL:l=fi.ALPHA;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=fi.ALPHA}break;case fi.ALPHA_SHIFT:if(l=g,y<26)b=String.fromCharCode(65+y);else switch(y){case 26:b=" ";break;case i.TEXT_COMPACTION_MODE_LATCH:l=fi.ALPHA}break;case fi.PUNCT_SHIFT:if(l=g,y<i.PAL)b=i.PUNCT_CHARS[y];else switch(y){case i.PAL:l=fi.ALPHA;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=fi.ALPHA}}""!==b&&c.append(b),m++}},i.byteCompaction=function(e,n,s,c,l){var g=new Xf,m=0,y=0,b=!1;switch(e){case i.BYTE_COMPACTION_MODE_LATCH:for(var P=new Int32Array(6),B=n[c++];c<n[0]&&!b;)switch(P[m++]=B,y=900*y+B,B=n[c++],B){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:c--,b=!0;break;default:if(m%5==0&&m>0){for(var z=0;z<6;++z)g.write(Number(au(y)>>au(8*(5-z))));y=0,m=0}}c===n[0]&&B<i.TEXT_COMPACTION_MODE_LATCH&&(P[m++]=B);for(var K=0;K<m;K++)g.write(P[K]);break;case i.BYTE_COMPACTION_MODE_LATCH_6:for(;c<n[0]&&!b;){var ae=n[c++];if(ae<i.TEXT_COMPACTION_MODE_LATCH)m++,y=900*y+ae;else switch(ae){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:c--,b=!0}if(m%5==0&&m>0){for(z=0;z<6;++z)g.write(Number(au(y)>>au(8*(5-z))));y=0,m=0}}}return l.append(we.decode(g.toByteArray(),s)),c},i.numericCompaction=function(e,n,s){for(var c=0,l=!1,g=new Int32Array(i.MAX_NUMERIC_CODEWORDS);n<e[0]&&!l;){var m=e[n++];if(n===e[0]&&(l=!0),m<i.TEXT_COMPACTION_MODE_LATCH)g[c]=m,c++;else switch(m){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:n--,l=!0}(c%i.MAX_NUMERIC_CODEWORDS==0||m===i.NUMERIC_COMPACTION_MODE_LATCH||l)&&c>0&&(s.append(i.decodeBase900toBase10(g,c)),c=0)}return n},i.decodeBase900toBase10=function(e,n){for(var s=au(0),c=0;c<n;c++)s+=i.EXP900[n-c-1]*au(e[c]);var l=s.toString();if("1"!==l.charAt(0))throw new Zt;return l.substring(1)},i.TEXT_COMPACTION_MODE_LATCH=900,i.BYTE_COMPACTION_MODE_LATCH=901,i.NUMERIC_COMPACTION_MODE_LATCH=902,i.BYTE_COMPACTION_MODE_LATCH_6=924,i.ECI_USER_DEFINED=925,i.ECI_GENERAL_PURPOSE=926,i.ECI_CHARSET=927,i.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,i.MACRO_PDF417_TERMINATOR=922,i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,i.MAX_NUMERIC_CODEWORDS=15,i.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,i.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,i.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,i.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,i.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,i.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,i.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,i.PL=25,i.LL=27,i.AS=27,i.ML=28,i.AL=28,i.PS=29,i.PAL=29,i.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",i.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",i.EXP900=ep()?function Qd(){var i=[];i[0]=au(1);var e=au(900);i[1]=e;for(var n=2;n<16;n++)i[n]=i[n-1]*e;return i}():[],i.NUMBER_OF_SEQUENCE_CODEWORDS=2,i}();var ld=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const dd=function(){function i(){}return i.decode=function(e,n,s,c,l,g,m){for(var B,y=new Vm(e,n,s,c,l),b=null,P=null,z=!0;;z=!1){if(null!=n&&(b=i.getRowIndicatorColumn(e,y,n,!0,g,m)),null!=c&&(P=i.getRowIndicatorColumn(e,y,c,!1,g,m)),null==(B=i.merge(b,P)))throw We.getNotFoundInstance();var K=B.getBoundingBox();if(!z||null==K||!(K.getMinY()<y.getMinY()||K.getMaxY()>y.getMaxY()))break;y=K}B.setBoundingBox(y);var ae=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,b),B.setDetectionResultColumn(ae,P);for(var Ee=null!=b,Me=1;Me<=ae;Me++){var Le=Ee?Me:ae-Me;if(void 0===B.getDetectionResultColumn(Le)){var ke=void 0;ke=0===Le||Le===ae?new Wf(y,0===Le):new $f(y),B.setDetectionResultColumn(Le,ke);for(var Ye=-1,at=Ye,Lt=y.getMinY();Lt<=y.getMaxY();Lt++){if((Ye=i.getStartColumn(B,Le,Lt,Ee))<0||Ye>y.getMaxX()){if(-1===at)continue;Ye=at}var $t=i.detectCodeword(e,y.getMinX(),y.getMaxX(),Ee,Ye,Lt,g,m);null!=$t&&(ke.setCodeword(Lt,$t),at=Ye,g=Math.min(g,$t.getWidth()),m=Math.max(m,$t.getWidth()))}}}return i.createDecoderResult(B)},i.merge=function(e,n){if(null==e&&null==n)return null;var s=i.getBarcodeMetadata(e,n);if(null==s)return null;var c=Vm.merge(i.adjustBoundingBox(e),i.adjustBoundingBox(n));return new dg(s,c)},i.adjustBoundingBox=function(e){var n,s;if(null==e)return null;var c=e.getRowHeights();if(null==c)return null;var l=i.getMax(c),g=0;try{for(var m=ld(c),y=m.next();!y.done;y=m.next()){var b=y.value;if(g+=l-b,b>0)break}}catch(K){n={error:K}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}for(var P=e.getCodewords(),B=0;g>0&&null==P[B];B++)g--;var z=0;for(B=c.length-1;B>=0&&(z+=l-c[B],!(c[B]>0));B--);for(B=P.length-1;z>0&&null==P[B];B--)z--;return e.getBoundingBox().addMissingRows(g,z,e.isLeft())},i.getMax=function(e){var n,s,c=-1;try{for(var l=ld(e),g=l.next();!g.done;g=l.next())c=Math.max(c,g.value)}catch(y){n={error:y}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return c},i.getBarcodeMetadata=function(e,n){var s,c;return null==e||null==(s=e.getBarcodeMetadata())?null==n?null:n.getBarcodeMetadata():null==n||null==(c=n.getBarcodeMetadata())?s:s.getColumnCount()!==c.getColumnCount()&&s.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&s.getRowCount()!==c.getRowCount()?null:s},i.getRowIndicatorColumn=function(e,n,s,c,l,g){for(var m=new Wf(n,c),y=0;y<2;y++)for(var b=0===y?1:-1,P=Math.trunc(Math.trunc(s.getX())),B=Math.trunc(Math.trunc(s.getY()));B<=n.getMaxY()&&B>=n.getMinY();B+=b){var z=i.detectCodeword(e,0,e.getWidth(),c,P,B,l,g);null!=z&&(m.setCodeword(B,z),P=c?z.getStartX():z.getEndX())}return m},i.adjustCodewordCount=function(e,n){var s=n[0][1],c=s.getValue(),l=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-i.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===c.length){if(l<1||l>ti.MAX_CODEWORDS_IN_BARCODE)throw We.getNotFoundInstance();s.setValue(l)}else c[0]!==l&&s.setValue(l)},i.createDecoderResult=function(e){var n=i.createBarcodeMatrix(e);i.adjustCodewordCount(e,n);for(var s=new Array,c=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),l=[],g=new Array,m=0;m<e.getBarcodeRowCount();m++)for(var y=0;y<e.getBarcodeColumnCount();y++){var b=n[m][y+1].getValue(),P=m*e.getBarcodeColumnCount()+y;0===b.length?s.push(P):1===b.length?c[P]=b[0]:(g.push(P),l.push(b))}for(var B=new Array(l.length),z=0;z<B.length;z++)B[z]=l[z];return i.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),c,ti.toIntArray(s),ti.toIntArray(g),B)},i.createDecoderResultFromAmbiguousValues=function(e,n,s,c,l){for(var g=new Int32Array(c.length),m=100;m-- >0;){for(var y=0;y<g.length;y++)n[c[y]]=l[y][g[y]];try{return i.decodeCodewords(n,e,s)}catch(P){if(!(P instanceof li))throw P}if(0===g.length)throw li.getChecksumInstance();for(y=0;y<g.length;y++){if(g[y]<l[y].length-1){g[y]++;break}if(g[y]=0,y===g.length-1)throw li.getChecksumInstance()}}throw li.getChecksumInstance()},i.createBarcodeMatrix=function(e){for(var n,s,c,l,g=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),m=0;m<g.length;m++)for(var y=0;y<g[m].length;y++)g[m][y]=new zf;var b=0;try{for(var P=ld(e.getDetectionResultColumns()),B=P.next();!B.done;B=P.next()){var z=B.value;if(null!=z)try{for(var K=(c=void 0,ld(z.getCodewords())),ae=K.next();!ae.done;ae=K.next()){var Ee=ae.value;if(null!=Ee){var Me=Ee.getRowNumber();if(Me>=0){if(Me>=g.length)continue;g[Me][b].setValue(Ee.getValue())}}}}catch(Le){c={error:Le}}finally{try{ae&&!ae.done&&(l=K.return)&&l.call(K)}finally{if(c)throw c.error}}b++}}catch(Le){n={error:Le}}finally{try{B&&!B.done&&(s=P.return)&&s.call(P)}finally{if(n)throw n.error}}return g},i.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},i.getStartColumn=function(e,n,s,c){var l,g,m=c?1:-1,y=null;if(i.isValidBarcodeColumn(e,n-m)&&(y=e.getDetectionResultColumn(n-m).getCodeword(s)),null!=y)return c?y.getEndX():y.getStartX();if(null!=(y=e.getDetectionResultColumn(n).getCodewordNearby(s)))return c?y.getStartX():y.getEndX();if(i.isValidBarcodeColumn(e,n-m)&&(y=e.getDetectionResultColumn(n-m).getCodewordNearby(s)),null!=y)return c?y.getEndX():y.getStartX();for(var b=0;i.isValidBarcodeColumn(e,n-m);){n-=m;try{for(var P=(l=void 0,ld(e.getDetectionResultColumn(n).getCodewords())),B=P.next();!B.done;B=P.next()){var z=B.value;if(null!=z)return(c?z.getEndX():z.getStartX())+m*b*(z.getEndX()-z.getStartX())}}catch(K){l={error:K}}finally{try{B&&!B.done&&(g=P.return)&&g.call(P)}finally{if(l)throw l.error}}b++}return c?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},i.detectCodeword=function(e,n,s,c,l,g,m,y){l=i.adjustCodewordStartColumn(e,n,s,c,l,g);var b=i.getModuleBitCount(e,n,s,c,l,g);if(null==b)return null;var P,B=Ir.sum(b);if(c)P=l+B;else{for(var z=0;z<b.length/2;z++){var K=b[z];b[z]=b[b.length-1-z],b[b.length-1-z]=K}l=(P=l)-B}if(!i.checkCodewordSkew(B,m,y))return null;var ae=Yh.getDecodedValue(b),Ee=ti.getCodeword(ae);return-1===Ee?null:new Qh(l,P,i.getCodewordBucketNumber(ae),Ee)},i.getModuleBitCount=function(e,n,s,c,l,g){for(var m=l,y=new Int32Array(8),b=0,P=c?1:-1,B=c;(c?m<s:m>=n)&&b<y.length;)e.get(m,g)===B?(y[b]++,m+=P):(b++,B=!B);return b===y.length||m===(c?s:n)&&b===y.length-1?y:null},i.getNumberOfECCodeWords=function(e){return 2<<e},i.adjustCodewordStartColumn=function(e,n,s,c,l,g){for(var m=l,y=c?-1:1,b=0;b<2;b++){for(;(c?m>=n:m<s)&&c===e.get(m,g);){if(Math.abs(l-m)>i.CODEWORD_SKEW_SIZE)return l;m+=y}y=-y,c=!c}return m},i.checkCodewordSkew=function(e,n,s){return n-i.CODEWORD_SKEW_SIZE<=e&&e<=s+i.CODEWORD_SKEW_SIZE},i.decodeCodewords=function(e,n,s){if(0===e.length)throw Zt.getFormatInstance();var c=1<<n+1,l=i.correctErrors(e,s,c);i.verifyCodewordCount(e,c);var g=np.decode(e,""+n);return g.setErrorsCorrected(l),g.setErasures(s.length),g},i.correctErrors=function(e,n,s){if(null!=n&&n.length>s/2+i.MAX_ERRORS||s<0||s>i.MAX_EC_CODEWORDS)throw li.getChecksumInstance();return i.errorCorrection.decode(e,s,n)},i.verifyCodewordCount=function(e,n){if(e.length<4)throw Zt.getFormatInstance();var s=e[0];if(s>e.length)throw Zt.getFormatInstance();if(0===s){if(!(n<e.length))throw Zt.getFormatInstance();e[0]=e.length-n}},i.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),s=0,c=n.length-1;!((1&e)!==s&&(s=1&e,c--,c<0));)n[c]++,e>>=1;return n},i.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},i.getCodewordBucketNumber_number=function(e){return i.getCodewordBucketNumber(i.getBitCountForCodeword(e))},i.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},i.toString=function(e){for(var n=new cg,s=0;s<e.length;s++){n.format("Row %2d: ",s);for(var c=0;c<e[s].length;c++){var l=e[s][c];0===l.getValue().length?n.format("        ",null):n.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}n.format("%n")}return n.toString()},i.CODEWORD_SKEW_SIZE=2,i.MAX_ERRORS=3,i.MAX_EC_CODEWORDS=512,i.errorCorrection=new Lm,i}(),Qf=function(){function i(){}return i.prototype.decode=function(e,n){void 0===n&&(n=null);var s=i.decode(e,n,!1);if(null==s||0===s.length||null==s[0])throw We.getNotFoundInstance();return s[0]},i.prototype.decodeMultiple=function(e,n){void 0===n&&(n=null);try{return i.decode(e,n,!0)}catch(s){throw s instanceof Zt||s instanceof li?We.getNotFoundInstance():s}},i.decode=function(e,n,s){var c,l,g=new Array,m=qh.detectMultiple(e,n,s);try{for(var y=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(m.getPoints()),b=y.next();!b.done;b=y.next()){var P=b.value,B=dd.decode(m.getBits(),P[4],P[5],P[6],P[7],i.getMinCodewordWidth(P),i.getMaxCodewordWidth(P)),z=new ao(B.getText(),B.getRawBytes(),void 0,P,cn.PDF_417);z.putMetadata(Yi.ERROR_CORRECTION_LEVEL,B.getECLevel());var K=B.getOther();null!=K&&z.putMetadata(Yi.PDF417_EXTRA_METADATA,K),g.push(z)}}catch(ae){c={error:ae}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(c)throw c.error}}return g.map(function(ae){return ae})},i.getMaxWidth=function(e,n){return null==e||null==n?0:Math.trunc(Math.abs(e.getX()-n.getX()))},i.getMinWidth=function(e,n){return null==e||null==n?cr.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},i.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(i.getMaxWidth(e[0],e[4]),i.getMaxWidth(e[6],e[2])*ti.MODULES_IN_CODEWORD/ti.MODULES_IN_STOP_PATTERN),Math.max(i.getMaxWidth(e[1],e[5]),i.getMaxWidth(e[7],e[3])*ti.MODULES_IN_CODEWORD/ti.MODULES_IN_STOP_PATTERN)))},i.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(i.getMinWidth(e[0],e[4]),i.getMinWidth(e[6],e[2])*ti.MODULES_IN_CODEWORD/ti.MODULES_IN_STOP_PATTERN),Math.min(i.getMinWidth(e[1],e[5]),i.getMinWidth(e[7],e[3])*ti.MODULES_IN_CODEWORD/ti.MODULES_IN_STOP_PATTERN)))},i.prototype.reset=function(){},i}();var Yd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const gg=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Yd(e,i),e.kind="ReaderException",e}(Sn);var mg=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const qm=function(){function i(){}return i.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},i.prototype.decodeWithState=function(e){return null==this.readers&&this.setHints(null),this.decodeInternal(e)},i.prototype.setHints=function(e){this.hints=e;var n=null!=e&&void 0!==e.get(Gn.TRY_HARDER),s=null==e?null:e.get(Gn.POSSIBLE_FORMATS),c=new Array;if(null!=s){var l=s.some(function(g){return g===cn.UPC_A||g===cn.UPC_E||g===cn.EAN_13||g===cn.EAN_8||g===cn.CODABAR||g===cn.CODE_39||g===cn.CODE_93||g===cn.CODE_128||g===cn.ITF||g===cn.RSS_14||g===cn.RSS_EXPANDED});l&&!n&&c.push(new Ji(e)),s.includes(cn.QR_CODE)&&c.push(new zd),s.includes(cn.DATA_MATRIX)&&c.push(new Bf),s.includes(cn.AZTEC)&&c.push(new Pt),s.includes(cn.PDF_417)&&c.push(new Qf),l&&n&&c.push(new Ji(e))}0===c.length&&(n||c.push(new Ji(e)),c.push(new zd),c.push(new Bf),c.push(new Pt),c.push(new Qf),n&&c.push(new Ji(e))),this.readers=c},i.prototype.reset=function(){var e,n;if(null!==this.readers)try{for(var s=mg(this.readers),c=s.next();!c.done;c=s.next())c.value.reset()}catch(g){e={error:g}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},i.prototype.decodeInternal=function(e){var n,s;if(null===this.readers)throw new gg("No readers where selected, nothing can be read.");try{for(var c=mg(this.readers),l=c.next();!l.done;l=c.next()){var g=l.value;try{return g.decode(e,this.hints)}catch(m){if(m instanceof gg)continue}}}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}throw new We("No MultiFormat Readers were able to detect the code.")},i}();var M0=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Km=(function(i){function e(n,s){void 0===n&&(n=null),void 0===s&&(s=500);var l=new qm;return l.setHints(n),i.call(this,l,s)||this}M0(e,i),e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)}}(oa),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),_g=(function(i){Km(function e(n){return void 0===n&&(n=500),i.call(this,new Qf,n)||this},i)}(oa),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),vg=(function(i){_g(function e(n){return void 0===n&&(n=500),i.call(this,new zd,n)||this},i)}(oa),function(i){return i[i.ERROR_CORRECTION=0]="ERROR_CORRECTION",i[i.CHARACTER_SET=1]="CHARACTER_SET",i[i.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",i[i.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",i[i.MIN_SIZE=4]="MIN_SIZE",i[i.MAX_SIZE=5]="MAX_SIZE",i[i.MARGIN=6]="MARGIN",i[i.PDF417_COMPACT=7]="PDF417_COMPACT",i[i.PDF417_COMPACTION=8]="PDF417_COMPACTION",i[i.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",i[i.AZTEC_LAYERS=10]="AZTEC_LAYERS",i[i.QR_VERSION=11]="QR_VERSION",i[i.GS1_FORMAT=12]="GS1_FORMAT",i[i.FORCE_C40=13]="FORCE_C40",i}(vg||{}));const br=vg,yg=function(){function i(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new zo(e,Int32Array.from([1])))}return i.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var s=n[n.length-1],c=this.field,l=n.length;l<=e;l++){var g=s.multiply(new zo(c,Int32Array.from([1,c.exp(l-1+c.getGeneratorBase())])));n.push(g),s=g}return n[e]},i.prototype.encode=function(e,n){if(0===n)throw new fn("No error correction bytes");var s=e.length-n;if(s<=0)throw new fn("No data bytes provided");var c=this.buildGenerator(n),l=new Int32Array(s);Ur.arraycopy(e,0,l,0,s);for(var g=new zo(this.field,l),y=(g=g.multiplyByMonomial(n,1)).divide(c)[1].getCoefficients(),b=n-y.length,P=0;P<b;P++)e[s+P]=0;Ur.arraycopy(y,0,e,s+b,y.length)},i}(),Zd=function(){function i(){}return i.applyMaskPenaltyRule1=function(e){return i.applyMaskPenaltyRule1Internal(e,!0)+i.applyMaskPenaltyRule1Internal(e,!1)},i.applyMaskPenaltyRule2=function(e){for(var n=0,s=e.getArray(),c=e.getWidth(),l=e.getHeight(),g=0;g<l-1;g++)for(var m=s[g],y=0;y<c-1;y++){var b=m[y];b===m[y+1]&&b===s[g+1][y]&&b===s[g+1][y+1]&&n++}return i.N2*n},i.applyMaskPenaltyRule3=function(e){for(var n=0,s=e.getArray(),c=e.getWidth(),l=e.getHeight(),g=0;g<l;g++)for(var m=0;m<c;m++){var y=s[g];m+6<c&&1===y[m]&&0===y[m+1]&&1===y[m+2]&&1===y[m+3]&&1===y[m+4]&&0===y[m+5]&&1===y[m+6]&&(i.isWhiteHorizontal(y,m-4,m)||i.isWhiteHorizontal(y,m+7,m+11))&&n++,g+6<l&&1===s[g][m]&&0===s[g+1][m]&&1===s[g+2][m]&&1===s[g+3][m]&&1===s[g+4][m]&&0===s[g+5][m]&&1===s[g+6][m]&&(i.isWhiteVertical(s,m,g-4,g)||i.isWhiteVertical(s,m,g+7,g+11))&&n++}return n*i.N3},i.isWhiteHorizontal=function(e,n,s){n=Math.max(n,0),s=Math.min(s,e.length);for(var c=n;c<s;c++)if(1===e[c])return!1;return!0},i.isWhiteVertical=function(e,n,s,c){s=Math.max(s,0),c=Math.min(c,e.length);for(var l=s;l<c;l++)if(1===e[l][n])return!1;return!0},i.applyMaskPenaltyRule4=function(e){for(var n=0,s=e.getArray(),c=e.getWidth(),l=e.getHeight(),g=0;g<l;g++)for(var m=s[g],y=0;y<c;y++)1===m[y]&&n++;var b=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*n-b)/b)*i.N4},i.getDataMaskBit=function(e,n,s){var c,l;switch(e){case 0:c=s+n&1;break;case 1:c=1&s;break;case 2:c=n%3;break;case 3:c=(s+n)%3;break;case 4:c=Math.floor(s/2)+Math.floor(n/3)&1;break;case 5:c=(1&(l=s*n))+l%3;break;case 6:c=(1&(l=s*n))+l%3&1;break;case 7:c=(l=s*n)%3+(s+n&1)&1;break;default:throw new fn("Invalid mask pattern: "+e)}return 0===c},i.applyMaskPenaltyRule1Internal=function(e,n){for(var s=0,c=n?e.getHeight():e.getWidth(),l=n?e.getWidth():e.getHeight(),g=e.getArray(),m=0;m<c;m++){for(var y=0,b=-1,P=0;P<l;P++){var B=n?g[m][P]:g[P][m];B===b?y++:(y>=5&&(s+=i.N1+(y-5)),y=1,b=B)}y>=5&&(s+=i.N1+(y-5))}return s},i.N1=3,i.N2=3,i.N3=40,i.N4=10,i}(),Xm=function(){function i(e,n){this.width=e,this.height=n;for(var s=new Array(n),c=0;c!==n;c++)s[c]=new Uint8Array(e);this.bytes=s}return i.prototype.getHeight=function(){return this.height},i.prototype.getWidth=function(){return this.width},i.prototype.get=function(e,n){return this.bytes[n][e]},i.prototype.getArray=function(){return this.bytes},i.prototype.setNumber=function(e,n,s){this.bytes[n][e]=s},i.prototype.setBoolean=function(e,n,s){this.bytes[n][e]=s?1:0},i.prototype.clear=function(e){var n,s;try{for(var c=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.bytes),l=c.next();!l.done;l=c.next())Jr.fill(l.value,e)}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}},i.prototype.equals=function(e){if(!(e instanceof i))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var s=0,c=this.height;s<c;++s)for(var l=this.bytes[s],g=n.bytes[s],m=0,y=this.width;m<y;++m)if(l[m]!==g[m])return!1;return!0},i.prototype.toString=function(){for(var e=new hn,n=0,s=this.height;n<s;++n){for(var c=this.bytes[n],l=0,g=this.width;l<g;++l)switch(c[l]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()},i}(),kr=function(){function i(){this.maskPattern=-1}return i.prototype.getMode=function(){return this.mode},i.prototype.getECLevel=function(){return this.ecLevel},i.prototype.getVersion=function(){return this.version},i.prototype.getMaskPattern=function(){return this.maskPattern},i.prototype.getMatrix=function(){return this.matrix},i.prototype.toString=function(){var e=new hn;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},i.prototype.setMode=function(e){this.mode=e},i.prototype.setECLevel=function(e){this.ecLevel=e},i.prototype.setVersion=function(e){this.version=e},i.prototype.setMaskPattern=function(e){this.maskPattern=e},i.prototype.setMatrix=function(e){this.matrix=e},i.isValidMaskPattern=function(e){return e>=0&&e<i.NUM_MASK_PATTERNS},i.NUM_MASK_PATTERNS=8,i}();var fd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const bi=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return fd(e,i),e.kind="WriterException",e}(Sn),os=function(){function i(){}return i.clearMatrix=function(e){e.clear(255)},i.buildMatrix=function(e,n,s,c,l){i.clearMatrix(l),i.embedBasicPatterns(s,l),i.embedTypeInfo(n,c,l),i.maybeEmbedVersionInfo(s,l),i.embedDataBits(e,c,l)},i.embedBasicPatterns=function(e,n){i.embedPositionDetectionPatternsAndSeparators(n),i.embedDarkDotAtLeftBottomCorner(n),i.maybeEmbedPositionAdjustmentPatterns(e,n),i.embedTimingPatterns(n)},i.embedTypeInfo=function(e,n,s){var c=new Ci;i.makeTypeInfoBits(e,n,c);for(var l=0,g=c.getSize();l<g;++l){var m=c.get(c.getSize()-1-l),y=i.TYPE_INFO_COORDINATES[l];if(s.setBoolean(y[0],y[1],m),l<8){var B=s.getWidth()-l-1;s.setBoolean(B,z=8,m)}else{B=8;var z=s.getHeight()-7+(l-8);s.setBoolean(B,z,m)}}},i.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var s=new Ci;i.makeVersionInfoBits(e,s);for(var c=17,l=0;l<6;++l)for(var g=0;g<3;++g){var m=s.get(c);c--,n.setBoolean(l,n.getHeight()-11+g,m),n.setBoolean(n.getHeight()-11+g,l,m)}}},i.embedDataBits=function(e,n,s){for(var c=0,l=-1,g=s.getWidth()-1,m=s.getHeight()-1;g>0;){for(6===g&&(g-=1);m>=0&&m<s.getHeight();){for(var y=0;y<2;++y){var b=g-y;if(i.isEmpty(s.get(b,m))){var P=void 0;c<e.getSize()?(P=e.get(c),++c):P=!1,255!==n&&Zd.getDataMaskBit(n,b,m)&&(P=!P),s.setBoolean(b,m,P)}}m+=l}m+=l=-l,g-=2}if(c!==e.getSize())throw new bi("Not all bits consumed: "+c+"/"+e.getSize())},i.findMSBSet=function(e){return 32-cr.numberOfLeadingZeros(e)},i.calculateBCHCode=function(e,n){if(0===n)throw new fn("0 polynomial");var s=i.findMSBSet(n);for(e<<=s-1;i.findMSBSet(e)>=s;)e^=n<<i.findMSBSet(e)-s;return e},i.makeTypeInfoBits=function(e,n,s){if(!kr.isValidMaskPattern(n))throw new bi("Invalid mask pattern");var c=e.getBits()<<3|n;s.appendBits(c,5);var l=i.calculateBCHCode(c,i.TYPE_INFO_POLY);s.appendBits(l,10);var g=new Ci;if(g.appendBits(i.TYPE_INFO_MASK_PATTERN,15),s.xor(g),15!==s.getSize())throw new bi("should not happen but we got: "+s.getSize())},i.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var s=i.calculateBCHCode(e.getVersionNumber(),i.VERSION_INFO_POLY);if(n.appendBits(s,12),18!==n.getSize())throw new bi("should not happen but we got: "+n.getSize())},i.isEmpty=function(e){return 255===e},i.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var s=(n+1)%2;i.isEmpty(e.get(n,6))&&e.setNumber(n,6,s),i.isEmpty(e.get(6,n))&&e.setNumber(6,n,s)}},i.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new bi;e.setNumber(8,e.getHeight()-8,1)},i.embedHorizontalSeparationPattern=function(e,n,s){for(var c=0;c<8;++c){if(!i.isEmpty(s.get(e+c,n)))throw new bi;s.setNumber(e+c,n,0)}},i.embedVerticalSeparationPattern=function(e,n,s){for(var c=0;c<7;++c){if(!i.isEmpty(s.get(e,n+c)))throw new bi;s.setNumber(e,n+c,0)}},i.embedPositionAdjustmentPattern=function(e,n,s){for(var c=0;c<5;++c)for(var l=i.POSITION_ADJUSTMENT_PATTERN[c],g=0;g<5;++g)s.setNumber(e+g,n+c,l[g])},i.embedPositionDetectionPattern=function(e,n,s){for(var c=0;c<7;++c)for(var l=i.POSITION_DETECTION_PATTERN[c],g=0;g<7;++g)s.setNumber(e+g,n+c,l[g])},i.embedPositionDetectionPatternsAndSeparators=function(e){var n=i.POSITION_DETECTION_PATTERN[0].length;i.embedPositionDetectionPattern(0,0,e),i.embedPositionDetectionPattern(e.getWidth()-n,0,e),i.embedPositionDetectionPattern(0,e.getWidth()-n,e),i.embedHorizontalSeparationPattern(0,7,e),i.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),i.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),i.embedVerticalSeparationPattern(7,0,e),i.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),i.embedVerticalSeparationPattern(7,e.getHeight()-7,e)},i.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var s=e.getVersionNumber()-1,c=i.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s],l=0,g=c.length;l!==g;l++){var m=c[l];if(m>=0)for(var y=0;y!==g;y++){var b=c[y];b>=0&&i.isEmpty(n.get(b,m))&&i.embedPositionAdjustmentPattern(b-2,m-2,n)}}},i.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),i.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),i.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),i.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),i.VERSION_INFO_POLY=7973,i.TYPE_INFO_POLY=1335,i.TYPE_INFO_MASK_PATTERN=21522,i}(),Ru=function(){function i(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return i.prototype.getDataBytes=function(){return this.dataBytes},i.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},i}();var ip=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Yf=function(){function i(){}return i.calculateMaskPenalty=function(e){return Zd.applyMaskPenaltyRule1(e)+Zd.applyMaskPenaltyRule2(e)+Zd.applyMaskPenaltyRule3(e)+Zd.applyMaskPenaltyRule4(e)},i.encode=function(e,n,s){void 0===s&&(s=null);var c=i.DEFAULT_BYTE_MODE_ENCODING,l=null!==s&&void 0!==s.get(br.CHARACTER_SET);l&&(c=s.get(br.CHARACTER_SET).toString());var g=this.chooseMode(e,c),m=new Ci;if(g===eo.BYTE&&(l||i.DEFAULT_BYTE_MODE_ENCODING!==c)){var y=po.getCharacterSetECIByName(c);void 0!==y&&this.appendECI(y,m)}this.appendModeInfo(g,m);var P,b=new Ci;if(this.appendBytes(e,g,b,c),null!==s&&void 0!==s.get(br.QR_VERSION)){var B=Number.parseInt(s.get(br.QR_VERSION).toString(),10);P=Fs.getVersionForNumber(B);var z=this.calculateBitsNeeded(g,m,b,P);if(!this.willFit(z,P,n))throw new bi("Data too big for requested version")}else P=this.recommendVersion(n,g,m,b);var K=new Ci;K.appendBitArray(m);var ae=g===eo.BYTE?b.getSizeInBytes():e.length;this.appendLengthInfo(ae,P,g,K),K.appendBitArray(b);var Ee=P.getECBlocksForLevel(n),Me=P.getTotalCodewords()-Ee.getTotalECCodewords();this.terminateBits(Me,K);var Le=this.interleaveWithECBytes(K,P.getTotalCodewords(),Me,Ee.getNumBlocks()),ke=new kr;ke.setECLevel(n),ke.setMode(g),ke.setVersion(P);var Ye=P.getDimensionForVersion(),at=new Xm(Ye,Ye),Lt=this.chooseMaskPattern(Le,n,P,at);return ke.setMaskPattern(Lt),os.buildMatrix(Le,n,P,Lt,at),ke.setMatrix(at),ke},i.recommendVersion=function(e,n,s,c){var l=this.calculateBitsNeeded(n,s,c,Fs.getVersionForNumber(1)),g=this.chooseVersion(l,e),m=this.calculateBitsNeeded(n,s,c,g);return this.chooseVersion(m,e)},i.calculateBitsNeeded=function(e,n,s,c){return n.getSize()+e.getCharacterCountBits(c)+s.getSize()},i.getAlphanumericCode=function(e){return e<i.ALPHANUMERIC_TABLE.length?i.ALPHANUMERIC_TABLE[e]:-1},i.chooseMode=function(e,n){if(void 0===n&&(n=null),po.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return eo.KANJI;for(var s=!1,c=!1,l=0,g=e.length;l<g;++l){var m=e.charAt(l);if(i.isDigit(m))s=!0;else{if(-1===this.getAlphanumericCode(m.charCodeAt(0)))return eo.BYTE;c=!0}}return c?eo.ALPHANUMERIC:s?eo.NUMERIC:eo.BYTE},i.isOnlyDoubleByteKanji=function(e){var n;try{n=we.encode(e,po.SJIS)}catch{return!1}var s=n.length;if(s%2!=0)return!1;for(var c=0;c<s;c+=2){var l=255&n[c];if((l<129||l>159)&&(l<224||l>235))return!1}return!0},i.chooseMaskPattern=function(e,n,s,c){for(var l=Number.MAX_SAFE_INTEGER,g=-1,m=0;m<kr.NUM_MASK_PATTERNS;m++){os.buildMatrix(e,n,s,m,c);var y=this.calculateMaskPenalty(c);y<l&&(l=y,g=m)}return g},i.chooseVersion=function(e,n){for(var s=1;s<=40;s++){var c=Fs.getVersionForNumber(s);if(i.willFit(e,c,n))return c}throw new bi("Data too big")},i.willFit=function(e,n,s){return n.getTotalCodewords()-n.getECBlocksForLevel(s).getTotalECCodewords()>=(e+7)/8},i.terminateBits=function(e,n){var s=8*e;if(n.getSize()>s)throw new bi("data bits cannot fit in the QR Code"+n.getSize()+" > "+s);for(var c=0;c<4&&n.getSize()<s;++c)n.appendBit(!1);var l=7&n.getSize();if(l>0)for(c=l;c<8;c++)n.appendBit(!1);var g=e-n.getSizeInBytes();for(c=0;c<g;++c)n.appendBits(1&c?17:236,8);if(n.getSize()!==s)throw new bi("Bits size does not equal capacity")},i.getNumDataBytesAndNumECBytesForBlockID=function(e,n,s,c,l,g){if(c>=s)throw new bi("Block ID too large");var m=e%s,y=s-m,b=Math.floor(e/s),P=b+1,B=Math.floor(n/s),z=B+1,K=b-B,ae=P-z;if(K!==ae)throw new bi("EC bytes mismatch");if(s!==y+m)throw new bi("RS blocks mismatch");if(e!==(B+K)*y+(z+ae)*m)throw new bi("Total bytes mismatch");c<y?(l[0]=B,g[0]=K):(l[0]=z,g[0]=ae)},i.interleaveWithECBytes=function(e,n,s,c){var l,g,m,y;if(e.getSizeInBytes()!==s)throw new bi("Number of bits and data bytes does not match");for(var b=0,P=0,B=0,z=new Array,K=0;K<c;++K){var ae=new Int32Array(1),Ee=new Int32Array(1);i.getNumDataBytesAndNumECBytesForBlockID(n,s,c,K,ae,Ee);var Me=ae[0],Le=new Uint8Array(Me);e.toBytes(8*b,Le,0,Me);var ke=i.generateECBytes(Le,Ee[0]);z.push(new Ru(Le,ke)),P=Math.max(P,Me),B=Math.max(B,ke.length),b+=ae[0]}if(s!==b)throw new bi("Data bytes does not match offset");var Ye=new Ci;for(K=0;K<P;++K)try{for(var at=(l=void 0,ip(z)),Lt=at.next();!Lt.done;Lt=at.next())K<(Le=Lt.value.getDataBytes()).length&&Ye.appendBits(Le[K],8)}catch(ur){l={error:ur}}finally{try{Lt&&!Lt.done&&(g=at.return)&&g.call(at)}finally{if(l)throw l.error}}for(K=0;K<B;++K)try{for(var Jt=(m=void 0,ip(z)),mn=Jt.next();!mn.done;mn=Jt.next())K<(ke=mn.value.getErrorCorrectionBytes()).length&&Ye.appendBits(ke[K],8)}catch(ur){m={error:ur}}finally{try{mn&&!mn.done&&(y=Jt.return)&&y.call(Jt)}finally{if(m)throw m.error}}if(n!==Ye.getSizeInBytes())throw new bi("Interleaving error: "+n+" and "+Ye.getSizeInBytes()+" differ.");return Ye},i.generateECBytes=function(e,n){for(var s=e.length,c=new Int32Array(s+n),l=0;l<s;l++)c[l]=255&e[l];new yg(pi.QR_CODE_FIELD_256).encode(c,n);var g=new Uint8Array(n);for(l=0;l<n;l++)g[l]=c[s+l];return g},i.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},i.appendLengthInfo=function(e,n,s,c){var l=s.getCharacterCountBits(n);if(e>=1<<l)throw new bi(e+" is bigger than "+((1<<l)-1));c.appendBits(e,l)},i.appendBytes=function(e,n,s,c){switch(n){case eo.NUMERIC:i.appendNumericBytes(e,s);break;case eo.ALPHANUMERIC:i.appendAlphanumericBytes(e,s);break;case eo.BYTE:i.append8BitBytes(e,s,c);break;case eo.KANJI:i.appendKanjiBytes(e,s);break;default:throw new bi("Invalid mode: "+n)}},i.getDigit=function(e){return e.charCodeAt(0)-48},i.isDigit=function(e){var n=i.getDigit(e);return n>=0&&n<=9},i.appendNumericBytes=function(e,n){for(var s=e.length,c=0;c<s;){var l=i.getDigit(e.charAt(c));if(c+2<s){var g=i.getDigit(e.charAt(c+1)),m=i.getDigit(e.charAt(c+2));n.appendBits(100*l+10*g+m,10),c+=3}else c+1<s?(g=i.getDigit(e.charAt(c+1)),n.appendBits(10*l+g,7),c+=2):(n.appendBits(l,4),c++)}},i.appendAlphanumericBytes=function(e,n){for(var s=e.length,c=0;c<s;){var l=i.getAlphanumericCode(e.charCodeAt(c));if(-1===l)throw new bi;if(c+1<s){var g=i.getAlphanumericCode(e.charCodeAt(c+1));if(-1===g)throw new bi;n.appendBits(45*l+g,11),c+=2}else n.appendBits(l,6),c++}},i.append8BitBytes=function(e,n,s){var c;try{c=we.encode(e,s)}catch(y){throw new bi(y)}for(var l=0,g=c.length;l!==g;l++)n.appendBits(c[l],8)},i.appendKanjiBytes=function(e,n){var s;try{s=we.encode(e,po.SJIS)}catch(B){throw new bi(B)}for(var c=s.length,l=0;l<c;l+=2){var y=(255&s[l])<<8&4294967295|255&s[l+1],b=-1;if(y>=33088&&y<=40956?b=y-33088:y>=57408&&y<=60351&&(b=y-49472),-1===b)throw new bi("Invalid byte sequence");n.appendBits(192*(b>>8)+(255&b),13)}},i.appendECI=function(e,n){n.appendBits(eo.ECI.getBits(),4),n.appendBits(e.getValue(),8)},i.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),i.DEFAULT_BYTE_MODE_ENCODING=po.UTF8.getName(),i}();!function(){function i(){}i.prototype.write=function(e,n,s,c){if(void 0===c&&(c=null),0===e.length)throw new fn("Found empty contents");if(n<0||s<0)throw new fn("Requested dimensions are too small: "+n+"x"+s);var l=eu.L,g=i.QUIET_ZONE_SIZE;null!==c&&(void 0!==c.get(br.ERROR_CORRECTION)&&(l=eu.fromString(c.get(br.ERROR_CORRECTION).toString())),void 0!==c.get(br.MARGIN)&&(g=Number.parseInt(c.get(br.MARGIN).toString(),10)));var m=Yf.encode(e,l,c);return this.renderResult(m,n,s,g)},i.prototype.writeToDom=function(e,n,s,c,l){void 0===l&&(l=null),"string"==typeof e&&(e=document.querySelector(e));var g=this.write(n,s,c,l);e&&e.appendChild(g)},i.prototype.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new gs;for(var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),Ee=this.createSVGElement(P,B),Me=0,Le=ae;Me<m;Me++,Le+=z)for(var ke=0,Ye=K;ke<g;ke++,Ye+=z)if(1===l.get(ke,Me)){var at=this.createSvgRectElement(Ye,Le,z,z);Ee.appendChild(at)}return Ee},i.prototype.createSVGElement=function(e,n){var s=document.createElementNS(i.SVG_NS,"svg");return s.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width",n.toString()),s},i.prototype.createSvgRectElement=function(e,n,s,c){var l=document.createElementNS(i.SVG_NS,"rect");return l.setAttributeNS(null,"x",e.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",c.toString()),l.setAttributeNS(null,"fill","#000000"),l},i.QUIET_ZONE_SIZE=4,i.SVG_NS="http://www.w3.org/2000/svg"}();!function(){function i(){}i.prototype.encode=function(e,n,s,c,l){if(0===e.length)throw new fn("Found empty contents");if(n!==cn.QR_CODE)throw new fn("Can only encode QR_CODE, but got "+n);if(s<0||c<0)throw new fn("Requested dimensions are too small: "+s+"x"+c);var g=eu.L,m=i.QUIET_ZONE_SIZE;null!==l&&(void 0!==l.get(br.ERROR_CORRECTION)&&(g=eu.fromString(l.get(br.ERROR_CORRECTION).toString())),void 0!==l.get(br.MARGIN)&&(m=Number.parseInt(l.get(br.MARGIN).toString(),10)));var y=Yf.encode(e,g,l);return i.renderResult(y,s,c,m)},i.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new gs;for(var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),Ee=new rr(P,B),Me=0,Le=ae;Me<m;Me++,Le+=z)for(var ke=0,Ye=K;ke<g;ke++,Ye+=z)1===l.get(ke,Me)&&Ee.setRegion(Ye,Le,z,z);return Ee},i.QUIET_ZONE_SIZE=4}();var a1=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();!function(i){function e(n,s,c,l,g,m,y,b){var P=i.call(this,m,y)||this;if(P.yuvData=n,P.dataWidth=s,P.dataHeight=c,P.left=l,P.top=g,l+m>s||g+y>c)throw new fn("Crop rectangle does not fit within image data.");return b&&P.reverseHorizontal(m,y),P}a1(e,i),e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new fn("Requested row is outside the image: "+n);var c=this.getWidth();return(null==s||s.length<c)&&(s=new Uint8ClampedArray(c)),Ur.arraycopy(this.yuvData,(n+this.top)*this.dataWidth+this.left,s,0,c),s},e.prototype.getMatrix=function(){var n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.yuvData;var c=n*s,l=new Uint8ClampedArray(c),g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Ur.arraycopy(this.yuvData,g,l,0,c),l;for(var m=0;m<s;m++)Ur.arraycopy(this.yuvData,g,l,m*n,n),g+=this.dataWidth;return l},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+s,c,l,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(n*s),l=this.yuvData,g=this.top*this.dataWidth+this.left,m=0;m<s;m++){for(var y=m*n,b=0;b<n;b++)c[y+b]=4278190080|65793*(255&l[g+b*e.THUMBNAIL_SCALE_FACTOR]);g+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return c},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,s){for(var c=this.yuvData,l=0,g=this.top*this.dataWidth+this.left;l<s;l++,g+=this.dataWidth)for(var m=g+n/2,y=g,b=g+n-1;y<m;y++,b--){var P=c[y];c[y]=c[b],c[b]=P}},e.prototype.invert=function(){return new Mo(this)},e.THUMBNAIL_SCALE_FACTOR=2}(_n);var Ym=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();!function(i){function e(n,s,c,l,g,m,y){var b=i.call(this,s,c)||this;if(b.dataWidth=l,b.dataHeight=g,b.left=m,b.top=y,4===n.BYTES_PER_ELEMENT){for(var P=s*c,B=new Uint8ClampedArray(P),z=0;z<P;z++){var K=n[z];B[z]=((K>>16&255)+(K>>7&510)+(255&K))/4&255}b.luminances=B}else b.luminances=n;if(void 0===l&&(b.dataWidth=s),void 0===g&&(b.dataHeight=c),void 0===m&&(b.left=0),void 0===y&&(b.top=0),b.left+s>b.dataWidth||b.top+c>b.dataHeight)throw new fn("Crop rectangle does not fit within image data.");return b}Ym(e,i),e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new fn("Requested row is outside the image: "+n);var c=this.getWidth();return(null==s||s.length<c)&&(s=new Uint8ClampedArray(c)),Ur.arraycopy(this.luminances,(n+this.top)*this.dataWidth+this.left,s,0,c),s},e.prototype.getMatrix=function(){var n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.luminances;var c=n*s,l=new Uint8ClampedArray(c),g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Ur.arraycopy(this.luminances,g,l,0,c),l;for(var m=0;m<s;m++)Ur.arraycopy(this.luminances,g,l,m*n,n),g+=this.dataWidth;return l},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return new e(this.luminances,c,l,this.dataWidth,this.dataHeight,this.left+n,this.top+s)},e.prototype.invert=function(){return new Mo(this)}}(_n);var uc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Jf=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return uc(e,i),e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(po),c1=function(){function i(){}return i.ISO_8859_1=po.ISO8859_1,i}(),wa=function(){function i(e,n,s){this.codewords=e,this.numcols=n,this.numrows=s,this.bits=new Uint8Array(n*s),Jr.fill(this.bits,2)}return i.prototype.getNumrows=function(){return this.numrows},i.prototype.getNumcols=function(){return this.numcols},i.prototype.getBits=function(){return this.bits},i.prototype.getBit=function(e,n){return 1===this.bits[n*this.numcols+e]},i.prototype.setBit=function(e,n,s){this.bits[n*this.numcols+e]=s?1:0},i.prototype.noBit=function(e,n){return 2===this.bits[n*this.numcols+e]},i.prototype.place=function(){var e=0,n=4,s=0;do{n===this.numrows&&0===s&&this.corner1(e++),n===this.numrows-2&&0===s&&this.numcols%4!=0&&this.corner2(e++),n===this.numrows-2&&0===s&&this.numcols%8==4&&this.corner3(e++),n===this.numrows+4&&2===s&&this.numcols%8==0&&this.corner4(e++);do{n<this.numrows&&s>=0&&this.noBit(s,n)&&this.utah(n,s,e++),n-=2,s+=2}while(n>=0&&s<this.numcols);n++,s+=3;do{n>=0&&s<this.numcols&&this.noBit(s,n)&&this.utah(n,s,e++),n+=2,s-=2}while(n<this.numrows&&s>=0);n+=3,s++}while(n<this.numrows||s<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},i.prototype.module=function(e,n,s,c){e<0&&(e+=this.numrows,n+=4-(this.numrows+4)%8),n<0&&(n+=this.numcols,e+=4-(this.numcols+4)%8);var l=this.codewords.charCodeAt(s);this.setBit(n,e,0!=(l&=1<<8-c))},i.prototype.utah=function(e,n,s){this.module(e-2,n-2,s,1),this.module(e-2,n-1,s,2),this.module(e-1,n-2,s,3),this.module(e-1,n-1,s,4),this.module(e-1,n,s,5),this.module(e,n-2,s,6),this.module(e,n-1,s,7),this.module(e,n,s,8)},i.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},i.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},i.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},i.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},i}();var hd,Jm=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],F0=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],ap=(hd=function(i,e){for(var n=1,s=0;s<255;s++)e[s]=n,i[n]=s,(n*=2)>=256&&(n^=301);return{LOG:i,ALOG:e}}([],[])).LOG,el=hd.ALOG,tl="[)>\x1e05\x1d",tf="[)>\x1e06\x1d";const n_=function(){function i(){}return i.encodeECC200=function(e,n){if(e.length!==n.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var s=new hn;s.append(e);var c=n.getInterleavedBlockCount();if(1===c){var l=this.createECCBlock(e,n.getErrorCodewords());s.append(l)}else{for(var g=[],m=[],y=0;y<c;y++)g[y]=n.getDataLengthForInterleavedBlock(y+1),m[y]=n.getErrorLengthForInterleavedBlock(y+1);for(var b=0;b<c;b++){for(var P=new hn,B=b;B<n.getDataCapacity();B+=c)P.append(e.charAt(B));l=this.createECCBlock(P.toString(),m[b]);for(var z=0,K=b;K<m[b]*c;K+=c)s.setCharAt(n.getDataCapacity()+K,l.charAt(z++))}}return s.toString()},i.createECCBlock=function(e,n){for(var s=-1,c=0;c<Jm.length;c++)if(Jm[c]===n){s=c;break}if(s<0)throw new Error("Illegal number of error correction codewords specified: "+n);var l=F0[s],g=[];for(c=0;c<n;c++)g[c]=0;for(c=0;c<e.length;c++){for(var m=g[n-1]^e.charAt(c).charCodeAt(0),y=n-1;y>0;y--)g[y]=0!==m&&0!==l[y]?g[y-1]^el[(ap[m]+ap[l[y]])%255]:g[y-1];g[0]=0!==m&&0!==l[0]?el[(ap[m]+ap[l[0]])%255]:0}var b=[];for(c=0;c<n;c++)b[c]=g[n-c-1];return b.map(function(P){return String.fromCharCode(P)}).join("")},i}();var B0=function(){function i(){}return i.prototype.getEncodingMode=function(){return 0},i.prototype.encode=function(e){if(Sr.determineConsecutiveDigitCount(e.getMessage(),e.pos)>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var s=e.getCurrentChar(),c=Sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode())switch(c){case 5:return e.writeCodeword(231),void e.signalEncoderChange(5);case 1:return e.writeCodeword(230),void e.signalEncoderChange(1);case 3:e.writeCodeword(238),e.signalEncoderChange(3);break;case 2:e.writeCodeword(239),e.signalEncoderChange(2);break;case 4:e.writeCodeword(240),e.signalEncoderChange(4);break;default:throw new Error("Illegal mode: "+c)}else Sr.isExtendedASCII(s)?(e.writeCodeword(235),e.writeCodeword(s-128+1),e.pos++):(e.writeCodeword(s+1),e.pos++)}},i.prototype.encodeASCIIDigits=function(e,n){if(Sr.isDigit(e)&&Sr.isDigit(n))return 10*(e-48)+(n-48)+130;throw new Error("not digits: "+e+n)},i}(),xg=function(){function i(){}return i.prototype.getEncodingMode=function(){return 5},i.prototype.encode=function(e){var n=new hn;for(n.append(0);e.hasMoreCharacters();){var s=e.getCurrentChar();if(n.append(s),e.pos++,Sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}var l=n.length()-1,m=e.getCodewordCount()+l+1;e.updateSymbolInfo(m);var y=e.getSymbolInfo().getDataCapacity()-m>0;if(e.hasMoreCharacters()||y)if(l<=249)n.setCharAt(0,mt.getCharAt(l));else{if(!(l<=1555))throw new Error("Message length not in valid ranges: "+l);n.setCharAt(0,mt.getCharAt(Math.floor(l/250)+249)),n.insert(1,mt.getCharAt(l%250))}var b=0;for(s=n.length();b<s;b++)e.writeCodeword(this.randomize255State(n.charAt(b).charCodeAt(0),e.getCodewordCount()+1))},i.prototype.randomize255State=function(e,n){var c=e+(149*n%255+1);return c<=255?c:c-256},i}(),Ml=function(){function i(){}return i.prototype.getEncodingMode=function(){return 1},i.prototype.encodeMaximal=function(e){for(var n=new hn,s=0,c=e.pos,l=0;e.hasMoreCharacters();){var g=e.getCurrentChar();e.pos++,s=this.encodeChar(g,n),n.length()%3==0&&(c=e.pos,l=n.length())}if(l!==n.length()){var m=Math.floor(n.length()/3*2),y=Math.floor(e.getCodewordCount()+m+1);e.updateSymbolInfo(y);var b=e.getSymbolInfo().getDataCapacity()-y,P=Math.floor(n.length()%3);(2===P&&2!==b||1===P&&(s>3||1!==b))&&(e.pos=c)}n.length()>0&&e.writeCodeword(230),this.handleEOD(e,n)},i.prototype.encode=function(e){for(var n=new hn;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++;var c=this.encodeChar(s,n),l=2*Math.floor(n.length()/3),g=e.getCodewordCount()+l;e.updateSymbolInfo(g);var m=e.getSymbolInfo().getDataCapacity()-g;if(!e.hasMoreCharacters()){var y=new hn;for(n.length()%3==2&&2!==m&&(c=this.backtrackOneCharacter(e,n,y,c));n.length()%3==1&&(c>3||1!==m);)c=this.backtrackOneCharacter(e,n,y,c);break}if(n.length()%3==0&&Sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,n)},i.prototype.backtrackOneCharacter=function(e,n,s,c){var l=n.length(),g=n.toString().substring(0,l-c);n.setLengthToZero(),n.append(g),e.pos--;var m=e.getCurrentChar();return c=this.encodeChar(m,s),e.resetSymbolInfo(),c},i.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var s=n.toString().substring(3);n.setLengthToZero(),n.append(s)},i.prototype.handleEOD=function(e,n){var s=Math.floor(n.length()/3*2),c=n.length()%3,l=e.getCodewordCount()+s;e.updateSymbolInfo(l);var g=e.getSymbolInfo().getDataCapacity()-l;if(2===c){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(254)}else if(1===g&&1===c){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(254),e.pos--}else{if(0!==c)throw new Error("Unexpected case. Please report!");for(;n.length()>=3;)this.writeNextTriplet(e,n);(g>0||e.hasMoreCharacters())&&e.writeCodeword(254)}e.signalEncoderChange(0)},i.prototype.encodeChar=function(e,n){return 32===e?(n.append(3),1):e>=48&&e<=57?(n.append(e-48+4),1):e>=65&&e<=90?(n.append(e-65+14),1):e<32?(n.append(0),n.append(e),2):e<=47?(n.append(1),n.append(e-33),2):e<=64?(n.append(1),n.append(e-58+15),2):e<=95?(n.append(1),n.append(e-91+22),2):e<=127?(n.append(2),n.append(e-96),2):(n.append("1\x1e"),2+this.encodeChar(e-128,n))},i.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,s=n/256,c=n%256,l=new hn;return l.append(s),l.append(c),l.toString()},i}(),Sg=function(){function i(){}return i.prototype.getEncodingMode=function(){return 4},i.prototype.encode=function(e){for(var n=new hn;e.hasMoreCharacters();){var s=e.getCurrentChar();if(this.encodeChar(s,n),e.pos++,n.length()>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var l=n.toString().substring(4);if(n.setLengthToZero(),n.append(l),Sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}}n.append(mt.getCharAt(31)),this.handleEOD(e,n)},i.prototype.handleEOD=function(e,n){try{var s=n.length();if(0===s)return;if(1===s){e.updateSymbolInfo();var c=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),l=e.getRemainingCharacters();if(l>c&&(e.updateSymbolInfo(e.getCodewordCount()+1),c=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),l<=c&&c<=2)return}if(s>4)throw new Error("Count must not exceed 4");var g=s-1,m=this.encodeToCodewords(n.toString()),b=!e.hasMoreCharacters()&&g<=2;g<=2&&(e.updateSymbolInfo(e.getCodewordCount()+g),(c=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount())>=3&&(b=!1,e.updateSymbolInfo(e.getCodewordCount()+m.length))),b?(e.resetSymbolInfo(),e.pos-=g):e.writeCodewords(m)}finally{e.signalEncoderChange(0)}},i.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(mt.getCharAt(e-64)):Sr.illegalCharacter(mt.getCharAt(e))},i.prototype.encodeToCodewords=function(e){var n=e.length;if(0===n)throw new Error("StringBuilder must not be empty");var m=(e.charAt(0).charCodeAt(0)<<18)+((n>=2?e.charAt(1).charCodeAt(0):0)<<12)+((n>=3?e.charAt(2).charCodeAt(0):0)<<6)+(n>=4?e.charAt(3).charCodeAt(0):0),y=m>>16&255,b=m>>8&255,P=255&m,B=new hn;return B.append(y),n>=2&&B.append(b),n>=3&&B.append(P),B.toString()},i}(),up=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ni=function(){function i(e,n,s,c,l,g,m,y){void 0===m&&(m=0),void 0===y&&(y=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=s,this.matrixWidth=c,this.matrixHeight=l,this.dataRegions=g,this.rsBlockData=m,this.rsBlockError=y}return i.lookup=function(e,n,s,c,l){var g,m;void 0===n&&(n=0),void 0===s&&(s=null),void 0===c&&(c=null),void 0===l&&(l=!0);try{for(var y=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(sf),b=y.next();!b.done;b=y.next()){var P=b.value;if((1!==n||!P.rectangular)&&(2!==n||P.rectangular)&&(null==s||!(P.getSymbolWidth()<s.getWidth()||P.getSymbolHeight()<s.getHeight()))&&(null==c||!(P.getSymbolWidth()>c.getWidth()||P.getSymbolHeight()>c.getHeight()))&&e<=P.dataCapacity)return P}}catch(B){g={error:B}}finally{try{b&&!b.done&&(m=y.return)&&m.call(y)}finally{if(g)throw g.error}}if(l)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},i.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},i.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},i.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},i.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},i.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},i.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},i.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},i.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},i.prototype.getDataCapacity=function(){return this.dataCapacity},i.prototype.getErrorCodewords=function(){return this.errorCodewords},i.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},i.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},i}();const rf=ni;var r_=function(i){function e(){return i.call(this,!1,1558,620,22,22,36,-1,62)||this}return up(e,i),e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(ni),sf=[new ni(!1,3,5,8,8,1),new ni(!1,5,7,10,10,1),new ni(!0,5,7,16,6,1),new ni(!1,8,10,12,12,1),new ni(!0,10,11,14,6,2),new ni(!1,12,12,14,14,1),new ni(!0,16,14,24,10,1),new ni(!1,18,14,16,16,1),new ni(!1,22,18,18,18,1),new ni(!0,22,18,16,10,2),new ni(!1,30,20,20,20,1),new ni(!0,32,24,16,14,2),new ni(!1,36,24,22,22,1),new ni(!1,44,28,24,24,1),new ni(!0,49,28,22,14,2),new ni(!1,62,36,14,14,4),new ni(!1,86,42,16,16,4),new ni(!1,114,48,18,18,4),new ni(!1,144,56,20,20,4),new ni(!1,174,68,22,22,4),new ni(!1,204,84,24,24,4,102,42),new ni(!1,280,112,14,14,16,140,56),new ni(!1,368,144,16,16,16,92,36),new ni(!1,456,192,18,18,16,114,48),new ni(!1,576,224,20,20,16,144,56),new ni(!1,696,272,22,22,16,174,68),new ni(!1,816,336,24,24,16,136,56),new ni(!1,1050,408,18,18,36,175,68),new ni(!1,1304,496,20,20,36,163,62),new r_],U0=function(){function i(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(m){return m.charCodeAt(0)}),s=new hn,c=0,l=n.length;c<l;c++){var g=String.fromCharCode(255&n[c]);if("?"===g&&"?"!==e.charAt(c))throw new Error("Message contains characters outside ISO-8859-1 encoding.");s.append(g)}this.msg=s.toString(),this.shape=0,this.codewords=new hn,this.newEncoding=-1}return i.prototype.setSymbolShape=function(e){this.shape=e},i.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},i.prototype.getMessage=function(){return this.msg},i.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},i.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},i.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},i.prototype.getCodewords=function(){return this.codewords},i.prototype.writeCodewords=function(e){this.codewords.append(e)},i.prototype.writeCodeword=function(e){this.codewords.append(e)},i.prototype.getCodewordCount=function(){return this.codewords.length()},i.prototype.getNewEncoding=function(){return this.newEncoding},i.prototype.signalEncoderChange=function(e){this.newEncoding=e},i.prototype.resetEncoderSignal=function(){this.newEncoding=-1},i.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},i.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},i.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},i.prototype.getSymbolInfo=function(){return this.symbolInfo},i.prototype.updateSymbolInfo=function(e){void 0===e&&(e=this.getCodewordCount()),(null==this.symbolInfo||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=rf.lookup(e,this.shape,this.minSize,this.maxSize,!0))},i.prototype.resetSymbolInfo=function(){this.symbolInfo=null},i}(),i_=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),nh=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return i_(e,i),e.prototype.getEncodingMode=function(){return 3},e.prototype.encode=function(n){for(var s=new hn;n.hasMoreCharacters();){var c=n.getCurrentChar();if(n.pos++,this.encodeChar(c,s),s.length()%3==0&&(this.writeNextTriplet(n,s),Sr.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode())!==this.getEncodingMode())){n.signalEncoderChange(0);break}}this.handleEOD(n,s)},e.prototype.encodeChar=function(n,s){switch(n){case 13:s.append(0);break;case 42:s.append(1);break;case 62:s.append(2);break;case 32:s.append(3);break;default:n>=48&&n<=57?s.append(n-48+4):n>=65&&n<=90?s.append(n-65+14):Sr.illegalCharacter(mt.getCharAt(n))}return 1},e.prototype.handleEOD=function(n,s){n.updateSymbolInfo();var c=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),l=s.length();n.pos-=l,(n.getRemainingCharacters()>1||c>1||n.getRemainingCharacters()!==c)&&n.writeCodeword(254),n.getNewEncoding()<0&&n.signalEncoderChange(0)},e}(Ml),j0=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),rh=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return j0(e,i),e.prototype.getEncodingMode=function(){return 2},e.prototype.encodeChar=function(n,s){return 32===n?(s.append(3),1):n>=48&&n<=57?(s.append(n-48+4),1):n>=97&&n<=122?(s.append(n-97+14),1):n<32?(s.append(0),s.append(n),2):n<=47?(s.append(1),s.append(n-33),2):n<=64?(s.append(1),s.append(n-58+15),2):n>=91&&n<=95?(s.append(1),s.append(n-91+22),2):96===n?(s.append(2),s.append(0),2):n<=90?(s.append(2),s.append(n-65+1),2):n<=127?(s.append(2),s.append(n-123+27),2):(s.append("1\x1e"),2+this.encodeChar(n-128,s))},e}(Ml);const Sr=function(){function i(){}return i.randomize253State=function(e){var s=149*e%253+1+129;return s<=254?s:s-254},i.encodeHighLevel=function(e,n,s,c,l){void 0===n&&(n=0),void 0===s&&(s=null),void 0===c&&(c=null),void 0===l&&(l=!1);var g=new Ml,m=[new B0,g,new rh,new nh,new Sg,new xg],y=new U0(e);y.setSymbolShape(n),y.setSizeConstraints(s,c),e.startsWith(tl)&&e.endsWith("\x1e\x04")?(y.writeCodeword(236),y.setSkipAtEnd(2),y.pos+=7):e.startsWith(tf)&&e.endsWith("\x1e\x04")&&(y.writeCodeword(237),y.setSkipAtEnd(2),y.pos+=7);var b=0;for(l&&(g.encodeMaximal(y),b=y.getNewEncoding(),y.resetEncoderSignal());y.hasMoreCharacters();)m[b].encode(y),y.getNewEncoding()>=0&&(b=y.getNewEncoding(),y.resetEncoderSignal());var P=y.getCodewordCount();y.updateSymbolInfo();var B=y.getSymbolInfo().getDataCapacity();P<B&&0!==b&&5!==b&&4!==b&&y.writeCodeword("\xfe");var z=y.getCodewords();for(z.length()<B&&z.append(129);z.length()<B;)z.append(this.randomize253State(z.length()+1));return y.getCodewords().toString()},i.lookAheadTest=function(e,n,s){var c=this.lookAheadTestIntern(e,n,s);if(3===s&&3===c){for(var l=Math.min(n+3,e.length),g=n;g<l;g++)if(!this.isNativeX12(e.charCodeAt(g)))return 0}else if(4===s&&4===c)for(l=Math.min(n+4,e.length),g=n;g<l;g++)if(!this.isNativeEDIFACT(e.charCodeAt(g)))return 0;return c},i.lookAheadTestIntern=function(e,n,s){if(n>=e.length)return s;var c;0===s?c=[0,1,1,1,1,1.25]:(c=[1,2,2,2,2,2.25])[s]=0;for(var l=0,g=new Uint8Array(6),m=[];;){if(n+l===e.length){Jr.fill(g,0),Jr.fill(m,0);var y=this.findMinimums(c,m,cr.MAX_VALUE,g),b=this.getMinimumCount(g);if(m[0]===y)return 0;if(1===b){if(g[5]>0)return 5;if(g[4]>0)return 4;if(g[2]>0)return 2;if(g[3]>0)return 3}return 1}var P=e.charCodeAt(n+l);if(l++,this.isDigit(P)?c[0]+=.5:this.isExtendedASCII(P)?(c[0]=Math.ceil(c[0]),c[0]+=2):(c[0]=Math.ceil(c[0]),c[0]++),this.isNativeC40(P)?c[1]+=2/3:this.isExtendedASCII(P)?c[1]+=8/3:c[1]+=4/3,this.isNativeText(P)?c[2]+=2/3:this.isExtendedASCII(P)?c[2]+=8/3:c[2]+=4/3,this.isNativeX12(P)?c[3]+=2/3:this.isExtendedASCII(P)?c[3]+=13/3:c[3]+=10/3,this.isNativeEDIFACT(P)?c[4]+=3/4:this.isExtendedASCII(P)?c[4]+=4.25:c[4]+=3.25,this.isSpecialB256(P)?c[5]+=4:c[5]++,l>=4){if(Jr.fill(g,0),Jr.fill(m,0),this.findMinimums(c,m,cr.MAX_VALUE,g),m[0]<this.min(m[5],m[1],m[2],m[3],m[4]))return 0;if(m[5]<m[0]||m[5]+1<this.min(m[1],m[2],m[3],m[4]))return 5;if(m[4]+1<this.min(m[5],m[1],m[2],m[3],m[0]))return 4;if(m[2]+1<this.min(m[5],m[1],m[4],m[3],m[0]))return 2;if(m[3]+1<this.min(m[5],m[1],m[4],m[2],m[0]))return 3;if(m[1]+1<this.min(m[0],m[5],m[4],m[2])){if(m[1]<m[3])return 1;if(m[1]===m[3]){for(var B=n+l+1;B<e.length;){var z=e.charCodeAt(B);if(this.isX12TermSep(z))return 3;if(!this.isNativeX12(z))break;B++}return 1}}}}},i.min=function(e,n,s,c,l){var g=Math.min(e,Math.min(n,Math.min(s,c)));return void 0===l?g:Math.min(g,l)},i.findMinimums=function(e,n,s,c){for(var l=0;l<6;l++){var g=n[l]=Math.ceil(e[l]);s>g&&(s=g,Jr.fill(c,0)),s===g&&(c[l]=c[l]+1)}return s},i.getMinimumCount=function(e){for(var n=0,s=0;s<6;s++)n+=e[s];return n||0},i.isDigit=function(e){return e>=48&&e<=57},i.isExtendedASCII=function(e){return e>=128&&e<=255},i.isNativeC40=function(e){return 32===e||e>=48&&e<=57||e>=65&&e<=90},i.isNativeText=function(e){return 32===e||e>=48&&e<=57||e>=97&&e<=122},i.isNativeX12=function(e){return this.isX12TermSep(e)||32===e||e>=48&&e<=57||e>=65&&e<=90},i.isX12TermSep=function(e){return 13===e||42===e||62===e},i.isNativeEDIFACT=function(e){return e>=32&&e<=94},i.isSpecialB256=function(e){return!1},i.determineConsecutiveDigitCount=function(e,n){void 0===n&&(n=0);for(var s=e.length,c=n;c<s&&this.isDigit(e.charCodeAt(c));)c++;return c-n},i.illegalCharacter=function(e){var n=cr.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},i}();var ih=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H0=function(){function i(e){this.charset=e,this.name=e.name}return i.prototype.canEncode=function(e){try{return null!=we.encode(e,this.charset)}catch{return!1}},i}(),oh=function(){function i(e,n,s){var c,l,g,m,y,b;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(nr){return new H0(Jf.forName(nr))}),this.encoders=[];var P=[];P.push(new H0(c1.ISO_8859_1));for(var B=null!=n&&n.name.startsWith("UTF"),z=0;z<e.length;z++){var K=!1;try{for(var ae=(c=void 0,ih(P)),Ee=ae.next();!Ee.done;Ee=ae.next()){var Me=Ee.value,Le=e.charAt(z);if(Le.charCodeAt(0)===s||Me.canEncode(Le)){K=!0;break}}}catch(nr){c={error:nr}}finally{try{Ee&&!Ee.done&&(l=ae.return)&&l.call(ae)}finally{if(c)throw c.error}}if(!K)try{for(var Ye=(g=void 0,ih(this.ENCODERS)),at=Ye.next();!at.done;at=Ye.next())if((Me=at.value).canEncode(e.charAt(z))){P.push(Me),K=!0;break}}catch(nr){g={error:nr}}finally{try{at&&!at.done&&(m=Ye.return)&&m.call(Ye)}finally{if(g)throw g.error}}K||(B=!0)}if(1!==P.length||B){this.encoders=[];var Lt=0;try{for(var $t=ih(P),Jt=$t.next();!Jt.done;Jt=$t.next())this.encoders[Lt++]=Me=Jt.value}catch(nr){y={error:nr}}finally{try{Jt&&!Jt.done&&(b=$t.return)&&b.call($t)}finally{if(y)throw y.error}}}else this.encoders=[P[0]];var mn=-1;if(null!=n)for(z=0;z<this.encoders.length;z++)if(null!=this.encoders[z]&&n.name===this.encoders[z].name){mn=z;break}this.priorityEncoderIndex=mn}return i.prototype.length=function(){return this.encoders.length},i.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},i.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},i.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},i.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},i.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},i.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return we.encode(mt.getCharAt(e),this.encoders[n].name)},i}(),nl=function(){function i(e,n,s){this.fnc1=s;var c=new oh(e,n,s);if(1===c.length())for(var l=0;l<this.bytes.length;l++){var g=e.charAt(l).charCodeAt(0);this.bytes[l]=g===s?1e3:g}else this.bytes=this.encodeMinimally(e,c,s)}return i.prototype.getFNC1Character=function(){return this.fnc1},i.prototype.length=function(){return this.bytes.length},i.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var s=0;s<n;s++)if(this.isECI(e+s))return!1;return!0},i.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},i.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var s=new hn,c=e;c<n;c++){if(this.isECI(c))throw new Error("value at "+c+" is not a character but an ECI");s.append(this.charAt(c))}return s.toString()},i.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},i.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return 1e3===this.bytes[e]},i.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},i.prototype.addEdge=function(e,n,s){(null==e[n][s.encoderIndex]||e[n][s.encoderIndex].cachedTotalSize>s.cachedTotalSize)&&(e[n][s.encoderIndex]=s)},i.prototype.addEdges=function(e,n,s,c,l,g){var m=e.charAt(c).charCodeAt(0),y=0,b=n.length();n.getPriorityEncoderIndex()>=0&&(m===g||n.canEncode(m,n.getPriorityEncoderIndex()))&&(b=(y=n.getPriorityEncoderIndex())+1);for(var P=y;P<b;P++)(m===g||n.canEncode(m,P))&&this.addEdge(s,c+1,new lp(m,n,P,l,g))},i.prototype.encodeMinimally=function(e,n,s){var c=e.length,l=new(lp[c+1][n.length()]);this.addEdges(e,n,l,0,null,s);for(var g=1;g<=c;g++){for(var m=0;m<n.length();m++)null!=l[g][m]&&g<c&&this.addEdges(e,n,l,g,l[g][m],s);for(m=0;m<n.length();m++)l[g-1][m]=null}var y=-1,b=cr.MAX_VALUE;for(m=0;m<n.length();m++)if(null!=l[c][m]){var P=l[c][m];P.cachedTotalSize<b&&(b=P.cachedTotalSize,y=m)}if(y<0)throw new Error('Failed to encode "'+e+'"');for(var B=[],z=l[c][y];null!=z;){if(z.isFNC1())B.unshift(1e3);else{var K=n.encode(z.c,z.encoderIndex);for(g=K.length-1;g>=0;g--)B.unshift(255&K[g])}(null===z.previous?0:z.previous.encoderIndex)!==z.encoderIndex&&B.unshift(256+n.getECIValue(z.encoderIndex)),z=z.previous}var Ee=[];for(g=0;g<Ee.length;g++)Ee[g]=B[g];return Ee},i}(),lp=function(){function i(e,n,s,c,l){this.c=e,this.encoderSet=n,this.encoderIndex=s,this.previous=c,this.fnc1=l,this.c=e===l?1e3:e;var g=this.isFNC1()?1:n.encode(e,s).length;(null===c?0:c.encoderIndex)!==s&&(g+=3),null!=c&&(g+=c.cachedTotalSize),this.cachedTotalSize=g}return i.prototype.isFNC1=function(){return 1e3===this.c},i}(),s_=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Rc=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dg=function(i,e){var n="function"==typeof Symbol&&i[Symbol.iterator];if(!n)return i;var c,g,s=n.call(i),l=[];try{for(;(void 0===e||e-- >0)&&!(c=s.next()).done;)l.push(c.value)}catch(m){g={error:m}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(g)throw g.error}}return l},an=function(i){return i[i.ASCII=0]="ASCII",i[i.C40=1]="C40",i[i.TEXT=2]="TEXT",i[i.X12=3]="X12",i[i.EDF=4]="EDF",i[i.B256=5]="B256",i}(an||{}),Rg=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ys=function(){function i(){}return i.isExtendedASCII=function(e,n){return e!==n&&e>=128&&e<=255},i.isInC40Shift1Set=function(e){return e<=31},i.isInC40Shift2Set=function(e,n){var s,c;try{for(var l=Rc(Rg),g=l.next();!g.done;g=l.next())if(g.value.charCodeAt(0)===e)return!0}catch(y){s={error:y}}finally{try{g&&!g.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}return e===n},i.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},i.isInTextShift2Set=function(e,n){return this.isInC40Shift2Set(e,n)},i.encodeHighLevel=function(e,n,s,c){void 0===n&&(n=null),void 0===s&&(s=-1),void 0===c&&(c=0);var l=0;return e.startsWith(tl)&&e.endsWith("\x1e\x04")?(l=5,e=e.substring(7,e.length-2)):e.startsWith(tf)&&e.endsWith("\x1e\x04")&&(l=6,e=e.substring(7,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,function(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Dg(arguments[e]));return i}(this.encode(e,n,s,c,l)))))},i.encode=function(e,n,s,c,l){return this.encodeMinimally(new fp(e,n,s,c,l)).getBytes()},i.addEdge=function(e,n){var s=n.fromPosition+n.characterLength;(null===e[s][n.getEndMode()]||e[s][n.getEndMode()].cachedTotalSize>n.cachedTotalSize)&&(e[s][n.getEndMode()]=n)},i.getNumberOfC40Words=function(e,n,s,c){for(var l=0,g=n;g<e.length();g++){if(e.isECI(g))return c[0]=0,0;var m=e.charAt(g);if(s&&Sr.isNativeC40(m)||!s&&Sr.isNativeText(m))l++;else if(i.isExtendedASCII(m,e.getFNC1Character())){var y=255&m;y>=128&&(s&&Sr.isNativeC40(y-128)||!s&&Sr.isNativeText(y-128))?l+=3:l+=4}else l+=2;if(l%3==0||(l-2)%3==0&&g+1===e.length())return c[0]=g-n+1,Math.ceil(l/3)}return c[0]=0,0},i.addEdges=function(e,n,s,c){var l,g;if(e.isECI(s))this.addEdge(n,new Mc(e,an.ASCII,s,1,c));else{var K,m=e.charAt(s);if(null===c||c.getEndMode()!==an.EDF){Sr.isDigit(m)&&e.haveNCharacters(s,2)&&Sr.isDigit(e.charAt(s+1))?this.addEdge(n,new Mc(e,an.ASCII,s,2,c)):this.addEdge(n,new Mc(e,an.ASCII,s,1,c));var y=[an.C40,an.TEXT];try{for(var b=Rc(y),P=b.next();!P.done;P=b.next()){var B=P.value,z=[];i.getNumberOfC40Words(e,s,B===an.C40,z)>0&&this.addEdge(n,new Mc(e,B,s,z[0],c))}}catch(Ee){l={error:Ee}}finally{try{P&&!P.done&&(g=b.return)&&g.call(b)}finally{if(l)throw l.error}}e.haveNCharacters(s,3)&&Sr.isNativeX12(e.charAt(s))&&Sr.isNativeX12(e.charAt(s+1))&&Sr.isNativeX12(e.charAt(s+2))&&this.addEdge(n,new Mc(e,an.X12,s,3,c)),this.addEdge(n,new Mc(e,an.B256,s,1,c))}for(K=0;K<3;K++){var ae=s+K;if(!e.haveNCharacters(ae,1)||!Sr.isNativeEDIFACT(e.charAt(ae)))break;this.addEdge(n,new Mc(e,an.EDF,s,K+1,c))}3===K&&e.haveNCharacters(s,4)&&Sr.isNativeEDIFACT(e.charAt(s+3))&&this.addEdge(n,new Mc(e,an.EDF,s,4,c))}},i.encodeMinimally=function(e){var n=e.length(),s=Array(n+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,s,0,null);for(var c=1;c<=n;c++){for(var l=0;l<6;l++)null!==s[c][l]&&c<n&&this.addEdges(e,s,c,s[c][l]);for(l=0;l<6;l++)s[c-1][l]=null}var g=-1,m=cr.MAX_VALUE;for(l=0;l<6;l++)if(null!==s[n][l]){var y=s[n][l],b=l>=1&&l<=3?y.cachedTotalSize+1:y.cachedTotalSize;b<m&&(m=b,g=l)}if(g<0)throw new Error('Failed to encode "'+e+'"');return new dp(s[n][g])},i}(),dp=function(){function i(e){var n=e.input,s=0,c=[],l=[],g=[];(e.mode===an.C40||e.mode===an.TEXT||e.mode===an.X12)&&e.getEndMode()!==an.ASCII&&(s+=this.prepend(Mc.getBytes(254),c));for(var m=e;null!==m;)s+=this.prepend(m.getDataBytes(),c),(null===m.previous||m.getPreviousStartMode()!==m.getMode())&&(m.getMode()===an.B256&&(s<=249?(c.unshift(s),s++):(c.unshift(s%250),c.unshift(s/250+249),s+=2),l.push(c.length),g.push(s)),this.prepend(m.getLatchBytes(),c),s=0),m=m.previous;5===n.getMacroId()?s+=this.prepend(Mc.getBytes(236),c):6===n.getMacroId()&&(s+=this.prepend(Mc.getBytes(237),c)),n.getFNC1Character()>0&&(s+=this.prepend(Mc.getBytes(232),c));for(var y=0;y<l.length;y++)this.applyRandomPattern(c,c.length-l[y],g[y]);var b=e.getMinSymbolSize(c.length);for(c.length<b&&c.push(129);c.length<b;)c.push(this.randomize253State(c.length+1));for(this.bytes=new Uint8Array(c.length),y=0;y<this.bytes.length;y++)this.bytes[y]=c[y]}return i.prototype.prepend=function(e,n){for(var s=e.length-1;s>=0;s--)n.unshift(e[s]);return e.length},i.prototype.randomize253State=function(e){var s=149*e%253+1+129;return s<=254?s:s-254},i.prototype.applyRandomPattern=function(e,n,s){for(var c=0;c<s;c++){var l=n+c,y=149*(l+1)%255+1+(255&e[l]);e[l]=y<=255?y:y-256}},i.prototype.getBytes=function(){return this.bytes},i}(),Mc=function(){function i(e,n,s,c,l){if(this.input=e,this.mode=n,this.fromPosition=s,this.characterLength=c,this.previous=l,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(s+c<=e.length()))throw new Error("Invalid edge");var g=null!==l?l.cachedTotalSize:0,m=this.getPreviousMode();switch(n){case an.ASCII:g++,(e.isECI(s)||Ys.isExtendedASCII(e.charAt(s),e.getFNC1Character()))&&g++,(m===an.C40||m===an.TEXT||m===an.X12)&&g++;break;case an.B256:g++,(m!==an.B256||250===this.getB256Size())&&g++,m===an.ASCII?g++:(m===an.C40||m===an.TEXT||m===an.X12)&&(g+=2);break;case an.C40:case an.TEXT:case an.X12:g+=n===an.X12?2:2*Ys.getNumberOfC40Words(e,s,n===an.C40,[]),m===an.ASCII||m===an.B256?g++:m!==n&&(m===an.C40||m===an.TEXT||m===an.X12)&&(g+=2);break;case an.EDF:g+=3,m===an.ASCII||m===an.B256?g++:(m===an.C40||m===an.TEXT||m===an.X12)&&(g+=2)}this.cachedTotalSize=g}return i.prototype.getB256Size=function(){for(var e=0,n=this;null!==n&&n.mode===an.B256&&e<=250;)e++,n=n.previous;return e},i.prototype.getPreviousStartMode=function(){return null===this.previous?an.ASCII:this.previous.mode},i.prototype.getPreviousMode=function(){return null===this.previous?an.ASCII:this.previous.getEndMode()},i.prototype.getEndMode=function(){if(this.mode===an.EDF){if(this.characterLength<4)return an.ASCII;if((e=this.getLastASCII())>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return an.ASCII}if(this.mode===an.C40||this.mode===an.TEXT||this.mode===an.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return an.ASCII;var e;if(1===(e=this.getLastASCII())&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return an.ASCII}return this.mode},i.prototype.getMode=function(){return this.mode},i.prototype.getLastASCII=function(){var e=this.input.length(),n=this.fromPosition+this.characterLength;return e-n>4||n>=e?0:e-n==1?Ys.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())?0:1:e-n==2?Ys.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())||Ys.isExtendedASCII(this.input.charAt(n+1),this.input.getFNC1Character())?0:Sr.isDigit(this.input.charAt(n))&&Sr.isDigit(this.input.charAt(n+1))?1:2:e-n==3?Sr.isDigit(this.input.charAt(n))&&Sr.isDigit(this.input.charAt(n+1))&&!Ys.isExtendedASCII(this.input.charAt(n+2),this.input.getFNC1Character())||Sr.isDigit(this.input.charAt(n+1))&&Sr.isDigit(this.input.charAt(n+2))&&!Ys.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())?2:0:Sr.isDigit(this.input.charAt(n))&&Sr.isDigit(this.input.charAt(n+1))&&Sr.isDigit(this.input.charAt(n+2))&&Sr.isDigit(this.input.charAt(n+3))?2:0},i.prototype.getMinSymbolSize=function(e){var n,s,c,l,g,m;switch(this.input.getShapeHint()){case 1:try{for(var y=Rc(this.squareCodewordCapacities),b=y.next();!b.done;b=y.next())if((P=b.value)>=e)return P}catch(Ee){n={error:Ee}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(n)throw n.error}}break;case 2:try{for(var B=Rc(this.rectangularCodewordCapacities),z=B.next();!z.done;z=B.next())if((P=z.value)>=e)return P}catch(Ee){c={error:Ee}}finally{try{z&&!z.done&&(l=B.return)&&l.call(B)}finally{if(c)throw c.error}}}try{for(var K=Rc(this.allCodewordCapacities),ae=K.next();!ae.done;ae=K.next()){var P;if((P=ae.value)>=e)return P}}catch(Ee){g={error:Ee}}finally{try{ae&&!ae.done&&(m=K.return)&&m.call(K)}finally{if(g)throw g.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},i.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},i.getBytes=function(e,n){var s=new Uint8Array(n?2:1);return s[0]=e,n&&(s[1]=n),s},i.prototype.setC40Word=function(e,n,s,c,l){var g=1600*(255&s)+40*(255&c)+(255&l)+1;e[n]=g/256,e[n+1]=g%256},i.prototype.getX12Value=function(e){return 13===e?0:42===e?1:62===e?2:32===e?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},i.prototype.getX12Words=function(){if(this.characterLength%3!=0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),n=0;n<e.length;n+=2)this.setC40Word(e,n,this.getX12Value(this.input.charAt(this.fromPosition+n/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+n/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+n/2*3+2)));return e},i.prototype.getShiftValue=function(e,n,s){return n&&Ys.isInC40Shift1Set(e)||!n&&Ys.isInTextShift1Set(e)?0:n&&Ys.isInC40Shift2Set(e,s)||!n&&Ys.isInTextShift2Set(e,s)?1:2},i.prototype.getC40Value=function(e,n,s,c){if(s===c){if(2!==n)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?s<=31?s:32===s?3:s<=47?s-33:s<=57?s-44:s<=64?s-43:s<=90?s-51:s<=95?s-69:s<=127?s-96:s:0===s?0:0===n&&s<=3?s-1:1===n&&s<=31?s:32===s?3:s>=33&&s<=47?s-33:s>=48&&s<=57?s-44:s>=58&&s<=64?s-43:s>=65&&s<=90?s-64:s>=91&&s<=95?s-69:96===s?0:s>=97&&s<=122?s-83:s>=123&&s<=127?s-96:s},i.prototype.getC40Words=function(e,n){for(var s=[],c=0;c<this.characterLength;c++){var l=this.input.charAt(this.fromPosition+c);if(e&&Sr.isNativeC40(l)||!e&&Sr.isNativeText(l))s.push(this.getC40Value(e,0,l,n));else if(Ys.isExtendedASCII(l,n)){var m=(255&l)-128;if(e&&Sr.isNativeC40(m)||!e&&Sr.isNativeText(m))s.push(1),s.push(30),s.push(this.getC40Value(e,0,m,n));else{s.push(1),s.push(30);var g=this.getShiftValue(m,e,n);s.push(g),s.push(this.getC40Value(e,g,m,n))}}else g=this.getShiftValue(l,e,n),s.push(g),s.push(this.getC40Value(e,g,l,n))}if(s.length%3!=0){if((s.length-2)%3!=0||this.fromPosition+this.characterLength!==this.input.length())throw new Error("C40 words must be a multiple of 3");s.push(0)}var y=new Uint8Array(s.length/3*2),b=0;for(c=0;c<s.length;c+=3)this.setC40Word(y,b,255&s[c],255&s[c+1],255&s[c+2]),b+=2;return y},i.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),n=new Uint8Array(3*e),s=this.fromPosition,c=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),l=0;l<e;l+=3){for(var g=[],m=0;m<4;m++)g[m]=s<=c?63&this.input.charAt(s++):s===c+1?31:0;var y=g[0]<<18;y|=g[1]<<12,y|=g[2]<<6,n[l]=(y|=g[3])>>16&255,n[l+1]=y>>8&255,n[l+2]=255&y}return n},i.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case an.ASCII:case an.B256:switch(this.mode){case an.B256:return i.getBytes(231);case an.C40:return i.getBytes(230);case an.TEXT:return i.getBytes(239);case an.X12:return i.getBytes(238);case an.EDF:return i.getBytes(240)}break;case an.C40:case an.TEXT:case an.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case an.ASCII:return i.getBytes(254);case an.B256:return i.getBytes(254,231);case an.C40:return i.getBytes(254,230);case an.TEXT:return i.getBytes(254,239);case an.X12:return i.getBytes(254,238);case an.EDF:return i.getBytes(254,240)}break;case an.EDF:if(this.mode!==an.EDF)throw new Error("Cannot switch from EDF to "+this.mode)}return new Uint8Array(0)},i.prototype.getDataBytes=function(){switch(this.mode){case an.ASCII:return this.input.isECI(this.fromPosition)?i.getBytes(241,this.input.getECIValue(this.fromPosition)+1):Ys.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?i.getBytes(235,this.input.charAt(this.fromPosition)-127):2===this.characterLength?i.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?i.getBytes(232):i.getBytes(this.input.charAt(this.fromPosition)+1);case an.B256:return i.getBytes(this.input.charAt(this.fromPosition));case an.C40:return this.getC40Words(!0,this.input.getFNC1Character());case an.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case an.X12:return this.getX12Words();case an.EDF:return this.getEDFBytes()}},i}(),fp=function(i){function e(n,s,c,l,g){var m=i.call(this,n,s,c)||this;return m.shape=l,m.macroId=g,m}return s_(e,i),e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(nl);!function(){function i(){}i.prototype.encode=function(e,n,s,c,l){if(void 0===l&&(l=null),""===e.trim())throw new Error("Found empty contents");if(n!==cn.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+n);if(s<0||c<0)throw new Error("Requested dimensions can't be negative: "+s+"x"+c);var z,g=0,m=null,y=null;if(null!=l){var b=l.get(br.DATA_MATRIX_SHAPE);null!=b&&(g=b);var P=l.get(br.MIN_SIZE);null!=P&&(m=P);var B=l.get(br.MAX_SIZE);null!=B&&(y=B)}if(null!=l&&l.has(br.DATA_MATRIX_COMPACT)&&l.get(br.DATA_MATRIX_COMPACT).toString()){var ae=l.has(br.GS1_FORMAT)&&!!l.get(br.GS1_FORMAT).toString(),Ee=null;l.has(br.CHARACTER_SET)&&(Ee=Jf.forName(l.get(br.CHARACTER_SET).toString())),z=Ys.encodeHighLevel(e,Ee,ae?29:-1,g)}else{var Le=null!=l&&l.has(br.FORCE_C40)&&!!l.get(br.FORCE_C40).toString();z=Sr.encodeHighLevel(e,g,m,y,Le)}var ke=rf.lookup(z.length,g,m,y,!0),Ye=n_.encodeECC200(z,ke),at=new wa(Ye,ke.getSymbolDataWidth(),ke.getSymbolDataHeight());return at.place(),this.encodeLowLevel(at,ke,s,c)},i.prototype.encodeLowLevel=function(e,n,s,c){for(var l=n.getSymbolDataWidth(),g=n.getSymbolDataHeight(),m=new Xm(n.getSymbolWidth(),n.getSymbolHeight()),y=0,b=0;b<g;b++){var P=void 0;if(b%n.matrixHeight==0){P=0;for(var B=0;B<n.getSymbolWidth();B++)m.setBoolean(P,y,B%2==0),P++;y++}for(P=0,B=0;B<l;B++)B%n.matrixWidth==0&&(m.setBoolean(P,y,!0),P++),m.setBoolean(P,y,e.getBit(B,b)),P++,B%n.matrixWidth==n.matrixWidth-1&&(m.setBoolean(P,y,b%2==0),P++);if(y++,b%n.matrixHeight==n.matrixHeight-1){for(P=0,B=0;B<n.getSymbolWidth();B++)m.setBoolean(P,y,!0),P++;y++}}return this.convertByteMatrixToBitMatrix(m,s,c)},i.prototype.convertByteMatrixToBitMatrix=function(e,n,s){var B,c=e.getWidth(),l=e.getHeight(),g=Math.max(n,c),m=Math.max(s,l),y=Math.min(g/c,m/l),b=(g-c*y)/2,P=(m-l*y)/2;s<l||n<c?(b=0,P=0,B=new rr(c,l)):B=new rr(n,s),B.clear();for(var z=0,K=P;z<l;z++,K+=y)for(var ae=0,Ee=b;ae<c;ae++,Ee+=y)1===e.get(ae,z)&&B.setRegion(Ee,K,y,y);return B}}();const hp=function(){function i(){}return i.prototype.isCompact=function(){return this.compact},i.prototype.setCompact=function(e){this.compact=e},i.prototype.getSize=function(){return this.size},i.prototype.setSize=function(e){this.size=e},i.prototype.getLayers=function(){return this.layers},i.prototype.setLayers=function(e){this.layers=e},i.prototype.getCodeWords=function(){return this.codeWords},i.prototype.setCodeWords=function(e){this.codeWords=e},i.prototype.getMatrix=function(){return this.matrix},i.prototype.setMatrix=function(e){this.matrix=e},i}(),Og=function(){function i(){}return i.singletonList=function(e){return[e]},i.min=function(e,n){return e.sort(n)[0]},i}(),W0=function(){function i(e){this.previous=e}return i.prototype.getPrevious=function(){return this.previous},i}();var l1=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ou=function(i){function e(n,s,c){var l=i.call(this,n)||this;return l.value=s,l.bitCount=c,l}return l1(e,i),e.prototype.appendTo=function(n,s){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,s){return new e(this,n,s)},e.prototype.addBinaryShift=function(n,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,s)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return"<"+cr.toBinaryString((n|=1<<this.bitCount)|1<<this.bitCount).substring(1)+">"},e}(W0);var Ol=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const ch=function(i){function e(n,s,c){var l=i.call(this,n,0,0)||this;return l.binaryShiftStart=s,l.binaryShiftByteCount=c,l}return Ol(e,i),e.prototype.appendTo=function(n,s){for(var c=0;c<this.binaryShiftByteCount;c++)(0===c||31===c&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):n.appendBits(0===c?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),n.appendBits(s[this.binaryShiftStart+c],8)},e.prototype.addBinaryShift=function(n,s){return new e(this,n,s)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Ou);function Pl(i,e,n){return new Ou(i,e,n)}var q0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],c_=new Ou(null,0,0),mp=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],dh=function u_(i){var e,n;try{for(var s=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),c=s.next();!c.done;c=s.next())Jr.fill(c.value,-1)}catch(g){e={error:g}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i[0][4]=0,i[1][4]=0,i[1][0]=28,i[3][4]=0,i[2][4]=0,i[2][0]=15,i}(Jr.createInt32Array(6,6));const af=function(){function i(e,n,s,c){this.token=e,this.mode=n,this.binaryShiftByteCount=s,this.bitCount=c}return i.prototype.getMode=function(){return this.mode},i.prototype.getToken=function(){return this.token},i.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},i.prototype.getBitCount=function(){return this.bitCount},i.prototype.latchAndAppend=function(e,n){var s=this.bitCount,c=this.token;if(e!==this.mode){var l=mp[this.mode][e];c=Pl(c,65535&l,l>>16),s+=l>>16}var g=2===e?4:5;return new i(c=Pl(c,n,g),e,0,s+g)},i.prototype.shiftAndAppend=function(e,n){var s=this.token,c=2===this.mode?4:5;return s=Pl(s,dh[this.mode][e],c),new i(s=Pl(s,n,5),this.mode,0,this.bitCount+c+5)},i.prototype.addBinaryShiftChar=function(e){var n=this.token,s=this.mode,c=this.bitCount;if(4===this.mode||2===this.mode){var l=mp[s][0];n=Pl(n,65535&l,l>>16),c+=l>>16,s=0}var m=new i(n,s,this.binaryShiftByteCount+1,c+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===m.binaryShiftByteCount&&(m=m.endBinaryShift(e+1)),m},i.prototype.endBinaryShift=function(e){if(0===this.binaryShiftByteCount)return this;var n=this.token;return n=function d1(i,e,n){return new ch(i,e,n)}(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new i(n,this.mode,0,this.bitCount)},i.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(mp[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=i.calculateBinaryShiftCost(e)-i.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},i.prototype.toBitArray=function(e){for(var n,s,c=[],l=this.endBinaryShift(e.length).token;null!==l;l=l.getPrevious())c.unshift(l);var g=new Ci;try{for(var m=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),y=m.next();!y.done;y=m.next())y.value.appendTo(g,e)}catch(P){n={error:P}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}return g},i.prototype.toString=function(){return mt.format("%s bits=%d bytes=%d",q0[this.mode],this.bitCount,this.binaryShiftByteCount)},i.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},i.INITIAL_STATE=new i(c_,0,0,0),i}();var Pg=function fh(i){var e=mt.getCharCode(" "),n=mt.getCharCode("."),s=mt.getCharCode(",");i[0][e]=1;for(var c=mt.getCharCode("Z"),l=mt.getCharCode("A"),g=l;g<=c;g++)i[0][g]=g-l+2;i[1][e]=1;var m=mt.getCharCode("z"),y=mt.getCharCode("a");for(g=y;g<=m;g++)i[1][g]=g-y+2;i[2][e]=1;var b=mt.getCharCode("9"),P=mt.getCharCode("0");for(g=P;g<=b;g++)i[2][g]=g-P+2;i[2][s]=12,i[2][n]=13;for(var B=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],z=0;z<B.length;z++)i[3][mt.getCharCode(B[z])]=z;var K=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(z=0;z<K.length;z++)mt.getCharCode(K[z])>0&&(i[4][mt.getCharCode(K[z])]=z);return i}(Jr.createInt32Array(5,256)),_p=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Ng=function(){function i(e){this.text=e}return i.prototype.encode=function(){for(var e=mt.getCharCode(" "),n=mt.getCharCode("\n"),s=Og.singletonList(af.INITIAL_STATE),c=0;c<this.text.length;c++){var l=void 0,g=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case mt.getCharCode("\r"):l=g===n?2:0;break;case mt.getCharCode("."):l=g===e?3:0;break;case mt.getCharCode(","):l=g===e?4:0;break;case mt.getCharCode(":"):l=g===e?5:0;break;default:l=0}l>0?(s=i.updateStateListForPair(s,c,l),c++):s=this.updateStateListForChar(s,c)}return Og.min(s,function(y,b){return y.getBitCount()-b.getBitCount()}).toBitArray(this.text)},i.prototype.updateStateListForChar=function(e,n){var s,c,l=[];try{for(var g=_p(e),m=g.next();!m.done;m=g.next())this.updateStateForChar(m.value,n,l)}catch(b){s={error:b}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}return i.simplifyStates(l)},i.prototype.updateStateForChar=function(e,n,s){for(var c=255&this.text[n],l=Pg[e.getMode()][c]>0,g=null,m=0;m<=4;m++){var y=Pg[m][c];if(y>0){if(null==g&&(g=e.endBinaryShift(n)),!l||m===e.getMode()||2===m){var b=g.latchAndAppend(m,y);s.push(b)}if(!l&&dh[e.getMode()][m]>=0){var P=g.shiftAndAppend(m,y);s.push(P)}}}if(e.getBinaryShiftByteCount()>0||0===Pg[e.getMode()][c]){var B=e.addBinaryShiftChar(n);s.push(B)}},i.updateStateListForPair=function(e,n,s){var c,l,g=[];try{for(var m=_p(e),y=m.next();!y.done;y=m.next())this.updateStateForPair(y.value,n,s,g)}catch(P){c={error:P}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}return this.simplifyStates(g)},i.updateStateForPair=function(e,n,s,c){var l=e.endBinaryShift(n);if(c.push(l.latchAndAppend(4,s)),4!==e.getMode()&&c.push(l.shiftAndAppend(4,s)),3===s||4===s){var g=l.latchAndAppend(2,16-s).latchAndAppend(2,1);c.push(g)}if(e.getBinaryShiftByteCount()>0){var m=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);c.push(m)}},i.simplifyStates=function(e){var n,s,c,l,g=[];try{for(var m=_p(e),y=m.next();!y.done;y=m.next()){var b=y.value,P=!0,B=function(Me){if(Me.isBetterThanOrEqualTo(b))return P=!1,"break";b.isBetterThanOrEqualTo(Me)&&(g=g.filter(function(Le){return Le!==Me}))};try{for(var z=(c=void 0,_p(g)),K=z.next();!K.done&&"break"!==B(K.value);K=z.next());}catch(Me){c={error:Me}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}P&&g.push(b)}}catch(Me){n={error:Me}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}return g},i}(),d_=function(){function i(){}return i.encodeBytes=function(e){return i.encode(e,i.DEFAULT_EC_PERCENT,i.DEFAULT_AZTEC_LAYERS)},i.encode=function(e,n,s){var m,y,b,P,B,c=new Ng(e).encode(),l=cr.truncDivision(c.getSize()*n,100)+11,g=c.getSize()+l;if(s!==i.DEFAULT_AZTEC_LAYERS){if(m=s<0,(y=Math.abs(s))>(m?i.MAX_NB_BITS_COMPACT:i.MAX_NB_BITS))throw new fn(mt.format("Illegal value %s for layers",s));var z=(b=i.totalBitsInLayer(y,m))-b%(P=i.WORD_SIZE[y]);if((B=i.stuffBits(c,P)).getSize()+l>z)throw new fn("Data to large for user specified layer");if(m&&B.getSize()>64*P)throw new fn("Data to large for user specified layer")}else{P=0,B=null;for(var K=0;;K++){if(K>i.MAX_NB_BITS)throw new fn("Data too large for an Aztec code");if(!(g>(b=i.totalBitsInLayer(y=(m=K<=3)?K+1:K,m)))&&((null==B||P!==i.WORD_SIZE[y])&&(B=i.stuffBits(c,P=i.WORD_SIZE[y])),z=b-b%P,!(m&&B.getSize()>64*P)&&B.getSize()+l<=z))break}}var Ye,ae=i.generateCheckWords(B,b,P),Ee=B.getSize()/P,Me=i.generateModeMessage(m,y,Ee),Le=(m?11:14)+4*y,ke=new Int32Array(Le);if(m)for(Ye=Le,K=0;K<ke.length;K++)ke[K]=K;else{Ye=Le+1+2*cr.truncDivision(cr.truncDivision(Le,2)-1,15);var at=cr.truncDivision(Le,2),Lt=cr.truncDivision(Ye,2);for(K=0;K<at;K++){var $t=K+cr.truncDivision(K,15);ke[at-K-1]=Lt-$t-1,ke[at+K]=Lt+$t+1}}for(var Jt=new rr(Ye),mn=(K=0,0);K<y;K++){for(var nr=4*(y-K)+(m?9:12),ur=0;ur<nr;ur++)for(var ss=2*ur,oi=0;oi<2;oi++)ae.get(mn+ss+oi)&&Jt.set(ke[2*K+oi],ke[2*K+ur]),ae.get(mn+2*nr+ss+oi)&&Jt.set(ke[2*K+ur],ke[Le-1-2*K-oi]),ae.get(mn+4*nr+ss+oi)&&Jt.set(ke[Le-1-2*K-oi],ke[Le-1-2*K-ur]),ae.get(mn+6*nr+ss+oi)&&Jt.set(ke[Le-1-2*K-ur],ke[2*K+oi]);mn+=8*nr}if(i.drawModeMessage(Jt,m,Ye,Me),m)i.drawBullsEye(Jt,cr.truncDivision(Ye,2),5);else for(i.drawBullsEye(Jt,cr.truncDivision(Ye,2),7),K=0,ur=0;K<cr.truncDivision(Le,2)-1;K+=15,ur+=16)for(oi=1&cr.truncDivision(Ye,2);oi<Ye;oi+=2)Jt.set(cr.truncDivision(Ye,2)-ur,oi),Jt.set(cr.truncDivision(Ye,2)+ur,oi),Jt.set(oi,cr.truncDivision(Ye,2)-ur),Jt.set(oi,cr.truncDivision(Ye,2)+ur);var Fo=new hp;return Fo.setCompact(m),Fo.setSize(Ye),Fo.setLayers(y),Fo.setCodeWords(Ee),Fo.setMatrix(Jt),Fo},i.drawBullsEye=function(e,n,s){for(var c=0;c<s;c+=2)for(var l=n-c;l<=n+c;l++)e.set(l,n-c),e.set(l,n+c),e.set(n-c,l),e.set(n+c,l);e.set(n-s,n-s),e.set(n-s+1,n-s),e.set(n-s,n-s+1),e.set(n+s,n-s),e.set(n+s,n-s+1),e.set(n+s,n+s-1)},i.generateModeMessage=function(e,n,s){var c=new Ci;return e?(c.appendBits(n-1,2),c.appendBits(s-1,6),c=i.generateCheckWords(c,28,4)):(c.appendBits(n-1,5),c.appendBits(s-1,11),c=i.generateCheckWords(c,40,4)),c},i.drawModeMessage=function(e,n,s,c){var l=cr.truncDivision(s,2);if(n)for(var g=0;g<7;g++){var m=l-3+g;c.get(g)&&e.set(m,l-5),c.get(g+7)&&e.set(l+5,m),c.get(20-g)&&e.set(m,l+5),c.get(27-g)&&e.set(l-5,m)}else for(g=0;g<10;g++)m=l-5+g+cr.truncDivision(g,5),c.get(g)&&e.set(m,l-7),c.get(g+10)&&e.set(l+7,m),c.get(29-g)&&e.set(m,l+7),c.get(39-g)&&e.set(l-7,m)},i.generateCheckWords=function(e,n,s){var c,l,g=e.getSize()/s,m=new yg(i.getGF(s)),y=cr.truncDivision(n,s),b=i.bitsToWords(e,s,y);m.encode(b,y-g);var P=n%s,B=new Ci;B.appendBits(0,P);try{for(var z=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(b)),K=z.next();!K.done;K=z.next())B.appendBits(K.value,s)}catch(Ee){c={error:Ee}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}return B},i.bitsToWords=function(e,n,s){var l,g,c=new Int32Array(s);for(l=0,g=e.getSize()/n;l<g;l++){for(var m=0,y=0;y<n;y++)m|=e.get(l*n+y)?1<<n-y-1:0;c[l]=m}return c},i.getGF=function(e){switch(e){case 4:return pi.AZTEC_PARAM;case 6:return pi.AZTEC_DATA_6;case 8:return pi.AZTEC_DATA_8;case 10:return pi.AZTEC_DATA_10;case 12:return pi.AZTEC_DATA_12;default:throw new fn("Unsupported word size "+e)}},i.stuffBits=function(e,n){for(var s=new Ci,c=e.getSize(),l=(1<<n)-2,g=0;g<c;g+=n){for(var m=0,y=0;y<n;y++)(g+y>=c||e.get(g+y))&&(m|=1<<n-1-y);(m&l)===l?(s.appendBits(m&l,n),g--):m&l?s.appendBits(m,n):(s.appendBits(1|m,n),g--)}return s},i.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},i.DEFAULT_EC_PERCENT=33,i.DEFAULT_AZTEC_LAYERS=0,i.MAX_NB_BITS=32,i.MAX_NB_BITS_COMPACT=4,i.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),i}();!function(){function i(){}i.prototype.encode=function(e,n,s,c){return this.encodeWithHints(e,n,s,c,null)},i.prototype.encodeWithHints=function(e,n,s,c,l){var g=c1.ISO_8859_1,m=d_.DEFAULT_EC_PERCENT,y=d_.DEFAULT_AZTEC_LAYERS;return null!=l&&(l.has(br.CHARACTER_SET)&&(g=Jf.forName(l.get(br.CHARACTER_SET).toString())),l.has(br.ERROR_CORRECTION)&&(m=cr.parseInt(l.get(br.ERROR_CORRECTION).toString())),l.has(br.AZTEC_LAYERS)&&(y=cr.parseInt(l.get(br.AZTEC_LAYERS).toString()))),i.encodeLayers(e,n,s,c,g,m,y)},i.encodeLayers=function(e,n,s,c,l,g,m){if(n!==cn.AZTEC)throw new fn("Can only encode AZTEC, but got "+n);var y=d_.encode(mt.getBytes(e,l),g,m);return i.renderResult(y,s,c)},i.renderResult=function(e,n,s){var c=e.getMatrix();if(null==c)throw new gs;for(var l=c.getWidth(),g=c.getHeight(),m=Math.max(n,l),y=Math.max(s,g),b=Math.min(m/l,y/g),P=(m-l*b)/2,B=(y-g*b)/2,z=new rr(m,y),K=0,ae=B;K<g;K++,ae+=b)for(var Ee=0,Me=P;Ee<l;Ee++,Me+=b)c.get(Ee,K)&&z.setRegion(Me,ae,b,b);return z}}();var h_=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),p_=function(i){function e(n){var s=i.call(this,n.width,n.height)||this;return s.canvas=n,s.tempCanvasElement=null,s.buffer=e.makeBufferFromCanvasImageData(n),s}return h_(e,i),e.makeBufferFromCanvasImageData=function(n){var s;try{s=n.getContext("2d",{willReadFrequently:!0})}catch{s=n.getContext("2d")}if(!s)throw new Error("Couldn't get canvas context.");var c=s.getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(c.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,s,c){for(var l=new Uint8ClampedArray(s*c),g=0,m=0,y=n.length;g<y;g+=4,m++){l[m]=0===n[g+3]?255:306*n[g]+601*n[g+1]+117*n[g+2]+512>>10}return l},e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new fn("Requested row is outside the image: "+n);var c=this.getWidth(),l=n*c;return null===s?s=this.buffer.slice(l,l+c):(s.length<c&&(s=new Uint8ClampedArray(c)),s.set(this.buffer.slice(l,l+c))),s},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return i.prototype.crop.call(this,n,s,c,l),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Mo(this)},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var s=this.getTempCanvasElement();if(!s)throw new Error("Could not create a Canvas element.");var c=n*e.DEGREE_TO_RADIANS,l=this.canvas.width,g=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*l+Math.abs(Math.sin(c))*g),y=Math.ceil(Math.abs(Math.sin(c))*l+Math.abs(Math.cos(c))*g);s.width=m,s.height=y;var b=s.getContext("2d");if(!b)throw new Error("Could not create a Canvas Context element.");return b.translate(m/2,y/2),b.rotate(c),b.drawImage(this.canvas,l/-2,g/-2),this.buffer=e.makeBufferFromCanvasImageData(s),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(_n);function kg(){return typeof navigator<"u"}var uf=function(){return uf=Object.assign||function(i){for(var e,n=1,s=arguments.length;n<s;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(i[c]=e[c]);return i},uf.apply(this,arguments)},Io=function(i,e,n,s){return new(n||(n=Promise))(function(l,g){function m(P){try{b(s.next(P))}catch(B){g(B)}}function y(P){try{b(s.throw(P))}catch(B){g(B)}}function b(P){P.done?l(P.value):function c(l){return l instanceof n?l:new n(function(g){g(l)})}(P.value).then(m,y)}b((s=s.apply(i,e||[])).next())})},xi=function(i,e){var s,c,l,g,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return g={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function m(b){return function(P){return function y(b){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,c&&(l=2&b[0]?c.return:b[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,b[1])).done)return l;switch(c=0,l&&(b=[2&b[0],l.value]),b[0]){case 0:case 1:l=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===b[0]||2===b[0])){n=0;continue}if(3===b[0]&&(!l||b[1]>l[0]&&b[1]<l[3])){n.label=b[1];break}if(6===b[0]&&n.label<l[1]){n.label=l[1],l=b;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(b);break}l[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(i,n)}catch(P){b=[6,P],c=0}finally{s=l=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,P])}}},Fg=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f1={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Zs=function(){function i(e,n,s){void 0===n&&(n=new Map),void 0===s&&(s={}),this.reader=e,this.hints=n,this.options=uf(uf({},f1),s)}return Object.defineProperty(i.prototype,"possibleFormats",{set:function(e){this.hints.set(Gn.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),i.addVideoSource=function(e,n){try{e.srcObject=n}catch{console.error("got interrupted by new loading request")}},i.mediaStreamSetTorch=function(e,n){return Io(this,void 0,void 0,function(){return xi(this,function(s){switch(s.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:n?"flash":"off",torch:!!n}]})];case 1:return s.sent(),[2]}})})},i.mediaStreamIsTorchCompatible=function(e){var n,s,c=e.getVideoTracks();try{for(var l=Fg(c),g=l.next();!g.done;g=l.next())if(i.mediaStreamIsTorchCompatibleTrack(g.value))return!0}catch(y){n={error:y}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return!1},i.mediaStreamIsTorchCompatibleTrack=function(e){try{return"torch"in e.getCapabilities()}catch(s){return console.error(s),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},i.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},i.getMediaElement=function(e,n){var s=document.getElementById(e);if(!s)throw new Zr("element with id '".concat(e,"' not found"));if(s.nodeName.toLowerCase()!==n.toLowerCase())throw new Zr("element with id '".concat(e,"' must be an ").concat(n," element"));return s},i.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if("string"==typeof e)return i.getMediaElement(e,"video");if(!e&&typeof document<"u"){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},i.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if("string"==typeof e)return i.getMediaElement(e,"img");if(typeof e>"u"){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},i.prepareVideoElement=function(e){var n=i.createVideoElement(e);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},i.isImageLoaded=function(e){return!(!e.complete||0===e.naturalWidth)},i.createBinaryBitmapFromCanvas=function(e){var n=new p_(e),s=new Oi(n);return new jc(s)},i.drawImageOnCanvas=function(e,n){e.drawImage(n,0,0)},i.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},i.createCaptureCanvas=function(e){if(!e)throw new Zr("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var n=document.createElement("canvas"),s=i.getMediaElementDimensions(e),c=s.width,l=s.height;return n.style.width=c+"px",n.style.height=l+"px",n.width=c,n.height=l,n},i.tryPlayVideo=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(s){switch(s.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(i.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.play()];case 2:return s.sent(),[2,!0];case 3:return n=s.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}})})},i.createCanvasFromMediaElement=function(e){var n=i.createCaptureCanvas(e),s=n.getContext("2d");if(!s)throw new Error("Couldn't find Canvas 2D Context.");return i.drawImageOnCanvas(s,e),n},i.createBinaryBitmapFromMediaElem=function(e){var n=i.createCanvasFromMediaElement(e);return i.createBinaryBitmapFromCanvas(n)},i.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},i.listVideoInputDevices=function(){return Io(this,void 0,void 0,function(){var e,n,s,c,l,g,m,y,B,z;return xi(this,function(K){switch(K.label){case 0:if(!kg())throw new Error("Can't enumerate devices, navigator is not present.");if(!function Q0(){return!(!function g_(){return kg()&&!!navigator.mediaDevices}()||!navigator.mediaDevices.enumerateDevices)}())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=K.sent(),n=[];try{for(s=Fg(e),c=s.next();!c.done;c=s.next())"videoinput"===(g="video"===(l=c.value).kind?"videoinput":l.kind)&&(m=l.deviceId||l.id,y=l.label||"Video device ".concat(n.length+1),n.push({deviceId:m,label:y,kind:g,groupId:l.groupId}))}catch(ae){B={error:ae}}finally{try{c&&!c.done&&(z=s.return)&&z.call(s)}finally{if(B)throw B.error}}return[2,n]}})})},i.findDeviceById=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(s){switch(s.label){case 0:return[4,i.listVideoInputDevices()];case 1:return(n=s.sent())?[2,n.find(function(c){return c.deviceId===e})]:[2]}})})},i.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},i.releaseAllStreams=function(){0!==i.streamTracker.length&&i.streamTracker.forEach(function(e){e.getTracks().forEach(function(n){return n.stop()})}),i.streamTracker=[]},i.playVideoOnLoadAsync=function(e,n){return Io(this,void 0,void 0,function(){return xi(this,function(c){switch(c.label){case 0:return[4,i.tryPlayVideo(e)];case 1:return c.sent()?[2,!0]:[2,new Promise(function(l,g){var m=setTimeout(function(){i.isVideoPlaying(e)||(g(!1),e.removeEventListener("canplay",y))},n),y=function(){i.tryPlayVideo(e).then(function(b){clearTimeout(m),e.removeEventListener("canplay",y),l(b)})};e.addEventListener("canplay",y)})]}})})},i.attachStreamToVideo=function(e,n,s){return void 0===s&&(s=5e3),Io(this,void 0,void 0,function(){var c;return xi(this,function(l){switch(l.label){case 0:return c=i.prepareVideoElement(n),i.addVideoSource(c,e),[4,i.playVideoOnLoadAsync(c,s)];case 1:return l.sent(),[2,c]}})})},i._waitImageLoad=function(e){return new Promise(function(n,s){var l=setTimeout(function(){i.isImageLoaded(e)||(e.removeEventListener("load",g),s())},1e4),g=function(){clearTimeout(l),e.removeEventListener("load",g),n()};e.addEventListener("load",g)})},i.checkCallbackFnOrThrow=function(e){if(!e)throw new Zr("`callbackFn` is a required parameter, you cannot capture results without it.")},i.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(n){return n.stop()}),e=void 0},i.prototype.decode=function(e){var n=i.createCanvasFromMediaElement(e);return this.decodeFromCanvas(n)},i.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},i.prototype.decodeFromCanvas=function(e){var n=i.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(n)},i.prototype.decodeFromImageElement=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(s){switch(s.label){case 0:if(!e)throw new Zr("An image element must be provided.");return n=i.prepareImageElement(e),[4,this._decodeOnLoadImage(n)];case 1:return[2,s.sent()]}})})},i.prototype.decodeFromImageUrl=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(s){switch(s.label){case 0:if(!e)throw new Zr("An URL must be provided.");(n=i.prepareImageElement()).src=e,s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,s.sent()];case 3:return i.destroyImageElement(n),[7];case 4:return[2]}})})},i.prototype.decodeFromConstraints=function(e,n,s){return Io(this,void 0,void 0,function(){var c,l;return xi(this,function(g){switch(g.label){case 0:return i.checkCallbackFnOrThrow(s),[4,this.getUserMedia(e)];case 1:c=g.sent(),g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.decodeFromStream(c,n,s)];case 3:return[2,g.sent()];case 4:throw l=g.sent(),i.disposeMediaStream(c),l;case 5:return[2]}})})},i.prototype.decodeFromStream=function(e,n,s){return Io(this,void 0,void 0,function(){var l,m,y,b,B,z,K=this;return xi(this,function(ae){switch(ae.label){case 0:return i.checkCallbackFnOrThrow(s),[4,i.attachStreamToVideo(e,n,this.options.tryPlayVideoTimeout)];case 1:return l=ae.sent(),m=this.scan(l,s,function(){i.disposeMediaStream(e),i.cleanVideoSource(l)}),y=e.getVideoTracks(),b=uf(uf({},m),{stop:function(){m.stop()},streamVideoConstraintsApply:function(Ee,Me){return Io(this,void 0,void 0,function(){var Le,ke,Ye,Lt,$t,Jt;return xi(this,function(mn){switch(mn.label){case 0:Le=Me?y.filter(Me):y,mn.label=1;case 1:mn.trys.push([1,6,7,8]),ke=Fg(Le),Ye=ke.next(),mn.label=2;case 2:return Ye.done?[3,5]:[4,Ye.value.applyConstraints(Ee)];case 3:mn.sent(),mn.label=4;case 4:return Ye=ke.next(),[3,2];case 5:return[3,8];case 6:return Lt=mn.sent(),$t={error:Lt},[3,8];case 7:try{Ye&&!Ye.done&&(Jt=ke.return)&&Jt.call(ke)}finally{if($t)throw $t.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(Ee){return y.find(Ee).getConstraints()},streamVideoSettingsGet:function(Ee){return y.find(Ee).getSettings()},streamVideoCapabilitiesGet:function(Ee){return y.find(Ee).getCapabilities()}}),i.mediaStreamIsTorchCompatible(e)&&(B=y?.find(function(Ee){return i.mediaStreamIsTorchCompatibleTrack(Ee)}),b.switchTorch=z=function(Ee){return Io(K,void 0,void 0,function(){return xi(this,function(Me){switch(Me.label){case 0:return[4,i.mediaStreamSetTorch(B,Ee)];case 1:return Me.sent(),[2]}})})},b.stop=function(){return Io(K,void 0,void 0,function(){return xi(this,function(Ee){switch(Ee.label){case 0:return m.stop(),[4,z(!1)];case 1:return Ee.sent(),[2]}})})}),[2,b]}})})},i.prototype.decodeFromVideoDevice=function(e,n,s){return Io(this,void 0,void 0,function(){return xi(this,function(g){switch(g.label){case 0:return i.checkCallbackFnOrThrow(s),[4,this.decodeFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n,s)];case 1:return[2,g.sent()]}})})},i.prototype.decodeFromVideoElement=function(e,n){return Io(this,void 0,void 0,function(){var s;return xi(this,function(l){switch(l.label){case 0:if(i.checkCallbackFnOrThrow(n),!e)throw new Zr("A video element must be provided.");return s=i.prepareVideoElement(e),[4,i.playVideoOnLoadAsync(s,this.options.tryPlayVideoTimeout)];case 1:return l.sent(),[2,this.scan(s,n)]}})})},i.prototype.decodeFromVideoUrl=function(e,n){return Io(this,void 0,void 0,function(){var s,c;return xi(this,function(m){switch(m.label){case 0:if(i.checkCallbackFnOrThrow(n),!e)throw new Zr("An URL must be provided.");return(s=i.prepareVideoElement()).src=e,c=function(){i.cleanVideoSource(s)},[4,i.playVideoOnLoadAsync(s,this.options.tryPlayVideoTimeout)];case 1:return m.sent(),[2,this.scan(s,n,c)]}})})},i.prototype.decodeOnceFromConstraints=function(e,n){return Io(this,void 0,void 0,function(){var s;return xi(this,function(c){switch(c.label){case 0:return[4,this.getUserMedia(e)];case 1:return s=c.sent(),[4,this.decodeOnceFromStream(s,n)];case 2:return[2,c.sent()]}})})},i.prototype.decodeOnceFromStream=function(e,n){return Io(this,void 0,void 0,function(){var s,c;return xi(this,function(g){switch(g.label){case 0:return s=!!n,[4,i.attachStreamToVideo(e,n)];case 1:c=g.sent(),g.label=2;case 2:return g.trys.push([2,,4,5]),[4,this.scanOneResult(c)];case 3:return[2,g.sent()];case 4:return s||i.cleanVideoSource(c),[7];case 5:return[2]}})})},i.prototype.decodeOnceFromVideoDevice=function(e,n){return Io(this,void 0,void 0,function(){return xi(this,function(l){switch(l.label){case 0:return[4,this.decodeOnceFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n)];case 1:return[2,l.sent()]}})})},i.prototype.decodeOnceFromVideoElement=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(c){switch(c.label){case 0:if(!e)throw new Zr("A video element must be provided.");return n=i.prepareVideoElement(e),[4,i.playVideoOnLoadAsync(n,this.options.tryPlayVideoTimeout)];case 1:return c.sent(),[4,this.scanOneResult(n)];case 2:return[2,c.sent()]}})})},i.prototype.decodeOnceFromVideoUrl=function(e){return Io(this,void 0,void 0,function(){var n,s;return xi(this,function(c){switch(c.label){case 0:if(!e)throw new Zr("An URL must be provided.");(n=i.prepareVideoElement()).src=e,s=this.decodeOnceFromVideoElement(n),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,s];case 2:return[2,c.sent()];case 3:return i.cleanVideoSource(n),[7];case 4:return[2]}})})},i.prototype.scanOneResult=function(e,n,s,c){var l=this;return void 0===n&&(n=!0),void 0===s&&(s=!0),void 0===c&&(c=!0),new Promise(function(g,m){l.scan(e,function(y,b,P){if(y)return g(y),void P.stop();if(b){if(b instanceof We&&n||b instanceof li&&s||b instanceof Zt&&c)return;P.stop(),m(b)}})})},i.prototype.scan=function(e,n,s){var c=this;i.checkCallbackFnOrThrow(n);var g,l=i.createCaptureCanvas(e);try{g=l.getContext("2d",{willReadFrequently:!0})}catch{g=l.getContext("2d")}if(!g)throw new Error("Couldn't create canvas for visual element scan.");var b,m=function(){g=void 0,l=void 0},y=!1,B={stop:function(){y=!0,clearTimeout(b),m(),s&&s()}},z=function(){if(!y)try{i.drawImageOnCanvas(g,e);var K=c.decodeFromCanvas(l);n(K,void 0,B),b=setTimeout(z,c.options.delayBetweenScanSuccess)}catch(Le){if(n(void 0,Le,B),Le instanceof li||Le instanceof Zt||Le instanceof We)return void(b=setTimeout(z,c.options.delayBetweenScanAttempts));m(),s&&s(Le)}};return z(),B},i.prototype._decodeOnLoadImage=function(e){return Io(this,void 0,void 0,function(){return xi(this,function(s){switch(s.label){case 0:return i.isImageLoaded(e)?[3,2]:[4,i._waitImageLoad(e)];case 1:s.sent(),s.label=2;case 2:return[2,this.decode(e)]}})})},i.prototype.getUserMedia=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=s.sent(),i.streamTracker.push(n),[2,n]}})})},i.streamTracker=[],i}(),yp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),hE=(function(i){yp(function e(n,s){return i.call(this,new Pt,n,s)||this},i)}(Zs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),pE=(function(i){hE(function e(n,s){return i.call(this,new Ji(n),n,s)||this},i)}(Zs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),Y0=(function(i){pE(function e(n,s){return i.call(this,new Bf,n,s)||this},i)}(Zs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),m_=function(i){function e(n,s){var c=this,l=new qm;return l.setHints(n),(c=i.call(this,l,n,s)||this).reader=l,c}return Y0(e,i),Object.defineProperty(e.prototype,"possibleFormats",{set:function(n){this.hints.set(Gn.POSSIBLE_FORMATS,n),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e.prototype.setHints=function(n){this.hints=n,this.reader.setHints(this.hints)},e}(Zs),h1=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),p1=(function(i){h1(function e(n,s){return i.call(this,new Qf,n,s)||this},i)}(Zs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),Pc=(function(i){p1(function e(n,s){return i.call(this,new zd,n,s)||this},i)}(Zs),"http://www.w3.org/2000/svg"),hh=(function(){function i(e){if("string"==typeof e){var n=document.getElementById(e);if(!n)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=n}else this.containerElement=e}i.prototype.write=function(e,n,s,c){if(0===e.length)throw new fn("Found empty contents");if(n<0||s<0)throw new fn("Requested dimensions are too small: "+n+"x"+s);var l=c&&void 0!==c.get(br.MARGIN)?Number.parseInt(c.get(br.MARGIN).toString(),10):i.QUIET_ZONE_SIZE,g=this.encode(c,e);return this.renderResult(g,n,s,l)},i.prototype.createSVGElement=function(e,n){var s=document.createElementNS(i.SVG_NS,"svg");return s.setAttributeNS(Pc,"width",n.toString()),s.setAttributeNS(Pc,"height",e.toString()),s},i.prototype.createSvgPathPlaceholderElement=function(e,n){var s=document.createElementNS(i.SVG_NS,"path");return s.setAttributeNS(Pc,"d","M0 0h".concat(e,"v").concat(n,"H0z")),s.setAttributeNS(Pc,"fill","none"),s},i.prototype.createSvgRectElement=function(e,n,s,c){var l=document.createElementNS(i.SVG_NS,"rect");return l.setAttributeNS(Pc,"x",e.toString()),l.setAttributeNS(Pc,"y",n.toString()),l.setAttributeNS(Pc,"height",s.toString()),l.setAttributeNS(Pc,"width",c.toString()),l.setAttributeNS(Pc,"fill","#000000"),l},i.prototype.encode=function(e,n){var s=eu.L;if(e&&void 0!==e.get(br.ERROR_CORRECTION)){var c=e.get(br.ERROR_CORRECTION).toString();s=eu.fromString(c)}return Yf.encode(n,s,e)},i.prototype.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new gs;var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),Ee=this.createSVGElement(P,B),Me=this.createSvgPathPlaceholderElement(n,s);Ee.appendChild(Me),this.containerElement.appendChild(Ee);for(var Le=0,ke=ae;Le<m;Le++,ke+=z)for(var Ye=0,at=K;Ye<g;Ye++,at+=z)if(1===l.get(Ye,Le)){var Lt=this.createSvgRectElement(at,ke,z,z);Ee.appendChild(Lt)}return Ee},i.QUIET_ZONE_SIZE=4,i.SVG_NS="http://www.w3.org/2000/svg"}(),"http://www.w3.org/2000/svg"),Lg=(function(){function i(){}i.prototype.write=function(e,n,s,c){if(0===e.length)throw new fn("Found empty contents");if(n<0||s<0)throw new fn("Requested dimensions are too small: "+n+"x"+s);var l=eu.L,g=i.QUIET_ZONE_SIZE;if(c){if(void 0!==c.get(br.ERROR_CORRECTION)){var m=c.get(br.ERROR_CORRECTION).toString();l=eu.fromString(m)}void 0!==c.get(br.MARGIN)&&(g=Number.parseInt(c.get(br.MARGIN).toString(),10))}var y=Yf.encode(e,l,c);return this.renderResult(y,n,s,g)},i.prototype.writeToDom=function(e,n,s,c,l){if("string"==typeof e){var g=document.querySelector(e);if(!g)throw new Error("Could no find the target HTML element.");e=g}var m=this.write(n,s,c,l);e instanceof HTMLElement&&e.appendChild(m)},i.prototype.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new gs;for(var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),Ee=this.createSVGElement(P,B),Me=0,Le=ae;Me<m;Me++,Le+=z)for(var ke=0,Ye=K;ke<g;ke++,Ye+=z)if(1===l.get(ke,Me)){var at=this.createSvgRectElement(Ye,Le,z,z);Ee.appendChild(at)}return Ee},i.prototype.createSVGElement=function(e,n){var s=document.createElementNS(hh,"svg"),c=e.toString(),l=n.toString();return s.setAttribute("height",l),s.setAttribute("width",c),s.setAttribute("viewBox","0 0 "+c+" "+l),s},i.prototype.createSvgRectElement=function(e,n,s,c){var l=document.createElementNS(hh,"rect");return l.setAttribute("x",e.toString()),l.setAttribute("y",n.toString()),l.setAttribute("height",s.toString()),l.setAttribute("width",c.toString()),l.setAttribute("fill","#000000"),l},i.QUIET_ZONE_SIZE=4}(),ie(4412));const Ep=["preview"];class ph extends m_{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(e,n){var s=this;return(0,me.A)(function*(){const c=new Lg.t({});let l;try{l=yield s.decodeFromVideoDevice(e,n,(g,m)=>{if(!m)return void c.next({result:g});const y=m.name;y===We.name||y===li.name||y===Zt.name||m.message.includes("No MultiFormat Readers were able to detect the code.")?c.next({error:m}):(c.error(m),s.scannerControls.stop(),s.scannerControls=void 0)}),s.scannerControls={...l,stop(){l.stop(),c.complete()}}}catch(g){c.error(g),s.scannerControls?.stop(),s.scannerControls=void 0}return c.asObservable()})()}}let m1=(()=>{class i{get codeReader(){return this._codeReader}set device(n){this._ready?this.isAutostarting?console.warn("Avoid setting a device during auto-start."):this.isCurrentDevice(n)?console.warn("Setting the same device is not allowed."):this.hasPermission?this.setDevice(n):console.warn("Permissions not set yet, waiting for them to be set to apply device change."):this._devicePreStart=n}get device(){return this._device}get formats(){return this.hints.get(Gn.POSSIBLE_FORMATS)}set formats(n){if("string"==typeof n)throw new Error("Invalid formats, make sure the [formats] input is a binding.");const s=n.map(l=>this.getBarcodeFormatOrFail(l)),c=this.hints;c.set(Gn.POSSIBLE_FORMATS,s),this.hints=c}get hints(){return this._hints}set hints(n){this._hints=n,this.codeReader?.setHints(this._hints)}set videoConstraints(n){const s=this.codeReader?.getScannerControls();s&&s?.streamVideoConstraintsApply(n)}set isAutostarting(n){this._isAutostarting=n,this.autostarting.next(n)}get isAutostarting(){return this._isAutostarting}set torch(n){try{this.getCodeReader().getScannerControls().switchTorch(n)}catch{}}set enable(n){this._enabled!==!!n&&(this._enabled=!!n,this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():(this.reset(),ph.releaseAllStreams()))}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(Gn.TRY_HARDER)}set tryHarder(n){const s=this.hints;n?s.set(Gn.TRY_HARDER,!0):s.delete(Gn.TRY_HARDER),this.hints=s}constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this.poster="",this._ready=!1,this.autostarted=new L.bkB,this.autostarting=new L.bkB,this.torchCompatible=new L.bkB(!1),this.scanSuccess=new L.bkB,this.scanFailure=new L.bkB,this.scanError=new L.bkB,this.scanComplete=new L.bkB,this.camerasFound=new L.bkB,this.camerasNotFound=new L.bkB,this.permissionResponse=new L.bkB(!0),this.hasDevices=new L.bkB,this.deviceChange=new L.bkB,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[cn.QR_CODE],this.hasNavigator=typeof navigator<"u",this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}askForPermission(){var n=this;return(0,me.A)(function*(){if(!n.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),n.setPermission(null),n.hasPermission;if(!n.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),n.setPermission(null),n.hasPermission;let s,c;try{s=yield n.getAnyVideoDevice(),c=!!s}catch(l){return n.handlePermissionException(l)}finally{n.terminateStream(s)}return n.setPermission(c),c})()}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(n){n&&n.getTracks().forEach(s=>s.stop()),n=void 0}init(){var n=this;return(0,me.A)(function*(){if(!n.autostart)return console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),n.initAutostartOff(),void(n._ready=!0);yield n.initAutostartOn(),n._ready=!0})()}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){var n=this;return(0,me.A)(function*(){let s;n.isAutostarting=!0;try{s=yield n.askForPermission()}catch(c){return void console.error("Exception occurred while asking for permission:",c)}if(s){const c=yield n.updateVideoInputDevices();yield n.autostartScanner([...c])}n.isAutostarting=!1,n.autostarted.next()})()}isCurrentDevice(n){return n?.deviceId===this._device?.deviceId}ngOnDestroy(){this.reset(),Zs.cleanVideoSource(this.previewElemRef.nativeElement),ph.releaseAllStreams()}ngOnInit(){this.init()}scanStop(){this._scanSubscription&&(this.codeReader?.getScannerControls().stop(),this._scanSubscription?.unsubscribe(),this._scanSubscription=void 0),this.torchCompatible.next(!1)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan process running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;const n=this._reset();n&&(this.device=n)}updateVideoInputDevices(){var n=this;return(0,me.A)(function*(){const s=(yield Zs.listVideoInputDevices())||[],c=s&&s.length>0;return n.hasDevices.next(c),n.camerasFound.next([...s]),c||n.camerasNotFound.next(null),s})()}autostartScanner(n){var s=this;return(0,me.A)(function*(){const l=n.find(({label:g})=>/back|tr\xe1s|rear|traseira|environment|ambiente/gi.test(g))||n.pop();if(!l)throw new Error("Impossible to autostart, no input devices available.");yield s.setDevice(l),s.deviceChange.next(l)})()}dispatchScanSuccess(n){this.scanSuccess.next(n.getText())}dispatchScanFailure(n){this.scanFailure.next(n)}dispatchScanError(n){this.scanError.observed||(console.error(`zxing scanner component: ${n.name}`,n),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(n)}dispatchScanComplete(n){this.scanComplete.next(n)}handlePermissionException(n){let s;switch(console.error("@zxing/ngx-scanner","Error when asking for permission.",n),n.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",n.message),s=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",n.message),s=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",n.message),s=null,this.hasDevices.next(!1),this.camerasNotFound.next(n);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),s=null,this.hasDevices.next(!1),this.camerasNotFound.next(n);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",n),s=null}return this.setPermission(s),this.permissionResponse.error(n),s}getBarcodeFormatOrFail(n){return"string"==typeof n?cn[n.trim().toUpperCase()]:n}getCodeReader(){return this._codeReader||(this._codeReader=new ph(this.hints,{delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess})),this._codeReader}scanFromDevice(n){var s=this;return(0,me.A)(function*(){const c=s.previewElemRef.nativeElement,l=s.getCodeReader(),g=yield l.scanFromDeviceObservable(n,c);if(!g)throw new Error("Undefined decoding stream, aborting.");if(s._scanSubscription=g.subscribe(z=>s._onDecodeResult(z.result,z.error),z=>s._onDecodeError(z),()=>{}),s._scanSubscription.closed)return;const B=typeof l.getScannerControls().switchTorch<"u";s.torchCompatible.next(B)})()}_onDecodeError(n){this.dispatchScanError(n)}_onDecodeResult(n,s){n?this.dispatchScanSuccess(n):this.dispatchScanFailure(s),this.dispatchScanComplete(n)}_reset(){if(!this._codeReader)return;this.scanStop();try{Zs.cleanVideoSource(this.previewElemRef.nativeElement)}catch{}try{Zs.releaseAllStreams()}catch{}this._codeReader=void 0;const n=this._device;return this.device=void 0,n}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(n){var s=this;return(0,me.A)(function*(){s.scanStop(),s._device=n||void 0,s._device||Zs.cleanVideoSource(s.previewElemRef.nativeElement),s._enabled&&n&&(yield s.scanFromDevice(n.deviceId))})()}setPermission(n){this.hasPermission=n,this.permissionResponse.next(n)}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["zxing-scanner"]],viewQuery:function(s,c){if(1&s&&L.GBs(Ep,7),2&s){let l;L.mGM(l=L.lsd())&&(c.previewElemRef=l.first)}},inputs:{autofocusEnabled:"autofocusEnabled",timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",autostart:"autostart",previewFitMode:"previewFitMode",poster:"poster",device:"device",formats:"formats",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},decls:6,vars:3,consts:[["preview",""],[3,"poster"]],template:function(s,c){1&s&&(L.j41(0,"video",1,0)(2,"p"),L.EFF(3," Your browser does not support this feature, please try to upgrade it. "),L.k0s(),L.j41(4,"p"),L.EFF(5," Seu navegador n\xe3o suporta este recurso, por favor tente atualiz\xe1-lo. "),L.k0s()()),2&s&&(L.xc7("object-fit",c.previewFitMode),L.Y8G("poster",c.poster,L.B4B))},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}"],changeDetection:0})}return i})(),__=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=L.$C({type:i});static#n=this.\u0275inj=L.G2t({imports:[Nt.MD,Ae.YN]})}return i})();var _d=ie(7533);let lf=(()=>{class i{constructor(){this.qrDataSubject=new Lg.t(null),this.qrData$=this.qrDataSubject.asObservable()}setQRData(n){this.qrDataSubject.next(n)}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275prov=L.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function _1(i,e){1&i&&L.nrm(0,"app-badge",11)}function v_(i,e){1&i&&L.nrm(0,"app-badge",12)}function y_(i,e){if(1&i){const n=L.RV6();L.j41(0,"span",7)(1,"zxing-scanner",8),L.mxI("deviceChange",function(c){L.eBV(n);const l=L.XpG(2);return L.DH7(l.currentDevice,c)||(l.currentDevice=c),L.Njj(c)}),L.bIt("scanSuccess",function(c){L.eBV(n);const l=L.XpG(2);return L.Njj(l.onCodeResult(c))})("permissionResponse",function(c){L.eBV(n);const l=L.XpG(2);return L.Njj(l.onHasPermission(c))})("camerasFound",function(c){L.eBV(n);const l=L.XpG(2);return L.Njj(l.onCamerasFound(c))})("torchCompatible",function(c){L.eBV(n);const l=L.XpG(2);return L.Njj(l.onTorchCompatible(c))}),L.k0s(),L.nrm(2,"div",9)(3,"div",10),L.k0s(),L.DNE(4,_1,1,0,"app-badge",11)(5,v_,1,0,"app-badge",12)}if(2&i){const n=L.XpG(2);L.R7$(),L.Y8G("torch",n.torchEnabled),L.R50("device",n.currentDevice),L.Y8G("formats",n.formatsEnabled)("tryHarder",n.tryHarder),L.R7$(3),L.vxM(n.qrResultString?4:5)}}function v1(i,e){1&i&&(L.j41(0,"app-card",2),L.nrm(1,"app-label",13),L.k0s()),2&i&&(L.Y8G("variant","fill")("severity","danger")("closable",!0),L.R7$(),L.Y8G("icon","triangle-exclamation"))}function E_(i,e){1&i&&(L.j41(0,"app-card",2),L.nrm(1,"app-label",13),L.k0s()),2&i&&(L.Y8G("variant","fill")("severity","danger")("closable",!0),L.R7$(),L.Y8G("icon","triangle-exclamation"))}function C_(i,e){1&i&&(L.j41(0,"app-card",2),L.nrm(1,"app-label",14),L.k0s()),2&i&&(L.Y8G("variant","fill")("severity","success")("closable",!0),L.R7$(),L.Y8G("icon","info-circle"))}function Z0(i,e){1&i&&(L.j41(0,"app-card",3),L.nrm(1,"app-label",15),L.k0s()),2&i&&(L.Y8G("variant","fill")("severity","success")("closable",!0),L.R7$(),L.Y8G("icon","info-circle"))}function Vg(i,e){if(1&i&&(L.j41(0,"section",0),L.nrm(1,"app-label",1),L.DNE(2,y_,6,5)(3,v1,2,4,"app-card",2)(4,E_,2,4,"app-card",2)(5,C_,2,4,"app-card",2)(6,Z0,2,4,"app-card",3),L.j41(7,"footer",4),L.nrm(8,"app-button",5)(9,"app-button",6),L.k0s()()),2&i){const n=L.XpG();L.R7$(),L.Y8G("size",n.isMobile?"sm":"md")("prefix","Autoregistro")("label","Scan QR")("subtitle",n.isMobile?"Scanea el QR para obtener su contenido y autocompletar el formulario.":""),L.R7$(),L.vxM(n.noPermissions?-1:2),L.R7$(),L.vxM(!n.isMobile&&n.noPermissions?3:-1),L.R7$(),L.vxM(n.isMobile&&n.noPermissions?4:-1),L.R7$(),L.vxM(n.isMobile||n.noPermissions?-1:5),L.R7$(),L.vxM(n.isMobile?6:-1),L.R7$(2),L.Y8G("variant","outline")("direction","row")("icon","close")("path","/")("label","Cancelar"),L.R7$(),L.Y8G("variant","fill")("direction","row")("path","/registrar")("label","Registro manual")}}let Bg=(()=>{class i{constructor(n,s){this.router=n,this.QrService=s,this.currentDevice=null,this.formatsEnabled=[cn.CODE_128,cn.DATA_MATRIX,cn.EAN_13,cn.QR_CODE],this.noPermissions=!1,this.torchEnabled=!1,this.torchAvailable$=new Lg.t(!1),this.tryHarder=!1,this.qrRegistro=!0,this._formBuilder=(0,L.WQX)(Ae.ok).nonNullable,this.form=this._formBuilder.group({paciente:this._formBuilder.control(""),titulo:this._formBuilder.control("",Ae.k0.required),descripcion:this._formBuilder.control("",Ae.k0.required),categoria:this._formBuilder.control("",Ae.k0.required),estado:this._formBuilder.control(""),validado:this._formBuilder.control(null),lugar:this._formBuilder.control("",Ae.k0.required),validador:this._formBuilder.control(""),fecha:this._formBuilder.control(new Date,Ae.k0.required),hora:this._formBuilder.control("",Ae.k0.required),adjuntos:this._formBuilder.control([])})}onResize(n){this.checkIfMobile(n.target.innerWidth)}ngOnInit(){this.checkCameraPermissions()}checkCameraPermissions(){navigator.mediaDevices.getUserMedia({video:!0}).then(()=>{this.noPermissions=!1}).catch(()=>{this.noPermissions=!0})}onCodeResult(n){this.qrResultString=n,this.QrService.setQRData(this.qrResultString);const s=this.parseQRData(this.qrResultString);setTimeout(()=>{this.populateFormFromQR(s)},100),this.router.navigate(["/registrar"])}parseQRData(n){const s=n.split("\n"),c={};return s.forEach(l=>{const[g,...m]=l.split(": "),y=m.join(": ").trim();switch(g.toLowerCase()){case"t\xedtulo":c.titulo=y;break;case"descripci\xf3n":c.descripcion=y;break;case"fecha":c.fecha=new Date(y);break;case"hora":c.hora=y;break;case"categoria":c.categoria=y;break;case"validado":c.validado="true"===y.toLowerCase();break;case"estado":c.estado=y;break;case"emisor":c.validador=y;break;case"adjuntos":c.adjuntos=y.split(",").map(b=>b.trim())}}),c}populateFormFromQR(n){if(n)try{this.form.patchValue({paciente:n.paciente,titulo:n.titulo,descripcion:n.descripcion,fecha:n.fecha,hora:n.hora,categoria:n.categoria,validado:n.validado,estado:n.estado,validador:n.validador,adjuntos:n.adjuntos||[]})}catch(s){console.error("Error during patchValue:",s)}}onHasPermission(n){this.hasPermission=n}onCamerasFound(n){this.availableDevices=n,this.hasDevices=!(!n||!n.length)}onTorchCompatible(n){this.torchAvailable$.next(n||!1)}checkIfMobile(n){this.isMobile=n<768}cancel(){this.qrRegistro=!this.qrRegistro}static#e=this.\u0275fac=function(s){return new(s||i)(L.rXU(T.Ix),L.rXU(lf))};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-scan"]],hostBindings:function(s,c){1&s&&L.bIt("resize",function(g){return c.onResize(g)},!1,L.tSv)},standalone:!0,features:[L.aNF],decls:1,vars:1,consts:[[1,"panel__main--center"],["severity","neutral","direction","column",3,"size","prefix","label","subtitle"],["aligned","center","size","lg","direction","row","bottom","20px",3,"variant","severity","closable"],["size","lg","direction","row","bottom","20px",3,"variant","severity","closable"],[1,"panel__footer"],["size","xxs","severity","danger",3,"variant","direction","icon","path","label"],["size","xxs","severity","success","icon","pencil",3,"variant","direction","path","label"],[1,"qr__wrapper"],[3,"deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible","torch","device","formats","tryHarder"],[1,"qr__overlay"],[1,"qr__line"],["severity","success","label","Scaneo exitoso","size","xs"],["severity","warning","label","No se pudo leer el c\xf3digo","size","xs"],["size","xxs","label","Activ\xe1 la c\xe1mara","subtitle","Puedes habilitar los permisos desde el navegador.","variant","outline","direction","row","severity","danger",3,"icon"],["size","xxs","label","Mant\xe9n el c\xf3digo firme","subtitle","Si el c\xf3digo QR no es detectado, vuelve a intentarlo..","variant","outline","direction","row","severity","success",3,"icon"],["size","xxs","label","Mant\xe9n el tel\xe9fono estable","subtitle","Si el c\xf3digo QR no es detectado, vuelve a intentarlo.","variant","outline","direction","row","severity","success",3,"icon"]],template:function(s,c){1&s&&L.DNE(0,Vg,10,18,"section",0),2&s&&L.vxM(c.qrRegistro?0:-1)},dependencies:[Ae.X1,__,m1,Ue.U,It.n,Mt.Q,_d.i],styles:[".panel__main--center[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;flex:1;padding:var(--card__padding) var(--card__padding) 24px var(--card__padding);box-sizing:border-box;row-gap:var(--wrapper__gap--row);background-color:#fff;border-radius:var(--card__border--radius);--qr__border: solid 1px var(--secondary);--qr__background: white;--qr__line-color: var(--secondary);--qr__glow-color: var(--secondaryLighter);--qr__animation-duration: 2.5s;--qr__line-height: 4px}.panel__main--center[_ngcontent-%COMP%]   .qr__wrapper[_ngcontent-%COMP%]{position:relative;width:100%;max-width:220px;height:160px;max-height:220px;background-color:var(--qr__background);overflow:hidden;outline:var(--qr__border);outline-offset:8px}.panel__main--center[_ngcontent-%COMP%]   .qr__wrapper[_ngcontent-%COMP%]   .qr__line[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:var(--qr__line-height);background-color:var(--qr__line-color);animation:_ngcontent-%COMP%_qr-scan var(--qr__animation-duration) infinite ease-in-out;box-shadow:0 0 10px var(--qr__glow-color),0 0 20px var(--qr__glow-color)}.panel__main--center[_ngcontent-%COMP%]   .qr__wrapper[_ngcontent-%COMP%]   .qr__overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:0;background-color:var(--qr__line-color);mix-blend-mode:multiply;animation:_ngcontent-%COMP%_qr-overlay-grow var(--qr__animation-duration) infinite ease-in-out}@keyframes _ngcontent-%COMP%_qr-scan{0%{top:0}to{top:100%}0%{top:0}}@keyframes _ngcontent-%COMP%_qr-overlay-grow{0%{height:0}to{height:100%}0%{height:0}}"]})}return i})();var w_=ie(5699),Cp=ie(6418);const wp=()=>[];function I_(i,e){1&i&&L.nrm(0,"app-badge",2)}function gh(i,e){1&i&&L.nrm(0,"app-badge",3)}function J0(i,e){1&i&&(L.j41(0,"small",25),L.EFF(1," El t\xedtulo es obligatorio "),L.k0s())}function A_(i,e){if(1&i&&(L.j41(0,"div",5),L.nrm(1,"app-required",6)(2,"textarea",26),L.k0s()),2&i){const n=L.XpG();L.R7$(),L.Y8G("label","Descripci\xf3n")("control","descripcion"),L.R7$(),L.HbH(n.qrRegister?"disabled":"")}}function y1(i,e){if(1&i){const n=L.RV6();L.j41(0,"div",5),L.nrm(1,"app-required",6),L.j41(2,"textarea",27),L.EFF(3),L.k0s(),L.j41(4,"button",28),L.bIt("click",function(){L.eBV(n);const c=L.XpG();return L.Njj(c.clearResult())}),L.EFF(5,"\xd7"),L.k0s()()}if(2&i){const n=L.XpG();L.R7$(),L.Y8G("label","Registro obtenido del QR")("control","paciente"),L.R7$(2),L.SpI("          ",n.qrResultString,"\n        ")}}function df(i,e){if(1&i&&(L.j41(0,"option",11),L.EFF(1),L.k0s()),2&i){const n=e.$implicit;L.Y8G("value",n),L.R7$(),L.SpI(" ",n," ")}}function ev(i,e){1&i&&(L.j41(0,"small",25),L.EFF(1," La categor\xeda es obligatoria "),L.k0s())}function E1(i,e){if(1&i){const n=L.RV6();L.j41(0,"figure"),L.nrm(1,"img",32),L.j41(2,"figcaption"),L.EFF(3),L.k0s(),L.j41(4,"app-button",33),L.bIt("clickEvent",function(){const c=L.eBV(n).index,l=L.XpG(2);return L.Njj(l.removeFile(c))}),L.k0s()()}if(2&i){const n=e.$implicit,s=e.index,c=L.XpG(2);L.R7$(),L.Y8G("src",n,L.B4B),L.R7$(2),L.JRh(c.uploadedFileNames[s]||"Archivo adjunto"),L.R7$(),L.Y8G("severity","danger")("variant","outline")("icon","trash-can")("direction","none")("label","")("type","button")}}function ff(i,e){if(1&i&&(L.nrm(0,"app-label",29)(1,"hr"),L.j41(2,"div",30),L.DNE(3,E1,5,8,"figure",31),L.k0s()),2&i){let n;const s=L.XpG();L.Y8G("size","sm"),L.R7$(3),L.Y8G("ngForOf",null!==(n=null==(n=s.form.get("adjuntos"))?null:n.value)&&void 0!==n?n:L.lJ4(3,wp))("ngForTrackBy",s.trackByFn)}}function Ug(i,e){1&i&&L.nrm(0,"app-scan")}function tv(i,e){1&i&&(L.j41(0,"small",25),L.EFF(1," Debe seleccionar una fecha "),L.k0s())}function C1(i,e){1&i&&(L.j41(0,"small",25),L.EFF(1," Debe seleccionar un horario "),L.k0s())}function jg(i,e){1&i&&(L.j41(0,"div",5),L.nrm(1,"app-required",6)(2,"input",34),L.k0s(),L.j41(3,"div",5),L.nrm(4,"app-required",6)(5,"input",35),L.k0s()),2&i&&(L.R7$(),L.Y8G("label","Establecimiento")("control","lugar"),L.R7$(3),L.Y8G("label","Miembro equipo de Salud")("control","validador"))}function nv(i,e){if(1&i&&L.nrm(0,"app-button",21),2&i){const n=L.XpG();L.Y8G("severity","warning")("variant","outline")("icon","arrows-rotate")("direction",n.isMobile?"none":"row")("label",n.isMobile?"":"Reset")("type","reset")}}function b_(i,e){if(1&i){const n=L.RV6();L.j41(0,"app-button",36),L.bIt("clickEvent",function(){L.eBV(n);const c=L.XpG();return L.Njj(c.showQrRegister())}),L.k0s()}if(2&i){const n=L.XpG();L.Y8G("type","button")("severity","primary")("variant","link")("icon","mobile-screen-button")("direction",n.isMobile?"none":"row")("label",n.isMobile?"":"Registro QR")("path","scan")}}let rv=(()=>{class i{checkIfMobile(n){this.isMobile=n<768}constructor(n,s,c,l,g,m,y){this.QrService=n,this.storage=s,this.firestore=c,this._activatedRoute=l,this.router=g,this.location=m,this.notificationService=y,this.isMobile=!1,this.qrResultString=null,this.subscription=new tn.yU,this.validado=!0,this.registroId=null,this.hasChange=!1,this.uploadedImages=[],this.uploadedFileNames=[],this.showConfirmMsg=!1,this.showErrorMsg=!1,this.hide=!0,this.categorias=["Cardiolog\xeda","Dermatolog\xeda","Endocrinolog\xeda","Gastroenterolog\xeda","Ginecolog\xeda y Obstetricia","Guardia","Hemoterapia","Infectolog\xeda","Kinesiolog\xeda","Laboratorio","Medicina General","Nefrolog\xeda","Neumolog\xeda","Neurolog\xeda","Nutrici\xf3n","Odontolog\xeda","Oftalmolog\xeda","Oncolog\xeda","Otorrinolaringolog\xeda","Pediatr\xeda","Psiquiatr\xeda","Terapia Intensiva","Traumatolog\xeda y Ortopedia","Urolog\xeda","Vacunatorio"],this.categoriaMap={Cardiolog\u00eda:{icon:"heart",color:"#dc3545"},Dermatolog\u00eda:{icon:"hand-dots",color:"#fd7e14"},Guardia:{icon:"square-h",color:"#f44336"},Endocrinolog\u00eda:{icon:"hand-holding-medical",color:"#ffc107"},Gastroenterolog\u00eda:{icon:"viruses",color:"#795548"},"Ginecolog\xeda y Obstetricia":{icon:"venus",color:"#e83e8c"},Hemoterapia:{icon:"tint",color:"#c0392b"},Infectolog\u00eda:{icon:"virus",color:"#ff5722"},Kinesiolog\u00eda:{icon:"dumbbell",color:"#fd7e14"},Laboratorio:{icon:"flask",color:"#8e44ad"},"Medicina General":{icon:"user-md",color:"#007bff"},Nefrolog\u00eda:{icon:"filter",color:"#3f51b5"},Neumolog\u00eda:{icon:"lungs",color:"#87ceeb"},Neurolog\u00eda:{icon:"brain",color:"#6f42c1"},Nutrici\u00f3n:{icon:"apple-whole",color:"#a2d729"},Odontolog\u00eda:{icon:"tooth",color:"#ffffff"},Oftalmolog\u00eda:{icon:"eye-dropper",color:"#17a2b8"},Oncolog\u00eda:{icon:"ribbon",color:"#6f42c1"},Otorrinolaringolog\u00eda:{icon:"head-side-cough",color:"#6610f2"},Pediatr\u00eda:{icon:"child",color:"#28a745"},Psiquiatr\u00eda:{icon:"comments",color:"#20c997"},"Terapia Intensiva":{icon:"bed-pulse",color:"#212529"},"Traumatolog\xeda y Ortopedia":{icon:"crutch",color:"#6c757d"},Urolog\u00eda:{icon:"x-ray",color:"#007bff"},Vacunatorio:{icon:"syringe",color:"#00bcd4"}},this.editableTitle="",this.editableCategory="",this.editableIcon="heart",this.editableColor="",this.categoriaOptions=Object.keys(this.categoriaMap).map(b=>({value:b,label:b.replace(/([A-Z])/g," $1").trim()})),this._formBuilder=(0,L.WQX)(Ae.ok).nonNullable,this._router=(0,L.WQX)(T.Ix),this._registrosService=(0,L.WQX)(Pe.m),this.auth=(0,L.WQX)(pt.Nj),this.form=this._formBuilder.group({paciente:this._formBuilder.control(""),titulo:this._formBuilder.control("",Ae.k0.required),descripcion:this._formBuilder.control(""),categoria:this._formBuilder.control("",Ae.k0.required),estado:this._formBuilder.control(""),validado:this._formBuilder.control(null),lugar:this._formBuilder.control(""),validador:this._formBuilder.control(""),fecha:this._formBuilder.control(new Date,Ae.k0.required),hora:this._formBuilder.control("",Ae.k0.required),adjuntos:this._formBuilder.control([])})}triggerSuccess(){this.notificationService.addNotification("Registro creado con \xe9xito!","success")}triggerError(){this.notificationService.addNotification("Error al generar el registro","error")}ngOnInit(){this.checkIfMobile(window.innerWidth),this.registroId=this._activatedRoute.snapshot.paramMap.get("id"),this.registroId&&this.loadRegistroData(this.registroId),this.setTitle(),this.onCategoryChange(),this.subscription=this.QrService.qrData$.subscribe(y=>{this.qrResultString=y,this.setPacienteValue(y??"")});const n=new Date,s=n.toISOString().split("T")[0];this.form.controls.fecha.setValue(s);const g=`${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`;this.form.controls.hora.setValue(g),this.form.controls.titulo.setValue(`Registro del ${s} - ${g}`)}ngOnDestroy(){this.subscription.unsubscribe(),this.form.get("adjuntos")?.value.forEach(n=>URL.revokeObjectURL(n))}onTitleChange(){return this.hasChange=!0}setTitle(){return this.form.controls.titulo.value}validateRecord(){this.validado=!this.validado,this.form.controls.validado.setValue(this.validado)}onCategoryChange(){const n=this.form.controls.categoria.value;if(n){const{icon:s,color:c}=this.categoriaMap[n];this.editableIcon=s,this.editableColor=c,this.editableCategory=n}this.hasChange=!0}clearResult(){this.qrResultString=""}getPacienteControl(){return this.form.get("paciente")}getPacienteValue(){return this.getPacienteControl()?.value}setPacienteValue(n){this.getPacienteControl()?.setValue(n)}onCodeResult(n){this.qrResultString=n,this.setPacienteValue(n)}loadRegistroData(n){var s=this;return(0,me.A)(function*(){try{const c=yield s._registrosService.getRegistro(n);c&&(s.form.patchValue({paciente:c.paciente,titulo:c.titulo,descripcion:c.descripcion,categoria:c.categoria,estado:c.estado,validado:c.validado,lugar:c.lugar,validador:c.validador,fecha:c.fecha,hora:c.hora,adjuntos:c.adjuntos||[]}),s.uploadedImages=c.adjuntos||[],s.uploadedFileNames=c.adjuntos?.map(l=>{try{const m=new URL(l).pathname.split("/"),y=m[m.length-1];return y.includes("_")?y.split("_").slice(1).join("_"):y}catch{return"Archivo adjunto"}})||[])}catch(c){console.error("Error loading registro:",c)}})()}createRegistro(){var n=this;return(0,me.A)(function*(){const s=yield n.auth.currentUser;if(!n.form.invalid)try{const c=n.form.value;c.adjuntos=c.adjuntos.filter(l=>n.isValidUrl(l)),s&&(c.userId=s.uid),n.registroId?yield n._registrosService.updateRegistro(n.registroId,c):yield n._registrosService.createRegistro(c),n._router.navigate(["/"]),n.triggerSuccess()}catch{n.triggerError()}})()}isValidUrl(n){try{return new URL(n),!0}catch{return!1}}setFormValues(n){var s=this;return(0,me.A)(function*(){try{const c=yield s._registrosService.getRegistro(n);if(!c)return;s.form.setValue({paciente:c.paciente||"",titulo:c.titulo||"",descripcion:c.descripcion||"",categoria:c.categoria||"",estado:c.estado||"",validado:c.validado??!1,lugar:c.lugar||"",validador:c.validador||"",fecha:c.fecha||new Date,hora:c.hora||"",adjuntos:c.adjuntos||[]})}catch{}})()}showQrRegister(){this.qrRegister=!this.qrRegister}goBack(){window.history.length>1?this.location.back():this.router.navigate(["/"])}cancel(){this.form&&this.form.reset(),this.router.navigate(["/"])}uploadFiles(n){var s=this;const c=n.target.files;c.length&&Array.from(c).forEach(l=>{const g=`images/${Date.now()}_${l.name}`,m=So(this.storage,g),y=Y(m,l);var b;this.uploadedFileNames.push(l.name),y.on("state_changed",{next:b=>{},error:b=>console.error("Upload error:",b),complete:(b=(0,me.A)(function*(){try{const P=yield Xi(m);s.uploadedImages.push(P),s.form.get("adjuntos")?.setValue([...s.uploadedImages]),n.target.value=""}catch(P){console.error("Error getting download URL:",P)}}),function(){return b.apply(this,arguments)})})})}saveImageMetadata(n,s){var c=this;return(0,me.A)(function*(){const l=(0,H.rJ)(c.firestore,"images");yield(0,H.gS)(l,{url:n,name:s,uploadedAt:new Date})})()}removeFile(n){const s=this.form.get("adjuntos")?.value||[];s.splice(n,1),this.form.get("adjuntos")?.setValue(s)}trackByFn(n,s){return s}get adjuntosControl(){return this.form.get("adjuntos")}static#e=this.\u0275fac=function(s){return new(s||i)(L.rXU(lf),L.rXU(ra),L.rXU(H._7),L.rXU(T.nX),L.rXU(T.Ix),L.rXU(Nt.aZ),L.rXU(Cp.J))};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-crear-registro"]],standalone:!0,features:[L.aNF],decls:45,vars:44,consts:[[1,"panel__main",3,"ngSubmit","formGroup"],["subtitle","Completa los campos requeridos (*)","direction","row",3,"size","label","prefix","severity"],["severity","warning","label","Campos requeridos sin completar","size","md"],["severity","success","label","Campos requeridos completos","size","md"],[1,"panel__inner--main"],[1,"form__input-wrapper--col"],[3,"label","control"],["type","text","formControlName","titulo",3,"keyup"],["class","required",4,"ngIf"],["id","categoria","formControlName","categoria",1,"form__select--custom",3,"change"],["value","","disabled","","selected",""],[3,"value"],["for","adjuntos"],["type","file","id","adjuntos","formControlName","adjuntos","multiple","",3,"change"],[1,"panel__inner--aside"],["type","date","formControlName","fecha"],["type","time","formControlName","hora"],["size","md","offLabel","No validado por equipo de Salud","labelPosition","right",3,"toggle","on","onLabel"],[1,"panel__footer"],[1,"panel__footer--left"],["size","xs",3,"clickEvent","severity","variant","icon","direction","label","type"],["size","xs",3,"severity","variant","icon","direction","label","type"],[1,"panel__footer--right"],["size","xs",3,"type","severity","variant","icon","direction","label","path"],["type","submit","size","xs",3,"severity","variant","label","direction","icon","disabled","path"],[1,"required"],["rows","5","type","text","id","descripcion","placeholder","Describa su registro de Salud","formControlName","descripcion"],["id","paciente","formControlName","paciente"],[3,"click"],["prefix","Adjuntos","label","Mis archivos","direction","row",3,"size"],[1,"img__wrapper--grid"],[4,"ngFor","ngForOf","ngForTrackBy"],["alt","Uploaded Image",3,"src"],["size","xxs",3,"clickEvent","severity","variant","icon","direction","label","type"],["type","text","formControlName","lugar"],["type","text","formControlName","validador"],["size","xs",3,"clickEvent","type","severity","variant","icon","direction","label","path"]],template:function(s,c){if(1&s&&(L.j41(0,"form",0),L.bIt("ngSubmit",function(){return c.createRegistro()}),L.j41(1,"header"),L.nrm(2,"app-label",1),L.DNE(3,I_,1,0,"app-badge",2)(4,gh,1,0,"app-badge",3),L.k0s(),L.j41(5,"section",4)(6,"div",5),L.nrm(7,"app-required",6),L.j41(8,"input",7),L.bIt("keyup",function(){return c.onTitleChange()}),L.k0s(),L.DNE(9,J0,2,0,"small",8),L.k0s(),L.DNE(10,A_,3,4,"div",5)(11,y1,6,3,"div",5),L.j41(12,"div",5),L.nrm(13,"app-required",6),L.j41(14,"select",9),L.bIt("change",function(){return c.onCategoryChange()}),L.j41(15,"option",10),L.EFF(16,"Seleccionar categor\xeda"),L.k0s(),L.Z7z(17,df,2,2,"option",11,L.fX1),L.k0s(),L.DNE(19,ev,2,0,"small",8),L.k0s(),L.j41(20,"div",5)(21,"label",12),L.EFF(22,"Adjuntar archivos"),L.k0s(),L.j41(23,"input",13),L.bIt("change",function(g){return c.uploadFiles(g)}),L.k0s()(),L.j41(24,"div"),L.DNE(25,ff,4,4),L.k0s()(),L.j41(26,"section",14),L.DNE(27,Ug,1,0,"app-scan"),L.j41(28,"div",5),L.nrm(29,"app-required",6)(30,"input",15),L.DNE(31,tv,2,0,"small",8),L.k0s(),L.j41(32,"div",5),L.nrm(33,"app-required",6)(34,"input",16),L.DNE(35,C1,2,0,"small",8),L.k0s(),L.j41(36,"app-switcher",17),L.bIt("toggle",function(){return c.validateRecord()}),L.k0s(),L.DNE(37,jg,6,4),L.k0s(),L.j41(38,"footer",18)(39,"div",19)(40,"app-button",20),L.bIt("clickEvent",function(){return c.cancel()}),L.k0s(),L.DNE(41,nv,1,6,"app-button",21),L.k0s(),L.j41(42,"div",22),L.DNE(43,b_,1,7,"app-button",23),L.nrm(44,"app-button",24),L.k0s()()()),2&s){let l;L.Y8G("formGroup",c.form),L.R7$(),L.HbH(c.isMobile?"panel__header--col":"panel__header--row"),L.R7$(),L.Y8G("size",c.isMobile?"md":"lg")("label",c.registroId?c.setTitle():"Nuevo registro de Salud")("prefix","Autoregistro")("severity","info"),L.R7$(),L.vxM(c.form.invalid?3:c.form.invalid?-1:4),L.R7$(4),L.Y8G("label","T\xedtulo")("control","titulo"),L.R7$(2),L.Y8G("ngIf",(null==c.form.controls.titulo?null:c.form.controls.titulo.invalid)&&(null==c.form.controls.titulo?null:c.form.controls.titulo.touched)),L.R7$(),L.vxM(c.qrResultString?-1:10),L.R7$(),L.vxM(c.qrResultString?11:-1),L.R7$(2),L.Y8G("label","Categor\xeda")("control","categoria"),L.R7$(4),L.Dyx(c.categorias),L.R7$(2),L.Y8G("ngIf",(null==c.form.controls.categoria?null:c.form.controls.categoria.invalid)&&(null==c.form.controls.categoria?null:c.form.controls.categoria.touched)),L.R7$(6),L.vxM((null!==(l=null==(l=c.form.get("adjuntos"))?null:l.value)&&void 0!==l?l:L.lJ4(43,wp)).length>0?25:-1),L.R7$(2),L.vxM(c.qrRegister?27:-1),L.R7$(2),L.Y8G("label","Fecha")("control","fecha"),L.R7$(2),L.Y8G("ngIf",(null==c.form.controls.fecha?null:c.form.controls.fecha.invalid)&&(null==c.form.controls.fecha?null:c.form.controls.fecha.touched)),L.R7$(2),L.Y8G("label","Hora")("control","hora"),L.R7$(2),L.Y8G("ngIf",(null==c.form.controls.hora?null:c.form.controls.hora.invalid)&&(null==c.form.controls.hora?null:c.form.controls.hora.touched)),L.R7$(),L.Y8G("on",c.validado)("onLabel","Validado por equipo de Salud"),L.R7$(),L.vxM(c.validado?37:-1),L.R7$(3),L.Y8G("severity","danger")("variant","outline")("icon","xmark")("direction",c.isMobile?"none":"row")("label",c.isMobile?"":"Cancelar")("type","button"),L.R7$(),L.vxM(c.registroId?-1:41),L.R7$(2),L.vxM(c.registroId?-1:43),L.R7$(),L.Y8G("severity","success")("variant","fill")("label",c.isMobile?"":"Guardar")("direction",c.isMobile?"none":"row")("icon","floppy-disk")("disabled",c.form.invalid)("path","item/"+c.registroId)}},dependencies:[Ae.X1,Ae.qT,Ae.xH,Ae.y7,Ae.me,Ae.wz,Ae.BC,Ae.cb,Ae.j4,Ae.JD,Ue.U,It.n,Mt.Q,Tn,Bg,w_.d,Nt.MD,Nt.Sq,Nt.bT]})}return i})();var w1=ie(4908),Ip=ie(5023),iv=ie(7587);function I1(i,e){if(1&i){const n=L.RV6();L.j41(0,"figure",24),L.bIt("click",function(){const c=L.eBV(n).$implicit,l=L.XpG(3);return L.Njj(l.openModal(c))}),L.nrm(1,"img",25),L.j41(2,"figcaption"),L.EFF(3),L.k0s()()}if(2&i){const n=e.$implicit;L.R7$(),L.Y8G("src",n,L.B4B),L.R7$(2),L.JRh(n)}}function A1(i,e){if(1&i){const n=L.RV6();L.j41(0,"app-modal",26),L.bIt("closeModal",function(){L.eBV(n);const c=L.XpG(3);return L.Njj(c.isModalOpen=!1)}),L.j41(1,"app-button",27),L.bIt("click",function(){L.eBV(n);const c=L.XpG(3);return L.Njj(c.isModalOpen=!1)}),L.k0s()()}if(2&i){const n=L.XpG(3);L.Y8G("prefix","Previsualizar")("title",n.selectedFile)("subtitle",n.selectedFile)("img",n.selectedFile)("closeable",!0)}}function ov(i,e){if(1&i&&(L.nrm(0,"app-label",20)(1,"hr"),L.j41(2,"section",21),L.DNE(3,I1,4,2,"figure",22),L.k0s(),L.DNE(4,A1,2,5,"app-modal",23)),2&i){const n=L.XpG(2);L.Y8G("size",n.isMobile?"sm":"md"),L.R7$(3),L.Y8G("ngForOf",n.registro.adjuntos)("ngForTrackBy",n.trackByFn),L.R7$(),L.vxM(n.isModalOpen?4:-1)}}function b1(i,e){1&i&&L.nrm(0,"hr")}function sv(i,e){if(1&i&&L.nrm(0,"img",10),2&i){const n=L.XpG(2);L.Y8G("src",n.qrCodeUrl,L.B4B)}}function T1(i,e){if(1&i&&L.nrm(0,"app-label",12),2&i){const n=L.XpG(2);L.Y8G("label",n.registro.lugar)("prefix","Establecimiento de Salud")("direction","row")}}function x1(i,e){if(1&i&&L.nrm(0,"app-label",12),2&i){const n=L.XpG(2);L.Y8G("label",n.registro.validador)("prefix","Miembro equipo de Salud")("direction","row")}}function S1(i,e){if(1&i){const n=L.RV6();L.j41(0,"app-modal",28),L.bIt("closeModal",function(){L.eBV(n);const c=L.XpG(2);return L.Njj(c.modalDelete=!1)}),L.j41(1,"app-button",29),L.bIt("click",function(){L.eBV(n);const c=L.XpG(2);return L.Njj(c.modalDelete=!1)}),L.k0s(),L.j41(2,"app-button",30),L.bIt("click",function(){L.eBV(n);const c=L.XpG(2);return L.Njj(c.onConfirm())}),L.k0s()()}if(2&i){const n=L.XpG(2);L.Y8G("prefix",n.registro.categoria)("title","\xbfDesea eliminar el registro"+n.registro.titulo+"?")("subtitle","Esta acci\xf3n es irreversible, perder\xe1 la informaci\xf3n actual del registro.")("closeable",!0)}}function D1(i,e){if(1&i){const n=L.RV6();L.j41(0,"section",0)(1,"header",1)(2,"app-label",2),L.nrm(3,"app-badge",3)(4,"app-dropdown",4),L.k0s()(),L.j41(5,"div",5)(6,"article",6),L.EFF(7),L.k0s(),L.DNE(8,ov,5,4),L.k0s(),L.DNE(9,b1,1,0,"hr"),L.j41(10,"div",7)(11,"article",8)(12,"figure",9),L.DNE(13,sv,1,1,"img",10),L.nrm(14,"app-label",11),L.k0s(),L.nrm(15,"app-label",12)(16,"app-label",12),L.DNE(17,T1,1,3,"app-label",12),L.nrm(18,"app-switcher",13),L.DNE(19,x1,1,3,"app-label",12),L.k0s()(),L.j41(20,"footer",14)(21,"div",15)(22,"app-button",16),L.bIt("clickEvent",function(){L.eBV(n);const c=L.XpG();return L.Njj(c.goBack())}),L.k0s()(),L.j41(23,"div",17),L.nrm(24,"app-button",18),L.k0s()(),L.DNE(25,S1,3,4,"app-modal",19),L.k0s()}if(2&i){const n=L.XpG();L.R7$(2),L.Y8G("size",n.isMobile?"md":"lg")("label",n.registro.titulo)("prefix",n.registro.categoria)("icon",n.getIconForCategoria(n.registro.categoria))("severity","custom")("color",n.getColorForCategoria(n.registro.categoria)),L.R7$(),L.FS9("label",n.registro.validado?"validado":"auto-registro"),L.Y8G("severity",n.registro.validado?"success":"info"),L.R7$(),L.Y8G("items",n.getMenuItems(n.registro))("position",n.dropdownPosition),L.R7$(3),L.Lme(" ",n.registro.descripcion," ",n.registro.paciente," "),L.R7$(),L.vxM(n.registro.adjuntos.length>0?8:-1),L.R7$(),L.vxM(n.isMobile?9:-1),L.R7$(4),L.vxM(n.qrCodeUrl?13:-1),L.R7$(),L.Y8G("size","sm")("prefix","Escane\xe1 el c\xf3digo para compartir esta informaci\xf3n.")("direction","row")("severity","neutral")("icon",n.isMobile?"":"info-circle"),L.R7$(),L.Y8G("label",n.registro.fecha)("prefix","Fecha del registro")("direction","row"),L.R7$(),L.Y8G("label",n.registro.hora)("prefix","Hora del registro")("direction","row"),L.R7$(),L.vxM(n.registro.lugar?17:-1),L.R7$(),L.Y8G("on",n.registro.validado)("disabled",!0),L.R7$(),L.vxM(n.registro.validador?19:-1),L.R7$(3),L.Y8G("severity","primary")("variant","link")("icon","arrow-left")("direction","row")("label","volver")("disabled",!1),L.R7$(2),L.Y8G("severity","warning")("variant","fill")("icon","pencil")("direction","row")("label","Editar")("path","actualizar/"+n.id)("disabled",!1),L.R7$(),L.vxM(n.modalDelete?25:-1)}}function T_(i,e){1&i&&(L.j41(0,"p"),L.EFF(1,"Sin registros!"),L.k0s())}let _E=(()=>{class i{getMenuItems(n){return[{label:"Editar",icon:"pencil",disabled:!1,callback:()=>this.navigateToEdit(n)},{label:"Gestionar permisos",icon:"star",disabled:!0},{label:"Eliminar",icon:"trash",disabled:!1,callback:s=>{this.openDeleteModal(s)}}]}constructor(n,s,c,l,g){this.route=n,this.registroService=s,this.router=c,this.location=l,this.notificationService=g,this.disabled=!1,this.isModalOpen=!1,this.modalDelete=!1,this.selectedItemId=null,this.categoriaMap={Cardiolog\u00eda:{icon:"heart",color:"#dc3545"},Dermatolog\u00eda:{icon:"hand-dots",color:"#fd7e14"},Guardia:{icon:"square-h",color:"#f44336"},Endocrinolog\u00eda:{icon:"hand-holding-medical",color:"#ffc107"},Gastroenterolog\u00eda:{icon:"viruses",color:"#795548"},"Ginecolog\xeda y Obstetricia":{icon:"venus",color:"#e83e8c"},Hemoterapia:{icon:"tint",color:"#c0392b"},Infectolog\u00eda:{icon:"virus",color:"#ff5722"},Kinesiolog\u00eda:{icon:"dumbbell",color:"#fd7e14"},Laboratorio:{icon:"flask",color:"#8e44ad"},"Medicina General":{icon:"user-md",color:"#007bff"},Nefrolog\u00eda:{icon:"filter",color:"#3f51b5"},Neumolog\u00eda:{icon:"lungs",color:"#87ceeb"},Neurolog\u00eda:{icon:"brain",color:"#6f42c1"},Nutrici\u00f3n:{icon:"apple-whole",color:"#a2d729"},Odontolog\u00eda:{icon:"tooth",color:"#ffffff"},Oftalmolog\u00eda:{icon:"eye-dropper",color:"#17a2b8"},Oncolog\u00eda:{icon:"ribbon",color:"#6f42c1"},Otorrinolaringolog\u00eda:{icon:"head-side-cough",color:"#6610f2"},Pediatr\u00eda:{icon:"child",color:"#28a745"},Psiquiatr\u00eda:{icon:"comments",color:"#20c997"},"Terapia Intensiva":{icon:"bed-pulse",color:"#212529"},"Traumatolog\xeda y Ortopedia":{icon:"crutch",color:"#6c757d"},Urolog\u00eda:{icon:"x-ray",color:"#007bff"},Vacunatorio:{icon:"syringe",color:"#00bcd4"}},this.dropdownPosition={top:"35px",left:"-190px"}}triggerSuccess(){this.notificationService.addNotification("Registro eliminado con \xe9xito!","danger")}triggerError(){this.notificationService.addNotification("Error al generar el registro","warning")}ngOnInit(){this.route.params.subscribe(n=>{this.id=n.id,this.id?this.fetchDetails(this.id):console.error("ID not found in route parameters")}),this.checkIfMobile(window.innerWidth)}onResize(n){this.checkIfMobile(n.target.innerWidth)}checkIfMobile(n){this.isMobile=n<768}generateQRCode(n){if(n){const c=encodeURIComponent(`T\xedtulo: ${n.titulo}\nDescripci\xf3n: ${n.descripcion}\nFecha: ${n.fecha}\nHora: ${n.hora}\nCategoria: ${n.categoria}\nValidado: ${n.validado}\nEstado: ${n.estado}\nEmisor: ${n.validador}\nAdjuntos: ${n.adjuntos}`);this.qrCodeUrl=`https://quickchart.io/qr?text=${c}`}}fetchDetails(n){var s=this;return(0,me.A)(function*(){if(n)try{yield s.loadRegistro(n),s.registro&&s.generateQRCode(s.registro)}catch(c){console.error("Error al cargar registro:",c),s.registro=null}else s.registro=null})()}loadRegistro(n){var s=this;return(0,me.A)(function*(){try{const c=yield s.registroService.getRegistro(n);s.registro=c||null,s.generateQRCode(c)}catch(c){s.registro=null,console.error("Error recuperando registro:",c)}})()}getIconForCategoria(n){return this.categoriaMap[n]?.icon||"question-circle"}getColorForCategoria(n){return this.categoriaMap[n]?.color||"gray"}trackByFn(n){return n.id}goBack(){window.history.length>1?this.location.back():this.router.navigate(["/"])}navigateToEdit(n){this.router.navigate([`/actualizar/${n.id}`])}navigateToDelete(n){var s=this;return(0,me.A)(function*(){try{yield s.registroService.deleteRegistro(n.id),s.router.navigate(["/"])}catch(c){console.error("Error eliminando registro",c)}})()}openDeleteModal(n){n?.stopPropagation(),this.modalDelete=!0}openModal(n){this.selectedFile=n,this.isModalOpen=!this.isModalOpen}onConfirm(){var n=this;return(0,me.A)(function*(){const s=n.id;if(s)try{n.modalDelete=!1,yield n.registroService.deleteRegistro(s),n.router.navigate(["/"]),n.triggerSuccess()}catch{n.triggerError()}})()}static#e=this.\u0275fac=function(s){return new(s||i)(L.rXU(T.nX),L.rXU(Pe.m),L.rXU(T.Ix),L.rXU(Nt.aZ),L.rXU(Cp.J))};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-detail"]],hostBindings:function(s,c){1&s&&L.bIt("resize",function(g){return c.onResize(g)},!1,L.tSv)},standalone:!0,features:[L.aNF],decls:2,vars:1,consts:[[1,"panel__main"],[1,"panel__header--row"],["direction","row",3,"size","label","prefix","icon","severity","color"],["size","xs",3,"severity","label"],["buttonLabel","","buttonIcon","ellipsis-vertical",3,"items","position"],[1,"panel__inner--main"],[1,"panel__text--article"],[1,"panel__inner--aside"],[1,"panel__inner--left"],[1,"panel__qr--wrapper"],["alt","QR Code","alt","",1,"panel__qr--aside",3,"src"],[3,"size","prefix","direction","severity","icon"],["size","md",3,"label","prefix","direction"],["size","lg","onLabel","Validado","offLabel","No validado","colorOn","green","colorOff","red","labelPosition","right",3,"on","disabled"],[1,"panel__footer"],[1,"panel__footer--left"],["size","xs",3,"clickEvent","severity","variant","icon","direction","label","disabled"],[1,"panel__footer--right"],["size","xs",3,"severity","variant","icon","direction","label","path","disabled"],["icon","info-alert",3,"prefix","title","subtitle","closeable"],["prefix","Adjuntos","label","Mis archivos","direction","row",3,"size"],["role","navigation",1,"img__wrapper--grid"],[3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["icon","info-circle",3,"prefix","title","subtitle","img","closeable"],[3,"click"],["alt","Uploaded Image",3,"src"],["icon","info-circle",3,"closeModal","prefix","title","subtitle","img","closeable"],["direction","none","size","sm","label","Cerrar","variant","fill","severity","success",3,"click"],["icon","info-alert",3,"closeModal","prefix","title","subtitle","closeable"],["direction","none","size","sm","label","Eliminar","variant","outline","severity","danger",3,"click"],["direction","none","size","sm","label","Cancelar","variant","fill","severity","info",3,"click"]],template:function(s,c){1&s&&L.DNE(0,D1,26,44,"section",0)(1,T_,2,0,"p"),2&s&&L.vxM(null!=c.registro?0:1)},dependencies:[It.n,Mt.Q,Ue.U,Tn,Ip.P,iv.z,Nt.MD,Nt.Sq]})}return i})();var R1=ie(903),x_=ie(6553);const vE=[{path:"",canActivate:[()=>{const i=Ce();return Ke().pipe((0,Ze.T)(e=>!!e||(i.navigateByUrl("ingresar"),!1)))}],loadComponent:()=>ie.e(556).then(ie.bind(ie,6556)),children:[{path:"item/:id",component:_E},{path:"registrar",component:rv},{path:"scan",component:Bg},{path:"registros",component:w1.s},{path:"actualizar/:id",component:rv}]},{path:"registrarse",component:R1.default},{path:"ingresar",component:x_.default},{path:"auth",canActivate:[()=>{const i=Ce();return Ke().pipe((0,Ze.T)(e=>!e||(i.navigateByUrl("/"),!1)))}],children:[{path:"sign-in",loadComponent:()=>Promise.resolve().then(ie.bind(ie,6553)).then(i=>i.default)},{path:"sign-up",loadComponent:()=>Promise.resolve().then(ie.bind(ie,903)).then(i=>i.default)}]},{path:"",pathMatch:"full",redirectTo:"auth/sign-up"},{path:"**",redirectTo:"auth/sign-in"}],yE_firebaseConfig={apiKey:"AIzaSyBpsJfN6s6cNBJhbOeI-uZMu_-3gM7Z8zc",authDomain:"experienciapaciente-2024.firebaseapp.com",databaseURL:"https://experienciapaciente-2024-default-rtdb.firebaseio.com",projectId:"experienciapaciente-2024",storageBucket:"experienciapaciente-2024.appspot.com",messagingSenderId:"893869065647",appId:"1:893869065647:web:346d367ab8f1e3556f9b5a"},EE=[(0,Ct.MW)(()=>(0,Ct.Wp)(yE_firebaseConfig)),(0,H.hV)(()=>(0,H.aU)()),(0,pt._q)(()=>(0,pt.xI)()),function Tr(i,...e){return(0,kt.KO)("angularfire",Tt.xv.full,"gcs"),(0,L.EmA)([Gr,xd,{provide:so,useFactory:_a(i),multi:!0,deps:[L.SKi,L.zZn,Tt.u0,Ct.gL,[new L.Xx1,pt.DF],[new L.Xx1,Tt.Jv],...e]}])}(()=>Go())],CE={providers:[(0,T.lh)(vE,(0,T.qQ)(),(0,T.lG)()),EE,__]};function M1(i,e){if(1&i&&(L.j41(0,"app-card",1),L.nrm(1,"app-label",2),L.k0s()),2&i){const n=e.$implicit,s=L.XpG();L.Y8G("variant","fab")("severity","danger"===n.severity?"danger":"success")("closable",s.hide)("selectable",s.showErrorMsg),L.R7$(),L.FS9("label",n.message),L.FS9("severity",n.severity),L.Y8G("subtitle",s.showErrorMsg?"Vuelva a intentar luego":"Ser\xe1 redirigido a sus registros")("icon","danger"===n.severity?"circle-exclamation":"circle-check")}}let Ap=(()=>{class i{constructor(n){this.notificationService=n,this.showConfirmMsg=!1,this.showErrorMsg=!1,this.hide=!0,this.notifications=[],this.notificationService.notifications$.subscribe(s=>{this.notifications=s})}dismissNotification(n){this.notificationService.removeNotification(n)}static#e=this.\u0275fac=function(s){return new(s||i)(L.rXU(Cp.J))};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-message"]],standalone:!0,features:[L.aNF],decls:1,vars:1,consts:[["size","lg","direction","row","bottom","20px","left","50vw",3,"variant","severity","closable","selectable",4,"ngFor","ngForOf"],["size","lg","direction","row","bottom","20px","left","50vw",3,"variant","severity","closable","selectable"],["size","xxs","variant","outline","direction","row",3,"label","subtitle","icon","severity"]],template:function(s,c){1&s&&L.DNE(0,M1,2,8,"app-card",0),2&s&&L.Y8G("ngForOf",c.notifications)},dependencies:[_d.i,Ue.U,Nt.MD,Nt.Sq]})}return i})();(0,D.B8)((()=>{class i{constructor(n){this.route=n,this.router=(0,L.WQX)(T.Ix)}ngOnInit(){this.route.queryParams.subscribe(n=>{const s=n.destino;"registrarse"===s?this.router.navigate(["/portal/registrarse"]):"ingresar"===s&&this.router.navigate(["/portal/ingresar"])})}static#e=this.\u0275fac=function(s){return new(s||i)(L.rXU(T.nX))};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-root"]],standalone:!0,features:[L.aNF],decls:2,vars:0,template:function(s,c){1&s&&L.nrm(0,"router-outlet")(1,"app-message")},dependencies:[T.n3,Ap]})}return i})(),CE).catch(i=>console.error(i))},4412:(yn,wt,ie)=>{ie.d(wt,{t:()=>T});var D=ie(1413);class T extends D.B{constructor(Be){super(),this._value=Be}get value(){return this.getValue()}_subscribe(Be){const Ze=super._subscribe(Be);return!Ze.closed&&Be.next(this._value),Ze}getValue(){const{hasError:Be,thrownError:Ze,_value:Ce}=this;if(Be)throw Ze;return this._throwIfClosed(),Ce}next(Be){super.next(this._value=Be)}}},1985:(yn,wt,ie)=>{ie.d(wt,{c:()=>Et});var D=ie(7707),T=ie(8359),L=ie(3494),Be=ie(1203),Ze=ie(1026),Ce=ie(8071),Ke=ie(9786);let Et=(()=>{class Pe{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const It=new Pe;return It.source=this,It.operator=Ue,It}subscribe(Ue,It,Mt){const tn=function Ae(Pe){return Pe&&Pe instanceof D.vU||function me(Pe){return Pe&&(0,Ce.T)(Pe.next)&&(0,Ce.T)(Pe.error)&&(0,Ce.T)(Pe.complete)}(Pe)&&(0,T.Uv)(Pe)}(Ue)?Ue:new D.Ms(Ue,It,Mt);return(0,Ke.Y)(()=>{const{operator:Nt,source:On}=this;tn.add(Nt?Nt.call(tn,On):On?this._subscribe(tn):this._trySubscribe(tn))}),tn}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(It){Ue.error(It)}}forEach(Ue,It){return new(It=rt(It))((Mt,tn)=>{const Nt=new D.Ms({next:On=>{try{Ue(On)}catch(Tn){tn(Tn),Nt.unsubscribe()}},error:tn,complete:Mt});this.subscribe(Nt)})}_subscribe(Ue){var It;return null===(It=this.source)||void 0===It?void 0:It.subscribe(Ue)}[L.s](){return this}pipe(...Ue){return(0,Be.m)(Ue)(this)}toPromise(Ue){return new(Ue=rt(Ue))((It,Mt)=>{let tn;this.subscribe(Nt=>tn=Nt,Nt=>Mt(Nt),()=>It(tn))})}}return Pe.create=pt=>new Pe(pt),Pe})();function rt(Pe){var pt;return null!==(pt=Pe??Ze.$.Promise)&&void 0!==pt?pt:Promise}},1413:(yn,wt,ie)=>{ie.d(wt,{B:()=>Ke});var D=ie(1985),T=ie(8359);const Be=(0,ie(1853).L)(rt=>function(){rt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ze=ie(7908),Ce=ie(9786);let Ke=(()=>{class rt extends D.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ae){const Pe=new Et(this,this);return Pe.operator=Ae,Pe}_throwIfClosed(){if(this.closed)throw new Be}next(Ae){(0,Ce.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Pe of this.currentObservers)Pe.next(Ae)}})}error(Ae){(0,Ce.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ae;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().error(Ae)}})}complete(){(0,Ce.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ae}=this;for(;Ae.length;)Ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ae;return(null===(Ae=this.observers)||void 0===Ae?void 0:Ae.length)>0}_trySubscribe(Ae){return this._throwIfClosed(),super._trySubscribe(Ae)}_subscribe(Ae){return this._throwIfClosed(),this._checkFinalizedStatuses(Ae),this._innerSubscribe(Ae)}_innerSubscribe(Ae){const{hasError:Pe,isStopped:pt,observers:Ue}=this;return Pe||pt?T.Kn:(this.currentObservers=null,Ue.push(Ae),new T.yU(()=>{this.currentObservers=null,(0,Ze.o)(Ue,Ae)}))}_checkFinalizedStatuses(Ae){const{hasError:Pe,thrownError:pt,isStopped:Ue}=this;Pe?Ae.error(pt):Ue&&Ae.complete()}asObservable(){const Ae=new D.c;return Ae.source=this,Ae}}return rt.create=(me,Ae)=>new Et(me,Ae),rt})();class Et extends Ke{constructor(me,Ae){super(),this.destination=me,this.source=Ae}next(me){var Ae,Pe;null===(Pe=null===(Ae=this.destination)||void 0===Ae?void 0:Ae.next)||void 0===Pe||Pe.call(Ae,me)}error(me){var Ae,Pe;null===(Pe=null===(Ae=this.destination)||void 0===Ae?void 0:Ae.error)||void 0===Pe||Pe.call(Ae,me)}complete(){var me,Ae;null===(Ae=null===(me=this.destination)||void 0===me?void 0:me.complete)||void 0===Ae||Ae.call(me)}_subscribe(me){var Ae,Pe;return null!==(Pe=null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(me))&&void 0!==Pe?Pe:T.Kn}}},7707:(yn,wt,ie)=>{ie.d(wt,{Ms:()=>Mt,vU:()=>Pe});var D=ie(8071),T=ie(8359),L=ie(1026),Be=ie(5334),Ze=ie(5343);const Ce=rt("C",void 0,void 0);function rt(Tt,Ct,kt){return{kind:Tt,value:Ct,error:kt}}var me=ie(9270),Ae=ie(9786);class Pe extends T.yU{constructor(Ct){super(),this.isStopped=!1,Ct?(this.destination=Ct,(0,T.Uv)(Ct)&&Ct.add(this)):this.destination=Tn}static create(Ct,kt,Ht){return new Mt(Ct,kt,Ht)}next(Ct){this.isStopped?On(function Et(Tt){return rt("N",Tt,void 0)}(Ct),this):this._next(Ct)}error(Ct){this.isStopped?On(function Ke(Tt){return rt("E",void 0,Tt)}(Ct),this):(this.isStopped=!0,this._error(Ct))}complete(){this.isStopped?On(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ct){this.destination.next(Ct)}_error(Ct){try{this.destination.error(Ct)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const pt=Function.prototype.bind;function Ue(Tt,Ct){return pt.call(Tt,Ct)}class It{constructor(Ct){this.partialObserver=Ct}next(Ct){const{partialObserver:kt}=this;if(kt.next)try{kt.next(Ct)}catch(Ht){tn(Ht)}}error(Ct){const{partialObserver:kt}=this;if(kt.error)try{kt.error(Ct)}catch(Ht){tn(Ht)}else tn(Ct)}complete(){const{partialObserver:Ct}=this;if(Ct.complete)try{Ct.complete()}catch(kt){tn(kt)}}}class Mt extends Pe{constructor(Ct,kt,Ht){let Xt;if(super(),(0,D.T)(Ct)||!Ct)Xt={next:Ct??void 0,error:kt??void 0,complete:Ht??void 0};else{let Qt;this&&L.$.useDeprecatedNextContext?(Qt=Object.create(Ct),Qt.unsubscribe=()=>this.unsubscribe(),Xt={next:Ct.next&&Ue(Ct.next,Qt),error:Ct.error&&Ue(Ct.error,Qt),complete:Ct.complete&&Ue(Ct.complete,Qt)}):Xt=Ct}this.destination=new It(Xt)}}function tn(Tt){L.$.useDeprecatedSynchronousErrorHandling?(0,Ae.l)(Tt):(0,Be.m)(Tt)}function On(Tt,Ct){const{onStoppedNotification:kt}=L.$;kt&&me.f.setTimeout(()=>kt(Tt,Ct))}const Tn={closed:!0,next:Ze.l,error:function Nt(Tt){throw Tt},complete:Ze.l}},8359:(yn,wt,ie)=>{ie.d(wt,{Kn:()=>Ce,yU:()=>Ze,Uv:()=>Ke});var D=ie(8071);const L=(0,ie(1853).L)(rt=>function(Ae){rt(this),this.message=Ae?`${Ae.length} errors occurred during unsubscription:\n${Ae.map((Pe,pt)=>`${pt+1}) ${Pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ae});var Be=ie(7908);class Ze{constructor(me){this.initialTeardown=me,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let me;if(!this.closed){this.closed=!0;const{_parentage:Ae}=this;if(Ae)if(this._parentage=null,Array.isArray(Ae))for(const Ue of Ae)Ue.remove(this);else Ae.remove(this);const{initialTeardown:Pe}=this;if((0,D.T)(Pe))try{Pe()}catch(Ue){me=Ue instanceof L?Ue.errors:[Ue]}const{_finalizers:pt}=this;if(pt){this._finalizers=null;for(const Ue of pt)try{Et(Ue)}catch(It){me=me??[],It instanceof L?me=[...me,...It.errors]:me.push(It)}}if(me)throw new L(me)}}add(me){var Ae;if(me&&me!==this)if(this.closed)Et(me);else{if(me instanceof Ze){if(me.closed||me._hasParent(this))return;me._addParent(this)}(this._finalizers=null!==(Ae=this._finalizers)&&void 0!==Ae?Ae:[]).push(me)}}_hasParent(me){const{_parentage:Ae}=this;return Ae===me||Array.isArray(Ae)&&Ae.includes(me)}_addParent(me){const{_parentage:Ae}=this;this._parentage=Array.isArray(Ae)?(Ae.push(me),Ae):Ae?[Ae,me]:me}_removeParent(me){const{_parentage:Ae}=this;Ae===me?this._parentage=null:Array.isArray(Ae)&&(0,Be.o)(Ae,me)}remove(me){const{_finalizers:Ae}=this;Ae&&(0,Be.o)(Ae,me),me instanceof Ze&&me._removeParent(this)}}Ze.EMPTY=(()=>{const rt=new Ze;return rt.closed=!0,rt})();const Ce=Ze.EMPTY;function Ke(rt){return rt instanceof Ze||rt&&"closed"in rt&&(0,D.T)(rt.remove)&&(0,D.T)(rt.add)&&(0,D.T)(rt.unsubscribe)}function Et(rt){(0,D.T)(rt)?rt():rt.unsubscribe()}},1026:(yn,wt,ie)=>{ie.d(wt,{$:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4572:(yn,wt,ie)=>{ie.d(wt,{z:()=>me});var D=ie(1985),T=ie(3073),L=ie(8455),Be=ie(3669),Ze=ie(6450),Ce=ie(3794),Ke=ie(8496),Et=ie(4360),rt=ie(5225);function me(...pt){const Ue=(0,Ce.lI)(pt),It=(0,Ce.ms)(pt),{args:Mt,keys:tn}=(0,T.D)(pt);if(0===Mt.length)return(0,L.H)([],Ue);const Nt=new D.c(function Ae(pt,Ue,It=Be.D){return Mt=>{Pe(Ue,()=>{const{length:tn}=pt,Nt=new Array(tn);let On=tn,Tn=tn;for(let Tt=0;Tt<tn;Tt++)Pe(Ue,()=>{const Ct=(0,L.H)(pt[Tt],Ue);let kt=!1;Ct.subscribe((0,Et._)(Mt,Ht=>{Nt[Tt]=Ht,kt||(kt=!0,Tn--),Tn||Mt.next(It(Nt.slice()))},()=>{--On||Mt.complete()}))},Mt)},Mt)}}(Mt,Ue,tn?On=>(0,Ke.e)(tn,On):Be.D));return It?Nt.pipe((0,Ze.I)(It)):Nt}function Pe(pt,Ue,It){pt?(0,rt.N)(It,pt,Ue):Ue()}},8793:(yn,wt,ie)=>{ie.d(wt,{x:()=>Ze});var D=ie(6365),L=ie(3794),Be=ie(8455);function Ze(...Ce){return function T(){return(0,D.U)(1)}()((0,Be.H)(Ce,(0,L.lI)(Ce)))}},8455:(yn,wt,ie)=>{ie.d(wt,{H:()=>Ct});var D=ie(8750),T=ie(941),L=ie(6745),Ce=ie(1985),Et=ie(4761),rt=ie(8071),me=ie(5225);function Pe(kt,Ht){if(!kt)throw new Error("Iterable cannot be null");return new Ce.c(Xt=>{(0,me.N)(Xt,Ht,()=>{const Qt=kt[Symbol.asyncIterator]();(0,me.N)(Xt,Ht,()=>{Qt.next().then(Xe=>{Xe.done?Xt.complete():Xt.next(Xe.value)})},0,!0)})})}var pt=ie(5055),Ue=ie(9858),It=ie(7441),Mt=ie(5397),tn=ie(7953),Nt=ie(591),On=ie(5196);function Ct(kt,Ht){return Ht?function Tt(kt,Ht){if(null!=kt){if((0,pt.l)(kt))return function Be(kt,Ht){return(0,D.Tg)(kt).pipe((0,L._)(Ht),(0,T.Q)(Ht))}(kt,Ht);if((0,It.X)(kt))return function Ke(kt,Ht){return new Ce.c(Xt=>{let Qt=0;return Ht.schedule(function(){Qt===kt.length?Xt.complete():(Xt.next(kt[Qt++]),Xt.closed||this.schedule())})})}(kt,Ht);if((0,Ue.y)(kt))return function Ze(kt,Ht){return(0,D.Tg)(kt).pipe((0,L._)(Ht),(0,T.Q)(Ht))}(kt,Ht);if((0,tn.T)(kt))return Pe(kt,Ht);if((0,Mt.x)(kt))return function Ae(kt,Ht){return new Ce.c(Xt=>{let Qt;return(0,me.N)(Xt,Ht,()=>{Qt=kt[Et.l](),(0,me.N)(Xt,Ht,()=>{let Xe,Vn;try{({value:Xe,done:Vn}=Qt.next())}catch(xn){return void Xt.error(xn)}Vn?Xt.complete():Xt.next(Xe)},0,!0)}),()=>(0,rt.T)(Qt?.return)&&Qt.return()})}(kt,Ht);if((0,On.U)(kt))return function Tn(kt,Ht){return Pe((0,On.C)(kt),Ht)}(kt,Ht)}throw(0,Nt.L)(kt)}(kt,Ht):(0,D.Tg)(kt)}},8750:(yn,wt,ie)=>{ie.d(wt,{Tg:()=>pt});var D=ie(1635),T=ie(7441),L=ie(9858),Be=ie(1985),Ze=ie(5055),Ce=ie(7953),Ke=ie(591),Et=ie(5397),rt=ie(5196),me=ie(8071),Ae=ie(5334),Pe=ie(3494);function pt(Tt){if(Tt instanceof Be.c)return Tt;if(null!=Tt){if((0,Ze.l)(Tt))return function Ue(Tt){return new Be.c(Ct=>{const kt=Tt[Pe.s]();if((0,me.T)(kt.subscribe))return kt.subscribe(Ct);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Tt);if((0,T.X)(Tt))return function It(Tt){return new Be.c(Ct=>{for(let kt=0;kt<Tt.length&&!Ct.closed;kt++)Ct.next(Tt[kt]);Ct.complete()})}(Tt);if((0,L.y)(Tt))return function Mt(Tt){return new Be.c(Ct=>{Tt.then(kt=>{Ct.closed||(Ct.next(kt),Ct.complete())},kt=>Ct.error(kt)).then(null,Ae.m)})}(Tt);if((0,Ce.T)(Tt))return Nt(Tt);if((0,Et.x)(Tt))return function tn(Tt){return new Be.c(Ct=>{for(const kt of Tt)if(Ct.next(kt),Ct.closed)return;Ct.complete()})}(Tt);if((0,rt.U)(Tt))return function On(Tt){return Nt((0,rt.C)(Tt))}(Tt)}throw(0,Ke.L)(Tt)}function Nt(Tt){return new Be.c(Ct=>{(function Tn(Tt,Ct){var kt,Ht,Xt,Qt;return(0,D.sH)(this,void 0,void 0,function*(){try{for(kt=(0,D.xN)(Tt);!(Ht=yield kt.next()).done;)if(Ct.next(Ht.value),Ct.closed)return}catch(Xe){Xt={error:Xe}}finally{try{Ht&&!Ht.done&&(Qt=kt.return)&&(yield Qt.call(kt))}finally{if(Xt)throw Xt.error}}Ct.complete()})})(Tt,Ct).catch(kt=>Ct.error(kt))})}},7673:(yn,wt,ie)=>{ie.d(wt,{of:()=>L});var D=ie(3794),T=ie(8455);function L(...Be){const Ze=(0,D.lI)(Be);return(0,T.H)(Be,Ze)}},4360:(yn,wt,ie)=>{ie.d(wt,{_:()=>T});var D=ie(7707);function T(Be,Ze,Ce,Ke,Et){return new L(Be,Ze,Ce,Ke,Et)}class L extends D.vU{constructor(Ze,Ce,Ke,Et,rt,me){super(Ze),this.onFinalize=rt,this.shouldUnsubscribe=me,this._next=Ce?function(Ae){try{Ce(Ae)}catch(Pe){Ze.error(Pe)}}:super._next,this._error=Et?function(Ae){try{Et(Ae)}catch(Pe){Ze.error(Pe)}finally{this.unsubscribe()}}:super._error,this._complete=Ke?function(){try{Ke()}catch(Ae){Ze.error(Ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ze;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ce}=this;super.unsubscribe(),!Ce&&(null===(Ze=this.onFinalize)||void 0===Ze||Ze.call(this))}}}},6354:(yn,wt,ie)=>{ie.d(wt,{T:()=>L});var D=ie(9974),T=ie(4360);function L(Be,Ze){return(0,D.N)((Ce,Ke)=>{let Et=0;Ce.subscribe((0,T._)(Ke,rt=>{Ke.next(Be.call(Ze,rt,Et++))}))})}},6365:(yn,wt,ie)=>{ie.d(wt,{U:()=>L});var D=ie(1397),T=ie(3669);function L(Be=1/0){return(0,D.Z)(T.D,Be)}},1397:(yn,wt,ie)=>{ie.d(wt,{Z:()=>Et});var D=ie(6354),T=ie(8750),L=ie(9974),Be=ie(5225),Ze=ie(4360),Ke=ie(8071);function Et(rt,me,Ae=1/0){return(0,Ke.T)(me)?Et((Pe,pt)=>(0,D.T)((Ue,It)=>me(Pe,Ue,pt,It))((0,T.Tg)(rt(Pe,pt))),Ae):("number"==typeof me&&(Ae=me),(0,L.N)((Pe,pt)=>function Ce(rt,me,Ae,Pe,pt,Ue,It,Mt){const tn=[];let Nt=0,On=0,Tn=!1;const Tt=()=>{Tn&&!tn.length&&!Nt&&me.complete()},Ct=Ht=>Nt<Pe?kt(Ht):tn.push(Ht),kt=Ht=>{Ue&&me.next(Ht),Nt++;let Xt=!1;(0,T.Tg)(Ae(Ht,On++)).subscribe((0,Ze._)(me,Qt=>{pt?.(Qt),Ue?Ct(Qt):me.next(Qt)},()=>{Xt=!0},void 0,()=>{if(Xt)try{for(Nt--;tn.length&&Nt<Pe;){const Qt=tn.shift();It?(0,Be.N)(me,It,()=>kt(Qt)):kt(Qt)}Tt()}catch(Qt){me.error(Qt)}}))};return rt.subscribe((0,Ze._)(me,Ct,()=>{Tn=!0,Tt()})),()=>{Mt?.()}}(Pe,pt,rt,Ae)))}},941:(yn,wt,ie)=>{ie.d(wt,{Q:()=>Be});var D=ie(5225),T=ie(9974),L=ie(4360);function Be(Ze,Ce=0){return(0,T.N)((Ke,Et)=>{Ke.subscribe((0,L._)(Et,rt=>(0,D.N)(Et,Ze,()=>Et.next(rt),Ce),()=>(0,D.N)(Et,Ze,()=>Et.complete(),Ce),rt=>(0,D.N)(Et,Ze,()=>Et.error(rt),Ce)))})}},9172:(yn,wt,ie)=>{ie.d(wt,{Z:()=>Be});var D=ie(8793),T=ie(3794),L=ie(9974);function Be(...Ze){const Ce=(0,T.lI)(Ze);return(0,L.N)((Ke,Et)=>{(Ce?(0,D.x)(Ze,Ke,Ce):(0,D.x)(Ze,Ke)).subscribe(Et)})}},6745:(yn,wt,ie)=>{ie.d(wt,{_:()=>T});var D=ie(9974);function T(L,Be=0){return(0,D.N)((Ze,Ce)=>{Ce.add(L.schedule(()=>Ze.subscribe(Ce),Be))})}},5558:(yn,wt,ie)=>{ie.d(wt,{n:()=>Be});var D=ie(8750),T=ie(9974),L=ie(4360);function Be(Ze,Ce){return(0,T.N)((Ke,Et)=>{let rt=null,me=0,Ae=!1;const Pe=()=>Ae&&!rt&&Et.complete();Ke.subscribe((0,L._)(Et,pt=>{rt?.unsubscribe();let Ue=0;const It=me++;(0,D.Tg)(Ze(pt,It)).subscribe(rt=(0,L._)(Et,Mt=>Et.next(Ce?Ce(pt,Mt,It,Ue++):Mt),()=>{rt=null,Pe()}))},()=>{Ae=!0,Pe()}))})}},8141:(yn,wt,ie)=>{ie.d(wt,{M:()=>Ze});var D=ie(8071),T=ie(9974),L=ie(4360),Be=ie(3669);function Ze(Ce,Ke,Et){const rt=(0,D.T)(Ce)||Ke||Et?{next:Ce,error:Ke,complete:Et}:Ce;return rt?(0,T.N)((me,Ae)=>{var Pe;null===(Pe=rt.subscribe)||void 0===Pe||Pe.call(rt);let pt=!0;me.subscribe((0,L._)(Ae,Ue=>{var It;null===(It=rt.next)||void 0===It||It.call(rt,Ue),Ae.next(Ue)},()=>{var Ue;pt=!1,null===(Ue=rt.complete)||void 0===Ue||Ue.call(rt),Ae.complete()},Ue=>{var It;pt=!1,null===(It=rt.error)||void 0===It||It.call(rt,Ue),Ae.error(Ue)},()=>{var Ue,It;pt&&(null===(Ue=rt.unsubscribe)||void 0===Ue||Ue.call(rt)),null===(It=rt.finalize)||void 0===It||It.call(rt)}))}):Be.D}},9270:(yn,wt,ie)=>{ie.d(wt,{f:()=>D});const D={setTimeout(T,L,...Be){const{delegate:Ze}=D;return Ze?.setTimeout?Ze.setTimeout(T,L,...Be):setTimeout(T,L,...Be)},clearTimeout(T){const{delegate:L}=D;return(L?.clearTimeout||clearTimeout)(T)},delegate:void 0}},4761:(yn,wt,ie)=>{ie.d(wt,{l:()=>T});const T=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(yn,wt,ie)=>{ie.d(wt,{s:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},3794:(yn,wt,ie)=>{ie.d(wt,{ms:()=>Be,lI:()=>Ze});var D=ie(8071);function L(Ke){return Ke[Ke.length-1]}function Be(Ke){return(0,D.T)(L(Ke))?Ke.pop():void 0}function Ze(Ke){return function T(Ke){return Ke&&(0,D.T)(Ke.schedule)}(L(Ke))?Ke.pop():void 0}},3073:(yn,wt,ie)=>{ie.d(wt,{D:()=>Ze});const{isArray:D}=Array,{getPrototypeOf:T,prototype:L,keys:Be}=Object;function Ze(Ke){if(1===Ke.length){const Et=Ke[0];if(D(Et))return{args:Et,keys:null};if(function Ce(Ke){return Ke&&"object"==typeof Ke&&T(Ke)===L}(Et)){const rt=Be(Et);return{args:rt.map(me=>Et[me]),keys:rt}}}return{args:Ke,keys:null}}},7908:(yn,wt,ie)=>{function D(T,L){if(T){const Be=T.indexOf(L);0<=Be&&T.splice(Be,1)}}ie.d(wt,{o:()=>D})},1853:(yn,wt,ie)=>{function D(T){const Be=T(Ze=>{Error.call(Ze),Ze.stack=(new Error).stack});return Be.prototype=Object.create(Error.prototype),Be.prototype.constructor=Be,Be}ie.d(wt,{L:()=>D})},8496:(yn,wt,ie)=>{function D(T,L){return T.reduce((Be,Ze,Ce)=>(Be[Ze]=L[Ce],Be),{})}ie.d(wt,{e:()=>D})},9786:(yn,wt,ie)=>{ie.d(wt,{Y:()=>L,l:()=>Be});var D=ie(1026);let T=null;function L(Ze){if(D.$.useDeprecatedSynchronousErrorHandling){const Ce=!T;if(Ce&&(T={errorThrown:!1,error:null}),Ze(),Ce){const{errorThrown:Ke,error:Et}=T;if(T=null,Ke)throw Et}}else Ze()}function Be(Ze){D.$.useDeprecatedSynchronousErrorHandling&&T&&(T.errorThrown=!0,T.error=Ze)}},5225:(yn,wt,ie)=>{function D(T,L,Be,Ze=0,Ce=!1){const Ke=L.schedule(function(){Be(),Ce?T.add(this.schedule(null,Ze)):this.unsubscribe()},Ze);if(T.add(Ke),!Ce)return Ke}ie.d(wt,{N:()=>D})},3669:(yn,wt,ie)=>{function D(T){return T}ie.d(wt,{D:()=>D})},7441:(yn,wt,ie)=>{ie.d(wt,{X:()=>D});const D=T=>T&&"number"==typeof T.length&&"function"!=typeof T},7953:(yn,wt,ie)=>{ie.d(wt,{T:()=>T});var D=ie(8071);function T(L){return Symbol.asyncIterator&&(0,D.T)(L?.[Symbol.asyncIterator])}},8071:(yn,wt,ie)=>{function D(T){return"function"==typeof T}ie.d(wt,{T:()=>D})},5055:(yn,wt,ie)=>{ie.d(wt,{l:()=>L});var D=ie(3494),T=ie(8071);function L(Be){return(0,T.T)(Be[D.s])}},5397:(yn,wt,ie)=>{ie.d(wt,{x:()=>L});var D=ie(4761),T=ie(8071);function L(Be){return(0,T.T)(Be?.[D.l])}},9858:(yn,wt,ie)=>{ie.d(wt,{y:()=>T});var D=ie(8071);function T(L){return(0,D.T)(L?.then)}},5196:(yn,wt,ie)=>{ie.d(wt,{C:()=>L,U:()=>Be});var D=ie(1635),T=ie(8071);function L(Ze){return(0,D.AQ)(this,arguments,function*(){const Ke=Ze.getReader();try{for(;;){const{value:Et,done:rt}=yield(0,D.N3)(Ke.read());if(rt)return yield(0,D.N3)(void 0);yield yield(0,D.N3)(Et)}}finally{Ke.releaseLock()}})}function Be(Ze){return(0,T.T)(Ze?.getReader)}},9974:(yn,wt,ie)=>{ie.d(wt,{N:()=>L,S:()=>T});var D=ie(8071);function T(Be){return(0,D.T)(Be?.lift)}function L(Be){return Ze=>{if(T(Ze))return Ze.lift(function(Ce){try{return Be(Ce,this)}catch(Ke){this.error(Ke)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(yn,wt,ie)=>{ie.d(wt,{I:()=>Be});var D=ie(6354);const{isArray:T}=Array;function Be(Ze){return(0,D.T)(Ce=>function L(Ze,Ce){return T(Ce)?Ze(...Ce):Ze(Ce)}(Ze,Ce))}},5343:(yn,wt,ie)=>{function D(){}ie.d(wt,{l:()=>D})},1203:(yn,wt,ie)=>{ie.d(wt,{F:()=>T,m:()=>L});var D=ie(3669);function T(...Be){return L(Be)}function L(Be){return 0===Be.length?D.D:1===Be.length?Be[0]:function(Ce){return Be.reduce((Ke,Et)=>Et(Ke),Ce)}}},5334:(yn,wt,ie)=>{ie.d(wt,{m:()=>L});var D=ie(1026),T=ie(9270);function L(Be){T.f.setTimeout(()=>{const{onUnhandledError:Ze}=D.$;if(!Ze)throw Be;Ze(Be)})}},591:(yn,wt,ie)=>{function D(T){return new TypeError(`You provided ${null!==T&&"object"==typeof T?"an invalid object":`'${T}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ie.d(wt,{L:()=>D})},177:(yn,wt,ie)=>{ie.d(wt,{AJ:()=>za,B3:()=>yi,Jj:()=>Bo,MD:()=>fo,N0:()=>Qr,QT:()=>L,Sm:()=>Mt,Sq:()=>$a,VF:()=>Ze,Vy:()=>xo,Xr:()=>Wa,YU:()=>Mr,ZD:()=>Be,_b:()=>Pn,aZ:()=>Nt,bT:()=>ca,fw:()=>tn,hb:()=>Ue,hj:()=>rt,qQ:()=>Ke});var D=ie(3953);let T=null;function L(){return T}function Be(F){T??=F}class Ze{}const Ke=new D.nKC("");let Et=(()=>{class F{historyGo(W){throw new Error("")}static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275prov=D.jDH({token:F,factory:()=>(0,D.WQX)(me),providedIn:"platform"})}return F})();const rt=new D.nKC("");let me=(()=>{class F extends Et{constructor(){super(),this._doc=(0,D.WQX)(Ke),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(W){const ne=L().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",W,!1),()=>ne.removeEventListener("popstate",W)}onHashChange(W){const ne=L().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",W,!1),()=>ne.removeEventListener("hashchange",W)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(W){this._location.pathname=W}pushState(W,ne,we){this._history.pushState(W,ne,we)}replaceState(W,ne,we){this._history.replaceState(W,ne,we)}forward(){this._history.forward()}back(){this._history.back()}historyGo(W=0){this._history.go(W)}getState(){return this._history.state}static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275prov=D.jDH({token:F,factory:()=>new F,providedIn:"platform"})}return F})();function Ae(F,re){if(0==F.length)return re;if(0==re.length)return F;let W=0;return F.endsWith("/")&&W++,re.startsWith("/")&&W++,2==W?F+re.substring(1):1==W?F+re:F+"/"+re}function Pe(F){const re=F.match(/#|\?|$/),W=re&&re.index||F.length;return F.slice(0,W-("/"===F[W-1]?1:0))+F.slice(W)}function pt(F){return F&&"?"!==F[0]?"?"+F:F}let Ue=(()=>{class F{historyGo(W){throw new Error("")}static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275prov=D.jDH({token:F,factory:()=>(0,D.WQX)(Mt),providedIn:"root"})}return F})();const It=new D.nKC("");let Mt=(()=>{class F extends Ue{constructor(W,ne){super(),this._platformLocation=W,this._removeListenerFns=[],this._baseHref=ne??this._platformLocation.getBaseHrefFromDOM()??(0,D.WQX)(Ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}prepareExternalUrl(W){return Ae(this._baseHref,W)}path(W=!1){const ne=this._platformLocation.pathname+pt(this._platformLocation.search),we=this._platformLocation.hash;return we&&W?`${ne}${we}`:ne}pushState(W,ne,we,ut){const mt=this.prepareExternalUrl(we+pt(ut));this._platformLocation.pushState(W,ne,mt)}replaceState(W,ne,we,ut){const mt=this.prepareExternalUrl(we+pt(ut));this._platformLocation.replaceState(W,ne,mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.KVO(Et),D.KVO(It,8))};static#t=this.\u0275prov=D.jDH({token:F,factory:F.\u0275fac,providedIn:"root"})}return F})(),tn=(()=>{class F extends Ue{constructor(W,ne){super(),this._platformLocation=W,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}path(W=!1){const ne=this._platformLocation.hash??"#";return ne.length>0?ne.substring(1):ne}prepareExternalUrl(W){const ne=Ae(this._baseHref,W);return ne.length>0?"#"+ne:ne}pushState(W,ne,we,ut){let mt=this.prepareExternalUrl(we+pt(ut));0==mt.length&&(mt=this._platformLocation.pathname),this._platformLocation.pushState(W,ne,mt)}replaceState(W,ne,we,ut){let mt=this.prepareExternalUrl(we+pt(ut));0==mt.length&&(mt=this._platformLocation.pathname),this._platformLocation.replaceState(W,ne,mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.KVO(Et),D.KVO(It,8))};static#t=this.\u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})(),Nt=(()=>{class F{constructor(W){this._subject=new D.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=W;const ne=this._locationStrategy.getBaseHref();this._basePath=function Ct(F){if(new RegExp("^(https?:)?//").test(F)){const[,W]=F.split(/\/\/[^\/]+/);return W}return F}(Pe(Tt(ne))),this._locationStrategy.onPopState(we=>{this._subject.emit({url:this.path(!0),pop:!0,state:we.state,type:we.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(W=!1){return this.normalize(this._locationStrategy.path(W))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(W,ne=""){return this.path()==this.normalize(W+pt(ne))}normalize(W){return F.stripTrailingSlash(function Tn(F,re){if(!F||!re.startsWith(F))return re;const W=re.substring(F.length);return""===W||["/",";","?","#"].includes(W[0])?W:re}(this._basePath,Tt(W)))}prepareExternalUrl(W){return W&&"/"!==W[0]&&(W="/"+W),this._locationStrategy.prepareExternalUrl(W)}go(W,ne="",we=null){this._locationStrategy.pushState(we,"",W,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+pt(ne)),we)}replaceState(W,ne="",we=null){this._locationStrategy.replaceState(we,"",W,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+pt(ne)),we)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(W=0){this._locationStrategy.historyGo?.(W)}onUrlChange(W){return this._urlChangeListeners.push(W),this._urlChangeSubscription??=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)}),()=>{const ne=this._urlChangeListeners.indexOf(W);this._urlChangeListeners.splice(ne,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(W="",ne){this._urlChangeListeners.forEach(we=>we(W,ne))}subscribe(W,ne,we){return this._subject.subscribe({next:W,error:ne,complete:we})}static#e=this.normalizeQueryParams=pt;static#t=this.joinWithSlash=Ae;static#n=this.stripTrailingSlash=Pe;static#r=this.\u0275fac=function(ne){return new(ne||F)(D.KVO(Ue))};static#i=this.\u0275prov=D.jDH({token:F,factory:()=>function On(){return new Nt((0,D.KVO)(Ue))}(),providedIn:"root"})}return F})();function Tt(F){return F.replace(/\/index.html$/,"")}function Pn(F,re){re=encodeURIComponent(re);for(const W of F.split(";")){const ne=W.indexOf("="),[we,ut]=-1==ne?[W,""]:[W.slice(0,ne),W.slice(ne+1)];if(we.trim()===re)return decodeURIComponent(ut)}return null}const kn=/\s+/,Rr=[];let Mr=(()=>{class F{constructor(W,ne){this._ngEl=W,this._renderer=ne,this.initialClasses=Rr,this.stateMap=new Map}set klass(W){this.initialClasses=null!=W?W.trim().split(kn):Rr}set ngClass(W){this.rawClass="string"==typeof W?W.trim().split(kn):W}ngDoCheck(){for(const ne of this.initialClasses)this._updateState(ne,!0);const W=this.rawClass;if(Array.isArray(W)||W instanceof Set)for(const ne of W)this._updateState(ne,!0);else if(null!=W)for(const ne of Object.keys(W))this._updateState(ne,!!W[ne]);this._applyStateDiff()}_updateState(W,ne){const we=this.stateMap.get(W);void 0!==we?(we.enabled!==ne&&(we.changed=!0,we.enabled=ne),we.touched=!0):this.stateMap.set(W,{enabled:ne,changed:!0,touched:!0})}_applyStateDiff(){for(const W of this.stateMap){const ne=W[0],we=W[1];we.changed?(this._toggleClass(ne,we.enabled),we.changed=!1):we.touched||(we.enabled&&this._toggleClass(ne,!1),this.stateMap.delete(ne)),we.touched=!1}}_toggleClass(W,ne){(W=W.trim()).length>0&&W.split(kn).forEach(we=>{ne?this._renderer.addClass(this._ngEl.nativeElement,we):this._renderer.removeClass(this._ngEl.nativeElement,we)})}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.aKT),D.rXU(D.sFG))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return F})();class Xr{constructor(re,W,ne,we){this.$implicit=re,this.ngForOf=W,this.index=ne,this.count=we}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $a=(()=>{class F{set ngForOf(W){this._ngForOf=W,this._ngForOfDirty=!0}set ngForTrackBy(W){this._trackByFn=W}get ngForTrackBy(){return this._trackByFn}constructor(W,ne,we){this._viewContainer=W,this._template=ne,this._differs=we,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(W){W&&(this._template=W)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const W=this._ngForOf;!this._differ&&W&&(this._differ=this._differs.find(W).create(this.ngForTrackBy))}if(this._differ){const W=this._differ.diff(this._ngForOf);W&&this._applyChanges(W)}}_applyChanges(W){const ne=this._viewContainer;W.forEachOperation((we,ut,mt)=>{if(null==we.previousIndex)ne.createEmbeddedView(this._template,new Xr(we.item,this._ngForOf,-1,-1),null===mt?void 0:mt);else if(null==mt)ne.remove(null===ut?void 0:ut);else if(null!==ut){const vn=ne.get(ut);ne.move(vn,mt),bs(vn,we)}});for(let we=0,ut=ne.length;we<ut;we++){const vn=ne.get(we).context;vn.index=we,vn.count=ut,vn.ngForOf=this._ngForOf}W.forEachIdentityChange(we=>{bs(ne.get(we.currentIndex),we)})}static ngTemplateContextGuard(W,ne){return!0}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.c1b),D.rXU(D.C4Q),D.rXU(D._q3))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return F})();function bs(F,re){F.context.$implicit=re.item}let ca=(()=>{class F{constructor(W,ne){this._viewContainer=W,this._context=new Lu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(W){this._context.$implicit=this._context.ngIf=W,this._updateView()}set ngIfThen(W){fc("ngIfThen",W),this._thenTemplateRef=W,this._thenViewRef=null,this._updateView()}set ngIfElse(W){fc("ngIfElse",W),this._elseTemplateRef=W,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(W,ne){return!0}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.c1b),D.rXU(D.C4Q))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return F})();class Lu{constructor(){this.$implicit=null,this.ngIf=null}}function fc(F,re){if(re&&!re.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,D.Tbb)(re)}'.`)}let yi=(()=>{class F{constructor(W,ne,we){this._ngEl=W,this._differs=ne,this._renderer=we,this._ngStyle=null,this._differ=null}set ngStyle(W){this._ngStyle=W,!this._differ&&W&&(this._differ=this._differs.find(W).create())}ngDoCheck(){if(this._differ){const W=this._differ.diff(this._ngStyle);W&&this._applyChanges(W)}}_setStyle(W,ne){const[we,ut]=W.split("."),mt=-1===we.indexOf("-")?void 0:D.czy.DashCase;null!=ne?this._renderer.setStyle(this._ngEl.nativeElement,we,ut?`${ne}${ut}`:ne,mt):this._renderer.removeStyle(this._ngEl.nativeElement,we,mt)}_applyChanges(W){W.forEachRemovedItem(ne=>this._setStyle(ne.key,null)),W.forEachAddedItem(ne=>this._setStyle(ne.key,ne.currentValue)),W.forEachChangedItem(ne=>this._setStyle(ne.key,ne.currentValue))}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.aKT),D.rXU(D.MKu),D.rXU(D.sFG))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return F})();class Ri{createSubscription(re,W){return(0,D.O8t)(()=>re.subscribe({next:W,error:ne=>{throw ne}}))}dispose(re){(0,D.O8t)(()=>re.unsubscribe())}}class js{createSubscription(re,W){return re.then(W,ne=>{throw ne})}dispose(re){}}const Bl=new js,Vi=new Ri;let Bo=(()=>{class F{constructor(W){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=W}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(W){if(!this._obj){if(W)try{this.markForCheckOnValueUpdate=!1,this._subscribe(W)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return W!==this._obj?(this._dispose(),this.transform(W)):this._latestValue}_subscribe(W){this._obj=W,this._strategy=this._selectStrategy(W),this._subscription=this._strategy.createSubscription(W,ne=>this._updateLatestValue(W,ne))}_selectStrategy(W){if((0,D.jNT)(W))return Bl;if((0,D.zjR)(W))return Vi;throw function qi(F,re){return new D.wOt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(W,ne){W===this._obj&&(this._latestValue=ne,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.gRc,16))};static#t=this.\u0275pipe=D.EJ8({name:"async",type:F,pure:!1,standalone:!0})}return F})(),fo=(()=>{class F{static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275mod=D.$C({type:F});static#n=this.\u0275inj=D.G2t({})}return F})();const za="browser",es="server";function xo(F){return F===es}let Wa=(()=>{class F{static#e=this.\u0275prov=(0,D.jDH)({token:F,providedIn:"root",factory:()=>function ha(F){return F===za}((0,D.WQX)(D.Agw))?new Uo((0,D.WQX)(Ke),window):new Lc})}return F})();class Uo{constructor(re,W){this.document=re,this.window=W,this.offset=()=>[0,0]}setOffset(re){this.offset=Array.isArray(re)?()=>re:re}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(re){this.window.scrollTo(re[0],re[1])}scrollToAnchor(re){const W=function ho(F,re){const W=F.getElementById(re)||F.getElementsByName(re)[0];if(W)return W;if("function"==typeof F.createTreeWalker&&F.body&&"function"==typeof F.body.attachShadow){const ne=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let we=ne.currentNode;for(;we;){const ut=we.shadowRoot;if(ut){const mt=ut.getElementById(re)||ut.querySelector(`[name="${re}"]`);if(mt)return mt}we=ne.nextNode()}}return null}(this.document,re);W&&(this.scrollToElement(W),W.focus())}setHistoryScrollRestoration(re){this.window.history.scrollRestoration=re}scrollToElement(re){const W=re.getBoundingClientRect(),ne=W.left+this.window.pageXOffset,we=W.top+this.window.pageYOffset,ut=this.offset();this.window.scrollTo(ne-ut[0],we-ut[1])}}class Lc{setOffset(re){}getScrollPosition(){return[0,0]}scrollToPosition(re){}scrollToAnchor(re){}setHistoryScrollRestoration(re){}}class Qr{}},3953:(yn,wt,ie)=>{ie.d(wt,{iLQ:()=>Yy,sZ2:()=>ni,hnV:()=>yT,o8S:()=>Td,BIS:()=>nh,gRc:()=>OT,Ql9:()=>hM,Ocv:()=>CM,Z63:()=>qs,aKT:()=>Jd,uvJ:()=>qo,zcH:()=>Du,bkB:()=>Ti,$GK:()=>re,nKC:()=>ar,zZn:()=>Ls,_q3:()=>hw,MKu:()=>pw,xe9:()=>eE,Co$:()=>pI,Vns:()=>Em,SKi:()=>Yo,Xx1:()=>di,Agw:()=>sf,PLl:()=>r_,sFG:()=>co,_9s:()=>un,czy:()=>Le,kdw:()=>oa,C4Q:()=>Mp,NYb:()=>aM,giA:()=>_T,xvI:()=>kR,RxE:()=>uT,c1b:()=>by,gXe:()=>Fa,mal:()=>Rw,L39:()=>EO,Ol2:()=>dC,w6W:()=>fS,Rfq:()=>Ho,WQX:()=>_n,QuC:()=>xr,EmA:()=>is,HJs:()=>SO,N4e:()=>bc,O8t:()=>wO,H3F:()=>lT,H8p:()=>Wl,KH2:()=>g0,TgB:()=>Cm,wOt:()=>on,WHO:()=>gT,e01:()=>mT,H5H:()=>FC,Zy3:()=>Zn,mq5:()=>bA,JZv:()=>Ei,TL3:()=>JM,LfX:()=>fs,plB:()=>Lp,jNT:()=>nw,zjR:()=>vT,TL$:()=>up,Tbb:()=>Tr,Vt3:()=>cC,GFd:()=>hI,OA$:()=>ot,Jv_:()=>Pb,aNF:()=>Nb,R7$:()=>ce,BMQ:()=>IC,HbH:()=>nA,ZvI:()=>uA,STu:()=>lA,ee0:()=>dA,AVh:()=>RC,vxM:()=>gA,wni:()=>cb,VBU:()=>M,FsC:()=>dt,jDH:()=>Sn,G2t:()=>Ms,$C:()=>oe,EJ8:()=>Je,rXU:()=>Fe,nrm:()=>kC,bVm:()=>Hy,qex:()=>jy,k0s:()=>Uy,j41:()=>By,RV6:()=>wA,xGo:()=>Gm,KVO:()=>Oi,kS0:()=>fi,QTQ:()=>ht,bIt:()=>BC,lsd:()=>db,XpG:()=>YA,nI1:()=>zb,bMT:()=>Wb,SdG:()=>JA,NAR:()=>ZA,Y8G:()=>xC,FS9:()=>jC,Mz_:()=>Wy,lJ4:()=>Fb,eq3:()=>Lb,l_i:()=>Vb,sMw:()=>Bb,mGM:()=>lb,sdS:()=>fb,Dyx:()=>vA,Z7z:()=>_A,fX1:()=>mA,Njj:()=>Vh,EBC:()=>c,tSv:()=>s,eBV:()=>ft,B4B:()=>ff,n$t:()=>b_,xc7:()=>DC,DNE:()=>hC,C5r:()=>qb,EFF:()=>wb,JRh:()=>HC,SpI:()=>qy,Lme:()=>GC,DH7:()=>Mb,mxI:()=>zC,R50:()=>$C,GBs:()=>ub});let T=null,Be=1;const Ze=Symbol("SIGNAL");function Ce(t){const r=T;return T=t,r}function pt(t){if((!kt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Be)){if(!t.producerMustRecompute(t)&&!On(t))return t.dirty=!1,void(t.lastCleanEpoch=Be);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Be}}function On(t){Ht(t);for(let r=0;r<t.producerNode.length;r++){const a=t.producerNode[r],d=t.producerLastReadVersion[r];if(d!==a.version||(pt(a),d!==a.version))return!0}return!1}function Ct(t,r){if(function Xt(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),1===t.liveConsumerNode.length&&function Qt(t){return void 0!==t.producerNode}(t))for(let d=0;d<t.producerNode.length;d++)Ct(t.producerNode[d],t.producerIndexOfThis[d]);const a=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[a],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[a],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const d=t.liveConsumerIndexOfThis[r],h=t.liveConsumerNode[r];Ht(h),h.producerIndexOfThis[d]=r}}function kt(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ht(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let gt=null;var to=ie(1413),lr=ie(8359),qr=ie(4412),An=ie(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const qa="https://g.co/ng/security#xss";class on extends Error{constructor(r,a){super(Zn(r,a)),this.code=r}}function Zn(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}function oo(t){return{toString:t}.toString()}const ds="__parameters__";function ma(t,r,a){return oo(()=>{const d=function mc(t){return function(...a){if(t){const d=t(...a);for(const h in d)this[h]=d[h]}}}(r);function h(...v){if(this instanceof h)return d.apply(this,v),this;const w=new h(...v);return S.annotation=w,S;function S(N,q,J){const fe=N.hasOwnProperty(ds)?N[ds]:Object.defineProperty(N,ds,{value:[]})[ds];for(;fe.length<=J;)fe.push(null);return(fe[J]=fe[J]||[]).push(w),N}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=t,h.annotationCls=h,h})}const Ei=globalThis;function Gr(t){for(let r in t)if(t[r]===Gr)return r;throw Error("Could not find renamed property on target object.")}function Bc(t,r){for(const a in r)r.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(t[a]=r[a])}function Tr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Tr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const a=r.indexOf("\n");return-1===a?r:r.substring(0,a)}function jo(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const Uc=Gr({__forward_ref__:Gr});function Ho(t){return t.__forward_ref__=Ho,t.toString=function(){return Tr(this())},t}function Fn(t){return Oa(t)?t():t}function Oa(t){return"function"==typeof t&&t.hasOwnProperty(Uc)&&t.__forward_ref__===Ho}function Sn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ms(t){return{providers:t.providers||[],imports:t.imports||[]}}function Zr(t){return Ka(t,jc)||Ka(t,Sd)}function fs(t){return null!==Zr(t)}function Ka(t,r){return t.hasOwnProperty(r)?t[r]:null}function vc(t){return t&&(t.hasOwnProperty(tr)||t.hasOwnProperty(li))?t[tr]:null}const jc=Gr({\u0275prov:Gr}),tr=Gr({\u0275inj:Gr}),Sd=Gr({ngInjectableDef:Gr}),li=Gr({ngInjectorDef:Gr});class ar{constructor(r,a){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Sn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ec(t){return t&&!!t.\u0275providers}const Jr=Gr({\u0275cmp:Gr}),Hc=Gr({\u0275dir:Gr}),cr=Gr({\u0275pipe:Gr}),Qa=Gr({\u0275mod:Gr}),Ci=Gr({\u0275fac:Gr}),Na=Gr({__NG_ELEMENT_ID__:Gr}),Gn=Gr({__NG_ENV_ID__:Gr});function Kn(t){return"string"==typeof t?t:null==t?"":String(t)}function F(t,r){throw new on(-201,!1)}var re=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(re||{});let W;function ne(){return W}function we(t){const r=W;return W=t,r}function ut(t,r,a){const d=Zr(t);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:a&re.Optional?null:void 0!==r?r:void F()}const hn={},$r="__NG_DI_FLAG__",rr="ngTempTokenPath",dr=/\n/gm,Qi="__source";let ts;function Ro(t){const r=ts;return ts=t,r}function Ya(t,r=re.Default){if(void 0===ts)throw new on(-203,!1);return null===ts?ut(t,void 0,r):ts.get(t,r&re.Optional?null:void 0,r)}function Oi(t,r=re.Default){return(ne()||Ya)(Fn(t),r)}function _n(t,r=re.Default){return Oi(t,hs(r))}function hs(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ws(t){const r=[];for(let a=0;a<t.length;a++){const d=Fn(t[a]);if(Array.isArray(d)){if(0===d.length)throw new on(900,!1);let h,v=re.Default;for(let w=0;w<d.length;w++){const S=d[w],N=dl(S);"number"==typeof N?-1===N?h=S.token:v|=N:h=S}r.push(Oi(h,v))}else r.push(Oi(d))}return r}function Mo(t,r){return t[$r]=r,t.prototype[$r]=r,t}function dl(t){return t[$r]}const di=Mo(ma("Optional"),8),oa=Mo(ma("SkipSelf"),4);function ao(t,r){return t.hasOwnProperty(Ci)?t[Ci]:null}function Cc(t,r){t.forEach(a=>Array.isArray(a)?Cc(a,r):r(a))}function Yi(t,r,a){r>=t.length?t.push(a):t.splice(r,0,a)}function Hu(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Wo(t,r,a){let d=Gc(t,r);return d>=0?t[1|d]=a:(d=~d,function yu(t,r,a,d){let h=t.length;if(h==r)t.push(a,d);else if(1===h)t.push(d,t[0]),t[0]=a;else{for(h--,t.push(t[h-1],t[h]);h>r;)t[h]=t[h-2],h--;t[r]=a,t[r+1]=d}}(t,d,r,a)),d}function Os(t,r){const a=Gc(t,r);if(a>=0)return t[1|a]}function Gc(t,r){return function $u(t,r,a){let d=0,h=t.length>>a;for(;h!==d;){const v=d+(h-d>>1),w=t[v<<a];if(r===w)return v<<a;w>r?h=v:d=v+1}return~(h<<a)}(t,r,1)}const pi={},Pr=[],qs=new ar(""),zu=new ar("",-1),Pd=new ar("");class ka{get(r,a=hn){if(a===hn){const d=new Error(`NullInjectorError: No provider for ${Tr(r)}!`);throw d.name="NullInjectorError",d}return a}}var gs=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(gs||{}),Fa=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Fa||{}),La=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(La||{});function Zi(t,r,a){let d=t.length;for(;;){const h=t.indexOf(r,a);if(-1===h)return h;if(0===h||t.charCodeAt(h-1)<=32){const v=r.length;if(h+v===d||t.charCodeAt(h+v)<=32)return h}a=h+1}}function Ic(t,r,a){let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const v=a[d++],w=a[d++],S=a[d++];t.setAttribute(r,w,S,v)}else{const v=h,w=a[++d];jl(v)?t.setProperty(r,v,w):t.setAttribute(r,v,w),d++}}return d}function Wu(t){return 3===t||4===t||6===t}function jl(t){return 64===t.charCodeAt(0)}function Ir(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let a=-1;for(let d=0;d<r.length;d++){const h=r[d];"number"==typeof h?a=h:0===a||fl(t,a,h,null,-1===a||2===a?r[++d]:null)}}return t}function fl(t,r,a,d,h){let v=0,w=t.length;if(-1===r)w=-1;else for(;v<t.length;){const S=t[v++];if("number"==typeof S){if(S===r){w=-1;break}if(S>r){w=v-1;break}}}for(;v<t.length;){const S=t[v];if("number"==typeof S)break;if(S===a){if(null===d)return void(null!==h&&(t[v+1]=h));if(d===t[v+1])return void(t[v+2]=h)}v++,null!==d&&v++,null!==h&&v++}-1!==w&&(t.splice(w,0,r),v=w+1),t.splice(v++,0,a),null!==d&&t.splice(v++,0,d),null!==h&&t.splice(v++,0,h)}const hl="ng-template";function Hl(t,r,a,d){let h=0;if(d){for(;h<r.length&&"string"==typeof r[h];h+=2)if("class"===r[h]&&-1!==Zi(r[h+1].toLowerCase(),a,0))return!0}else if(gn(t))return!1;if(h=r.indexOf(1,h),h>-1){let v;for(;++h<r.length&&"string"==typeof(v=r[h]);)if(v.toLowerCase()===a)return!0}return!1}function gn(t){return 4===t.type&&t.value!==hl}function Eu(t,r,a){return r===(4!==t.type||a?t.value:hl)}function pl(t,r,a){let d=4;const h=t.attrs,v=null!==h?function Nd(t){for(let r=0;r<t.length;r++)if(Wu(t[r]))return r;return t.length}(h):0;let w=!1;for(let S=0;S<r.length;S++){const N=r[S];if("number"!=typeof N){if(!w)if(4&d){if(d=2|1&d,""!==N&&!Eu(t,N,a)||""===N&&1===r.length){if(Va(d))return!1;w=!0}}else if(8&d){if(null===h||!Hl(t,h,N,a)){if(Va(d))return!1;w=!0}}else{const q=r[++S],J=Gl(N,h,gn(t),a);if(-1===J){if(Va(d))return!1;w=!0;continue}if(""!==q){let fe;if(fe=J>v?"":h[J+1].toLowerCase(),2&d&&q!==fe){if(Va(d))return!1;w=!0}}}}else{if(!w&&!Va(d)&&!Va(N))return!1;if(w&&Va(N))continue;w=!1,d=N|1&d}}return Va(d)||w}function Va(t){return!(1&t)}function Gl(t,r,a,d){if(null===r)return-1;let h=0;if(d||!a){let v=!1;for(;h<r.length;){const w=r[h];if(w===t)return h;if(3===w||6===w)v=!0;else{if(1===w||2===w){let S=r[++h];for(;"string"==typeof S;)S=r[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=v?1:2}return-1}return function bf(t,r){let a=t.indexOf(4);if(a>-1)for(a++;a<t.length;){const d=t[a];if("number"==typeof d)return-1;if(d===r)return a;a++}return-1}(r,t)}function Ba(t,r,a=!1){for(let d=0;d<r.length;d++)if(pl(t,r[d],a))return!0;return!1}function gl(t,r){e:for(let a=0;a<r.length;a++){const d=r[a];if(t.length===d.length){for(let h=0;h<t.length;h++)if(t[h]!==d[h])continue e;return!0}}return!1}function Ua(t,r){return t?":not("+r.trim()+")":r}function $c(t){let r=t[0],a=1,d=2,h="",v=!1;for(;a<t.length;){let w=t[a];if("string"==typeof w)if(2&d){const S=t[++a];h+="["+w+(S.length>0?'="'+S+'"':"")+"]"}else 8&d?h+="."+w:4&d&&(h+=" "+w);else""!==h&&!Va(w)&&(r+=Ua(v,h),h=""),d=w,v=v||!Va(d);a++}return""!==h&&(r+=Ua(v,h)),r}function M(t){return oo(()=>{const r=rs(t),a={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Fa.Emulated,styles:t.styles||Pr,_:null,schemas:t.schemas||null,tView:null,id:""};Ea(a);const d=t.dependencies;return a.directiveDefs=Ps(d,!1),a.pipeDefs=Ps(d,!0),a.id=function Za(t){let r=0;const a=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const h of a)r=Math.imul(31,r)+h.charCodeAt(0)|0;return r+=2147483648,"c"+r}(a),a})}function j(t){return Pt(t)||pn(t)}function Q(t){return null!==t}function oe(t){return oo(()=>({type:t.type,bootstrap:t.bootstrap||Pr,declarations:t.declarations||Pr,imports:t.imports||Pr,exports:t.exports||Pr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function be(t,r){if(null==t)return pi;const a={};for(const d in t)if(t.hasOwnProperty(d)){const h=t[d];let v,w,S=La.None;Array.isArray(h)?(S=h[0],v=h[1],w=h[2]??v):(v=h,w=h),r?(a[v]=S!==La.None?[d,S]:d,r[v]=w):a[v]=d}return a}function dt(t){return oo(()=>{const r=rs(t);return Ea(r),r})}function Je(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Pt(t){return t[Jr]||null}function pn(t){return t[Hc]||null}function En(t){return t[cr]||null}function xr(t){const r=Pt(t)||pn(t)||En(t);return null!==r&&r.standalone}function sr(t,r){const a=t[Qa]||null;if(!a&&!0===r)throw new Error(`Type ${Tr(t)} does not have '\u0275mod' property.`);return a}function rs(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||pi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Pr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:be(t.inputs,r),outputs:be(t.outputs),debugInfo:null}}function Ea(t){t.features?.forEach(r=>r(t))}function Ps(t,r){if(!t)return null;const a=r?En:j;return()=>("function"==typeof t?t():t).map(d=>a(d)).filter(Q)}function is(t){return{\u0275providers:t}}function Cu(...t){return{\u0275providers:ml(0,t),\u0275fromNgModule:!0}}function ml(t,...r){const a=[],d=new Set;let h;const v=w=>{a.push(w)};return Cc(r,w=>{const S=w;Ja(S,v,[],d)&&(h||=[],h.push(S))}),void 0!==h&&kd(h,v),a}function kd(t,r){for(let a=0;a<t.length;a++){const{ngModule:d,providers:h}=t[a];$l(h,v=>{r(v,d)})}}function Ja(t,r,a,d){if(!(t=Fn(t)))return!1;let h=null,v=vc(t);const w=!v&&Pt(t);if(v||w){if(w&&!w.standalone)return!1;h=t}else{const N=t.ngModule;if(v=vc(N),!v)return!1;h=N}const S=d.has(h);if(w){if(S)return!1;if(d.add(h),w.dependencies){const N="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const q of N)Ja(q,r,a,d)}}else{if(!v)return!1;{if(null!=v.imports&&!S){let q;d.add(h);try{Cc(v.imports,J=>{Ja(J,r,a,d)&&(q||=[],q.push(J))})}finally{}void 0!==q&&kd(q,r)}if(!S){const q=ao(h)||(()=>new h);r({provide:h,useFactory:q,deps:Pr},h),r({provide:Pd,useValue:h,multi:!0},h),r({provide:qs,useValue:()=>Oi(h),multi:!0},h)}const N=v.providers;if(null!=N&&!S){const q=t;$l(N,J=>{r(J,q)})}}}return h!==t&&void 0!==t.providers}function $l(t,r){for(let a of t)Ec(a)&&(a=a.\u0275providers),Array.isArray(a)?$l(a,r):r(a)}const xf=Gr({provide:String,useValue:Gr});function Fd(t){return null!==t&&"object"==typeof t&&xf in t}function wu(t){return"function"==typeof t}const Wl=new ar(""),ql={},_l={};let bh;function Ku(){return void 0===bh&&(bh=new ka),bh}class qo{}class Ac extends qo{get destroyed(){return this._destroyed}constructor(r,a,d,h){super(),this.parent=a,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ec(r,w=>this.processProvider(w)),this.records.set(zu,qc(void 0,this)),h.has("environment")&&this.records.set(qo,qc(void 0,this));const v=this.records.get(Wl);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Pd,Pr,re.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const r=Ce(null);try{for(const d of this._ngOnDestroyHooks)d.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const d of a)d()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(r)}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const a=Ro(this),d=we(void 0);try{return r()}finally{Ro(a),we(d)}}get(r,a=hn,d=re.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Gn))return r[Gn](this);d=hs(d);const v=Ro(this),w=we(void 0);try{if(!(d&re.SkipSelf)){let N=this.records.get(r);if(void 0===N){const q=function Ld(t){return"function"==typeof t||"object"==typeof t&&t instanceof ar}(r)&&Zr(r);N=q&&this.injectableDefInScope(q)?qc(ja(r),ql):null,this.records.set(r,N)}if(null!=N)return this.hydrate(r,N)}return(d&re.Self?Ku():this.parent).get(r,a=d&re.Optional&&a===hn?null:a)}catch(S){if("NullInjectorError"===S.name){if((S[rr]=S[rr]||[]).unshift(Tr(r)),v)throw S;return function Rd(t,r,a,d){const h=t[rr];throw r[Qi]&&h.unshift(r[Qi]),t.message=function Md(t,r,a,d=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let h=Tr(r);if(Array.isArray(r))h=r.map(Tr).join(" -> ");else if("object"==typeof r){let v=[];for(let w in r)if(r.hasOwnProperty(w)){let S=r[w];v.push(w+":"+("string"==typeof S?JSON.stringify(S):Tr(S)))}h=`{${v.join(", ")}}`}return`${a}${d?"("+d+")":""}[${h}]: ${t.replace(dr,"\n  ")}`}("\n"+t.message,h,a,d),t.ngTokenPath=h,t[rr]=null,t}(S,r,"R3InjectorError",this.source)}throw S}finally{we(w),Ro(v)}}resolveInjectorInitializers(){const r=Ce(null),a=Ro(this),d=we(void 0);try{const v=this.get(qs,Pr,re.Self);for(const w of v)w()}finally{Ro(a),we(d),Ce(r)}}toString(){const r=[],a=this.records;for(const d of a.keys())r.push(Tr(d));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new on(205,!1)}processProvider(r){let a=wu(r=Fn(r))?r:Fn(r&&r.provide);const d=function xh(t){return Fd(t)?qc(void 0,t.useValue):qc(Lr(t),ql)}(r);if(!wu(r)&&!0===r.multi){let h=this.records.get(a);h||(h=qc(void 0,ql,!0),h.factory=()=>Ws(h.multi),this.records.set(a,h)),a=r,h.multi.push(r)}this.records.set(a,d)}hydrate(r,a){const d=Ce(null);try{return a.value===ql&&(a.value=_l,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Sf(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}finally{Ce(d)}}injectableDefInScope(r){if(!r.providedIn)return!1;const a=Fn(r.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(r){const a=this._onDestroyHooks.indexOf(r);-1!==a&&this._onDestroyHooks.splice(a,1)}}function ja(t){const r=Zr(t),a=null!==r?r.factory:ao(t);if(null!==a)return a;if(t instanceof ar)throw new on(204,!1);if(t instanceof Function)return function Th(t){if(t.length>0)throw new on(204,!1);const a=function fn(t){return t&&(t[jc]||t[Sd])||null}(t);return null!==a?()=>a.factory(t):()=>new t}(t);throw new on(204,!1)}function Lr(t,r,a){let d;if(wu(t)){const h=Fn(t);return ao(h)||ja(h)}if(Fd(t))d=()=>Fn(t.useValue);else if(function zl(t){return!(!t||!t.useFactory)}(t))d=()=>t.useFactory(...Ws(t.deps||[]));else if(function qu(t){return!(!t||!t.useExisting)}(t))d=()=>Oi(Fn(t.useExisting));else{const h=Fn(t&&(t.useClass||t.provide));if(!function Xu(t){return!!t.deps}(t))return ao(h)||ja(h);d=()=>new h(...Ws(t.deps))}return d}function qc(t,r,a=!1){return{factory:t,value:r,multi:a?[]:void 0}}function ec(t,r){for(const a of t)Array.isArray(a)?ec(a,r):a&&Ec(a)?ec(a.\u0275providers,r):r(a)}function bc(t,r){t instanceof Ac&&t.assertNotDestroyed();const d=Ro(t),h=we(void 0);try{return r()}finally{Ro(d),we(h)}}function Sh(){return void 0!==ne()||null!=function ns(){return ts}()}const Ui=0,qt=1,Dn=2,wo=3,ms=4,_s=5,vs=6,vl=7,Ii=8,Pi=9,Ni=10,ir=11,Ql=12,nc=13,yl=14,Ai=15,Qu=16,Xc=17,go=18,El=19,Of=20,Ns=21,bu=22,rc=23,Nn=25,Tu=1,Tc=7,Qc=9,mo=10;var wl=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(wl||{});function Oo(t){return Array.isArray(t)&&"object"==typeof t[Tu]}function ks(t){return Array.isArray(t)&&!0===t[Tu]}function Ks(t){return!!(4&t.flags)}function Yc(t){return t.componentOffset>-1}function Yl(t){return!(1&~t.flags)}function Ca(t){return!!t.template}function xc(t){return!!(512&t[Dn])}class ue{constructor(r,a,d){this.previousValue=r,this.currentValue=a,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ge(t,r,a,d){null!==r?r.applyValueToInputSignal(r,d):t[a]=d}function ot(){return jt}function jt(t){return t.type.prototype.ngOnChanges&&(t.setInput=In),Cn}function Cn(){const t=ys(this),r=t?.current;if(r){const a=t.previous;if(a===pi)t.previous=r;else for(let d in r)a[d]=r[d];t.current=null,this.ngOnChanges(r)}}function In(t,r,a,d,h){const v=this.declaredInputs[d],w=ys(t)||function Zc(t,r){return t[vr]=r}(t,{previous:pi,current:null}),S=w.current||(w.current={}),N=w.previous,q=N[v];S[v]=new ue(q&&q.currentValue,a,N===pi),Ge(t,r,h,a)}ot.ngInherit=!0;const vr="__ngSimpleChanges__";function ys(t){return t[vr]||null}const Ha=function(t,r,a){};function Nr(t){for(;Array.isArray(t);)t=t[Ui];return t}function ic(t,r){return Nr(r[t])}function Ji(t,r){return Nr(r[t.index])}function Jc(t,r){return t.data[r]}function oc(t,r){return t[r]}function gr(t,r){const a=r[t];return Oo(a)?a:a[Ui]}function Ff(t){return!(128&~t[Dn])}function sc(t,r){return null==r?null:t[r]}function Sm(t){t[Xc]=0}function Fh(t){1024&t[Dn]||(t[Dn]|=1024,Ff(t)&&td(t))}function ed(t){return!!(9216&t[Dn]||t[rc]?.dirty)}function qp(t){t[Ni].changeDetectionScheduler?.notify(7),64&t[Dn]&&(t[Dn]|=1024),ed(t)&&td(t)}function td(t){t[Ni].changeDetectionScheduler?.notify(0);let r=xu(t);for(;null!==r&&!(8192&r[Dn])&&(r[Dn]|=8192,Ff(r));)r=xu(r)}function Ko(t,r){if(!(256&~t[Dn]))throw new on(911,!1);null===t[Ns]&&(t[Ns]=[]),t[Ns].push(r)}function xu(t){const r=t[wo];return ks(r)?r[wo]:r}const or={lFrame:Nm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Lh=!1;function C0(){return or.bindingsEnabled}function ac(){return null!==or.skipHydrationRootTNode}function Dt(){return or.lFrame.lView}function Vr(){return or.lFrame.tView}function ft(t){return or.lFrame.contextLView=t,t[Ii]}function Vh(t){return or.lFrame.contextLView=null,t}function ve(){let t=nd();for(;null!==t&&64===t.type;)t=t.parent;return t}function nd(){return or.lFrame.currentTNode}function Fs(t,r){const a=or.lFrame;a.currentTNode=t,a.isParent=r}function _o(){return or.lFrame.isParent}function Rl(){or.lFrame.isParent=!1}function Bh(){return Lh}function Uh(t){Lh=t}function Gi(){const t=or.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function tu(){return or.lFrame.bindingIndex}function nu(){return or.lFrame.bindingIndex++}function ru(t){const r=or.lFrame,a=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,a}function Hh(t,r){const a=or.lFrame;a.bindingIndex=a.bindingRootIndex=t,Gh(r)}function Gh(t){or.lFrame.currentDirectiveIndex=t}function $h(){return or.lFrame.currentQueryIndex}function jf(t){or.lFrame.currentQueryIndex=t}function Om(t){const r=t[qt];return 2===r.type?r.declTNode:1===r.type?t[_s]:null}function Jp(t,r,a){if(a&re.SkipSelf){let h=r,v=t;for(;!(h=h.parent,null!==h||a&re.Host||(h=Om(v),null===h||(v=v[yl],10&h.type))););if(null===h)return!1;r=h,t=v}const d=or.lFrame=Pm();return d.currentTNode=r,d.lView=t,!0}function eg(t){const r=Pm(),a=t[qt];or.lFrame=r,r.currentTNode=a.firstChild,r.lView=t,r.tView=a,r.contextLView=t,r.bindingIndex=a.bindingStartIndex,r.inI18n=!1}function Pm(){const t=or.lFrame,r=null===t?null:t.child;return null===r?Nm(t):r}function Nm(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function km(){const t=or.lFrame;return or.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const zh=km;function tg(){const t=km();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Xs(){return or.lFrame.selectedIndex}function Ju(t){or.lFrame.selectedIndex=t}function ji(){const t=or.lFrame;return Jc(t.tView,t.selectedIndex)}let ti=!0;function id(){return ti}function iu(t){ti=t}function Hf(t,r){for(let a=r.directiveStart,d=r.directiveEnd;a<d;a++){const v=t.data[a].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:S,ngAfterViewInit:N,ngAfterViewChecked:q,ngOnDestroy:J}=v;w&&(t.contentHooks??=[]).push(-a,w),S&&((t.contentHooks??=[]).push(a,S),(t.contentCheckHooks??=[]).push(a,S)),N&&(t.viewHooks??=[]).push(-a,N),q&&((t.viewHooks??=[]).push(a,q),(t.viewCheckHooks??=[]).push(a,q)),null!=J&&(t.destroyHooks??=[]).push(a,J)}}function qh(t,r,a){Su(t,r,3,a)}function Wd(t,r,a,d){(3&t[Dn])===a&&Su(t,r,a,d)}function ig(t,r){let a=t[Dn];(3&a)===r&&(a&=16383,a+=1,t[Dn]=a)}function Su(t,r,a,d){const v=d??-1,w=r.length-1;let S=0;for(let N=void 0!==d?65535&t[Xc]:0;N<w;N++)if("number"==typeof r[N+1]){if(S=r[N],null!=d&&S>=d)break}else r[N]<0&&(t[Xc]+=65536),(S<v||-1==v)&&(og(t,a,r,N),t[Xc]=(4294901760&t[Xc])+N+2),N++}function Fm(t,r){Ha(4,t,r);const a=Ce(null);try{r.call(t)}finally{Ce(a),Ha(5,t,r)}}function og(t,r,a,d){const h=a[d]<0,v=a[d+1],S=t[h?-a[d]:a[d]];h?t[Dn]>>14<t[Xc]>>16&&(3&t[Dn])===r&&(t[Dn]+=16384,Fm(S,v)):Fm(S,v)}const qd=-1;class od{constructor(r,a,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=d}}function ou(t){return t!==qd}function sd(t){return 32767&t}function ad(t,r){let a=function cg(t){return t>>16}(t),d=r;for(;a>0;)d=d[yl],a--;return d}let ug=!0;function $f(t){const r=ug;return ug=t,r}const jm=255,Kh=5;let zf=0;const Dc={};function Xd(t,r){const a=Xh(t,r);if(-1!==a)return a;const d=r[qt];d.firstCreatePass&&(t.injectorIndex=r.length,Wf(d.data,t),Wf(r,null),Wf(d.blueprint,null));const h=qf(t,r),v=t.injectorIndex;if(ou(h)){const w=sd(h),S=ad(h,r),N=S[qt].data;for(let q=0;q<8;q++)r[v+q]=S[w+q]|N[w+q]}return r[v+8]=h,v}function Wf(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Xh(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function qf(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let a=0,d=null,h=r;for(;null!==h;){if(d=Xf(h),null===d)return qd;if(a++,h=h[yl],-1!==d.injectorIndex)return d.injectorIndex|a<<16}return qd}function dg(t,r,a){!function lg(t,r,a){let d;"string"==typeof a?d=a.charCodeAt(0)||0:a.hasOwnProperty(Na)&&(d=a[Na]),null==d&&(d=a[Na]=zf++);const h=d&jm;r.data[t+(h>>Kh)]|=1<<h}(t,r,a)}function Qh(t,r,a){if(a&re.Optional||void 0!==t)return t;F()}function Hm(t,r,a,d){if(a&re.Optional&&void 0===d&&(d=null),!(a&(re.Self|re.Host))){const h=t[Pi],v=we(void 0);try{return h?h.get(r,d,a&re.Optional):ut(r,d,a&re.Optional)}finally{we(v)}}return Qh(d,0,a)}function Yh(t,r,a,d=re.Default,h){if(null!==t){if(2048&r[Dn]&&!(d&re.Self)){const w=function R0(t,r,a,d,h){let v=t,w=r;for(;null!==v&&null!==w&&2048&w[Dn]&&!(512&w[Dn]);){const S=Kf(v,w,a,d|re.Self,Dc);if(S!==Dc)return S;let N=v.parent;if(!N){const q=w[Of];if(q){const J=q.get(a,Dc,d);if(J!==Dc)return J}N=Xf(w),w=w[yl]}v=N}return h}(t,r,a,d,Dc);if(w!==Dc)return w}const v=Kf(t,r,a,d,Dc);if(v!==Dc)return v}return Hm(r,a,d,h)}function Kf(t,r,a,d,h){const v=function S0(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Na)?t[Na]:void 0;return"number"==typeof r?r>=0?r&jm:D0:r}(a);if("function"==typeof v){if(!Jp(r,t,d))return d&re.Host?Qh(h,0,d):Hm(r,a,d,h);try{let w;if(w=v(d),null!=w||d&re.Optional)return w;F()}finally{zh()}}else if("number"==typeof v){let w=null,S=Xh(t,r),N=qd,q=d&re.Host?r[Ai][_s]:null;for((-1===S||d&re.SkipSelf)&&(N=-1===S?qf(t,r):r[S+8],N!==qd&&hg(d,!1)?(w=r[qt],S=sd(N),r=ad(N,r)):S=-1);-1!==S;){const J=r[qt];if(Jh(v,S,J.data)){const fe=fg(S,r,a,w,d,q);if(fe!==Dc)return fe}N=r[S+8],N!==qd&&hg(d,r[qt].data[S+8]===q)&&Jh(v,S,r)?(w=J,S=sd(N),r=ad(N,r)):S=-1}}return h}function fg(t,r,a,d,h,v){const w=r[qt],S=w.data[t+8],J=Zh(S,w,a,null==d?Yc(S)&&ug:d!=w&&!!(3&S.type),h&re.Host&&v===S);return null!==J?cc(r,w,J,S):Dc}function Zh(t,r,a,d,h){const v=t.providerIndexes,w=r.data,S=1048575&v,N=t.directiveStart,J=v>>20,Se=h?S+J:t.directiveEnd;for(let He=d?S:S+J;He<Se;He++){const it=w[He];if(He<N&&a===it||He>=N&&it.type===a)return He}if(h){const He=w[N];if(He&&Ca(He)&&He.type===a)return N}return null}function cc(t,r,a,d){let h=t[a];const v=r.data;if(function sg(t){return t instanceof od}(h)){const w=h;w.resolving&&function _r(t,r){throw r&&r.join(" > "),new on(-200,t)}(function Or(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Kn(t)}(v[a]));const S=$f(w.canSeeViewProviders);w.resolving=!0;const q=w.injectImpl?we(w.injectImpl):null;Jp(t,d,re.Default);try{h=t[a]=w.factory(void 0,v,t,d),r.firstCreatePass&&a>=d.directiveStart&&function rg(t,r,a){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:v}=r.type.prototype;if(d){const w=jt(r);(a.preOrderHooks??=[]).push(t,w),(a.preOrderCheckHooks??=[]).push(t,w)}h&&(a.preOrderHooks??=[]).push(0-t,h),v&&((a.preOrderHooks??=[]).push(t,v),(a.preOrderCheckHooks??=[]).push(t,v))}(a,v[a],r)}finally{null!==q&&we(q),$f(S),w.resolving=!1,zh()}}return h}function Jh(t,r,a){return!!(a[r+(t>>Kh)]&1<<t)}function hg(t,r){return!(t&re.Self||t&re.Host&&r)}class Po{constructor(r,a){this._tNode=r,this._lView=a}get(r,a,d){return Yh(this._tNode,this._lView,r,hs(d),a)}}function D0(){return new Po(ve(),Dt())}function Gm(t){return oo(()=>{const r=t.prototype.constructor,a=r[Ci]||pg(r),d=Object.prototype;let h=Object.getPrototypeOf(t.prototype).constructor;for(;h&&h!==d;){const v=h[Ci]||pg(h);if(v&&v!==a)return v;h=Object.getPrototypeOf(h)}return v=>new v})}function pg(t){return Oa(t)?()=>{const r=pg(Fn(t));return r&&r()}:ao(t)}function Xf(t){const r=t[qt],a=r.type;return 2===a?r.declTNode:1===a?t[_s]:null}function fi(t){return function x0(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const a=t.attrs;if(a){const d=a.length;let h=0;for(;h<d;){const v=a[h];if(Wu(v))break;if(0===v)h+=2;else if("number"==typeof v)for(h++;h<d&&"string"==typeof a[h];)h++;else{if(v===r)return a[h+1];h+=2}}}return null}(ve(),t)}function gg(t,r=null,a=null,d){const h=mg(t,r,a,d);return h.resolveInjectorInitializers(),h}function mg(t,r=null,a=null,d,h=new Set){const v=[a||Pr,Cu(t)];return d=d||("object"==typeof t?void 0:Tr(t)),new Ac(v,r||Ku(),d||null,h)}class Ls{static#e=this.THROW_IF_NOT_FOUND=hn;static#t=this.NULL=new ka;static create(r,a){if(Array.isArray(r))return gg({name:""},a,r,"");{const d=r.name??"";return gg({name:d},r.parent,r.providers,d)}}static#n=this.\u0275prov=Sn({token:Ls,providedIn:"any",factory:()=>Oi(zu)});static#r=this.__NG_ELEMENT_ID__=-1}new ar("").__NG_ELEMENT_ID__=t=>{const r=ve();if(null===r)throw new on(204,!1);if(2&r.type)return r.value;if(t&re.Optional)return null;throw new on(204,!1)};function _g(t){return t.ngOriginalError}class Du{constructor(){this._console=console}handleError(r){const a=this._findOriginalError(r);this._console.error("ERROR",r),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(r){let a=r&&_g(r);for(;a&&_g(a);)a=_g(a);return a||null}}const vg=new ar("",{providedIn:"root",factory:()=>_n(Du).handleError.bind(void 0)});let br=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yg;static#t=this.__NG_ENV_ID__=a=>a}return t})();class O0 extends br{constructor(r){super(),this._lView=r}onDestroy(r){return Ko(this._lView,r),()=>function Lf(t,r){if(null===t[Ns])return;const a=t[Ns].indexOf(r);-1!==a&&t[Ns].splice(a,1)}(this._lView,r)}}function yg(){return new O0(Dt())}function kr(){return fd(ve(),Dt())}function fd(t,r){return new Jd(Ji(t,r))}let Jd=(()=>{class t{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=kr}return t})();function bi(t){return t instanceof Jd?t.nativeElement:t}function os(t){return r=>{setTimeout(t,void 0,r)}}const Ti=class N0 extends to.B{constructor(r=!1){super(),this.destroyRef=void 0,this.__isAsync=r,Sh()&&(this.destroyRef=_n(br,{optional:!0})??void 0)}emit(r){const a=Ce(null);try{super.next(r)}finally{Ce(a)}}subscribe(r,a,d){let h=r,v=a||(()=>null),w=d;if(r&&"object"==typeof r){const N=r;h=N.next?.bind(N),v=N.error?.bind(N),w=N.complete?.bind(N)}this.__isAsync&&(v=os(v),h&&(h=os(h)),w&&(w=os(w)));const S=super.subscribe({next:h,error:v,complete:w});return r instanceof lr.yU&&r.add(S),S}};function Ru(){return this._results[Symbol.iterator]()}class ip{static#e=Symbol.iterator;get changes(){return this._changes??=new Ti}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const a=ip.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Ru)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,a){return this._results.reduce(r,a)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,a){this.dirty=!1;const d=function cn(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function ju(t,r,a){if(t.length!==r.length)return!1;for(let d=0;d<t.length;d++){let h=t[d],v=r[d];if(a&&(h=a(h),v=a(v)),v!==h)return!1}return!0}(this._results,d,a))&&(this._results=d,this.length=d.length,this.last=d[this.length-1],this.first=d[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(r){this._onDirty=r}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function sp(t){return!(128&~t.flags)}const Qm=new Map;let a1=0;const Ig="__ngContext__";function wa(t,r){Oo(r)?(t[Ig]=r[El],function lE(t){Qm.set(t[El],t)}(r)):t[Ig]=r}function bg(t){return eh(t[Ql])}function Tg(t){return eh(t[ms])}function eh(t){for(;null!==t&&!ks(t);)t=t[ms];return t}let Sg;function up(t){Sg=t}const ni=new ar("",{providedIn:"root",factory:()=>rf}),rf="ng",r_=new ar(""),sf=new ar("",{providedIn:"platform",factory:()=>"unknown"}),nh=new ar("",{providedIn:"root",factory:()=>function cu(){if(void 0!==Sg)return Sg;if(typeof document<"u")return document;throw new on(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Mg=()=>null;function Og(t,r,a=!1){return Mg(t,r,a)}const K0=new ar("",{providedIn:"root",factory:()=>!1});let f_;function g_(t){return function h_(){if(void 0===f_&&(f_=null,Ei.trustedTypes))try{f_=Ei.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return f_}()?.createScriptURL(t)||t}class Q0{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qa})`}}function Zs(t){return t instanceof Q0?t.changingThisBreaksApplicationSecurity:t}function yp(t,r){const a=function fE(t){return t instanceof Q0&&t.getTypeName()||null}(t);if(null!=a&&a!==r){if("ResourceURL"===a&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${a} (see ${qa})`)}return a===r}const mE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var df=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(df||{});function ff(t){const r=Ip();return r?r.sanitize(df.URL,t)||"":yp(t,"URL")?Zs(t):function Pc(t){return(t=String(t)).match(mE)?t:"unsafe:"+t}(Kn(t))}function Ug(t){const r=Ip();if(r)return g_(r.sanitize(df.RESOURCE_URL,t)||"");if(yp(t,"ResourceURL"))return g_(Zs(t));throw new on(904,!1)}function b_(t,r,a){return function nv(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Ug:ff}(r,a)(t)}function Ip(){const t=Dt();return t&&t[Ni].sanitizer}const iv=/^>|^->|<!--|-->|--!>|<!-$/g,I1=/(<|>)/g,A1="\u200b$1\u200b";function s(t){return t.ownerDocument.defaultView}function c(t){return t.ownerDocument}function m(t){return t instanceof Function?t():t}var Le=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Le||{});let ke;function Ye(t,r){return ke(t,r)}function Lt(t,r,a,d,h){if(null!=d){let v,w=!1;ks(d)?v=d:Oo(d)&&(w=!0,d=d[Ui]);const S=Nr(d);0===t&&null!==a?null==h?N1(r,a,S):Tp(r,a,S,h||null,!0):1===t&&null!==a?Tp(r,a,S,h||null,!0):2===t?function Gg(t,r,a){const d=av(t,r);d&&function Iw(t,r,a,d){t.removeChild(r,a,d)}(t,d,r,a)}(r,S,w):3===t&&r.destroyNode(S),null!=v&&function _(t,r,a,d,h){const v=a[Tc];v!==Nr(a)&&Lt(r,t,d,v,h);for(let S=mo;S<a.length;S++){const N=a[S];o(N[qt],N,t,r,d,v)}}(r,t,v,a,h)}}function mn(t,r){return t.createComment(function ov(t){return t.replace(iv,r=>r.replace(I1,A1))}(r))}function nr(t,r,a){return t.createElement(r,a)}function oi(t,r){r[Ni].changeDetectionScheduler?.notify(8),o(t,r,r[ir],2,null,null)}function Nl(t,r){const a=t[Qc],d=r[wo];(Oo(d)||r[Ai]!==d[wo][Ai])&&(t[Dn]|=wl.HasTransplantedViews),null===a?t[Qc]=[r]:a.push(r)}function bp(t,r){const a=t[Qc],d=a.indexOf(r);a.splice(d,1)}function hf(t,r){if(t.length<=mo)return;const a=mo+r,d=t[a];if(d){const h=d[Qu];null!==h&&h!==t&&bp(h,d),r>0&&(t[a-1][ms]=d[ms]);const v=Hu(t,mo+r);!function ur(t,r){oi(t,r),r[Ui]=null,r[_s]=null}(d[qt],d);const w=v[go];null!==w&&w.detachView(v[qt]),d[wo]=null,d[ms]=null,d[Dn]&=-129}return d}function mh(t,r){if(!(256&r[Dn])){const a=r[ir];a.destroyNode&&o(t,r,a,3,null,null),function Fo(t){let r=t[Ql];if(!r)return O1(t[qt],t);for(;r;){let a=null;if(Oo(r))a=r[Ql];else{const d=r[mo];d&&(a=d)}if(!a){for(;r&&!r[ms]&&r!==t;)Oo(r)&&O1(r[qt],r),r=r[wo];null===r&&(r=t),Oo(r)&&O1(r[qt],r),a=r&&r[ms]}r=a}}(r)}}function O1(t,r){if(256&r[Dn])return;const a=Ce(null);try{r[Dn]&=-129,r[Dn]|=256,r[rc]&&function Tn(t){if(Ht(t),kt(t))for(let r=0;r<t.producerNode.length;r++)Ct(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(r[rc]),function ww(t,r){let a;if(null!=t&&null!=(a=t.destroyHooks))for(let d=0;d<a.length;d+=2){const h=r[a[d]];if(!(h instanceof od)){const v=a[d+1];if(Array.isArray(v))for(let w=0;w<v.length;w+=2){const S=h[v[w]],N=v[w+1];Ha(4,S,N);try{N.call(S)}finally{Ha(5,S,N)}}else{Ha(4,h,v);try{v.call(h)}finally{Ha(5,h,v)}}}}}(t,r),function Cw(t,r){const a=t.cleanup,d=r[vl];if(null!==a)for(let v=0;v<a.length-1;v+=2)if("string"==typeof a[v]){const w=a[v+3];w>=0?d[w]():d[-w].unsubscribe(),v+=2}else a[v].call(d[a[v+1]]);null!==d&&(r[vl]=null);const h=r[Ns];if(null!==h){r[Ns]=null;for(let v=0;v<h.length;v++)(0,h[v])()}}(t,r),1===r[qt].type&&r[ir].destroy();const d=r[Qu];if(null!==d&&ks(r[wo])){d!==r[wo]&&bp(d,r);const h=r[go];null!==h&&h.detachView(t)}!function No(t){Qm.delete(t[El])}(r)}finally{Ce(a)}}function P1(t,r,a){return function wE(t,r,a){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return a[Ui];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:v}=t.data[d.directiveStart+h];if(v===Fa.None||v===Fa.Emulated)return null}return Ji(d,a)}}(t,r.parent,a)}function Tp(t,r,a,d,h){t.insertBefore(r,a,d,h)}function N1(t,r,a){t.appendChild(r,a)}function IE(t,r,a,d,h){null!==d?Tp(t,r,a,d,h):N1(t,r,a)}function av(t,r){return t.parentNode(r)}function bE(t,r,a){return xE(t,r,a)}let k1,xE=function TE(t,r,a){return 40&t.type?Ji(t,a):null};function cv(t,r,a,d){const h=P1(t,d,r),v=r[ir],S=bE(d.parent||r[_s],d,r);if(null!=h)if(Array.isArray(a))for(let N=0;N<a.length;N++)IE(v,h,a[N],S,!1);else IE(v,h,a,S,!1);void 0!==k1&&k1(v,d,r,a,h)}function S_(t,r){if(null!==r){const a=r.type;if(3&a)return Ji(r,t);if(4&a)return L1(-1,t[r.index]);if(8&a){const d=r.child;if(null!==d)return S_(t,d);{const h=t[r.index];return ks(h)?L1(-1,h):Nr(h)}}if(32&a)return Ye(r,t)()||Nr(t[r.index]);{const d=F1(t,r);return null!==d?Array.isArray(d)?d[0]:S_(xu(t[Ai]),d):S_(t,r.next)}}return null}function F1(t,r){return null!==r?t[Ai][_s].projection[r.projection]:null}function L1(t,r){const a=mo+t+1;if(a<r.length){const d=r[a],h=d[qt].firstChild;if(null!==h)return S_(d,h)}return r[Tc]}function p(t,r,a,d,h,v,w){for(;null!=a;){const S=d[a.index],N=a.type;if(w&&0===r&&(S&&wa(Nr(S),d),a.flags|=2),32&~a.flags)if(8&N)p(t,r,a.child,d,h,v,!1),Lt(r,t,h,S,v);else if(32&N){const q=Ye(a,d);let J;for(;J=q();)Lt(r,t,h,J,v);Lt(r,t,h,S,v)}else 16&N?f(t,r,d,a,h,v):Lt(r,t,h,S,v);a=w?a.projectionNext:a.next}}function o(t,r,a,d,h,v){p(a,d,t.firstChild,r,h,v,!1)}function f(t,r,a,d,h,v){const w=a[Ai],N=w[_s].projection[d.projection];if(Array.isArray(N))for(let q=0;q<N.length;q++)Lt(r,t,h,N[q],v);else{let q=N;const J=w[wo];sp(d)&&(q.flags|=128),p(t,r,q,J,h,v,!0)}}function V(t,r,a){""===a?t.removeAttribute(r,"class"):t.setAttribute(r,"class",a)}function G(t,r,a){const{mergedAttrs:d,classes:h,styles:v}=a;null!==d&&Ic(t,r,d),null!==h&&V(t,r,h),null!==v&&function x(t,r,a){t.setAttribute(r,"style",a)}(t,r,v)}const X={};function ce(t=1){Ie(Vr(),Dt(),Xs()+t,!1)}function Ie(t,r,a,d){if(!d)if(3&~r[Dn]){const v=t.preOrderHooks;null!==v&&Wd(r,v,0,a)}else{const v=t.preOrderCheckHooks;null!==v&&qh(r,v,a)}Ju(a)}function Fe(t,r=re.Default){const a=Dt();return null===a?Oi(t,r):Yh(ve(),a,Fn(t),r)}function ht(){throw new Error("invalid")}function Ut(t,r,a,d,h,v){const w=Ce(null);try{let S=null;h&La.SignalBased&&(S=r[d][Ze]),null!==S&&void 0!==S.transformFn&&(v=S.transformFn(v)),h&La.HasDecoratorInputTransform&&(v=t.inputTransforms[d].call(r,v)),null!==t.setInput?t.setInput(r,S,v,a,d):Ge(r,S,d,v)}finally{Ce(w)}}function Gt(t,r,a,d,h,v,w,S,N,q,J){const fe=r.blueprint.slice();return fe[Ui]=h,fe[Dn]=204|d,(null!==q||t&&2048&t[Dn])&&(fe[Dn]|=2048),Sm(fe),fe[wo]=fe[yl]=t,fe[Ii]=a,fe[Ni]=w||t&&t[Ni],fe[ir]=S||t&&t[ir],fe[Pi]=N||t&&t[Pi]||null,fe[_s]=v,fe[El]=function $i(){return a1++}(),fe[vs]=J,fe[Of]=q,fe[Ai]=2==r.type?t[Ai]:fe,fe}function Rn(t,r,a,d,h){let v=t.data[r];if(null===v)v=function Xn(t,r,a,d,h){const v=nd(),w=_o(),N=t.data[r]=function zg(t,r,a,d,h,v){let w=r?r.injectorIndex:-1,S=0;return ac()&&(S|=128),{type:a,index:d,insertBeforeIndex:null,injectorIndex:w,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:S,providerIndexes:0,value:h,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?v:v&&v.parent,a,r,d,h);return null===t.firstChild&&(t.firstChild=N),null!==v&&(w?null==v.child&&null!==N.parent&&(v.child=N):null===v.next&&(v.next=N,N.prev=v)),N}(t,r,a,d,h),function Yp(){return or.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=a,v.value=d,v.attrs=h;const w=function Sc(){const t=or.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();v.injectorIndex=null===w?-1:w.injectorIndex}return Fs(v,!0),v}function Ln(t,r,a,d){if(0===a)return-1;const h=r.length;for(let v=0;v<a;v++)r.push(d),t.blueprint.push(d),t.data.push(null);return h}function yr(t,r,a,d,h){const v=Xs(),w=2&d;try{Ju(-1),w&&r.length>Nn&&Ie(t,r,Nn,!1),Ha(w?2:0,h),a(d,h)}finally{Ju(v),Ha(w?3:1,h)}}function hi(t,r,a){if(Ks(r)){const d=Ce(null);try{const v=r.directiveEnd;for(let w=r.directiveStart;w<v;w++){const S=t.data[w];S.contentQueries&&S.contentQueries(1,a[w],w)}}finally{Ce(d)}}}function Fr(t,r,a){C0()&&(function M_(t,r,a,d){const h=a.directiveStart,v=a.directiveEnd;Yc(a)&&function j1(t,r,a){const d=Ji(r,t),h=Oe(a);let w=16;a.signals?w=4096:a.onPush&&(w=64);const S=Dp(t,Gt(t,h,null,w,d,r,null,t[Ni].rendererFactory.createRenderer(d,a),null,null,null));t[r.index]=S}(r,a,t.data[h+a.componentOffset]),t.firstCreatePass||Xd(a,r),wa(d,r);const w=a.initialInputs;for(let S=h;S<v;S++){const N=t.data[S],q=cc(r,t,S,a);wa(q,r),null!==w&&H1(0,S-h,q,N,0,w),Ca(N)&&(gr(a.index,r)[Ii]=cc(r,t,S,a))}}(t,r,a,Ji(a,r)),!(64&~a.flags)&&Wg(t,r,a))}function et(t,r,a=Ji){const d=r.localNames;if(null!==d){let h=r.index+1;for(let v=0;v<d.length;v+=2){const w=d[v+1],S=-1===w?a(r,t):t[w];t[h++]=S}}}function Oe(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=$e(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function $e(t,r,a,d,h,v,w,S,N,q,J){const fe=Nn+d,Se=fe+h,He=function nt(t,r){const a=[];for(let d=0;d<r;d++)a.push(d<t?null:X);return a}(fe,Se),it="function"==typeof q?q():q;return He[qt]={type:t,blueprint:He,template:a,queries:null,viewQuery:S,declTNode:r,data:He.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:Se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:N,consts:it,incompleteFirstPass:!1,ssrId:J}}let je=()=>null;function xp(t,r,a,d,h){for(let v in r){if(!r.hasOwnProperty(v))continue;const w=r[v];if(void 0===w)continue;d??={};let S,N=La.None;Array.isArray(w)?(S=w[0],N=w[1]):S=w;let q=v;if(null!==h){if(!h.hasOwnProperty(v))continue;q=h[v]}0===t?D_(d,a,q,S,N):D_(d,a,q,S)}return d}function D_(t,r,a,d,h){let v;t.hasOwnProperty(a)?(v=t[a]).push(r,d):v=t[a]=[r,d],void 0!==h&&v.push(h)}function ws(t,r,a,d,h,v,w,S){const N=Ji(r,a);let J,q=r.inputs;!S&&null!=q&&(J=q[d])?(_h(t,a,J,d,h),Yc(r)&&function Ga(t,r){const a=gr(r,t);16&a[Dn]||(a[Dn]|=64)}(a,r.index)):3&r.type&&(d=function ME(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(d),h=null!=w?w(h,r.value||"",d):h,v.setProperty(N,d,h))}function uv(t,r,a,d){if(C0()){const h=null===d?null:{"":-1},v=function dv(t,r){const a=t.directiveRegistry;let d=null,h=null;if(a)for(let v=0;v<a.length;v++){const w=a[v];if(Ba(r,w.selectors,!1))if(d||(d=[]),Ca(w))if(null!==w.findHostDirectiveDefs){const S=[];h=h||new Map,w.findHostDirectiveDefs(w,S,h),d.unshift(...S,w),qg(t,r,S.length)}else d.unshift(w),qg(t,r,0);else h=h||new Map,w.findHostDirectiveDefs?.(w,d,h),d.push(w)}return null===d?null:[d,h]}(t,a);let w,S;null===v?w=S=null:[w,S]=v,null!==w&&Sp(t,r,a,w,h,S),h&&function fv(t,r,a){if(r){const d=t.localNames=[];for(let h=0;h<r.length;h+=2){const v=a[r[h+1]];if(null==v)throw new on(-301,!1);d.push(r[h],v)}}}(a,d,h)}a.mergedAttrs=Ir(a.mergedAttrs,a.attrs)}function Sp(t,r,a,d,h,v){for(let q=0;q<d.length;q++)dg(Xd(a,r),t,d[q].type);!function U1(t,r,a){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+a,t.providerIndexes=r}(a,t.data.length,d.length);for(let q=0;q<d.length;q++){const J=d[q];J.providersResolver&&J.providersResolver(J)}let w=!1,S=!1,N=Ln(t,r,d.length,null);for(let q=0;q<d.length;q++){const J=d[q];a.mergedAttrs=Ir(a.mergedAttrs,J.hostAttrs),kE(t,a,r,N,J),B1(N,J,h),null!==J.contentQueries&&(a.flags|=4),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(a.flags|=64);const fe=J.type.prototype;!w&&(fe.ngOnChanges||fe.ngOnInit||fe.ngDoCheck)&&((t.preOrderHooks??=[]).push(a.index),w=!0),!S&&(fe.ngOnChanges||fe.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(a.index),S=!0),N++}!function V1(t,r,a){const h=r.directiveEnd,v=t.data,w=r.attrs,S=[];let N=null,q=null;for(let J=r.directiveStart;J<h;J++){const fe=v[J],Se=a?a.get(fe):null,it=Se?Se.outputs:null;N=xp(0,fe.inputs,J,N,Se?Se.inputs:null),q=xp(1,fe.outputs,J,q,it);const Rt=null===N||null===w||gn(r)?null:FE(N,J,w);S.push(Rt)}null!==N&&(N.hasOwnProperty("class")&&(r.flags|=8),N.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=S,r.inputs=N,r.outputs=q}(t,a,v)}function Wg(t,r,a){const d=a.directiveStart,h=a.directiveEnd,v=a.index,w=function A0(){return or.lFrame.currentDirectiveIndex}();try{Ju(v);for(let S=d;S<h;S++){const N=t.data[S],q=r[S];Gh(S),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&lv(N,q)}}finally{Ju(-1),Gh(w)}}function lv(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function qg(t,r,a){r.componentOffset=a,(t.components??=[]).push(r.index)}function B1(t,r,a){if(a){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)a[r.exportAs[d]]=t;Ca(r)&&(a[""]=t)}}function kE(t,r,a,d,h){t.data[d]=h;const v=h.factory||(h.factory=ao(h.type)),w=new od(v,Ca(h),Fe);t.blueprint[d]=w,a[d]=w,function PE(t,r,a,d,h){const v=h.hostBindings;if(v){let w=t.hostBindingOpCodes;null===w&&(w=t.hostBindingOpCodes=[]);const S=~r.index;(function NE(t){let r=t.length;for(;r>0;){const a=t[--r];if("number"==typeof a&&a<0)return a}return 0})(w)!=S&&w.push(S),w.push(a,d,v)}}(t,r,d,Ln(t,a,h.hostVars,X),h)}function il(t,r,a,d,h,v){const w=Ji(t,r);!function Kg(t,r,a,d,h,v,w){if(null==v)t.removeAttribute(r,h,a);else{const S=null==w?Kn(v):w(v,d||"",h);t.setAttribute(r,h,S,a)}}(r[ir],w,v,t.value,a,d,h)}function H1(t,r,a,d,h,v){const w=v[r];if(null!==w)for(let S=0;S<w.length;)Ut(d,a,w[S++],w[S++],w[S++],w[S++])}function FE(t,r,a){let d=null,h=0;for(;h<a.length;){const v=a[h];if(0!==v)if(5!==v){if("number"==typeof v)break;if(t.hasOwnProperty(v)){null===d&&(d=[]);const w=t[v];for(let S=0;S<w.length;S+=3)if(w[S]===r){d.push(v,w[S+1],w[S+2],a[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function O_(t,r,a,d){return[t,!0,0,r,null,d,null,a,null,null]}function P_(t,r){const a=t.contentQueries;if(null!==a){const d=Ce(null);try{for(let h=0;h<a.length;h+=2){const w=a[h+1];if(-1!==w){const S=t.data[w];jf(a[h]),S.contentQueries(2,r[w],w)}}}finally{Ce(d)}}}function Dp(t,r){return t[Ql]?t[nc][ms]=r:t[Ql]=r,t[nc]=r,r}function sa(t,r,a){jf(0);const d=Ce(null);try{r(t,a)}finally{Ce(d)}}function Xg(t){return t[vl]??=[]}function hv(t){return t.cleanup??=[]}function N_(t,r){const a=t[Pi],d=a?a.get(Du,null):null;d&&d.handleError(r)}function _h(t,r,a,d,h){for(let v=0;v<a.length;){const w=a[v++],S=a[v++],N=a[v++];Ut(t.data[w],r[w],d,S,N,h)}}function kl(t,r,a){const d=ic(r,t);!function Jt(t,r,a){t.setValue(r,a)}(t[ir],d,a)}function G1(t,r){const a=gr(r,t),d=a[qt];!function gv(t,r){for(let a=r.length;a<t.blueprint.length;a++)r.push(t.blueprint[a])}(d,a);const h=a[Ui];null!==h&&null===a[vs]&&(a[vs]=Og(h,a[Pi])),mv(d,a,a[Ii])}function mv(t,r,a){eg(r);try{const d=t.viewQuery;null!==d&&sa(1,d,a);const h=t.template;null!==h&&yr(t,r,h,1,a),t.firstCreatePass&&(t.firstCreatePass=!1),r[go]?.finishViewCreation(t),t.staticContentQueries&&P_(t,r),t.staticViewQueries&&sa(2,t.viewQuery,a);const v=t.components;null!==v&&function LE(t,r){for(let a=0;a<r.length;a++)G1(t,r[a])}(r,v)}catch(d){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),d}finally{r[Dn]&=-5,tg()}}function pf(t,r,a,d){const h=Ce(null);try{const v=r.tView,N=Gt(t,v,a,4096&t[Dn]?4096:16,null,r,null,null,d?.injector??null,d?.embeddedViewInjector??null,d?.dehydratedView??null);N[Qu]=t[r.index];const J=t[go];return null!==J&&(N[go]=J.createEmbeddedView(v)),mv(v,N,a),N}finally{Ce(h)}}function _v(t,r){const a=mo+r;if(a<t.length)return t[a]}function gf(t,r){return!r||null===r.firstChild||sp(t)}function Fl(t,r,a,d=!0){const h=r[qt];if(function uu(t,r,a,d){const h=mo+d,v=a.length;d>0&&(a[h-1][ms]=r),d<v-mo?(r[ms]=a[h],Yi(a,mo+d,r)):(a.push(r),r[ms]=null),r[wo]=a;const w=r[Qu];null!==w&&a!==w&&Nl(w,r);const S=r[go];null!==S&&S.insertView(t),qp(r),r[Dn]|=128}(h,r,t,a),d){const w=L1(a,t),S=r[ir],N=av(S,t[Tc]);null!==N&&function ss(t,r,a,d,h,v){d[Ui]=h,d[_s]=r,o(t,d,a,1,h,v)}(h,t[_s],S,r,N,w)}const v=r[vs];null!==v&&null!==v.firstChild&&(v.firstChild=null)}function Qg(t,r){const a=hf(t,r);return void 0!==a&&mh(a[qt],a),a}function vh(t,r,a,d,h=!1){for(;null!==a;){const v=r[a.index];null!==v&&d.push(Nr(v)),ks(v)&&mf(v,d);const w=a.type;if(8&w)vh(t,r,a.child,d);else if(32&w){const S=Ye(a,r);let N;for(;N=S();)d.push(N)}else if(16&w){const S=F1(r,a);if(Array.isArray(S))d.push(...S);else{const N=xu(r[Ai]);vh(N[qt],N,S,d,!0)}}a=h?a.projectionNext:a.next}return d}function mf(t,r){for(let a=mo;a<t.length;a++){const d=t[a],h=d[qt].firstChild;null!==h&&vh(d[qt],d,h,r)}t[Tc]!==t[Ui]&&r.push(t[Tc])}let vv=[];const z1={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{td(t.lView)},consumerOnSignalRead(){this.lView[rc]=this}},lc=100;function Zg(t,r=!0,a=0){const d=t[Ni],h=d.rendererFactory;h.begin?.();try{!function Jg(t,r){const a=Bh();try{Uh(!0),F_(t,r);let d=0;for(;ed(t);){if(d===lc)throw new on(103,!1);d++,F_(t,1)}}finally{Uh(a)}}(t,a)}catch(w){throw r&&N_(t,w),w}finally{h.end?.(),d.inlineEffectRunner?.flush()}}function VE(t,r,a,d){const h=r[Dn];if(!(256&~h))return;r[Ni].inlineEffectRunner?.flush(),eg(r);let S=null,N=null;(function BE(t){return 2!==t.type})(t)&&(N=function k_(t){return t[rc]??function $1(t){const r=vv.pop()??Object.create(z1);return r.lView=t,r}(t)}(r),S=function tn(t){return t&&(t.nextProducerIndex=0),Ce(t)}(N));try{Sm(r),function eo(t){return or.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==a&&yr(t,r,a,2,d);const q=!(3&~h);if(q){const Se=t.preOrderCheckHooks;null!==Se&&qh(r,Se,null)}else{const Se=t.preOrderHooks;null!==Se&&Wd(r,Se,0,null),ig(r,0)}if(function UE(t){for(let r=bg(t);null!==r;r=Tg(r)){if(!(r[Dn]&wl.HasTransplantedViews))continue;const a=r[Qc];for(let d=0;d<a.length;d++)Fh(a[d])}}(r),yh(r,0),null!==t.contentQueries&&P_(t,r),q){const Se=t.contentCheckHooks;null!==Se&&qh(r,Se)}else{const Se=t.contentHooks;null!==Se&&Wd(r,Se,1),ig(r,1)}!function en(t,r){const a=t.hostBindingOpCodes;if(null!==a)try{for(let d=0;d<a.length;d++){const h=a[d];if(h<0)Ju(~h);else{const v=h,w=a[++d],S=a[++d];Hh(w,v),S(2,r[v])}}}finally{Ju(-1)}}(t,r);const J=t.components;null!==J&&L_(r,J,0);const fe=t.viewQuery;if(null!==fe&&sa(2,fe,d),q){const Se=t.viewCheckHooks;null!==Se&&qh(r,Se)}else{const Se=t.viewHooks;null!==Se&&Wd(r,Se,2),ig(r,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[bu]){for(const Se of r[bu])Se();r[bu]=null}r[Dn]&=-73}catch(q){throw td(r),q}finally{null!==N&&(function Nt(t,r){if(Ce(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(kt(t))for(let a=t.nextProducerIndex;a<t.producerNode.length;a++)Ct(t.producerNode[a],t.producerIndexOfThis[a]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(N,S),function Yg(t){t.lView[rc]!==t&&(t.lView=null,vv.push(t))}(N)),tg()}}function yh(t,r){for(let a=bg(t);null!==a;a=Tg(a))for(let d=mo;d<a.length;d++)em(a[d],r)}function jE(t,r,a){em(gr(r,t),a)}function em(t,r){Ff(t)&&F_(t,r)}function F_(t,r){const d=t[qt],h=t[Dn],v=t[rc];let w=!!(0===r&&16&h);if(w||=!!(64&h&&0===r),w||=!!(1024&h),w||=!(!v?.dirty||!On(v)),w||=!1,v&&(v.dirty=!1),t[Dn]&=-9217,w)VE(d,t,d.template,t[Ii]);else if(8192&h){yh(t,1);const S=d.components;null!==S&&L_(t,S,1)}}function L_(t,r,a){for(let d=0;d<r.length;d++)jE(t,r[d],a)}function _f(t,r){const a=Bh()?64:1088;for(t[Ni].changeDetectionScheduler?.notify(r);t;){t[Dn]|=a;const d=xu(t);if(xc(t)&&!d)return t;t=d}return null}class Nu{get rootNodes(){const r=this._lView,a=r[qt];return vh(a,r,a.firstChild,[])}constructor(r,a,d=!0){this._lView=r,this._cdRefInjectingView=a,this.notifyErrorHandler=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ii]}set context(r){this._lView[Ii]=r}get destroyed(){return!(256&~this._lView[Dn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[wo];if(ks(r)){const a=r[8],d=a?a.indexOf(this):-1;d>-1&&(hf(r,d),Hu(a,d))}this._attachedToViewContainer=!1}mh(this._lView[qt],this._lView)}onDestroy(r){Ko(this._lView,r)}markForCheck(){_f(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Dn]&=-129}reattach(){qp(this._lView),this._lView[Dn]|=128}detectChanges(){this._lView[Dn]|=1024,Zg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new on(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const r=xc(this._lView),a=this._lView[Qu];null!==a&&!r&&bp(a,this._lView),oi(this._lView[qt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new on(902,!1);this._appRef=r;const a=xc(this._lView),d=this._lView[Qu];null!==d&&!a&&Nl(d,this._lView),qp(this._lView)}}let Mp=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Ev}return t})();const W1=Mp,yv=class extends W1{constructor(r,a,d){super(),this._declarationLView=r,this._declarationTContainer=a,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,a){return this.createEmbeddedViewImpl(r,a)}createEmbeddedViewImpl(r,a,d){const h=pf(this._declarationLView,this._declarationTContainer,r,{embeddedViewInjector:a,dehydratedView:d});return new Nu(h)}};function Ev(){return tm(ve(),Dt())}function tm(t,r){return 4&t.type?new yv(r,t,fd(t,r)):null}let Mv=()=>null;function Ef(t,r){return Mv(t,r)}class Id{}const Ia=new ar("",{providedIn:"root",factory:()=>!1}),Ov=new ar("");class Fp{}class I{}class ct{resolveComponentFactory(r){throw function $(t){const r=Error(`No component factory found for ${Tr(t)}.`);return r.ngComponent=t,r}(r)}}class At{static#e=this.NULL=new ct}class un{}let co=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Aa(){const t=Dt(),a=gr(ve().index,t);return(Oo(a)?a:t)[ir]}()}return t})(),Si=(()=>{class t{static#e=this.\u0275prov=Sn({token:t,providedIn:"root",factory:()=>null})}return t})();const aa={},Ih=new Set;function Qo(t){Ih.has(t)||(Ih.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function vm(t){let r=!0;return setTimeout(()=>{r&&(r=!1,t())}),"function"==typeof Ei.requestAnimationFrame&&Ei.requestAnimationFrame(()=>{r&&(r=!1,t())}),()=>{r=!1}}function K_(t){let r=!0;return queueMicrotask(()=>{r&&t()}),()=>{r=!1}}function bw(...t){}class Yo{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ti(!1),this.onMicrotaskEmpty=new Ti(!1),this.onStable=new Ti(!1),this.onError=new Ti(!1),typeof Zone>"u")throw new on(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&a,h.shouldCoalesceRunChangeDetection=d,h.callbackScheduled=!1,function vx(t){const r=()=>{!function _x(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{vm(()=>{t.callbackScheduled=!1,qE(t),t.isCheckStableRunning=!0,WE(t),t.isCheckStableRunning=!1})}),qE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,d,h,v,w,S)=>{if(function yx(t){return Sw(t,"__ignore_ng_zone__")}(S))return a.invokeTask(h,v,w,S);try{return Tw(t),a.invokeTask(h,v,w,S)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||t.shouldCoalesceRunChangeDetection)&&r(),xw(t)}},onInvoke:(a,d,h,v,w,S,N)=>{try{return Tw(t),a.invoke(h,v,w,S,N)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function Ex(t){return Sw(t,"__scheduler_tick__")}(S)&&r(),xw(t)}},onHasTask:(a,d,h,v)=>{a.hasTask(h,v),d===h&&("microTask"==v.change?(t._hasPendingMicrotasks=v.microTask,qE(t),WE(t)):"macroTask"==v.change&&(t.hasPendingMacrotasks=v.macroTask))},onHandleError:(a,d,h,v)=>(a.handleError(h,v),t.runOutsideAngular(()=>t.onError.emit(v)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yo.isInAngularZone())throw new on(909,!1)}static assertNotInAngularZone(){if(Yo.isInAngularZone())throw new on(909,!1)}run(r,a,d){return this._inner.run(r,a,d)}runTask(r,a,d,h){const v=this._inner,w=v.scheduleEventTask("NgZoneEvent: "+h,r,mx,bw,bw);try{return v.runTask(w,a,d)}finally{v.cancelTask(w)}}runGuarded(r,a,d){return this._inner.runGuarded(r,a,d)}runOutsideAngular(r){return this._outer.run(r)}}const mx={};function WE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function qE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function Tw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xw(t){t._nesting--,WE(t)}class KE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ti,this.onMicrotaskEmpty=new Ti,this.onStable=new Ti,this.onError=new Ti}run(r,a,d){return r.apply(a,d)}runGuarded(r,a,d){return r.apply(a,d)}runOutsideAngular(r){return r()}runTask(r,a,d,h){return r.apply(a,d)}}function Sw(t,r){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[r]}var ym=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ym||{});const Dw={destroy(){}};function Rw(t,r){!r&&function tc(t){if(!Sh())throw new on(-203,!1)}();const a=r?.injector??_n(Ls);if(!function y(t){return"browser"===(t??_n(Ls)).get(sf)}(a))return Dw;Qo("NgAfterNextRender");const d=a.get(Pv),h=d.handler??=new Ow,v=r?.phase??ym.MixedReadWrite,w=()=>{h.unregister(N),S()},S=a.get(br).onDestroy(w),N=bc(a,()=>new Mw(v,()=>{w(),t()}));return h.register(N),{destroy:w}}class Mw{constructor(r,a){this.phase=r,this.callbackFn=a,this.zone=_n(Yo),this.errorHandler=_n(Du,{optional:!0}),_n(Id,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(r){this.errorHandler?.handleError(r)}}}class Ow{constructor(){this.executingCallbacks=!1,this.buckets={[ym.EarlyRead]:new Set,[ym.Write]:new Set,[ym.MixedReadWrite]:new Set,[ym.Read]:new Set},this.deferredCallbacks=new Set}register(r){(this.executingCallbacks?this.deferredCallbacks:this.buckets[r.phase]).add(r)}unregister(r){this.buckets[r.phase].delete(r),this.deferredCallbacks.delete(r)}execute(){this.executingCallbacks=!0;for(const r of Object.values(this.buckets))for(const a of r)a.invoke();this.executingCallbacks=!1;for(const r of this.deferredCallbacks)this.buckets[r.phase].add(r);this.deferredCallbacks.clear()}destroy(){for(const r of Object.values(this.buckets))r.clear();this.deferredCallbacks.clear()}}let Pv=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const a=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const d of a)d()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Sn({token:t,providedIn:"root",factory:()=>new t})}return t})();function Lp(t){return!!sr(t)}function Iy(t,r,a){let d=a?t.styles:null,h=a?t.classes:null,v=0;if(null!==r)for(let w=0;w<r.length;w++){const S=r[w];"number"==typeof S?v=S:1==v?h=jo(h,S):2==v&&(d=jo(d,S+": "+r[++w]+";"))}a?t.styles=d:t.stylesWithoutHost=d,a?t.classes=h:t.classesWithoutHost=h}class kw extends At{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const a=Pt(r);return new Fv(a,this.ngModule)}}function Fw(t){const r=[];for(const a in t){if(!t.hasOwnProperty(a))continue;const d=t[a];void 0!==d&&r.push({propName:Array.isArray(d)?d[0]:d,templateName:a})}return r}class Ay{constructor(r,a){this.injector=r,this.parentInjector=a}get(r,a,d){d=hs(d);const h=this.injector.get(r,aa,d);return h!==aa||a===aa?h:this.parentInjector.get(r,a,d)}}class Fv extends I{get inputs(){const r=this.componentDef,a=r.inputTransforms,d=Fw(r.inputs);if(null!==a)for(const h of d)a.hasOwnProperty(h.propName)&&(h.transform=a[h.propName]);return d}get outputs(){return Fw(this.componentDef.outputs)}constructor(r,a){super(),this.componentDef=r,this.ngModule=a,this.componentType=r.type,this.selector=function R(t){return t.map($c).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!a}create(r,a,d,h){const v=Ce(null);try{let w=(h=h||this.ngModule)instanceof qo?h:h?.injector;w&&null!==this.componentDef.getStandaloneInjector&&(w=this.componentDef.getStandaloneInjector(w)||w);const S=w?new Ay(r,w):r,N=S.get(un,null);if(null===N)throw new on(407,!1);const q=S.get(Si,null),Se={rendererFactory:N,sanitizer:q,inlineEffectRunner:null,afterRenderEventManager:S.get(Pv,null),changeDetectionScheduler:S.get(Id,null)},He=N.createRenderer(null,this.componentDef),it=this.componentDef.selectors[0][0]||"div",Rt=d?function st(t,r,a,d){const v=d.get(K0,!1)||a===Fa.ShadowDom,w=t.selectRootElement(r,v);return function yt(t){je(t)}(w),w}(He,d,this.componentDef.encapsulation,S):nr(He,it,function bx(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(it));let Yt=512;this.componentDef.signals?Yt|=4096:this.componentDef.onPush||(Yt|=16);let sn=null;null!==Rt&&(sn=Og(Rt,S,!0));const Vt=$e(0,null,null,1,0,null,null,null,null,null,null),fr=Gt(null,Vt,null,Yt,null,null,Se,He,S,null,sn);let Di,vo;eg(fr);try{const xa=this.componentDef;let Fu,y0=null;xa.findHostDirectiveDefs?(Fu=[],y0=new Map,xa.findHostDirectiveDefs(xa,Fu,y0),Fu.push(xa)):Fu=[xa];const px=function xx(t,r){const a=t[qt],d=Nn;return t[d]=r,Rn(a,d,2,"#host",null)}(fr,Rt),DO=function Sx(t,r,a,d,h,v,w){const S=h[qt];!function Dx(t,r,a,d){for(const h of t)r.mergedAttrs=Ir(r.mergedAttrs,h.hostAttrs);null!==r.mergedAttrs&&(Iy(r,r.mergedAttrs,!0),null!==a&&G(d,a,r))}(d,t,r,w);let N=null;null!==r&&(N=Og(r,h[Pi]));const q=v.rendererFactory.createRenderer(r,a);let J=16;a.signals?J=4096:a.onPush&&(J=64);const fe=Gt(h,Oe(a),null,J,h[t.index],t,v,q,null,null,N);return S.firstCreatePass&&qg(S,t,d.length-1),Dp(h,fe),h[t.index]=fe}(px,Rt,xa,Fu,fr,Se,He);vo=Jc(Vt,Nn),Rt&&function Mx(t,r,a,d){if(d)Ic(t,a,["ng-version","18.0.2"]);else{const{attrs:h,classes:v}=function U(t){const r=[],a=[];let d=1,h=2;for(;d<t.length;){let v=t[d];if("string"==typeof v)2===h?""!==v&&r.push(v,t[++d]):8===h&&a.push(v);else{if(!Va(h))break;h=v}d++}return{attrs:r,classes:a}}(r.selectors[0]);h&&Ic(t,a,h),v&&v.length>0&&V(t,a,v.join(" "))}}(He,xa,Rt,d),void 0!==a&&function Ox(t,r,a){const d=t.projection=[];for(let h=0;h<r.length;h++){const v=a[h];d.push(null!=v?Array.from(v):null)}}(vo,this.ngContentSelectors,a),Di=function Rx(t,r,a,d,h,v){const w=ve(),S=h[qt],N=Ji(w,h);Sp(S,h,w,a,null,d);for(let J=0;J<a.length;J++)wa(cc(h,S,w.directiveStart+J,w),h);Wg(S,h,w),N&&wa(N,h);const q=cc(h,S,w.directiveStart+w.componentOffset,w);if(t[Ii]=h[Ii]=q,null!==v)for(const J of v)J(q,r);return hi(S,w,h),q}(DO,xa,Fu,y0,fr,[Px]),mv(Vt,fr,null)}finally{tg()}return new Tx(this.componentType,Di,fd(vo,fr),fr,vo)}finally{Ce(v)}}}class Tx extends Fp{constructor(r,a,d,h,v){super(),this.location=d,this._rootLView=h,this._tNode=v,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new Nu(h,void 0,!1),this.componentType=r}setInput(r,a){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),a))return;const v=this._rootLView;_h(v[qt],v,h,r,a),this.previousInputValues.set(r,a),_f(gr(this._tNode.index,v),1)}}get injector(){return new Po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Px(){const t=ve();Hf(Dt()[qt],t)}let by=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Nx}return t})();function Nx(){return Bw(ve(),Dt())}const kx=by,Lw=class extends kx{constructor(r,a,d){super(),this._lContainer=r,this._hostTNode=a,this._hostLView=d}get element(){return fd(this._hostTNode,this._hostLView)}get injector(){return new Po(this._hostTNode,this._hostLView)}get parentInjector(){const r=qf(this._hostTNode,this._hostLView);if(ou(r)){const a=ad(r,this._hostLView),d=sd(r);return new Po(a[qt].data[d+8],a)}return new Po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const a=Vw(this._lContainer);return null!==a&&a[r]||null}get length(){return this._lContainer.length-mo}createEmbeddedView(r,a,d){let h,v;"number"==typeof d?h=d:null!=d&&(h=d.index,v=d.injector);const w=Ef(this._lContainer,r.ssrId),S=r.createEmbeddedViewImpl(a||{},v,w);return this.insertImpl(S,h,gf(this._hostTNode,w)),S}createComponent(r,a,d,h,v){const w=r&&!function Kc(t){return"function"==typeof t}(r);let S;if(w)S=a;else{const it=a||{};S=it.index,d=it.injector,h=it.projectableNodes,v=it.environmentInjector||it.ngModuleRef}const N=w?r:new Fv(Pt(r)),q=d||this.parentInjector;if(!v&&null==N.ngModule){const Rt=(w?q:this.parentInjector).get(qo,null);Rt&&(v=Rt)}const J=Pt(N.componentType??{}),fe=Ef(this._lContainer,J?.id??null),He=N.create(q,h,fe?.firstChild??null,v);return this.insertImpl(He.hostView,S,gf(this._hostTNode,fe)),He}insert(r,a){return this.insertImpl(r,a,!0)}insertImpl(r,a,d){const h=r._lView;if(function Sl(t){return ks(t[wo])}(h)){const S=this.indexOf(r);if(-1!==S)this.detach(S);else{const N=h[wo],q=new Lw(N,N[_s],N[wo]);q.detach(q.indexOf(r))}}const v=this._adjustIndex(a),w=this._lContainer;return Fl(w,h,v,d),r.attachToViewContainerRef(),Yi(ZE(w),v,r),r}move(r,a){return this.insert(r,a)}indexOf(r){const a=Vw(this._lContainer);return null!==a?a.indexOf(r):-1}remove(r){const a=this._adjustIndex(r,-1),d=hf(this._lContainer,a);d&&(Hu(ZE(this._lContainer),a),mh(d[qt],d))}detach(r){const a=this._adjustIndex(r,-1),d=hf(this._lContainer,a);return d&&null!=Hu(ZE(this._lContainer),a)?new Nu(d):null}_adjustIndex(r,a=0){return r??this.length+a}};function Vw(t){return t[8]}function ZE(t){return t[8]||(t[8]=[])}function Bw(t,r){let a;const d=r[t.index];return ks(d)?a=d:(a=O_(d,r,null,t),r[t.index]=a,Dp(r,a)),Uw(a,r,t,d),new Lw(a,t,r)}let Uw=function Hw(t,r,a,d){if(t[Tc])return;let h;h=8&a.type?Nr(d):function Fx(t,r){const a=t[ir],d=a.createComment(""),h=Ji(r,t);return Tp(a,av(a,h),d,function AE(t,r){return t.nextSibling(r)}(a,h),!1),d}(r,a),t[Tc]=h},JE=()=>!1;class eC{constructor(r){this.queryList=r,this.matches=null}clone(){return new eC(this.queryList)}setDirty(){this.queryList.setDirty()}}class tC{constructor(r=[]){this.queries=r}createEmbeddedView(r){const a=r.queries;if(null!==a){const d=null!==r.contentQueries?r.contentQueries[0]:a.length,h=[];for(let v=0;v<d;v++){const w=a.getByIndex(v);h.push(this.queries[w.indexInDeclarationView].clone())}return new tC(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}finishViewCreation(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let a=0;a<this.queries.length;a++)null!==sC(r,a).matches&&this.queries[a].setDirty()}}class Gw{constructor(r,a,d=null){this.flags=a,this.read=d,this.predicate="string"==typeof r?function $x(t){return t.split(",").map(r=>r.trim())}(r):r}}class nC{constructor(r=[]){this.queries=r}elementStart(r,a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,a)}elementEnd(r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(r)}embeddedTView(r){let a=null;for(let d=0;d<this.length;d++){const h=null!==a?a.length:0,v=this.getByIndex(d).embeddedTView(r,h);v&&(v.indexInDeclarationView=d,null!==a?a.push(v):a=[v])}return null!==a?new nC(a):null}template(r,a){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,a)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class rC{constructor(r,a=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(r,a){this.isApplyingToNode(a)&&this.matchTNode(r,a)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,a){this.elementStart(r,a)}embeddedTView(r,a){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,a),new rC(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1&~this.metadata.flags){const a=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==a;)d=d.parent;return a===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,a){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const v=d[h];this.matchTNodeWithReadOption(r,a,Ux(a,v)),this.matchTNodeWithReadOption(r,a,Zh(a,r,v,!1,!1))}else d===Mp?4&a.type&&this.matchTNodeWithReadOption(r,a,-1):this.matchTNodeWithReadOption(r,a,Zh(a,r,d,!1,!1))}matchTNodeWithReadOption(r,a,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Jd||h===by||h===Mp&&4&a.type)this.addMatch(a.index,-2);else{const v=Zh(a,r,h,!1,!1);null!==v&&this.addMatch(a.index,v)}else this.addMatch(a.index,d)}}addMatch(r,a){null===this.matches?this.matches=[r,a]:this.matches.push(r,a)}}function Ux(t,r){const a=t.localNames;if(null!==a)for(let d=0;d<a.length;d+=2)if(a[d]===r)return a[d+1];return null}function Hx(t,r,a,d){return-1===a?function jx(t,r){return 11&t.type?fd(t,r):4&t.type?tm(t,r):null}(r,t):-2===a?function Gx(t,r,a){return a===Jd?fd(r,t):a===Mp?tm(r,t):a===by?Bw(r,t):void 0}(t,r,d):cc(t,t[qt],a,r)}function $w(t,r,a,d){const h=r[go].queries[d];if(null===h.matches){const v=t.data,w=a.matches,S=[];for(let N=0;null!==w&&N<w.length;N+=2){const q=w[N];S.push(q<0?null:Hx(r,v[q],w[N+1],a.metadata.read))}h.matches=S}return h.matches}function iC(t,r,a,d){const h=t.queries.getByIndex(a),v=h.matches;if(null!==v){const w=$w(t,r,h,a);for(let S=0;S<v.length;S+=2){const N=v[S];if(N>0)d.push(w[S/2]);else{const q=v[S+1],J=r[-N];for(let fe=mo;fe<J.length;fe++){const Se=J[fe];Se[Qu]===Se[wo]&&iC(Se[qt],Se,q,d)}if(null!==J[Qc]){const fe=J[Qc];for(let Se=0;Se<fe.length;Se++){const He=fe[Se];iC(He[qt],He,q,d)}}}}}return d}function zw(t,r,a){const d=new ip(!(4&~a));return function RE(t,r,a,d){const h=Xg(r);h.push(a),t.firstCreatePass&&hv(t).push(d,h.length-1)}(t,r,d,d.destroy),(r[go]??=new tC).queries.push(new eC(d))-1}function Kw(t,r,a){null===t.queries&&(t.queries=new nC),t.queries.track(new rC(r,a))}function sC(t,r){return t.queries.getByIndex(r)}function Xw(t,r){const a=t[qt],d=sC(a,r);return d.crossesNgTemplate?iC(a,t,r,[]):$w(a,t,d,r)}function Zw(t){return function Qw(t){return"function"==typeof t&&void 0!==t[Ze]}(t)&&"function"==typeof t.set}function cC(t){let r=function uI(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),a=!0;const d=[t];for(;r;){let h;if(Ca(t))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new on(903,!1);h=r.\u0275dir}if(h){if(a){d.push(h);const w=t;w.inputs=xy(t.inputs),w.inputTransforms=xy(t.inputTransforms),w.declaredInputs=xy(t.declaredInputs),w.outputs=xy(t.outputs);const S=h.hostBindings;S&&sS(t,S);const N=h.viewQuery,q=h.contentQueries;if(N&&iS(t,N),q&&oS(t,q),nS(t,h),Bc(t.outputs,h.outputs),Ca(h)&&h.data.animation){const J=t.data;J.animation=(J.animation||[]).concat(h.data.animation)}}const v=h.features;if(v)for(let w=0;w<v.length;w++){const S=v[w];S&&S.ngInherit&&S(t),S===cC&&(a=!1)}}r=Object.getPrototypeOf(r)}!function rS(t){let r=0,a=null;for(let d=t.length-1;d>=0;d--){const h=t[d];h.hostVars=r+=h.hostVars,h.hostAttrs=Ir(h.hostAttrs,a=Ir(a,h.hostAttrs))}}(d)}function nS(t,r){for(const a in r.inputs){if(!r.inputs.hasOwnProperty(a)||t.inputs.hasOwnProperty(a))continue;const d=r.inputs[a];if(void 0!==d&&(t.inputs[a]=d,t.declaredInputs[a]=r.declaredInputs[a],null!==r.inputTransforms)){const h=Array.isArray(d)?d[0]:d;if(!r.inputTransforms.hasOwnProperty(h))continue;t.inputTransforms??={},t.inputTransforms[h]=r.inputTransforms[h]}}}function xy(t){return t===pi?{}:t===Pr?[]:t}function iS(t,r){const a=t.viewQuery;t.viewQuery=a?(d,h)=>{r(d,h),a(d,h)}:r}function oS(t,r){const a=t.contentQueries;t.contentQueries=a?(d,h,v)=>{r(d,h,v),a(d,h,v)}:r}function sS(t,r){const a=t.hostBindings;t.hostBindings=a?(d,h)=>{r(d,h),a(d,h)}:r}function hI(t){const r=t.inputConfig,a={};for(const d in r)if(r.hasOwnProperty(d)){const h=r[d];Array.isArray(h)&&h[3]&&(a[d]=h[3])}t.inputTransforms=a}class Em{}class pI{}function fS(t,r){return new uC(t,r??null,[])}class uC extends Em{constructor(r,a,d){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kw(this);const h=sr(r);this._bootstrapComponents=m(h.bootstrap),this._r3Injector=mg(r,a,[{provide:Em,useValue:this},{provide:At,useValue:this.componentFactoryResolver},...d],Tr(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class lC extends pI{constructor(r){super(),this.moduleType=r}create(r){return new uC(this.moduleType,r,[])}}class gI extends Em{constructor(r){super(),this.componentFactoryResolver=new kw(this),this.instance=null;const a=new Ac([...r.providers,{provide:Em,useValue:this},{provide:At,useValue:this.componentFactoryResolver}],r.parent||Ku(),r.debugName,new Set(["environment"]));this.injector=a,r.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function dC(t,r,a=null){return new gI({providers:t,parent:r,debugName:a,runEnvironmentInitializers:!0}).injector}let Cm=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qr.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Sn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Dy(t){return!!fC(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function fC(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Cf(t,r,a){return t[r]=a}function Js(t,r,a){return!Object.is(t[r],a)&&(t[r]=a,!0)}function wm(t,r,a,d){const h=Js(t,r,a);return Js(t,r+1,d)||h}function Bv(t,r,a,d,h,v,w,S,N,q){const J=a+Nn,fe=r.firstCreatePass?function yS(t,r,a,d,h,v,w,S,N){const q=r.consts,J=Rn(r,t,4,w||null,S||null);uv(r,a,J,sc(q,N)),Hf(r,J);const fe=J.tView=$e(2,J,d,h,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,q,null);return null!==r.queries&&(r.queries.template(r,J),fe.queries=r.queries.embeddedTView(J)),J}(J,r,t,d,h,v,w,S,N):r.data[J];Fs(fe,!1);const Se=_I(r,t,fe,a);id()&&cv(r,t,Se,fe),wa(Se,t);const He=O_(Se,t,Se,fe);return t[J]=He,Dp(t,He),function jw(t,r,a){return JE(t,r,a)}(He,fe,t),Yl(fe)&&Fr(r,t,fe),null!=N&&et(t,fe,q),fe}function hC(t,r,a,d,h,v,w,S){const N=Dt(),q=Vr();return Bv(N,q,t,r,a,d,h,sc(q.consts,v),w,S),hC}let _I=function vI(t,r,a,d){return iu(!0),r[ir].createComment("")};function IC(t,r,a,d){const h=Dt();return Js(h,nu(),r)&&(Vr(),il(ji(),h,t,r,a,d)),IC}function o0(t,r,a,d){return Js(t,nu(),a)?r+Kn(a)+d:X}function s0(t,r,a,d,h,v){const S=wm(t,tu(),a,h);return ru(2),S?r+Kn(a)+d+Kn(h)+v:X}function c0(t,r,a,d,h,v,w,S,N,q){const fe=function Vl(t,r,a,d,h,v){const w=wm(t,r,a,d);return wm(t,r+2,h,v)||w}(t,tu(),a,h,w,N);return ru(4),fe?r+Kn(a)+d+Kn(h)+v+Kn(w)+S+Kn(N)+q:X}function Fy(t,r){return t<<17|r<<2}function Up(t){return t>>17&32767}function AC(t){return 2|t}function Am(t){return(131068&t)>>2}function bC(t,r){return-131069&t|r<<2}function TC(t){return 1|t}function XI(t,r,a,d){const h=t[a+1],v=null===r;let w=d?Up(h):Am(h),S=!1;for(;0!==w&&(!1===S||v);){const q=t[w+1];oD(t[w],r)&&(S=!0,t[w+1]=d?TC(q):AC(q)),w=d?Up(q):Am(q)}S&&(t[a+1]=d?AC(h):TC(h))}function oD(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Gc(t,r)>=0}const ba={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function QI(t){return t.substring(ba.key,ba.keyEnd)}function YI(t,r){const a=ba.textEnd;return a===r?-1:(r=ba.keyEnd=function uD(t,r,a){for(;r<a&&t.charCodeAt(r)>32;)r++;return r}(t,ba.key=r,a),h0(t,r,a))}function h0(t,r,a){for(;r<a&&t.charCodeAt(r)<=32;)r++;return r}function xC(t,r,a){const d=Dt();return Js(d,nu(),r)&&ws(Vr(),ji(),d,t,r,d[ir],a,!1),xC}function SC(t,r,a,d,h){const w=h?"class":"style";_h(t,a,r.inputs[w],w,d)}function DC(t,r,a){return Ad(t,r,a,!1),DC}function RC(t,r){return Ad(t,r,null,!0),RC}function nA(t){bd(vD,If,t,!0)}function If(t,r){for(let a=function aD(t){return function JI(t){ba.key=0,ba.keyEnd=0,ba.value=0,ba.valueEnd=0,ba.textEnd=t.length}(t),YI(t,h0(t,0,ba.textEnd))}(r);a>=0;a=YI(r,a))Wo(t,QI(r),!0)}function Ad(t,r,a,d){const h=Dt(),v=Vr(),w=ru(2);v.firstUpdatePass&&iA(v,t,w,d),r!==X&&Js(h,w,r)&&sA(v,v.data[Xs()],h,h[ir],t,h[w+1]=function ED(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Tr(Zs(t)))),t}(r,a),d,w)}function bd(t,r,a,d){const h=Vr(),v=ru(2);h.firstUpdatePass&&iA(h,null,v,d);const w=Dt();if(a!==X&&Js(w,v,a)){const S=h.data[Xs()];if(cA(S,d)&&!rA(h,v)){let N=d?S.classesWithoutHost:S.stylesWithoutHost;null!==N&&(a=jo(N,a||"")),SC(h,S,w,a,d)}else!function yD(t,r,a,d,h,v,w,S){h===X&&(h=Pr);let N=0,q=0,J=0<h.length?h[0]:null,fe=0<v.length?v[0]:null;for(;null!==J||null!==fe;){const Se=N<h.length?h[N+1]:void 0,He=q<v.length?v[q+1]:void 0;let Rt,it=null;J===fe?(N+=2,q+=2,Se!==He&&(it=fe,Rt=He)):null===fe||null!==J&&J<fe?(N+=2,it=J):(q+=2,it=fe,Rt=He),null!==it&&sA(t,r,a,d,it,Rt,w,S),J=N<h.length?h[N]:null,fe=q<v.length?v[q]:null}}(h,S,w,w[ir],w[v+1],w[v+1]=function _D(t,r,a){if(null==a||""===a)return Pr;const d=[],h=Zs(a);if(Array.isArray(h))for(let v=0;v<h.length;v++)t(d,h[v],!0);else if("object"==typeof h)for(const v in h)h.hasOwnProperty(v)&&t(d,v,h[v]);else"string"==typeof h&&r(d,h);return d}(t,r,a),d,v)}}function rA(t,r){return r>=t.expandoStartIndex}function iA(t,r,a,d){const h=t.data;if(null===h[a+1]){const v=h[Xs()],w=rA(t,a);cA(v,d)&&null===r&&!w&&(r=!1),r=function hD(t,r,a,d){const h=function Zp(t){const r=or.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let v=d?r.residualClasses:r.residualStyles;if(null===h)0===(d?r.classBindings:r.styleBindings)&&(a=Gv(a=MC(null,t,r,a,d),r.attrs,d),v=null);else{const w=r.directiveStylingLast;if(-1===w||t[w]!==h)if(a=MC(h,t,r,a,d),null===v){let N=function pD(t,r,a){const d=a?r.classBindings:r.styleBindings;if(0!==Am(d))return t[Up(d)]}(t,r,d);void 0!==N&&Array.isArray(N)&&(N=MC(null,t,r,N[1],d),N=Gv(N,r.attrs,d),function gD(t,r,a,d){t[Up(a?r.classBindings:r.styleBindings)]=d}(t,r,d,N))}else v=function mD(t,r,a){let d;const h=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<h;v++)d=Gv(d,t[v].hostAttrs,a);return Gv(d,r.attrs,a)}(t,r,d)}return void 0!==v&&(d?r.residualClasses=v:r.residualStyles=v),a}(h,v,r,d),function rD(t,r,a,d,h,v){let w=v?r.classBindings:r.styleBindings,S=Up(w),N=Am(w);t[d]=a;let J,q=!1;if(Array.isArray(a)?(J=a[1],(null===J||Gc(a,J)>0)&&(q=!0)):J=a,h)if(0!==N){const Se=Up(t[S+1]);t[d+1]=Fy(Se,S),0!==Se&&(t[Se+1]=bC(t[Se+1],d)),t[S+1]=function tD(t,r){return 131071&t|r<<17}(t[S+1],d)}else t[d+1]=Fy(S,0),0!==S&&(t[S+1]=bC(t[S+1],d)),S=d;else t[d+1]=Fy(N,0),0===S?S=d:t[N+1]=bC(t[N+1],d),N=d;q&&(t[d+1]=AC(t[d+1])),XI(t,J,d,!0),XI(t,J,d,!1),function iD(t,r,a,d,h){const v=h?t.residualClasses:t.residualStyles;null!=v&&"string"==typeof r&&Gc(v,r)>=0&&(a[d+1]=TC(a[d+1]))}(r,J,t,d,v),w=Fy(S,N),v?r.classBindings=w:r.styleBindings=w}(h,v,r,a,w,d)}}function MC(t,r,a,d,h){let v=null;const w=a.directiveEnd;let S=a.directiveStylingLast;for(-1===S?S=a.directiveStart:S++;S<w&&(v=r[S],d=Gv(d,v.hostAttrs,h),v!==t);)S++;return null!==t&&(a.directiveStylingLast=S),d}function Gv(t,r,a){const d=a?1:2;let h=-1;if(null!==r)for(let v=0;v<r.length;v++){const w=r[v];"number"==typeof w?h=w:h===d&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Wo(t,w,!!a||r[++v]))}return void 0===t?null:t}function vD(t,r,a){const d=String(r);""!==d&&!d.includes(" ")&&Wo(t,d,a)}function sA(t,r,a,d,h,v,w,S){if(!(3&r.type))return;const N=t.data,q=N[S+1],J=function nD(t){return!(1&~t)}(q)?aA(N,r,a,h,Am(q),w):void 0;Ly(J)||(Ly(v)||function eD(t){return!(2&~t)}(q)&&(v=aA(N,null,a,h,S,w)),function C(t,r,a,d,h){if(r)h?t.addClass(a,d):t.removeClass(a,d);else{let v=-1===d.indexOf("-")?void 0:Le.DashCase;null==h?t.removeStyle(a,d,v):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),v|=Le.Important),t.setStyle(a,d,h,v))}}(d,w,ic(Xs(),a),h,v))}function aA(t,r,a,d,h,v){const w=null===r;let S;for(;h>0;){const N=t[h],q=Array.isArray(N),J=q?N[1]:N,fe=null===J;let Se=a[h+1];Se===X&&(Se=fe?Pr:void 0);let He=fe?Os(Se,d):J===d?Se:void 0;if(q&&!Ly(He)&&(He=Os(N,d)),Ly(He)&&(S=He,w))return S;const it=t[h+1];h=w?Up(it):Am(it)}if(null!==r){let N=v?r.residualClasses:r.residualStyles;null!=N&&(S=Os(N,d))}return S}function Ly(t){return void 0!==t}function cA(t,r){return!!(t.flags&(r?8:16))}function uA(t,r,a){bd(Wo,If,o0(Dt(),t,r,a),!0)}function lA(t,r,a,d,h){bd(Wo,If,s0(Dt(),t,r,a,d,h),!0)}function dA(t,r,a,d,h,v,w,S,N){bd(Wo,If,c0(Dt(),t,r,a,d,h,v,w,S,N),!0)}class SD{destroy(r){}updateValue(r,a){}swap(r,a){const d=Math.min(r,a),h=Math.max(r,a),v=this.detach(h);if(h-d>1){const w=this.detach(d);this.attach(d,v),this.attach(h,w)}else this.attach(d,v)}move(r,a){this.attach(a,this.detach(r))}}function OC(t,r,a,d,h){return t===a&&Object.is(r,d)?1:Object.is(h(t,r),h(a,d))?-1:0}function PC(t,r,a,d){return!(void 0===r||!r.has(d)||(t.attach(a,r.get(d)),r.delete(d),0))}function fA(t,r,a,d,h){if(PC(t,r,d,a(d,h)))t.updateValue(d,h);else{const v=t.create(d,h);t.attach(d,v)}}function hA(t,r,a,d){const h=new Set;for(let v=r;v<=a;v++)h.add(d(v,t.at(v)));return h}class pA{constructor(){this.kvMap=new Map,this._vMap=void 0}has(r){return this.kvMap.has(r)}delete(r){if(!this.has(r))return!1;const a=this.kvMap.get(r);return void 0!==this._vMap&&this._vMap.has(a)?(this.kvMap.set(r,this._vMap.get(a)),this._vMap.delete(a)):this.kvMap.delete(r),!0}get(r){return this.kvMap.get(r)}set(r,a){if(this.kvMap.has(r)){let d=this.kvMap.get(r);void 0===this._vMap&&(this._vMap=new Map);const h=this._vMap;for(;h.has(d);)d=h.get(d);h.set(d,a)}else this.kvMap.set(r,a)}forEach(r){for(let[a,d]of this.kvMap)if(r(d,a),void 0!==this._vMap){const h=this._vMap;for(;h.has(d);)d=h.get(d),r(d,a)}}}function gA(t,r){Qo("NgControlFlow");const a=Dt(),d=nu(),h=a[d]!==X?a[d]:-1,v=-1!==h?Vy(a,Nn+h):void 0;if(Js(a,d,t)){const S=Ce(null);try{if(void 0!==v&&Qg(v,0),-1!==t){const N=Nn+t,q=Vy(a,N),J=NC(a[qt],N),fe=Ef(q,J.tView.ssrId);Fl(q,pf(a,J,r,{dehydratedView:fe}),0,gf(J,fe))}}finally{Ce(S)}}else if(void 0!==v){const S=_v(v,0);void 0!==S&&(S[Ii]=r)}}class RD{constructor(r,a,d){this.lContainer=r,this.$implicit=a,this.$index=d}get $count(){return this.lContainer.length-mo}}function mA(t,r){return r}class OD{constructor(r,a,d){this.hasEmptyBlock=r,this.trackByFn=a,this.liveCollection=d}}function _A(t,r,a,d,h,v,w,S,N,q,J,fe,Se){Qo("NgControlFlow");const He=Dt(),it=Vr(),Rt=void 0!==N,Yt=Dt(),sn=S?w.bind(Yt[Ai][Ii]):w,Vt=new OD(Rt,sn);Yt[Nn+t]=Vt,Bv(He,it,t+1,r,a,d,h,sc(it.consts,v)),Rt&&Bv(He,it,t+2,N,q,J,fe,sc(it.consts,Se))}class PD extends SD{constructor(r,a,d){super(),this.lContainer=r,this.hostLView=a,this.templateTNode=d,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-mo}at(r){return this.getLView(r)[Ii].$implicit}attach(r,a){const d=a[vs];this.needsIndexUpdate||=r!==this.length,Fl(this.lContainer,a,r,gf(this.templateTNode,d))}detach(r){return this.needsIndexUpdate||=r!==this.length-1,function ND(t,r){return hf(t,r)}(this.lContainer,r)}create(r,a){const d=Ef(this.lContainer,this.templateTNode.tView.ssrId),h=pf(this.hostLView,this.templateTNode,new RD(this.lContainer,a,r),{dehydratedView:d});return this.operationsCounter?.recordCreate(),h}destroy(r){mh(r[qt],r),this.operationsCounter?.recordDestroy()}updateValue(r,a){this.getLView(r)[Ii].$implicit=a}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let r=0;r<this.length;r++)this.getLView(r)[Ii].$index=r}getLView(r){return function kD(t,r){return _v(t,r)}(this.lContainer,r)}}function vA(t){const r=Ce(null),a=Xs();try{const d=Dt(),h=d[qt],v=d[a],w=a+1,S=Vy(d,w);if(void 0===v.liveCollection){const q=NC(h,w);v.liveCollection=new PD(S,d,q)}else v.liveCollection.reset();const N=v.liveCollection;if(function DD(t,r,a){let d,h,v=0,w=t.length-1;if(Array.isArray(r)){let N=r.length-1;for(;v<=w&&v<=N;){const q=t.at(v),J=r[v],fe=OC(v,q,v,J,a);if(0!==fe){fe<0&&t.updateValue(v,J),v++;continue}const Se=t.at(w),He=r[N],it=OC(w,Se,N,He,a);if(0!==it){it<0&&t.updateValue(w,He),w--,N--;continue}const Rt=a(v,q),Yt=a(w,Se),sn=a(v,J);if(Object.is(sn,Yt)){const Vt=a(N,He);Object.is(Vt,Rt)?(t.swap(v,w),t.updateValue(w,He),N--,w--):t.move(w,v),t.updateValue(v,J),v++}else if(d??=new pA,h??=hA(t,v,w,a),PC(t,d,v,sn))t.updateValue(v,J),v++,w++;else if(h.has(sn))d.set(Rt,t.detach(v)),w--;else{const Vt=t.create(v,r[v]);t.attach(v,Vt),v++,w++}}for(;v<=N;)fA(t,d,a,v,r[v]),v++}else if(null!=r){const N=r[Symbol.iterator]();let q=N.next();for(;!q.done&&v<=w;){const J=t.at(v),fe=q.value,Se=OC(v,J,v,fe,a);if(0!==Se)Se<0&&t.updateValue(v,fe),v++,q=N.next();else{d??=new pA,h??=hA(t,v,w,a);const He=a(v,fe);if(PC(t,d,v,He))t.updateValue(v,fe),v++,w++,q=N.next();else if(h.has(He)){const it=a(v,J);d.set(it,t.detach(v)),w--}else t.attach(v,t.create(v,fe)),v++,w++,q=N.next()}}for(;!q.done;)fA(t,d,a,t.length,q.value),q=N.next()}for(;v<=w;)t.destroy(t.detach(w--));d?.forEach(N=>{t.destroy(N)})}(N,t,v.trackByFn),N.updateIndexes(),v.hasEmptyBlock){const q=nu(),J=0===N.length;if(Js(d,q,J)){const fe=a+2,Se=Vy(d,fe);if(J){const He=NC(h,fe),it=Ef(Se,He.tView.ssrId);Fl(Se,pf(d,He,void 0,{dehydratedView:it}),0,gf(He,it))}else Qg(Se,0)}}}finally{Ce(r)}}function Vy(t,r){return t[r]}function NC(t,r){return Jc(t,r)}function By(t,r,a,d){const h=Dt(),v=Vr(),w=Nn+t,S=h[ir],N=v.firstCreatePass?function FD(t,r,a,d,h,v){const w=r.consts,N=Rn(r,t,2,d,sc(w,h));return uv(r,a,N,sc(w,v)),null!==N.attrs&&Iy(N,N.attrs,!1),null!==N.mergedAttrs&&Iy(N,N.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,N),N}(w,v,h,r,a,d):v.data[w],q=yA(v,h,N,S,r,t);h[w]=q;const J=Yl(N);return Fs(N,!0),G(S,q,N),!function Q_(t){return!(32&~t.flags)}(N)&&id()&&cv(v,h,q,N),0===function E0(){return or.lFrame.elementDepthCount}()&&wa(q,h),function Bf(){or.lFrame.elementDepthCount++}(),J&&(Fr(v,h,N),hi(v,N,h)),null!==d&&et(h,N),By}function Uy(){let t=ve();_o()?Rl():(t=t.parent,Fs(t,!1));const r=t;(function w0(t){return or.skipHydrationRootTNode===t})(r)&&function Mm(){or.skipHydrationRootTNode=null}(),function Rm(){or.lFrame.elementDepthCount--}();const a=Vr();return a.firstCreatePass&&(Hf(a,t),Ks(t)&&a.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Lm(t){return!!(8&t.flags)}(r)&&SC(a,r,Dt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function ag(t){return!!(16&t.flags)}(r)&&SC(a,r,Dt(),r.stylesWithoutHost,!1),Uy}function kC(t,r,a,d){return By(t,r,a,d),Uy(),kC}let yA=(t,r,a,d,h,v)=>(iu(!0),nr(d,h,function Wh(){return or.lFrame.currentNamespace}()));function jy(t,r,a){const d=Dt(),h=Vr(),v=t+Nn,w=h.firstCreatePass?function BD(t,r,a,d,h){const v=r.consts,w=sc(v,d),S=Rn(r,t,8,"ng-container",w);return null!==w&&Iy(S,w,!0),uv(r,a,S,sc(v,h)),null!==r.queries&&r.queries.elementStart(r,S),S}(v,h,d,r,a):h.data[v];Fs(w,!0);const S=CA(h,d,w,t);return d[v]=S,id()&&cv(h,d,S,w),wa(S,d),Yl(w)&&(Fr(h,d,w),hi(h,w,d)),null!=a&&et(d,w),jy}function Hy(){let t=ve();const r=Vr();return _o()?Rl():(t=t.parent,Fs(t,!1)),r.firstCreatePass&&(Hf(r,t),Ks(t)&&r.queries.elementEnd(t)),Hy}let CA=(t,r,a,d)=>(iu(!0),mn(r[ir],""));function wA(){return Dt()}const bm=void 0;var GD=["en",[["a","p"],["AM","PM"],bm],[["AM","PM"],bm,bm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bm,"{1} 'at' {0}",bm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function HD(t){const a=Math.floor(Math.abs(t)),d=t.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===d?1:5}];let p0={};function FC(t){const r=function $D(t){return t.toLowerCase().replace(/_/g,"-")}(t);let a=TA(r);if(a)return a;const d=r.split("-")[0];if(a=TA(d),a)return a;if("en"===d)return GD;throw new on(701,!1)}function bA(t){return FC(t)[g0.PluralCase]}function TA(t){return t in p0||(p0[t]=Ei.ng&&Ei.ng.common&&Ei.ng.common.locales&&Ei.ng.common.locales[t]),p0[t]}var g0=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(g0||{});const m0="en-US";let xA=m0;let WA=(t,r,a)=>{};function BC(t,r,a,d){const h=Dt(),v=Vr(),w=ve();return UC(v,h,h[ir],w,t,r,d),BC}function UC(t,r,a,d,h,v,w){const S=Yl(d),q=t.firstCreatePass&&hv(t),J=r[Ii],fe=Xg(r);let Se=!0;if(3&d.type||w){const Rt=Ji(d,r),Yt=w?w(Rt):Rt,sn=fe.length,Vt=w?Di=>w(Nr(Di[d.index])):d.index;let fr=null;if(!w&&S&&(fr=function O2(t,r,a,d){const h=t.cleanup;if(null!=h)for(let v=0;v<h.length-1;v+=2){const w=h[v];if(w===a&&h[v+1]===d){const S=r[vl],N=h[v+2];return S.length>N?S[N]:null}"string"==typeof w&&(v+=2)}return null}(t,r,h,d.index)),null!==fr)(fr.__ngLastListenerFn__||fr).__ngNextListenerFn__=v,fr.__ngLastListenerFn__=v,Se=!1;else{v=QA(d,r,J,v),WA(Rt,h,v);const Di=a.listen(Yt,h,v);fe.push(v,Di),q&&q.push(h,Vt,sn,sn+1)}}else v=QA(d,r,J,v);const He=d.outputs;let it;if(Se&&null!==He&&(it=He[h])){const Rt=it.length;if(Rt)for(let Yt=0;Yt<Rt;Yt+=2){const vo=r[it[Yt]][it[Yt+1]].subscribe(v),xa=fe.length;fe.push(v,vo),q&&q.push(h,d.index,xa,-(xa+1))}}}function XA(t,r,a,d){const h=Ce(null);try{return Ha(6,r,a),!1!==a(d)}catch(v){return N_(t,v),!1}finally{Ha(7,r,a),Ce(h)}}function QA(t,r,a,d){return function h(v){if(v===Function)return d;_f(t.componentOffset>-1?gr(t.index,r):r,5);let S=XA(r,a,d,v),N=h.__ngNextListenerFn__;for(;N;)S=XA(r,a,N,v)&&S,N=N.__ngNextListenerFn__;return S}}function YA(t=1){return function rd(t){return(or.lFrame.contextLView=function Dm(t,r){for(;t>0;)r=r[yl],t--;return r}(t,or.lFrame.contextLView))[Ii]}(t)}function P2(t,r){let a=null;const d=function Af(t){const r=t.attrs;if(null!=r){const a=r.indexOf(5);if(!(1&a))return r[a+1]}return null}(t);for(let h=0;h<r.length;h++){const v=r[h];if("*"!==v){if(null===d?Ba(t,v,!0):gl(d,v))return h}else a=h}return a}function ZA(t){const r=Dt()[Ai][_s];if(!r.projection){const d=r.projection=function wc(t,r){const a=[];for(let d=0;d<t;d++)a.push(r);return a}(t?t.length:1,null),h=d.slice();let v=r.child;for(;null!==v;){const w=t?P2(v,t):0;null!==w&&(h[w]?h[w].projectionNext=v:d[w]=v,h[w]=v),v=v.next}}}function JA(t,r=0,a,d,h,v){const w=Dt(),S=Vr(),N=d?t+1:null;null!==N&&Bv(w,S,N,d,h,v,null,a);const q=Rn(S,Nn+t,16,null,a||null);null===q.projection&&(q.projection=r),Rl();const fe=!w[vs]||ac();null===w[Ai][_s].projection[q.projection]&&null!==N?function N2(t,r,a){const d=Nn+a,h=r.data[d],v=t[d],w=Ef(v,h.tView.ssrId);Fl(v,pf(t,h,void 0,{dehydratedView:w}),0,gf(h,w))}(w,S,N):fe&&32&~q.flags&&function u(t,r,a){f(r[ir],0,r,a,P1(t,a,r),bE(a.parent||r[_s],a,r))}(S,w,q)}function jC(t,r,a){return Wy(t,"",r,"",a),jC}function Wy(t,r,a,d,h){const v=Dt(),w=o0(v,r,a,d);return w!==X&&ws(Vr(),ji(),v,t,w,v[ir],h,!1),Wy}function cb(t,r,a,d){!function qw(t,r,a,d){const h=Vr();if(h.firstCreatePass){const v=ve();Kw(h,new Gw(r,a,d),v.index),function zx(t,r){const a=t.contentQueries||(t.contentQueries=[]);r!==(a.length?a[a.length-1]:-1)&&a.push(t.queries.length-1,r)}(h,t),!(2&~a)&&(h.staticContentQueries=!0)}return zw(h,Dt(),a)}(t,r,a,d)}function ub(t,r,a){!function Ww(t,r,a){const d=Vr();return d.firstCreatePass&&(Kw(d,new Gw(t,r,a),-1),!(2&~r)&&(d.staticViewQueries=!0)),zw(d,Dt(),r)}(t,r,a)}function lb(t){const r=Dt(),a=Vr(),d=$h();jf(d+1);const h=sC(a,d);if(t.dirty&&function ii(t){return!(4&~t[Dn])}(r)===!(2&~h.metadata.flags)){if(null===h.matches)t.reset([]);else{const v=Xw(r,d);t.reset(v,bi),t.notifyOnChanges()}return!0}return!1}function db(){return function oC(t,r){return t[go].queries[r].queryList}(Dt(),$h())}function fb(t){return oc(function Xp(){return or.lFrame.contextLView}(),Nn+t)}function wb(t,r=""){const a=Dt(),d=Vr(),h=t+Nn,v=d.firstCreatePass?Rn(d,h,1,r,null):d.data[h],w=Ib(d,a,v,r,t);a[h]=w,id()&&cv(d,a,w,v),Fs(v,!1)}let Ib=(t,r,a,d,h)=>(iu(!0),function $t(t,r){return t.createText(r)}(r[ir],d));function HC(t){return qy("",t,""),HC}function qy(t,r,a){const d=Dt(),h=o0(d,t,r,a);return h!==X&&kl(d,Xs(),h),qy}function GC(t,r,a,d,h){const v=Dt(),w=s0(v,t,r,a,d,h);return w!==X&&kl(v,Xs(),w),GC}function $C(t,r,a){Zw(r)&&(r=r());const d=Dt();return Js(d,nu(),r)&&ws(Vr(),ji(),d,t,r,d[ir],a,!1),$C}function Mb(t,r){const a=Zw(t);return a&&t.set(r),a}function zC(t,r){const a=Dt(),d=Vr(),h=ve();return UC(d,a,a[ir],h,t,r),zC}function WC(t,r,a,d,h){if(t=Fn(t),Array.isArray(t))for(let v=0;v<t.length;v++)WC(t[v],r,a,d,h);else{const v=Vr(),w=Dt(),S=ve();let N=wu(t)?t:Fn(t.provide);const q=Lr(t),J=1048575&S.providerIndexes,fe=S.directiveStart,Se=S.providerIndexes>>20;if(wu(t)||!t.multi){const He=new od(q,h,Fe),it=KC(N,r,h?J:J+Se,fe);-1===it?(dg(Xd(S,w),v,N),qC(v,t,r.length),r.push(N),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(He),w.push(He)):(a[it]=He,w[it]=He)}else{const He=KC(N,r,J+Se,fe),it=KC(N,r,J,J+Se),Yt=it>=0&&a[it];if(h&&!Yt||!h&&!(He>=0&&a[He])){dg(Xd(S,w),v,N);const sn=function J2(t,r,a,d,h){const v=new od(t,a,Fe);return v.multi=[],v.index=r,v.componentProviders=0,Ob(v,h,d&&!a),v}(h?Z2:Y2,a.length,h,d,q);!h&&Yt&&(a[it].providerFactory=sn),qC(v,t,r.length,0),r.push(N),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(sn),w.push(sn)}else qC(v,t,He>-1?He:it,Ob(a[h?it:He],q,!h&&d));!h&&d&&Yt&&a[it].componentProviders++}}}function qC(t,r,a,d){const h=wu(r),v=function Wc(t){return!!t.useClass}(r);if(h||v){const N=(v?Fn(r.useClass):r).prototype.ngOnDestroy;if(N){const q=t.destroyHooks||(t.destroyHooks=[]);if(!h&&r.multi){const J=q.indexOf(a);-1===J?q.push(a,[d,N]):q[J+1].push(d,N)}else q.push(a,N)}}}function Ob(t,r,a){return a&&t.componentProviders++,t.multi.push(r)-1}function KC(t,r,a,d){for(let h=a;h<d;h++)if(r[h]===t)return h;return-1}function Y2(t,r,a,d){return XC(this.multi,[])}function Z2(t,r,a,d){const h=this.multi;let v;if(this.providerFactory){const w=this.providerFactory.componentProviders,S=cc(a,a[qt],this.providerFactory.index,d);v=S.slice(0,w),XC(h,v);for(let N=w;N<S.length;N++)v.push(S[N])}else v=[],XC(h,v);return v}function XC(t,r){for(let a=0;a<t.length;a++)r.push((0,t[a])());return r}function Pb(t,r=[]){return a=>{a.providersResolver=(d,h)=>function Q2(t,r,a){const d=Vr();if(d.firstCreatePass){const h=Ca(t);WC(a,d.data,d.blueprint,h,!0),WC(r,d.data,d.blueprint,h,!1)}}(d,h?h(t):t,r)}}let eR=(()=>{class t{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const d=ml(0,a.type),h=d.length>0?dC([d],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,h)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Sn({token:t,providedIn:"environment",factory:()=>new t(Oi(qo))})}return t})();function Nb(t){Qo("NgStandalone"),t.getStandaloneInjector=r=>r.get(eR).getOrCreateStandaloneInjector(t)}function Fb(t,r,a){const d=Gi()+t,h=Dt();return h[d]===X?Cf(h,d,a?r.call(a):r()):function Vv(t,r){return t[r]}(h,d)}function Lb(t,r,a,d){return Ub(Dt(),Gi(),t,r,a,d)}function Vb(t,r,a,d,h){return function jb(t,r,a,d,h,v,w){const S=r+a;return wm(t,S,h,v)?Cf(t,S+2,w?d.call(w,h,v):d(h,v)):Xv(t,S+2)}(Dt(),Gi(),t,r,a,d,h)}function Bb(t,r,a,d,h,v){return function Hb(t,r,a,d,h,v,w,S){const N=r+a;return function Ry(t,r,a,d,h){const v=wm(t,r,a,d);return Js(t,r+2,h)||v}(t,N,h,v,w)?Cf(t,N+3,S?d.call(S,h,v,w):d(h,v,w)):Xv(t,N+3)}(Dt(),Gi(),t,r,a,d,h,v)}function Xv(t,r){const a=t[r];return a===X?void 0:a}function Ub(t,r,a,d,h,v){const w=r+a;return Js(t,w,h)?Cf(t,w+1,v?d.call(v,h):d(h)):Xv(t,w+1)}function zb(t,r){const a=Vr();let d;const h=t+Nn;a.firstCreatePass?(d=function uR(t,r){if(r)for(let a=r.length-1;a>=0;a--){const d=r[a];if(t===d.name)return d}}(r,a.pipeRegistry),a.data[h]=d,d.onDestroy&&(a.destroyHooks??=[]).push(h,d.onDestroy)):d=a.data[h];const v=d.factory||(d.factory=ao(d.type)),S=we(Fe);try{const N=$f(!1),q=v();return $f(N),function V2(t,r,a,d){a>=t.data.length&&(t.data[a]=null,t.blueprint[a]=null),r[a]=d}(a,Dt(),h,q),q}finally{we(S)}}function Wb(t,r,a){const d=t+Nn,h=Dt(),v=oc(h,d);return function Qv(t,r){return t[qt].data[r].pure}(h,d)?Ub(h,Gi(),r,v.transform,a,v):v.transform(a)}function qb(t,r){return tm(t,r)}class uT{constructor(r){this.full=r;const a=r.split(".");this.major=a[0],this.minor=a[1],this.patch=a.slice(2).join(".")}}const kR=new uT("18.0.2");let lT=(()=>{class t{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Sn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const gT=new ar(""),mT=new ar("");let tw,aM=(()=>{class t{constructor(a,d,h){this._ngZone=a,this.registry=d,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,tw||(function cM(t){tw=t}(h),h.addToWindow(d)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb()}});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(a)||(clearTimeout(d.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,d,h){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==v),a()},d)),this._callbacks.push({doneCb:a,timeoutId:v,updateCb:h})}whenStable(a,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,d,h),this._runCallbacksIfReady()}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,d,h){return[]}static#e=this.\u0275fac=function(d){return new(d||t)(Oi(Yo),Oi(_T),Oi(mT))};static#t=this.\u0275prov=Sn({token:t,factory:t.\u0275fac})}return t})(),_T=(()=>{class t{constructor(){this._applications=new Map}registerApplication(a,d){this._applications.set(a,d)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,d=!0){return tw?.findTestabilityInTree(this,a,d)??null}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Sn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function nw(t){return!!t&&"function"==typeof t.then}function vT(t){return!!t&&"function"==typeof t.subscribe}const yT=new ar("");let rw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d}),this.appInits=_n(yT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const h of this.appInits){const v=h();if(nw(v))a.push(v);else if(vT(v)){const w=new Promise((S,N)=>{v.subscribe({complete:S,error:N})});a.push(w)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{d()}).catch(h=>{this.reject(h)}),0===a.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Sn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Yy=new ar("");let Td=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_n(vg),this.afterRenderEffectManager=_n(Pv),this.zonelessEnabled=_n(Ia),this.externalTestViews=new Set,this.beforeRender=new to.B,this.afterTick=new to.B,this.componentTypes=[],this.components=[],this.isStable=_n(Cm).hasPendingTasks.pipe((0,An.T)(a=>!a)),this._injector=_n(qo)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,d){const h=a instanceof I;if(!this._injector.get(rw).done)throw!h&&xr(a),new on(405,!1);let w;w=h?a:this._injector.get(At).resolveComponentFactory(a),this.componentTypes.push(w.componentType);const S=function uM(t){return t.isBoundToModule}(w)?void 0:this._injector.get(Em),q=w.create(Ls.NULL,[],d||w.selector,S),J=q.location.nativeElement,fe=q.injector.get(gT,null);return fe?.registerApplication(J),q.onDestroy(()=>{this.detachView(q.hostView),Zy(this.components,q),fe?.unregisterApplication(J)}),this._loadComponent(q),q}tick(){this._tick(!0)}_tick(a){if(this._runningTick)throw new on(101,!1);const d=Ce(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(a)}catch(h){this.internalErrorHandler(h)}finally{this._runningTick=!1,Ce(d),this.afterTick.next()}}detectChangesInAttachedViews(a){let d=null;this._injector.destroyed||(d=this._injector.get(un,null,{optional:!0}));let h=0;const v=this.afterRenderEffectManager;for(;h<10;){const w=0===h;if(a||!w){this.beforeRender.next(w);for(let{_lView:S,notifyErrorHandler:N}of this._views)dM(S,N,w,this.zonelessEnabled)}else d?.begin?.(),d?.end?.();if(h++,v.executeInternalCallbacks(),!this.allViews.some(({_lView:S})=>ed(S))&&(v.execute(),!this.allViews.some(({_lView:S})=>ed(S))))break}}attachView(a){const d=a;this._views.push(d),d.attachToAppRef(this)}detachView(a){const d=a;Zy(this._views,d),d.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const d=this._injector.get(Yy,[]);[...this._bootstrapListeners,...d].forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Zy(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new on(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Sn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zy(t,r){const a=t.indexOf(r);a>-1&&t.splice(a,1)}function dM(t,r,a,d){(a||ed(t))&&Zg(t,r,a&&!d?0:1)}class fM{constructor(r,a){this.ngModuleFactory=r,this.componentFactories=a}}let hM=(()=>{class t{compileModuleSync(a){return new lC(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const d=this.compileModuleSync(a),v=m(sr(a).declarations).reduce((w,S)=>{const N=Pt(S);return N&&w.push(new Fv(N)),w},[]);return new fM(d,v)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Sn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mM=(()=>{class t{constructor(){this.zone=_n(Yo),this.changeDetectionScheduler=_n(Id),this.applicationRef=_n(Td)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Sn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function iw({ngZoneFactory:t,ignoreChangesOutsideZone:r}){return t??=()=>new Yo(function ow(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}()),[{provide:Yo,useFactory:t},{provide:qs,multi:!0,useFactory:()=>{const a=_n(mM,{optional:!0});return()=>a.initialize()}},{provide:qs,multi:!0,useFactory:()=>{const a=_n(yM);return()=>{a.initialize()}}},{provide:vg,useFactory:vM},!0===r?{provide:Ov,useValue:!0}:[]]}function vM(){const t=_n(Yo),r=_n(Du);return a=>t.runOutsideAngular(()=>r.handleError(a))}let yM=(()=>{class t{constructor(){this.subscription=new lr.yU,this.initialized=!1,this.zone=_n(Yo),this.pendingTasks=_n(Cm)}initialize(){if(this.initialized)return;this.initialized=!0;let a=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(a=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Yo.assertNotInAngularZone(),queueMicrotask(()=>{null!==a&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(a),a=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Yo.assertInAngularZone(),a??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Sn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Jv=(()=>{class t{constructor(){this.appRef=_n(Td),this.taskService=_n(Cm),this.ngZone=_n(Yo),this.zonelessEnabled=_n(Ia),this.disableScheduling=_n(Ov,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new lr.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof KE||!this.zoneIsDefined)}notify(a){if(!this.zonelessEnabled&&5===a)return;switch(a){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const d=this.useMicrotaskScheduler?K_:vm;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=d(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=d(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Yo.isInAngularZone())}tick(a){if(this.runningTick||this.appRef.destroyed)return;const d=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(a)},void 0,this.schedulerTickApplyArgs)}catch(h){throw this.taskService.remove(d),h}finally{this.cleanup()}this.useMicrotaskScheduler=!0,K_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(d)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const a=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(a)}}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Sn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const eE=new ar("",{providedIn:"root",factory:()=>_n(eE,re.Optional|re.SkipSelf)||function EM(){return typeof $localize<"u"&&$localize.locale||m0}()}),CM=new ar("",{providedIn:"root",factory:()=>"USD"}),aw=new ar("");let jp=null;let OT=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=TM}return t})();function TM(t){return function xM(t,r,a){if(Yc(t)&&!a){const d=gr(t.index,r);return new Nu(d,d)}return 47&t.type?new Nu(r[Ai],r):null}(ve(),Dt(),!(16&~t))}class FT{constructor(){}supports(r){return Dy(r)}create(r){return new OM(r)}}const MM=(t,r)=>r;class OM{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||MM}forEachItem(r){let a;for(a=this._itHead;null!==a;a=a._next)r(a)}forEachOperation(r){let a=this._itHead,d=this._removalsHead,h=0,v=null;for(;a||d;){const w=!d||a&&a.currentIndex<VT(d,h,v)?a:d,S=VT(w,h,v),N=w.currentIndex;if(w===d)h--,d=d._nextRemoved;else if(a=a._next,null==w.previousIndex)h++;else{v||(v=[]);const q=S-h,J=N-h;if(q!=J){for(let Se=0;Se<q;Se++){const He=Se<v.length?v[Se]:v[Se]=0,it=He+Se;J<=it&&it<q&&(v[Se]=He+1)}v[w.previousIndex]=J-q}}S!==N&&r(w,S,N)}}forEachPreviousItem(r){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachMovedItem(r){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}forEachIdentityChange(r){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)r(a)}diff(r){if(null==r&&(r=[]),!Dy(r))throw new on(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,v,w,a=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let S=0;S<this.length;S++)v=r[S],w=this._trackByFn(S,v),null!==a&&Object.is(a.trackById,w)?(d&&(a=this._verifyReinsertion(a,v,w,S)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,w,S),d=!0),a=a._next}else h=0,function _S(t,r){if(Array.isArray(t))for(let a=0;a<t.length;a++)r(t[a]);else{const a=t[Symbol.iterator]();let d;for(;!(d=a.next()).done;)r(d.value)}}(r,S=>{w=this._trackByFn(h,S),null!==a&&Object.is(a.trackById,w)?(d&&(a=this._verifyReinsertion(a,S,w,h)),Object.is(a.item,S)||this._addIdentityChange(a,S)):(a=this._mismatch(a,S,w,h),d=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,a,d,h){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._reinsertAfter(r,v,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._moveAfter(r,v,h)):r=this._addAfter(new PM(a,d),v,h),r}_verifyReinsertion(r,a,d,h){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?r=this._reinsertAfter(v,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const a=r._next;this._addToRemovals(this._unlink(r)),r=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,a,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,v=r._nextRemoved;return null===h?this._removalsHead=v:h._nextRemoved=v,null===v?this._removalsTail=h:v._prevRemoved=h,this._insertAfter(r,a,d),this._addToMoves(r,d),r}_moveAfter(r,a,d){return this._unlink(r),this._insertAfter(r,a,d),this._addToMoves(r,d),r}_addAfter(r,a,d){return this._insertAfter(r,a,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,a,d){const h=null===a?this._itHead:a._next;return r._next=h,r._prev=a,null===h?this._itTail=r:h._prev=r,null===a?this._itHead=r:a._next=r,null===this._linkedRecords&&(this._linkedRecords=new LT),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const a=r._prev,d=r._next;return null===a?this._itHead=d:a._next=d,null===d?this._itTail=a:d._prev=a,r}_addToMoves(r,a){return r.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LT),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,a){return r.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class PM{constructor(r,a){this.item=r,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class NM{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,a){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===a||a<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const a=r._prevDup,d=r._nextDup;return null===a?this._head=d:a._nextDup=d,null===d?this._tail=a:d._prevDup=a,null===this._head}}class LT{constructor(){this.map=new Map}put(r){const a=r.trackById;let d=this.map.get(a);d||(d=new NM,this.map.set(a,d)),d.add(r)}get(r,a){const h=this.map.get(r);return h?h.get(r,a):null}remove(r){const a=r.trackById;return this.map.get(a).remove(r)&&this.map.delete(a),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VT(t,r,a){const d=t.previousIndex;if(null===d)return d;let h=0;return a&&d<a.length&&(h=a[d]),d+r+h}class BT{constructor(){}supports(r){return r instanceof Map||fC(r)}create(){return new kM}}class kM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let a;for(a=this._mapHead;null!==a;a=a._next)r(a)}forEachPreviousItem(r){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)r(a)}forEachChangedItem(r){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}diff(r){if(r){if(!(r instanceof Map||fC(r)))throw new on(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,d),this._appendAfter=a,a=a._next;else{const v=this._getOrCreateRecordForKey(h,d);a=this._insertBeforeOrAppend(a,v)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let d=a;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,a){if(r){const d=r._prev;return a._next=r,a._prev=d,r._prev=a,d&&(d._next=a),r===this._mapHead&&(this._mapHead=a),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(r,a){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,a);const v=h._prev,w=h._next;return v&&(v._next=w),w&&(w._prev=v),h._next=null,h._prev=null,h}const d=new FM(r);return this._records.set(r,d),d.currentValue=a,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,a){Object.is(a,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=a,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,a){r instanceof Map?r.forEach(a):Object.keys(r).forEach(d=>a(r[d],d))}}class FM{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UT(){return new hw([new FT])}let hw=(()=>{class t{static#e=this.\u0275prov=Sn({token:t,providedIn:"root",factory:UT});constructor(a){this.factories=a}static create(a,d){if(null!=d){const h=d.factories.slice();a=a.concat(h)}return new t(a)}static extend(a){return{provide:t,useFactory:d=>t.create(a,d||UT()),deps:[[t,new oa,new di]]}}find(a){const d=this.factories.find(h=>h.supports(a));if(null!=d)return d;throw new on(901,!1)}}return t})();function jT(){return new pw([new BT])}let pw=(()=>{class t{static#e=this.\u0275prov=Sn({token:t,providedIn:"root",factory:jT});constructor(a){this.factories=a}static create(a,d){if(d){const h=d.factories.slice();a=a.concat(h)}return new t(a)}static extend(a){return{provide:t,useFactory:d=>t.create(a,d||jT()),deps:[[t,new oa,new di]]}}find(a){const d=this.factories.find(h=>h.supports(a));if(d)return d;throw new on(901,!1)}}return t})();function JM(t){try{const{rootComponent:r,appProviders:a,platformProviders:d}=t,h=function bM(t=[]){if(jp)return jp;const r=function DT(t=[],r){return Ls.create({name:r,providers:[{provide:Wl,useValue:"platform"},{provide:aw,useValue:new Set([()=>jp=null])},...t]})}(t);return jp=r,function ET(){!function Un(t){gt=t}(()=>{throw new on(600,!1)})}(),function RT(t){t.get(r_,null)?.forEach(a=>a())}(r),r}(d),v=[iw({}),{provide:Id,useExisting:Jv},...a||[]],S=new gI({providers:v,parent:h,debugName:"",runEnvironmentInitializers:!1}).injector,N=S.get(Yo);return N.run(()=>{S.resolveInjectorInitializers();const q=S.get(Du,null);let J;N.runOutsideAngular(()=>{J=N.onError.subscribe({next:He=>{q.handleError(He)}})});const fe=()=>S.destroy(),Se=h.get(aw);return Se.add(fe),S.onDestroy(()=>{J.unsubscribe(),Se.delete(fe)}),function CT(t,r,a){try{const d=a();return nw(d)?d.catch(h=>{throw r.runOutsideAngular(()=>t.handleError(h)),h}):d}catch(d){throw r.runOutsideAngular(()=>t.handleError(d)),d}}(q,N,()=>{const He=S.get(rw);return He.runInitializers(),He.donePromise.then(()=>{!function SA(t){"string"==typeof t&&(xA=t.toLowerCase().replace(/_/g,"-"))}(S.get(eE,m0)||m0);const Rt=S.get(Td);return void 0!==r&&Rt.bootstrap(r),Rt})})})}catch(r){return Promise.reject(r)}}function EO(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function wO(t){const r=Ce(null);try{return t()}finally{Ce(r)}}function SO(t){const r=Pt(t);if(!r)return null;const a=new Fv(r);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7440:(yn,wt,ie)=>{ie.d(wt,{MW:()=>pt,Wp:()=>tn,XU:()=>Be,gL:()=>Ze});var D=ie(2214),T=ie(3953),L=ie(3586);class Be{constructor(kt){return kt}}class Ze{constructor(){return(0,D.Dk)()}}const Et=new T.nKC("angularfire2._apps"),rt={provide:Be,useFactory:function Ke(Ct){return Ct&&1===Ct.length?Ct[0]:new Be((0,D.Sx)())},deps:[[new T.Xx1,Et]]},me={provide:Ze,deps:[[new T.Xx1,Et]]};function Ae(Ct){return(kt,Ht)=>{const Xt=Ht.get(T.Agw);(0,D.KO)("angularfire",L.xv.full,"core"),(0,D.KO)("angularfire",L.xv.full,"app"),(0,D.KO)("angular",T.xvI.full,Xt.toString());const Qt=kt.runOutsideAngular(()=>Ct(Ht));return new Be(Qt)}}function pt(Ct,...kt){return(0,T.EmA)([rt,me,{provide:Et,useFactory:Ae(Ct),multi:!0,deps:[T.SKi,T.zZn,L.u0,...kt]}])}const tn=(0,L.S3)(D.Wp,!0)},6335:(yn,wt,ie)=>{ie.d(wt,{Nj:()=>Ae,DF:()=>Pe,wh:()=>Tt,eJ:()=>xn,xI:()=>gt,_q:()=>Tn,x9:()=>dn,df:()=>ki,r7:()=>ri});var D=ie(3586),T=ie(3953),L=ie(7440),Be=ie(2214),Ze=ie(6114),Ce=ie(1985);function Ke(Cr){return new Ce.c(function(he){return{unsubscribe:(0,Ze.hg)(Cr,he.next.bind(he),he.error.bind(he),he.complete.bind(he))}})}class Ae{constructor(he){return he}}class Pe{constructor(){return(0,D.CA)("auth")}}const Ue=new T.nKC("angularfire2.auth-instances");function Mt(Cr){return(he,tt)=>{const Te=he.runOutsideAngular(()=>Cr(tt));return new Ae(Te)}}const tn={provide:Pe,deps:[[new T.Xx1,Ue]]},Nt={provide:Ae,useFactory:function It(Cr,he){const tt=(0,D.lR)("auth",Cr,he);return tt&&new Ae(tt)},deps:[[new T.Xx1,Ue],L.XU]};function Tn(Cr,...he){return(0,Be.KO)("angularfire",D.xv.full,"auth"),(0,T.EmA)([Nt,tn,{provide:Ue,useFactory:Mt(Cr),multi:!0,deps:[T.SKi,T.zZn,D.u0,L.gL,[new T.Xx1,D.Jv],...he]}])}const Tt=(0,D.S3)(Ke,!0),xn=(0,D.S3)(Ze.eJ,!0),gt=(0,D.S3)(Ze.xI,!0),dn=(0,D.S3)(Ze.x9,!0),ki=(0,D.S3)(Ze.df,!0),ri=(0,D.S3)(Ze.r7,!0)},2418:(yn,wt,ie)=>{ie.d(wt,{_7:()=>ff,gS:()=>R1,rJ:()=>Ap,xs:()=>sv,kd:()=>s,H9:()=>m,x7:()=>Le,GG:()=>at,aU:()=>Jt,hV:()=>iv,P:()=>N1,BN:()=>AE,mZ:()=>F1,_M:()=>Gg});var pt,Ue,D=ie(3586),T=ie(3953),L=ie(7440),Be=ie(6335),Ze=ie(2214),Ce=ie(467),Ke=ie(7852),Et=ie(1362),rt=ie(8041),me=ie(1076),Ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pe={};(function(){var p;function f(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function _(et,Oe,$e){$e||($e=0);var nt=Array(16);if("string"==typeof Oe)for(var st=0;16>st;++st)nt[st]=Oe.charCodeAt($e++)|Oe.charCodeAt($e++)<<8|Oe.charCodeAt($e++)<<16|Oe.charCodeAt($e++)<<24;else for(st=0;16>st;++st)nt[st]=Oe[$e++]|Oe[$e++]<<8|Oe[$e++]<<16|Oe[$e++]<<24;var yt=et.g[3],je=(Oe=et.g[0])+(yt^($e=et.g[1])&((st=et.g[2])^yt))+nt[0]+3614090360&4294967295;je=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=($e=(st=(yt=(Oe=$e+(je<<7&4294967295|je>>>25))+((je=yt+(st^Oe&($e^st))+nt[1]+3905402710&4294967295)<<12&4294967295|je>>>20))+((je=st+($e^yt&(Oe^$e))+nt[2]+606105819&4294967295)<<17&4294967295|je>>>15))+((je=$e+(Oe^st&(yt^Oe))+nt[3]+3250441966&4294967295)<<22&4294967295|je>>>10))+((je=Oe+(yt^$e&(st^yt))+nt[4]+4118548399&4294967295)<<7&4294967295|je>>>25))+((je=yt+(st^Oe&($e^st))+nt[5]+1200080426&4294967295)<<12&4294967295|je>>>20))+((je=st+($e^yt&(Oe^$e))+nt[6]+2821735955&4294967295)<<17&4294967295|je>>>15))+((je=$e+(Oe^st&(yt^Oe))+nt[7]+4249261313&4294967295)<<22&4294967295|je>>>10))+((je=Oe+(yt^$e&(st^yt))+nt[8]+1770035416&4294967295)<<7&4294967295|je>>>25))+((je=yt+(st^Oe&($e^st))+nt[9]+2336552879&4294967295)<<12&4294967295|je>>>20))+((je=st+($e^yt&(Oe^$e))+nt[10]+4294925233&4294967295)<<17&4294967295|je>>>15))+((je=$e+(Oe^st&(yt^Oe))+nt[11]+2304563134&4294967295)<<22&4294967295|je>>>10))+((je=Oe+(yt^$e&(st^yt))+nt[12]+1804603682&4294967295)<<7&4294967295|je>>>25))+((je=yt+(st^Oe&($e^st))+nt[13]+4254626195&4294967295)<<12&4294967295|je>>>20))+((je=st+($e^yt&(Oe^$e))+nt[14]+2792965006&4294967295)<<17&4294967295|je>>>15))+((je=$e+(Oe^st&(yt^Oe))+nt[15]+1236535329&4294967295)<<22&4294967295|je>>>10))+((je=Oe+(st^yt&($e^st))+nt[1]+4129170786&4294967295)<<5&4294967295|je>>>27))+((je=yt+($e^st&(Oe^$e))+nt[6]+3225465664&4294967295)<<9&4294967295|je>>>23))+((je=st+(Oe^$e&(yt^Oe))+nt[11]+643717713&4294967295)<<14&4294967295|je>>>18))+((je=$e+(yt^Oe&(st^yt))+nt[0]+3921069994&4294967295)<<20&4294967295|je>>>12))+((je=Oe+(st^yt&($e^st))+nt[5]+3593408605&4294967295)<<5&4294967295|je>>>27))+((je=yt+($e^st&(Oe^$e))+nt[10]+38016083&4294967295)<<9&4294967295|je>>>23))+((je=st+(Oe^$e&(yt^Oe))+nt[15]+3634488961&4294967295)<<14&4294967295|je>>>18))+((je=$e+(yt^Oe&(st^yt))+nt[4]+3889429448&4294967295)<<20&4294967295|je>>>12))+((je=Oe+(st^yt&($e^st))+nt[9]+568446438&4294967295)<<5&4294967295|je>>>27))+((je=yt+($e^st&(Oe^$e))+nt[14]+3275163606&4294967295)<<9&4294967295|je>>>23))+((je=st+(Oe^$e&(yt^Oe))+nt[3]+4107603335&4294967295)<<14&4294967295|je>>>18))+((je=$e+(yt^Oe&(st^yt))+nt[8]+1163531501&4294967295)<<20&4294967295|je>>>12))+((je=Oe+(st^yt&($e^st))+nt[13]+2850285829&4294967295)<<5&4294967295|je>>>27))+((je=yt+($e^st&(Oe^$e))+nt[2]+4243563512&4294967295)<<9&4294967295|je>>>23))+((je=st+(Oe^$e&(yt^Oe))+nt[7]+1735328473&4294967295)<<14&4294967295|je>>>18))+((je=$e+(yt^Oe&(st^yt))+nt[12]+2368359562&4294967295)<<20&4294967295|je>>>12))+((je=Oe+($e^st^yt)+nt[5]+4294588738&4294967295)<<4&4294967295|je>>>28))+((je=yt+(Oe^$e^st)+nt[8]+2272392833&4294967295)<<11&4294967295|je>>>21))+((je=st+(yt^Oe^$e)+nt[11]+1839030562&4294967295)<<16&4294967295|je>>>16))+((je=$e+(st^yt^Oe)+nt[14]+4259657740&4294967295)<<23&4294967295|je>>>9))+((je=Oe+($e^st^yt)+nt[1]+2763975236&4294967295)<<4&4294967295|je>>>28))+((je=yt+(Oe^$e^st)+nt[4]+1272893353&4294967295)<<11&4294967295|je>>>21))+((je=st+(yt^Oe^$e)+nt[7]+4139469664&4294967295)<<16&4294967295|je>>>16))+((je=$e+(st^yt^Oe)+nt[10]+3200236656&4294967295)<<23&4294967295|je>>>9))+((je=Oe+($e^st^yt)+nt[13]+681279174&4294967295)<<4&4294967295|je>>>28))+((je=yt+(Oe^$e^st)+nt[0]+3936430074&4294967295)<<11&4294967295|je>>>21))+((je=st+(yt^Oe^$e)+nt[3]+3572445317&4294967295)<<16&4294967295|je>>>16))+((je=$e+(st^yt^Oe)+nt[6]+76029189&4294967295)<<23&4294967295|je>>>9))+((je=Oe+($e^st^yt)+nt[9]+3654602809&4294967295)<<4&4294967295|je>>>28))+((je=yt+(Oe^$e^st)+nt[12]+3873151461&4294967295)<<11&4294967295|je>>>21))+((je=st+(yt^Oe^$e)+nt[15]+530742520&4294967295)<<16&4294967295|je>>>16))+((je=$e+(st^yt^Oe)+nt[2]+3299628645&4294967295)<<23&4294967295|je>>>9))+((je=Oe+(st^($e|~yt))+nt[0]+4096336452&4294967295)<<6&4294967295|je>>>26))+((je=yt+($e^(Oe|~st))+nt[7]+1126891415&4294967295)<<10&4294967295|je>>>22))+((je=st+(Oe^(yt|~$e))+nt[14]+2878612391&4294967295)<<15&4294967295|je>>>17))+((je=$e+(yt^(st|~Oe))+nt[5]+4237533241&4294967295)<<21&4294967295|je>>>11))+((je=Oe+(st^($e|~yt))+nt[12]+1700485571&4294967295)<<6&4294967295|je>>>26))+((je=yt+($e^(Oe|~st))+nt[3]+2399980690&4294967295)<<10&4294967295|je>>>22))+((je=st+(Oe^(yt|~$e))+nt[10]+4293915773&4294967295)<<15&4294967295|je>>>17))+((je=$e+(yt^(st|~Oe))+nt[1]+2240044497&4294967295)<<21&4294967295|je>>>11))+((je=Oe+(st^($e|~yt))+nt[8]+1873313359&4294967295)<<6&4294967295|je>>>26))+((je=yt+($e^(Oe|~st))+nt[15]+4264355552&4294967295)<<10&4294967295|je>>>22))+((je=st+(Oe^(yt|~$e))+nt[6]+2734768916&4294967295)<<15&4294967295|je>>>17))+((je=$e+(yt^(st|~Oe))+nt[13]+1309151649&4294967295)<<21&4294967295|je>>>11))+((yt=(Oe=$e+((je=Oe+(st^($e|~yt))+nt[4]+4149444226&4294967295)<<6&4294967295|je>>>26))+((je=yt+($e^(Oe|~st))+nt[11]+3174756917&4294967295)<<10&4294967295|je>>>22))^((st=yt+((je=st+(Oe^(yt|~$e))+nt[2]+718787259&4294967295)<<15&4294967295|je>>>17))|~Oe))+nt[9]+3951481745&4294967295,et.g[0]=et.g[0]+Oe&4294967295,et.g[1]=et.g[1]+(st+(je<<21&4294967295|je>>>11))&4294967295,et.g[2]=et.g[2]+st&4294967295,et.g[3]=et.g[3]+yt&4294967295}function x(et,Oe){this.h=Oe;for(var $e=[],nt=!0,st=et.length-1;0<=st;st--){var yt=0|et[st];nt&&yt==Oe||($e[st]=yt,nt=!1)}this.g=$e}(function o(et,Oe){function $e(){}$e.prototype=Oe.prototype,et.D=Oe.prototype,et.prototype=new $e,et.prototype.constructor=et,et.C=function(nt,st,yt){for(var je=Array(arguments.length-2),vd=2;vd<arguments.length;vd++)je[vd-2]=arguments[vd];return Oe.prototype[st].apply(nt,je)}})(f,function u(){this.blockSize=-1}),f.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},f.prototype.u=function(et,Oe){void 0===Oe&&(Oe=et.length);for(var $e=Oe-this.blockSize,nt=this.B,st=this.h,yt=0;yt<Oe;){if(0==st)for(;yt<=$e;)_(this,et,yt),yt+=this.blockSize;if("string"==typeof et){for(;yt<Oe;)if(nt[st++]=et.charCodeAt(yt++),st==this.blockSize){_(this,nt),st=0;break}}else for(;yt<Oe;)if(nt[st++]=et[yt++],st==this.blockSize){_(this,nt),st=0;break}}this.h=st,this.o+=Oe},f.prototype.v=function(){var et=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);et[0]=128;for(var Oe=1;Oe<et.length-8;++Oe)et[Oe]=0;var $e=8*this.o;for(Oe=et.length-8;Oe<et.length;++Oe)et[Oe]=255&$e,$e/=256;for(this.u(et),et=Array(16),Oe=$e=0;4>Oe;++Oe)for(var nt=0;32>nt;nt+=8)et[$e++]=this.g[Oe]>>>nt&255;return et};var V={};function G(et){return-128<=et&&128>et?function C(et,Oe){var $e=V;return Object.prototype.hasOwnProperty.call($e,et)?$e[et]:$e[et]=Oe(et)}(et,function(Oe){return new x([0|Oe],0>Oe?-1:0)}):new x([0|et],0>et?-1:0)}function X(et){if(isNaN(et)||!isFinite(et))return Ie;if(0>et)return Gt(X(-et));for(var Oe=[],$e=1,nt=0;et>=$e;nt++)Oe[nt]=et/$e|0,$e*=4294967296;return new x(Oe,0)}var Ie=G(0),Fe=G(1),ht=G(16777216);function Ut(et){if(0!=et.h)return!1;for(var Oe=0;Oe<et.g.length;Oe++)if(0!=et.g[Oe])return!1;return!0}function en(et){return-1==et.h}function Gt(et){for(var Oe=et.g.length,$e=[],nt=0;nt<Oe;nt++)$e[nt]=~et.g[nt];return new x($e,~et.h).add(Fe)}function Rn(et,Oe){return et.add(Gt(Oe))}function Xn(et,Oe){for(;(65535&et[Oe])!=et[Oe];)et[Oe+1]+=et[Oe]>>>16,et[Oe]&=65535,Oe++}function Ln(et,Oe){this.g=et,this.h=Oe}function yr(et,Oe){if(Ut(Oe))throw Error("division by zero");if(Ut(et))return new Ln(Ie,Ie);if(en(et))return Oe=yr(Gt(et),Oe),new Ln(Gt(Oe.g),Gt(Oe.h));if(en(Oe))return Oe=yr(et,Gt(Oe)),new Ln(Gt(Oe.g),Oe.h);if(30<et.g.length){if(en(et)||en(Oe))throw Error("slowDivide_ only works with positive integers.");for(var $e=Fe,nt=Oe;0>=nt.l(et);)$e=hi($e),nt=hi(nt);var st=Fr($e,1),yt=Fr(nt,1);for(nt=Fr(nt,2),$e=Fr($e,2);!Ut(nt);){var je=yt.add(nt);0>=je.l(et)&&(st=st.add($e),yt=je),nt=Fr(nt,1),$e=Fr($e,1)}return Oe=Rn(et,st.j(Oe)),new Ln(st,Oe)}for(st=Ie;0<=et.l(Oe);){for($e=Math.max(1,Math.floor(et.m()/Oe.m())),nt=48>=(nt=Math.ceil(Math.log($e)/Math.LN2))?1:Math.pow(2,nt-48),je=(yt=X($e)).j(Oe);en(je)||0<je.l(et);)je=(yt=X($e-=nt)).j(Oe);Ut(yt)&&(yt=Fe),st=st.add(yt),et=Rn(et,je)}return new Ln(st,et)}function hi(et){for(var Oe=et.g.length+1,$e=[],nt=0;nt<Oe;nt++)$e[nt]=et.i(nt)<<1|et.i(nt-1)>>>31;return new x($e,et.h)}function Fr(et,Oe){var $e=Oe>>5;Oe%=32;for(var nt=et.g.length-$e,st=[],yt=0;yt<nt;yt++)st[yt]=0<Oe?et.i(yt+$e)>>>Oe|et.i(yt+$e+1)<<32-Oe:et.i(yt+$e);return new x(st,et.h)}(p=x.prototype).m=function(){if(en(this))return-Gt(this).m();for(var et=0,Oe=1,$e=0;$e<this.g.length;$e++){var nt=this.i($e);et+=(0<=nt?nt:4294967296+nt)*Oe,Oe*=4294967296}return et},p.toString=function(et){if(2>(et=et||10)||36<et)throw Error("radix out of range: "+et);if(Ut(this))return"0";if(en(this))return"-"+Gt(this).toString(et);for(var Oe=X(Math.pow(et,6)),$e=this,nt="";;){var st=yr($e,Oe).g,yt=((0<($e=Rn($e,st.j(Oe))).g.length?$e.g[0]:$e.h)>>>0).toString(et);if(Ut($e=st))return yt+nt;for(;6>yt.length;)yt="0"+yt;nt=yt+nt}},p.i=function(et){return 0>et?0:et<this.g.length?this.g[et]:this.h},p.l=function(et){return en(et=Rn(this,et))?-1:Ut(et)?0:1},p.abs=function(){return en(this)?Gt(this):this},p.add=function(et){for(var Oe=Math.max(this.g.length,et.g.length),$e=[],nt=0,st=0;st<=Oe;st++){var yt=nt+(65535&this.i(st))+(65535&et.i(st)),je=(yt>>>16)+(this.i(st)>>>16)+(et.i(st)>>>16);nt=je>>>16,$e[st]=(je&=65535)<<16|(yt&=65535)}return new x($e,-2147483648&$e[$e.length-1]?-1:0)},p.j=function(et){if(Ut(this)||Ut(et))return Ie;if(en(this))return en(et)?Gt(this).j(Gt(et)):Gt(Gt(this).j(et));if(en(et))return Gt(this.j(Gt(et)));if(0>this.l(ht)&&0>et.l(ht))return X(this.m()*et.m());for(var Oe=this.g.length+et.g.length,$e=[],nt=0;nt<2*Oe;nt++)$e[nt]=0;for(nt=0;nt<this.g.length;nt++)for(var st=0;st<et.g.length;st++){var yt=this.i(nt)>>>16,je=65535&this.i(nt),vd=et.i(st)>>>16,$g=65535&et.i(st);$e[2*nt+2*st]+=je*$g,Xn($e,2*nt+2*st),$e[2*nt+2*st+1]+=yt*$g,Xn($e,2*nt+2*st+1),$e[2*nt+2*st+1]+=je*vd,Xn($e,2*nt+2*st+1),$e[2*nt+2*st+2]+=yt*vd,Xn($e,2*nt+2*st+2)}for(nt=0;nt<Oe;nt++)$e[nt]=$e[2*nt+1]<<16|$e[2*nt];for(nt=Oe;nt<2*Oe;nt++)$e[nt]=0;return new x($e,0)},p.A=function(et){return yr(this,et).h},p.and=function(et){for(var Oe=Math.max(this.g.length,et.g.length),$e=[],nt=0;nt<Oe;nt++)$e[nt]=this.i(nt)&et.i(nt);return new x($e,this.h&et.h)},p.or=function(et){for(var Oe=Math.max(this.g.length,et.g.length),$e=[],nt=0;nt<Oe;nt++)$e[nt]=this.i(nt)|et.i(nt);return new x($e,this.h|et.h)},p.xor=function(et){for(var Oe=Math.max(this.g.length,et.g.length),$e=[],nt=0;nt<Oe;nt++)$e[nt]=this.i(nt)^et.i(nt);return new x($e,this.h^et.h)},f.prototype.digest=f.prototype.v,f.prototype.reset=f.prototype.s,f.prototype.update=f.prototype.u,Ue=Pe.Md5=f,x.prototype.add=x.prototype.add,x.prototype.multiply=x.prototype.j,x.prototype.modulo=x.prototype.A,x.prototype.compare=x.prototype.l,x.prototype.toNumber=x.prototype.m,x.prototype.toString=x.prototype.toString,x.prototype.getBits=x.prototype.i,x.fromNumber=X,x.fromString=function ce(et,Oe){if(0==et.length)throw Error("number format error: empty string");if(2>(Oe=Oe||10)||36<Oe)throw Error("radix out of range: "+Oe);if("-"==et.charAt(0))return Gt(ce(et.substring(1),Oe));if(0<=et.indexOf("-"))throw Error('number format error: interior "-" character');for(var $e=X(Math.pow(Oe,8)),nt=Ie,st=0;st<et.length;st+=8){var yt=Math.min(8,et.length-st),je=parseInt(et.substring(st,st+yt),Oe);8>yt?(yt=X(Math.pow(Oe,yt)),nt=nt.j(yt).add(X(je))):nt=(nt=nt.j($e)).add(X(je))}return nt},pt=Pe.Integer=x}).apply(typeof Ae<"u"?Ae:typeof self<"u"?self:typeof window<"u"?window:{});var tn,Nt,On,Tn,Tt,Ct,kt,Ht,Xt,It=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mt={};(function(){var p,o="function"==typeof Object.defineProperties?Object.defineProperty:function(I,$,ee){return I==Array.prototype||I==Object.prototype||(I[$]=ee.value),I},f=function u(I){I=["object"==typeof globalThis&&globalThis,I,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof It&&It];for(var $=0;$<I.length;++$){var ee=I[$];if(ee&&ee.Math==Math)return ee}throw Error("Cannot find global object")}(this);!function _(I,$){if($)e:{var ee=f;I=I.split(".");for(var ge=0;ge<I.length-1;ge++){var ct=I[ge];if(!(ct in ee))break e;ee=ee[ct]}($=$(ge=ee[I=I[I.length-1]]))!=ge&&null!=$&&o(ee,I,{configurable:!0,writable:!0,value:$})}}("Array.prototype.values",function(I){return I||function(){return function C(I,$){I instanceof String&&(I+="");var ee=0,ge=!1,ct={next:function(){if(!ge&&ee<I.length){var At=ee++;return{value:$(At,I[At]),done:!1}}return ge=!0,{done:!0,value:void 0}}};return ct[Symbol.iterator]=function(){return ct},ct}(this,function($,ee){return ee})}});var x=x||{},V=this||self;function G(I){var $=typeof I;return"array"==($="object"!=$?$:I?Array.isArray(I)?"array":$:"null")||"object"==$&&"number"==typeof I.length}function X(I){var $=typeof I;return"object"==$&&null!=I||"function"==$}function ce(I,$,ee){return I.call.apply(I.bind,arguments)}function Ie(I,$,ee){if(!I)throw Error();if(2<arguments.length){var ge=Array.prototype.slice.call(arguments,2);return function(){var ct=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ct,ge),I.apply($,ct)}}return function(){return I.apply($,arguments)}}function Fe(I,$,ee){return(Fe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ce:Ie).apply(null,arguments)}function ht(I,$){var ee=Array.prototype.slice.call(arguments,1);return function(){var ge=ee.slice();return ge.push.apply(ge,arguments),I.apply(this,ge)}}function Ut(I,$){function ee(){}ee.prototype=$.prototype,I.aa=$.prototype,I.prototype=new ee,I.prototype.constructor=I,I.Qb=function(ge,ct,At){for(var un=Array(arguments.length-2),co=2;co<arguments.length;co++)un[co-2]=arguments[co];return $.prototype[ct].apply(ge,un)}}function en(I){const $=I.length;if(0<$){const ee=Array($);for(let ge=0;ge<$;ge++)ee[ge]=I[ge];return ee}return[]}function Gt(I,$){for(let ee=1;ee<arguments.length;ee++){const ge=arguments[ee];if(G(ge)){const ct=I.length||0,At=ge.length||0;I.length=ct+At;for(let un=0;un<At;un++)I[ct+un]=ge[un]}else I.push(ge)}}function Xn(I){return/^[\s\xa0]*$/.test(I)}function Ln(){var I=V.navigator;return I&&(I=I.userAgent)?I:""}function yr(I){return yr[" "](I),I}yr[" "]=function(){};var hi=!(-1==Ln().indexOf("Gecko")||-1!=Ln().toLowerCase().indexOf("webkit")&&-1==Ln().indexOf("Edge")||-1!=Ln().indexOf("Trident")||-1!=Ln().indexOf("MSIE")||-1!=Ln().indexOf("Edge"));function Fr(I,$,ee){for(const ge in I)$.call(ee,I[ge],ge,I)}function Oe(I){const $={};for(const ee in I)$[ee]=I[ee];return $}const $e="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nt(I,$){let ee,ge;for(let ct=1;ct<arguments.length;ct++){for(ee in ge=arguments[ct],ge)I[ee]=ge[ee];for(let At=0;At<$e.length;At++)ee=$e[At],Object.prototype.hasOwnProperty.call(ge,ee)&&(I[ee]=ge[ee])}}function st(I){var $=1;I=I.split(":");const ee=[];for(;0<$&&I.length;)ee.push(I.shift()),$--;return I.length&&ee.push(I.join(":")),ee}function yt(I){V.setTimeout(()=>{throw I},0)}function je(){var I=D_;let $=null;return I.g&&($=I.g,I.g=I.g.next,I.g||(I.h=null),$.next=null),$}var $g=new class Rn{constructor($,ee){this.i=$,this.j=ee,this.h=0,this.g=null}get(){let $;return 0<this.h?(this.h--,$=this.g,this.g=$.next,$.next=null):$=this.i(),$}}(()=>new RE,I=>I.reset());class RE{constructor(){this.next=this.g=this.h=null}set($,ee){this.h=$,this.g=ee,this.next=null}reset(){this.next=this.g=this.h=null}}let zg,xp=!1,D_=new class vd{constructor(){this.h=this.g=null}add($,ee){const ge=$g.get();ge.set($,ee),this.h?this.h.next=ge:this.g=ge,this.h=ge}},V1=()=>{const I=V.Promise.resolve(void 0);zg=()=>{I.then(ME)}};var ME=()=>{for(var I;I=je();){try{I.h.call(I.g)}catch(ee){yt(ee)}var $=$g;$.j(I),100>$.h&&($.h++,I.next=$.g,$.g=I)}xp=!1};function ws(){this.s=this.s,this.C=this.C}function Ga(I,$){this.type=I,this.g=this.target=$,this.defaultPrevented=!1}ws.prototype.s=!1,ws.prototype.ma=function(){this.s||(this.s=!0,this.N())},ws.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Ga.prototype.h=function(){this.defaultPrevented=!0};var OE=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var I=!1,$=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const ee=()=>{};V.addEventListener("test",ee,$),V.removeEventListener("test",ee,$)}catch{}return I}();function R_(I,$){if(Ga.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var ee=this.type=I.type,ge=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=$,$=I.relatedTarget){if(hi){e:{try{yr($.nodeName);var ct=!0;break e}catch{}ct=!1}ct||($=null)}}else"mouseover"==ee?$=I.fromElement:"mouseout"==ee&&($=I.toElement);this.relatedTarget=$,ge?(this.clientX=void 0!==ge.clientX?ge.clientX:ge.pageX,this.clientY=void 0!==ge.clientY?ge.clientY:ge.pageY,this.screenX=ge.screenX||0,this.screenY=ge.screenY||0):(this.clientX=void 0!==I.clientX?I.clientX:I.pageX,this.clientY=void 0!==I.clientY?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType="string"==typeof I.pointerType?I.pointerType:uv[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&R_.aa.h.call(this)}}Ut(R_,Ga);var uv={2:"touch",3:"pen",4:"mouse"};R_.prototype.h=function(){R_.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var Sp="closure_listenable_"+(1e6*Math.random()|0),PE=0;function NE(I,$,ee,ge,ct){this.listener=I,this.proxy=null,this.src=$,this.type=ee,this.capture=!!ge,this.ha=ct,this.key=++PE,this.da=this.fa=!1}function M_(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function Wg(I){this.src=I,this.g={},this.h=0}function lv(I,$){var ee=$.type;if(ee in I.g){var At,ge=I.g[ee],ct=Array.prototype.indexOf.call(ge,$,void 0);(At=0<=ct)&&Array.prototype.splice.call(ge,ct,1),At&&(M_($),0==I.g[ee].length&&(delete I.g[ee],I.h--))}}function dv(I,$,ee,ge){for(var ct=0;ct<I.length;++ct){var At=I[ct];if(!At.da&&At.listener==$&&At.capture==!!ee&&At.ha==ge)return ct}return-1}Wg.prototype.add=function(I,$,ee,ge,ct){var At=I.toString();(I=this.g[At])||(I=this.g[At]=[],this.h++);var un=dv(I,$,ge,ct);return-1<un?($=I[un],ee||($.fa=!1)):(($=new NE($,this.src,At,!!ge,ct)).fa=ee,I.push($)),$};var qg="closure_lm_"+(1e6*Math.random()|0),fv={};function B1(I,$,ee,ge,ct){if(ge&&ge.once)return j1(I,$,ee,ge,ct);if(Array.isArray($)){for(var At=0;At<$.length;At++)B1(I,$[At],ee,ge,ct);return null}return ee=Dp(ee),I&&I[Sp]?I.K($,ee,X(ge)?!!ge.capture:!!ge,ct):U1(I,$,ee,!1,ge,ct)}function U1(I,$,ee,ge,ct,At){if(!$)throw Error("Invalid event type");var un=X(ct)?!!ct.capture:!!ct,co=O_(I);if(co||(I[qg]=co=new Wg(I)),(ee=co.add($,ee,ge,un,At)).proxy)return ee;if(ge=function kE(){const $=FE;return function I(ee){return $.call(I.src,I.listener,ee)}}(),ee.proxy=ge,ge.src=I,ge.listener=ee,I.addEventListener)OE||(ct=un),void 0===ct&&(ct=!1),I.addEventListener($.toString(),ge,ct);else if(I.attachEvent)I.attachEvent(H1($.toString()),ge);else{if(!I.addListener||!I.removeListener)throw Error("addEventListener and attachEvent are unavailable.");I.addListener(ge)}return ee}function j1(I,$,ee,ge,ct){if(Array.isArray($)){for(var At=0;At<$.length;At++)j1(I,$[At],ee,ge,ct);return null}return ee=Dp(ee),I&&I[Sp]?I.L($,ee,X(ge)?!!ge.capture:!!ge,ct):U1(I,$,ee,!0,ge,ct)}function il(I,$,ee,ge,ct){if(Array.isArray($))for(var At=0;At<$.length;At++)il(I,$[At],ee,ge,ct);else ge=X(ge)?!!ge.capture:!!ge,ee=Dp(ee),I&&I[Sp]?(I=I.i,($=String($).toString())in I.g&&-1<(ee=dv(At=I.g[$],ee,ge,ct))&&(M_(At[ee]),Array.prototype.splice.call(At,ee,1),0==At.length&&(delete I.g[$],I.h--))):I&&(I=O_(I))&&($=I.g[$.toString()],I=-1,$&&(I=dv($,ee,ge,ct)),(ee=-1<I?$[I]:null)&&Kg(ee))}function Kg(I){if("number"!=typeof I&&I&&!I.da){var $=I.src;if($&&$[Sp])lv($.i,I);else{var ee=I.type,ge=I.proxy;$.removeEventListener?$.removeEventListener(ee,ge,I.capture):$.detachEvent?$.detachEvent(H1(ee),ge):$.addListener&&$.removeListener&&$.removeListener(ge),(ee=O_($))?(lv(ee,I),0==ee.h&&(ee.src=null,$[qg]=null)):M_(I)}}}function H1(I){return I in fv?fv[I]:fv[I]="on"+I}function FE(I,$){if(I.da)I=!0;else{$=new R_($,this);var ee=I.listener,ge=I.ha||I.src;I.fa&&Kg(I),I=ee.call(ge,$)}return I}function O_(I){return(I=I[qg])instanceof Wg?I:null}var P_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dp(I){return"function"==typeof I?I:(I[P_]||(I[P_]=function($){return I.handleEvent($)}),I[P_])}function sa(){ws.call(this),this.i=new Wg(this),this.M=this,this.F=null}function Nc(I,$){var ee,ge=I.F;if(ge)for(ee=[];ge;ge=ge.F)ee.push(ge);if(I=I.M,ge=$.type||$,"string"==typeof $)$=new Ga($,I);else if($ instanceof Ga)$.target=$.target||I;else{var ct=$;nt($=new Ga(ge,I),ct)}if(ct=!0,ee)for(var At=ee.length-1;0<=At;At--){var un=$.g=ee[At];ct=Xg(un,ge,!0,$)&&ct}if(ct=Xg(un=$.g=I,ge,!0,$)&&ct,ct=Xg(un,ge,!1,$)&&ct,ee)for(At=0;At<ee.length;At++)ct=Xg(un=$.g=ee[At],ge,!1,$)&&ct}function Xg(I,$,ee,ge){if(!($=I.i.g[String($)]))return!0;$=$.concat();for(var ct=!0,At=0;At<$.length;++At){var un=$[At];if(un&&!un.da&&un.capture==ee){var co=un.listener,Aa=un.ha||un.src;un.fa&&lv(I.i,un),ct=!1!==co.call(Aa,ge)&&ct}}return ct&&!ge.defaultPrevented}function hv(I,$,ee){if("function"==typeof I)ee&&(I=Fe(I,ee));else{if(!I||"function"!=typeof I.handleEvent)throw Error("Invalid listener argument");I=Fe(I.handleEvent,I)}return 2147483647<Number($)?-1:V.setTimeout(I,$||0)}function pv(I){I.g=hv(()=>{I.g=null,I.i&&(I.i=!1,pv(I))},I.l);const $=I.h;I.h=null,I.m.apply(null,$)}Ut(sa,ws),sa.prototype[Sp]=!0,sa.prototype.removeEventListener=function(I,$,ee,ge){il(this,I,$,ee,ge)},sa.prototype.N=function(){if(sa.aa.N.call(this),this.i){var $,I=this.i;for($ in I.g){for(var ee=I.g[$],ge=0;ge<ee.length;ge++)M_(ee[ge]);delete I.g[$],I.h--}}this.F=null},sa.prototype.K=function(I,$,ee,ge){return this.i.add(String(I),$,!1,ee,ge)},sa.prototype.L=function(I,$,ee,ge){return this.i.add(String(I),$,!0,ee,ge)};class N_ extends ws{constructor($,ee){super(),this.m=$,this.l=ee,this.h=null,this.i=!1,this.g=null}j($){this.h=arguments,this.g?this.i=!0:pv(this)}N(){super.N(),this.g&&(V.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _h(I){ws.call(this),this.h=I,this.g={}}Ut(_h,ws);var kl=[];function G1(I){Fr(I.g,function($,ee){this.g.hasOwnProperty(ee)&&Kg($)},I),I.g={}}_h.prototype.N=function(){_h.aa.N.call(this),G1(this)},_h.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gv=V.JSON.stringify,mv=V.JSON.parse,LE=class{stringify(I){return V.JSON.stringify(I,void 0)}parse(I){return V.JSON.parse(I,void 0)}};function pf(){}function gf(){}pf.prototype.h=null;var Fl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qg(){Ga.call(this,"d")}function vh(){Ga.call(this,"c")}Ut(Qg,Ga),Ut(vh,Ga);var mf={},vv=null;function k_(){return vv=vv||new sa}function $1(I){Ga.call(this,mf.La,I)}function Yg(I){const $=k_();Nc($,new $1($))}function z1(I,$){Ga.call(this,mf.STAT_EVENT,I),this.stat=$}function lc(I){const $=k_();Nc($,new z1($,I))}function Zg(I,$){Ga.call(this,mf.Ma,I),this.size=$}function Jg(I,$){if("function"!=typeof I)throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){I()},$)}function Rp(){this.g=!0}function yh(I,$,ee,ge){I.info(function(){return"XMLHTTP TEXT ("+$+"): "+function jE(I,$){if(!I.g)return $;if(!$)return null;try{var ee=JSON.parse($);if(ee)for(I=0;I<ee.length;I++)if(Array.isArray(ee[I])){var ge=ee[I];if(!(2>ge.length)){var ct=ge[1];if(Array.isArray(ct)&&!(1>ct.length)){var At=ct[0];if("noop"!=At&&"stop"!=At&&"close"!=At)for(var un=1;un<ct.length;un++)ct[un]=""}}}return gv(ee)}catch{return $}}(I,ee)+(ge?" "+ge:"")})}mf.La="serverreachability",Ut($1,Ga),mf.STAT_EVENT="statevent",Ut(z1,Ga),mf.Ma="timingevent",Ut(Zg,Ga),Rp.prototype.xa=function(){this.g=!1},Rp.prototype.info=function(){};var L_,em={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},F_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function _f(){}function Nu(I,$,ee,ge){this.j=I,this.i=$,this.l=ee,this.R=ge||1,this.U=new _h(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mp}function Mp(){this.i=null,this.g="",this.h=!1}Ut(_f,pf),_f.prototype.g=function(){return new XMLHttpRequest},_f.prototype.i=function(){return{}},L_=new _f;var W1={},yv={};function Ev(I,$,ee){I.L=1,I.v=U_(Ll($)),I.m=ee,I.P=!0,tm(I,null)}function tm(I,$){I.F=Date.now(),Cv(I),I.A=Ll(I.v);var ee=I.A,ge=I.R;Array.isArray(ge)||(ge=[String(ge)]),oy(ee.i,"t",ge),I.C=0,ee=I.j.J,I.h=new Mp,I.g=Cy(I.j,ee?$:null,!I.m),0<I.O&&(I.M=new N_(Fe(I.Y,I,I.g),I.O)),$=I.U,ee=I.g,ge=I.ca;var ct="readystatechange";Array.isArray(ct)||(ct&&(kl[0]=ct.toString()),ct=kl);for(var At=0;At<ct.length;At++){var un=B1(ee,ct[At],ge||$.handleEvent,!1,$.h||$);if(!un)break;$.g[un.key]=un}$=I.H?Oe(I.H):{},I.m?(I.u||(I.u="POST"),$["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,$)):(I.u="GET",I.g.ea(I.A,I.u,null,$)),Yg(),function VE(I,$,ee,ge,ct,At){I.info(function(){if(I.g)if(At)for(var un="",co=At.split("&"),Aa=0;Aa<co.length;Aa++){var Si=co[Aa].split("=");if(1<Si.length){var aa=Si[0];Si=Si[1];var dc=aa.split("_");un=2<=dc.length&&"type"==dc[1]?un+(aa+"=")+Si+"&":un+(aa+"=redacted&")}}else un=null;else un=At;return"XMLHTTP REQ ("+ge+") [attempt "+ct+"]: "+$+"\n"+ee+"\n"+un})}(I.i,I.u,I.A,I.l,I.R,I.m)}function V_(I){return!!I.g&&"GET"==I.u&&2!=I.L&&I.j.Ca}function HE(I,$){var ee=I.C,ge=$.indexOf("\n",ee);return-1==ge?yv:(ee=Number($.substring(ee,ge)),isNaN(ee)?W1:(ge+=1)+ee>$.length?yv:($=$.slice(ge,ge+ee),I.C=ge+ee,$))}function Cv(I){I.S=Date.now()+I.I,GE(I,I.I)}function GE(I,$){if(null!=I.B)throw Error("WatchDog timer not null");I.B=Jg(Fe(I.ba,I),$)}function wv(I){I.B&&(V.clearTimeout(I.B),I.B=null)}function nm(I){0==I.j.G||I.J||_m(I.j,I)}function Op(I){wv(I);var $=I.M;$&&"function"==typeof $.ma&&$.ma(),I.M=null,G1(I.U),I.g&&($=I.g,I.g=null,$.abort(),$.ma())}function Iv(I,$){try{var ee=I.j;if(0!=ee.G&&(ee.g==I||rm(ee.h,I)))if(!I.K&&rm(ee.h,I)&&3==ee.G){try{var ge=ee.Da.g.parse($)}catch{ge=null}if(Array.isArray(ge)&&3==ge.length){var ct=ge;if(0==ct[0]){e:if(!ee.u){if(ee.g){if(!(ee.g.F+3e3<I.F))break e;mm(ee),kp(ee)}Rv(ee),lc(18)}}else ee.za=ct[1],0<ee.za-ee.T&&37500>ct[2]&&ee.F&&0==ee.v&&!ee.C&&(ee.C=Jg(Fe(ee.Za,ee),6e3));if(1>=X1(ee.h)&&ee.ca){try{ee.ca()}catch{}ee.ca=void 0}}else wh(ee,11)}else if((I.K||ee.g==I)&&mm(ee),!Xn($))for(ct=ee.Da.g.parse($),$=0;$<ct.length;$++){let Si=ct[$];if(ee.T=Si[0],Si=Si[1],2==ee.G)if("c"==Si[0]){ee.K=Si[1],ee.ia=Si[2];const aa=Si[3];null!=aa&&(ee.la=aa,ee.j.info("VER="+ee.la));const dc=Si[4];null!=dc&&(ee.Aa=dc,ee.j.info("SVER="+ee.Aa));const Ih=Si[5];null!=Ih&&"number"==typeof Ih&&0<Ih&&(ee.L=ge=1.5*Ih,ee.j.info("backChannelRequestTimeoutMs_="+ge)),ge=ee;const Qo=I.g;if(Qo){const vm=Qo.g?Qo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vm){var At=ge.h;At.g||-1==vm.indexOf("spdy")&&-1==vm.indexOf("quic")&&-1==vm.indexOf("h2")||(At.j=At.l,At.g=new Set,At.h&&(Eh(At,At.h),At.h=null))}if(ge.D){const K_=Qo.g?Qo.g.getResponseHeader("X-HTTP-Session-Id"):null;K_&&(ge.ya=K_,Ao(ge.I,ge.D,K_))}}ee.G=3,ee.l&&ee.l.ua(),ee.ba&&(ee.R=Date.now()-I.F,ee.j.info("Handshake RTT: "+ee.R+"ms"));var un=I;if((ge=ee).qa=Ey(ge,ge.J?ge.ia:null,ge.W),un.K){B_(ge.h,un);var co=un,Aa=ge.L;Aa&&(co.I=Aa),co.B&&(wv(co),Cv(co)),ge.g=un}else _y(ge);0<ee.i.length&&wd(ee)}else"stop"!=Si[0]&&"close"!=Si[0]||wh(ee,7);else 3==ee.G&&("stop"==Si[0]||"close"==Si[0]?"stop"==Si[0]?wh(ee,7):pm(ee):"noop"!=Si[0]&&ee.l&&ee.l.ta(Si),ee.v=0)}Yg()}catch{}}Nu.prototype.ca=function(I){I=I.target;const $=this.M;$&&3==Cd(I)?$.j():this.Y(I)},Nu.prototype.Y=function(I){try{if(I==this.g)e:{const dc=Cd(this.g);var $=this.g.Ba();if(this.g.Z(),!(3>dc)&&(3!=dc||this.g&&(this.h.h||this.g.oa()||fy(this.g)))){this.J||4!=dc||7==$||Yg(),wv(this);var ee=this.g.Z();this.X=ee;t:if(V_(this)){var ge=fy(this.g);I="";var ct=ge.length,At=4==Cd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Op(this),nm(this);var un="";break t}this.h.i=new V.TextDecoder}for($=0;$<ct;$++)this.h.h=!0,I+=this.h.i.decode(ge[$],{stream:!(At&&$==ct-1)});ge.length=0,this.h.g+=I,this.C=0,un=this.h.g}else un=this.g.oa();if(this.o=200==ee,function BE(I,$,ee,ge,ct,At,un){I.info(function(){return"XMLHTTP RESP ("+ge+") [ attempt "+ct+"]: "+$+"\n"+ee+"\n"+At+" "+un})}(this.i,this.u,this.A,this.l,this.R,dc,ee),this.o){if(this.T&&!this.K){t:{if(this.g){var co,Aa=this.g;if((co=Aa.g?Aa.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xn(co)){var Si=co;break t}}Si=null}if(!(ee=Si)){this.o=!1,this.s=3,lc(12),Op(this),nm(this);break e}yh(this.i,this.l,ee,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Iv(this,ee)}if(this.P){let Qo;for(ee=!0;!this.J&&this.C<un.length;){if(Qo=HE(this,un),Qo==yv){4==dc&&(this.s=4,lc(14),ee=!1),yh(this.i,this.l,null,"[Incomplete Response]");break}if(Qo==W1){this.s=4,lc(15),yh(this.i,this.l,un,"[Invalid Chunk]"),ee=!1;break}yh(this.i,this.l,Qo,null),Iv(this,Qo)}if(V_(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=dc||0!=un.length||this.h.h||(this.s=1,lc(16),ee=!1),this.o=this.o&&ee,ee){if(0<un.length&&!this.W){this.W=!0;var aa=this.j;aa.g==this&&aa.ba&&!aa.M&&(aa.j.info("Great, no buffering proxy detected. Bytes received: "+un.length),q_(aa),aa.M=!0,lc(11))}}else yh(this.i,this.l,un,"[Invalid Chunked Response]"),Op(this),nm(this)}else yh(this.i,this.l,un,null),Iv(this,un);4==dc&&Op(this),this.o&&!this.J&&(4==dc?_m(this.j,this):(this.o=!1,Cv(this)))}else(function Dv(I){const $={};I=(I.g&&2<=Cd(I)&&I.g.getAllResponseHeaders()||"").split("\r\n");for(let ge=0;ge<I.length;ge++){if(Xn(I[ge]))continue;var ee=st(I[ge]);const ct=ee[0];if("string"!=typeof(ee=ee[1]))continue;ee=ee.trim();const At=$[ct]||[];$[ct]=At,At.push(ee)}!function et(I,$){for(const ee in I)$.call(void 0,I[ee],ee,I)}($,function(ge){return ge.join(", ")})})(this.g),400==ee&&0<un.indexOf("Unknown SID")?(this.s=3,lc(12)):(this.s=0,lc(13)),Op(this),nm(this)}}}catch{}},Nu.prototype.cancel=function(){this.J=!0,Op(this)},Nu.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(function UE(I,$){I.info(function(){return"TIMEOUT: "+$})}(this.i,this.A),2!=this.L&&(Yg(),lc(17)),Op(this),this.s=2,nm(this)):GE(this,this.S-I)};var Aw=class{constructor(I,$){this.g=I,this.map=$}};function q1(I){this.l=I||10,I=V.PerformanceNavigationTiming?0<(I=V.performance.getEntriesByType("navigation")).length&&("hq"==I[0].nextHopProtocol||"h2"==I[0].nextHopProtocol):!!(V.chrome&&V.chrome.loadTimes&&V.chrome.loadTimes()&&V.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function K1(I){return!!I.h||!!I.g&&I.g.size>=I.j}function X1(I){return I.h?1:I.g?I.g.size:0}function rm(I,$){return I.h?I.h==$:!!I.g&&I.g.has($)}function Eh(I,$){I.g?I.g.add($):I.h=$}function B_(I,$){I.h&&I.h==$?I.h=null:I.g&&I.g.has($)&&I.g.delete($)}function im(I){if(null!=I.h)return I.i.concat(I.h.D);if(null!=I.g&&0!==I.g.size){let $=I.i;for(const ee of I.g.values())$=$.concat(ee.D);return $}return en(I.i)}function Av(I,$){if(I.forEach&&"function"==typeof I.forEach)I.forEach($,void 0);else if(G(I)||"string"==typeof I)Array.prototype.forEach.call(I,$,void 0);else for(var ee=function om(I){if(I.na&&"function"==typeof I.na)return I.na();if(!I.V||"function"!=typeof I.V){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(G(I)||"string"==typeof I){var $=[];I=I.length;for(var ee=0;ee<I;ee++)$.push(ee);return $}$=[],ee=0;for(const ge in I)$[ee++]=ge;return $}}}(I),ge=function Q1(I){if(I.V&&"function"==typeof I.V)return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if("string"==typeof I)return I.split("");if(G(I)){for(var $=[],ee=I.length,ge=0;ge<ee;ge++)$.push(I[ge]);return $}for(ge in $=[],ee=0,I)$[ee++]=I[ge];return $}(I),ct=ge.length,At=0;At<ct;At++)$.call(void 0,ge[At],ee&&ee[At],I)}q1.prototype.cancel=function(){if(this.i=im(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const I of this.g.values())I.cancel();this.g.clear()}};var Y1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vf(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof vf){this.h=I.h,am(this,I.j),this.o=I.o,this.g=I.g,cm(this,I.s),this.l=I.l;var $=I.i,ee=new lm;ee.i=$.i,$.g&&(ee.g=new Map($.g),ee.h=$.h),Z1(this,ee),this.m=I.m}else I&&($=String(I).match(Y1))?(this.h=!1,am(this,$[1]||"",!0),this.o=yd($[2]||""),this.g=yd($[3]||"",!0),cm(this,$[4]),this.l=yd($[5]||"",!0),Z1(this,$[6]||"",!0),this.m=yd($[7]||"")):(this.h=!1,this.i=new lm(null,this.h))}function Ll(I){return new vf(I)}function am(I,$,ee){I.j=ee?yd($,!0):$,I.j&&(I.j=I.j.replace(/:$/,""))}function cm(I,$){if($){if($=Number($),isNaN($)||0>$)throw Error("Bad port number "+$);I.s=$}else I.s=null}function Z1(I,$,ee){$ instanceof lm?(I.i=$,function bv(I,$){$&&!I.j&&(Ed(I),I.i=null,I.g.forEach(function(ee,ge){var ct=ge.toLowerCase();ge!=ct&&(ry(this,ge),oy(this,ct,ee))},I)),I.j=$}(I.i,I.h)):(ee||($=um($,ty)),I.i=new lm($,I.h))}function Ao(I,$,ee){I.i.set($,ee)}function U_(I){return Ao(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function yd(I,$){return I?$?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function um(I,$,ee){return"string"==typeof I?(I=encodeURI(I).replace($,$E),ee&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function $E(I){return"%"+((I=I.charCodeAt(0))>>4&15).toString(16)+(15&I).toString(16)}vf.prototype.toString=function(){var I=[],$=this.j;$&&I.push(um($,J1,!0),":");var ee=this.g;return(ee||"file"==$)&&(I.push("//"),($=this.o)&&I.push(um($,J1,!0),"@"),I.push(encodeURIComponent(String(ee)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(ee=this.s)&&I.push(":",String(ee))),(ee=this.l)&&(this.g&&"/"!=ee.charAt(0)&&I.push("/"),I.push(um(ee,"/"==ee.charAt(0)?ey:j_,!0))),(ee=this.i.toString())&&I.push("?",ee),(ee=this.m)&&I.push("#",um(ee,ny)),I.join("")};var J1=/[#\/\?@]/g,j_=/[#\?:]/g,ey=/[#\?]/g,ty=/[#\?@]/g,ny=/#/g;function lm(I,$){this.h=this.g=null,this.i=I||null,this.j=!!$}function Ed(I){I.g||(I.g=new Map,I.h=0,I.i&&function sm(I,$){if(I){I=I.split("&");for(var ee=0;ee<I.length;ee++){var ge=I[ee].indexOf("="),ct=null;if(0<=ge){var At=I[ee].substring(0,ge);ct=I[ee].substring(ge+1)}else At=I[ee];$(At,ct?decodeURIComponent(ct.replace(/\+/g," ")):"")}}}(I.i,function($,ee){I.add(decodeURIComponent($.replace(/\+/g," ")),ee)}))}function ry(I,$){Ed(I),$=Pp(I,$),I.g.has($)&&(I.i=null,I.h-=I.g.get($).length,I.g.delete($))}function iy(I,$){return Ed(I),$=Pp(I,$),I.g.has($)}function oy(I,$,ee){ry(I,$),0<ee.length&&(I.i=null,I.g.set(Pp(I,$),en(ee)),I.h+=ee.length)}function Pp(I,$){return $=String($),I.j&&($=$.toLowerCase()),$}function yf(I,$,ee,ge,ct){try{ct&&(ct.onload=null,ct.onerror=null,ct.onabort=null,ct.ontimeout=null),ge(ee)}catch{}}function fm(){this.g=new LE}function H_(I,$,ee){const ge=ee||"";try{Av(I,function(ct,At){let un=ct;X(ct)&&(un=gv(ct)),$.push(ge+At+"="+encodeURIComponent(un))})}catch(ct){throw $.push(ge+"type="+encodeURIComponent("_badmap")),ct}}function G_(I){this.l=I.Ub||null,this.j=I.eb||!1}function $_(I,$){sa.call(this),this.D=I,this.o=$,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Tv(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}function Ch(I){I.readyState=4,I.l=null,I.j=null,I.v=null,hm(I)}function hm(I){I.onreadystatechange&&I.onreadystatechange.call(I)}function xv(I){let $="";return Fr(I,function(ee,ge){$+=ge,$+=":",$+=ee,$+="\r\n"}),$}function Sv(I,$,ee){e:{for(ge in ee){var ge=!1;break e}ge=!0}ge||(ee=xv(ee),"string"==typeof I?null!=ee&&encodeURIComponent(String(ee)):Ao(I,$,ee))}function Xo(I){sa.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(p=lm.prototype).add=function(I,$){Ed(this),this.i=null,I=Pp(this,I);var ee=this.g.get(I);return ee||this.g.set(I,ee=[]),ee.push($),this.h+=1,this},p.forEach=function(I,$){Ed(this),this.g.forEach(function(ee,ge){ee.forEach(function(ct){I.call($,ct,ge,this)},this)},this)},p.na=function(){Ed(this);const I=Array.from(this.g.values()),$=Array.from(this.g.keys()),ee=[];for(let ge=0;ge<$.length;ge++){const ct=I[ge];for(let At=0;At<ct.length;At++)ee.push($[ge])}return ee},p.V=function(I){Ed(this);let $=[];if("string"==typeof I)iy(this,I)&&($=$.concat(this.g.get(Pp(this,I))));else{I=Array.from(this.g.values());for(let ee=0;ee<I.length;ee++)$=$.concat(I[ee])}return $},p.set=function(I,$){return Ed(this),this.i=null,iy(this,I=Pp(this,I))&&(this.h-=this.g.get(I).length),this.g.set(I,[$]),this.h+=1,this},p.get=function(I,$){return I&&0<(I=this.V(I)).length?String(I[0]):$},p.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],$=Array.from(this.g.keys());for(var ee=0;ee<$.length;ee++){var ge=$[ee];const At=encodeURIComponent(String(ge)),un=this.V(ge);for(ge=0;ge<un.length;ge++){var ct=At;""!==un[ge]&&(ct+="="+encodeURIComponent(String(un[ge]))),I.push(ct)}}return this.i=I.join("&")},Ut(G_,pf),G_.prototype.g=function(){return new $_(this.l,this.j)},G_.prototype.i=function(I){return function(){return I}}({}),Ut($_,sa),(p=$_.prototype).open=function(I,$){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=$,this.readyState=1,hm(this)},p.send=function(I){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const $={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&($.body=I),(this.D||V).fetch(new Request(this.A,$)).then(this.Sa.bind(this),this.ga.bind(this))},p.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ch(this)),this.readyState=0},p.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,hm(this)),this.g&&(this.readyState=3,hm(this),this.g)))if("arraybuffer"===this.responseType)I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof V.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tv(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))},p.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var $=I.value?I.value:new Uint8Array(0);($=this.v.decode($,{stream:!I.done}))&&(this.response=this.responseText+=$)}I.done?Ch(this):hm(this),3==this.readyState&&Tv(this)}},p.Ra=function(I){this.g&&(this.response=this.responseText=I,Ch(this))},p.Qa=function(I){this.g&&(this.response=I,Ch(this))},p.ga=function(){this.g&&Ch(this)},p.setRequestHeader=function(I,$){this.u.append(I,$)},p.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},p.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],$=this.h.entries();for(var ee=$.next();!ee.done;)I.push((ee=ee.value)[0]+": "+ee[1]),ee=$.next();return I.join("\r\n")},Object.defineProperty($_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(I){this.m=I?"include":"same-origin"}}),Ut(Xo,sa);var ay=/^https?$/i,cy=["POST","PUT"];function z_(I,$){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=$,I.m=5,uy(I),W_(I)}function uy(I){I.A||(I.A=!0,Nc(I,"complete"),Nc(I,"error"))}function ly(I){if(I.h&&typeof x<"u"&&(!I.v[1]||4!=Cd(I)||2!=I.Z()))if(I.u&&4==Cd(I))hv(I.Ea,0,I);else if(Nc(I,"readystatechange"),4==Cd(I)){I.h=!1;try{const un=I.Z();e:switch(un){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var $=!0;break e;default:$=!1}var ee;if(!(ee=$)){var ge;if(ge=0===un){var ct=String(I.D).match(Y1)[1]||null;!ct&&V.self&&V.self.location&&(ct=V.self.location.protocol.slice(0,-1)),ge=!ay.test(ct?ct.toLowerCase():"")}ee=ge}if(ee)Nc(I,"complete"),Nc(I,"success");else{I.m=6;try{var At=2<Cd(I)?I.g.statusText:""}catch{At=""}I.l=At+" ["+I.Z()+"]",uy(I)}}finally{W_(I)}}}function W_(I,$){if(I.g){dy(I);const ee=I.g,ge=I.v[0]?()=>{}:null;I.g=null,I.v=null,$||Nc(I,"ready");try{ee.onreadystatechange=ge}catch{}}}function dy(I){I.I&&(V.clearTimeout(I.I),I.I=null)}function Cd(I){return I.g?I.g.readyState:0}function fy(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function ol(I,$,ee){return ee&&ee.internalChannelParams&&ee.internalChannelParams[I]||$}function Np(I){this.Aa=0,this.i=[],this.j=new Rp,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ol("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ol("baseRetryDelayMs",5e3,I),this.cb=ol("retryDelaySeedMs",1e4,I),this.Wa=ol("forwardChannelMaxRetries",2,I),this.wa=ol("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new q1(I&&I.concurrentRequestLimit),this.Da=new fm,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function pm(I){if(hy(I),3==I.G){var $=I.U++,ee=Ll(I.I);if(Ao(ee,"SID",I.K),Ao(ee,"RID",$),Ao(ee,"TYPE","terminate"),gm(I,ee),($=new Nu(I,I.j,$)).L=2,$.v=U_(Ll(ee)),ee=!1,V.navigator&&V.navigator.sendBeacon)try{ee=V.navigator.sendBeacon($.v.toString(),"")}catch{}!ee&&V.Image&&((new Image).src=$.v,ee=!0),ee||($.g=Cy($.j,null),$.g.ea($.v)),$.F=Date.now(),Cv($)}Mv(I)}function kp(I){I.g&&(q_(I),I.g.cancel(),I.g=null)}function hy(I){kp(I),I.u&&(V.clearTimeout(I.u),I.u=null),mm(I),I.h.cancel(),I.s&&("number"==typeof I.s&&V.clearTimeout(I.s),I.s=null)}function wd(I){if(!K1(I.h)&&!I.s){I.s=!0;var $=I.Ga;zg||V1(),xp||(zg(),xp=!0),D_.add($,I),I.B=0}}function gy(I,$){var ee;ee=$?$.l:I.U++;const ge=Ll(I.I);Ao(ge,"SID",I.K),Ao(ge,"RID",ee),Ao(ge,"AID",I.T),gm(I,ge),I.m&&I.o&&Sv(ge,I.m,I.o),ee=new Nu(I,I.j,ee,I.B+1),null===I.m&&(ee.H=I.o),$&&(I.i=$.D.concat(I.i)),$=my(I,ee,1e3),ee.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),Eh(I.h,ee),Ev(ee,ge,$)}function gm(I,$){I.H&&Fr(I.H,function(ee,ge){Ao($,ge,ee)}),I.l&&Av({},function(ee,ge){Ao($,ge,ee)})}function my(I,$,ee){ee=Math.min(I.i.length,ee);var ge=I.l?Fe(I.l.Na,I.l,I):null;e:{var ct=I.i;let At=-1;for(;;){const un=["count="+ee];-1==At?0<ee?(At=ct[0].g,un.push("ofs="+At)):At=0:un.push("ofs="+At);let co=!0;for(let Aa=0;Aa<ee;Aa++){let Si=ct[Aa].g;const aa=ct[Aa].map;if(Si-=At,0>Si)At=Math.max(0,ct[Aa].g-100),co=!1;else try{H_(aa,un,"req"+Si+"_")}catch{ge&&ge(aa)}}if(co){ge=un.join("&");break e}}}return I=I.i.splice(0,ee),$.D=I,ge}function _y(I){if(!I.g&&!I.u){I.Y=1;var $=I.Fa;zg||V1(),xp||(zg(),xp=!0),D_.add($,I),I.v=0}}function Rv(I){return!(I.g||I.u||3<=I.v||(I.Y++,I.u=Jg(Fe(I.Fa,I),yy(I,I.v)),I.v++,0))}function q_(I){null!=I.A&&(V.clearTimeout(I.A),I.A=null)}function vy(I){I.g=new Nu(I,I.j,"rpc",I.Y),null===I.m&&(I.g.H=I.o),I.g.O=0;var $=Ll(I.qa);Ao($,"RID","rpc"),Ao($,"SID",I.K),Ao($,"AID",I.T),Ao($,"CI",I.F?"0":"1"),!I.F&&I.ja&&Ao($,"TO",I.ja),Ao($,"TYPE","xmlhttp"),gm(I,$),I.m&&I.o&&Sv($,I.m,I.o),I.L&&(I.g.I=I.L);var ee=I.g;I=I.ia,ee.L=1,ee.v=U_(Ll($)),ee.m=null,ee.P=!0,tm(ee,I)}function mm(I){null!=I.C&&(V.clearTimeout(I.C),I.C=null)}function _m(I,$){var ee=null;if(I.g==$){mm(I),q_(I),I.g=null;var ge=2}else{if(!rm(I.h,$))return;ee=$.D,B_(I.h,$),ge=1}if(0!=I.G)if($.o)if(1==ge){ee=$.m?$.m.length:0,$=Date.now()-$.F;var ct=I.B;Nc(ge=k_(),new Zg(ge,ee)),wd(I)}else _y(I);else if(3==(ct=$.s)||0==ct&&0<$.X||!(1==ge&&function py(I,$){return!(X1(I.h)>=I.h.j-(I.s?1:0)||(I.s?(I.i=$.D.concat(I.i),0):1==I.G||2==I.G||I.B>=(I.Va?0:I.Wa)||(I.s=Jg(Fe(I.Ga,I,$),yy(I,I.B)),I.B++,0)))}(I,$)||2==ge&&Rv(I)))switch(ee&&0<ee.length&&($=I.h,$.i=$.i.concat(ee)),ct){case 1:wh(I,5);break;case 4:wh(I,10);break;case 3:wh(I,6);break;default:wh(I,2)}}function yy(I,$){let ee=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(ee*=2),ee*$}function wh(I,$){if(I.j.info("Error code "+$),2==$){var ee=Fe(I.fb,I),ge=I.Xa;const ct=!ge;ge=new vf(ge||"//www.google.com/images/cleardot.gif"),V.location&&"http"==V.location.protocol||am(ge,"https"),U_(ge),ct?function dm(I,$){const ee=new Rp;if(V.Image){const ge=new Image;ge.onload=ht(yf,ee,"TestLoadImage: loaded",!0,$,ge),ge.onerror=ht(yf,ee,"TestLoadImage: error",!1,$,ge),ge.onabort=ht(yf,ee,"TestLoadImage: abort",!1,$,ge),ge.ontimeout=ht(yf,ee,"TestLoadImage: timeout",!1,$,ge),V.setTimeout(function(){ge.ontimeout&&ge.ontimeout()},1e4),ge.src=I}else $(!1)}(ge.toString(),ee):function sy(I,$){new Rp;const ge=new AbortController,ct=setTimeout(()=>{ge.abort(),yf(0,0,!1,$)},1e4);fetch(I,{signal:ge.signal}).then(At=>{clearTimeout(ct),yf(0,0,!!At.ok,$)}).catch(()=>{clearTimeout(ct),yf(0,0,!1,$)})}(ge.toString(),ee)}else lc(2);I.G=0,I.l&&I.l.sa($),Mv(I),hy(I)}function Mv(I){if(I.G=0,I.ka=[],I.l){const $=im(I.h);(0!=$.length||0!=I.i.length)&&(Gt(I.ka,$),Gt(I.ka,I.i),I.h.i.length=0,en(I.i),I.i.length=0),I.l.ra()}}function Ey(I,$,ee){var ge=ee instanceof vf?Ll(ee):new vf(ee);if(""!=ge.g)$&&(ge.g=$+"."+ge.g),cm(ge,ge.s);else{var ct=V.location;ge=ct.protocol,$=$?$+"."+ct.hostname:ct.hostname,ct=+ct.port;var At=new vf(null);ge&&am(At,ge),$&&(At.g=$),ct&&cm(At,ct),ee&&(At.l=ee),ge=At}return $=I.ya,(ee=I.D)&&$&&Ao(ge,ee,$),Ao(ge,"VER",I.la),gm(I,ge),ge}function Cy(I,$,ee){if($&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return($=new Xo(I.Ca&&!I.pa?new G_({eb:ee}):I.pa)).Ha(I.J),$}function Ef(){}function Id(){}function Ia(I,$){sa.call(this),this.g=new Np($),this.l=I,this.h=$&&$.messageUrlParams||null,I=$&&$.messageHeaders||null,$&&$.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=$&&$.initMessageHeaders||null,$&&$.messageContentType&&(I?I["X-WebChannel-Content-Type"]=$.messageContentType:I={"X-WebChannel-Content-Type":$.messageContentType}),$&&$.va&&(I?I["X-WebChannel-Client-Profile"]=$.va:I={"X-WebChannel-Client-Profile":$.va}),this.g.S=I,(I=$&&$.Sb)&&!Xn(I)&&(this.g.m=I),this.v=$&&$.supportsCrossDomainXhr||!1,this.u=$&&$.sendRawJson||!1,($=$&&$.httpSessionIdParam)&&!Xn($)&&(this.g.D=$,null!==(I=this.h)&&$ in I&&$ in(I=this.h)&&delete I[$]),this.j=new Fp(this)}function zE(I){Qg.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var $=I.__sm__;if($){e:{for(const ee in $){I=ee;break e}I=void 0}(this.i=I)&&(I=this.i,$=null!==$&&I in $?$[I]:void 0),this.data=$}else this.data=I}function Ov(){vh.call(this),this.status=1}function Fp(I){this.g=I}(p=Xo.prototype).Ha=function(I){this.J=I},p.ea=function(I,$,ee,ge){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);$=$?$.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():L_.g(),this.v=function _v(I){return I.h||(I.h=I.i())}(this.o?this.o:L_),this.g.onreadystatechange=Fe(this.Ea,this);try{this.B=!0,this.g.open($,String(I),!0),this.B=!1}catch(At){return void z_(this,At)}if(I=ee||"",ee=new Map(this.headers),ge)if(Object.getPrototypeOf(ge)===Object.prototype)for(var ct in ge)ee.set(ct,ge[ct]);else{if("function"!=typeof ge.keys||"function"!=typeof ge.get)throw Error("Unknown input type for opt_headers: "+String(ge));for(const At of ge.keys())ee.set(At,ge.get(At))}ge=Array.from(ee.keys()).find(At=>"content-type"==At.toLowerCase()),ct=V.FormData&&I instanceof V.FormData,!(0<=Array.prototype.indexOf.call(cy,$,void 0))||ge||ct||ee.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[At,un]of ee)this.g.setRequestHeader(At,un);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dy(this),this.u=!0,this.g.send(I),this.u=!1}catch(At){z_(this,At)}},p.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,Nc(this,"complete"),Nc(this,"abort"),W_(this))},p.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),W_(this,!0)),Xo.aa.N.call(this)},p.Ea=function(){this.s||(this.B||this.u||this.j?ly(this):this.bb())},p.bb=function(){ly(this)},p.isActive=function(){return!!this.g},p.Z=function(){try{return 2<Cd(this)?this.g.status:-1}catch{return-1}},p.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},p.Oa=function(I){if(this.g){var $=this.g.responseText;return I&&0==$.indexOf(I)&&($=$.substring(I.length)),mv($)}},p.Ba=function(){return this.m},p.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(p=Np.prototype).la=8,p.G=1,p.connect=function(I,$,ee,ge){lc(0),this.W=I,this.H=$||{},ee&&void 0!==ge&&(this.H.OSID=ee,this.H.OAID=ge),this.F=this.X,this.I=Ey(this,null,this.W),wd(this)},p.Ga=function(I){if(this.s)if(this.s=null,1==this.G){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const ct=new Nu(this,this.j,I);let At=this.o;if(this.S&&(At?(At=Oe(At),nt(At,this.S)):At=this.S),null!==this.m||this.O||(ct.H=At,At=null),this.P)e:{for(var $=0,ee=0;ee<this.i.length;ee++){var ge=this.i[ee];if(void 0===(ge="__data__"in ge.map&&"string"==typeof(ge=ge.map.__data__)?ge.length:void 0))break;if(4096<($+=ge)){$=ee;break e}if(4096===$||ee===this.i.length-1){$=ee+1;break e}}$=1e3}else $=1e3;$=my(this,ct,$),Ao(ee=Ll(this.I),"RID",I),Ao(ee,"CVER",22),this.D&&Ao(ee,"X-HTTP-Session-Id",this.D),gm(this,ee),At&&(this.O?$="headers="+encodeURIComponent(String(xv(At)))+"&"+$:this.m&&Sv(ee,this.m,At)),Eh(this.h,ct),this.Ua&&Ao(ee,"TYPE","init"),this.P?(Ao(ee,"$req",$),Ao(ee,"SID","null"),ct.T=!0,Ev(ct,ee,null)):Ev(ct,ee,$),this.G=2}}else 3==this.G&&(I?gy(this,I):0==this.i.length||K1(this.h)||gy(this))},p.Fa=function(){if(this.u=null,vy(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=Jg(Fe(this.ab,this),I)}},p.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lc(10),kp(this),vy(this))},p.Za=function(){null!=this.C&&(this.C=null,kp(this),Rv(this),lc(19))},p.fb=function(I){I?(this.j.info("Successfully pinged google.com"),lc(2)):(this.j.info("Failed to ping google.com"),lc(1))},p.isActive=function(){return!!this.l&&this.l.isActive(this)},(p=Ef.prototype).ua=function(){},p.ta=function(){},p.sa=function(){},p.ra=function(){},p.isActive=function(){return!0},p.Na=function(){},Id.prototype.g=function(I,$){return new Ia(I,$)},Ut(Ia,sa),Ia.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ia.prototype.close=function(){pm(this.g)},Ia.prototype.o=function(I){var $=this.g;if("string"==typeof I){var ee={};ee.__data__=I,I=ee}else this.u&&((ee={}).__data__=gv(I),I=ee);$.i.push(new Aw($.Ya++,I)),3==$.G&&wd($)},Ia.prototype.N=function(){this.g.l=null,delete this.j,pm(this.g),delete this.g,Ia.aa.N.call(this)},Ut(zE,Qg),Ut(Ov,vh),Ut(Fp,Ef),Fp.prototype.ua=function(){Nc(this.g,"a")},Fp.prototype.ta=function(I){Nc(this.g,new zE(I))},Fp.prototype.sa=function(I){Nc(this.g,new Ov)},Fp.prototype.ra=function(){Nc(this.g,"b")},Id.prototype.createWebChannel=Id.prototype.g,Ia.prototype.send=Ia.prototype.o,Ia.prototype.open=Ia.prototype.m,Ia.prototype.close=Ia.prototype.close,Xt=Mt.createWebChannelTransport=function(){return new Id},Ht=Mt.getStatEventTarget=function(){return k_()},kt=Mt.Event=mf,Ct=Mt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},em.NO_ERROR=0,em.TIMEOUT=8,em.HTTP_ERROR=6,Tt=Mt.ErrorCode=em,F_.COMPLETE="complete",Tn=Mt.EventType=F_,gf.EventType=Fl,Fl.OPEN="a",Fl.CLOSE="b",Fl.ERROR="c",Fl.MESSAGE="d",sa.prototype.listen=sa.prototype.K,On=Mt.WebChannel=gf,Nt=Mt.FetchXmlHttpFactory=G_,Xo.prototype.listenOnce=Xo.prototype.L,Xo.prototype.getLastError=Xo.prototype.Ka,Xo.prototype.getLastErrorCode=Xo.prototype.Ba,Xo.prototype.getStatus=Xo.prototype.Z,Xo.prototype.getResponseJson=Xo.prototype.Oa,Xo.prototype.getResponseText=Xo.prototype.oa,Xo.prototype.send=Xo.prototype.ea,Xo.prototype.setWithCredentials=Xo.prototype.Ha,tn=Mt.XhrIo=Xo}).apply(typeof It<"u"?It:typeof self<"u"?self:typeof window<"u"?window:{});const Qt="@firebase/firestore";class Xe{constructor(o){this.uid=o}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(o){return o.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");let Vn="10.12.1";const xn=new rt.Vy("@firebase/firestore");function Bt(){return xn.logLevel}function le(p,...o){if(xn.logLevel<=rt.$b.DEBUG){const u=o.map(Un);xn.debug(`Firestore (${Vn}): ${p}`,...u)}}function gt(p,...o){if(xn.logLevel<=rt.$b.ERROR){const u=o.map(Un);xn.error(`Firestore (${Vn}): ${p}`,...u)}}function St(p,...o){if(xn.logLevel<=rt.$b.WARN){const u=o.map(Un);xn.warn(`Firestore (${Vn}): ${p}`,...u)}}function Un(p){if("string"==typeof p)return p;try{return JSON.stringify(p)}catch{return p}}function De(p="Unexpected state"){const o=`FIRESTORE (${Vn}) INTERNAL ASSERTION FAILED: `+p;throw gt(o),new Error(o)}function Ve(p,o){p||De()}function Ne(p,o){return p}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends me.g{constructor(o,u){super(o,u),this.code=o,this.message=u,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _t{constructor(){this.promise=new Promise((o,u)=>{this.resolve=o,this.reject=u})}}class zt{constructor(o,u){this.user=u,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${o}`)}}class $n{getToken(){return Promise.resolve(null)}invalidateToken(){}start(o,u){o.enqueueRetryable(()=>u(Xe.UNAUTHENTICATED))}shutdown(){}}class nn{constructor(o){this.token=o,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(o,u){this.changeListener=u,o.enqueueRetryable(()=>u(this.token.user))}shutdown(){this.changeListener=null}}class Qn{constructor(o){this.t=o,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(o,u){var f=this;let _=this.i;const C=X=>this.i!==_?(_=this.i,u(X)):Promise.resolve();let x=new _t;this.o=()=>{this.i++,this.currentUser=this.u(),x.resolve(),x=new _t,o.enqueueRetryable(()=>C(this.currentUser))};const V=()=>{const X=x;o.enqueueRetryable((0,Ce.A)(function*(){yield X.promise,yield C(f.currentUser)}))},G=X=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=X,this.auth.addAuthTokenListener(this.o),V()};this.t.onInit(X=>G(X)),setTimeout(()=>{if(!this.auth){const X=this.t.getImmediate({optional:!0});X?G(X):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),x.resolve(),x=new _t)}},0),V()}getToken(){const o=this.i,u=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(u).then(f=>this.i!==o?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):f?(Ve("string"==typeof f.accessToken),new zt(f.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const o=this.auth&&this.auth.getUid();return Ve(null===o||"string"==typeof o),new Xe(o)}}class jr{constructor(o,u,f){this.l=o,this.h=u,this.P=f,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const o=this.T();return o&&this.I.set("Authorization",o),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class to{constructor(o,u,f){this.l=o,this.h=u,this.P=f}getToken(){return Promise.resolve(new jr(this.l,this.h,this.P))}start(o,u){o.enqueueRetryable(()=>u(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lr{constructor(o){this.value=o,this.type="AppCheck",this.headers=new Map,o&&o.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qr{constructor(o){this.A=o,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(o,u){const f=C=>{null!=C.error&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${C.error.message}`);const x=C.token!==this.R;return this.R=C.token,le("FirebaseAppCheckTokenProvider",`Received ${x?"new":"existing"} token.`),x?u(C.token):Promise.resolve()};this.o=C=>{o.enqueueRetryable(()=>f(C))};const _=C=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=C,this.appCheck.addTokenListener(this.o)};this.A.onInit(C=>_(C)),setTimeout(()=>{if(!this.appCheck){const C=this.A.getImmediate({optional:!0});C?_(C):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const o=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(o).then(u=>u?(Ve("string"==typeof u.token),this.R=u.token,new lr(u.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function pr(p){const o=typeof self<"u"&&(self.crypto||self.msCrypto),u=new Uint8Array(p);if(o&&"function"==typeof o.getRandomValues)o.getRandomValues(u);else for(let f=0;f<p;f++)u[f]=Math.floor(256*Math.random());return u}class si{static newId(){const u=62*Math.floor(256/62);let f="";for(;f.length<20;){const _=pr(40);for(let C=0;C<_.length;++C)f.length<20&&_[C]<u&&(f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(_[C]%62))}return f}}function wn(p,o){return p<o?-1:p>o?1:0}function Br(p,o,u){return p.length===o.length&&p.every((f,_)=>u(f,o[_]))}class Yn{constructor(o,u){if(this.seconds=o,this.nanoseconds=u,u<0)throw new ye(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+u);if(u>=1e9)throw new ye(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+u);if(o<-62135596800)throw new ye(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+o);if(o>=253402300800)throw new ye(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+o)}static now(){return Yn.fromMillis(Date.now())}static fromDate(o){return Yn.fromMillis(o.getTime())}static fromMillis(o){const u=Math.floor(o/1e3),f=Math.floor(1e6*(o-1e3*u));return new Yn(u,f)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(o){return this.seconds===o.seconds?wn(this.nanoseconds,o.nanoseconds):wn(this.seconds,o.seconds)}isEqual(o){return o.seconds===this.seconds&&o.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ln{constructor(o){this.timestamp=o}static fromTimestamp(o){return new ln(o)}static min(){return new ln(new Yn(0,0))}static max(){return new ln(new Yn(253402300799,999999999))}compareTo(o){return this.timestamp._compareTo(o.timestamp)}isEqual(o){return this.timestamp.isEqual(o.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Lo{constructor(o,u,f){void 0===u?u=0:u>o.length&&De(),void 0===f?f=o.length-u:f>o.length-u&&De(),this.segments=o,this.offset=u,this.len=f}get length(){return this.len}isEqual(o){return 0===Lo.comparator(this,o)}child(o){const u=this.segments.slice(this.offset,this.limit());return o instanceof Lo?o.forEach(f=>{u.push(f)}):u.push(o),this.construct(u)}limit(){return this.offset+this.length}popFirst(o){return this.construct(this.segments,this.offset+(o=void 0===o?1:o),this.length-o)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(o){return this.segments[this.offset+o]}isEmpty(){return 0===this.length}isPrefixOf(o){if(o.length<this.length)return!1;for(let u=0;u<this.length;u++)if(this.get(u)!==o.get(u))return!1;return!0}isImmediateParentOf(o){if(this.length+1!==o.length)return!1;for(let u=0;u<this.length;u++)if(this.get(u)!==o.get(u))return!1;return!0}forEach(o){for(let u=this.offset,f=this.limit();u<f;u++)o(this.segments[u])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(o,u){const f=Math.min(o.length,u.length);for(let _=0;_<f;_++){const C=o.get(_),x=u.get(_);if(C<x)return-1;if(C>x)return 1}return o.length<u.length?-1:o.length>u.length?1:0}}class Ft extends Lo{construct(o,u,f){return new Ft(o,u,f)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...o){const u=[];for(const f of o){if(f.indexOf("//")>=0)throw new ye(pe.INVALID_ARGUMENT,`Invalid segment (${f}). Paths must not contain // in them.`);u.push(...f.split("/").filter(_=>_.length>0))}return new Ft(u)}static emptyPath(){return new Ft([])}}const Jn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Lo{construct(o,u,f){return new dn(o,u,f)}static isValidIdentifier(o){return Jn.test(o)}canonicalString(){return this.toArray().map(o=>(o=o.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(o)||(o="`"+o+"`"),o)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dn(["__name__"])}static fromServerFormat(o){const u=[];let f="",_=0;const C=()=>{if(0===f.length)throw new ye(pe.INVALID_ARGUMENT,`Invalid field path (${o}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);u.push(f),f=""};let x=!1;for(;_<o.length;){const V=o[_];if("\\"===V){if(_+1===o.length)throw new ye(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+o);const G=o[_+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new ye(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+o);f+=G,_+=2}else"`"===V?(x=!x,_++):"."!==V||x?(f+=V,_++):(C(),_++)}if(C(),x)throw new ye(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+o);return new dn(u)}static emptyPath(){return new dn([])}}class Wt{constructor(o){this.path=o}static fromPath(o){return new Wt(Ft.fromString(o))}static fromName(o){return new Wt(Ft.fromString(o).popFirst(5))}static empty(){return new Wt(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(o){return this.path.length>=2&&this.path.get(this.path.length-2)===o}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(o){return null!==o&&0===Ft.comparator(this.path,o.path)}toString(){return this.path.toString()}static comparator(o,u){return Ft.comparator(o.path,u.path)}static isDocumentKey(o){return o.length%2==0}static fromSegments(o){return new Wt(new Ft(o.slice()))}}class ri{constructor(o,u,f){this.readTime=o,this.documentKey=u,this.largestBatchId=f}static min(){return new ri(ln.min(),Wt.empty(),-1)}static max(){return new ri(ln.max(),Wt.empty(),-1)}}function zi(p,o){let u=p.readTime.compareTo(o.readTime);return 0!==u?u:(u=Wt.comparator(p.documentKey,o.documentKey),0!==u?u:wn(p.largestBatchId,o.largestBatchId))}const Wi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(o){this.onCommittedListeners.push(o)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(o=>o())}}function ei(p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,Ce.A)(function*(p){if(p.code!==pe.FAILED_PRECONDITION||p.message!==Wi)throw p;le("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class he{constructor(o){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,o(u=>{this.isDone=!0,this.result=u,this.nextCallback&&this.nextCallback(u)},u=>{this.isDone=!0,this.error=u,this.catchCallback&&this.catchCallback(u)})}catch(o){return this.next(void 0,o)}next(o,u){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(u,this.error):this.wrapSuccess(o,this.result):new he((f,_)=>{this.nextCallback=C=>{this.wrapSuccess(o,C).next(f,_)},this.catchCallback=C=>{this.wrapFailure(u,C).next(f,_)}})}toPromise(){return new Promise((o,u)=>{this.next(o,u)})}wrapUserFunction(o){try{const u=o();return u instanceof he?u:he.resolve(u)}catch(u){return he.reject(u)}}wrapSuccess(o,u){return o?this.wrapUserFunction(()=>o(u)):he.resolve(u)}wrapFailure(o,u){return o?this.wrapUserFunction(()=>o(u)):he.reject(u)}static resolve(o){return new he((u,f)=>{u(o)})}static reject(o){return new he((u,f)=>{f(o)})}static waitFor(o){return new he((u,f)=>{let _=0,C=0,x=!1;o.forEach(V=>{++_,V.next(()=>{++C,x&&C===_&&u()},G=>f(G))}),x=!0,C===_&&u()})}static or(o){let u=he.resolve(!1);for(const f of o)u=u.next(_=>_?he.resolve(_):f());return u}static forEach(o,u){const f=[];return o.forEach((_,C)=>{f.push(u.call(this,_,C))}),this.waitFor(f)}static mapArray(o,u){return new he((f,_)=>{const C=o.length,x=new Array(C);let V=0;for(let G=0;G<C;G++){const X=G;u(o[X]).next(ce=>{x[X]=ce,++V,V===C&&f(x)},ce=>_(ce))}})}static doWhile(o,u){return new he((f,_)=>{const C=()=>{!0===o()?u().next(()=>{C()},_):f()};C()})}}function Re(p){return"IndexedDbTransactionError"===p.name}let mr=(()=>{class p{constructor(u,f){this.previousValue=u,f&&(f.sequenceNumberHandler=_=>this.ie(_),this.se=_=>f.writeSequenceNumber(_))}ie(u){return this.previousValue=Math.max(u,this.previousValue),this.previousValue}next(){const u=++this.previousValue;return this.se&&this.se(u),u}}return p.oe=-1,p})();function vi(p){return null==p}function er(p){return 0===p&&1/p==-1/0}function lo(p){let o=0;for(const u in p)Object.prototype.hasOwnProperty.call(p,u)&&o++;return o}function bo(p,o){for(const u in p)Object.prototype.hasOwnProperty.call(p,u)&&o(u,p[u])}function ro(p){for(const o in p)if(Object.prototype.hasOwnProperty.call(p,o))return!1;return!0}class Ar{constructor(o,u){this.comparator=o,this.root=u||yi.EMPTY}insert(o,u){return new Ar(this.comparator,this.root.insert(o,u,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(o){return new Ar(this.comparator,this.root.remove(o,this.comparator).copy(null,null,yi.BLACK,null,null))}get(o){let u=this.root;for(;!u.isEmpty();){const f=this.comparator(o,u.key);if(0===f)return u.value;f<0?u=u.left:f>0&&(u=u.right)}return null}indexOf(o){let u=0,f=this.root;for(;!f.isEmpty();){const _=this.comparator(o,f.key);if(0===_)return u+f.left.size;_<0?f=f.left:(u+=f.left.size+1,f=f.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(o){return this.root.inorderTraversal(o)}forEach(o){this.inorderTraversal((u,f)=>(o(u,f),!1))}toString(){const o=[];return this.inorderTraversal((u,f)=>(o.push(`${u}:${f}`),!1)),`{${o.join(", ")}}`}reverseTraversal(o){return this.root.reverseTraversal(o)}getIterator(){return new as(this.root,null,this.comparator,!1)}getIteratorFrom(o){return new as(this.root,o,this.comparator,!1)}getReverseIterator(){return new as(this.root,null,this.comparator,!0)}getReverseIteratorFrom(o){return new as(this.root,o,this.comparator,!0)}}class as{constructor(o,u,f,_){this.isReverse=_,this.nodeStack=[];let C=1;for(;!o.isEmpty();)if(C=u?f(o.key,u):1,u&&_&&(C*=-1),C<0)o=this.isReverse?o.left:o.right;else{if(0===C){this.nodeStack.push(o);break}this.nodeStack.push(o),o=this.isReverse?o.right:o.left}}getNext(){let o=this.nodeStack.pop();const u={key:o.key,value:o.value};if(this.isReverse)for(o=o.left;!o.isEmpty();)this.nodeStack.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack.push(o),o=o.left;return u}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const o=this.nodeStack[this.nodeStack.length-1];return{key:o.key,value:o.value}}}class yi{constructor(o,u,f,_,C){this.key=o,this.value=u,this.color=f??yi.RED,this.left=_??yi.EMPTY,this.right=C??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(o,u,f,_,C){return new yi(o??this.key,u??this.value,f??this.color,_??this.left,C??this.right)}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,u,f){let _=this;const C=f(o,_.key);return _=C<0?_.copy(null,null,null,_.left.insert(o,u,f),null):0===C?_.copy(null,u,null,null,null):_.copy(null,null,null,null,_.right.insert(o,u,f)),_.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let o=this;return o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.removeMin(),null),o.fixUp()}remove(o,u){let f,_=this;if(u(o,_.key)<0)_.left.isEmpty()||_.left.isRed()||_.left.left.isRed()||(_=_.moveRedLeft()),_=_.copy(null,null,null,_.left.remove(o,u),null);else{if(_.left.isRed()&&(_=_.rotateRight()),_.right.isEmpty()||_.right.isRed()||_.right.left.isRed()||(_=_.moveRedRight()),0===u(o,_.key)){if(_.right.isEmpty())return yi.EMPTY;f=_.right.min(),_=_.copy(f.key,f.value,null,null,_.right.removeMin())}_=_.copy(null,null,null,null,_.right.remove(o,u))}return _.fixUp()}isRed(){return this.color}fixUp(){let o=this;return o.right.isRed()&&!o.left.isRed()&&(o=o.rotateLeft()),o.left.isRed()&&o.left.left.isRed()&&(o=o.rotateRight()),o.left.isRed()&&o.right.isRed()&&(o=o.colorFlip()),o}moveRedLeft(){let o=this.colorFlip();return o.right.left.isRed()&&(o=o.copy(null,null,null,null,o.right.rotateRight()),o=o.rotateLeft(),o=o.colorFlip()),o}moveRedRight(){let o=this.colorFlip();return o.left.left.isRed()&&(o=o.rotateRight(),o=o.colorFlip()),o}rotateLeft(){const o=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight(){const o=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip(){const o=this.left.copy(null,null,!this.left.color,null,null),u=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,u)}checkMaxDepth(){const o=this.check();return Math.pow(2,o)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const o=this.left.check();if(o!==this.right.check())throw De();return o+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1,yi.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(o,u,f,_,C){return this}insert(o,u,f){return new yi(o,u)}remove(o,u){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wn{constructor(o){this.comparator=o,this.data=new Ar(this.comparator)}has(o){return null!==this.data.get(o)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(o){return this.data.indexOf(o)}forEach(o){this.data.inorderTraversal((u,f)=>(o(u),!1))}forEachInRange(o,u){const f=this.data.getIteratorFrom(o[0]);for(;f.hasNext();){const _=f.getNext();if(this.comparator(_.key,o[1])>=0)return;u(_.key)}}forEachWhile(o,u){let f;for(f=void 0!==u?this.data.getIteratorFrom(u):this.data.getIterator();f.hasNext();)if(!o(f.getNext().key))return}firstAfterOrEqual(o){const u=this.data.getIteratorFrom(o);return u.hasNext()?u.getNext().key:null}getIterator(){return new ua(this.data.getIterator())}getIteratorFrom(o){return new ua(this.data.getIteratorFrom(o))}add(o){return this.copy(this.data.remove(o).insert(o,!0))}delete(o){return this.has(o)?this.copy(this.data.remove(o)):this}isEmpty(){return this.data.isEmpty()}unionWith(o){let u=this;return u.size<o.size&&(u=o,o=this),o.forEach(f=>{u=u.add(f)}),u}isEqual(o){if(!(o instanceof Wn)||this.size!==o.size)return!1;const u=this.data.getIterator(),f=o.data.getIterator();for(;u.hasNext();){const _=u.getNext().key,C=f.getNext().key;if(0!==this.comparator(_,C))return!1}return!0}toArray(){const o=[];return this.forEach(u=>{o.push(u)}),o}toString(){const o=[];return this.forEach(u=>o.push(u)),"SortedSet("+o.toString()+")"}copy(o){const u=new Wn(this.comparator);return u.data=o,u}}class ua{constructor(o){this.iter=o}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ri{constructor(o){this.fields=o,o.sort(dn.comparator)}static empty(){return new Ri([])}unionWith(o){let u=new Wn(dn.comparator);for(const f of this.fields)u=u.add(f);for(const f of o)u=u.add(f);return new Ri(u.toArray())}covers(o){for(const u of this.fields)if(u.isPrefixOf(o))return!0;return!1}isEqual(o){return Br(this.fields,o.fields,(u,f)=>u.isEqual(f))}}class js extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vi{constructor(o){this.binaryString=o}static fromBase64String(o){const u=function(_){try{return atob(_)}catch(C){throw typeof DOMException<"u"&&C instanceof DOMException?new js("Invalid base64 string: "+C):C}}(o);return new Vi(u)}static fromUint8Array(o){const u=function(_){let C="";for(let x=0;x<_.length;++x)C+=String.fromCharCode(_[x]);return C}(o);return new Vi(u)}[Symbol.iterator](){let o=0;return{next:()=>o<this.binaryString.length?{value:this.binaryString.charCodeAt(o++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(u){const f=new Uint8Array(u.length);for(let _=0;_<u.length;_++)f[_]=u.charCodeAt(_);return f}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(o){return wn(this.binaryString,o.binaryString)}isEqual(o){return this.binaryString===o.binaryString}}Vi.EMPTY_BYTE_STRING=new Vi("");const Bo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(p){if(Ve(!!p),"string"==typeof p){let o=0;const u=Bo.exec(p);if(Ve(!!u),u[1]){let _=u[1];_=(_+"000000000").substr(0,9),o=Number(_)}const f=new Date(p);return{seconds:Math.floor(f.getTime()/1e3),nanos:o}}return{seconds:Mi(p.seconds),nanos:Mi(p.nanos)}}function Mi(p){return"number"==typeof p?p:"string"==typeof p?Number(p):0}function xs(p){return"string"==typeof p?Vi.fromBase64String(p):Vi.fromUint8Array(p)}function Fc(p){var o,u;return"server_timestamp"===(null===(u=((null===(o=p?.mapValue)||void 0===o?void 0:o.fields)||{}).__type__)||void 0===u?void 0:u.stringValue)}function la(p){const o=p.mapValue.fields.__previous_value__;return Fc(o)?la(o):o}function To(p){const o=Jo(p.mapValue.fields.__local_write_time__.timestampValue);return new Yn(o.seconds,o.nanos)}class na{constructor(o,u,f,_,C,x,V,G,X){this.databaseId=o,this.appId=u,this.persistenceKey=f,this.host=_,this.ssl=C,this.forceLongPolling=x,this.autoDetectLongPolling=V,this.longPollingOptions=G,this.useFetchStreams=X}}class da{constructor(o,u){this.projectId=o,this.database=u||"(default)"}static empty(){return new da("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(o){return o instanceof da&&o.projectId===this.projectId&&o.database===this.database}}const cs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ss(p){return"nullValue"in p?0:"booleanValue"in p?1:"integerValue"in p||"doubleValue"in p?2:"timestampValue"in p?3:"stringValue"in p?5:"bytesValue"in p?6:"referenceValue"in p?7:"geoPointValue"in p?8:"arrayValue"in p?9:"mapValue"in p?Fc(p)?4:ha(p)?9007199254740991:10:De()}function io(p,o){if(p===o)return!0;const u=Ss(p);if(u!==Ss(o))return!1;switch(u){case 0:case 9007199254740991:return!0;case 1:return p.booleanValue===o.booleanValue;case 4:return To(p).isEqual(To(o));case 3:return function(_,C){if("string"==typeof _.timestampValue&&"string"==typeof C.timestampValue&&_.timestampValue.length===C.timestampValue.length)return _.timestampValue===C.timestampValue;const x=Jo(_.timestampValue),V=Jo(C.timestampValue);return x.seconds===V.seconds&&x.nanos===V.nanos}(p,o);case 5:return p.stringValue===o.stringValue;case 6:return C=o,xs(p.bytesValue).isEqual(xs(C.bytesValue));case 7:return p.referenceValue===o.referenceValue;case 8:return function(_,C){return Mi(_.geoPointValue.latitude)===Mi(C.geoPointValue.latitude)&&Mi(_.geoPointValue.longitude)===Mi(C.geoPointValue.longitude)}(p,o);case 2:return function(_,C){if("integerValue"in _&&"integerValue"in C)return Mi(_.integerValue)===Mi(C.integerValue);if("doubleValue"in _&&"doubleValue"in C){const x=Mi(_.doubleValue),V=Mi(C.doubleValue);return x===V?er(x)===er(V):isNaN(x)&&isNaN(V)}return!1}(p,o);case 9:return Br(p.arrayValue.values||[],o.arrayValue.values||[],io);case 10:return function(_,C){const x=_.mapValue.fields||{},V=C.mapValue.fields||{};if(lo(x)!==lo(V))return!1;for(const G in x)if(x.hasOwnProperty(G)&&(void 0===V[G]||!io(x[G],V[G])))return!1;return!0}(p,o);default:return De()}var C}function Ds(p,o){return void 0!==(p.values||[]).find(u=>io(u,o))}function Ki(p,o){if(p===o)return 0;const u=Ss(p),f=Ss(o);if(u!==f)return wn(u,f);switch(u){case 0:case 9007199254740991:return 0;case 1:return wn(p.booleanValue,o.booleanValue);case 2:return function(C,x){const V=Mi(C.integerValue||C.doubleValue),G=Mi(x.integerValue||x.doubleValue);return V<G?-1:V>G?1:V===G?0:isNaN(V)?isNaN(G)?0:-1:1}(p,o);case 3:return us(p.timestampValue,o.timestampValue);case 4:return us(To(p),To(o));case 5:return wn(p.stringValue,o.stringValue);case 6:return function(C,x){const V=xs(C),G=xs(x);return V.compareTo(G)}(p.bytesValue,o.bytesValue);case 7:return function(C,x){const V=C.split("/"),G=x.split("/");for(let X=0;X<V.length&&X<G.length;X++){const ce=wn(V[X],G[X]);if(0!==ce)return ce}return wn(V.length,G.length)}(p.referenceValue,o.referenceValue);case 8:return function(C,x){const V=wn(Mi(C.latitude),Mi(x.latitude));return 0!==V?V:wn(Mi(C.longitude),Mi(x.longitude))}(p.geoPointValue,o.geoPointValue);case 9:return function(C,x){const V=C.values||[],G=x.values||[];for(let X=0;X<V.length&&X<G.length;++X){const ce=Ki(V[X],G[X]);if(ce)return ce}return wn(V.length,G.length)}(p.arrayValue,o.arrayValue);case 10:return function(C,x){if(C===cs.mapValue&&x===cs.mapValue)return 0;if(C===cs.mapValue)return 1;if(x===cs.mapValue)return-1;const V=C.fields||{},G=Object.keys(V),X=x.fields||{},ce=Object.keys(X);G.sort(),ce.sort();for(let Ie=0;Ie<G.length&&Ie<ce.length;++Ie){const Fe=wn(G[Ie],ce[Ie]);if(0!==Fe)return Fe;const ht=Ki(V[G[Ie]],X[ce[Ie]]);if(0!==ht)return ht}return wn(G.length,ce.length)}(p.mapValue,o.mapValue);default:throw De()}}function us(p,o){if("string"==typeof p&&"string"==typeof o&&p.length===o.length)return wn(p,o);const u=Jo(p),f=Jo(o),_=wn(u.seconds,f.seconds);return 0!==_?_:wn(u.nanos,f.nanos)}function fa(p){return Sa(p)}function Sa(p){return"nullValue"in p?"null":"booleanValue"in p?""+p.booleanValue:"integerValue"in p?""+p.integerValue:"doubleValue"in p?""+p.doubleValue:"timestampValue"in p?function(u){const f=Jo(u);return`time(${f.seconds},${f.nanos})`}(p.timestampValue):"stringValue"in p?p.stringValue:"bytesValue"in p?xs(p.bytesValue).toBase64():"referenceValue"in p?Wt.fromName(p.referenceValue).toString():"geoPointValue"in p?function(u){return`geo(${u.latitude},${u.longitude})`}(p.geoPointValue):"arrayValue"in p?function(u){let f="[",_=!0;for(const C of u.values||[])_?_=!1:f+=",",f+=Sa(C);return f+"]"}(p.arrayValue):"mapValue"in p?function(u){const f=Object.keys(u.fields||{}).sort();let _="{",C=!0;for(const x of f)C?C=!1:_+=",",_+=`${x}:${Sa(u.fields[x])}`;return _+"}"}(p.mapValue):De()}function Hi(p,o){return{referenceValue:`projects/${p.projectId}/databases/${p.database}/documents/${o.path.canonicalString()}`}}function Gs(p){return!!p&&"integerValue"in p}function ls(p){return!!p&&"arrayValue"in p}function hu(p){return!!p&&"nullValue"in p}function fo(p){return!!p&&"doubleValue"in p&&isNaN(Number(p.doubleValue))}function za(p){return!!p&&"mapValue"in p}function es(p){if(p.geoPointValue)return{geoPointValue:Object.assign({},p.geoPointValue)};if(p.timestampValue&&"object"==typeof p.timestampValue)return{timestampValue:Object.assign({},p.timestampValue)};if(p.mapValue){const o={mapValue:{fields:{}}};return bo(p.mapValue.fields,(u,f)=>o.mapValue.fields[u]=es(f)),o}if(p.arrayValue){const o={arrayValue:{values:[]}};for(let u=0;u<(p.arrayValue.values||[]).length;++u)o.arrayValue.values[u]=es(p.arrayValue.values[u]);return o}return Object.assign({},p)}function ha(p){return"__max__"===(((p.mapValue||{}).fields||{}).__type__||{}).stringValue}class ho{constructor(o){this.value=o}static empty(){return new ho({mapValue:{}})}field(o){if(o.isEmpty())return this.value;{let u=this.value;for(let f=0;f<o.length-1;++f)if(u=(u.mapValue.fields||{})[o.get(f)],!za(u))return null;return u=(u.mapValue.fields||{})[o.lastSegment()],u||null}}set(o,u){this.getFieldsMap(o.popLast())[o.lastSegment()]=es(u)}setAll(o){let u=dn.emptyPath(),f={},_=[];o.forEach((x,V)=>{if(!u.isImmediateParentOf(V)){const G=this.getFieldsMap(u);this.applyChanges(G,f,_),f={},_=[],u=V.popLast()}x?f[V.lastSegment()]=es(x):_.push(V.lastSegment())});const C=this.getFieldsMap(u);this.applyChanges(C,f,_)}delete(o){const u=this.field(o.popLast());za(u)&&u.mapValue.fields&&delete u.mapValue.fields[o.lastSegment()]}isEqual(o){return io(this.value,o.value)}getFieldsMap(o){let u=this.value;u.mapValue.fields||(u.mapValue={fields:{}});for(let f=0;f<o.length;++f){let _=u.mapValue.fields[o.get(f)];za(_)&&_.mapValue.fields||(_={mapValue:{fields:{}}},u.mapValue.fields[o.get(f)]=_),u=_}return u.mapValue.fields}applyChanges(o,u,f){bo(u,(_,C)=>o[_]=C);for(const _ of f)delete o[_]}clone(){return new ho(es(this.value))}}function Lc(p){const o=[];return bo(p.fields,(u,f)=>{const _=new dn([u]);if(za(f)){const C=Lc(f.mapValue).fields;if(0===C.length)o.push(_);else for(const x of C)o.push(_.child(x))}else o.push(_)}),new Ri(o)}class Qr{constructor(o,u,f,_,C,x,V){this.key=o,this.documentType=u,this.version=f,this.readTime=_,this.createTime=C,this.data=x,this.documentState=V}static newInvalidDocument(o){return new Qr(o,0,ln.min(),ln.min(),ln.min(),ho.empty(),0)}static newFoundDocument(o,u,f,_){return new Qr(o,1,u,ln.min(),f,_,0)}static newNoDocument(o,u){return new Qr(o,2,u,ln.min(),ln.min(),ho.empty(),0)}static newUnknownDocument(o,u){return new Qr(o,3,u,ln.min(),ln.min(),ho.empty(),2)}convertToFoundDocument(o,u){return!this.createTime.isEqual(ln.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=o),this.version=o,this.documentType=1,this.data=u,this.documentState=0,this}convertToNoDocument(o){return this.version=o,this.documentType=2,this.data=ho.empty(),this.documentState=0,this}convertToUnknownDocument(o){return this.version=o,this.documentType=3,this.data=ho.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ln.min(),this}setReadTime(o){return this.readTime=o,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(o){return o instanceof Qr&&this.key.isEqual(o.key)&&this.version.isEqual(o.version)&&this.documentType===o.documentType&&this.documentState===o.documentState&&this.data.isEqual(o.data)}mutableCopy(){return new Qr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Eo{constructor(o,u){this.position=o,this.inclusive=u}}function Vu(p,o,u){let f=0;for(let _=0;_<p.position.length;_++){const C=o[_],x=p.position[_];if(f=C.field.isKeyField()?Wt.comparator(Wt.fromName(x.referenceValue),u.key):Ki(x,u.data.field(C.field)),"desc"===C.dir&&(f*=-1),0!==f)break}return f}function pa(p,o){if(null===p)return null===o;if(null===o||p.inclusive!==o.inclusive||p.position.length!==o.position.length)return!1;for(let u=0;u<p.position.length;u++)if(!io(p.position[u],o.position[u]))return!1;return!0}class gc{constructor(o,u="asc"){this.field=o,this.dir=u}}function qa(p,o){return p.dir===o.dir&&p.field.isEqual(o.field)}class on{}class Zn extends on{constructor(o,u,f){super(),this.field=o,this.op=u,this.value=f}static create(o,u,f){return o.isKeyField()?"in"===u||"not-in"===u?this.createKeyFieldInFilter(o,u,f):new Vc(o,u,f):"array-contains"===u?new Ei(o,f):"in"===u?new _a(o,f):"not-in"===u?new xd(o,f):"array-contains-any"===u?new Gr(o,f):new Zn(o,u,f)}static createKeyFieldInFilter(o,u,f){return"in"===u?new mc(o,f):new ma(o,f)}matches(o){const u=o.data.field(this.field);return"!="===this.op?null!==u&&this.matchesComparison(Ki(u,this.value)):null!==u&&Ss(this.value)===Ss(u)&&this.matchesComparison(Ki(u,this.value))}matchesComparison(o){switch(this.op){case"<":return o<0;case"<=":return o<=0;case"==":return 0===o;case"!=":return 0!==o;case">":return o>0;case">=":return o>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends on{constructor(o,u){super(),this.filters=o,this.op=u,this.ae=null}static create(o,u){return new hr(o,u)}matches(o){return $s(this)?void 0===this.filters.find(u=>!u.matches(o)):void 0!==this.filters.find(u=>u.matches(o))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((o,u)=>o.concat(u.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $s(p){return"and"===p.op}function Ma(p){return function pu(p){for(const o of p.filters)if(o instanceof hr)return!1;return!0}(p)&&$s(p)}function oo(p){if(p instanceof Zn)return p.field.canonicalString()+p.op.toString()+fa(p.value);if(Ma(p))return p.filters.map(o=>oo(o)).join(",");{const o=p.filters.map(u=>oo(u)).join(",");return`${p.op}(${o})`}}function ga(p,o){return p instanceof Zn?(f=p,(_=o)instanceof Zn&&f.op===_.op&&f.field.isEqual(_.field)&&io(f.value,_.value)):p instanceof hr?function(f,_){return _ instanceof hr&&f.op===_.op&&f.filters.length===_.filters.length&&f.filters.reduce((C,x,V)=>C&&ga(x,_.filters[V]),!0)}(p,o):void De();var f,_}function ra(p){return p instanceof Zn?`${(u=p).field.canonicalString()} ${u.op} ${fa(u.value)}`:p instanceof hr?function(u){return u.op.toString()+" {"+u.getFilters().map(ra).join(" ,")+"}"}(p):"Filter";var u}class Vc extends Zn{constructor(o,u,f){super(o,u,f),this.key=Wt.fromName(f.referenceValue)}matches(o){const u=Wt.comparator(o.key,this.key);return this.matchesComparison(u)}}class mc extends Zn{constructor(o,u){super(o,"in",u),this.keys=so(0,u)}matches(o){return this.keys.some(u=>u.isEqual(o.key))}}class ma extends Zn{constructor(o,u){super(o,"not-in",u),this.keys=so(0,u)}matches(o){return!this.keys.some(u=>u.isEqual(o.key))}}function so(p,o){var u;return((null===(u=o.arrayValue)||void 0===u?void 0:u.values)||[]).map(f=>Wt.fromName(f.referenceValue))}class Ei extends Zn{constructor(o,u){super(o,"array-contains",u)}matches(o){const u=o.data.field(this.field);return ls(u)&&Ds(u.arrayValue,this.value)}}class _a extends Zn{constructor(o,u){super(o,"in",u)}matches(o){const u=o.data.field(this.field);return null!==u&&Ds(this.value.arrayValue,u)}}class xd extends Zn{constructor(o,u){super(o,"not-in",u)}matches(o){if(Ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const u=o.data.field(this.field);return null!==u&&!Ds(this.value.arrayValue,u)}}class Gr extends Zn{constructor(o,u){super(o,"array-contains-any",u)}matches(o){const u=o.data.field(this.field);return!(!ls(u)||!u.arrayValue.values)&&u.arrayValue.values.some(f=>Ds(this.value.arrayValue,f))}}class Bc{constructor(o,u=null,f=[],_=[],C=null,x=null,V=null){this.path=o,this.collectionGroup=u,this.orderBy=f,this.filters=_,this.limit=C,this.startAt=x,this.endAt=V,this.ue=null}}function Tr(p,o=null,u=[],f=[],_=null,C=null,x=null){return new Bc(p,o,u,f,_,C,x)}function jo(p){const o=Ne(p);if(null===o.ue){let u=o.path.canonicalString();null!==o.collectionGroup&&(u+="|cg:"+o.collectionGroup),u+="|f:",u+=o.filters.map(f=>oo(f)).join(","),u+="|ob:",u+=o.orderBy.map(f=>{return(C=f).field.canonicalString()+C.dir;var C}).join(","),vi(o.limit)||(u+="|l:",u+=o.limit),o.startAt&&(u+="|lb:",u+=o.startAt.inclusive?"b:":"a:",u+=o.startAt.position.map(f=>fa(f)).join(",")),o.endAt&&(u+="|ub:",u+=o.endAt.inclusive?"a:":"b:",u+=o.endAt.position.map(f=>fa(f)).join(",")),o.ue=u}return o.ue}function al(p,o){if(p.limit!==o.limit||p.orderBy.length!==o.orderBy.length)return!1;for(let u=0;u<p.orderBy.length;u++)if(!qa(p.orderBy[u],o.orderBy[u]))return!1;if(p.filters.length!==o.filters.length)return!1;for(let u=0;u<p.filters.length;u++)if(!ga(p.filters[u],o.filters[u]))return!1;return p.collectionGroup===o.collectionGroup&&!!p.path.isEqual(o.path)&&!!pa(p.startAt,o.startAt)&&pa(p.endAt,o.endAt)}function Uc(p){return Wt.isDocumentKey(p.path)&&null===p.collectionGroup&&0===p.filters.length}class Xi{constructor(o,u=null,f=[],_=[],C=null,x="F",V=null,G=null){this.path=o,this.collectionGroup=u,this.explicitOrderBy=f,this.filters=_,this.limit=C,this.limitType=x,this.startAt=V,this.endAt=G,this.ce=null,this.le=null,this.he=null}}function Go(p){return new Xi(p)}function Yr(p){return 0===p.filters.length&&null===p.limit&&null==p.startAt&&null==p.endAt&&(0===p.explicitOrderBy.length||1===p.explicitOrderBy.length&&p.explicitOrderBy[0].field.isKeyField())}function Rs(p){return null!==p.collectionGroup}function _c(p){const o=Ne(p);if(null===o.ce){o.ce=[];const u=new Set;for(const C of o.explicitOrderBy)o.ce.push(C),u.add(C.field.canonicalString());const f=o.explicitOrderBy.length>0?o.explicitOrderBy[o.explicitOrderBy.length-1].dir:"asc";(function(x){let V=new Wn(dn.comparator);return x.filters.forEach(G=>{G.getFlattenedFilters().forEach(X=>{X.isInequality()&&(V=V.add(X.field))})}),V})(o).forEach(C=>{u.has(C.canonicalString())||C.isKeyField()||o.ce.push(new gc(C,f))}),u.has(dn.keyField().canonicalString())||o.ce.push(new gc(dn.keyField(),f))}return o.ce}function So(p){const o=Ne(p);return o.le||(o.le=function cl(p,o){if("F"===p.limitType)return Tr(p.path,p.collectionGroup,o,p.filters,p.limit,p.startAt,p.endAt);{o=o.map(_=>new gc(_.field,"desc"===_.dir?"asc":"desc"));const u=p.endAt?new Eo(p.endAt.position,p.endAt.inclusive):null,f=p.startAt?new Eo(p.startAt.position,p.startAt.inclusive):null;return Tr(p.path,p.collectionGroup,o,p.filters,p.limit,u,f)}}(o,_c(p))),o.le}function Y(p,o){const u=p.filters.concat([o]);return new Xi(p.path,p.collectionGroup,p.explicitOrderBy.slice(),u,p.limit,p.limitType,p.startAt,p.endAt)}function Z(p,o,u){return new Xi(p.path,p.collectionGroup,p.explicitOrderBy.slice(),p.filters.slice(),o,u,p.startAt,p.endAt)}function H(p,o){return al(So(p),So(o))&&p.limitType===o.limitType}function se(p){return`${jo(So(p))}|lt:${p.limitType}`}function xe(p){return`Query(target=${function(u){let f=u.path.canonicalString();return null!==u.collectionGroup&&(f+=" collectionGroup="+u.collectionGroup),u.filters.length>0&&(f+=`, filters: [${u.filters.map(_=>ra(_)).join(", ")}]`),vi(u.limit)||(f+=", limit: "+u.limit),u.orderBy.length>0&&(f+=`, orderBy: [${u.orderBy.map(_=>{return`${(x=_).field.canonicalString()} (${x.dir})`;var x}).join(", ")}]`),u.startAt&&(f+=", startAt: ",f+=u.startAt.inclusive?"b:":"a:",f+=u.startAt.position.map(_=>fa(_)).join(",")),u.endAt&&(f+=", endAt: ",f+=u.endAt.inclusive?"a:":"b:",f+=u.endAt.position.map(_=>fa(_)).join(",")),`Target(${f})`}(So(p))}; limitType=${p.limitType})`}function Ot(p,o){return o.isFoundDocument()&&function(f,_){const C=_.key.path;return null!==f.collectionGroup?_.key.hasCollectionId(f.collectionGroup)&&f.path.isPrefixOf(C):Wt.isDocumentKey(f.path)?f.path.isEqual(C):f.path.isImmediateParentOf(C)}(p,o)&&function(f,_){for(const C of _c(f))if(!C.field.isKeyField()&&null===_.data.field(C.field))return!1;return!0}(p,o)&&function(f,_){for(const C of f.filters)if(!C.matches(_))return!1;return!0}(p,o)&&(_=o,!((f=p).startAt&&!function(x,V,G){const X=Vu(x,V,G);return x.inclusive?X<=0:X<0}(f.startAt,_c(f),_)||f.endAt&&!function(x,V,G){const X=Vu(x,V,G);return x.inclusive?X>=0:X>0}(f.endAt,_c(f),_)));var f,_}function $o(p){return(o,u)=>{let f=!1;for(const _ of _c(p)){const C=va(_,o,u);if(0!==C)return C;f=f||_.field.isKeyField()}return 0}}function va(p,o,u){const f=p.field.isKeyField()?Wt.comparator(o.key,u.key):function(C,x,V){const G=x.data.field(C),X=V.data.field(C);return null!==G&&null!==X?Ki(G,X):De()}(p.field,o,u);switch(p.dir){case"asc":return f;case"desc":return-1*f;default:return De()}}class Do{constructor(o,u){this.mapKeyFn=o,this.equalsFn=u,this.inner={},this.innerSize=0}get(o){const u=this.mapKeyFn(o),f=this.inner[u];if(void 0!==f)for(const[_,C]of f)if(this.equalsFn(_,o))return C}has(o){return void 0!==this.get(o)}set(o,u){const f=this.mapKeyFn(o),_=this.inner[f];if(void 0===_)return this.inner[f]=[[o,u]],void this.innerSize++;for(let C=0;C<_.length;C++)if(this.equalsFn(_[C][0],o))return void(_[C]=[o,u]);_.push([o,u]),this.innerSize++}delete(o){const u=this.mapKeyFn(o),f=this.inner[u];if(void 0===f)return!1;for(let _=0;_<f.length;_++)if(this.equalsFn(f[_][0],o))return 1===f.length?delete this.inner[u]:f.splice(_,1),this.innerSize--,!0;return!1}forEach(o){bo(this.inner,(u,f)=>{for(const[_,C]of f)o(_,C)})}isEmpty(){return ro(this.inner)}size(){return this.innerSize}}const zs=new Ar(Wt.comparator);function Sn(){return zs}const gu=new Ar(Wt.comparator);function Ms(...p){let o=gu;for(const u of p)o=o.insert(u.key,u);return o}function Zr(p){let o=gu;return p.forEach((u,f)=>o=o.insert(u,f.overlayedDocument)),o}function fs(){return fn()}function Ka(){return fn()}function fn(){return new Do(p=>p.toString(),(p,o)=>p.isEqual(o))}const vc=new Ar(Wt.comparator),jc=new Wn(Wt.comparator);function tr(...p){let o=jc;for(const u of p)o=o.add(u);return o}const Sd=new Wn(wn);function ar(p,o){if(p.useProto3Json){if(isNaN(o))return{doubleValue:"NaN"};if(o===1/0)return{doubleValue:"Infinity"};if(o===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:er(o)?"-0":o}}function Xa(p){return{integerValue:""+p}}function ul(p,o){return function Li(p){return"number"==typeof p&&Number.isInteger(p)&&!er(p)&&p<=Number.MAX_SAFE_INTEGER&&p>=Number.MIN_SAFE_INTEGER}(o)?Xa(o):ar(p,o)}class Ur{constructor(){this._=void 0}}function ll(p,o,u){return p instanceof mu?function(_,C){const x={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:_.seconds,nanos:_.nanoseconds}}}};return C&&Fc(C)&&(C=la(C)),C&&(x.fields.__previous_value__=C),{mapValue:x}}(u,o):p instanceof ia?Ul(p,o):p instanceof _u?Ec(p,o):function(_,C){const x=yc(_,C),V=Hc(x)+Hc(_.Pe);return Gs(x)&&Gs(_.Pe)?Xa(V):ar(_.serializer,V)}(p,o)}function Uu(p,o,u){return p instanceof ia?Ul(p,o):p instanceof _u?Ec(p,o):u}function yc(p,o){return p instanceof Jr?Gs(f=o)||(C=f)&&"doubleValue"in C?o:{integerValue:0}:null;var f,C}class mu extends Ur{}class ia extends Ur{constructor(o){super(),this.elements=o}}function Ul(p,o){const u=cr(o);for(const f of p.elements)u.some(_=>io(_,f))||u.push(f);return{arrayValue:{values:u}}}class _u extends Ur{constructor(o){super(),this.elements=o}}function Ec(p,o){let u=cr(o);for(const f of p.elements)u=u.filter(_=>!io(_,f));return{arrayValue:{values:u}}}class Jr extends Ur{constructor(o,u){super(),this.serializer=o,this.Pe=u}}function Hc(p){return Mi(p.integerValue||p.doubleValue)}function cr(p){return ls(p)&&p.arrayValue.values?p.arrayValue.values.slice():[]}class Na{constructor(o,u){this.version=o,this.transformResults=u}}class Gn{constructor(o,u){this.updateTime=o,this.exists=u}static none(){return new Gn}static exists(o){return new Gn(void 0,o)}static updateTime(o){return new Gn(o)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(o){return this.exists===o.exists&&(this.updateTime?!!o.updateTime&&this.updateTime.isEqual(o.updateTime):!o.updateTime)}}function Kn(p,o){return void 0!==p.updateTime?o.isFoundDocument()&&o.version.isEqual(p.updateTime):void 0===p.exists||p.exists===o.isFoundDocument()}class Or{}function Zt(p,o){if(!p.hasLocalMutations||o&&0===o.fields.length)return null;if(null===o)return p.isNoDocument()?new ut(p.key,Gn.none()):new F(p.key,p.data,Gn.none());{const u=p.data,f=ho.empty();let _=new Wn(dn.comparator);for(let C of o.fields)if(!_.has(C)){let x=u.field(C);null===x&&C.length>1&&(C=C.popLast(),x=u.field(C)),null===x?f.delete(C):f.set(C,x),_=_.add(C)}return new re(p.key,f,new Ri(_.toArray()),Gn.none())}}function Dd(p,o,u){p instanceof F?function(_,C,x){const V=_.value.clone(),G=ne(_.fieldTransforms,C,x.transformResults);V.setAll(G),C.convertToFoundDocument(x.version,V).setHasCommittedMutations()}(p,o,u):p instanceof re?function(_,C,x){if(!Kn(_.precondition,C))return void C.convertToUnknownDocument(x.version);const V=ne(_.fieldTransforms,C,x.transformResults),G=C.data;G.setAll(W(_)),G.setAll(V),C.convertToFoundDocument(x.version,G).setHasCommittedMutations()}(p,o,u):o.convertToNoDocument(u.version).setHasCommittedMutations()}function _r(p,o,u,f){return p instanceof F?function(C,x,V,G){if(!Kn(C.precondition,x))return V;const X=C.value.clone(),ce=we(C.fieldTransforms,G,x);return X.setAll(ce),x.convertToFoundDocument(x.version,X).setHasLocalMutations(),null}(p,o,u,f):p instanceof re?function(C,x,V,G){if(!Kn(C.precondition,x))return V;const X=we(C.fieldTransforms,G,x),ce=x.data;return ce.setAll(W(C)),ce.setAll(X),x.convertToFoundDocument(x.version,ce).setHasLocalMutations(),null===V?null:V.unionWith(C.fieldMask.fields).unionWith(C.fieldTransforms.map(Ie=>Ie.field))}(p,o,u,f):(V=u,Kn(p.precondition,x=o)?(x.convertToNoDocument(x.version).setHasLocalMutations(),null):V);var x,V}function Ah(p,o){let u=null;for(const f of p.fieldTransforms){const _=o.data.field(f.field),C=yc(f.transform,_||null);null!=C&&(null===u&&(u=ho.empty()),u.set(f.field,C))}return u||null}function po(p,o){return p.type===o.type&&!!p.key.isEqual(o.key)&&!!p.precondition.isEqual(o.precondition)&&(_=o.fieldTransforms,!!(void 0===(f=p.fieldTransforms)&&void 0===_||f&&_&&Br(f,_,(C,x)=>function Ci(p,o){return p.field.isEqual(o.field)&&(_=o.transform,(f=p.transform)instanceof ia&&_ instanceof ia||f instanceof _u&&_ instanceof _u?Br(f.elements,_.elements,io):f instanceof Jr&&_ instanceof Jr?io(f.Pe,_.Pe):f instanceof mu&&_ instanceof mu);var f,_}(C,x))))&&(0===p.type?p.value.isEqual(o.value):1!==p.type||p.data.isEqual(o.data)&&p.fieldMask.isEqual(o.fieldMask));var f,_}class F extends Or{constructor(o,u,f,_=[]){super(),this.key=o,this.value=u,this.precondition=f,this.fieldTransforms=_,this.type=0}getFieldMask(){return null}}class re extends Or{constructor(o,u,f,_,C=[]){super(),this.key=o,this.data=u,this.fieldMask=f,this.precondition=_,this.fieldTransforms=C,this.type=1}getFieldMask(){return this.fieldMask}}function W(p){const o=new Map;return p.fieldMask.fields.forEach(u=>{if(!u.isEmpty()){const f=p.data.field(u);o.set(u,f)}}),o}function ne(p,o,u){const f=new Map;Ve(p.length===u.length);for(let _=0;_<u.length;_++){const C=p[_],x=C.transform,V=o.data.field(C.field);f.set(C.field,Uu(x,V,u[_]))}return f}function we(p,o,u){const f=new Map;for(const _ of p){const C=_.transform,x=u.data.field(_.field);f.set(_.field,ll(C,x,o))}return f}class ut extends Or{constructor(o,u){super(),this.key=o,this.precondition=u,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mt extends Or{constructor(o,u){super(),this.key=o,this.precondition=u,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vn{constructor(o,u,f,_){this.batchId=o,this.localWriteTime=u,this.baseMutations=f,this.mutations=_}applyToRemoteDocument(o,u){const f=u.mutationResults;for(let _=0;_<this.mutations.length;_++){const C=this.mutations[_];C.key.isEqual(o.key)&&Dd(C,o,f[_])}}applyToLocalView(o,u){for(const f of this.baseMutations)f.key.isEqual(o.key)&&(u=_r(f,o,u,this.localWriteTime));for(const f of this.mutations)f.key.isEqual(o.key)&&(u=_r(f,o,u,this.localWriteTime));return u}applyToLocalDocumentSet(o,u){const f=Ka();return this.mutations.forEach(_=>{const C=o.get(_.key),x=C.overlayedDocument;let V=this.applyToLocalView(x,C.mutatedFields);V=u.has(_.key)?null:V;const G=Zt(x,V);null!==G&&f.set(_.key,G),x.isValidDocument()||x.convertToNoDocument(ln.min())}),f}keys(){return this.mutations.reduce((o,u)=>o.add(u.key),tr())}isEqual(o){return this.batchId===o.batchId&&Br(this.mutations,o.mutations,(u,f)=>po(u,f))&&Br(this.baseMutations,o.baseMutations,(u,f)=>po(u,f))}}class hn{constructor(o,u,f,_){this.batch=o,this.commitVersion=u,this.mutationResults=f,this.docVersions=_}static from(o,u,f){Ve(o.mutations.length===f.length);let _=function(){return vc}();const C=o.mutations;for(let x=0;x<C.length;x++)_=_.insert(C[x].key,f[x].version);return new hn(o,u,f,_)}}class $r{constructor(o,u){this.largestBatchId=o,this.mutation=u}getKey(){return this.mutation.key}isEqual(o){return null!==o&&this.mutation===o.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class wr{constructor(o,u){this.count=o,this.unchangedNames=u}}var dr,We;function ts(p){if(void 0===p)return gt("GRPC error has no .code"),pe.UNKNOWN;switch(p){case dr.OK:return pe.OK;case dr.CANCELLED:return pe.CANCELLED;case dr.UNKNOWN:return pe.UNKNOWN;case dr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case dr.INTERNAL:return pe.INTERNAL;case dr.UNAVAILABLE:return pe.UNAVAILABLE;case dr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case dr.NOT_FOUND:return pe.NOT_FOUND;case dr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case dr.ABORTED:return pe.ABORTED;case dr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case dr.DATA_LOSS:return pe.DATA_LOSS;default:return De()}}(We=dr||(dr={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";const Ya=new pt([4294967295,4294967295],0);function Oi(p){const o=function Ro(){return new TextEncoder}().encode(p),u=new Ue;return u.update(o),new Uint8Array(u.digest())}function ya(p){const o=new DataView(p.buffer),u=o.getUint32(0,!0),f=o.getUint32(4,!0),_=o.getUint32(8,!0),C=o.getUint32(12,!0);return[new pt([u,f],0),new pt([_,C],0)]}class _n{constructor(o,u,f){if(this.bitmap=o,this.padding=u,this.hashCount=f,u<0||u>=8)throw new hs(`Invalid padding: ${u}`);if(f<0)throw new hs(`Invalid hash count: ${f}`);if(o.length>0&&0===this.hashCount)throw new hs(`Invalid hash count: ${f}`);if(0===o.length&&0!==u)throw new hs(`Invalid padding when bitmap length is 0: ${u}`);this.Ie=8*o.length-u,this.Te=pt.fromNumber(this.Ie)}Ee(o,u,f){let _=o.add(u.multiply(pt.fromNumber(f)));return 1===_.compare(Ya)&&(_=new pt([_.getBits(0),_.getBits(1)],0)),_.modulo(this.Te).toNumber()}de(o){return!!(this.bitmap[Math.floor(o/8)]&1<<o%8)}mightContain(o){if(0===this.Ie)return!1;const u=Oi(o),[f,_]=ya(u);for(let C=0;C<this.hashCount;C++){const x=this.Ee(f,_,C);if(!this.de(x))return!1}return!0}static create(o,u,f){const _=o%8==0?0:8-o%8,C=new Uint8Array(Math.ceil(o/8)),x=new _n(C,_,u);return f.forEach(V=>x.insert(V)),x}insert(o){if(0===this.Ie)return;const u=Oi(o),[f,_]=ya(u);for(let C=0;C<this.hashCount;C++){const x=this.Ee(f,_,C);this.Ae(x)}}Ae(o){const u=Math.floor(o/8);this.bitmap[u]|=1<<o%8}}class hs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ws{constructor(o,u,f,_,C){this.snapshotVersion=o,this.targetChanges=u,this.targetMismatches=f,this.documentUpdates=_,this.resolvedLimboDocuments=C}static createSynthesizedRemoteEventForCurrentChange(o,u,f){const _=new Map;return _.set(o,Mo.createSynthesizedTargetChangeForCurrentChange(o,u,f)),new Ws(ln.min(),_,new Ar(wn),Sn(),tr())}}class Mo{constructor(o,u,f,_,C){this.resumeToken=o,this.current=u,this.addedDocuments=f,this.modifiedDocuments=_,this.removedDocuments=C}static createSynthesizedTargetChangeForCurrentChange(o,u,f){return new Mo(f,u,tr(),tr(),tr())}}class dl{constructor(o,u,f,_){this.Re=o,this.removedTargetIds=u,this.key=f,this.Ve=_}}class Rd{constructor(o,u){this.targetId=o,this.me=u}}class Md{constructor(o,u,f=Vi.EMPTY_BYTE_STRING,_=null){this.state=o,this.targetIds=u,this.resumeToken=f,this.cause=_}}class ps{constructor(){this.fe=0,this.ge=oa(),this.pe=Vi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(o){o.approximateByteSize()>0&&(this.we=!0,this.pe=o)}Ce(){let o=tr(),u=tr(),f=tr();return this.ge.forEach((_,C)=>{switch(C){case 0:o=o.add(_);break;case 2:u=u.add(_);break;case 1:f=f.add(_);break;default:De()}}),new Mo(this.pe,this.ye,o,u,f)}ve(){this.we=!1,this.ge=oa()}Fe(o,u){this.we=!0,this.ge=this.ge.insert(o,u)}Me(o){this.we=!0,this.ge=this.ge.remove(o)}xe(){this.fe+=1}Oe(){this.fe-=1,Ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class di{constructor(o){this.Le=o,this.Be=new Map,this.ke=Sn(),this.qe=Od(),this.Qe=new Ar(wn)}Ke(o){for(const u of o.Re)o.Ve&&o.Ve.isFoundDocument()?this.$e(u,o.Ve):this.Ue(u,o.key,o.Ve);for(const u of o.removedTargetIds)this.Ue(u,o.key,o.Ve)}We(o){this.forEachTarget(o,u=>{const f=this.Ge(u);switch(o.state){case 0:this.ze(u)&&f.De(o.resumeToken);break;case 1:f.Oe(),f.Se||f.ve(),f.De(o.resumeToken);break;case 2:f.Oe(),f.Se||this.removeTarget(u);break;case 3:this.ze(u)&&(f.Ne(),f.De(o.resumeToken));break;case 4:this.ze(u)&&(this.je(u),f.De(o.resumeToken));break;default:De()}})}forEachTarget(o,u){o.targetIds.length>0?o.targetIds.forEach(u):this.Be.forEach((f,_)=>{this.ze(_)&&u(_)})}He(o){const u=o.targetId,f=o.me.count,_=this.Je(u);if(_){const C=_.target;if(Uc(C))if(0===f){const x=new Wt(C.path);this.Ue(u,x,Qr.newNoDocument(x,ln.min()))}else Ve(1===f);else{const x=this.Ye(u);if(x!==f){const V=this.Ze(o),G=V?this.Xe(V,o,x):1;0!==G&&(this.je(u),this.Qe=this.Qe.insert(u,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(o){const u=o.me.unchangedNames;if(!u||!u.bits)return null;const{bits:{bitmap:f="",padding:_=0},hashCount:C=0}=u;let x,V;try{x=xs(f).toUint8Array()}catch(G){if(G instanceof js)return St("Decoding the base64 bloom filter in existence filter failed ("+G.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw G}try{V=new _n(x,_,C)}catch(G){return St(G instanceof hs?"BloomFilter error: ":"Applying bloom filter failed: ",G),null}return 0===V.Ie?null:V}Xe(o,u,f){return u.me.count===f-this.nt(o,u.targetId)?0:2}nt(o,u){const f=this.Le.getRemoteKeysForTarget(u);let _=0;return f.forEach(C=>{const x=this.Le.tt(),V=`projects/${x.projectId}/databases/${x.database}/documents/${C.path.canonicalString()}`;o.mightContain(V)||(this.Ue(u,C,null),_++)}),_}rt(o){const u=new Map;this.Be.forEach((C,x)=>{const V=this.Je(x);if(V){if(C.current&&Uc(V.target)){const G=new Wt(V.target.path);null!==this.ke.get(G)||this.it(x,G)||this.Ue(x,G,Qr.newNoDocument(G,o))}C.be&&(u.set(x,C.Ce()),C.ve())}});let f=tr();this.qe.forEach((C,x)=>{let V=!0;x.forEachWhile(G=>{const X=this.Je(G);return!X||"TargetPurposeLimboResolution"===X.purpose||(V=!1,!1)}),V&&(f=f.add(C))}),this.ke.forEach((C,x)=>x.setReadTime(o));const _=new Ws(o,u,this.Qe,this.ke,f);return this.ke=Sn(),this.qe=Od(),this.Qe=new Ar(wn),_}$e(o,u){if(!this.ze(o))return;const f=this.it(o,u.key)?2:0;this.Ge(o).Fe(u.key,f),this.ke=this.ke.insert(u.key,u),this.qe=this.qe.insert(u.key,this.st(u.key).add(o))}Ue(o,u,f){if(!this.ze(o))return;const _=this.Ge(o);this.it(o,u)?_.Fe(u,1):_.Me(u),this.qe=this.qe.insert(u,this.st(u).delete(o)),f&&(this.ke=this.ke.insert(u,f))}removeTarget(o){this.Be.delete(o)}Ye(o){const u=this.Ge(o).Ce();return this.Le.getRemoteKeysForTarget(o).size+u.addedDocuments.size-u.removedDocuments.size}xe(o){this.Ge(o).xe()}Ge(o){let u=this.Be.get(o);return u||(u=new ps,this.Be.set(o,u)),u}st(o){let u=this.qe.get(o);return u||(u=new Wn(wn),this.qe=this.qe.insert(o,u)),u}ze(o){const u=null!==this.Je(o);return u||le("WatchChangeAggregator","Detected inactive target",o),u}Je(o){const u=this.Be.get(o);return u&&u.Se?null:this.Le.ot(o)}je(o){this.Be.set(o,new ps),this.Le.getRemoteKeysForTarget(o).forEach(u=>{this.Ue(o,u,null)})}it(o,u){return this.Le.getRemoteKeysForTarget(o).has(u)}}function Od(){return new Ar(Wt.comparator)}function oa(){return new Ar(Wt.comparator)}const vu={asc:"ASCENDING",desc:"DESCENDING"},ao={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ju={and:"AND",or:"OR"};class cn{constructor(o,u){this.databaseId=o,this.useProto3Json=u}}function Cc(p,o){return p.useProto3Json||vi(o)?o:{value:o}}function Yi(p,o){return p.useProto3Json?`${new Date(1e3*o.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+o.nanoseconds).slice(-9)}Z`:{seconds:""+o.seconds,nanos:o.nanoseconds}}function Hu(p,o){return p.useProto3Json?o.toBase64():o.toUint8Array()}function wc(p,o){return Yi(p,o.toTimestamp())}function Bi(p){return Ve(!!p),ln.fromTimestamp(function(u){const f=Jo(u);return new Yn(f.seconds,f.nanos)}(p))}function Gu(p,o){return yu(p,o).canonicalString()}function yu(p,o){const u=(_=p,new Ft(["projects",_.projectId,"databases",_.database])).child("documents");var _;return void 0===o?u:u.child(o)}function zo(p){const o=Ft.fromString(p);return Ve(Gl(o)),o}function Wo(p,o){return Gu(p.databaseId,o.path)}function Os(p,o){const u=zo(o);if(u.get(1)!==p.databaseId.projectId)throw new ye(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+u.get(1)+" vs "+p.databaseId.projectId);if(u.get(3)!==p.databaseId.database)throw new ye(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+u.get(3)+" vs "+p.databaseId.database);return new Wt(pi(u))}function Gc(p,o){return Gu(p.databaseId,o)}function $u(p){return new Ft(["projects",p.databaseId.projectId,"databases",p.databaseId.database]).canonicalString()}function pi(p){return Ve(p.length>4&&"documents"===p.get(4)),p.popFirst(5)}function Pr(p,o,u){return{name:Wo(p,o),fields:u.value.mapValue.fields}}function La(p,o){return{documents:[Gc(p,o.path)]}}function Zi(p,o){const u={structuredQuery:{}},f=o.path;let _;null!==o.collectionGroup?(_=f,u.structuredQuery.from=[{collectionId:o.collectionGroup,allDescendants:!0}]):(_=f.popLast(),u.structuredQuery.from=[{collectionId:f.lastSegment()}]),u.parent=Gc(p,_);const C=function(X){if(0!==X.length)return pl(hr.create(X,"and"))}(o.filters);C&&(u.structuredQuery.where=C);const x=function(X){if(0!==X.length)return X.map(ce=>{return{field:gn((Fe=ce).field),direction:fl(Fe.dir)};var Fe})}(o.orderBy);x&&(u.structuredQuery.orderBy=x);const V=Cc(p,o.limit);return null!==V&&(u.structuredQuery.limit=V),o.startAt&&(u.structuredQuery.startAt={before:(X=o.startAt).inclusive,values:X.position}),o.endAt&&(u.structuredQuery.endAt=function(X){return{before:!X.inclusive,values:X.position}}(o.endAt)),{_t:u,parent:_};var X}function Wu(p){let o=function Co(p){const o=zo(p);return 4===o.length?Ft.emptyPath():pi(o)}(p.parent);const u=p.structuredQuery,f=u.from?u.from.length:0;let _=null;if(f>0){Ve(1===f);const ce=u.from[0];ce.allDescendants?_=ce.collectionId:o=o.child(ce.collectionId)}let C=[];u.where&&(C=function(Ie){const Fe=Ir(Ie);return Fe instanceof hr&&Ma(Fe)?Fe.getFilters():[Fe]}(u.where));let x=[];u.orderBy&&(x=u.orderBy.map(Fe=>{return new gc(Eu((Ut=Fe).field),function(Gt){switch(Gt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ut.direction));var Ut}));let V=null;u.limit&&(V=function(Ie){let Fe;return Fe="object"==typeof Ie?Ie.value:Ie,vi(Fe)?null:Fe}(u.limit));let G=null;var Ie;u.startAt&&(G=new Eo((Ie=u.startAt).values||[],!!Ie.before));let X=null;return u.endAt&&(X=function(Ie){return new Eo(Ie.values||[],!Ie.before)}(u.endAt)),function Pa(p,o,u,f,_,C,x,V){return new Xi(p,o,u,f,_,C,x,V)}(o,_,x,C,V,"F",G,X)}function Ir(p){return void 0!==p.unaryFilter?function(u){switch(u.unaryFilter.op){case"IS_NAN":const f=Eu(u.unaryFilter.field);return Zn.create(f,"==",{doubleValue:NaN});case"IS_NULL":const _=Eu(u.unaryFilter.field);return Zn.create(_,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const C=Eu(u.unaryFilter.field);return Zn.create(C,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const x=Eu(u.unaryFilter.field);return Zn.create(x,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(p):void 0!==p.fieldFilter?Zn.create(Eu((u=p).fieldFilter.field),function(_){switch(_){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(u.fieldFilter.op),u.fieldFilter.value):void 0!==p.compositeFilter?function(u){return hr.create(u.compositeFilter.filters.map(f=>Ir(f)),function(_){switch(_){case"AND":return"and";case"OR":return"or";default:return De()}}(u.compositeFilter.op))}(p):De();var u}function fl(p){return vu[p]}function hl(p){return ao[p]}function Hl(p){return ju[p]}function gn(p){return{fieldPath:p.canonicalString()}}function Eu(p){return dn.fromServerFormat(p.fieldPath)}function pl(p){return p instanceof Zn?function(u){if("=="===u.op){if(fo(u.value))return{unaryFilter:{field:gn(u.field),op:"IS_NAN"}};if(hu(u.value))return{unaryFilter:{field:gn(u.field),op:"IS_NULL"}}}else if("!="===u.op){if(fo(u.value))return{unaryFilter:{field:gn(u.field),op:"IS_NOT_NAN"}};if(hu(u.value))return{unaryFilter:{field:gn(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gn(u.field),op:hl(u.op),value:u.value}}}(p):p instanceof hr?function(u){const f=u.getFilters().map(_=>pl(_));return 1===f.length?f[0]:{compositeFilter:{op:Hl(u.op),filters:f}}}(p):De()}function Va(p){const o=[];return p.fields.forEach(u=>o.push(u.canonicalString())),{fieldPaths:o}}function Gl(p){return p.length>=4&&"projects"===p.get(0)&&"databases"===p.get(2)}class Ba{constructor(o,u,f,_,C=ln.min(),x=ln.min(),V=Vi.EMPTY_BYTE_STRING,G=null){this.target=o,this.targetId=u,this.purpose=f,this.sequenceNumber=_,this.snapshotVersion=C,this.lastLimboFreeSnapshotVersion=x,this.resumeToken=V,this.expectedCount=G}withSequenceNumber(o){return new Ba(this.target,this.targetId,this.purpose,o,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(o,u){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,u,this.lastLimboFreeSnapshotVersion,o,null)}withExpectedCount(o){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,o)}withLastLimboFreeSnapshotVersion(o){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,o,this.resumeToken,this.expectedCount)}}class Af{constructor(o){this.ct=o}}function j(p){const o=Wu({parent:p.parent,structuredQuery:p.structuredQuery});return"LAST"===p.limitType?Z(o,o.limit,"L"):o}class xr{constructor(){}Pt(o,u){this.It(o,u),u.Tt()}It(o,u){if("nullValue"in o)this.Et(u,5);else if("booleanValue"in o)this.Et(u,10),u.dt(o.booleanValue?1:0);else if("integerValue"in o)this.Et(u,15),u.dt(Mi(o.integerValue));else if("doubleValue"in o){const f=Mi(o.doubleValue);isNaN(f)?this.Et(u,13):(this.Et(u,15),er(f)?u.dt(0):u.dt(f))}else if("timestampValue"in o){let f=o.timestampValue;this.Et(u,20),"string"==typeof f&&(f=Jo(f)),u.At(`${f.seconds||""}`),u.dt(f.nanos||0)}else if("stringValue"in o)this.Rt(o.stringValue,u),this.Vt(u);else if("bytesValue"in o)this.Et(u,30),u.ft(xs(o.bytesValue)),this.Vt(u);else if("referenceValue"in o)this.gt(o.referenceValue,u);else if("geoPointValue"in o){const f=o.geoPointValue;this.Et(u,45),u.dt(f.latitude||0),u.dt(f.longitude||0)}else"mapValue"in o?ha(o)?this.Et(u,Number.MAX_SAFE_INTEGER):(this.yt(o.mapValue,u),this.Vt(u)):"arrayValue"in o?(this.wt(o.arrayValue,u),this.Vt(u)):De()}Rt(o,u){this.Et(u,25),this.St(o,u)}St(o,u){u.At(o)}yt(o,u){const f=o.fields||{};this.Et(u,55);for(const _ of Object.keys(f))this.Rt(_,u),this.It(f[_],u)}wt(o,u){const f=o.values||[];this.Et(u,50);for(const _ of f)this.It(_,u)}gt(o,u){this.Et(u,37),Wt.fromName(o).path.forEach(f=>{this.Et(u,60),this.St(f,u)})}Et(o,u){o.dt(u)}Vt(o){o.dt(2)}}xr.bt=new xr;class Wl{constructor(){this._n=new ql}addToCollectionParentIndex(o,u){return this._n.add(u),he.resolve()}getCollectionParents(o,u){return he.resolve(this._n.getEntries(u))}addFieldIndex(o,u){return he.resolve()}deleteFieldIndex(o,u){return he.resolve()}deleteAllFieldIndexes(o){return he.resolve()}createTargetIndexes(o,u){return he.resolve()}getDocumentsMatchingTarget(o,u){return he.resolve(null)}getIndexType(o,u){return he.resolve(0)}getFieldIndexes(o,u){return he.resolve([])}getNextCollectionGroupToUpdate(o){return he.resolve(null)}getMinOffset(o,u){return he.resolve(ri.min())}getMinOffsetFromCollectionGroup(o,u){return he.resolve(ri.min())}updateCollectionGroup(o,u,f){return he.resolve()}updateIndexEntries(o,u){return he.resolve()}}class ql{constructor(){this.index={}}add(o){const u=o.lastSegment(),f=o.popLast(),_=this.index[u]||new Wn(Ft.comparator),C=!_.has(f);return this.index[u]=_.add(f),C}has(o){const u=o.lastSegment(),f=o.popLast(),_=this.index[u];return _&&_.has(f)}getEntries(o){return(this.index[o]||new Wn(Ft.comparator)).toArray()}}new Uint8Array(0);class Lr{constructor(o,u,f){this.cacheSizeCollectionThreshold=o,this.percentileToCollect=u,this.maximumSequenceNumbersToCollect=f}static withCacheSize(o){return new Lr(o,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(41943040,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);class tc{constructor(o){this.On=o}next(){return this.On+=2,this.On}static Nn(){return new tc(0)}static Ln(){return new tc(-1)}}class Rf{constructor(){this.changes=new Do(o=>o.toString(),(o,u)=>o.isEqual(u)),this.changesApplied=!1}addEntry(o){this.assertNotApplied(),this.changes.set(o.key,o)}removeEntry(o,u){this.assertNotApplied(),this.changes.set(o,Qr.newInvalidDocument(o).setReadTime(u))}getEntry(o,u){this.assertNotApplied();const f=this.changes.get(u);return void 0!==f?he.resolve(f):this.getFromCache(o,u)}getEntries(o,u){return this.getAllFromCache(o,u)}apply(o){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(o)}assertNotApplied(){}}class _s{constructor(o,u){this.overlayedDocument=o,this.mutatedFields=u}}class vs{constructor(o,u,f,_){this.remoteDocumentCache=o,this.mutationQueue=u,this.documentOverlayCache=f,this.indexManager=_}getDocument(o,u){let f=null;return this.documentOverlayCache.getOverlay(o,u).next(_=>(f=_,this.remoteDocumentCache.getEntry(o,u))).next(_=>(null!==f&&_r(f.mutation,_,Ri.empty(),Yn.now()),_))}getDocuments(o,u){return this.remoteDocumentCache.getEntries(o,u).next(f=>this.getLocalViewOfDocuments(o,f,tr()).next(()=>f))}getLocalViewOfDocuments(o,u,f=tr()){const _=fs();return this.populateOverlays(o,_,u).next(()=>this.computeViews(o,u,_,f).next(C=>{let x=Ms();return C.forEach((V,G)=>{x=x.insert(V,G.overlayedDocument)}),x}))}getOverlayedDocuments(o,u){const f=fs();return this.populateOverlays(o,f,u).next(()=>this.computeViews(o,u,f,tr()))}populateOverlays(o,u,f){const _=[];return f.forEach(C=>{u.has(C)||_.push(C)}),this.documentOverlayCache.getOverlays(o,_).next(C=>{C.forEach((x,V)=>{u.set(x,V)})})}computeViews(o,u,f,_){let C=Sn();const x=fn(),V=fn();return u.forEach((G,X)=>{const ce=f.get(X.key);_.has(X.key)&&(void 0===ce||ce.mutation instanceof re)?C=C.insert(X.key,X):void 0!==ce?(x.set(X.key,ce.mutation.getFieldMask()),_r(ce.mutation,X,ce.mutation.getFieldMask(),Yn.now())):x.set(X.key,Ri.empty())}),this.recalculateAndSaveOverlays(o,C).next(G=>(G.forEach((X,ce)=>x.set(X,ce)),u.forEach((X,ce)=>{var Ie;return V.set(X,new _s(ce,null!==(Ie=x.get(X))&&void 0!==Ie?Ie:null))}),V))}recalculateAndSaveOverlays(o,u){const f=fn();let _=new Ar((x,V)=>x-V),C=tr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(o,u).next(x=>{for(const V of x)V.keys().forEach(G=>{const X=u.get(G);if(null===X)return;let ce=f.get(G)||Ri.empty();ce=V.applyToLocalView(X,ce),f.set(G,ce);const Ie=(_.get(V.batchId)||tr()).add(G);_=_.insert(V.batchId,Ie)})}).next(()=>{const x=[],V=_.getReverseIterator();for(;V.hasNext();){const G=V.getNext(),X=G.key,ce=G.value,Ie=Ka();ce.forEach(Fe=>{if(!C.has(Fe)){const ht=Zt(u.get(Fe),f.get(Fe));null!==ht&&Ie.set(Fe,ht),C=C.add(Fe)}}),x.push(this.documentOverlayCache.saveOverlays(o,X,Ie))}return he.waitFor(x)}).next(()=>f)}recalculateAndSaveOverlaysForDocumentKeys(o,u){return this.remoteDocumentCache.getEntries(o,u).next(f=>this.recalculateAndSaveOverlays(o,f))}getDocumentsMatchingQuery(o,u,f,_){return Wt.isDocumentKey((x=u).path)&&null===x.collectionGroup&&0===x.filters.length?this.getDocumentsMatchingDocumentQuery(o,u.path):Rs(u)?this.getDocumentsMatchingCollectionGroupQuery(o,u,f,_):this.getDocumentsMatchingCollectionQuery(o,u,f,_);var x}getNextDocuments(o,u,f,_){return this.remoteDocumentCache.getAllFromCollectionGroup(o,u,f,_).next(C=>{const x=_-C.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(o,u,f.largestBatchId,_-C.size):he.resolve(fs());let V=-1,G=C;return x.next(X=>he.forEach(X,(ce,Ie)=>(V<Ie.largestBatchId&&(V=Ie.largestBatchId),C.get(ce)?he.resolve():this.remoteDocumentCache.getEntry(o,ce).next(Fe=>{G=G.insert(ce,Fe)}))).next(()=>this.populateOverlays(o,X,C)).next(()=>this.computeViews(o,G,X,tr())).next(ce=>({batchId:V,changes:Zr(ce)})))})}getDocumentsMatchingDocumentQuery(o,u){return this.getDocument(o,new Wt(u)).next(f=>{let _=Ms();return f.isFoundDocument()&&(_=_.insert(f.key,f)),_})}getDocumentsMatchingCollectionGroupQuery(o,u,f,_){const C=u.collectionGroup;let x=Ms();return this.indexManager.getCollectionParents(o,C).next(V=>he.forEach(V,G=>{const X=(Ie=u,Fe=G.child(C),new Xi(Fe,null,Ie.explicitOrderBy.slice(),Ie.filters.slice(),Ie.limit,Ie.limitType,Ie.startAt,Ie.endAt));var Ie,Fe;return this.getDocumentsMatchingCollectionQuery(o,X,f,_).next(ce=>{ce.forEach((Ie,Fe)=>{x=x.insert(Ie,Fe)})})}).next(()=>x))}getDocumentsMatchingCollectionQuery(o,u,f,_){let C;return this.documentOverlayCache.getOverlaysForCollection(o,u.path,f.largestBatchId).next(x=>(C=x,this.remoteDocumentCache.getDocumentsMatchingQuery(o,u,f,C,_))).next(x=>{C.forEach((G,X)=>{const ce=X.getKey();null===x.get(ce)&&(x=x.insert(ce,Qr.newInvalidDocument(ce)))});let V=Ms();return x.forEach((G,X)=>{const ce=C.get(G);void 0!==ce&&_r(ce.mutation,X,Ri.empty(),Yn.now()),Ot(u,X)&&(V=V.insert(G,X))}),V})}}class vl{constructor(o){this.serializer=o,this.cr=new Map,this.lr=new Map}getBundleMetadata(o,u){return he.resolve(this.cr.get(u))}saveBundleMetadata(o,u){return this.cr.set(u.id,{id:(_=u).id,version:_.version,createTime:Bi(_.createTime)}),he.resolve();var _}getNamedQuery(o,u){return he.resolve(this.lr.get(u))}saveNamedQuery(o,u){return this.lr.set(u.name,{name:(_=u).name,query:j(_.bundledQuery),readTime:Bi(_.readTime)}),he.resolve();var _}}class Ii{constructor(){this.overlays=new Ar(Wt.comparator),this.hr=new Map}getOverlay(o,u){return he.resolve(this.overlays.get(u))}getOverlays(o,u){const f=fs();return he.forEach(u,_=>this.getOverlay(o,_).next(C=>{null!==C&&f.set(_,C)})).next(()=>f)}saveOverlays(o,u,f){return f.forEach((_,C)=>{this.ht(o,u,C)}),he.resolve()}removeOverlaysForBatchId(o,u,f){const _=this.hr.get(f);return void 0!==_&&(_.forEach(C=>this.overlays=this.overlays.remove(C)),this.hr.delete(f)),he.resolve()}getOverlaysForCollection(o,u,f){const _=fs(),C=u.length+1,x=new Wt(u.child("")),V=this.overlays.getIteratorFrom(x);for(;V.hasNext();){const G=V.getNext().value,X=G.getKey();if(!u.isPrefixOf(X.path))break;X.path.length===C&&G.largestBatchId>f&&_.set(G.getKey(),G)}return he.resolve(_)}getOverlaysForCollectionGroup(o,u,f,_){let C=new Ar((X,ce)=>X-ce);const x=this.overlays.getIterator();for(;x.hasNext();){const X=x.getNext().value;if(X.getKey().getCollectionGroup()===u&&X.largestBatchId>f){let ce=C.get(X.largestBatchId);null===ce&&(ce=fs(),C=C.insert(X.largestBatchId,ce)),ce.set(X.getKey(),X)}}const V=fs(),G=C.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((X,ce)=>V.set(X,ce)),!(V.size()>=_)););return he.resolve(V)}ht(o,u,f){const _=this.overlays.get(f.key);if(null!==_){const x=this.hr.get(_.largestBatchId).delete(f.key);this.hr.set(_.largestBatchId,x)}this.overlays=this.overlays.insert(f.key,new $r(u,f));let C=this.hr.get(u);void 0===C&&(C=tr(),this.hr.set(u,C)),this.hr.set(u,C.add(f.key))}}class Pi{constructor(){this.Pr=new Wn(Ni.Ir),this.Tr=new Wn(Ni.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(o,u){const f=new Ni(o,u);this.Pr=this.Pr.add(f),this.Tr=this.Tr.add(f)}dr(o,u){o.forEach(f=>this.addReference(f,u))}removeReference(o,u){this.Ar(new Ni(o,u))}Rr(o,u){o.forEach(f=>this.removeReference(f,u))}Vr(o){const u=new Wt(new Ft([])),f=new Ni(u,o),_=new Ni(u,o+1),C=[];return this.Tr.forEachInRange([f,_],x=>{this.Ar(x),C.push(x.key)}),C}mr(){this.Pr.forEach(o=>this.Ar(o))}Ar(o){this.Pr=this.Pr.delete(o),this.Tr=this.Tr.delete(o)}gr(o){const u=new Wt(new Ft([])),f=new Ni(u,o),_=new Ni(u,o+1);let C=tr();return this.Tr.forEachInRange([f,_],x=>{C=C.add(x.key)}),C}containsKey(o){const u=new Ni(o,0),f=this.Pr.firstAfterOrEqual(u);return null!==f&&o.isEqual(f.key)}}class Ni{constructor(o,u){this.key=o,this.pr=u}static Ir(o,u){return Wt.comparator(o.key,u.key)||wn(o.pr,u.pr)}static Er(o,u){return wn(o.pr,u.pr)||Wt.comparator(o.key,u.key)}}class ir{constructor(o,u){this.indexManager=o,this.referenceDelegate=u,this.mutationQueue=[],this.yr=1,this.wr=new Wn(Ni.Ir)}checkEmpty(o){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(o,u,f,_){const C=this.yr;this.yr++;const x=new vn(C,u,f,_);this.mutationQueue.push(x);for(const V of _)this.wr=this.wr.add(new Ni(V.key,C)),this.indexManager.addToCollectionParentIndex(o,V.key.path.popLast());return he.resolve(x)}lookupMutationBatch(o,u){return he.resolve(this.Sr(u))}getNextMutationBatchAfterBatchId(o,u){const _=this.br(u+1),C=_<0?0:_;return he.resolve(this.mutationQueue.length>C?this.mutationQueue[C]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(o){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(o,u){const f=new Ni(u,0),_=new Ni(u,Number.POSITIVE_INFINITY),C=[];return this.wr.forEachInRange([f,_],x=>{const V=this.Sr(x.pr);C.push(V)}),he.resolve(C)}getAllMutationBatchesAffectingDocumentKeys(o,u){let f=new Wn(wn);return u.forEach(_=>{const C=new Ni(_,0),x=new Ni(_,Number.POSITIVE_INFINITY);this.wr.forEachInRange([C,x],V=>{f=f.add(V.pr)})}),he.resolve(this.Dr(f))}getAllMutationBatchesAffectingQuery(o,u){const f=u.path,_=f.length+1;let C=f;Wt.isDocumentKey(C)||(C=C.child(""));const x=new Ni(new Wt(C),0);let V=new Wn(wn);return this.wr.forEachWhile(G=>{const X=G.key.path;return!!f.isPrefixOf(X)&&(X.length===_&&(V=V.add(G.pr)),!0)},x),he.resolve(this.Dr(V))}Dr(o){const u=[];return o.forEach(f=>{const _=this.Sr(f);null!==_&&u.push(_)}),u}removeMutationBatch(o,u){Ve(0===this.Cr(u.batchId,"removed")),this.mutationQueue.shift();let f=this.wr;return he.forEach(u.mutations,_=>{const C=new Ni(_.key,u.batchId);return f=f.delete(C),this.referenceDelegate.markPotentiallyOrphaned(o,_.key)}).next(()=>{this.wr=f})}Mn(o){}containsKey(o,u){const f=new Ni(u,0),_=this.wr.firstAfterOrEqual(f);return he.resolve(u.isEqual(_&&_.key))}performConsistencyCheck(o){return he.resolve()}Cr(o,u){return this.br(o)}br(o){return 0===this.mutationQueue.length?0:o-this.mutationQueue[0].batchId}Sr(o){const u=this.br(o);return u<0||u>=this.mutationQueue.length?null:this.mutationQueue[u]}}class Ql{constructor(o){this.vr=o,this.docs=new Ar(Wt.comparator),this.size=0}setIndexManager(o){this.indexManager=o}addEntry(o,u){const f=u.key,_=this.docs.get(f),C=_?_.size:0,x=this.vr(u);return this.docs=this.docs.insert(f,{document:u.mutableCopy(),size:x}),this.size+=x-C,this.indexManager.addToCollectionParentIndex(o,f.path.popLast())}removeEntry(o){const u=this.docs.get(o);u&&(this.docs=this.docs.remove(o),this.size-=u.size)}getEntry(o,u){const f=this.docs.get(u);return he.resolve(f?f.document.mutableCopy():Qr.newInvalidDocument(u))}getEntries(o,u){let f=Sn();return u.forEach(_=>{const C=this.docs.get(_);f=f.insert(_,C?C.document.mutableCopy():Qr.newInvalidDocument(_))}),he.resolve(f)}getDocumentsMatchingQuery(o,u,f,_){let C=Sn();const x=u.path,V=new Wt(x.child("")),G=this.docs.getIteratorFrom(V);for(;G.hasNext();){const{key:X,value:{document:ce}}=G.getNext();if(!x.isPrefixOf(X.path))break;X.path.length>x.length+1||zi(new ri((p=ce).readTime,p.key,-1),f)<=0||(_.has(ce.key)||Ot(u,ce))&&(C=C.insert(ce.key,ce.mutableCopy()))}var p;return he.resolve(C)}getAllFromCollectionGroup(o,u,f,_){De()}Fr(o,u){return he.forEach(this.docs,f=>u(f))}newChangeBuffer(o){return new nc(this)}getSize(o){return he.resolve(this.size)}}class nc extends Rf{constructor(o){super(),this.ar=o}applyChanges(o){const u=[];return this.changes.forEach((f,_)=>{_.isValidDocument()?u.push(this.ar.addEntry(o,_)):this.ar.removeEntry(f)}),he.waitFor(u)}getFromCache(o,u){return this.ar.getEntry(o,u)}getAllFromCache(o,u){return this.ar.getEntries(o,u)}}class yl{constructor(o){this.persistence=o,this.Mr=new Do(u=>jo(u),al),this.lastRemoteSnapshotVersion=ln.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Pi,this.targetCount=0,this.Lr=tc.Nn()}forEachTarget(o,u){return this.Mr.forEach((f,_)=>u(_)),he.resolve()}getLastRemoteSnapshotVersion(o){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(o){return he.resolve(this.Or)}allocateTargetId(o){return this.highestTargetId=this.Lr.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(o,u,f){return f&&(this.lastRemoteSnapshotVersion=f),u>this.Or&&(this.Or=u),he.resolve()}qn(o){this.Mr.set(o.target,o);const u=o.targetId;u>this.highestTargetId&&(this.Lr=new tc(u),this.highestTargetId=u),o.sequenceNumber>this.Or&&(this.Or=o.sequenceNumber)}addTargetData(o,u){return this.qn(u),this.targetCount+=1,he.resolve()}updateTargetData(o,u){return this.qn(u),he.resolve()}removeTargetData(o,u){return this.Mr.delete(u.target),this.Nr.Vr(u.targetId),this.targetCount-=1,he.resolve()}removeTargets(o,u,f){let _=0;const C=[];return this.Mr.forEach((x,V)=>{V.sequenceNumber<=u&&null===f.get(V.targetId)&&(this.Mr.delete(x),C.push(this.removeMatchingKeysForTargetId(o,V.targetId)),_++)}),he.waitFor(C).next(()=>_)}getTargetCount(o){return he.resolve(this.targetCount)}getTargetData(o,u){const f=this.Mr.get(u)||null;return he.resolve(f)}addMatchingKeys(o,u,f){return this.Nr.dr(u,f),he.resolve()}removeMatchingKeys(o,u,f){this.Nr.Rr(u,f);const _=this.persistence.referenceDelegate,C=[];return _&&u.forEach(x=>{C.push(_.markPotentiallyOrphaned(o,x))}),he.waitFor(C)}removeMatchingKeysForTargetId(o,u){return this.Nr.Vr(u),he.resolve()}getMatchingKeysForTargetId(o,u){const f=this.Nr.gr(u);return he.resolve(f)}containsKey(o,u){return he.resolve(this.Nr.containsKey(u))}}class Ai{constructor(o,u){this.Br={},this.overlays={},this.kr=new mr(0),this.qr=!1,this.qr=!0,this.referenceDelegate=o(this),this.Qr=new yl(this),this.indexManager=new Wl,this.remoteDocumentCache=new Ql(f=>this.referenceDelegate.Kr(f)),this.serializer=new Af(u),this.$r=new vl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(o){return this.indexManager}getDocumentOverlayCache(o){let u=this.overlays[o.toKey()];return u||(u=new Ii,this.overlays[o.toKey()]=u),u}getMutationQueue(o,u){let f=this.Br[o.toKey()];return f||(f=new ir(u,this.referenceDelegate),this.Br[o.toKey()]=f),f}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(o,u,f){le("MemoryPersistence","Starting transaction:",o);const _=new Qu(this.kr.next());return this.referenceDelegate.Ur(),f(_).next(C=>this.referenceDelegate.Wr(_).next(()=>C)).toPromise().then(C=>(_.raiseOnCommittedEvent(),C))}Gr(o,u){return he.or(Object.values(this.Br).map(f=>()=>f.containsKey(o,u)))}}class Qu extends Fi{constructor(o){super(),this.currentSequenceNumber=o}}class Xc{constructor(o){this.persistence=o,this.zr=new Pi,this.jr=null}static Hr(o){return new Xc(o)}get Jr(){if(this.jr)return this.jr;throw De()}addReference(o,u,f){return this.zr.addReference(f,u),this.Jr.delete(f.toString()),he.resolve()}removeReference(o,u,f){return this.zr.removeReference(f,u),this.Jr.add(f.toString()),he.resolve()}markPotentiallyOrphaned(o,u){return this.Jr.add(u.toString()),he.resolve()}removeTarget(o,u){this.zr.Vr(u.targetId).forEach(_=>this.Jr.add(_.toString()));const f=this.persistence.getTargetCache();return f.getMatchingKeysForTargetId(o,u.targetId).next(_=>{_.forEach(C=>this.Jr.add(C.toString()))}).next(()=>f.removeTargetData(o,u))}Ur(){this.jr=new Set}Wr(o){const u=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Jr,f=>{const _=Wt.fromPath(f);return this.Yr(o,_).next(C=>{C||u.removeEntry(_,ln.min())})}).next(()=>(this.jr=null,u.apply(o)))}updateLimboDocument(o,u){return this.Yr(o,u).next(f=>{f?this.Jr.delete(u.toString()):this.Jr.add(u.toString())})}Kr(o){return 0}Yr(o,u){return he.or([()=>he.resolve(this.zr.containsKey(u)),()=>this.persistence.getTargetCache().containsKey(o,u),()=>this.persistence.Gr(o,u)])}}class Yu{constructor(o,u,f,_){this.targetId=o,this.fromCache=u,this.qi=f,this.Qi=_}static Ki(o,u){let f=tr(),_=tr();for(const C of u.docChanges)switch(C.type){case 0:f=f.add(C.doc.key);break;case 1:_=_.add(C.doc.key)}return new Yu(o,u.fromCache,f,_)}}class Tc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(o){this._documentReadCount+=o}}class Cl{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,me.nr)()?8:function Qe(p){const o=p.match(/Android ([\d.]+)/i),u=o?o[1].split(".").slice(0,2).join("."):"-1";return Number(u)}((0,me.ZQ)())>0?6:4}initialize(o,u){this.zi=o,this.indexManager=u,this.$i=!0}getDocumentsMatchingQuery(o,u,f,_){const C={result:null};return this.ji(o,u).next(x=>{C.result=x}).next(()=>{if(!C.result)return this.Hi(o,u,_,f).next(x=>{C.result=x})}).next(()=>{if(C.result)return;const x=new Tc;return this.Ji(o,u,x).next(V=>{if(C.result=V,this.Ui)return this.Yi(o,u,x,V.size)})}).next(()=>C.result)}Yi(o,u,f,_){return f.documentReadCount<this.Wi?(Bt()<=rt.$b.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",xe(u),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),he.resolve()):(Bt()<=rt.$b.DEBUG&&le("QueryEngine","Query:",xe(u),"scans",f.documentReadCount,"local documents and returns",_,"documents as results."),f.documentReadCount>this.Gi*_?(Bt()<=rt.$b.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",xe(u),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(o,So(u))):he.resolve())}ji(o,u){if(Yr(u))return he.resolve(null);let f=So(u);return this.indexManager.getIndexType(o,f).next(_=>0===_?null:(null!==u.limit&&1===_&&(u=Z(u,null,"F"),f=So(u)),this.indexManager.getDocumentsMatchingTarget(o,f).next(C=>{const x=tr(...C);return this.zi.getDocuments(o,x).next(V=>this.indexManager.getMinOffset(o,f).next(G=>{const X=this.Zi(u,V);return this.Xi(u,X,x,G.readTime)?this.ji(o,Z(u,null,"F")):this.es(o,X,u,G)}))})))}Hi(o,u,f,_){return Yr(u)||_.isEqual(ln.min())?he.resolve(null):this.zi.getDocuments(o,f).next(C=>{const x=this.Zi(u,C);return this.Xi(u,x,f,_)?he.resolve(null):(Bt()<=rt.$b.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",_.toString(),xe(u)),this.es(o,x,u,function jn(p,o){const u=p.toTimestamp().seconds,f=p.toTimestamp().nanoseconds+1,_=ln.fromTimestamp(1e9===f?new Yn(u+1,0):new Yn(u,f));return new ri(_,Wt.empty(),o)}(_,-1)).next(V=>V))})}Zi(o,u){let f=new Wn($o(o));return u.forEach((_,C)=>{Ot(o,C)&&(f=f.add(C))}),f}Xi(o,u,f,_){if(null===o.limit)return!1;if(f.size!==u.size)return!0;const C="F"===o.limitType?u.last():u.first();return!!C&&(C.hasPendingWrites||C.version.compareTo(_)>0)}Ji(o,u,f){return Bt()<=rt.$b.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",xe(u)),this.zi.getDocumentsMatchingQuery(o,u,ri.min(),f)}es(o,u,f,_){return this.zi.getDocumentsMatchingQuery(o,f,_).next(C=>(u.forEach(x=>{C=C.insert(x.key,x)}),C))}}class Qc{constructor(o,u,f,_){this.persistence=o,this.ts=u,this.serializer=_,this.ns=new Ar(wn),this.rs=new Do(C=>jo(C),al),this.ss=new Map,this.os=o.getRemoteDocumentCache(),this.Qr=o.getTargetCache(),this.$r=o.getBundleCache(),this._s(f)}_s(o){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(o),this.indexManager=this.persistence.getIndexManager(o),this.mutationQueue=this.persistence.getMutationQueue(o,this.indexManager),this.localDocuments=new vs(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(o){return this.persistence.runTransaction("Collect garbage","readwrite-primary",u=>o.collect(u,this.ns))}}function wl(p,o){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,Ce.A)(function*(p,o){const u=Ne(p);return yield u.persistence.runTransaction("Handle user change","readonly",f=>{let _;return u.mutationQueue.getAllMutationBatches(f).next(C=>(_=C,u._s(o),u.mutationQueue.getAllMutationBatches(f))).next(C=>{const x=[],V=[];let G=tr();for(const X of _){x.push(X.batchId);for(const ce of X.mutations)G=G.add(ce.key)}for(const X of C){V.push(X.batchId);for(const ce of X.mutations)G=G.add(ce.key)}return u.localDocuments.getDocuments(f,G).next(X=>({us:X,removedBatchIds:x,addedBatchIds:V}))})})})).apply(this,arguments)}function Ks(p){const o=Ne(p);return o.persistence.runTransaction("Get last remote snapshot version","readonly",u=>o.Qr.getLastRemoteSnapshotVersion(u))}function Ca(p,o){const u=Ne(p);return u.persistence.runTransaction("Get next mutation batch","readonly",f=>(void 0===o&&(o=-1),u.mutationQueue.getNextMutationBatchAfterBatchId(f,o)))}function Il(p,o,u){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,Ce.A)(function*(p,o,u){const f=Ne(p),_=f.ns.get(o),C=u?"readwrite":"readwrite-primary";try{u||(yield f.persistence.runTransaction("Release target",C,x=>f.persistence.referenceDelegate.removeTarget(x,_)))}catch(x){if(!Re(x))throw x;le("LocalStore",`Failed to update sequence numbers for target ${o}: ${x}`)}f.ns=f.ns.remove(o),f.rs.delete(_.target)})).apply(this,arguments)}function Zu(p,o,u){const f=Ne(p);let _=ln.min(),C=tr();return f.persistence.runTransaction("Execute query","readwrite",x=>function(G,X,ce){const Ie=Ne(G),Fe=Ie.rs.get(ce);return void 0!==Fe?he.resolve(Ie.ns.get(Fe)):Ie.Qr.getTargetData(X,ce)}(f,x,So(o)).next(V=>{if(V)return _=V.lastLimboFreeSnapshotVersion,f.Qr.getMatchingKeysForTargetId(x,V.targetId).next(G=>{C=G})}).next(()=>f.ts.getDocumentsMatchingQuery(x,o,u?_:ln.min(),u?C:tr())).next(V=>(function Al(p,o,u){let f=p.ss.get(o)||ln.min();u.forEach((_,C)=>{C.readTime.compareTo(f)>0&&(f=C.readTime)}),p.ss.set(o,f)}(f,function qn(p){return p.collectionGroup||(p.path.length%2==1?p.path.lastSegment():p.path.get(p.path.length-2))}(o),V),{documents:V,hs:C})))}class Nh{constructor(){this.activeTargetIds=function li(){return Sd}()}As(o){this.activeTargetIds=this.activeTargetIds.add(o)}Rs(o){this.activeTargetIds=this.activeTargetIds.delete(o)}ds(){const o={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(o)}}class O{constructor(){this.no=new Nh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(o){}updateMutationState(o,u,f){}addLocalQueryTarget(o){return this.no.As(o),this.ro[o]||"not-current"}updateQueryState(o,u,f){this.ro[o]=u}removeLocalQueryTarget(o){this.no.Rs(o)}isLocalQueryTarget(o){return this.no.activeTargetIds.has(o)}clearQueryState(o){delete this.ro[o]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(o){return this.no.activeTargetIds.has(o)}start(){return this.no=new Nh,Promise.resolve()}handleUserChange(o,u,f){}setOnlineState(o){}shutdown(){}writeSequenceNumber(o){}notifyBundleLoaded(o){}}class E{io(o){}shutdown(){}}class A{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(o){this.uo.push(o)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const o of this.uo)o(0)}ao(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const o of this.uo)o(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let k=null;function te(){return null===k?k=268435456+Math.round(2147483648*Math.random()):k++,"0x"+k.toString(16)}const ue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ge{constructor(o){this.lo=o.lo,this.ho=o.ho}Po(o){this.Io=o}To(o){this.Eo=o}Ao(o){this.Ro=o}onMessage(o){this.Vo=o}close(){this.ho()}send(o){this.lo(o)}mo(){this.Io()}fo(){this.Eo()}po(o){this.Ro(o)}yo(o){this.Vo(o)}}const ot="WebChannelConnection";class jt extends class{constructor(u){this.databaseInfo=u,this.databaseId=u.databaseId;const f=u.ssl?"https":"http",_=encodeURIComponent(this.databaseId.projectId),C=encodeURIComponent(this.databaseId.database);this.wo=f+"://"+u.host,this.So=`projects/${_}/databases/${C}`,this.bo="(default)"===this.databaseId.database?`project_id=${_}`:`project_id=${_}&database_id=${C}`}get Do(){return!1}Co(u,f,_,C,x){const V=te(),G=this.vo(u,f.toUriEncodedString());le("RestConnection",`Sending RPC '${u}' ${V}:`,G,_);const X={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(X,C,x),this.Mo(u,G,X,_).then(ce=>(le("RestConnection",`Received RPC '${u}' ${V}: `,ce),ce),ce=>{throw St("RestConnection",`RPC '${u}' ${V} failed with error: `,ce,"url: ",G,"request:",_),ce})}xo(u,f,_,C,x,V){return this.Co(u,f,_,C,x)}Fo(u,f,_){u["X-Goog-Api-Client"]="gl-js/ fire/"+Vn,u["Content-Type"]="text/plain",this.databaseInfo.appId&&(u["X-Firebase-GMPID"]=this.databaseInfo.appId),f&&f.headers.forEach((C,x)=>u[x]=C),_&&_.headers.forEach((C,x)=>u[x]=C)}vo(u,f){return`${this.wo}/v1/${f}:${ue[u]}`}terminate(){}}{constructor(o){super(o),this.forceLongPolling=o.forceLongPolling,this.autoDetectLongPolling=o.autoDetectLongPolling,this.useFetchStreams=o.useFetchStreams,this.longPollingOptions=o.longPollingOptions}Mo(o,u,f,_){const C=te();return new Promise((x,V)=>{const G=new tn;G.setWithCredentials(!0),G.listenOnce(Tn.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Tt.NO_ERROR:const ce=G.getResponseJson();le(ot,`XHR for RPC '${o}' ${C} received:`,JSON.stringify(ce)),x(ce);break;case Tt.TIMEOUT:le(ot,`RPC '${o}' ${C} timed out`),V(new ye(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Tt.HTTP_ERROR:const Ie=G.getStatus();if(le(ot,`RPC '${o}' ${C} failed with status:`,Ie,"response text:",G.getResponseText()),Ie>0){let Fe=G.getResponseJson();Array.isArray(Fe)&&(Fe=Fe[0]);const ht=Fe?.error;if(ht&&ht.status&&ht.message){const Ut=function(Gt){const Rn=Gt.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(Rn)>=0?Rn:pe.UNKNOWN}(ht.status);V(new ye(Ut,ht.message))}else V(new ye(pe.UNKNOWN,"Server responded with status "+G.getStatus()))}else V(new ye(pe.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{le(ot,`RPC '${o}' ${C} completed.`)}});const X=JSON.stringify(_);le(ot,`RPC '${o}' ${C} sending request:`,_),G.send(u,"POST",X,f,15)})}Oo(o,u,f){const _=te(),C=[this.wo,"/","google.firestore.v1.Firestore","/",o,"/channel"],x=Xt(),V=Ht(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},X=this.longPollingOptions.timeoutSeconds;void 0!==X&&(G.longPollingTimeout=Math.round(1e3*X)),this.useFetchStreams&&(G.xmlHttpFactory=new Nt({})),this.Fo(G.initMessageHeaders,u,f),G.encodeInitMessageHeaders=!0;const ce=C.join("");le(ot,`Creating RPC '${o}' stream ${_}: ${ce}`,G);const Ie=x.createWebChannel(ce,G);let Fe=!1,ht=!1;const Ut=new Ge({lo:Gt=>{ht?le(ot,`Not sending because RPC '${o}' stream ${_} is closed:`,Gt):(Fe||(le(ot,`Opening RPC '${o}' stream ${_} transport.`),Ie.open(),Fe=!0),le(ot,`RPC '${o}' stream ${_} sending:`,Gt),Ie.send(Gt))},ho:()=>Ie.close()}),en=(Gt,Rn,Xn)=>{Gt.listen(Rn,Ln=>{try{Xn(Ln)}catch(yr){setTimeout(()=>{throw yr},0)}})};return en(Ie,On.EventType.OPEN,()=>{ht||(le(ot,`RPC '${o}' stream ${_} transport opened.`),Ut.mo())}),en(Ie,On.EventType.CLOSE,()=>{ht||(ht=!0,le(ot,`RPC '${o}' stream ${_} transport closed`),Ut.po())}),en(Ie,On.EventType.ERROR,Gt=>{ht||(ht=!0,St(ot,`RPC '${o}' stream ${_} transport errored:`,Gt),Ut.po(new ye(pe.UNAVAILABLE,"The operation could not be completed")))}),en(Ie,On.EventType.MESSAGE,Gt=>{var Rn;if(!ht){const Xn=Gt.data[0];Ve(!!Xn);const yr=Xn.error||(null===(Rn=Xn[0])||void 0===Rn?void 0:Rn.error);if(yr){le(ot,`RPC '${o}' stream ${_} received error:`,yr);const hi=yr.status;let Fr=function($e){const nt=dr[$e];if(void 0!==nt)return ts(nt)}(hi),et=yr.message;void 0===Fr&&(Fr=pe.INTERNAL,et="Unknown error status: "+hi+" with message "+yr.message),ht=!0,Ut.po(new ye(Fr,et)),Ie.close()}else le(ot,`RPC '${o}' stream ${_} received:`,Xn),Ut.yo(Xn)}}),en(V,kt.STAT_EVENT,Gt=>{Gt.stat===Ct.PROXY?le(ot,`RPC '${o}' stream ${_} detected buffering proxy`):Gt.stat===Ct.NOPROXY&&le(ot,`RPC '${o}' stream ${_} detected no buffering proxy`)}),setTimeout(()=>{Ut.fo()},0),Ut}}function In(){return typeof document<"u"?document:null}function vr(p){return new cn(p,!0)}class ys{constructor(o,u,f=1e3,_=1.5,C=6e4){this.oi=o,this.timerId=u,this.No=f,this.Lo=_,this.Bo=C,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(o){this.cancel();const u=Math.floor(this.ko+this.Uo()),f=Math.max(0,Date.now()-this.Qo),_=Math.max(0,u-f);_>0&&le("ExponentialBackoff",`Backing off for ${_} ms (base delay: ${this.ko} ms, delay with jitter: ${u} ms, last attempt: ${f} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,_,()=>(this.Qo=Date.now(),o())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Zc{constructor(o,u,f,_,C,x,V,G){this.oi=o,this.Go=f,this.zo=_,this.connection=C,this.authCredentialsProvider=x,this.appCheckCredentialsProvider=V,this.listener=G,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ys(o,u)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var o=this;return(0,Ce.A)(function*(){o.Zo()&&(yield o.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(o){this.s_(),this.stream.send(o)}r_(){var o=this;return(0,Ce.A)(function*(){if(o.Xo())return o.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(o,u){var f=this;return(0,Ce.A)(function*(){f.s_(),f.o_(),f.Yo.cancel(),f.jo++,4!==o?f.Yo.reset():u&&u.code===pe.RESOURCE_EXHAUSTED?(gt(u.toString()),gt("Using maximum backoff delay to prevent overloading the backend."),f.Yo.Ko()):u&&u.code===pe.UNAUTHENTICATED&&3!==f.state&&(f.authCredentialsProvider.invalidateToken(),f.appCheckCredentialsProvider.invalidateToken()),null!==f.stream&&(f.__(),f.stream.close(),f.stream=null),f.state=o,yield f.listener.Ao(u)})()}__(){}auth(){this.state=1;const o=this.a_(this.jo),u=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([f,_])=>{this.jo===u&&this.u_(f,_)},f=>{o(()=>{const _=new ye(pe.UNKNOWN,"Fetching auth token failed: "+f.message);return this.c_(_)})})}u_(o,u){const f=this.a_(this.jo);this.stream=this.l_(o,u),this.stream.Po(()=>{f(()=>this.listener.Po())}),this.stream.To(()=>{f(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(_=>{f(()=>this.c_(_))}),this.stream.onMessage(_=>{f(()=>this.onMessage(_))})}e_(){var o=this;this.state=5,this.Yo.$o((0,Ce.A)(function*(){o.state=0,o.start()}))}c_(o){return le("PersistentStream",`close with error: ${o}`),this.stream=null,this.close(4,o)}a_(o){return u=>{this.oi.enqueueAndForget(()=>this.jo===o?u():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Tl extends Zc{constructor(o,u,f,_,C,x){super(o,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",u,f,_,x),this.serializer=C}l_(o,u){return this.connection.Oo("Listen",o,u)}onMessage(o){this.Yo.reset();const u=function Pd(p,o){let u;if("targetChange"in o){const f="NO_CHANGE"===(X=o.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:De(),_=o.targetChange.targetIds||[],C=function(X,ce){return X.useProto3Json?(Ve(void 0===ce||"string"==typeof ce),Vi.fromBase64String(ce||"")):(Ve(void 0===ce||ce instanceof Buffer||ce instanceof Uint8Array),Vi.fromUint8Array(ce||new Uint8Array))}(p,o.targetChange.resumeToken),x=o.targetChange.cause,V=x&&function(X){const ce=void 0===X.code?pe.UNKNOWN:ts(X.code);return new ye(ce,X.message||"")}(x);u=new Md(f,_,C,V||null)}else if("documentChange"in o){const f=o.documentChange,_=Os(p,f.document.name),C=Bi(f.document.updateTime),x=f.document.createTime?Bi(f.document.createTime):ln.min(),V=new ho({mapValue:{fields:f.document.fields}}),G=Qr.newFoundDocument(_,C,x,V);u=new dl(f.targetIds||[],f.removedTargetIds||[],G.key,G)}else if("documentDelete"in o){const f=o.documentDelete,_=Os(p,f.document),C=f.readTime?Bi(f.readTime):ln.min(),x=Qr.newNoDocument(_,C);u=new dl([],f.removedTargetIds||[],x.key,x)}else if("documentRemove"in o){const f=o.documentRemove,_=Os(p,f.document);u=new dl([],f.removedTargetIds||[],_,null)}else{if(!("filter"in o))return De();{const f=o.filter,{count:_=0,unchangedNames:C}=f,x=new wr(_,C);u=new Rd(f.targetId,x)}}var X;return u}(this.serializer,o),f=function(C){if(!("targetChange"in C))return ln.min();const x=C.targetChange;return x.targetIds&&x.targetIds.length?ln.min():x.readTime?Bi(x.readTime):ln.min()}(o);return this.listener.h_(u,f)}P_(o){const u={};u.database=$u(this.serializer),u.addTarget=function(C,x){let V;const G=x.target;if(V=Uc(G)?{documents:La(C,G)}:{query:Zi(C,G)._t},V.targetId=x.targetId,x.resumeToken.approximateByteSize()>0){V.resumeToken=Hu(C,x.resumeToken);const X=Cc(C,x.expectedCount);null!==X&&(V.expectedCount=X)}else if(x.snapshotVersion.compareTo(ln.min())>0){V.readTime=Yi(C,x.snapshotVersion.toTimestamp());const X=Cc(C,x.expectedCount);null!==X&&(V.expectedCount=X)}return V}(this.serializer,o);const f=function jl(p,o){const u=function(_){switch(_){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(o.purpose);return null==u?null:{"goog-listen-tags":u}}(0,o);f&&(u.labels=f),this.i_(u)}I_(o){const u={};u.database=$u(this.serializer),u.removeTarget=o,this.i_(u)}}class kh extends Zc{constructor(o,u,f,_,C,x){super(o,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",u,f,_,x),this.serializer=C,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(o,u){return this.connection.Oo("Write",o,u)}onMessage(o){if(Ve(!!o.streamToken),this.lastStreamToken=o.streamToken,this.T_){this.Yo.reset();const u=function Fa(p,o){return p&&p.length>0?(Ve(void 0!==o),p.map(u=>function(_,C){let x=Bi(_.updateTime?_.updateTime:C);return x.isEqual(ln.min())&&(x=Bi(C)),new Na(x,_.transformResults||[])}(u,o))):[]}(o.writeResults,o.commitTime),f=Bi(o.commitTime);return this.listener.A_(f,u)}return Ve(!o.writeResults||0===o.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const o={};o.database=$u(this.serializer),this.i_(o)}d_(o){const u={streamToken:this.lastStreamToken,writes:o.map(f=>function ka(p,o){let u;if(o instanceof F)u={update:Pr(p,o.key,o.value)};else if(o instanceof ut)u={delete:Wo(p,o.key)};else if(o instanceof re)u={update:Pr(p,o.key,o.data),updateMask:Va(o.fieldMask)};else{if(!(o instanceof mt))return De();u={verify:Wo(p,o.key)}}return o.fieldTransforms.length>0&&(u.updateTransforms=o.fieldTransforms.map(f=>function(C,x){const V=x.transform;if(V instanceof mu)return{fieldPath:x.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(V instanceof ia)return{fieldPath:x.field.canonicalString(),appendMissingElements:{values:V.elements}};if(V instanceof _u)return{fieldPath:x.field.canonicalString(),removeAllFromArray:{values:V.elements}};if(V instanceof Jr)return{fieldPath:x.field.canonicalString(),increment:V.Pe};throw De()}(0,f))),o.precondition.isNone||(u.currentDocument=void 0!==(C=o.precondition).updateTime?{updateTime:wc(p,C.updateTime)}:void 0!==C.exists?{exists:C.exists}:De()),u;var C}(this.serializer,f))};this.i_(u)}}class Ha extends class{}{constructor(o,u,f,_){super(),this.authCredentials=o,this.appCheckCredentials=u,this.connection=f,this.serializer=_,this.m_=!1}f_(){if(this.m_)throw new ye(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Co(o,u,f,_){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([C,x])=>this.connection.Co(o,yu(u,f),_,C,x)).catch(C=>{throw"FirebaseError"===C.name?(C.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),C):new ye(pe.UNKNOWN,C.toString())})}xo(o,u,f,_,C){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([x,V])=>this.connection.xo(o,yu(u,f),_,x,V,C)).catch(x=>{throw"FirebaseError"===x.name?(x.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),x):new ye(pe.UNKNOWN,x.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Zl{constructor(o,u){this.asyncQueue=o,this.onlineStateHandler=u,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(o){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${o.toString()}`),this.S_("Offline")))}set(o){this.C_(),this.g_=0,"Online"===o&&(this.y_=!1),this.S_(o)}S_(o){o!==this.state&&(this.state=o,this.onlineStateHandler(o))}b_(o){const u=`Could not reach Cloud Firestore backend. ${o}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(gt(u),this.y_=!1):le("OnlineStateTracker",u)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class kf{constructor(o,u,f,_,C){var x=this;this.localStore=o,this.datastore=u,this.asyncQueue=f,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=C,this.O_.io(V=>{f.enqueueAndForget((0,Ce.A)(function*(){var G;Sl(x)&&(le("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,Ce.A)(function*(ce){const Ie=Ne(ce);Ie.M_.add(4),yield ic(Ie),Ie.N_.set("Unknown"),Ie.M_.delete(4),yield Nr(Ie)}),function X(ce){return G.apply(this,arguments)})(x))}))}),this.N_=new Zl(f,_)}}function Nr(p){return xl.apply(this,arguments)}function xl(){return(xl=(0,Ce.A)(function*(p){if(Sl(p))for(const o of p.x_)yield o(!0)})).apply(this,arguments)}function ic(p){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,Ce.A)(function*(p){for(const o of p.x_)yield o(!1)})).apply(this,arguments)}function Jl(p,o){const u=Ne(p);u.F_.has(o.targetId)||(u.F_.set(o.targetId,o),Ff(u)?ii(u):nd(u).Xo()&&oc(u,o))}function Jc(p,o){const u=Ne(p),f=nd(u);u.F_.delete(o),f.Xo()&&gr(u,o),0===u.F_.size&&(f.Xo()?f.n_():Sl(u)&&u.N_.set("Unknown"))}function oc(p,o){if(p.L_.xe(o.targetId),o.resumeToken.approximateByteSize()>0||o.snapshotVersion.compareTo(ln.min())>0){const u=p.remoteSyncer.getRemoteKeysForTarget(o.targetId).size;o=o.withExpectedCount(u)}nd(p).P_(o)}function gr(p,o){p.L_.xe(o),nd(p).I_(o)}function ii(p){p.L_=new di({getRemoteKeysForTarget:o=>p.remoteSyncer.getRemoteKeysForTarget(o),ot:o=>p.F_.get(o)||null,tt:()=>p.datastore.serializer.databaseId}),nd(p).start(),p.N_.w_()}function Ff(p){return Sl(p)&&!nd(p).Zo()&&p.F_.size>0}function Sl(p){return 0===Ne(p).M_.size}function sc(p){p.L_=void 0}function Sm(p){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,Ce.A)(function*(p){p.N_.set("Online")})).apply(this,arguments)}function Dm(p){return ed.apply(this,arguments)}function ed(){return(ed=(0,Ce.A)(function*(p){p.F_.forEach((o,u)=>{oc(p,o)})})).apply(this,arguments)}function qp(p,o){return td.apply(this,arguments)}function td(){return(td=(0,Ce.A)(function*(p,o){sc(p),Ff(p)?(p.N_.D_(o),ii(p)):p.N_.set("Unknown")})).apply(this,arguments)}function Ko(p,o,u){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,Ce.A)(function*(p,o,u){if(p.N_.set("Online"),o instanceof Md&&2===o.state&&o.cause)try{yield(f=(0,Ce.A)(function*(C,x){const V=x.cause;for(const G of x.targetIds)C.F_.has(G)&&(yield C.remoteSyncer.rejectListen(G,V),C.F_.delete(G),C.L_.removeTarget(G))}),function _(C,x){return f.apply(this,arguments)})(p,o)}catch(f){le("RemoteStore","Failed to remove targets %s: %s ",o.targetIds.join(","),f),yield xu(p,f)}else if(o instanceof dl?p.L_.Ke(o):o instanceof Rd?p.L_.He(o):p.L_.We(o),!u.isEqual(ln.min()))try{const f=yield Ks(p.localStore);u.compareTo(f)>=0&&(yield function(C,x){const V=C.L_.rt(x);return V.targetChanges.forEach((G,X)=>{if(G.resumeToken.approximateByteSize()>0){const ce=C.F_.get(X);ce&&C.F_.set(X,ce.withResumeToken(G.resumeToken,x))}}),V.targetMismatches.forEach((G,X)=>{const ce=C.F_.get(G);if(!ce)return;C.F_.set(G,ce.withResumeToken(Vi.EMPTY_BYTE_STRING,ce.snapshotVersion)),gr(C,G);const Ie=new Ba(ce.target,G,X,ce.sequenceNumber);oc(C,Ie)}),C.remoteSyncer.applyRemoteEvent(V)}(p,u))}catch(f){le("RemoteStore","Failed to raise snapshot:",f),yield xu(p,f)}var f}),Lf.apply(this,arguments)}function xu(p,o,u){return or.apply(this,arguments)}function or(){return(or=(0,Ce.A)(function*(p,o,u){if(!Re(o))throw o;p.M_.add(1),yield ic(p),p.N_.set("Offline"),u||(u=()=>Ks(p.localStore)),p.asyncQueue.enqueueRetryable((0,Ce.A)(function*(){le("RemoteStore","Retrying IndexedDB access"),yield u(),p.M_.delete(1),yield Nr(p)}))})).apply(this,arguments)}function Vf(p,o){return o().catch(u=>xu(p,u,o))}function Dl(p){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,Ce.A)(function*(p){const o=Ne(p),u=Sc(o);let f=o.v_.length>0?o.v_[o.v_.length-1].batchId:-1;for(;n1(o);)try{const _=yield Ca(o.localStore,f);if(null===_){0===o.v_.length&&u.n_();break}f=_.batchId,E0(o,_)}catch(_){yield xu(o,_)}Bf(o)&&Rm(o)})).apply(this,arguments)}function n1(p){return Sl(p)&&p.v_.length<10}function E0(p,o){p.v_.push(o);const u=Sc(p);u.Xo()&&u.E_&&u.d_(o.mutations)}function Bf(p){return Sl(p)&&!Sc(p).Zo()&&p.v_.length>0}function Rm(p){Sc(p).start()}function C0(p){return ac.apply(this,arguments)}function ac(){return(ac=(0,Ce.A)(function*(p){Sc(p).V_()})).apply(this,arguments)}function w0(p){return eu.apply(this,arguments)}function eu(){return(eu=(0,Ce.A)(function*(p){const o=Sc(p);for(const u of p.v_)o.d_(u.mutations)})).apply(this,arguments)}function I0(p,o,u){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,Ce.A)(function*(p,o,u){const f=p.v_.shift(),_=hn.from(f,o,u);yield Vf(p,()=>p.remoteSyncer.applySuccessfulWrite(_)),yield Dl(p)})).apply(this,arguments)}function Mm(p,o){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,Ce.A)(function*(p,o){var u;o&&Sc(p).E_&&(yield(u=(0,Ce.A)(function*(_,C){if(function Qi(p){switch(p){default:return De();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}(V=C.code)&&V!==pe.ABORTED){const x=_.v_.shift();Sc(_).t_(),yield Vf(_,()=>_.remoteSyncer.rejectFailedWrite(x.batchId,C)),yield Dl(_)}var V}),function f(_,C){return u.apply(this,arguments)})(p,o)),Bf(p)&&Rm(p)}),Dt.apply(this,arguments)}function Vr(p,o){return ft.apply(this,arguments)}function ft(){return(ft=(0,Ce.A)(function*(p,o){const u=Ne(p);u.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const f=Sl(u);u.M_.add(3),yield ic(u),f&&u.N_.set("Unknown"),yield u.remoteSyncer.handleCredentialChange(o),u.M_.delete(3),yield Nr(u)})).apply(this,arguments)}function Vh(p,o){return ve.apply(this,arguments)}function ve(){return(ve=(0,Ce.A)(function*(p,o){const u=Ne(p);o?(u.M_.delete(2),yield Nr(u)):o||(u.M_.add(2),yield ic(u),u.N_.set("Unknown"))})).apply(this,arguments)}function nd(p){return p.B_||(p.B_=function(u,f,_){const C=Ne(u);return C.f_(),new Tl(f,C.connection,C.authCredentials,C.appCheckCredentials,C.serializer,_)}(p.datastore,p.asyncQueue,{Po:Sm.bind(null,p),To:Dm.bind(null,p),Ao:qp.bind(null,p),h_:Ko.bind(null,p)}),p.x_.push(function(){var o=(0,Ce.A)(function*(u){u?(p.B_.t_(),Ff(p)?ii(p):p.N_.set("Unknown")):(yield p.B_.stop(),sc(p))});return function(u){return o.apply(this,arguments)}}())),p.B_}function Sc(p){return p.k_||(p.k_=function(u,f,_){const C=Ne(u);return C.f_(),new kh(f,C.connection,C.authCredentials,C.appCheckCredentials,C.serializer,_)}(p.datastore,p.asyncQueue,{Po:()=>Promise.resolve(),To:C0.bind(null,p),Ao:Mm.bind(null,p),R_:w0.bind(null,p),A_:I0.bind(null,p)}),p.x_.push(function(){var o=(0,Ce.A)(function*(u){u?(p.k_.t_(),yield Dl(p)):(yield p.k_.stop(),p.v_.length>0&&(le("RemoteStore",`Stopping write stream with ${p.v_.length} pending writes`),p.v_=[]))});return function(u){return o.apply(this,arguments)}}())),p.k_}class Fs{constructor(o,u,f,_,C){this.asyncQueue=o,this.timerId=u,this.targetTimeMs=f,this.op=_,this.removalCallback=C,this.deferred=new _t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(x=>{})}get promise(){return this.deferred.promise}static createAndSchedule(o,u,f,_,C){const x=Date.now()+f,V=new Fs(o,u,x,_,C);return V.start(f),V}start(o){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),o)}skipDelay(){return this.handleDelayElapsed()}cancel(o){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ye(pe.CANCELLED,"Operation cancelled"+(o?": "+o:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(o=>this.deferred.resolve(o))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _o(p,o){if(gt("AsyncQueue",`${o}: ${p}`),Re(p))return new ye(pe.UNAVAILABLE,`${o}: ${p}`);throw p}class Rl{constructor(o){this.comparator=o?(u,f)=>o(u,f)||Wt.comparator(u.key,f.key):(u,f)=>Wt.comparator(u.key,f.key),this.keyedMap=Ms(),this.sortedSet=new Ar(this.comparator)}static emptySet(o){return new Rl(o.comparator)}has(o){return null!=this.keyedMap.get(o)}get(o){return this.keyedMap.get(o)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(o){const u=this.keyedMap.get(o);return u?this.sortedSet.indexOf(u):-1}get size(){return this.sortedSet.size}forEach(o){this.sortedSet.inorderTraversal((u,f)=>(o(u),!1))}add(o){const u=this.delete(o.key);return u.copy(u.keyedMap.insert(o.key,o),u.sortedSet.insert(o,null))}delete(o){const u=this.get(o);return u?this.copy(this.keyedMap.remove(o),this.sortedSet.remove(u)):this}isEqual(o){if(!(o instanceof Rl)||this.size!==o.size)return!1;const u=this.sortedSet.getIterator(),f=o.sortedSet.getIterator();for(;u.hasNext();){const _=u.getNext().key,C=f.getNext().key;if(!_.isEqual(C))return!1}return!0}toString(){const o=[];return this.forEach(u=>{o.push(u.toString())}),0===o.length?"DocumentSet ()":"DocumentSet (\n  "+o.join("  \n")+"\n)"}copy(o,u){const f=new Rl;return f.comparator=this.comparator,f.keyedMap=o,f.sortedSet=u,f}}class Xp{constructor(){this.q_=new Ar(Wt.comparator)}track(o){const u=o.doc.key,f=this.q_.get(u);f?0!==o.type&&3===f.type?this.q_=this.q_.insert(u,o):3===o.type&&1!==f.type?this.q_=this.q_.insert(u,{type:f.type,doc:o.doc}):2===o.type&&2===f.type?this.q_=this.q_.insert(u,{type:2,doc:o.doc}):2===o.type&&0===f.type?this.q_=this.q_.insert(u,{type:0,doc:o.doc}):1===o.type&&0===f.type?this.q_=this.q_.remove(u):1===o.type&&2===f.type?this.q_=this.q_.insert(u,{type:1,doc:f.doc}):0===o.type&&1===f.type?this.q_=this.q_.insert(u,{type:2,doc:o.doc}):De():this.q_=this.q_.insert(u,o)}Q_(){const o=[];return this.q_.inorderTraversal((u,f)=>{o.push(f)}),o}}class Uf{constructor(o,u,f,_,C,x,V,G,X){this.query=o,this.docs=u,this.oldDocs=f,this.docChanges=_,this.mutatedKeys=C,this.fromCache=x,this.syncStateChanged=V,this.excludesMetadataChanges=G,this.hasCachedResults=X}static fromInitialDocuments(o,u,f,_,C){const x=[];return u.forEach(V=>{x.push({type:0,doc:V})}),new Uf(o,u,Rl.emptySet(u),x,f,_,!0,!1,C)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(o){if(!(this.fromCache===o.fromCache&&this.hasCachedResults===o.hasCachedResults&&this.syncStateChanged===o.syncStateChanged&&this.mutatedKeys.isEqual(o.mutatedKeys)&&H(this.query,o.query)&&this.docs.isEqual(o.docs)&&this.oldDocs.isEqual(o.oldDocs)))return!1;const u=this.docChanges,f=o.docChanges;if(u.length!==f.length)return!1;for(let _=0;_<u.length;_++)if(u[_].type!==f[_].type||!u[_].doc.isEqual(f[_].doc))return!1;return!0}}class r1{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(o=>o.G_())}}class Qp{constructor(){this.queries=new Do(o=>se(o),H),this.onlineState="Unknown",this.z_=new Set}}function Bh(p,o){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,Ce.A)(function*(p,o){const u=Ne(p);let f=3;const _=o.query;let C=u.queries.get(_);C?!C.W_()&&o.G_()&&(f=2):(C=new r1,f=o.G_()?0:1);try{switch(f){case 0:C.K_=yield u.onListen(_,!0);break;case 1:C.K_=yield u.onListen(_,!1);break;case 2:yield u.onFirstRemoteStoreListen(_)}}catch(x){const V=_o(x,`Initialization of query '${xe(o.query)}' failed`);return void o.onError(V)}u.queries.set(_,C),C.U_.push(o),o.j_(u.onlineState),C.K_&&o.H_(C.K_)&&ru(u)})).apply(this,arguments)}function Gi(p,o){return tu.apply(this,arguments)}function tu(){return(tu=(0,Ce.A)(function*(p,o){const u=Ne(p),f=o.query;let _=3;const C=u.queries.get(f);if(C){const x=C.U_.indexOf(o);x>=0&&(C.U_.splice(x,1),0===C.U_.length?_=o.G_()?0:1:!C.W_()&&o.G_()&&(_=2))}switch(_){case 0:return u.queries.delete(f),u.onUnlisten(f,!0);case 1:return u.queries.delete(f),u.onUnlisten(f,!1);case 2:return u.onLastRemoteStoreUnlisten(f);default:return}})).apply(this,arguments)}function eo(p,o){const u=Ne(p);let f=!1;for(const _ of o){const x=u.queries.get(_.query);if(x){for(const V of x.U_)V.H_(_)&&(f=!0);x.K_=_}}f&&ru(u)}function nu(p,o,u){const f=Ne(p),_=f.queries.get(o);if(_)for(const C of _.U_)C.onError(u);f.queries.delete(o)}function ru(p){p.z_.forEach(o=>{o.next()})}var Yp,jh;(jh=Yp||(Yp={})).J_="default",jh.Cache="cache";class Hh{constructor(o,u,f){this.query=o,this.Y_=u,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=f||{}}H_(o){if(!this.options.includeMetadataChanges){const f=[];for(const _ of o.docChanges)3!==_.type&&f.push(_);o=new Uf(o.query,o.docs,o.oldDocs,f,o.mutatedKeys,o.fromCache,o.syncStateChanged,!0,o.hasCachedResults)}let u=!1;return this.Z_?this.ea(o)&&(this.Y_.next(o),u=!0):this.ta(o,this.onlineState)&&(this.na(o),u=!0),this.X_=o,u}onError(o){this.Y_.error(o)}j_(o){this.onlineState=o;let u=!1;return this.X_&&!this.Z_&&this.ta(this.X_,o)&&(this.na(this.X_),u=!0),u}ta(o,u){return!o.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==u))&&(!o.docs.isEmpty()||o.hasCachedResults||"Offline"===u)}ea(o){return o.docChanges.length>0||!!(o.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==o.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(o){o=Uf.fromInitialDocuments(o.query,o.docs,o.mutatedKeys,o.fromCache,o.hasCachedResults),this.Z_=!0,this.Y_.next(o)}G_(){return this.options.source!==Yp.Cache}}class jf{constructor(o){this.key=o}}class Om{constructor(o){this.key=o}}class Jp{constructor(o,u){this.query=o,this.la=u,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=tr(),this.mutatedKeys=tr(),this.Ia=$o(o),this.Ta=new Rl(this.Ia)}get Ea(){return this.la}da(o,u){const f=u?u.Aa:new Xp,_=u?u.Ta:this.Ta;let C=u?u.mutatedKeys:this.mutatedKeys,x=_,V=!1;const G="F"===this.query.limitType&&_.size===this.query.limit?_.last():null,X="L"===this.query.limitType&&_.size===this.query.limit?_.first():null;if(o.inorderTraversal((ce,Ie)=>{const Fe=_.get(ce),ht=Ot(this.query,Ie)?Ie:null,Ut=!!Fe&&this.mutatedKeys.has(Fe.key),en=!!ht&&(ht.hasLocalMutations||this.mutatedKeys.has(ht.key)&&ht.hasCommittedMutations);let Gt=!1;Fe&&ht?Fe.data.isEqual(ht.data)?Ut!==en&&(f.track({type:3,doc:ht}),Gt=!0):this.Ra(Fe,ht)||(f.track({type:2,doc:ht}),Gt=!0,(G&&this.Ia(ht,G)>0||X&&this.Ia(ht,X)<0)&&(V=!0)):!Fe&&ht?(f.track({type:0,doc:ht}),Gt=!0):Fe&&!ht&&(f.track({type:1,doc:Fe}),Gt=!0,(G||X)&&(V=!0)),Gt&&(ht?(x=x.add(ht),C=en?C.add(ce):C.delete(ce)):(x=x.delete(ce),C=C.delete(ce)))}),null!==this.query.limit)for(;x.size>this.query.limit;){const ce="F"===this.query.limitType?x.last():x.first();x=x.delete(ce.key),C=C.delete(ce.key),f.track({type:1,doc:ce})}return{Ta:x,Aa:f,Xi:V,mutatedKeys:C}}Ra(o,u){return o.hasLocalMutations&&u.hasCommittedMutations&&!u.hasLocalMutations}applyChanges(o,u,f,_){const C=this.Ta;this.Ta=o.Ta,this.mutatedKeys=o.mutatedKeys;const x=o.Aa.Q_();x.sort((ce,Ie)=>function(ht,Ut){const en=Gt=>{switch(Gt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return en(ht)-en(Ut)}(ce.type,Ie.type)||this.Ia(ce.doc,Ie.doc)),this.Va(f),_=null!=_&&_;const V=u&&!_?this.ma():[],G=0===this.Pa.size&&this.current&&!_?1:0,X=G!==this.ha;return this.ha=G,0!==x.length||X?{snapshot:new Uf(this.query,o.Ta,C,x,o.mutatedKeys,0===G,X,!1,!!f&&f.resumeToken.approximateByteSize()>0),fa:V}:{fa:V}}j_(o){return this.current&&"Offline"===o?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Xp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(o){return!this.la.has(o)&&!!this.Ta.has(o)&&!this.Ta.get(o).hasLocalMutations}Va(o){o&&(o.addedDocuments.forEach(u=>this.la=this.la.add(u)),o.modifiedDocuments.forEach(u=>{}),o.removedDocuments.forEach(u=>this.la=this.la.delete(u)),this.current=o.current)}ma(){if(!this.current)return[];const o=this.Pa;this.Pa=tr(),this.Ta.forEach(f=>{this.ga(f.key)&&(this.Pa=this.Pa.add(f.key))});const u=[];return o.forEach(f=>{this.Pa.has(f)||u.push(new Om(f))}),this.Pa.forEach(f=>{o.has(f)||u.push(new jf(f))}),u}pa(o){this.la=o.hs,this.Pa=tr();const u=this.da(o.documents);return this.applyChanges(u,!0)}ya(){return Uf.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class eg{constructor(o,u,f){this.query=o,this.targetId=u,this.view=f}}class Pm{constructor(o){this.key=o,this.wa=!1}}class Nm{constructor(o,u,f,_,C,x){this.localStore=o,this.remoteStore=u,this.eventManager=f,this.sharedClientState=_,this.currentUser=C,this.maxConcurrentLimboResolutions=x,this.Sa={},this.ba=new Do(V=>se(V),H),this.Da=new Map,this.Ca=new Set,this.va=new Ar(Wt.comparator),this.Fa=new Map,this.Ma=new Pi,this.xa={},this.Oa=new Map,this.Na=tc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function km(p,o){return zh.apply(this,arguments)}function zh(){return(zh=(0,Ce.A)(function*(p,o,u=!0){const f=Kf(p);let _;const C=f.ba.get(o);return C?(f.sharedClientState.addLocalQueryTarget(C.targetId),_=C.view.ya()):_=yield Xs(f,o,u,!0),_})).apply(this,arguments)}function tg(p,o){return rd.apply(this,arguments)}function rd(){return(rd=(0,Ce.A)(function*(p,o){const u=Kf(p);yield Xs(u,o,!0,!1)})).apply(this,arguments)}function Xs(p,o,u,f){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,Ce.A)(function*(p,o,u,f){const _=yield function xc(p,o){const u=Ne(p);return u.persistence.runTransaction("Allocate target","readwrite",f=>{let _;return u.Qr.getTargetData(f,o).next(C=>C?(_=C,he.resolve(_)):u.Qr.allocateTargetId(f).next(x=>(_=new Ba(o,x,"TargetPurposeListen",f.currentSequenceNumber),u.Qr.addTargetData(f,_).next(()=>_))))}).then(f=>{const _=u.ns.get(f.targetId);return(null===_||f.snapshotVersion.compareTo(_.snapshotVersion)>0)&&(u.ns=u.ns.insert(f.targetId,f),u.rs.set(o,f.targetId)),f})}(p.localStore,So(o)),C=_.targetId,x=u?p.sharedClientState.addLocalQueryTarget(C):"not-current";let V;return f&&(V=yield function ji(p,o,u,f,_){return ng.apply(this,arguments)}(p,o,C,"current"===x,_.resumeToken)),p.isPrimaryClient&&u&&Jl(p.remoteStore,_),V})).apply(this,arguments)}function ng(){return ng=(0,Ce.A)(function*(p,o,u,f,_){p.Ba=(Ie,Fe,ht)=>{return(Ut=(0,Ce.A)(function*(Gt,Rn,Xn,Ln){let yr=Rn.view.da(Xn);yr.Xi&&(yr=yield Zu(Gt.localStore,Rn.query,!1).then(({documents:Oe})=>Rn.view.da(Oe,yr)));const hi=Ln&&Ln.targetChanges.get(Rn.targetId),Fr=Ln&&null!=Ln.targetMismatches.get(Rn.targetId),et=Rn.view.applyChanges(yr,Gt.isPrimaryClient,hi,Fr);return ag(Gt,Rn.targetId,et.fa),et.snapshot}),function en(Gt,Rn,Xn,Ln){return Ut.apply(this,arguments)})(p,Ie,Fe,ht);var Ut};const C=yield Zu(p.localStore,o,!0),x=new Jp(o,C.hs),V=x.da(C.documents),G=Mo.createSynthesizedTargetChangeForCurrentChange(u,f&&"Offline"!==p.onlineState,_),X=x.applyChanges(V,p.isPrimaryClient,G);ag(p,u,X.fa);const ce=new eg(o,u,x);return p.ba.set(o,ce),p.Da.has(u)?p.Da.get(u).push(o):p.Da.set(u,[o]),X.snapshot}),ng.apply(this,arguments)}function b0(p,o,u){return zd.apply(this,arguments)}function zd(){return(zd=(0,Ce.A)(function*(p,o,u){const f=Ne(p),_=f.ba.get(o),C=f.Da.get(_.targetId);if(C.length>1)return f.Da.set(_.targetId,C.filter(x=>!H(x,o))),void f.ba.delete(o);f.isPrimaryClient?(f.sharedClientState.removeLocalQueryTarget(_.targetId),f.sharedClientState.isActiveQueryTarget(_.targetId)||(yield Il(f.localStore,_.targetId,!1).then(()=>{f.sharedClientState.clearQueryState(_.targetId),u&&Jc(f.remoteStore,_.targetId),Kd(f,_.targetId)}).catch(ei))):(Kd(f,_.targetId),yield Il(f.localStore,_.targetId,!0))})).apply(this,arguments)}function T0(p,o){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,Ce.A)(function*(p,o){const u=Ne(p),f=u.ba.get(o),_=u.Da.get(f.targetId);u.isPrimaryClient&&1===_.length&&(u.sharedClientState.removeLocalQueryTarget(f.targetId),Jc(u.remoteStore,f.targetId))})).apply(this,arguments)}function id(){return(id=(0,Ce.A)(function*(p,o,u){const f=function fg(p){const o=Ne(p);return o.remoteStore.remoteSyncer.applySuccessfulWrite=ig.bind(null,o),o.remoteStore.remoteSyncer.rejectFailedWrite=Fm.bind(null,o),o}(p);try{const _=yield function(x,V){const G=Ne(x),X=Yn.now(),ce=V.reduce((ht,Ut)=>ht.add(Ut.key),tr());let Ie,Fe;return G.persistence.runTransaction("Locally write mutations","readwrite",ht=>{let Ut=Sn(),en=tr();return G.os.getEntries(ht,ce).next(Gt=>{Ut=Gt,Ut.forEach((Rn,Xn)=>{Xn.isValidDocument()||(en=en.add(Rn))})}).next(()=>G.localDocuments.getOverlayedDocuments(ht,Ut)).next(Gt=>{Ie=Gt;const Rn=[];for(const Xn of V){const Ln=Ah(Xn,Ie.get(Xn.key).overlayedDocument);null!=Ln&&Rn.push(new re(Xn.key,Ln,Lc(Ln.value.mapValue),Gn.exists(!0)))}return G.mutationQueue.addMutationBatch(ht,X,Rn,V)}).next(Gt=>{Fe=Gt;const Rn=Gt.applyToLocalDocumentSet(Ie,en);return G.documentOverlayCache.saveOverlays(ht,Gt.batchId,Rn)})}).then(()=>({batchId:Fe.batchId,changes:Zr(Ie)}))}(f.localStore,o);f.sharedClientState.addPendingMutation(_.batchId),function(x,V,G){let X=x.xa[x.currentUser.toKey()];X||(X=new Ar(wn)),X=X.insert(V,G),x.xa[x.currentUser.toKey()]=X}(f,_.batchId,u),yield ou(f,_.changes),yield Dl(f.remoteStore)}catch(_){const C=_o(_,"Failed to persist write");u.reject(C)}})).apply(this,arguments)}function iu(p,o){return rg.apply(this,arguments)}function rg(){return(rg=(0,Ce.A)(function*(p,o){const u=Ne(p);try{const f=yield function Yc(p,o){const u=Ne(p),f=o.snapshotVersion;let _=u.ns;return u.persistence.runTransaction("Apply remote event","readwrite-primary",C=>{const x=u.os.newChangeBuffer({trackRemovals:!0});_=u.ns;const V=[];o.targetChanges.forEach((ce,Ie)=>{const Fe=_.get(Ie);if(!Fe)return;V.push(u.Qr.removeMatchingKeys(C,ce.removedDocuments,Ie).next(()=>u.Qr.addMatchingKeys(C,ce.addedDocuments,Ie)));let ht=Fe.withSequenceNumber(C.currentSequenceNumber);var en,Gt,Rn;null!==o.targetMismatches.get(Ie)?ht=ht.withResumeToken(Vi.EMPTY_BYTE_STRING,ln.min()).withLastLimboFreeSnapshotVersion(ln.min()):ce.resumeToken.approximateByteSize()>0&&(ht=ht.withResumeToken(ce.resumeToken,f)),_=_.insert(Ie,ht),Gt=ht,Rn=ce,(0===(en=Fe).resumeToken.approximateByteSize()||Gt.snapshotVersion.toMicroseconds()-en.snapshotVersion.toMicroseconds()>=3e8||Rn.addedDocuments.size+Rn.modifiedDocuments.size+Rn.removedDocuments.size>0)&&V.push(u.Qr.updateTargetData(C,ht))});let G=Sn(),X=tr();if(o.documentUpdates.forEach(ce=>{o.resolvedLimboDocuments.has(ce)&&V.push(u.persistence.referenceDelegate.updateLimboDocument(C,ce))}),V.push(function Yl(p,o,u){let f=tr(),_=tr();return u.forEach(C=>f=f.add(C)),o.getEntries(p,f).next(C=>{let x=Sn();return u.forEach((V,G)=>{const X=C.get(V);G.isFoundDocument()!==X.isFoundDocument()&&(_=_.add(V)),G.isNoDocument()&&G.version.isEqual(ln.min())?(o.removeEntry(V,G.readTime),x=x.insert(V,G)):!X.isValidDocument()||G.version.compareTo(X.version)>0||0===G.version.compareTo(X.version)&&X.hasPendingWrites?(o.addEntry(G),x=x.insert(V,G)):le("LocalStore","Ignoring outdated watch update for ",V,". Current version:",X.version," Watch version:",G.version)}),{cs:x,ls:_}})}(C,x,o.documentUpdates).next(ce=>{G=ce.cs,X=ce.ls})),!f.isEqual(ln.min())){const ce=u.Qr.getLastRemoteSnapshotVersion(C).next(Ie=>u.Qr.setTargetsMetadata(C,C.currentSequenceNumber,f));V.push(ce)}return he.waitFor(V).next(()=>x.apply(C)).next(()=>u.localDocuments.getLocalViewOfDocuments(C,G,X)).next(()=>G)}).then(C=>(u.ns=_,C))}(u.localStore,o);o.targetChanges.forEach((_,C)=>{const x=u.Fa.get(C);x&&(Ve(_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size<=1),_.addedDocuments.size>0?x.wa=!0:_.modifiedDocuments.size>0?Ve(x.wa):_.removedDocuments.size>0&&(Ve(x.wa),x.wa=!1))}),yield ou(u,f,o)}catch(f){yield ei(f)}})).apply(this,arguments)}function Hf(p,o,u){const f=Ne(p);if(f.isPrimaryClient&&0===u||!f.isPrimaryClient&&1===u){const _=[];f.ba.forEach((C,x)=>{const V=x.view.j_(o);V.snapshot&&_.push(V.snapshot)}),function(x,V){const G=Ne(x);G.onlineState=V;let X=!1;G.queries.forEach((ce,Ie)=>{for(const Fe of Ie.U_)Fe.j_(V)&&(X=!0)}),X&&ru(G)}(f.eventManager,o),_.length&&f.Sa.h_(_),f.onlineState=o,f.isPrimaryClient&&f.sharedClientState.setOnlineState(o)}}function qh(p,o,u){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,Ce.A)(function*(p,o,u){const f=Ne(p);f.sharedClientState.updateQueryState(o,"rejected",u);const _=f.Fa.get(o),C=_&&_.key;if(C){let x=new Ar(Wt.comparator);x=x.insert(C,Qr.newNoDocument(C,ln.min()));const V=tr().add(C),G=new Ws(ln.min(),new Map,new Ar(wn),x,V);yield iu(f,G),f.va=f.va.remove(C),f.Fa.delete(o),Bm(f)}else yield Il(f.localStore,o,!1).then(()=>Kd(f,o,u)).catch(ei)})).apply(this,arguments)}function ig(p,o){return Su.apply(this,arguments)}function Su(){return(Su=(0,Ce.A)(function*(p,o){const u=Ne(p),f=o.batch.batchId;try{const _=yield function ks(p,o){const u=Ne(p);return u.persistence.runTransaction("Acknowledge batch","readwrite-primary",f=>{const _=o.batch.keys(),C=u.os.newChangeBuffer({trackRemovals:!0});return function(V,G,X,ce){const Ie=X.batch,Fe=Ie.keys();let ht=he.resolve();return Fe.forEach(Ut=>{ht=ht.next(()=>ce.getEntry(G,Ut)).next(en=>{const Gt=X.docVersions.get(Ut);Ve(null!==Gt),en.version.compareTo(Gt)<0&&(Ie.applyToRemoteDocument(en,X),en.isValidDocument()&&(en.setReadTime(X.commitVersion),ce.addEntry(en)))})}),ht.next(()=>V.mutationQueue.removeMutationBatch(G,Ie))}(u,f,o,C).next(()=>C.apply(f)).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,_,o.batch.batchId)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,function(V){let G=tr();for(let X=0;X<V.mutationResults.length;++X)V.mutationResults[X].transformResults.length>0&&(G=G.add(V.batch.mutations[X].key));return G}(o))).next(()=>u.localDocuments.getDocuments(f,_))})}(u.localStore,o);Gf(u,f,null),sg(u,f),u.sharedClientState.updateMutationState(f,"acknowledged"),yield ou(u,_)}catch(_){yield ei(_)}})).apply(this,arguments)}function Fm(p,o,u){return og.apply(this,arguments)}function og(){return(og=(0,Ce.A)(function*(p,o,u){const f=Ne(p);try{const _=yield function(x,V){const G=Ne(x);return G.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let ce;return G.mutationQueue.lookupMutationBatch(X,V).next(Ie=>(Ve(null!==Ie),ce=Ie.keys(),G.mutationQueue.removeMutationBatch(X,Ie))).next(()=>G.mutationQueue.performConsistencyCheck(X)).next(()=>G.documentOverlayCache.removeOverlaysForBatchId(X,ce,V)).next(()=>G.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,ce)).next(()=>G.localDocuments.getDocuments(X,ce))})}(f.localStore,o);Gf(f,o,u),sg(f,o),f.sharedClientState.updateMutationState(o,"rejected",u),yield ou(f,_)}catch(_){yield ei(_)}})).apply(this,arguments)}function sg(p,o){(p.Oa.get(o)||[]).forEach(u=>{u.resolve()}),p.Oa.delete(o)}function Gf(p,o,u){const f=Ne(p);let _=f.xa[f.currentUser.toKey()];if(_){const C=_.get(o);C&&(u?C.reject(u):C.resolve(),_=_.remove(o)),f.xa[f.currentUser.toKey()]=_}}function Kd(p,o,u=null){p.sharedClientState.removeLocalQueryTarget(o);for(const f of p.Da.get(o))p.ba.delete(f),u&&p.Sa.ka(f,u);p.Da.delete(o),p.isPrimaryClient&&p.Ma.Vr(o).forEach(f=>{p.Ma.containsKey(f)||Lm(p,f)})}function Lm(p,o){p.Ca.delete(o.path.canonicalString());const u=p.va.get(o);null!==u&&(Jc(p.remoteStore,u),p.va=p.va.remove(o),p.Fa.delete(u),Bm(p))}function ag(p,o,u){for(const f of u)f instanceof jf?(p.Ma.addReference(f.key,o),Vm(p,f)):f instanceof Om?(le("SyncEngine","Document no longer in limbo: "+f.key),p.Ma.removeReference(f.key,o),p.Ma.containsKey(f.key)||Lm(p,f.key)):De()}function Vm(p,o){const u=o.key,f=u.path.canonicalString();p.va.get(u)||p.Ca.has(f)||(le("SyncEngine","New document in limbo: "+u),p.Ca.add(f),Bm(p))}function Bm(p){for(;p.Ca.size>0&&p.va.size<p.maxConcurrentLimboResolutions;){const o=p.Ca.values().next().value;p.Ca.delete(o);const u=new Wt(Ft.fromString(o)),f=p.Na.next();p.Fa.set(f,new Pm(u)),p.va=p.va.insert(u,f),Jl(p.remoteStore,new Ba(So(Go(u.path)),f,"TargetPurposeLimboResolution",mr.oe))}}function ou(p,o,u){return sd.apply(this,arguments)}function sd(){return sd=(0,Ce.A)(function*(p,o,u){const f=Ne(p),_=[],C=[],x=[];var V;f.ba.isEmpty()||(f.ba.forEach((V,G)=>{x.push(f.Ba(G,o,u).then(X=>{if((X||u)&&f.isPrimaryClient&&f.sharedClientState.updateQueryState(G.targetId,X&&!X.fromCache?"current":"not-current"),X){_.push(X);const ce=Yu.Ki(G.targetId,X);C.push(ce)}}))}),yield Promise.all(x),f.Sa.h_(_),yield(V=(0,Ce.A)(function*(X,ce){const Ie=Ne(X);try{yield Ie.persistence.runTransaction("notifyLocalViewChanges","readwrite",Fe=>he.forEach(ce,ht=>he.forEach(ht.qi,Ut=>Ie.persistence.referenceDelegate.addReference(Fe,ht.targetId,Ut)).next(()=>he.forEach(ht.Qi,Ut=>Ie.persistence.referenceDelegate.removeReference(Fe,ht.targetId,Ut)))))}catch(Fe){if(!Re(Fe))throw Fe;le("LocalStore","Failed to update sequence numbers: "+Fe)}for(const Fe of ce){const ht=Fe.targetId;if(!Fe.fromCache){const Ut=Ie.ns.get(ht),Gt=Ut.withLastLimboFreeSnapshotVersion(Ut.snapshotVersion);Ie.ns=Ie.ns.insert(ht,Gt)}}}),function G(X,ce){return V.apply(this,arguments)})(f.localStore,C))}),sd.apply(this,arguments)}function cg(p,o){return ad.apply(this,arguments)}function ad(){return(ad=(0,Ce.A)(function*(p,o){const u=Ne(p);if(!u.currentUser.isEqual(o)){le("SyncEngine","User change. New user:",o.toKey());const f=yield wl(u.localStore,o);u.currentUser=o,(C=u).Oa.forEach(V=>{V.forEach(G=>{G.reject(new ye(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),C.Oa.clear(),u.sharedClientState.handleUserChange(o,f.removedBatchIds,f.addedBatchIds),yield ou(u,f.us)}var C})).apply(this,arguments)}function ug(p,o){const u=Ne(p),f=u.Fa.get(o);if(f&&f.wa)return tr().add(f.key);{let _=tr();const C=u.Da.get(o);if(!C)return _;for(const x of C){const V=u.ba.get(x);_=_.unionWith(V.view.Ea)}return _}}function Kf(p){const o=Ne(p);return o.remoteStore.remoteSyncer.applyRemoteEvent=iu.bind(null,o),o.remoteStore.remoteSyncer.getRemoteKeysForTarget=ug.bind(null,o),o.remoteStore.remoteSyncer.rejectListen=qh.bind(null,o),o.Sa.h_=eo.bind(null,o.eventManager),o.Sa.ka=nu.bind(null,o.eventManager),o}class cc{constructor(){this.synchronizeTabs=!1}initialize(o){var u=this;return(0,Ce.A)(function*(){u.serializer=vr(o.databaseInfo.databaseId),u.sharedClientState=u.createSharedClientState(o),u.persistence=u.createPersistence(o),yield u.persistence.start(),u.localStore=u.createLocalStore(o),u.gcScheduler=u.createGarbageCollectionScheduler(o,u.localStore),u.indexBackfillerScheduler=u.createIndexBackfillerScheduler(o,u.localStore)})()}createGarbageCollectionScheduler(o,u){return null}createIndexBackfillerScheduler(o,u){return null}createLocalStore(o){return function mo(p,o,u,f){return new Qc(p,o,u,f)}(this.persistence,new Cl,o.initialUser,this.serializer)}createPersistence(o){return new Ai(Xc.Hr,this.serializer)}createSharedClientState(o){return new O}terminate(){var o=this;return(0,Ce.A)(function*(){var u,f;null===(u=o.gcScheduler)||void 0===u||u.stop(),null===(f=o.indexBackfillerScheduler)||void 0===f||f.stop(),o.sharedClientState.shutdown(),yield o.persistence.shutdown()})()}}class su{initialize(o,u){var f=this;return(0,Ce.A)(function*(){f.localStore||(f.localStore=o.localStore,f.sharedClientState=o.sharedClientState,f.datastore=f.createDatastore(u),f.remoteStore=f.createRemoteStore(u),f.eventManager=f.createEventManager(u),f.syncEngine=f.createSyncEngine(u,!o.synchronizeTabs),f.sharedClientState.onlineStateHandler=_=>Hf(f.syncEngine,_,1),f.remoteStore.remoteSyncer.handleCredentialChange=cg.bind(null,f.syncEngine),yield Vh(f.remoteStore,f.syncEngine.isPrimaryClient))})()}createEventManager(o){return new Qp}createDatastore(o){const u=vr(o.databaseInfo.databaseId),f=new jt(o.databaseInfo);return new Ha(o.authCredentials,o.appCheckCredentials,f,u)}createRemoteStore(o){return f=this.localStore,_=this.datastore,C=o.asyncQueue,x=u=>Hf(this.syncEngine,u,0),V=A.D()?new A:new E,new kf(f,_,C,x,V);var f,_,C,x,V}createSyncEngine(o,u){return function(_,C,x,V,G,X,ce){const Ie=new Nm(_,C,x,V,G,X);return ce&&(Ie.La=!0),Ie}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,o.initialUser,o.maxConcurrentLimboResolutions,u)}terminate(){var o=this;return(0,Ce.A)(function*(){var u,f;yield(f=(0,Ce.A)(function*(C){const x=Ne(C);le("RemoteStore","RemoteStore shutting down."),x.M_.add(5),yield ic(x),x.O_.shutdown(),x.N_.set("Unknown")}),function _(C){return f.apply(this,arguments)})(o.remoteStore),null===(u=o.datastore)||void 0===u||u.terminate()})()}}class Po{constructor(o){this.observer=o,this.muted=!1}next(o){this.observer.next&&this.Ka(this.observer.next,o)}error(o){this.observer.error?this.Ka(this.observer.error,o):gt("Uncaught Error in snapshot listener:",o.toString())}$a(){this.muted=!0}Ka(o,u){this.muted||setTimeout(()=>{this.muted||o(u)},0)}}class R0{constructor(o,u,f,_){var C=this;this.authCredentials=o,this.appCheckCredentials=u,this.asyncQueue=f,this.databaseInfo=_,this.user=Xe.UNAUTHENTICATED,this.clientId=si.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(f,function(){var x=(0,Ce.A)(function*(V){le("FirestoreClient","Received user=",V.uid),yield C.authCredentialListener(V),C.user=V});return function(V){return x.apply(this,arguments)}}()),this.appCheckCredentials.start(f,x=>(le("FirestoreClient","Received new app check token=",x),this.appCheckCredentialListener(x,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(o){this.authCredentialListener=o}setAppCheckTokenChangeListener(o){this.appCheckCredentialListener=o}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ye(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var o=this;this.asyncQueue.enterRestrictedMode();const u=new _t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.A)(function*(){try{o._onlineComponents&&(yield o._onlineComponents.terminate()),o._offlineComponents&&(yield o._offlineComponents.terminate()),o.authCredentials.shutdown(),o.appCheckCredentials.shutdown(),u.resolve()}catch(f){const _=_o(f,"Failed to shutdown persistence");u.reject(_)}})),u.promise}}function Xf(p,o){return fi.apply(this,arguments)}function fi(){return fi=(0,Ce.A)(function*(p,o){p.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const u=p.configuration;yield o.initialize(u);let f=u.initialUser;p.setCredentialChangeListener(function(){var _=(0,Ce.A)(function*(C){f.isEqual(C)||(yield wl(o.localStore,C),f=C)});return function(C){return _.apply(this,arguments)}}()),o.persistence.setDatabaseDeletedListener(()=>p.terminate()),p._offlineComponents=o}),fi.apply(this,arguments)}function ep(p,o){return ud.apply(this,arguments)}function ud(){return(ud=(0,Ce.A)(function*(p,o){p.asyncQueue.verifyOperationInProgress();const u=yield function Qd(p){return tp.apply(this,arguments)}(p);le("FirestoreClient","Initializing OnlineComponentProvider"),yield o.initialize(u,p.configuration),p.setCredentialChangeListener(f=>Vr(o.remoteStore,f)),p.setAppCheckTokenChangeListener((f,_)=>Vr(o.remoteStore,_)),p._onlineComponents=o})).apply(this,arguments)}function tp(){return(tp=(0,Ce.A)(function*(p){if(!p._offlineComponents)if(p._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Xf(p,p._uninitializedComponentsProvider._offline)}catch(o){const u=o;if(!function au(p){return"FirebaseError"===p.name?p.code===pe.FAILED_PRECONDITION||p.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code}(u))throw u;St("Error using user provided cache. Falling back to memory cache: "+u),yield Xf(p,new cc)}}else le("FirestoreClient","Using default OfflineComponentProvider"),yield Xf(p,new cc);return p._offlineComponents})).apply(this,arguments)}function np(p){return ld.apply(this,arguments)}function ld(){return(ld=(0,Ce.A)(function*(p){return p._onlineComponents||(p._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),yield ep(p,p._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),yield ep(p,new su))),p._onlineComponents})).apply(this,arguments)}function Yd(p){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,Ce.A)(function*(p){const o=yield np(p),u=o.eventManager;return u.onListen=km.bind(null,o.syncEngine),u.onUnlisten=b0.bind(null,o.syncEngine),u.onFirstRemoteStoreListen=tg.bind(null,o.syncEngine),u.onLastRemoteStoreUnlisten=T0.bind(null,o.syncEngine),u})).apply(this,arguments)}function yg(p){const o={};return void 0!==p.timeoutSeconds&&(o.timeoutSeconds=p.timeoutSeconds),o}const Eg=new Map;function Zd(p,o,u){if(!u)throw new ye(pe.INVALID_ARGUMENT,`Function ${p}() cannot be called with an empty ${o}.`)}function P0(p){if(!Wt.isDocumentKey(p))throw new ye(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${p} has ${p.length}.`)}function Xm(p){if(Wt.isDocumentKey(p))throw new ye(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${p} has ${p.length}.`)}function Cg(p){if(void 0===p)return"undefined";if(null===p)return"null";if("string"==typeof p)return p.length>20&&(p=`${p.substring(0,20)}...`),JSON.stringify(p);if("number"==typeof p||"boolean"==typeof p)return""+p;if("object"==typeof p){if(p instanceof Array)return"an array";{const o=(f=p).constructor?f.constructor.name:null;return o?`a custom ${o} object`:"an object"}}var f;return"function"==typeof p?"a function":De()}function kr(p,o){if("_delegate"in p&&(p=p._delegate),!(p instanceof o)){if(o.name===p.constructor.name)throw new ye(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const u=Cg(p);throw new ye(pe.INVALID_ARGUMENT,`Expected type '${o.name}', but it was: ${u}`)}}return p}class Jd{constructor(o){var u,f;if(void 0===o.host){if(void 0!==o.ssl)throw new ye(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=o.host,this.ssl=null===(u=o.ssl)||void 0===u||u;if(this.credentials=o.credentials,this.ignoreUndefinedProperties=!!o.ignoreUndefinedProperties,this.localCache=o.localCache,void 0===o.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==o.cacheSizeBytes&&o.cacheSizeBytes<1048576)throw new ye(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=o.cacheSizeBytes}(function o1(p,o,u,f){if(!0===o&&!0===f)throw new ye(pe.INVALID_ARGUMENT,`${p} and ${u} cannot be used together.`)})("experimentalForceLongPolling",o.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",o.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!o.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==o.experimentalAutoDetectLongPolling&&!o.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=yg(null!==(f=o.experimentalLongPollingOptions)&&void 0!==f?f:{}),function(C){if(void 0!==C.timeoutSeconds){if(isNaN(C.timeoutSeconds))throw new ye(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${C.timeoutSeconds} (must not be NaN)`);if(C.timeoutSeconds<5)throw new ye(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${C.timeoutSeconds} (minimum allowed value is 5)`);if(C.timeoutSeconds>30)throw new ye(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${C.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!o.useFetchStreams}isEqual(o){return this.host===o.host&&this.ssl===o.ssl&&this.credentials===o.credentials&&this.cacheSizeBytes===o.cacheSizeBytes&&this.experimentalForceLongPolling===o.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===o.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===o.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===o.ignoreUndefinedProperties&&this.useFetchStreams===o.useFetchStreams}}class bi{constructor(o,u,f,_){this._authCredentials=o,this._appCheckCredentials=u,this._databaseId=f,this._app=_,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ye(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(o){if(this._settingsFrozen)throw new ye(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jd(o),void 0!==o.credentials&&(this._authCredentials=function(f){if(!f)return new $n;switch(f.type){case"firstParty":return new to(f.sessionIndex||"0",f.iamToken||null,f.authTokenFactory||null);case"provider":return f.client;default:throw new ye(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(o.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(u){const f=Eg.get(u);f&&(le("ComponentProvider","Removing Datastore"),Eg.delete(u),f.terminate())}(this),Promise.resolve()}}class os{constructor(o,u,f){this.converter=u,this._query=f,this.type="query",this.firestore=o}withConverter(o){return new os(this.firestore,o,this._query)}}class Ti{constructor(o,u,f){this.converter=u,this._key=f,this.type="document",this.firestore=o}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(o){return new Ti(this.firestore,o,this._key)}}class Ru extends os{constructor(o,u,f){super(o,u,Go(f)),this._path=f,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const o=this._path.popLast();return o.isEmpty()?null:new Ti(this.firestore,null,new Wt(o))}withConverter(o){return new Ru(this.firestore,o,this._path)}}function ip(p,o,...u){if(p=(0,me.Ku)(p),Zd("collection","path",o),p instanceof bi){const f=Ft.fromString(o,...u);return Xm(f),new Ru(p,null,f)}{if(!(p instanceof Ti||p instanceof Ru))throw new ye(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=p._path.child(Ft.fromString(o,...u));return Xm(f),new Ru(p.firestore,null,f)}}function Yf(p,o,...u){if(p=(0,me.Ku)(p),1===arguments.length&&(o=si.newId()),Zd("doc","path",o),p instanceof bi){const f=Ft.fromString(o,...u);return P0(f),new Ti(p,null,new Wt(f))}{if(!(p instanceof Ti||p instanceof Ru))throw new ye(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=p._path.child(Ft.fromString(o,...u));return P0(f),new Ti(p.firestore,p instanceof Ru?p.converter:null,new Wt(f))}}class sp{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ys(this,"async_queue_retry"),this.hu=()=>{const u=In();u&&le("AsyncQueue","Visibility state changed to "+u.visibilityState),this.Yo.Wo()};const o=In();o&&"function"==typeof o.addEventListener&&o.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(o){this.enqueue(o)}enqueueAndForgetEvenWhileRestricted(o){this.Pu(),this.Iu(o)}enterRestrictedMode(o){if(!this.ou){this.ou=!0,this.cu=o||!1;const u=In();u&&"function"==typeof u.removeEventListener&&u.removeEventListener("visibilitychange",this.hu)}}enqueue(o){if(this.Pu(),this.ou)return new Promise(()=>{});const u=new _t;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(o().then(u.resolve,u.reject),u.promise)).then(()=>u.promise)}enqueueRetryable(o){this.enqueueAndForget(()=>(this.su.push(o),this.Tu()))}Tu(){var o=this;return(0,Ce.A)(function*(){if(0!==o.su.length){try{yield o.su[0](),o.su.shift(),o.Yo.reset()}catch(u){if(!Re(u))throw u;le("AsyncQueue","Operation failed with retryable error: "+u)}o.su.length>0&&o.Yo.$o(()=>o.Tu())}})()}Iu(o){const u=this.iu.then(()=>(this.uu=!0,o().catch(f=>{throw this.au=f,this.uu=!1,gt("INTERNAL UNHANDLED ERROR: ",function(x){let V=x.message||"";return x.stack&&(V=x.stack.includes(x.message)?x.stack:x.message+"\n"+x.stack),V}(f)),f}).then(f=>(this.uu=!1,f))));return this.iu=u,u}enqueueAfterDelay(o,u,f){this.Pu(),this.lu.indexOf(o)>-1&&(u=0);const _=Fs.createAndSchedule(this,o,u,f,C=>this.Eu(C));return this._u.push(_),_}Pu(){this.au&&De()}verifyOperationInProgress(){}du(){var o=this;return(0,Ce.A)(function*(){let u;do{u=o.iu,yield u}while(u!==o.iu)})()}Au(o){for(const u of this._u)if(u.timerId===o)return!0;return!1}Ru(o){return this.du().then(()=>{this._u.sort((u,f)=>u.targetTimeMs-f.targetTimeMs);for(const u of this._u)if(u.skipDelay(),"all"!==o&&u.timerId===o)break;return this.du()})}Vu(o){this.lu.push(o)}Eu(o){const u=this._u.indexOf(o);this._u.splice(u,1)}}function Zf(p){return function(u,f){if("object"!=typeof u||null===u)return!1;const _=u;for(const C of["next","error","complete"])if(C in _&&"function"==typeof _[C])return!0;return!1}(p)}class $i extends bi{constructor(o,u,f,_){super(o,u,f,_),this.type="firestore",this._queue=new sp,this._persistenceKey=_?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||k0(this),this._firestoreClient.terminate()}}function Ym(p,o){const u="object"==typeof p?p:(0,Ke.Sx)(),f="string"==typeof p?p:o||"(default)",_=(0,Ke.j6)(u,"firestore").getImmediate({identifier:f});if(!_._initialized){const C=(0,me.yU)("firestore");C&&function N0(p,o,u,f={}){var _;const C=(p=kr(p,bi))._getSettings(),x=`${o}:${u}`;if("firestore.googleapis.com"!==C.host&&C.host!==x&&St("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),p._setSettings(Object.assign(Object.assign({},C),{host:x,ssl:!1})),f.mockUserToken){let V,G;if("string"==typeof f.mockUserToken)V=f.mockUserToken,G=Xe.MOCK_USER;else{V=(0,me.Fy)(f.mockUserToken,null===(_=p._app)||void 0===_?void 0:_.options.projectId);const X=f.mockUserToken.sub||f.mockUserToken.user_id;if(!X)throw new ye(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");G=new Xe(X)}p._authCredentials=new nn(new zt(V,G))}}(_,...C)}return _}function No(p){return p._firestoreClient||k0(p),p._firestoreClient.verifyNotTerminated(),p._firestoreClient}function k0(p){var o,u,f;const _=p._freezeSettings(),C=(G=(null===(o=p._app)||void 0===o?void 0:o.options.appId)||"",new na(p._databaseId,G,p._persistenceKey,(ce=_).host,ce.ssl,ce.experimentalForceLongPolling,ce.experimentalAutoDetectLongPolling,yg(ce.experimentalLongPollingOptions),ce.useFetchStreams));var G,ce;p._firestoreClient=new R0(p._authCredentials,p._appCheckCredentials,p._queue,C),null!==(u=_.localCache)&&void 0!==u&&u._offlineComponentProvider&&null!==(f=_.localCache)&&void 0!==f&&f._onlineComponentProvider&&(p._firestoreClient._uninitializedComponentsProvider={_offlineKind:_.localCache.kind,_offline:_.localCache._offlineComponentProvider,_online:_.localCache._onlineComponentProvider})}class el{constructor(o){this._byteString=o}static fromBase64String(o){try{return new el(Vi.fromBase64String(o))}catch(u){throw new ye(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+u)}}static fromUint8Array(o){return new el(Vi.fromUint8Array(o))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(o){return this._byteString.isEqual(o._byteString)}}class pd{constructor(...o){for(let u=0;u<o.length;++u)if(0===o[u].length)throw new ye(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(o)}isEqual(o){return this._internalPath.isEqual(o._internalPath)}}class gd{constructor(o){this._methodName=o}}class Ag{constructor(o,u){if(!isFinite(o)||o<-90||o>90)throw new ye(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+o);if(!isFinite(u)||u<-180||u>180)throw new ye(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+u);this._lat=o,this._long=u}get latitude(){return this._lat}get longitude(){return this._long}isEqual(o){return this._lat===o._lat&&this._long===o._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(o){return wn(this._lat,o._lat)||wn(this._long,o._long)}}const L0=/^__.*__$/;class V0{constructor(o,u,f){this.data=o,this.fieldMask=u,this.fieldTransforms=f}toMutation(o,u){return null!==this.fieldMask?new re(o,this.data,this.fieldMask,u,this.fieldTransforms):new F(o,this.data,u,this.fieldTransforms)}}class bg{constructor(o,u,f){this.data=o,this.fieldMask=u,this.fieldTransforms=f}toMutation(o,u){return new re(o,this.data,this.fieldMask,u,this.fieldTransforms)}}function Tg(p){switch(p){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class eh{constructor(o,u,f,_,C,x){this.settings=o,this.databaseId=u,this.serializer=f,this.ignoreUndefinedProperties=_,void 0===C&&this.mu(),this.fieldTransforms=C||[],this.fieldMask=x||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(o){return new eh(Object.assign(Object.assign({},this.settings),o),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(o){var u;const f=null===(u=this.path)||void 0===u?void 0:u.child(o),_=this.gu({path:f,yu:!1});return _.wu(o),_}Su(o){var u;const f=null===(u=this.path)||void 0===u?void 0:u.child(o),_=this.gu({path:f,yu:!1});return _.mu(),_}bu(o){return this.gu({path:void 0,yu:!0})}Du(o){return cu(o,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(o){return void 0!==this.fieldMask.find(u=>o.isPrefixOf(u))||void 0!==this.fieldTransforms.find(u=>o.isPrefixOf(u.field))}mu(){if(this.path)for(let o=0;o<this.path.length;o++)this.wu(this.path.get(o))}wu(o){if(0===o.length)throw this.Du("Document fields must not be empty");if(Tg(this.fu)&&L0.test(o))throw this.Du('Document fields cannot begin and end with "__"')}}class cp{constructor(o,u,f){this.databaseId=o,this.ignoreUndefinedProperties=u,this.serializer=f||vr(o)}Fu(o,u,f,_=!1){return new eh({fu:o,methodName:u,vu:f,path:dn.emptyPath(),yu:!1,Cu:_},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mu(p){const o=p._freezeSettings(),u=vr(p._databaseId);return new cp(p._databaseId,!!o.ignoreUndefinedProperties,u)}function th(p,o,u,f,_,C={}){const x=p.Fu(C.merge||C.mergeFields?2:0,o,u,_);xg("Data must be an object, but it was:",x,f);const V=n_(f,x);let G,X;if(C.merge)G=new Ri(x.fieldMask),X=x.fieldTransforms;else if(C.mergeFields){const ce=[];for(const Ie of C.mergeFields){const Fe=Ml(o,Ie,u);if(!x.contains(Fe))throw new ye(pe.INVALID_ARGUMENT,`Field '${Fe}' is specified in your field mask but missing from your input data.`);ni(ce,Fe)||ce.push(Fe)}G=new Ri(ce),X=x.fieldTransforms.filter(Ie=>G.covers(Ie.field))}else G=null,X=x.fieldTransforms;return new V0(new ho(V),G,X)}class tl extends gd{_toFieldTransform(o){if(2!==o.fu)throw o.Du(1===o.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return o.fieldMask.push(o.path),null}isEqual(o){return o instanceof tl}}function md(p,o){if(B0(p=(0,me.Ku)(p)))return xg("Unsupported field value:",o,p),n_(p,o);if(p instanceof gd)return function(f,_){if(!Tg(_.fu))throw _.Du(`${f._methodName}() can only be used with update() and set()`);if(!_.path)throw _.Du(`${f._methodName}() is not currently supported inside arrays`);const C=f._toFieldTransform(_);C&&_.fieldTransforms.push(C)}(p,o),null;if(void 0===p&&o.ignoreUndefinedProperties)return null;if(o.path&&o.fieldMask.push(o.path),p instanceof Array){if(o.settings.yu&&4!==o.fu)throw o.Du("Nested arrays are not supported");return function(f,_){const C=[];let x=0;for(const V of f){let G=md(V,_.bu(x));null==G&&(G={nullValue:"NULL_VALUE"}),C.push(G),x++}return{arrayValue:{values:C}}}(p,o)}return function(f,_){if(null===(f=(0,me.Ku)(f)))return{nullValue:"NULL_VALUE"};if("number"==typeof f)return ul(_.serializer,f);if("boolean"==typeof f)return{booleanValue:f};if("string"==typeof f)return{stringValue:f};if(f instanceof Date){const C=Yn.fromDate(f);return{timestampValue:Yi(_.serializer,C)}}if(f instanceof Yn){const C=new Yn(f.seconds,1e3*Math.floor(f.nanoseconds/1e3));return{timestampValue:Yi(_.serializer,C)}}if(f instanceof Ag)return{geoPointValue:{latitude:f.latitude,longitude:f.longitude}};if(f instanceof el)return{bytesValue:Hu(_.serializer,f._byteString)};if(f instanceof Ti){const C=_.databaseId,x=f.firestore._databaseId;if(!x.isEqual(C))throw _.Du(`Document reference is for database ${x.projectId}/${x.database} but should be for database ${C.projectId}/${C.database}`);return{referenceValue:Gu(f.firestore._databaseId||_.databaseId,f._key.path)}}throw _.Du(`Unsupported field value: ${Cg(f)}`)}(p,o)}function n_(p,o){const u={};return ro(p)?o.path&&o.path.length>0&&o.fieldMask.push(o.path):bo(p,(f,_)=>{const C=md(_,o.pu(f));null!=C&&(u[f]=C)}),{mapValue:{fields:u}}}function B0(p){return!("object"!=typeof p||null===p||p instanceof Array||p instanceof Date||p instanceof Yn||p instanceof Ag||p instanceof el||p instanceof Ti||p instanceof gd)}function xg(p,o,u){if(!B0(u)||"object"!=typeof(_=u)||null===_||Object.getPrototypeOf(_)!==Object.prototype&&null!==Object.getPrototypeOf(_)){const f=Cg(u);throw o.Du("an object"===f?p+" a custom object":p+" "+f)}var _}function Ml(p,o,u){if((o=(0,me.Ku)(o))instanceof pd)return o._internalPath;if("string"==typeof o)return up(p,o);throw cu("Field path arguments must be of type string or ",p,!1,void 0,u)}const Sg=new RegExp("[~\\*/\\[\\]]");function up(p,o,u){if(o.search(Sg)>=0)throw cu(`Invalid field path (${o}). Paths must not contain '~', '*', '/', '[', or ']'`,p,!1,void 0,u);try{return new pd(...o.split("."))._internalPath}catch{throw cu(`Invalid field path (${o}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,p,!1,void 0,u)}}function cu(p,o,u,f,_){const C=f&&!f.isEmpty(),x=void 0!==_;let V=`Function ${o}() called with invalid data`;u&&(V+=" (via `toFirestore()`)"),V+=". ";let G="";return(C||x)&&(G+=" (found",C&&(G+=` in field ${f}`),x&&(G+=` in document ${_}`),G+=")"),new ye(pe.INVALID_ARGUMENT,V+p+G)}function ni(p,o){return p.some(u=>u.isEqual(o))}class rf{constructor(o,u,f,_,C){this._firestore=o,this._userDataWriter=u,this._key=f,this._document=_,this._converter=C}get id(){return this._key.path.lastSegment()}get ref(){return new Ti(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const o=new r_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(o)}return this._userDataWriter.convertValue(this._document.data.value)}}get(o){if(this._document){const u=this._document.data.field(sf("DocumentSnapshot.get",o));if(null!==u)return this._userDataWriter.convertValue(u)}}}class r_ extends rf{data(){return super.data()}}function sf(p,o){return"string"==typeof o?up(p,o):o instanceof pd?o._internalPath:o._delegate._internalPath}function U0(p){if("L"===p.limitType&&0===p.explicitOrderBy.length)throw new ye(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i_{}class nh extends i_{}function j0(p,o,...u){let f=[];o instanceof i_&&f.push(o),f=f.concat(u),function(C){const x=C.filter(G=>G instanceof Sr).length,V=C.filter(G=>G instanceof rh).length;if(x>1||x>0&&V>0)throw new ye(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(f);for(const _ of f)p=_._apply(p);return p}class rh extends nh{constructor(o,u,f){super(),this._field=o,this._op=u,this._value=f,this.type="where"}static _create(o,u,f){return new rh(o,u,f)}_apply(o){const u=this._parse(o);return ah(o._query,u),new os(o.firestore,o.converter,Y(o._query,u))}_parse(o){const u=Mu(o.firestore);return function(C,x,V,G,X,ce,Ie){let Fe;if(X.isKeyField()){if("array-contains"===ce||"array-contains-any"===ce)throw new ye(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ce}' queries on documentId().`);if("in"===ce||"not-in"===ce){fp(Ie,ce);const ht=[];for(const Ut of Ie)ht.push(Mc(G,C,Ut));Fe={arrayValue:{values:ht}}}else Fe=Mc(G,C,Ie)}else"in"!==ce&&"not-in"!==ce&&"array-contains-any"!==ce||fp(Ie,ce),Fe=function Vs(p,o,u,f=!1){return md(u,p.Fu(f?4:3,o))}(V,"where",Ie,"in"===ce||"not-in"===ce);return Zn.create(X,ce,Fe)}(o._query,0,u,o.firestore._databaseId,this._field,this._op,this._value)}}function u1(p,o,u){const f=o,_=sf("where",p);return rh._create(_,f,u)}class Sr extends i_{constructor(o,u){super(),this.type=o,this._queryConstraints=u}static _create(o,u){return new Sr(o,u)}_parse(o){const u=this._queryConstraints.map(f=>f._parse(o)).filter(f=>f.getFilters().length>0);return 1===u.length?u[0]:hr.create(u,this._getOperator())}_apply(o){const u=this._parse(o);return 0===u.getFilters().length?o:(function(_,C){let x=_;const V=C.getFlattenedFilters();for(const G of V)ah(x,G),x=Y(x,G)}(o._query,u),new os(o.firestore,o.converter,Y(o._query,u)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Mc(p,o,u){if("string"==typeof(u=(0,me.Ku)(u))){if(""===u)throw new ye(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rs(o)&&-1!==u.indexOf("/"))throw new ye(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${u}' contains a '/' character.`);const f=o.path.child(Ft.fromString(u));if(!Wt.isDocumentKey(f))throw new ye(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${f}' is not because it has an odd number of segments (${f.length}).`);return Hi(p,new Wt(f))}if(u instanceof Ti)return Hi(p,u._key);throw new ye(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cg(u)}.`)}function fp(p,o){if(!Array.isArray(p)||0===p.length)throw new ye(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${o.toString()}' filters.`)}function ah(p,o){const u=function(_,C){for(const x of _)for(const V of x.getFlattenedFilters())if(C.indexOf(V.op)>=0)return V.op;return null}(p.filters,function(_){switch(_){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(o.op));if(null!==u)throw new ye(pe.INVALID_ARGUMENT,u===o.op?`Invalid query. You cannot use more than one '${o.op.toString()}' filter.`:`Invalid query. You cannot use '${o.op.toString()}' filters with '${u.toString()}' filters.`)}class Mg{convertValue(o,u="none"){switch(Ss(o)){case 0:return null;case 1:return o.booleanValue;case 2:return Mi(o.integerValue||o.doubleValue);case 3:return this.convertTimestamp(o.timestampValue);case 4:return this.convertServerTimestamp(o,u);case 5:return o.stringValue;case 6:return this.convertBytes(xs(o.bytesValue));case 7:return this.convertReference(o.referenceValue);case 8:return this.convertGeoPoint(o.geoPointValue);case 9:return this.convertArray(o.arrayValue,u);case 10:return this.convertObject(o.mapValue,u);default:throw De()}}convertObject(o,u){return this.convertObjectMap(o.fields,u)}convertObjectMap(o,u="none"){const f={};return bo(o,(_,C)=>{f[_]=this.convertValue(C,u)}),f}convertGeoPoint(o){return new Ag(Mi(o.latitude),Mi(o.longitude))}convertArray(o,u){return(o.values||[]).map(f=>this.convertValue(f,u))}convertServerTimestamp(o,u){switch(u){case"previous":const f=la(o);return null==f?null:this.convertValue(f,u);case"estimate":return this.convertTimestamp(To(o));default:return null}}convertTimestamp(o){const u=Jo(o);return new Yn(u.seconds,u.nanos)}convertDocumentKey(o,u){const f=Ft.fromString(o);Ve(Gl(f));const _=new da(f.get(1),f.get(3)),C=new Wt(f.popFirst(5));return _.isEqual(u)||gt(`Document ${C} contains a document reference within a different database (${_.projectId}/${_.database}) which is not supported. It will be treated as a reference in the current database (${u.projectId}/${u.database}) instead.`),C}}function hp(p,o,u){let f;return f=p?u&&(u.merge||u.mergeFields)?p.toFirestore(o,u):p.toFirestore(o):o,f}class Ou{constructor(o,u){this.hasPendingWrites=o,this.fromCache=u}isEqual(o){return this.hasPendingWrites===o.hasPendingWrites&&this.fromCache===o.fromCache}}class Ol extends rf{constructor(o,u,f,_,C,x){super(o,u,f,_,x),this._firestore=o,this._firestoreImpl=o,this.metadata=C}exists(){return super.exists()}data(o={}){if(this._document){if(this._converter){const u=new gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(u,o)}return this._userDataWriter.convertValue(this._document.data.value,o.serverTimestamps)}}get(o,u={}){if(this._document){const f=this._document.data.field(sf("DocumentSnapshot.get",o));if(null!==f)return this._userDataWriter.convertValue(f,u.serverTimestamps)}}}class gp extends Ol{data(o={}){return super.data(o)}}class ch{constructor(o,u,f,_){this._firestore=o,this._userDataWriter=u,this._snapshot=_,this.metadata=new Ou(_.hasPendingWrites,_.fromCache),this.query=f}get docs(){const o=[];return this.forEach(u=>o.push(u)),o}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(o,u){this._snapshot.docs.forEach(f=>{o.call(u,new gp(this._firestore,this._userDataWriter,f.key,f,new Ou(this._snapshot.mutatedKeys.has(f.key),this._snapshot.fromCache),this.query.converter))})}docChanges(o={}){const u=!!o.includeMetadataChanges;if(u&&this._snapshot.excludesMetadataChanges)throw new ye(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===u||(this._cachedChanges=function(_,C){if(_._snapshot.oldDocs.isEmpty()){let x=0;return _._snapshot.docChanges.map(V=>({type:"added",doc:new gp(_._firestore,_._userDataWriter,V.doc.key,V.doc,new Ou(_._snapshot.mutatedKeys.has(V.doc.key),_._snapshot.fromCache),_.query.converter),oldIndex:-1,newIndex:x++}))}{let x=_._snapshot.oldDocs;return _._snapshot.docChanges.filter(V=>C||3!==V.type).map(V=>{const G=new gp(_._firestore,_._userDataWriter,V.doc.key,V.doc,new Ou(_._snapshot.mutatedKeys.has(V.doc.key),_._snapshot.fromCache),_.query.converter);let X=-1,ce=-1;return 0!==V.type&&(X=x.indexOf(V.doc.key),x=x.delete(V.doc.key)),1!==V.type&&(x=x.add(V.doc),ce=x.indexOf(V.doc.key)),{type:d1(V.type),doc:G,oldIndex:X,newIndex:ce}})}}(this,u),this._cachedChangesIncludeMetadataChanges=u),this._cachedChanges}}function d1(p){switch(p){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}function q0(p){p=kr(p,Ti);const o=kr(p.firestore,$i);return function qm(p,o,u={}){const f=new _t;return p.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return function(C,x,V,G,X){const ce=new Po({next:Fe=>{x.enqueueAndForget(()=>Gi(C,Ie));const ht=Fe.docs.has(V);!ht&&Fe.fromCache?X.reject(new ye(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):ht&&Fe.fromCache&&G&&"server"===G.source?X.reject(new ye(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(Fe)},error:Fe=>X.reject(Fe)}),Ie=new Hh(Go(V.path),ce,{includeMetadataChanges:!0,ra:!0});return Bh(C,Ie)}(yield Yd(p),p.asyncQueue,o,u,f)})),f.promise}(No(o),p._key).then(u=>fh(o,p,u))}class Bs extends Mg{constructor(o){super(),this.firestore=o}convertBytes(o){return new el(o)}convertReference(o){const u=this.convertDocumentKey(o,this.firestore._databaseId);return new Ti(this.firestore,null,u)}}function a_(p){p=kr(p,os);const o=kr(p.firestore,$i),u=No(o),f=new Bs(o);return U0(p._query),function i1(p,o,u={}){const f=new _t;return p.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return function(C,x,V,G,X){const ce=new Po({next:Fe=>{x.enqueueAndForget(()=>Gi(C,Ie)),Fe.fromCache&&"server"===G.source?X.reject(new ye(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(Fe)},error:Fe=>X.reject(Fe)}),Ie=new Hh(V,ce,{includeMetadataChanges:!0,ra:!0});return Bh(C,Ie)}(yield Yd(p),p.asyncQueue,o,u,f)})),f.promise}(u,p._query).then(_=>new ch(o,f,p,_))}function mp(p,o,u){p=kr(p,Ti);const f=kr(p.firestore,$i),_=hp(p.converter,o,u);return af(f,[th(Mu(f),"setDoc",p._key,_,null!==p.converter,u).toMutation(p._key,Gn.none())])}function lh(p,o,u,...f){p=kr(p,Ti);const _=kr(p.firestore,$i),C=Mu(_);let x;return x="string"==typeof(o=(0,me.Ku)(o))||o instanceof pd?function Cs(p,o,u,f,_,C){const x=p.Fu(1,o,u),V=[Ml(o,f,u)],G=[_];if(C.length%2!=0)throw new ye(pe.INVALID_ARGUMENT,`Function ${o}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Fe=0;Fe<C.length;Fe+=2)V.push(Ml(o,C[Fe])),G.push(C[Fe+1]);const X=[],ce=ho.empty();for(let Fe=V.length-1;Fe>=0;--Fe)if(!ni(X,V[Fe])){const ht=V[Fe];let Ut=G[Fe];Ut=(0,me.Ku)(Ut);const en=x.Su(ht);if(Ut instanceof tl)X.push(ht);else{const Gt=md(Ut,en);null!=Gt&&(X.push(ht),ce.set(ht,Gt))}}const Ie=new Ri(X);return new bg(ce,Ie,x.fieldTransforms)}(C,"updateDoc",p._key,o,u,f):function ko(p,o,u,f){const _=p.Fu(1,o,u);xg("Data must be an object, but it was:",_,f);const C=[],x=ho.empty();bo(f,(G,X)=>{const ce=up(o,G,u);X=(0,me.Ku)(X);const Ie=_.Su(ce);if(X instanceof tl)C.push(ce);else{const Fe=md(X,Ie);null!=Fe&&(C.push(ce),x.set(ce,Fe))}});const V=new Ri(C);return new bg(x,V,_.fieldTransforms)}(C,"updateDoc",p._key,o),af(_,[x.toMutation(p._key,Gn.exists(!0))])}function u_(p){return af(kr(p.firestore,$i),[new ut(p._key,Gn.none())])}function dh(p,o){const u=kr(p.firestore,$i),f=Yf(p),_=hp(p.converter,o);return af(u,[th(Mu(p.firestore),"addDoc",f._key,_,null!==p.converter,{}).toMutation(f._key,Gn.exists(!1))]).then(()=>f)}function af(p,o){return function(f,_){const C=new _t;return f.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return function ti(p,o,u){return id.apply(this,arguments)}(yield function rp(p){return np(p).then(o=>o.syncEngine)}(f),_,C)})),C.promise}(No(p),o)}function fh(p,o,u){const f=u.docs.get(o._key),_=new Bs(p);return new Ol(p,_,o._key,f,new Ou(u.hasPendingWrites,u.fromCache),o.converter)}!function(o,u=!0){Vn=Ke.MF,(0,Ke.om)(new Et.uA("firestore",(f,{instanceIdentifier:_,options:C})=>{const x=f.getProvider("app").getImmediate(),V=new $i(new Qn(f.getProvider("auth-internal")),new qr(f.getProvider("app-check-internal")),function(X,ce){if(!Object.prototype.hasOwnProperty.apply(X.options,["projectId"]))throw new ye(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new da(X.options.projectId,ce)}(x,_),x);return C=Object.assign({useFetchStreams:u},C),V._setSettings(C),V},"PUBLIC").setMultipleInstances(!0)),(0,Ke.KO)(Qt,"4.6.3",o),(0,Ke.KO)(Qt,"4.6.3","esm2017")}();var m1=ie(1985),__=ie(6354),_d=function(){return _d=Object.assign||function(o){for(var u,f=1,_=arguments.length;f<_;f++)for(var C in u=arguments[f])Object.prototype.hasOwnProperty.call(u,C)&&(o[C]=u[C]);return o},_d.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var _1={includeMetadataChanges:!1};function df(p,o){return void 0===o&&(o={}),function J0(p){return function v_(p,o){return void 0===o&&(o=_1),new m1.c(function(u){var f=function l_(p,...o){var u,f,_;p=(0,me.Ku)(p);let C={includeMetadataChanges:!1,source:"default"},x=0;"object"!=typeof o[x]||Zf(o[x])||(C=o[x],x++);const V={includeMetadataChanges:C.includeMetadataChanges,source:C.source};if(Zf(o[x])){const Ie=o[x];o[x]=null===(u=Ie.next)||void 0===u?void 0:u.bind(Ie),o[x+1]=null===(f=Ie.error)||void 0===f?void 0:f.bind(Ie),o[x+2]=null===(_=Ie.complete)||void 0===_?void 0:_.bind(Ie)}let G,X,ce;if(p instanceof Ti)X=kr(p.firestore,$i),ce=Go(p._key.path),G={next:Ie=>{o[x]&&o[x](fh(X,p,Ie))},error:o[x+1],complete:o[x+2]};else{const Ie=kr(p,os);X=kr(Ie.firestore,$i),ce=Ie._query;const Fe=new Bs(X);G={next:ht=>{o[x]&&o[x](new ch(X,Fe,Ie,ht))},error:o[x+1],complete:o[x+2]},U0(p._query)}return function(Fe,ht,Ut,en){const Gt=new Po(en),Rn=new Hh(ht,Gt,Ut);return Fe.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return Bh(yield Yd(Fe),Rn)})),()=>{Gt.$a(),Fe.asyncQueue.enqueueAndForget((0,Ce.A)(function*(){return Gi(yield Yd(Fe),Rn)}))}}(No(X),ce,V,G)}(p,o,{next:u.next.bind(u),error:u.error.bind(u),complete:u.complete.bind(u)});return{unsubscribe:f}})}(p,{includeMetadataChanges:!0}).pipe((0,__.T)(function(o){return o.docs}))}(p).pipe((0,__.T)(function(u){return u.map(function(f){return function E_(p,o){var u;void 0===o&&(o={});var f=p.data(o);return p.exists()&&"object"==typeof f&&null!==f&&o.idField?_d(_d({},f),((u={})[o.idField]=p.id,u)):f}(f,o)})}))}class ff{constructor(o){return o}}const Ug="firestore",jg=new T.nKC("angularfire2.firestore-instances");function b_(p){return(o,u)=>{const f=o.runOutsideAngular(()=>p(u));return new ff(f)}}const rv={provide:class tv{constructor(){return(0,D.CA)(Ug)}},deps:[[new T.Xx1,jg]]},w1={provide:ff,useFactory:function nv(p,o){const u=(0,D.lR)(Ug,p,o);return u&&new ff(u)},deps:[[new T.Xx1,jg],L.XU]};function iv(p,...o){return(0,Ze.KO)("angularfire",D.xv.full,"fst"),(0,T.EmA)([w1,rv,{provide:jg,useFactory:b_(p),multi:!0,deps:[T.SKi,T.zZn,D.u0,L.gL,[new T.Xx1,Be.DF],[new T.Xx1,D.Jv],...o]}])}const sv=(0,D.S3)(df,!0),R1=(0,D.S3)(dh,!0),Ap=(0,D.S3)(ip,!0),s=(0,D.S3)(u_,!0),m=(0,D.S3)(Yf,!0),Le=(0,D.S3)(q0,!0),at=(0,D.S3)(a_,!0),Jt=(0,D.S3)(Ym,!0),N1=(0,D.S3)(j0,!0),AE=(0,D.S3)(mp,!0),F1=(0,D.S3)(lh,!0),Gg=(0,D.S3)(u1,!0)},3586:(yn,wt,ie)=>{ie.d(wt,{xv:()=>Tt,u0:()=>Bt,Jv:()=>Xt,CA:()=>Ht,lR:()=>kt,S3:()=>Ne});var D=ie(3953),T=ie(2214),L=ie(8359);class Be extends L.yU{constructor(ye,_t){super()}schedule(ye,_t=0){return this}}const Ze={setInterval(pe,ye,..._t){const{delegate:zt}=Ze;return zt?.setInterval?zt.setInterval(pe,ye,..._t):setInterval(pe,ye,..._t)},clearInterval(pe){const{delegate:ye}=Ze;return(ye?.clearInterval||clearInterval)(pe)},delegate:void 0};var Ce=ie(7908);class Ke extends Be{constructor(ye,_t){super(ye,_t),this.scheduler=ye,this.work=_t,this.pending=!1}schedule(ye,_t=0){var zt;if(this.closed)return this;this.state=ye;const $n=this.id,nn=this.scheduler;return null!=$n&&(this.id=this.recycleAsyncId(nn,$n,_t)),this.pending=!0,this.delay=_t,this.id=null!==(zt=this.id)&&void 0!==zt?zt:this.requestAsyncId(nn,this.id,_t),this}requestAsyncId(ye,_t,zt=0){return Ze.setInterval(ye.flush.bind(ye,this),zt)}recycleAsyncId(ye,_t,zt=0){if(null!=zt&&this.delay===zt&&!1===this.pending)return _t;null!=_t&&Ze.clearInterval(_t)}execute(ye,_t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const zt=this._execute(ye,_t);if(zt)return zt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,_t){let $n,zt=!1;try{this.work(ye)}catch(nn){zt=!0,$n=nn||new Error("Scheduled action threw falsy error")}if(zt)return this.unsubscribe(),$n}unsubscribe(){if(!this.closed){const{id:ye,scheduler:_t}=this,{actions:zt}=_t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ce.o)(zt,this),null!=ye&&(this.id=this.recycleAsyncId(_t,ye,null)),this.delay=null,super.unsubscribe()}}}const rt={now:()=>(rt.delegate||Date).now(),delegate:void 0};class me{constructor(ye,_t=me.now){this.schedulerActionCtor=ye,this.now=_t}schedule(ye,_t=0,zt){return new this.schedulerActionCtor(this,ye).schedule(zt,_t)}}me.now=rt.now;class Ae extends me{constructor(ye,_t=me.now){super(ye,_t),this.actions=[],this._active=!1}flush(ye){const{actions:_t}=this;if(this._active)return void _t.push(ye);let zt;this._active=!0;do{if(zt=ye.execute(ye.state,ye.delay))break}while(ye=_t.shift());if(this._active=!1,zt){for(;ye=_t.shift();)ye.unsubscribe();throw zt}}}const pt=new class Pe extends Ae{}(class Et extends Ke{constructor(ye,_t){super(ye,_t),this.scheduler=ye,this.work=_t}schedule(ye,_t=0){return _t>0?super.schedule(ye,_t):(this.delay=_t,this.state=ye,this.scheduler.flush(this),this)}execute(ye,_t){return _t>0||this.closed?super.execute(ye,_t):this._execute(ye,_t)}requestAsyncId(ye,_t,zt=0){return null!=zt&&zt>0||null==zt&&this.delay>0?super.requestAsyncId(ye,_t,zt):(ye.flush(this),0)}}),It=new Ae(Ke);var tn=ie(1985),Nt=ie(8141),On=ie(6745),Tn=ie(941);const Tt=new D.RxE("ANGULARFIRE2_VERSION");function kt(pe,ye,_t){if(ye){if(1===ye.length)return ye[0];const nn=ye.filter(Qn=>Qn.app===_t);if(1===nn.length)return nn[0]}return _t.container.getProvider(pe).getImmediate({optional:!0})}const Ht=(pe,ye)=>{const _t=ye?[ye]:(0,T.Dk)(),zt=[];return _t.forEach($n=>{$n.container.getProvider(pe).instances.forEach(Qn=>{zt.includes(Qn)||zt.push(Qn)})}),zt};class Xt{constructor(){return Ht(Qt)}}const Qt="app-check";function Xe(){}class Vn{zone;delegate;constructor(ye,_t=pt){this.zone=ye,this.delegate=_t}now(){return this.delegate.now()}schedule(ye,_t,zt){const $n=this.zone;return this.delegate.schedule(function(Qn){$n.runGuarded(()=>{ye.apply(this,[Qn])})},_t,zt)}}class xn{zone;task=null;constructor(ye){this.zone=ye}call(ye,_t){const zt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xe,{},Xe,Xe)),_t.pipe((0,Nt.M)({next:zt,complete:zt,error:zt})).subscribe(ye).add(zt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Bt=(()=>{class pe{ngZone;outsideAngular;insideAngular;constructor(_t){this.ngZone=_t,this.outsideAngular=_t.runOutsideAngular(()=>new Vn(Zone.current)),this.insideAngular=_t.run(()=>new Vn(Zone.current,It)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(zt){return new(zt||pe)(D.KVO(D.SKi))};static \u0275prov=D.jDH({token:pe,factory:pe.\u0275fac,providedIn:"root"})}return pe})();function Mn(){const pe=globalThis.\u0275AngularFireScheduler;if(!pe)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return pe}function gt(pe){return Mn().ngZone.run(()=>pe())}function De(pe){return function Ve(pe){return function(_t){return(_t=_t.lift(new xn(pe.ngZone))).pipe((0,On._)(pe.outsideAngular),(0,Tn.Q)(pe.insideAngular))}}(Mn())(pe)}const bt=(pe,ye)=>function(){const zt=arguments;return ye&&setTimeout(()=>{"scheduled"===ye.state&&ye.invoke()},10),gt(()=>pe.apply(void 0,zt))},Ne=(pe,ye)=>function(){let _t;const zt=arguments;for(let nn=0;nn<arguments.length;nn++)"function"==typeof zt[nn]&&(ye&&(_t||=gt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xe,{},Xe,Xe))),zt[nn]=bt(zt[nn],_t));const $n=function le(pe){return Mn().ngZone.runOutsideAngular(()=>pe())}(()=>pe.apply(this,zt));if(!ye){if($n instanceof tn.c){const nn=Mn();return $n.pipe((0,On._)(nn.outsideAngular),(0,Tn.Q)(nn.insideAngular))}return gt(()=>$n)}return $n instanceof tn.c?$n.pipe(De):$n instanceof Promise?gt(()=>new Promise((nn,Qn)=>$n.then(jr=>gt(()=>nn(jr)),jr=>gt(()=>Qn(jr))))):"function"==typeof $n&&_t?function(){return setTimeout(()=>{_t&&"scheduled"===_t.state&&_t.invoke()},10),$n.apply(this,arguments)}:gt(()=>$n)}},4341:(yn,wt,ie)=>{ie.d(wt,{me:()=>Ct,ok:()=>Yr,MJ:()=>js,l_:()=>ls,JD:()=>Uo,j4:()=>fo,YN:()=>Bu,BC:()=>Jn,cb:()=>dn,xH:()=>Vu,X1:()=>cl,wz:()=>Eo,k0:()=>Vn,qT:()=>Hs,y7:()=>hr});var D=ie(3953),T=ie(177),L=ie(8455),Be=ie(1985),Ze=ie(3073),Ce=ie(8750),Ke=ie(3794),Et=ie(4360),rt=ie(6450),me=ie(8496),Pe=ie(1413),pt=ie(6354);let Ue=(()=>{class Y{constructor(H,se){this._renderer=H,this._elementRef=se,this.onChange=xe=>{},this.onTouched=()=>{}}setProperty(H,se){this._renderer.setProperty(this._elementRef.nativeElement,H,se)}registerOnTouched(H){this.onTouched=H}registerOnChange(H){this.onChange=H}setDisabledState(H){this.setProperty("disabled",H)}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(D.sFG),D.rXU(D.aKT))};static#t=this.\u0275dir=D.FsC({type:Y})}return Y})(),It=(()=>{class Y extends Ue{static#e=this.\u0275fac=(()=>{let H;return function(xe){return(H||(H=D.xGo(Y)))(xe||Y)}})();static#t=this.\u0275dir=D.FsC({type:Y,features:[D.Vt3]})}return Y})();const Mt=new D.nKC(""),On={provide:Mt,useExisting:(0,D.Rfq)(()=>Ct),multi:!0},Tt=new D.nKC("");let Ct=(()=>{class Y extends Ue{constructor(H,se,xe){super(H,se),this._compositionMode=xe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Tn(){const Y=(0,T.QT)()?(0,T.QT)().getUserAgent():"";return/android (\d+)/.test(Y.toLowerCase())}())}writeValue(H){this.setProperty("value",H??"")}_handleInput(H){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(H)}_compositionStart(){this._composing=!0}_compositionEnd(H){this._composing=!1,this._compositionMode&&this.onChange(H)}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(D.sFG),D.rXU(D.aKT),D.rXU(Tt,8))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(se,xe){1&se&&D.bIt("input",function(qn){return xe._handleInput(qn.target.value)})("blur",function(){return xe.onTouched()})("compositionstart",function(){return xe._compositionStart()})("compositionend",function(qn){return xe._compositionEnd(qn.target.value)})},features:[D.Jv_([On]),D.Vt3]})}return Y})();function kt(Y){return null==Y||("string"==typeof Y||Array.isArray(Y))&&0===Y.length}function Ht(Y){return null!=Y&&"number"==typeof Y.length}const Xt=new D.nKC(""),Qt=new D.nKC(""),Xe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Vn{static min(Z){return function xn(Y){return Z=>{if(kt(Z.value)||kt(Y))return null;const H=parseFloat(Z.value);return!isNaN(H)&&H<Y?{min:{min:Y,actual:Z.value}}:null}}(Z)}static max(Z){return function Bt(Y){return Z=>{if(kt(Z.value)||kt(Y))return null;const H=parseFloat(Z.value);return!isNaN(H)&&H>Y?{max:{max:Y,actual:Z.value}}:null}}(Z)}static required(Z){return function Mn(Y){return kt(Y.value)?{required:!0}:null}(Z)}static requiredTrue(Z){return function le(Y){return!0===Y.value?null:{required:!0}}(Z)}static email(Z){return function gt(Y){return kt(Y.value)||Xe.test(Y.value)?null:{email:!0}}(Z)}static minLength(Z){return function St(Y){return Z=>kt(Z.value)||!Ht(Z.value)?null:Z.value.length<Y?{minlength:{requiredLength:Y,actualLength:Z.value.length}}:null}(Z)}static maxLength(Z){return function Un(Y){return Z=>Ht(Z.value)&&Z.value.length>Y?{maxlength:{requiredLength:Y,actualLength:Z.value.length}}:null}(Z)}static pattern(Z){return function De(Y){if(!Y)return Ve;let Z,H;return"string"==typeof Y?(H="","^"!==Y.charAt(0)&&(H+="^"),H+=Y,"$"!==Y.charAt(Y.length-1)&&(H+="$"),Z=new RegExp(H)):(H=Y.toString(),Z=Y),se=>{if(kt(se.value))return null;const xe=se.value;return Z.test(xe)?null:{pattern:{requiredPattern:H,actualValue:xe}}}}(Z)}static nullValidator(Z){return null}static compose(Z){return $n(Z)}static composeAsync(Z){return Qn(Z)}}function Ve(Y){return null}function bt(Y){return null!=Y}function Ne(Y){return(0,D.jNT)(Y)?(0,L.H)(Y):Y}function pe(Y){let Z={};return Y.forEach(H=>{Z=null!=H?{...Z,...H}:Z}),0===Object.keys(Z).length?null:Z}function ye(Y,Z){return Z.map(H=>H(Y))}function zt(Y){return Y.map(Z=>function _t(Y){return!Y.validate}(Z)?Z:H=>Z.validate(H))}function $n(Y){if(!Y)return null;const Z=Y.filter(bt);return 0==Z.length?null:function(H){return pe(ye(H,Z))}}function nn(Y){return null!=Y?$n(zt(Y)):null}function Qn(Y){if(!Y)return null;const Z=Y.filter(bt);return 0==Z.length?null:function(H){return function Ae(...Y){const Z=(0,Ke.ms)(Y),{args:H,keys:se}=(0,Ze.D)(Y),xe=new Be.c(Ot=>{const{length:qn}=H;if(!qn)return void Ot.complete();const $o=new Array(qn);let va=qn,Do=qn;for(let zs=0;zs<qn;zs++){let Sn=!1;(0,Ce.Tg)(H[zs]).subscribe((0,Et._)(Ot,gu=>{Sn||(Sn=!0,Do--),$o[zs]=gu},()=>va--,void 0,()=>{(!va||!Sn)&&(Do||Ot.next(se?(0,me.e)(se,$o):$o),Ot.complete())}))}});return Z?xe.pipe((0,rt.I)(Z)):xe}(ye(H,Z).map(Ne)).pipe((0,pt.T)(pe))}}function jr(Y){return null!=Y?Qn(zt(Y)):null}function to(Y,Z){return null===Y?[Z]:Array.isArray(Y)?[...Y,Z]:[Y,Z]}function lr(Y){return Y._rawValidators}function qr(Y){return Y._rawAsyncValidators}function An(Y){return Y?Array.isArray(Y)?Y:[Y]:[]}function pr(Y,Z){return Array.isArray(Y)?Y.includes(Z):Y===Z}function si(Y,Z){const H=An(Z);return An(Y).forEach(xe=>{pr(H,xe)||H.push(xe)}),H}function wn(Y,Z){return An(Z).filter(H=>!pr(Y,H))}class Br{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Z){this._rawValidators=Z||[],this._composedValidatorFn=nn(this._rawValidators)}_setAsyncValidators(Z){this._rawAsyncValidators=Z||[],this._composedAsyncValidatorFn=jr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Z){this._onDestroyCallbacks.push(Z)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Z=>Z()),this._onDestroyCallbacks=[]}reset(Z=void 0){this.control&&this.control.reset(Z)}hasError(Z,H){return!!this.control&&this.control.hasError(Z,H)}getError(Z,H){return this.control?this.control.getError(Z,H):null}}class ai extends Br{get formDirective(){return null}get path(){return null}}class Yn extends Br{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ln{constructor(Z){this._cd=Z}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Jn=(()=>{class Y extends ln{constructor(H){super(H)}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(Yn,2))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(se,xe){2&se&&D.AVh("ng-untouched",xe.isUntouched)("ng-touched",xe.isTouched)("ng-pristine",xe.isPristine)("ng-dirty",xe.isDirty)("ng-valid",xe.isValid)("ng-invalid",xe.isInvalid)("ng-pending",xe.isPending)},features:[D.Vt3]})}return Y})(),dn=(()=>{class Y extends ln{constructor(H){super(H)}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(ai,10))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(se,xe){2&se&&D.AVh("ng-untouched",xe.isUntouched)("ng-touched",xe.isTouched)("ng-pristine",xe.isPristine)("ng-dirty",xe.isDirty)("ng-valid",xe.isValid)("ng-invalid",xe.isInvalid)("ng-pending",xe.isPending)("ng-submitted",xe.isSubmitted)},features:[D.Vt3]})}return Y})();const Te="VALID",Qe="INVALID",de="PENDING",_e="DISABLED";class Re{}class lt extends Re{constructor(Z,H){super(),this.value=Z,this.source=H}}class qe extends Re{constructor(Z,H){super(),this.pristine=Z,this.source=H}}class Kt extends Re{constructor(Z,H){super(),this.touched=Z,this.source=H}}class bn extends Re{constructor(Z,H){super(),this.status=Z,this.source=H}}class zn extends Re{constructor(Z){super(),this.source=Z}}class Kr extends Re{constructor(Z){super(),this.source=Z}}function mr(Y){return(Hr(Y)?Y.validators:Y)||null}function er(Y,Z){return(Hr(Z)?Z.asyncValidators:Y)||null}function Hr(Y){return null!=Y&&!Array.isArray(Y)&&"object"==typeof Y}function ui(Y,Z,H){const se=Y.controls;if(!(Z?Object.keys(se):se).length)throw new D.wOt(1e3,"");if(!se[H])throw new D.wOt(1001,"")}function Us(Y,Z,H){Y._forEachChild((se,xe)=>{if(void 0===H[xe])throw new D.wOt(1002,"")})}class yo{constructor(Z,H){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new Pe.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(Z),this._assignAsyncValidators(H)}get validator(){return this._composedValidatorFn}set validator(Z){this._rawValidators=this._composedValidatorFn=Z}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Z){this._rawAsyncValidators=this._composedAsyncValidatorFn=Z}get parent(){return this._parent}get valid(){return this.status===Te}get invalid(){return this.status===Qe}get pending(){return this.status==de}get disabled(){return this.status===_e}get enabled(){return this.status!==_e}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Z){this._assignValidators(Z)}setAsyncValidators(Z){this._assignAsyncValidators(Z)}addValidators(Z){this.setValidators(si(Z,this._rawValidators))}addAsyncValidators(Z){this.setAsyncValidators(si(Z,this._rawAsyncValidators))}removeValidators(Z){this.setValidators(wn(Z,this._rawValidators))}removeAsyncValidators(Z){this.setAsyncValidators(wn(Z,this._rawAsyncValidators))}hasValidator(Z){return pr(this._rawValidators,Z)}hasAsyncValidator(Z){return pr(this._rawAsyncValidators,Z)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Z={}){const H=!1===this.touched;this.touched=!0;const se=Z.sourceControl??this;this._parent&&!Z.onlySelf&&this._parent.markAsTouched({...Z,sourceControl:se}),H&&!1!==Z.emitEvent&&this._events.next(new Kt(!0,se))}markAllAsTouched(Z={}){this.markAsTouched({onlySelf:!0,emitEvent:Z.emitEvent,sourceControl:this}),this._forEachChild(H=>H.markAllAsTouched(Z))}markAsUntouched(Z={}){const H=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const se=Z.sourceControl??this;this._forEachChild(xe=>{xe.markAsUntouched({onlySelf:!0,emitEvent:Z.emitEvent,sourceControl:se})}),this._parent&&!Z.onlySelf&&this._parent._updateTouched(Z,se),H&&!1!==Z.emitEvent&&this._events.next(new Kt(!1,se))}markAsDirty(Z={}){const H=!0===this.pristine;this.pristine=!1;const se=Z.sourceControl??this;this._parent&&!Z.onlySelf&&this._parent.markAsDirty({...Z,sourceControl:se}),H&&!1!==Z.emitEvent&&this._events.next(new qe(!1,se))}markAsPristine(Z={}){const H=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const se=Z.sourceControl??this;this._forEachChild(xe=>{xe.markAsPristine({onlySelf:!0,emitEvent:Z.emitEvent})}),this._parent&&!Z.onlySelf&&this._parent._updatePristine(Z,se),H&&!1!==Z.emitEvent&&this._events.next(new qe(!0,se))}markAsPending(Z={}){this.status=de;const H=Z.sourceControl??this;!1!==Z.emitEvent&&(this._events.next(new bn(this.status,H)),this.statusChanges.emit(this.status)),this._parent&&!Z.onlySelf&&this._parent.markAsPending({...Z,sourceControl:H})}disable(Z={}){const H=this._parentMarkedDirty(Z.onlySelf);this.status=_e,this.errors=null,this._forEachChild(xe=>{xe.disable({...Z,onlySelf:!0})}),this._updateValue();const se=Z.sourceControl??this;!1!==Z.emitEvent&&(this._events.next(new lt(this.value,se)),this._events.next(new bn(this.status,se)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Z,skipPristineCheck:H},this),this._onDisabledChange.forEach(xe=>xe(!0))}enable(Z={}){const H=this._parentMarkedDirty(Z.onlySelf);this.status=Te,this._forEachChild(se=>{se.enable({...Z,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Z.emitEvent}),this._updateAncestors({...Z,skipPristineCheck:H},this),this._onDisabledChange.forEach(se=>se(!1))}_updateAncestors(Z,H){this._parent&&!Z.onlySelf&&(this._parent.updateValueAndValidity(Z),Z.skipPristineCheck||this._parent._updatePristine({},H),this._parent._updateTouched({},H))}setParent(Z){this._parent=Z}getRawValue(){return this.value}updateValueAndValidity(Z={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const se=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Te||this.status===de)&&this._runAsyncValidator(se,Z.emitEvent)}const H=Z.sourceControl??this;!1!==Z.emitEvent&&(this._events.next(new lt(this.value,H)),this._events.next(new bn(this.status,H)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Z.onlySelf&&this._parent.updateValueAndValidity({...Z,sourceControl:H})}_updateTreeValidity(Z={emitEvent:!0}){this._forEachChild(H=>H._updateTreeValidity(Z)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Z.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_e:Te}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Z,H){if(this.asyncValidator){this.status=de,this._hasOwnPendingAsyncValidator={emitEvent:!1!==H};const se=Ne(this.asyncValidator(this));this._asyncValidationSubscription=se.subscribe(xe=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(xe,{emitEvent:H,shouldHaveEmitted:Z})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const Z=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,Z}return!1}setErrors(Z,H={}){this.errors=Z,this._updateControlsErrors(!1!==H.emitEvent,this,H.shouldHaveEmitted)}get(Z){let H=Z;return null==H||(Array.isArray(H)||(H=H.split(".")),0===H.length)?null:H.reduce((se,xe)=>se&&se._find(xe),this)}getError(Z,H){const se=H?this.get(H):this;return se&&se.errors?se.errors[Z]:null}hasError(Z,H){return!!this.getError(Z,H)}get root(){let Z=this;for(;Z._parent;)Z=Z._parent;return Z}_updateControlsErrors(Z,H,se){this.status=this._calculateStatus(),Z&&this.statusChanges.emit(this.status),(Z||se)&&this._events.next(new bn(this.status,H)),this._parent&&this._parent._updateControlsErrors(Z,H,se)}_initObservables(){this.valueChanges=new D.bkB,this.statusChanges=new D.bkB}_calculateStatus(){return this._allControlsDisabled()?_e:this.errors?Qe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(de)?de:this._anyControlsHaveStatus(Qe)?Qe:Te}_anyControlsHaveStatus(Z){return this._anyControls(H=>H.status===Z)}_anyControlsDirty(){return this._anyControls(Z=>Z.dirty)}_anyControlsTouched(){return this._anyControls(Z=>Z.touched)}_updatePristine(Z,H){const se=!this._anyControlsDirty(),xe=this.pristine!==se;this.pristine=se,this._parent&&!Z.onlySelf&&this._parent._updatePristine(Z,H),xe&&this._events.next(new qe(this.pristine,H))}_updateTouched(Z={},H){this.touched=this._anyControlsTouched(),this._events.next(new Kt(this.touched,H)),this._parent&&!Z.onlySelf&&this._parent._updateTouched(Z,H)}_registerOnCollectionChange(Z){this._onCollectionChange=Z}_setUpdateStrategy(Z){Hr(Z)&&null!=Z.updateOn&&(this._updateOn=Z.updateOn)}_parentMarkedDirty(Z){return!Z&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Z){return null}_assignValidators(Z){this._rawValidators=Array.isArray(Z)?Z.slice():Z,this._composedValidatorFn=function vi(Y){return Array.isArray(Y)?nn(Y):Y||null}(this._rawValidators)}_assignAsyncValidators(Z){this._rawAsyncValidators=Array.isArray(Z)?Z.slice():Z,this._composedAsyncValidatorFn=function Li(Y){return Array.isArray(Y)?jr(Y):Y||null}(this._rawAsyncValidators)}}class no extends yo{constructor(Z,H,se){super(mr(H),er(se,H)),this.controls=Z,this._initObservables(),this._setUpdateStrategy(H),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Z,H){return this.controls[Z]?this.controls[Z]:(this.controls[Z]=H,H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange),H)}addControl(Z,H,se={}){this.registerControl(Z,H),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}removeControl(Z,H={}){this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),delete this.controls[Z],this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}setControl(Z,H,se={}){this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),delete this.controls[Z],H&&this.registerControl(Z,H),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}contains(Z){return this.controls.hasOwnProperty(Z)&&this.controls[Z].enabled}setValue(Z,H={}){Us(this,0,Z),Object.keys(Z).forEach(se=>{ui(this,!0,se),this.controls[se].setValue(Z[se],{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H)}patchValue(Z,H={}){null!=Z&&(Object.keys(Z).forEach(se=>{const xe=this.controls[se];xe&&xe.patchValue(Z[se],{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H))}reset(Z={},H={}){this._forEachChild((se,xe)=>{se.reset(Z?Z[xe]:null,{onlySelf:!0,emitEvent:H.emitEvent})}),this._updatePristine(H,this),this._updateTouched(H,this),this.updateValueAndValidity(H)}getRawValue(){return this._reduceChildren({},(Z,H,se)=>(Z[se]=H.getRawValue(),Z))}_syncPendingControls(){let Z=this._reduceChildren(!1,(H,se)=>!!se._syncPendingControls()||H);return Z&&this.updateValueAndValidity({onlySelf:!0}),Z}_forEachChild(Z){Object.keys(this.controls).forEach(H=>{const se=this.controls[H];se&&Z(se,H)})}_setUpControls(){this._forEachChild(Z=>{Z.setParent(this),Z._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Z){for(const[H,se]of Object.entries(this.controls))if(this.contains(H)&&Z(se))return!0;return!1}_reduceValue(){return this._reduceChildren({},(H,se,xe)=>((se.enabled||this.disabled)&&(H[xe]=se.value),H))}_reduceChildren(Z,H){let se=Z;return this._forEachChild((xe,Ot)=>{se=H(se,xe,Ot)}),se}_allControlsDisabled(){for(const Z of Object.keys(this.controls))if(this.controls[Z].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Z){return this.controls.hasOwnProperty(Z)?this.controls[Z]:null}}class du extends no{}const ze=new D.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>xt}),xt="always";function Hn(Y,Z,H=xt){Mr(Y,Z),Z.valueAccessor.writeValue(Y.value),(Y.disabled||"always"===H)&&Z.valueAccessor.setDisabledState?.(Y.disabled),function Vo(Y,Z){Z.valueAccessor.registerOnChange(H=>{Y._pendingValue=H,Y._pendingChange=!0,Y._pendingDirty=!0,"change"===Y.updateOn&&$a(Y,Z)})}(Y,Z),function bs(Y,Z){const H=(se,xe)=>{Z.valueAccessor.writeValue(se),xe&&Z.viewToModelUpdate(se)};Y.registerOnChange(H),Z._registerOnDestroy(()=>{Y._unregisterOnChange(H)})}(Y,Z),function Xr(Y,Z){Z.valueAccessor.registerOnTouched(()=>{Y._pendingTouched=!0,"blur"===Y.updateOn&&Y._pendingChange&&$a(Y,Z),"submit"!==Y.updateOn&&Y.markAsTouched()})}(Y,Z),function Rr(Y,Z){if(Z.valueAccessor.setDisabledState){const H=se=>{Z.valueAccessor.setDisabledState(se)};Y.registerOnDisabledChange(H),Z._registerOnDestroy(()=>{Y._unregisterOnDisabledChange(H)})}}(Y,Z)}function Pn(Y,Z,H=!0){const se=()=>{};Z.valueAccessor&&(Z.valueAccessor.registerOnChange(se),Z.valueAccessor.registerOnTouched(se)),uo(Y,Z),Y&&(Z._invokeOnDestroyCallbacks(),Y._registerOnCollectionChange(()=>{}))}function kn(Y,Z){Y.forEach(H=>{H.registerOnValidatorChange&&H.registerOnValidatorChange(Z)})}function Mr(Y,Z){const H=lr(Y);null!==Z.validator?Y.setValidators(to(H,Z.validator)):"function"==typeof H&&Y.setValidators([H]);const se=qr(Y);null!==Z.asyncValidator?Y.setAsyncValidators(to(se,Z.asyncValidator)):"function"==typeof se&&Y.setAsyncValidators([se]);const xe=()=>Y.updateValueAndValidity();kn(Z._rawValidators,xe),kn(Z._rawAsyncValidators,xe)}function uo(Y,Z){let H=!1;if(null!==Y){if(null!==Z.validator){const xe=lr(Y);if(Array.isArray(xe)&&xe.length>0){const Ot=xe.filter(qn=>qn!==Z.validator);Ot.length!==xe.length&&(H=!0,Y.setValidators(Ot))}}if(null!==Z.asyncValidator){const xe=qr(Y);if(Array.isArray(xe)&&xe.length>0){const Ot=xe.filter(qn=>qn!==Z.asyncValidator);Ot.length!==xe.length&&(H=!0,Y.setAsyncValidators(Ot))}}}const se=()=>{};return kn(Z._rawValidators,se),kn(Z._rawAsyncValidators,se),H}function $a(Y,Z){Y._pendingDirty&&Y.markAsDirty(),Y.setValue(Y._pendingValue,{emitModelToViewChange:!1}),Z.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1}function lo(Y,Z){if(!Y.hasOwnProperty("model"))return!1;const H=Y.model;return!!H.isFirstChange()||!Object.is(Z,H.currentValue)}function ro(Y,Z){if(!Z)return null;let H,se,xe;return Array.isArray(Z),Z.forEach(Ot=>{Ot.constructor===Ct?H=Ot:function bo(Y){return Object.getPrototypeOf(Y.constructor)===It}(Ot)?se=Ot:xe=Ot}),xe||se||H||null}function qi(Y,Z){const H=Y.indexOf(Z);H>-1&&Y.splice(H,1)}function Ri(Y){return"object"==typeof Y&&null!==Y&&2===Object.keys(Y).length&&"value"in Y&&"disabled"in Y}Promise.resolve();const js=class extends yo{constructor(Z=null,H,se){super(mr(H),er(se,H)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Z),this._setUpdateStrategy(H),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hr(H)&&(H.nonNullable||H.initialValueIsDefault)&&(this.defaultValue=Ri(Z)?Z.value:Z)}setValue(Z,H={}){this.value=this._pendingValue=Z,this._onChange.length&&!1!==H.emitModelToViewChange&&this._onChange.forEach(se=>se(this.value,!1!==H.emitViewToModelChange)),this.updateValueAndValidity(H)}patchValue(Z,H={}){this.setValue(Z,H)}reset(Z=this.defaultValue,H={}){this._applyFormState(Z),this.markAsPristine(H),this.markAsUntouched(H),this.setValue(this.value,H),this._pendingChange=!1}_updateValue(){}_anyControls(Z){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Z){this._onChange.push(Z)}_unregisterOnChange(Z){qi(this._onChange,Z)}registerOnDisabledChange(Z){this._onDisabledChange.push(Z)}_unregisterOnDisabledChange(Z){qi(this._onDisabledChange,Z)}_forEachChild(Z){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Z){Ri(Z)?(this.value=this._pendingValue=Z.value,Z.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Z}};Promise.resolve();let Hs=(()=>{class Y{static#e=this.\u0275fac=function(se){return new(se||Y)};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return Y})();const Hi=new D.nKC(""),Gs={provide:Yn,useExisting:(0,D.Rfq)(()=>ls)};let ls=(()=>{class Y extends Yn{set isDisabled(H){}static#e=this._ngModelWarningSentOnce=!1;constructor(H,se,xe,Ot,qn){super(),this._ngModelWarningConfig=Ot,this.callSetDisabledState=qn,this.update=new D.bkB,this._ngModelWarningSent=!1,this._setValidators(H),this._setAsyncValidators(se),this.valueAccessor=ro(0,xe)}ngOnChanges(H){if(this._isControlChanged(H)){const se=H.form.previousValue;se&&Pn(se,this,!1),Hn(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}lo(H,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Pn(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}_isControlChanged(H){return H.hasOwnProperty("form")}static#t=this.\u0275fac=function(se){return new(se||Y)(D.rXU(Xt,10),D.rXU(Qt,10),D.rXU(Mt,10),D.rXU(Hi,8),D.rXU(ze,8))};static#n=this.\u0275dir=D.FsC({type:Y,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[D.Jv_([Gs]),D.Vt3,D.OA$]})}return Y})();const hu={provide:ai,useExisting:(0,D.Rfq)(()=>fo)};let fo=(()=>{class Y extends ai{constructor(H,se,xe){super(),this.callSetDisabledState=xe,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new D.bkB,this._setValidators(H),this._setAsyncValidators(se)}ngOnChanges(H){this._checkFormPresent(),H.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(uo(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(H){const se=this.form.get(H.path);return Hn(se,H,this.callSetDisabledState),se.updateValueAndValidity({emitEvent:!1}),this.directives.push(H),se}getControl(H){return this.form.get(H.path)}removeControl(H){Pn(H.control||null,H,!1),function Ar(Y,Z){const H=Y.indexOf(Z);H>-1&&Y.splice(H,1)}(this.directives,H)}addFormGroup(H){this._setUpFormContainer(H)}removeFormGroup(H){this._cleanUpFormContainer(H)}getFormGroup(H){return this.form.get(H.path)}addFormArray(H){this._setUpFormContainer(H)}removeFormArray(H){this._cleanUpFormContainer(H)}getFormArray(H){return this.form.get(H.path)}updateModel(H,se){this.form.get(H.path).setValue(se)}onSubmit(H){return this.submitted=!0,function Zo(Y,Z){Y._syncPendingControls(),Z.forEach(H=>{const se=H.control;"submit"===se.updateOn&&se._pendingChange&&(H.viewToModelUpdate(se._pendingValue),se._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(H),this.form._events.next(new zn(this.control)),"dialog"===H?.target?.method}onReset(){this.resetForm()}resetForm(H=void 0){this.form.reset(H),this.submitted=!1,this.form._events.next(new Kr(this.form))}_updateDomValue(){this.directives.forEach(H=>{const se=H.control,xe=this.form.get(H.path);se!==xe&&(Pn(se||null,H),(Y=>Y instanceof js)(xe)&&(Hn(xe,H,this.callSetDisabledState),H.control=xe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(H){const se=this.form.get(H.path);(function fu(Y,Z){Mr(Y,Z)})(se,H),se.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(H){if(this.form){const se=this.form.get(H.path);se&&function ca(Y,Z){return uo(Y,Z)}(se,H)&&se.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mr(this.form,this),this._oldForm&&uo(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(Xt,10),D.rXU(Qt,10),D.rXU(ze,8))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["","formGroup",""]],hostBindings:function(se,xe){1&se&&D.bIt("submit",function(qn){return xe.onSubmit(qn)})("reset",function(){return xe.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D.Jv_([hu]),D.Vt3,D.OA$]})}return Y})();const Wa={provide:Yn,useExisting:(0,D.Rfq)(()=>Uo)};let Uo=(()=>{class Y extends Yn{set isDisabled(H){}static#e=this._ngModelWarningSentOnce=!1;constructor(H,se,xe,Ot,qn){super(),this._ngModelWarningConfig=qn,this._added=!1,this.name=null,this.update=new D.bkB,this._ngModelWarningSent=!1,this._parent=H,this._setValidators(se),this._setAsyncValidators(xe),this.valueAccessor=ro(0,Ot)}ngOnChanges(H){this._added||this._setUpControl(),lo(H,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}get path(){return function rn(Y,Z){return[...Z.path,Y]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(se){return new(se||Y)(D.rXU(ai,13),D.rXU(Xt,10),D.rXU(Qt,10),D.rXU(Mt,10),D.rXU(Hi,8))};static#n=this.\u0275dir=D.FsC({type:Y,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[D.Jv_([Wa]),D.Vt3,D.OA$]})}return Y})();const ho={provide:Mt,useExisting:(0,D.Rfq)(()=>Eo),multi:!0};function Lc(Y,Z){return null==Y?`${Z}`:(Z&&"object"==typeof Z&&(Z="Object"),`${Y}: ${Z}`.slice(0,50))}let Eo=(()=>{class Y extends It{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(H){this._compareWith=H}writeValue(H){this.value=H;const xe=Lc(this._getOptionId(H),H);this.setProperty("value",xe)}registerOnChange(H){this.onChange=se=>{this.value=this._getOptionValue(se),H(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(H){for(const se of this._optionMap.keys())if(this._compareWith(this._optionMap.get(se),H))return se;return null}_getOptionValue(H){const se=function Qr(Y){return Y.split(":")[0]}(H);return this._optionMap.has(se)?this._optionMap.get(se):H}static#e=this.\u0275fac=(()=>{let H;return function(xe){return(H||(H=D.xGo(Y)))(xe||Y)}})();static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(se,xe){1&se&&D.bIt("change",function(qn){return xe.onChange(qn.target.value)})("blur",function(){return xe.onTouched()})},inputs:{compareWith:"compareWith"},features:[D.Jv_([ho]),D.Vt3]})}return Y})(),Vu=(()=>{class Y{constructor(H,se,xe){this._element=H,this._renderer=se,this._select=xe,this._select&&(this.id=this._select._registerOption())}set ngValue(H){null!=this._select&&(this._select._optionMap.set(this.id,H),this._setElementValue(Lc(this.id,H)),this._select.writeValue(this._select.value))}set value(H){this._setElementValue(H),this._select&&this._select.writeValue(this._select.value)}_setElementValue(H){this._renderer.setProperty(this._element.nativeElement,"value",H)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(D.aKT),D.rXU(D.sFG),D.rXU(Eo,9))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return Y})();const pa={provide:Mt,useExisting:(0,D.Rfq)(()=>Zn),multi:!0};function gc(Y,Z){return null==Y?`${Z}`:("string"==typeof Z&&(Z=`'${Z}'`),Z&&"object"==typeof Z&&(Z="Object"),`${Y}: ${Z}`.slice(0,50))}let Zn=(()=>{class Y extends It{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(H){this._compareWith=H}writeValue(H){let se;if(this.value=H,Array.isArray(H)){const xe=H.map(Ot=>this._getOptionId(Ot));se=(Ot,qn)=>{Ot._setSelected(xe.indexOf(qn.toString())>-1)}}else se=(xe,Ot)=>{xe._setSelected(!1)};this._optionMap.forEach(se)}registerOnChange(H){this.onChange=se=>{const xe=[],Ot=se.selectedOptions;if(void 0!==Ot){const qn=Ot;for(let $o=0;$o<qn.length;$o++){const Do=this._getOptionValue(qn[$o].value);xe.push(Do)}}else{const qn=se.options;for(let $o=0;$o<qn.length;$o++){const va=qn[$o];if(va.selected){const Do=this._getOptionValue(va.value);xe.push(Do)}}}this.value=xe,H(xe)}}_registerOption(H){const se=(this._idCounter++).toString();return this._optionMap.set(se,H),se}_getOptionId(H){for(const se of this._optionMap.keys())if(this._compareWith(this._optionMap.get(se)._value,H))return se;return null}_getOptionValue(H){const se=function qa(Y){return Y.split(":")[0]}(H);return this._optionMap.has(se)?this._optionMap.get(se)._value:H}static#e=this.\u0275fac=(()=>{let H;return function(xe){return(H||(H=D.xGo(Y)))(xe||Y)}})();static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(se,xe){1&se&&D.bIt("change",function(qn){return xe.onChange(qn.target)})("blur",function(){return xe.onTouched()})},inputs:{compareWith:"compareWith"},features:[D.Jv_([pa]),D.Vt3]})}return Y})(),hr=(()=>{class Y{constructor(H,se,xe){this._element=H,this._renderer=se,this._select=xe,this._select&&(this.id=this._select._registerOption(this))}set ngValue(H){null!=this._select&&(this._value=H,this._setElementValue(gc(this.id,H)),this._select.writeValue(this._select.value))}set value(H){this._select?(this._value=H,this._setElementValue(gc(this.id,H)),this._select.writeValue(this._select.value)):this._setElementValue(H)}_setElementValue(H){this._renderer.setProperty(this._element.nativeElement,"value",H)}_setSelected(H){this._renderer.setProperty(this._element.nativeElement,"selected",H)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(D.aKT),D.rXU(D.sFG),D.rXU(Zn,9))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return Y})(),Fn=(()=>{class Y{static#e=this.\u0275fac=function(se){return new(se||Y)};static#t=this.\u0275mod=D.$C({type:Y});static#n=this.\u0275inj=D.G2t({})}return Y})();class Oa extends yo{constructor(Z,H,se){super(mr(H),er(se,H)),this.controls=Z,this._initObservables(),this._setUpdateStrategy(H),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Z){return this.controls[this._adjustIndex(Z)]}push(Z,H={}){this.controls.push(Z),this._registerControl(Z),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}insert(Z,H,se={}){this.controls.splice(Z,0,H),this._registerControl(H),this.updateValueAndValidity({emitEvent:se.emitEvent})}removeAt(Z,H={}){let se=this._adjustIndex(Z);se<0&&(se=0),this.controls[se]&&this.controls[se]._registerOnCollectionChange(()=>{}),this.controls.splice(se,1),this.updateValueAndValidity({emitEvent:H.emitEvent})}setControl(Z,H,se={}){let xe=this._adjustIndex(Z);xe<0&&(xe=0),this.controls[xe]&&this.controls[xe]._registerOnCollectionChange(()=>{}),this.controls.splice(xe,1),H&&(this.controls.splice(xe,0,H),this._registerControl(H)),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Z,H={}){Us(this,0,Z),Z.forEach((se,xe)=>{ui(this,!1,xe),this.at(xe).setValue(se,{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H)}patchValue(Z,H={}){null!=Z&&(Z.forEach((se,xe)=>{this.at(xe)&&this.at(xe).patchValue(se,{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H))}reset(Z=[],H={}){this._forEachChild((se,xe)=>{se.reset(Z[xe],{onlySelf:!0,emitEvent:H.emitEvent})}),this._updatePristine(H,this),this._updateTouched(H,this),this.updateValueAndValidity(H)}getRawValue(){return this.controls.map(Z=>Z.getRawValue())}clear(Z={}){this.controls.length<1||(this._forEachChild(H=>H._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Z.emitEvent}))}_adjustIndex(Z){return Z<0?Z+this.length:Z}_syncPendingControls(){let Z=this.controls.reduce((H,se)=>!!se._syncPendingControls()||H,!1);return Z&&this.updateValueAndValidity({onlySelf:!0}),Z}_forEachChild(Z){this.controls.forEach((H,se)=>{Z(H,se)})}_updateValue(){this.value=this.controls.filter(Z=>Z.enabled||this.disabled).map(Z=>Z.value)}_anyControls(Z){return this.controls.some(H=>H.enabled&&Z(H))}_setUpControls(){this._forEachChild(Z=>this._registerControl(Z))}_allControlsDisabled(){for(const Z of this.controls)if(Z.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Z){Z.setParent(this),Z._registerOnCollectionChange(this._onCollectionChange)}_find(Z){return this.at(Z)??null}}function Go(Y){return!!Y&&(void 0!==Y.asyncValidators||void 0!==Y.validators||void 0!==Y.updateOn)}let Yr=(()=>{class Y{constructor(){this.useNonNullable=!1}get nonNullable(){const H=new Y;return H.useNonNullable=!0,H}group(H,se=null){const xe=this._reduceControls(H);let Ot={};return Go(se)?Ot=se:null!==se&&(Ot.validators=se.validator,Ot.asyncValidators=se.asyncValidator),new no(xe,Ot)}record(H,se=null){const xe=this._reduceControls(H);return new du(xe,se)}control(H,se,xe){let Ot={};return this.useNonNullable?(Go(se)?Ot=se:(Ot.validators=se,Ot.asyncValidators=xe),new js(H,{...Ot,nonNullable:!0})):new js(H,se,xe)}array(H,se,xe){const Ot=H.map(qn=>this._createControl(qn));return new Oa(Ot,se,xe)}_reduceControls(H){const se={};return Object.keys(H).forEach(xe=>{se[xe]=this._createControl(H[xe])}),se}_createControl(H){return H instanceof js||H instanceof yo?H:Array.isArray(H)?this.control(H[0],H.length>1?H[1]:null,H.length>2?H[2]:null):this.control(H)}static#e=this.\u0275fac=function(se){return new(se||Y)};static#t=this.\u0275prov=D.jDH({token:Y,factory:Y.\u0275fac,providedIn:"root"})}return Y})(),Bu=(()=>{class Y{static withConfig(H){return{ngModule:Y,providers:[{provide:ze,useValue:H.callSetDisabledState??xt}]}}static#e=this.\u0275fac=function(se){return new(se||Y)};static#t=this.\u0275mod=D.$C({type:Y});static#n=this.\u0275inj=D.G2t({imports:[Fn]})}return Y})(),cl=(()=>{class Y{static withConfig(H){return{ngModule:Y,providers:[{provide:Hi,useValue:H.warnOnNgModelWithFormControl??"always"},{provide:ze,useValue:H.callSetDisabledState??xt}]}}static#e=this.\u0275fac=function(se){return new(se||Y)};static#t=this.\u0275mod=D.$C({type:Y});static#n=this.\u0275inj=D.G2t({imports:[Fn]})}return Y})()},345:(yn,wt,ie)=>{ie.d(wt,{B8:()=>bt,hE:()=>si});var D=ie(177),T=ie(3953);class L extends D.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Be extends L{static makeCurrent(){(0,D.ZD)(new Be)}onAndCancel(tt,Te,Qe){return tt.addEventListener(Te,Qe),()=>{tt.removeEventListener(Te,Qe)}}dispatchEvent(tt,Te){tt.dispatchEvent(Te)}remove(tt){tt.parentNode&&tt.parentNode.removeChild(tt)}createElement(tt,Te){return(Te=Te||this.getDefaultDocument()).createElement(tt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(tt){return tt.nodeType===Node.ELEMENT_NODE}isShadowRoot(tt){return tt instanceof DocumentFragment}getGlobalEventTarget(tt,Te){return"window"===Te?window:"document"===Te?tt:"body"===Te?tt.body:null}getBaseHref(tt){const Te=function Ce(){return Ze=Ze||document.querySelector("base"),Ze?Ze.getAttribute("href"):null}();return null==Te?null:function Ke(he){return new URL(he,document.baseURI).pathname}(Te)}resetBaseElement(){Ze=null}getUserAgent(){return window.navigator.userAgent}getCookie(tt){return(0,D._b)(document.cookie,tt)}}let Ze=null,rt=(()=>{class he{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Qe){return new(Qe||he)};static#t=this.\u0275prov=T.jDH({token:he,factory:he.\u0275fac})}return he})();const me=new T.nKC("");let Ae=(()=>{class he{constructor(Te,Qe){this._zone=Qe,this._eventNameToPlugin=new Map,Te.forEach(de=>{de.manager=this}),this._plugins=Te.slice().reverse()}addEventListener(Te,Qe,de){return this._findPluginFor(Qe).addEventListener(Te,Qe,de)}getZone(){return this._zone}_findPluginFor(Te){let Qe=this._eventNameToPlugin.get(Te);if(Qe)return Qe;if(Qe=this._plugins.find(_e=>_e.supports(Te)),!Qe)throw new T.wOt(5101,!1);return this._eventNameToPlugin.set(Te,Qe),Qe}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(T.KVO(me),T.KVO(T.SKi))};static#t=this.\u0275prov=T.jDH({token:he,factory:he.\u0275fac})}return he})();class Pe{constructor(tt){this._doc=tt}}const pt="ng-app-id";let Ue=(()=>{class he{constructor(Te,Qe,de,_e={}){this.doc=Te,this.appId=Qe,this.nonce=de,this.platformId=_e,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,D.Vy)(_e),this.resetHostNodes()}addStyles(Te){for(const Qe of Te)1===this.changeUsageCount(Qe,1)&&this.onStyleAdded(Qe)}removeStyles(Te){for(const Qe of Te)this.changeUsageCount(Qe,-1)<=0&&this.onStyleRemoved(Qe)}ngOnDestroy(){const Te=this.styleNodesInDOM;Te&&(Te.forEach(Qe=>Qe.remove()),Te.clear());for(const Qe of this.getAllStyles())this.onStyleRemoved(Qe);this.resetHostNodes()}addHost(Te){this.hostNodes.add(Te);for(const Qe of this.getAllStyles())this.addStyleToHost(Te,Qe)}removeHost(Te){this.hostNodes.delete(Te)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Te){for(const Qe of this.hostNodes)this.addStyleToHost(Qe,Te)}onStyleRemoved(Te){const Qe=this.styleRef;Qe.get(Te)?.elements?.forEach(de=>de.remove()),Qe.delete(Te)}collectServerRenderedStyles(){const Te=this.doc.head?.querySelectorAll(`style[${pt}="${this.appId}"]`);if(Te?.length){const Qe=new Map;return Te.forEach(de=>{null!=de.textContent&&Qe.set(de.textContent,de)}),Qe}return null}changeUsageCount(Te,Qe){const de=this.styleRef;if(de.has(Te)){const _e=de.get(Te);return _e.usage+=Qe,_e.usage}return de.set(Te,{usage:Qe,elements:[]}),Qe}getStyleElement(Te,Qe){const de=this.styleNodesInDOM,_e=de?.get(Qe);if(_e?.parentNode===Te)return de.delete(Qe),_e.removeAttribute(pt),_e;{const Re=this.doc.createElement("style");return this.nonce&&Re.setAttribute("nonce",this.nonce),Re.textContent=Qe,this.platformIsServer&&Re.setAttribute(pt,this.appId),Te.appendChild(Re),Re}}addStyleToHost(Te,Qe){const de=this.getStyleElement(Te,Qe),_e=this.styleRef,Re=_e.get(Qe)?.elements;Re?Re.push(de):_e.set(Qe,{elements:[de],usage:1})}resetHostNodes(){const Te=this.hostNodes;Te.clear(),Te.add(this.doc.head)}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(T.KVO(D.qQ),T.KVO(T.sZ2),T.KVO(T.BIS,8),T.KVO(T.Agw))};static#t=this.\u0275prov=T.jDH({token:he,factory:he.\u0275fac})}return he})();const It={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Mt=/%COMP%/g,Tt=new T.nKC("",{providedIn:"root",factory:()=>!0});function Ht(he,tt){return tt.map(Te=>Te.replace(Mt,he))}let Xt=(()=>{class he{constructor(Te,Qe,de,_e,Re,lt,qe,Kt=null){this.eventManager=Te,this.sharedStylesHost=Qe,this.appId=de,this.removeStylesOnCompDestroy=_e,this.doc=Re,this.platformId=lt,this.ngZone=qe,this.nonce=Kt,this.rendererByCompId=new Map,this.platformIsServer=(0,D.Vy)(lt),this.defaultRenderer=new Qt(Te,Re,qe,this.platformIsServer)}createRenderer(Te,Qe){if(!Te||!Qe)return this.defaultRenderer;this.platformIsServer&&Qe.encapsulation===T.gXe.ShadowDom&&(Qe={...Qe,encapsulation:T.gXe.Emulated});const de=this.getOrCreateRenderer(Te,Qe);return de instanceof le?de.applyToHost(Te):de instanceof Mn&&de.applyStyles(),de}getOrCreateRenderer(Te,Qe){const de=this.rendererByCompId;let _e=de.get(Qe.id);if(!_e){const Re=this.doc,lt=this.ngZone,qe=this.eventManager,Kt=this.sharedStylesHost,bn=this.removeStylesOnCompDestroy,zn=this.platformIsServer;switch(Qe.encapsulation){case T.gXe.Emulated:_e=new le(qe,Kt,Qe,this.appId,bn,Re,lt,zn);break;case T.gXe.ShadowDom:return new Bt(qe,Kt,Te,Qe,Re,lt,this.nonce,zn);default:_e=new Mn(qe,Kt,Qe,bn,Re,lt,zn)}de.set(Qe.id,_e)}return _e}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(T.KVO(Ae),T.KVO(Ue),T.KVO(T.sZ2),T.KVO(Tt),T.KVO(D.qQ),T.KVO(T.Agw),T.KVO(T.SKi),T.KVO(T.BIS))};static#t=this.\u0275prov=T.jDH({token:he,factory:he.\u0275fac})}return he})();class Qt{constructor(tt,Te,Qe,de){this.eventManager=tt,this.doc=Te,this.ngZone=Qe,this.platformIsServer=de,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(tt,Te){return Te?this.doc.createElementNS(It[Te]||Te,tt):this.doc.createElement(tt)}createComment(tt){return this.doc.createComment(tt)}createText(tt){return this.doc.createTextNode(tt)}appendChild(tt,Te){(xn(tt)?tt.content:tt).appendChild(Te)}insertBefore(tt,Te,Qe){tt&&(xn(tt)?tt.content:tt).insertBefore(Te,Qe)}removeChild(tt,Te){tt&&tt.removeChild(Te)}selectRootElement(tt,Te){let Qe="string"==typeof tt?this.doc.querySelector(tt):tt;if(!Qe)throw new T.wOt(-5104,!1);return Te||(Qe.textContent=""),Qe}parentNode(tt){return tt.parentNode}nextSibling(tt){return tt.nextSibling}setAttribute(tt,Te,Qe,de){if(de){Te=de+":"+Te;const _e=It[de];_e?tt.setAttributeNS(_e,Te,Qe):tt.setAttribute(Te,Qe)}else tt.setAttribute(Te,Qe)}removeAttribute(tt,Te,Qe){if(Qe){const de=It[Qe];de?tt.removeAttributeNS(de,Te):tt.removeAttribute(`${Qe}:${Te}`)}else tt.removeAttribute(Te)}addClass(tt,Te){tt.classList.add(Te)}removeClass(tt,Te){tt.classList.remove(Te)}setStyle(tt,Te,Qe,de){de&(T.czy.DashCase|T.czy.Important)?tt.style.setProperty(Te,Qe,de&T.czy.Important?"important":""):tt.style[Te]=Qe}removeStyle(tt,Te,Qe){Qe&T.czy.DashCase?tt.style.removeProperty(Te):tt.style[Te]=""}setProperty(tt,Te,Qe){null!=tt&&(tt[Te]=Qe)}setValue(tt,Te){tt.nodeValue=Te}listen(tt,Te,Qe){if("string"==typeof tt&&!(tt=(0,D.QT)().getGlobalEventTarget(this.doc,tt)))throw new Error(`Unsupported event target ${tt} for event ${Te}`);return this.eventManager.addEventListener(tt,Te,this.decoratePreventDefault(Qe))}decoratePreventDefault(tt){return Te=>{if("__ngUnwrap__"===Te)return tt;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>tt(Te)):tt(Te))&&Te.preventDefault()}}}function xn(he){return"TEMPLATE"===he.tagName&&void 0!==he.content}class Bt extends Qt{constructor(tt,Te,Qe,de,_e,Re,lt,qe){super(tt,_e,Re,qe),this.sharedStylesHost=Te,this.hostEl=Qe,this.shadowRoot=Qe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Kt=Ht(de.id,de.styles);for(const bn of Kt){const zn=document.createElement("style");lt&&zn.setAttribute("nonce",lt),zn.textContent=bn,this.shadowRoot.appendChild(zn)}}nodeOrShadowRoot(tt){return tt===this.hostEl?this.shadowRoot:tt}appendChild(tt,Te){return super.appendChild(this.nodeOrShadowRoot(tt),Te)}insertBefore(tt,Te,Qe){return super.insertBefore(this.nodeOrShadowRoot(tt),Te,Qe)}removeChild(tt,Te){return super.removeChild(this.nodeOrShadowRoot(tt),Te)}parentNode(tt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(tt)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Mn extends Qt{constructor(tt,Te,Qe,de,_e,Re,lt,qe){super(tt,_e,Re,lt),this.sharedStylesHost=Te,this.removeStylesOnCompDestroy=de,this.styles=qe?Ht(qe,Qe.styles):Qe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class le extends Mn{constructor(tt,Te,Qe,de,_e,Re,lt,qe){const Kt=de+"-"+Qe.id;super(tt,Te,Qe,_e,Re,lt,qe,Kt),this.contentAttr=function Ct(he){return"_ngcontent-%COMP%".replace(Mt,he)}(Kt),this.hostAttr=function kt(he){return"_nghost-%COMP%".replace(Mt,he)}(Kt)}applyToHost(tt){this.applyStyles(),this.setAttribute(tt,this.hostAttr,"")}createElement(tt,Te){const Qe=super.createElement(tt,Te);return super.setAttribute(Qe,this.contentAttr,""),Qe}}let gt=(()=>{class he extends Pe{constructor(Te){super(Te)}supports(Te){return!0}addEventListener(Te,Qe,de){return Te.addEventListener(Qe,de,!1),()=>this.removeEventListener(Te,Qe,de)}removeEventListener(Te,Qe,de){return Te.removeEventListener(Qe,de)}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(T.KVO(D.qQ))};static#t=this.\u0275prov=T.jDH({token:he,factory:he.\u0275fac})}return he})();const St=["alt","control","meta","shift"],Un={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},De={alt:he=>he.altKey,control:he=>he.ctrlKey,meta:he=>he.metaKey,shift:he=>he.shiftKey};let Ve=(()=>{class he extends Pe{constructor(Te){super(Te)}supports(Te){return null!=he.parseEventName(Te)}addEventListener(Te,Qe,de){const _e=he.parseEventName(Qe),Re=he.eventCallback(_e.fullKey,de,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,D.QT)().onAndCancel(Te,_e.domEventName,Re))}static parseEventName(Te){const Qe=Te.toLowerCase().split("."),de=Qe.shift();if(0===Qe.length||"keydown"!==de&&"keyup"!==de)return null;const _e=he._normalizeKey(Qe.pop());let Re="",lt=Qe.indexOf("code");if(lt>-1&&(Qe.splice(lt,1),Re="code."),St.forEach(Kt=>{const bn=Qe.indexOf(Kt);bn>-1&&(Qe.splice(bn,1),Re+=Kt+".")}),Re+=_e,0!=Qe.length||0===_e.length)return null;const qe={};return qe.domEventName=de,qe.fullKey=Re,qe}static matchEventFullKeyCode(Te,Qe){let de=Un[Te.key]||Te.key,_e="";return Qe.indexOf("code.")>-1&&(de=Te.code,_e="code."),!(null==de||!de)&&(de=de.toLowerCase()," "===de?de="space":"."===de&&(de="dot"),St.forEach(Re=>{Re!==de&&(0,De[Re])(Te)&&(_e+=Re+".")}),_e+=de,_e===Qe)}static eventCallback(Te,Qe,de){return _e=>{he.matchEventFullKeyCode(_e,Te)&&de.runGuarded(()=>Qe(_e))}}static _normalizeKey(Te){return"esc"===Te?"escape":Te}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(T.KVO(D.qQ))};static#t=this.\u0275prov=T.jDH({token:he,factory:he.\u0275fac})}return he})();function bt(he,tt){return(0,T.TL3)({rootComponent:he,...pe(tt)})}function pe(he){return{appProviders:[...lr,...he?.providers??[]],platformProviders:nn}}const nn=[{provide:T.Agw,useValue:D.AJ},{provide:T.PLl,useValue:function _t(){Be.makeCurrent()},multi:!0},{provide:D.qQ,useFactory:function $n(){return(0,T.TL$)(document),document},deps:[]}],lr=[{provide:T.H8p,useValue:"root"},{provide:T.zcH,useFactory:function zt(){return new T.zcH},deps:[]},{provide:me,useClass:gt,multi:!0,deps:[D.qQ,T.SKi,T.Agw]},{provide:me,useClass:Ve,multi:!0,deps:[D.qQ]},Xt,Ue,Ae,{provide:T._9s,useExisting:Xt},{provide:D.N0,useClass:rt,deps:[]},[]];let si=(()=>{class he{constructor(Te){this._doc=Te}getTitle(){return this._doc.title}setTitle(Te){this._doc.title=Te||""}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(T.KVO(D.qQ))};static#t=this.\u0275prov=T.jDH({token:he,factory:he.\u0275fac,providedIn:"root"})}return he})()},7407:(yn,wt,ie)=>{ie.d(wt,{nX:()=>Hi,wF:()=>Zo,Ix:()=>di,Wk:()=>vu,iI:()=>hl,n3:()=>Da,lh:()=>Gu,lG:()=>Ic,qQ:()=>Wu});var D=ie(467),T=ie(3953),L=ie(1985),Be=ie(8071),Ce=ie(8455),Ke=ie(7673),Et=ie(4412),rt=ie(4572);const Ae=(0,ie(1853).L)(R=>function(){R(this),this.name="EmptyError",this.message="no elements in sequence"});var Pe=ie(8793),pt=ie(8750);function Ue(R){return new L.c(U=>{(0,pt.Tg)(R()).subscribe(U)})}var It=ie(1203);function Mt(R,U){const M=(0,Be.T)(R)?R:()=>R,j=Q=>Q.error(M());return new L.c(U?Q=>U.schedule(j,0,Q):j)}const tn=new L.c(R=>R.complete());var Tn=ie(8359),Tt=ie(9974),Ct=ie(4360);function kt(){return(0,Tt.N)((R,U)=>{let M=null;R._refCount++;const j=(0,Ct._)(U,void 0,void 0,void 0,()=>{if(!R||R._refCount<=0||0<--R._refCount)return void(M=null);const Q=R._connection,oe=M;M=null,Q&&(!oe||Q===oe)&&Q.unsubscribe(),U.unsubscribe()});R.subscribe(j),j.closed||(M=R.connect())})}class Ht extends L.c{constructor(U,M){super(),this.source=U,this.subjectFactory=M,this._subject=null,this._refCount=0,this._connection=null,(0,Tt.S)(U)&&(this.lift=U.lift)}_subscribe(U){return this.getSubject().subscribe(U)}getSubject(){const U=this._subject;return(!U||U.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:U}=this;this._subject=this._connection=null,U?.unsubscribe()}connect(){let U=this._connection;if(!U){U=this._connection=new Tn.yU;const M=this.getSubject();U.add(this.source.subscribe((0,Ct._)(M,void 0,()=>{this._teardown(),M.complete()},j=>{this._teardown(),M.error(j)},()=>this._teardown()))),U.closed&&(this._connection=null,U=Tn.yU.EMPTY)}return U}refCount(){return kt()(this)}}var Xt=ie(1413),Qt=ie(177),Xe=ie(6354),Vn=ie(5558);function xn(R){return R<=0?()=>tn:(0,Tt.N)((U,M)=>{let j=0;U.subscribe((0,Ct._)(M,Q=>{++j<=R&&(M.next(Q),R<=j&&M.complete())}))})}var Bt=ie(9172);function Mn(R,U){return(0,Tt.N)((M,j)=>{let Q=0;M.subscribe((0,Ct._)(j,oe=>R.call(U,oe,Q++)&&j.next(oe)))})}var le=ie(1397);function gt(R){return(0,Tt.N)((U,M)=>{let j=!1;U.subscribe((0,Ct._)(M,Q=>{j=!0,M.next(Q)},()=>{j||M.next(R),M.complete()}))})}function St(R=Un){return(0,Tt.N)((U,M)=>{let j=!1;U.subscribe((0,Ct._)(M,Q=>{j=!0,M.next(Q)},()=>j?M.complete():M.error(R())))})}function Un(){return new Ae}var De=ie(3669);function Ve(R,U){const M=arguments.length>=2;return j=>j.pipe(R?Mn((Q,oe)=>R(Q,oe,j)):De.D,xn(1),M?gt(U):St(()=>new Ae))}function bt(R,U){return(0,Be.T)(U)?(0,le.Z)(R,U,1):(0,le.Z)(R,1)}var Ne=ie(8141);function pe(R){return(0,Tt.N)((U,M)=>{let oe,j=null,Q=!1;j=U.subscribe((0,Ct._)(M,void 0,void 0,be=>{oe=(0,pt.Tg)(R(be,pe(R)(U))),j?(j.unsubscribe(),j=null,oe.subscribe(M)):Q=!0})),Q&&(j.unsubscribe(),j=null,oe.subscribe(M))})}function zt(R){return R<=0?()=>tn:(0,Tt.N)((U,M)=>{let j=[];U.subscribe((0,Ct._)(M,Q=>{j.push(Q),R<j.length&&j.shift()},()=>{for(const Q of j)M.next(Q);M.complete()},void 0,()=>{j=null}))})}function Qn(R){return(0,Tt.N)((U,M)=>{try{U.subscribe(M)}finally{M.add(R)}})}var jr=ie(5343),lr=ie(6365),qr=ie(345);const An="primary",pr=Symbol("RouteTitle");class si{constructor(U){this.params=U||{}}has(U){return Object.prototype.hasOwnProperty.call(this.params,U)}get(U){if(this.has(U)){const M=this.params[U];return Array.isArray(M)?M[0]:M}return null}getAll(U){if(this.has(U)){const M=this.params[U];return Array.isArray(M)?M:[M]}return[]}get keys(){return Object.keys(this.params)}}function wn(R){return new si(R)}function Br(R,U,M){const j=M.path.split("/");if(j.length>R.length||"full"===M.pathMatch&&(U.hasChildren()||j.length<R.length))return null;const Q={};for(let oe=0;oe<j.length;oe++){const be=j[oe],dt=R[oe];if(":"===be[0])Q[be.substring(1)]=dt;else if(be!==dt.path)return null}return{consumed:R.slice(0,j.length),posParams:Q}}function Yn(R,U){const M=R?ln(R):void 0,j=U?ln(U):void 0;if(!M||!j||M.length!=j.length)return!1;let Q;for(let oe=0;oe<M.length;oe++)if(Q=M[oe],!Lo(R[Q],U[Q]))return!1;return!0}function ln(R){return[...Object.keys(R),...Object.getOwnPropertySymbols(R)]}function Lo(R,U){if(Array.isArray(R)&&Array.isArray(U)){if(R.length!==U.length)return!1;const M=[...R].sort(),j=[...U].sort();return M.every((Q,oe)=>j[oe]===Q)}return R===U}function Ft(R){return R.length>0?R[R.length-1]:null}function Jn(R){return function Ze(R){return!!R&&(R instanceof L.c||(0,Be.T)(R.lift)&&(0,Be.T)(R.subscribe))}(R)?R:(0,T.jNT)(R)?(0,Ce.H)(Promise.resolve(R)):(0,Ke.of)(R)}const dn={exact:function Dr(R,U,M){if(!Wi(R.segments,U.segments)||!_i(R.segments,U.segments,M)||R.numberOfChildren!==U.numberOfChildren)return!1;for(const j in U.children)if(!R.children[j]||!Dr(R.children[j],U.children[j],M))return!1;return!0},subset:ci},Wt={exact:function ki(R,U){return Yn(R,U)},subset:function mi(R,U){return Object.keys(U).length<=Object.keys(R).length&&Object.keys(U).every(M=>Lo(R[M],U[M]))},ignored:()=>!0};function zr(R,U,M){return dn[M.paths](R.root,U.root,M.matrixParams)&&Wt[M.queryParams](R.queryParams,U.queryParams)&&!("exact"===M.fragment&&R.fragment!==U.fragment)}function ci(R,U,M){return Wr(R,U,U.segments,M)}function Wr(R,U,M,j){if(R.segments.length>M.length){const Q=R.segments.slice(0,M.length);return!(!Wi(Q,M)||U.hasChildren()||!_i(Q,M,j))}if(R.segments.length===M.length){if(!Wi(R.segments,M)||!_i(R.segments,M,j))return!1;for(const Q in U.children)if(!R.children[Q]||!ci(R.children[Q],U.children[Q],j))return!1;return!0}{const Q=M.slice(0,R.segments.length),oe=M.slice(R.segments.length);return!!(Wi(R.segments,Q)&&_i(R.segments,Q,j)&&R.children[An])&&Wr(R.children[An],U,oe,j)}}function _i(R,U,M){return U.every((j,Q)=>Wt[M](R[Q].parameters,j.parameters))}class jn{constructor(U=new Er([],{}),M={},j=null){this.root=U,this.queryParams=M,this.fragment=j}get queryParamMap(){return this._queryParamMap??=wn(this.queryParams),this._queryParamMap}toString(){return he.serialize(this)}}class Er{constructor(U,M){this.segments=U,this.children=M,this.parent=null,Object.values(M).forEach(j=>j.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tt(this)}}class ri{constructor(U,M){this.path=U,this.parameters=M}get parameterMap(){return this._parameterMap??=wn(this.parameters),this._parameterMap}toString(){return Kt(this)}}function Wi(R,U){return R.length===U.length&&R.every((M,j)=>M.path===U[j].path)}let ei=(()=>{class R{static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=T.jDH({token:R,factory:()=>new Cr,providedIn:"root"})}return R})();class Cr{parse(U){const M=new yo(U);return new jn(M.parseRootSegment(),M.parseQueryParams(),M.parseFragment())}serialize(U){const M=`/${Te(U.root,!0)}`,j=function zn(R){const U=Object.entries(R).map(([M,j])=>Array.isArray(j)?j.map(Q=>`${de(M)}=${de(Q)}`).join("&"):`${de(M)}=${de(j)}`).filter(M=>M);return U.length?`?${U.join("&")}`:""}(U.queryParams);return`${M}${j}${"string"==typeof U.fragment?`#${function _e(R){return encodeURI(R)}(U.fragment)}`:""}`}}const he=new Cr;function tt(R){return R.segments.map(U=>Kt(U)).join("/")}function Te(R,U){if(!R.hasChildren())return tt(R);if(U){const M=R.children[An]?Te(R.children[An],!1):"",j=[];return Object.entries(R.children).forEach(([Q,oe])=>{Q!==An&&j.push(`${Q}:${Te(oe,!1)}`)}),j.length>0?`${M}(${j.join("//")})`:M}{const M=function Fi(R,U){let M=[];return Object.entries(R.children).forEach(([j,Q])=>{j===An&&(M=M.concat(U(Q,j)))}),Object.entries(R.children).forEach(([j,Q])=>{j!==An&&(M=M.concat(U(Q,j)))}),M}(R,(j,Q)=>Q===An?[Te(R.children[An],!1)]:[`${Q}:${Te(j,!1)}`]);return 1===Object.keys(R.children).length&&null!=R.children[An]?`${tt(R)}/${M[0]}`:`${tt(R)}/(${M.join("//")})`}}function Qe(R){return encodeURIComponent(R).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function de(R){return Qe(R).replace(/%3B/gi,";")}function Re(R){return Qe(R).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lt(R){return decodeURIComponent(R)}function qe(R){return lt(R.replace(/\+/g,"%20"))}function Kt(R){return`${Re(R.path)}${function bn(R){return Object.entries(R).map(([U,M])=>`;${Re(U)}=${Re(M)}`).join("")}(R.parameters)}`}const Kr=/^[^\/()?;#]+/;function mr(R){const U=R.match(Kr);return U?U[0]:""}const vi=/^[^\/()?;=#]+/,Li=/^[^=?&#]+/,ui=/^[^&#]+/;class yo{constructor(U){this.url=U,this.remaining=U}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Er([],{}):new Er([],this.parseChildren())}parseQueryParams(){const U={};if(this.consumeOptional("?"))do{this.parseQueryParam(U)}while(this.consumeOptional("&"));return U}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const U=[];for(this.peekStartsWith("(")||U.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),U.push(this.parseSegment());let M={};this.peekStartsWith("/(")&&(this.capture("/"),M=this.parseParens(!0));let j={};return this.peekStartsWith("(")&&(j=this.parseParens(!1)),(U.length>0||Object.keys(M).length>0)&&(j[An]=new Er(U,M)),j}parseSegment(){const U=mr(this.remaining);if(""===U&&this.peekStartsWith(";"))throw new T.wOt(4009,!1);return this.capture(U),new ri(lt(U),this.parseMatrixParams())}parseMatrixParams(){const U={};for(;this.consumeOptional(";");)this.parseParam(U);return U}parseParam(U){const M=function er(R){const U=R.match(vi);return U?U[0]:""}(this.remaining);if(!M)return;this.capture(M);let j="";if(this.consumeOptional("=")){const Q=mr(this.remaining);Q&&(j=Q,this.capture(j))}U[lt(M)]=lt(j)}parseQueryParam(U){const M=function Hr(R){const U=R.match(Li);return U?U[0]:""}(this.remaining);if(!M)return;this.capture(M);let j="";if(this.consumeOptional("=")){const be=function Us(R){const U=R.match(ui);return U?U[0]:""}(this.remaining);be&&(j=be,this.capture(j))}const Q=qe(M),oe=qe(j);if(U.hasOwnProperty(Q)){let be=U[Q];Array.isArray(be)||(be=[be],U[Q]=be),be.push(oe)}else U[Q]=oe}parseParens(U){const M={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const j=mr(this.remaining),Q=this.remaining[j.length];if("/"!==Q&&")"!==Q&&";"!==Q)throw new T.wOt(4010,!1);let oe;j.indexOf(":")>-1?(oe=j.slice(0,j.indexOf(":")),this.capture(oe),this.capture(":")):U&&(oe=An);const be=this.parseChildren();M[oe]=1===Object.keys(be).length?be[An]:new Er([],be),this.consumeOptional("//")}return M}peekStartsWith(U){return this.remaining.startsWith(U)}consumeOptional(U){return!!this.peekStartsWith(U)&&(this.remaining=this.remaining.substring(U.length),!0)}capture(U){if(!this.consumeOptional(U))throw new T.wOt(4011,!1)}}function no(R){return R.segments.length>0?new Er([],{[An]:R}):R}function Is(R){const U={};for(const[j,Q]of Object.entries(R.children)){const oe=Is(Q);if(j===An&&0===oe.segments.length&&oe.hasChildren())for(const[be,dt]of Object.entries(oe.children))U[be]=dt;else(oe.segments.length>0||oe.hasChildren())&&(U[j]=oe)}return function kc(R){if(1===R.numberOfChildren&&R.children[An]){const U=R.children[An];return new Er(R.segments.concat(U.segments),U.children)}return R}(new Er(R.segments,U))}function As(R){return R instanceof jn}function vt(R){let U;const Q=no(function M(oe){const be={};for(const Je of oe.children){const Pt=M(Je);be[Je.outlet]=Pt}const dt=new Er(oe.url,be);return oe===R&&(U=dt),dt}(R.root));return U??Q}function ze(R,U,M,j){let Q=R;for(;Q.parent;)Q=Q.parent;if(0===U.length)return Hn(Q,Q,Q,M,j);const oe=function Rr(R){if("string"==typeof R[0]&&1===R.length&&"/"===R[0])return new kn(!0,0,R);let U=0,M=!1;const j=R.reduce((Q,oe,be)=>{if("object"==typeof oe&&null!=oe){if(oe.outlets){const dt={};return Object.entries(oe.outlets).forEach(([Je,Pt])=>{dt[Je]="string"==typeof Pt?Pt.split("/"):Pt}),[...Q,{outlets:dt}]}if(oe.segmentPath)return[...Q,oe.segmentPath]}return"string"!=typeof oe?[...Q,oe]:0===be?(oe.split("/").forEach((dt,Je)=>{0==Je&&"."===dt||(0==Je&&""===dt?M=!0:".."===dt?U++:""!=dt&&Q.push(dt))}),Q):[...Q,oe]},[]);return new kn(M,U,j)}(U);if(oe.toRoot())return Hn(Q,Q,new Er([],{}),M,j);const be=function uo(R,U,M){if(R.isAbsolute)return new Mr(U,!0,0);if(!M)return new Mr(U,!1,NaN);if(null===M.parent)return new Mr(M,!0,0);const j=xt(R.commands[0])?0:1;return function Vo(R,U,M){let j=R,Q=U,oe=M;for(;oe>Q;){if(oe-=Q,j=j.parent,!j)throw new T.wOt(4005,!1);Q=j.segments.length}return new Mr(j,!1,Q-oe)}(M,M.segments.length-1+j,R.numberOfDoubleDots)}(oe,Q,R),dt=be.processChildren?bs(be.segmentGroup,be.index,oe.commands):$a(be.segmentGroup,be.index,oe.commands);return Hn(Q,be.segmentGroup,dt,M,j)}function xt(R){return"object"==typeof R&&null!=R&&!R.outlets&&!R.segmentPath}function rn(R){return"object"==typeof R&&null!=R&&R.outlets}function Hn(R,U,M,j,Q){let be,oe={};j&&Object.entries(j).forEach(([Je,Pt])=>{oe[Je]=Array.isArray(Pt)?Pt.map(pn=>`${pn}`):`${Pt}`}),be=R===U?M:Pn(R,U,M);const dt=no(Is(be));return new jn(dt,oe,Q)}function Pn(R,U,M){const j={};return Object.entries(R.children).forEach(([Q,oe])=>{j[Q]=oe===U?M:Pn(oe,U,M)}),new Er(R.segments,j)}class kn{constructor(U,M,j){if(this.isAbsolute=U,this.numberOfDoubleDots=M,this.commands=j,U&&j.length>0&&xt(j[0]))throw new T.wOt(4003,!1);const Q=j.find(rn);if(Q&&Q!==Ft(j))throw new T.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mr{constructor(U,M,j){this.segmentGroup=U,this.processChildren=M,this.index=j}}function $a(R,U,M){if(R??=new Er([],{}),0===R.segments.length&&R.hasChildren())return bs(R,U,M);const j=function fu(R,U,M){let j=0,Q=U;const oe={match:!1,pathIndex:0,commandIndex:0};for(;Q<R.segments.length;){if(j>=M.length)return oe;const be=R.segments[Q],dt=M[j];if(rn(dt))break;const Je=`${dt}`,Pt=j<M.length-1?M[j+1]:null;if(Q>0&&void 0===Je)break;if(Je&&Pt&&"object"==typeof Pt&&void 0===Pt.outlets){if(!hc(Je,Pt,be))return oe;j+=2}else{if(!hc(Je,{},be))return oe;j++}Q++}return{match:!0,pathIndex:Q,commandIndex:j}}(R,U,M),Q=M.slice(j.commandIndex);if(j.match&&j.pathIndex<R.segments.length){const oe=new Er(R.segments.slice(0,j.pathIndex),{});return oe.children[An]=new Er(R.segments.slice(j.pathIndex),R.children),bs(oe,0,Q)}return j.match&&0===Q.length?new Er(R.segments,{}):j.match&&!R.hasChildren()?ca(R,U,M):j.match?bs(R,0,Q):ca(R,U,M)}function bs(R,U,M){if(0===M.length)return new Er(R.segments,{});{const j=function Xr(R){return rn(R[0])?R[0].outlets:{[An]:R}}(M),Q={};if(Object.keys(j).some(oe=>oe!==An)&&R.children[An]&&1===R.numberOfChildren&&0===R.children[An].segments.length){const oe=bs(R.children[An],U,M);return new Er(R.segments,oe.children)}return Object.entries(j).forEach(([oe,be])=>{"string"==typeof be&&(be=[be]),null!==be&&(Q[oe]=$a(R.children[oe],U,be))}),Object.entries(R.children).forEach(([oe,be])=>{void 0===j[oe]&&(Q[oe]=be)}),new Er(R.segments,Q)}}function ca(R,U,M){const j=R.segments.slice(0,U);let Q=0;for(;Q<M.length;){const oe=M[Q];if(rn(oe)){const Je=Lu(oe.outlets);return new Er(j,Je)}if(0===Q&&xt(M[0])){j.push(new ri(R.segments[U].path,fc(M[0]))),Q++;continue}const be=rn(oe)?oe.outlets[An]:`${oe}`,dt=Q<M.length-1?M[Q+1]:null;be&&dt&&xt(dt)?(j.push(new ri(be,fc(dt))),Q+=2):(j.push(new ri(be,{})),Q++)}return new Er(j,{})}function Lu(R){const U={};return Object.entries(R).forEach(([M,j])=>{"string"==typeof j&&(j=[j]),null!==j&&(U[M]=ca(new Er([],{}),0,j))}),U}function fc(R){const U={};return Object.entries(R).forEach(([M,j])=>U[M]=`${j}`),U}function hc(R,U,M){return R==M.path&&Yn(U,M.parameters)}const Ts="imperative";var Bn=function(R){return R[R.NavigationStart=0]="NavigationStart",R[R.NavigationEnd=1]="NavigationEnd",R[R.NavigationCancel=2]="NavigationCancel",R[R.NavigationError=3]="NavigationError",R[R.RoutesRecognized=4]="RoutesRecognized",R[R.ResolveStart=5]="ResolveStart",R[R.ResolveEnd=6]="ResolveEnd",R[R.GuardsCheckStart=7]="GuardsCheckStart",R[R.GuardsCheckEnd=8]="GuardsCheckEnd",R[R.RouteConfigLoadStart=9]="RouteConfigLoadStart",R[R.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",R[R.ChildActivationStart=11]="ChildActivationStart",R[R.ChildActivationEnd=12]="ChildActivationEnd",R[R.ActivationStart=13]="ActivationStart",R[R.ActivationEnd=14]="ActivationEnd",R[R.Scroll=15]="Scroll",R[R.NavigationSkipped=16]="NavigationSkipped",R}(Bn||{});class lo{constructor(U,M){this.id=U,this.url=M}}class bo extends lo{constructor(U,M,j="imperative",Q=null){super(U,M),this.type=Bn.NavigationStart,this.navigationTrigger=j,this.restoredState=Q}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zo extends lo{constructor(U,M,j){super(U,M),this.urlAfterRedirects=j,this.type=Bn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ro=function(R){return R[R.Redirect=0]="Redirect",R[R.SupersededByNewNavigation=1]="SupersededByNewNavigation",R[R.NoDataFromResolver=2]="NoDataFromResolver",R[R.GuardRejected=3]="GuardRejected",R}(ro||{}),Ar=function(R){return R[R.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",R[R.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",R}(Ar||{});class as extends lo{constructor(U,M,j,Q){super(U,M),this.reason=j,this.code=Q,this.type=Bn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yi extends lo{constructor(U,M,j,Q){super(U,M),this.reason=j,this.code=Q,this.type=Bn.NavigationSkipped}}class Wn extends lo{constructor(U,M,j,Q){super(U,M),this.error=j,this.target=Q,this.type=Bn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ua extends lo{constructor(U,M,j,Q){super(U,M),this.urlAfterRedirects=j,this.state=Q,this.type=Bn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qi extends lo{constructor(U,M,j,Q){super(U,M),this.urlAfterRedirects=j,this.state=Q,this.type=Bn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ri extends lo{constructor(U,M,j,Q,oe){super(U,M),this.urlAfterRedirects=j,this.state=Q,this.shouldActivate=oe,this.type=Bn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class js extends lo{constructor(U,M,j,Q){super(U,M),this.urlAfterRedirects=j,this.state=Q,this.type=Bn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bl extends lo{constructor(U,M,j,Q){super(U,M),this.urlAfterRedirects=j,this.state=Q,this.type=Bn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vi{constructor(U){this.route=U,this.type=Bn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bo{constructor(U){this.route=U,this.type=Bn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jo{constructor(U){this.snapshot=U,this.type=Bn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mi{constructor(U){this.snapshot=U,this.type=Bn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(U){this.snapshot=U,this.type=Bn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fc{constructor(U){this.snapshot=U,this.type=Bn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class la{constructor(U,M,j){this.routerEvent=U,this.position=M,this.anchor=j,this.type=Bn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class To{}class na{constructor(U,M){this.url=U,this.navigationBehaviorOptions=M}}class cs{constructor(U){this.injector=U,this.outlet=null,this.route=null,this.children=new Hs(this.injector),this.attachRef=null}}let Hs=(()=>{class R{constructor(M){this.parentInjector=M,this.contexts=new Map}onChildOutletCreated(M,j){const Q=this.getOrCreateContext(M);Q.outlet=j,this.contexts.set(M,Q)}onChildOutletDestroyed(M){const j=this.getContext(M);j&&(j.outlet=null,j.attachRef=null)}onOutletDeactivated(){const M=this.contexts;return this.contexts=new Map,M}onOutletReAttached(M){this.contexts=M}getOrCreateContext(M){let j=this.getContext(M);return j||(j=new cs(this.parentInjector),this.contexts.set(M,j)),j}getContext(M){return this.contexts.get(M)||null}static#e=this.\u0275fac=function(j){return new(j||R)(T.KVO(T.uvJ))};static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();class Ss{constructor(U){this._root=U}get root(){return this._root.value}parent(U){const M=this.pathFromRoot(U);return M.length>1?M[M.length-2]:null}children(U){const M=io(U,this._root);return M?M.children.map(j=>j.value):[]}firstChild(U){const M=io(U,this._root);return M&&M.children.length>0?M.children[0].value:null}siblings(U){const M=Ds(U,this._root);return M.length<2?[]:M[M.length-2].children.map(Q=>Q.value).filter(Q=>Q!==U)}pathFromRoot(U){return Ds(U,this._root).map(M=>M.value)}}function io(R,U){if(R===U.value)return U;for(const M of U.children){const j=io(R,M);if(j)return j}return null}function Ds(R,U){if(R===U.value)return[U];for(const M of U.children){const j=Ds(R,M);if(j.length)return j.unshift(U),j}return[]}class Ki{constructor(U,M){this.value=U,this.children=M}toString(){return`TreeNode(${this.value})`}}function us(R){const U={};return R&&R.children.forEach(M=>U[M.value.outlet]=M),U}class fa extends Ss{constructor(U,M){super(U),this.snapshot=M,fo(this,U)}toString(){return this.snapshot.toString()}}function Sa(R){const U=function pc(R){const oe=new ls([],{},{},"",{},An,R,null,{});return new hu("",new Ki(oe,[]))}(R),M=new Et.t([new ri("",{})]),j=new Et.t({}),Q=new Et.t({}),oe=new Et.t({}),be=new Et.t(""),dt=new Hi(M,j,oe,be,Q,An,R,U.root);return dt.snapshot=U.root,new fa(new Ki(dt,[]),U)}class Hi{constructor(U,M,j,Q,oe,be,dt,Je){this.urlSubject=U,this.paramsSubject=M,this.queryParamsSubject=j,this.fragmentSubject=Q,this.dataSubject=oe,this.outlet=be,this.component=dt,this._futureSnapshot=Je,this.title=this.dataSubject?.pipe((0,Xe.T)(Pt=>Pt[pr]))??(0,Ke.of)(void 0),this.url=U,this.params=M,this.queryParams=j,this.fragment=Q,this.data=oe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Xe.T)(U=>wn(U))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Xe.T)(U=>wn(U))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gs(R,U,M="emptyOnly"){let j;const{routeConfig:Q}=R;return j=null===U||"always"!==M&&""!==Q?.path&&(U.component||U.routeConfig?.loadComponent)?{params:{...R.params},data:{...R.data},resolve:{...R.data,...R._resolvedData??{}}}:{params:{...U.params,...R.params},data:{...U.data,...R.data},resolve:{...R.data,...U.data,...Q?.data,...R._resolvedData}},Q&&xo(Q)&&(j.resolve[pr]=Q.title),j}class ls{get title(){return this.data?.[pr]}constructor(U,M,j,Q,oe,be,dt,Je,Pt){this.url=U,this.params=M,this.queryParams=j,this.fragment=Q,this.data=oe,this.outlet=be,this.component=dt,this.routeConfig=Je,this._resolve=Pt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wn(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(j=>j.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hu extends Ss{constructor(U,M){super(M),this.url=U,fo(this,M)}toString(){return za(this._root)}}function fo(R,U){U.value._routerState=R,U.children.forEach(M=>fo(R,M))}function za(R){const U=R.children.length>0?` { ${R.children.map(za).join(", ")} } `:"";return`${R.value}${U}`}function es(R){if(R.snapshot){const U=R.snapshot,M=R._futureSnapshot;R.snapshot=M,Yn(U.queryParams,M.queryParams)||R.queryParamsSubject.next(M.queryParams),U.fragment!==M.fragment&&R.fragmentSubject.next(M.fragment),Yn(U.params,M.params)||R.paramsSubject.next(M.params),function ai(R,U){if(R.length!==U.length)return!1;for(let M=0;M<R.length;++M)if(!Yn(R[M],U[M]))return!1;return!0}(U.url,M.url)||R.urlSubject.next(M.url),Yn(U.data,M.data)||R.dataSubject.next(M.data)}else R.snapshot=R._futureSnapshot,R.dataSubject.next(R._futureSnapshot.data)}function ha(R,U){const M=Yn(R.params,U.params)&&function zi(R,U){return Wi(R,U)&&R.every((M,j)=>Yn(M.parameters,U[j].parameters))}(R.url,U.url);return M&&!(!R.parent!=!U.parent)&&(!R.parent||ha(R.parent,U.parent))}function xo(R){return"string"==typeof R.title||null===R.title}let Da=(()=>{class R{constructor(){this.activated=null,this._activatedRoute=null,this.name=An,this.activateEvents=new T.bkB,this.deactivateEvents=new T.bkB,this.attachEvents=new T.bkB,this.detachEvents=new T.bkB,this.parentContexts=(0,T.WQX)(Hs),this.location=(0,T.WQX)(T.c1b),this.changeDetector=(0,T.WQX)(T.gRc),this.inputBinder=(0,T.WQX)(Uo,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(M){if(M.name){const{firstChange:j,previousValue:Q}=M.name;if(j)return;this.isTrackedInParentContexts(Q)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(Q)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(M){return this.parentContexts.getContext(M)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const M=this.parentContexts.getContext(this.name);M?.route&&(M.attachRef?this.attach(M.attachRef,M.route):this.activateWith(M.route,M.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T.wOt(4012,!1);this.location.detach();const M=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(M.instance),M}attach(M,j){this.activated=M,this._activatedRoute=j,this.location.insert(M.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(M.instance)}deactivate(){if(this.activated){const M=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(M)}}activateWith(M,j){if(this.isActivated)throw new T.wOt(4013,!1);this._activatedRoute=M;const Q=this.location,be=M.snapshot.component,dt=this.parentContexts.getOrCreateContext(this.name).children,Je=new Wa(M,dt,Q.injector);this.activated=Q.createComponent(be,{index:Q.length,injector:Je,environmentInjector:j}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275dir=T.FsC({type:R,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[T.OA$]})}return R})();class Wa{__ngOutletInjector(U){return new Wa(this.route,this.childContexts,U)}constructor(U,M,j){this.route=U,this.childContexts=M,this.parent=j}get(U,M){return U===Hi?this.route:U===Hs?this.childContexts:this.parent.get(U,M)}}const Uo=new T.nKC("");let ho=(()=>{class R{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(M){this.unsubscribeFromRouteData(M),this.subscribeToRouteData(M)}unsubscribeFromRouteData(M){this.outletDataSubscriptions.get(M)?.unsubscribe(),this.outletDataSubscriptions.delete(M)}subscribeToRouteData(M){const{activatedRoute:j}=M,Q=(0,rt.z)([j.queryParams,j.params,j.data]).pipe((0,Vn.n)(([oe,be,dt],Je)=>(dt={...oe,...be,...dt},0===Je?(0,Ke.of)(dt):Promise.resolve(dt)))).subscribe(oe=>{if(!M.isActivated||!M.activatedComponentRef||M.activatedRoute!==j||null===j.component)return void this.unsubscribeFromRouteData(M);const be=(0,T.HJs)(j.component);if(be)for(const{templateName:dt}of be.inputs)M.activatedComponentRef.setInput(dt,oe[dt]);else this.unsubscribeFromRouteData(M)});this.outletDataSubscriptions.set(M,Q)}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac})}return R})();function Qr(R,U,M){if(M&&R.shouldReuseRoute(U.value,M.value.snapshot)){const j=M.value;j._futureSnapshot=U.value;const Q=function Eo(R,U,M){return U.children.map(j=>{for(const Q of M.children)if(R.shouldReuseRoute(j.value,Q.value.snapshot))return Qr(R,j,Q);return Qr(R,j)})}(R,U,M);return new Ki(j,Q)}{if(R.shouldAttach(U.value)){const oe=R.retrieve(U.value);if(null!==oe){const be=oe.route;return be.value._futureSnapshot=U.value,be.children=U.children.map(dt=>Qr(R,dt)),be}}const j=function Vu(R){return new Hi(new Et.t(R.url),new Et.t(R.params),new Et.t(R.queryParams),new Et.t(R.fragment),new Et.t(R.data),R.outlet,R.component,R)}(U.value),Q=U.children.map(oe=>Qr(R,oe));return new Ki(j,Q)}}class pa{constructor(U,M){this.redirectTo=U,this.navigationBehaviorOptions=M}}const gc="ngNavigationCancelingError";function qa(R,U){const{redirectTo:M,navigationBehaviorOptions:j}=As(U)?{redirectTo:U,navigationBehaviorOptions:void 0}:U,Q=on(!1,ro.Redirect);return Q.url=M,Q.navigationBehaviorOptions=j,Q}function on(R,U){const M=new Error(`NavigationCancelingError: ${R||""}`);return M[gc]=!0,M.cancellationCode=U,M}function hr(R){return!!R&&R[gc]}let $s=(()=>{class R{static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275cmp=T.VBU({type:R,selectors:[["ng-component"]],standalone:!0,features:[T.aNF],decls:1,vars:0,template:function(j,Q){1&j&&T.nrm(0,"router-outlet")},dependencies:[Da],encapsulation:2})}return R})();function ma(R){const U=R.children&&R.children.map(ma),M=U?{...R,children:U}:{...R};return!M.component&&!M.loadComponent&&(U||M.loadChildren)&&M.outlet&&M.outlet!==An&&(M.component=$s),M}function so(R){return R.outlet||An}function _a(R){if(!R)return null;if(R.routeConfig?._injector)return R.routeConfig._injector;for(let U=R.parent;U;U=U.parent){const M=U.routeConfig;if(M?._loadedInjector)return M._loadedInjector;if(M?._injector)return M._injector}return null}class Bc{constructor(U,M,j,Q,oe){this.routeReuseStrategy=U,this.futureState=M,this.currState=j,this.forwardEvent=Q,this.inputBindingEnabled=oe}activate(U){const M=this.futureState._root,j=this.currState?this.currState._root:null;this.deactivateChildRoutes(M,j,U),es(this.futureState.root),this.activateChildRoutes(M,j,U)}deactivateChildRoutes(U,M,j){const Q=us(M);U.children.forEach(oe=>{const be=oe.value.outlet;this.deactivateRoutes(oe,Q[be],j),delete Q[be]}),Object.values(Q).forEach(oe=>{this.deactivateRouteAndItsChildren(oe,j)})}deactivateRoutes(U,M,j){const Q=U.value,oe=M?M.value:null;if(Q===oe)if(Q.component){const be=j.getContext(Q.outlet);be&&this.deactivateChildRoutes(U,M,be.children)}else this.deactivateChildRoutes(U,M,j);else oe&&this.deactivateRouteAndItsChildren(M,j)}deactivateRouteAndItsChildren(U,M){U.value.component&&this.routeReuseStrategy.shouldDetach(U.value.snapshot)?this.detachAndStoreRouteSubtree(U,M):this.deactivateRouteAndOutlet(U,M)}detachAndStoreRouteSubtree(U,M){const j=M.getContext(U.value.outlet),Q=j&&U.value.component?j.children:M,oe=us(U);for(const be of Object.values(oe))this.deactivateRouteAndItsChildren(be,Q);if(j&&j.outlet){const be=j.outlet.detach(),dt=j.children.onOutletDeactivated();this.routeReuseStrategy.store(U.value.snapshot,{componentRef:be,route:U,contexts:dt})}}deactivateRouteAndOutlet(U,M){const j=M.getContext(U.value.outlet),Q=j&&U.value.component?j.children:M,oe=us(U);for(const be of Object.values(oe))this.deactivateRouteAndItsChildren(be,Q);j&&(j.outlet&&(j.outlet.deactivate(),j.children.onOutletDeactivated()),j.attachRef=null,j.route=null)}activateChildRoutes(U,M,j){const Q=us(M);U.children.forEach(oe=>{this.activateRoutes(oe,Q[oe.value.outlet],j),this.forwardEvent(new Fc(oe.value.snapshot))}),U.children.length&&this.forwardEvent(new Mi(U.value.snapshot))}activateRoutes(U,M,j){const Q=U.value,oe=M?M.value:null;if(es(Q),Q===oe)if(Q.component){const be=j.getOrCreateContext(Q.outlet);this.activateChildRoutes(U,M,be.children)}else this.activateChildRoutes(U,M,j);else if(Q.component){const be=j.getOrCreateContext(Q.outlet);if(this.routeReuseStrategy.shouldAttach(Q.snapshot)){const dt=this.routeReuseStrategy.retrieve(Q.snapshot);this.routeReuseStrategy.store(Q.snapshot,null),be.children.onOutletReAttached(dt.contexts),be.attachRef=dt.componentRef,be.route=dt.route.value,be.outlet&&be.outlet.attach(dt.componentRef,dt.route.value),es(dt.route.value),this.activateChildRoutes(U,null,be.children)}else{const dt=_a(Q.snapshot);be.attachRef=null,be.route=Q,be.injector=dt??be.injector,be.outlet&&be.outlet.activateWith(Q,be.injector),this.activateChildRoutes(U,null,be.children)}}else this.activateChildRoutes(U,null,j)}}class Tr{constructor(U){this.path=U,this.route=this.path[this.path.length-1]}}class jo{constructor(U,M){this.component=U,this.route=M}}function al(R,U,M){const j=R._root;return Fn(j,U?U._root:null,M,[j.value])}function Ho(R,U){const M=Symbol(),j=U.get(R,M);return j===M?"function"!=typeof R||(0,T.LfX)(R)?U.get(R):R:j}function Fn(R,U,M,j,Q={canDeactivateChecks:[],canActivateChecks:[]}){const oe=us(U);return R.children.forEach(be=>{(function Oa(R,U,M,j,Q={canDeactivateChecks:[],canActivateChecks:[]}){const oe=R.value,be=U?U.value:null,dt=M?M.getContext(R.value.outlet):null;if(be&&oe.routeConfig===be.routeConfig){const Je=function Xi(R,U,M){if("function"==typeof M)return M(R,U);switch(M){case"pathParamsChange":return!Wi(R.url,U.url);case"pathParamsOrQueryParamsChange":return!Wi(R.url,U.url)||!Yn(R.queryParams,U.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ha(R,U)||!Yn(R.queryParams,U.queryParams);default:return!ha(R,U)}}(be,oe,oe.routeConfig.runGuardsAndResolvers);Je?Q.canActivateChecks.push(new Tr(j)):(oe.data=be.data,oe._resolvedData=be._resolvedData),Fn(R,U,oe.component?dt?dt.children:null:M,j,Q),Je&&dt&&dt.outlet&&dt.outlet.isActivated&&Q.canDeactivateChecks.push(new jo(dt.outlet.component,be))}else be&&Pa(U,dt,Q),Q.canActivateChecks.push(new Tr(j)),Fn(R,null,oe.component?dt?dt.children:null:M,j,Q)})(be,oe[be.value.outlet],M,j.concat([be.value]),Q),delete oe[be.value.outlet]}),Object.entries(oe).forEach(([be,dt])=>Pa(dt,M.getContext(be),Q)),Q}function Pa(R,U,M){const j=us(R),Q=R.value;Object.entries(j).forEach(([oe,be])=>{Pa(be,Q.component?U?U.children.getContext(oe):null:U,M)}),M.canDeactivateChecks.push(new jo(Q.component&&U&&U.outlet&&U.outlet.isActivated?U.outlet.component:null,Q))}function Go(R){return"function"==typeof R}function Y(R){return R instanceof Ae||"EmptyError"===R?.name}const Z=Symbol("INITIAL_VALUE");function H(){return(0,Vn.n)(R=>(0,rt.z)(R.map(U=>U.pipe(xn(1),(0,Bt.Z)(Z)))).pipe((0,Xe.T)(U=>{for(const M of U)if(!0!==M){if(M===Z)return Z;if(!1===M||se(M))return M}return!0}),Mn(U=>U!==Z),xn(1)))}function se(R){return As(R)||R instanceof pa}function Ms(R){return(0,It.F)((0,Ne.M)(U=>{if("boolean"!=typeof U)throw qa(0,U)}),(0,Xe.T)(U=>!0===U))}class fs{constructor(U){this.segmentGroup=U||null}}class Ka extends Error{constructor(U){super(),this.urlTree=U}}function fn(R){return Mt(new fs(R))}class Sd{constructor(U,M){this.urlSerializer=U,this.urlTree=M}lineralizeSegments(U,M){let j=[],Q=M.root;for(;;){if(j=j.concat(Q.segments),0===Q.numberOfChildren)return(0,Ke.of)(j);if(Q.numberOfChildren>1||!Q.children[An])return Mt(new T.wOt(4e3,!1));Q=Q.children[An]}}applyRedirectCommands(U,M,j,Q,oe){if("string"!=typeof M){const dt=M,{queryParams:Je,fragment:Pt,routeConfig:pn,url:En,outlet:xr,params:sr,data:rs,title:Ea}=Q,Ps=(0,T.N4e)(oe,()=>dt({params:sr,data:rs,queryParams:Je,fragment:Pt,routeConfig:pn,url:En,outlet:xr,title:Ea}));if(Ps instanceof jn)throw new Ka(Ps);M=Ps}const be=this.applyRedirectCreateUrlTree(M,this.urlSerializer.parse(M),U,j);if("/"===M[0])throw new Ka(be);return be}applyRedirectCreateUrlTree(U,M,j,Q){const oe=this.createSegmentGroup(U,M.root,j,Q);return new jn(oe,this.createQueryParams(M.queryParams,this.urlTree.queryParams),M.fragment)}createQueryParams(U,M){const j={};return Object.entries(U).forEach(([Q,oe])=>{if("string"==typeof oe&&":"===oe[0]){const dt=oe.substring(1);j[Q]=M[dt]}else j[Q]=oe}),j}createSegmentGroup(U,M,j,Q){const oe=this.createSegments(U,M.segments,j,Q);let be={};return Object.entries(M.children).forEach(([dt,Je])=>{be[dt]=this.createSegmentGroup(U,Je,j,Q)}),new Er(oe,be)}createSegments(U,M,j,Q){return M.map(oe=>":"===oe.path[0]?this.findPosParam(U,oe,Q):this.findOrReturn(oe,j))}findPosParam(U,M,j){const Q=j[M.path.substring(1)];if(!Q)throw new T.wOt(4001,!1);return Q}findOrReturn(U,M){let j=0;for(const Q of M){if(Q.path===U.path)return M.splice(j),Q;j++}return U}}const li={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ar(R,U,M,j,Q){const oe=Xa(R,U,M);return oe.matched?(j=function Ra(R,U){return R.providers&&!R._injector&&(R._injector=(0,T.Ol2)(R.providers,U,`Route: ${R.path}`)),R._injector??U}(U,j),function Zr(R,U,M,j){const Q=U.canMatch;if(!Q||0===Q.length)return(0,Ke.of)(!0);const oe=Q.map(be=>{const dt=Ho(be,R);return Jn(function cl(R){return R&&Go(R.canMatch)}(dt)?dt.canMatch(U,M):(0,T.N4e)(R,()=>dt(U,M)))});return(0,Ke.of)(oe).pipe(H(),Ms())}(j,U,M).pipe((0,Xe.T)(be=>!0===be?oe:{...li}))):(0,Ke.of)(oe)}function Xa(R,U,M){if("**"===U.path)return function ul(R){return{matched:!0,parameters:R.length>0?Ft(R).parameters:{},consumedSegments:R,remainingSegments:[],positionalParamSegments:{}}}(M);if(""===U.path)return"full"===U.pathMatch&&(R.hasChildren()||M.length>0)?{...li}:{matched:!0,consumedSegments:[],remainingSegments:M,parameters:{},positionalParamSegments:{}};const Q=(U.matcher||Br)(M,R,U);if(!Q)return{...li};const oe={};Object.entries(Q.posParams??{}).forEach(([dt,Je])=>{oe[dt]=Je.path});const be=Q.consumed.length>0?{...oe,...Q.consumed[Q.consumed.length-1].parameters}:oe;return{matched:!0,consumedSegments:Q.consumed,remainingSegments:M.slice(Q.consumed.length),parameters:be,positionalParamSegments:Q.posParams??{}}}function Ur(R,U,M,j){return M.length>0&&function yc(R,U,M){return M.some(j=>ia(R,U,j)&&so(j)!==An)}(R,M,j)?{segmentGroup:new Er(U,Uu(j,new Er(M,R.children))),slicedSegments:[]}:0===M.length&&function mu(R,U,M){return M.some(j=>ia(R,U,j))}(R,M,j)?{segmentGroup:new Er(R.segments,ll(R,M,j,R.children)),slicedSegments:M}:{segmentGroup:new Er(R.segments,R.children),slicedSegments:M}}function ll(R,U,M,j){const Q={};for(const oe of M)if(ia(R,U,oe)&&!j[so(oe)]){const be=new Er([],{});Q[so(oe)]=be}return{...j,...Q}}function Uu(R,U){const M={};M[An]=U;for(const j of R)if(""===j.path&&so(j)!==An){const Q=new Er([],{});M[so(j)]=Q}return M}function ia(R,U,M){return(!(R.hasChildren()||U.length>0)||"full"!==M.pathMatch)&&""===M.path}class Ec{}class cr{constructor(U,M,j,Q,oe,be,dt){this.injector=U,this.configLoader=M,this.rootComponentType=j,this.config=Q,this.urlTree=oe,this.paramsInheritanceStrategy=be,this.urlSerializer=dt,this.applyRedirects=new Sd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(U){return new T.wOt(4002,`'${U.segmentGroup}'`)}recognize(){const U=Ur(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(U).pipe((0,Xe.T)(({children:M,rootSnapshot:j})=>{const Q=new Ki(j,M),oe=new hu("",Q),be=function du(R,U,M=null,j=null){return ze(vt(R),U,M,j)}(j,[],this.urlTree.queryParams,this.urlTree.fragment);return be.queryParams=this.urlTree.queryParams,oe.url=this.urlSerializer.serialize(be),{state:oe,tree:be}}))}match(U){const M=new ls([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),An,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,U,An,M).pipe((0,Xe.T)(j=>({children:j,rootSnapshot:M})),pe(j=>{if(j instanceof Ka)return this.urlTree=j.urlTree,this.match(j.urlTree.root);throw j instanceof fs?this.noMatchError(j):j}))}processSegmentGroup(U,M,j,Q,oe){return 0===j.segments.length&&j.hasChildren()?this.processChildren(U,M,j,oe):this.processSegment(U,M,j,j.segments,Q,!0,oe).pipe((0,Xe.T)(be=>be instanceof Ki?[be]:[]))}processChildren(U,M,j,Q){const oe=[];for(const be of Object.keys(j.children))"primary"===be?oe.unshift(be):oe.push(be);return(0,Ce.H)(oe).pipe(bt(be=>{const dt=j.children[be],Je=function Ei(R,U){const M=R.filter(j=>so(j)===U);return M.push(...R.filter(j=>so(j)!==U)),M}(M,be);return this.processSegmentGroup(U,Je,dt,be,Q)}),function _t(R,U){return(0,Tt.N)(function ye(R,U,M,j,Q){return(oe,be)=>{let dt=M,Je=U,Pt=0;oe.subscribe((0,Ct._)(be,pn=>{const En=Pt++;Je=dt?R(Je,pn,En):(dt=!0,pn),j&&be.next(Je)},Q&&(()=>{dt&&be.next(Je),be.complete()})))}}(R,U,arguments.length>=2,!0))}((be,dt)=>(be.push(...dt),be)),gt(null),function $n(R,U){const M=arguments.length>=2;return j=>j.pipe(R?Mn((Q,oe)=>R(Q,oe,j)):De.D,zt(1),M?gt(U):St(()=>new Ae))}(),(0,le.Z)(be=>{if(null===be)return fn(j);const dt=Na(be);return function Qa(R){R.sort((U,M)=>U.value.outlet===An?-1:M.value.outlet===An?1:U.value.outlet.localeCompare(M.value.outlet))}(dt),(0,Ke.of)(dt)}))}processSegment(U,M,j,Q,oe,be,dt){return(0,Ce.H)(M).pipe(bt(Je=>this.processSegmentAgainstRoute(Je._injector??U,M,Je,j,Q,oe,be,dt).pipe(pe(Pt=>{if(Pt instanceof fs)return(0,Ke.of)(null);throw Pt}))),Ve(Je=>!!Je),pe(Je=>{if(Y(Je))return function _u(R,U,M){return 0===U.length&&!R.children[M]}(j,Q,oe)?(0,Ke.of)(new Ec):fn(j);throw Je}))}processSegmentAgainstRoute(U,M,j,Q,oe,be,dt,Je){return function Ul(R,U,M,j){return!!(so(R)===j||j!==An&&ia(U,M,R))&&Xa(U,R,M).matched}(j,Q,oe,be)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(U,Q,j,oe,be,Je):this.allowRedirects&&dt?this.expandSegmentAgainstRouteUsingRedirect(U,Q,M,j,oe,be,Je):fn(Q):fn(Q)}expandSegmentAgainstRouteUsingRedirect(U,M,j,Q,oe,be,dt){const{matched:Je,parameters:Pt,consumedSegments:pn,positionalParamSegments:En,remainingSegments:xr}=Xa(M,Q,oe);if(!Je)return fn(M);"string"==typeof Q.redirectTo&&"/"===Q.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const sr=new ls(oe,Pt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kn(Q),so(Q),Q.component??Q._loadedComponent??null,Q,Or(Q)),rs=Gs(sr,dt,this.paramsInheritanceStrategy);sr.params=Object.freeze(rs.params),sr.data=Object.freeze(rs.data);const Ea=this.applyRedirects.applyRedirectCommands(pn,Q.redirectTo,En,sr,U);return this.applyRedirects.lineralizeSegments(Q,Ea).pipe((0,le.Z)(Ps=>this.processSegment(U,j,M,Ps.concat(xr),be,!1,dt)))}matchSegmentAgainstRoute(U,M,j,Q,oe,be){const dt=ar(M,j,Q,U);return"**"===j.path&&(M.children={}),dt.pipe((0,Vn.n)(Je=>Je.matched?this.getChildConfig(U=j._injector??U,j,Q).pipe((0,Vn.n)(({routes:Pt})=>{const pn=j._loadedInjector??U,{parameters:En,consumedSegments:xr,remainingSegments:sr}=Je,rs=new ls(xr,En,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kn(j),so(j),j.component??j._loadedComponent??null,j,Or(j)),Ea=Gs(rs,be,this.paramsInheritanceStrategy);rs.params=Object.freeze(Ea.params),rs.data=Object.freeze(Ea.data);const{segmentGroup:Ps,slicedSegments:zc}=Ur(M,xr,sr,Pt);if(0===zc.length&&Ps.hasChildren())return this.processChildren(pn,Pt,Ps,rs).pipe((0,Xe.T)(is=>new Ki(rs,is)));if(0===Pt.length&&0===zc.length)return(0,Ke.of)(new Ki(rs,[]));const Za=so(j)===oe;return this.processSegment(pn,Pt,Ps,zc,Za?An:oe,!0,rs).pipe((0,Xe.T)(is=>new Ki(rs,is instanceof Ki?[is]:[])))})):fn(M)))}getChildConfig(U,M,j){return M.children?(0,Ke.of)({routes:M.children,injector:U}):M.loadChildren?void 0!==M._loadedRoutes?(0,Ke.of)({routes:M._loadedRoutes,injector:M._loadedInjector}):function gu(R,U,M,j){const Q=U.canLoad;if(void 0===Q||0===Q.length)return(0,Ke.of)(!0);const oe=Q.map(be=>{const dt=Ho(be,R);return Jn(function Rs(R){return R&&Go(R.canLoad)}(dt)?dt.canLoad(U,M):(0,T.N4e)(R,()=>dt(U,M)))});return(0,Ke.of)(oe).pipe(H(),Ms())}(U,M,j).pipe((0,le.Z)(Q=>Q?this.configLoader.loadChildren(U,M).pipe((0,Ne.M)(oe=>{M._loadedRoutes=oe.routes,M._loadedInjector=oe.injector})):function tr(R){return Mt(on(!1,ro.GuardRejected))}())):(0,Ke.of)({routes:[],injector:U})}}function Ci(R){const U=R.value.routeConfig;return U&&""===U.path}function Na(R){const U=[],M=new Set;for(const j of R){if(!Ci(j)){U.push(j);continue}const Q=U.find(oe=>j.value.routeConfig===oe.value.routeConfig);void 0!==Q?(Q.children.push(...j.children),M.add(Q)):U.push(j)}for(const j of M){const Q=Na(j.children);U.push(new Ki(j.value,Q))}return U.filter(j=>!M.has(j))}function Kn(R){return R.data||{}}function Or(R){return R.resolve||{}}function _r(R){const U=R.children.map(M=>_r(M)).flat();return[R,...U]}function re(R){return(0,Vn.n)(U=>{const M=R(U);return M?(0,Ce.H)(M).pipe((0,Xe.T)(()=>U)):(0,Ke.of)(U)})}let W=(()=>{class R{buildTitle(M){let j,Q=M.root;for(;void 0!==Q;)j=this.getResolvedTitleForRoute(Q)??j,Q=Q.children.find(oe=>oe.outlet===An);return j}getResolvedTitleForRoute(M){return M.data[pr]}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=T.jDH({token:R,factory:()=>(0,T.WQX)(ne),providedIn:"root"})}return R})(),ne=(()=>{class R extends W{constructor(M){super(),this.title=M}updateTitle(M){const j=this.buildTitle(M);void 0!==j&&this.title.setTitle(j)}static#e=this.\u0275fac=function(j){return new(j||R)(T.KVO(qr.hE))};static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const we=new T.nKC("",{providedIn:"root",factory:()=>({})}),ut=new T.nKC("");let mt=(()=>{class R{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,T.WQX)(T.Ql9)}loadComponent(M){if(this.componentLoaders.get(M))return this.componentLoaders.get(M);if(M._loadedComponent)return(0,Ke.of)(M._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(M);const j=Jn(M.loadComponent()).pipe((0,Xe.T)($r),(0,Ne.M)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(M),M._loadedComponent=oe}),Qn(()=>{this.componentLoaders.delete(M)})),Q=new Ht(j,()=>new Xt.B).pipe(kt());return this.componentLoaders.set(M,Q),Q}loadChildren(M,j){if(this.childrenLoaders.get(j))return this.childrenLoaders.get(j);if(j._loadedRoutes)return(0,Ke.of)({routes:j._loadedRoutes,injector:j._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(j);const oe=function vn(R,U,M,j){return Jn(R.loadChildren()).pipe((0,Xe.T)($r),(0,le.Z)(Q=>Q instanceof T.Co$||Array.isArray(Q)?(0,Ke.of)(Q):(0,Ce.H)(U.compileModuleAsync(Q))),(0,Xe.T)(Q=>{j&&j(R);let oe,be,dt=!1;return Array.isArray(Q)?(be=Q,!0):(oe=Q.create(M).injector,be=oe.get(ut,[],{optional:!0,self:!0}).flat()),{routes:be.map(ma),injector:oe}}))}(j,this.compiler,M,this.onLoadEndListener).pipe(Qn(()=>{this.childrenLoaders.delete(j)})),be=new Ht(oe,()=>new Xt.B).pipe(kt());return this.childrenLoaders.set(j,be),be}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function $r(R){return function hn(R){return R&&"object"==typeof R&&"default"in R}(R)?R.default:R}let rr=(()=>{class R{static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=T.jDH({token:R,factory:()=>(0,T.WQX)(wr),providedIn:"root"})}return R})(),wr=(()=>{class R{shouldProcessUrl(M){return!0}extract(M){return M}merge(M,j){return M}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const dr=new T.nKC(""),We=new T.nKC("");function Qi(R,U,M){const j=R.get(We),Q=R.get(Qt.qQ);return R.get(T.SKi).runOutsideAngular(()=>{if(!Q.startViewTransition||j.skipNextTransition)return j.skipNextTransition=!1,new Promise(Pt=>setTimeout(Pt));let oe;const be=new Promise(Pt=>{oe=Pt}),dt=Q.startViewTransition(()=>(oe(),function ts(R){return new Promise(U=>{(0,T.mal)(U,{injector:R})})}(R))),{onViewTransitionCreated:Je}=j;return Je&&(0,T.N4e)(R,()=>Je({transition:dt,from:U,to:M})),be})}const ns=new T.nKC("");let Ro=(()=>{class R{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xt.B,this.transitionAbortSubject=new Xt.B,this.configLoader=(0,T.WQX)(mt),this.environmentInjector=(0,T.WQX)(T.uvJ),this.urlSerializer=(0,T.WQX)(ei),this.rootContexts=(0,T.WQX)(Hs),this.location=(0,T.WQX)(Qt.aZ),this.inputBindingEnabled=null!==(0,T.WQX)(Uo,{optional:!0}),this.titleStrategy=(0,T.WQX)(W),this.options=(0,T.WQX)(we,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,T.WQX)(rr),this.createViewTransition=(0,T.WQX)(dr,{optional:!0}),this.navigationErrorHandler=(0,T.WQX)(ns,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Ke.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=Q=>this.events.next(new Bo(Q)),this.configLoader.onLoadStartListener=Q=>this.events.next(new Vi(Q))}complete(){this.transitions?.complete()}handleNavigationRequest(M){const j=++this.navigationId;this.transitions?.next({...this.transitions.value,...M,id:j})}setupNavigations(M,j,Q){return this.transitions=new Et.t({id:0,currentUrlTree:j,currentRawUrl:j,extractedUrl:this.urlHandlingStrategy.extract(j),urlAfterRedirects:this.urlHandlingStrategy.extract(j),rawUrl:j,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ts,restoredState:null,currentSnapshot:Q.snapshot,targetSnapshot:null,currentRouterState:Q,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Mn(oe=>0!==oe.id),(0,Xe.T)(oe=>({...oe,extractedUrl:this.urlHandlingStrategy.extract(oe.rawUrl)})),(0,Vn.n)(oe=>{let be=!1,dt=!1;return(0,Ke.of)(oe).pipe((0,Vn.n)(Je=>{if(this.navigationId>oe.id)return this.cancelNavigationTransition(oe,"",ro.SupersededByNewNavigation),tn;this.currentTransition=oe,this.currentNavigation={id:Je.id,initialUrl:Je.rawUrl,extractedUrl:Je.extractedUrl,trigger:Je.source,extras:Je.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Pt=!M.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!Pt&&"reload"!==(Je.extras.onSameUrlNavigation??M.onSameUrlNavigation)){const En="";return this.events.next(new yi(Je.id,this.urlSerializer.serialize(Je.rawUrl),En,Ar.IgnoredSameUrlNavigation)),Je.resolve(!1),tn}if(this.urlHandlingStrategy.shouldProcessUrl(Je.rawUrl))return(0,Ke.of)(Je).pipe((0,Vn.n)(En=>{const xr=this.transitions?.getValue();return this.events.next(new bo(En.id,this.urlSerializer.serialize(En.extractedUrl),En.source,En.restoredState)),xr!==this.transitions?.getValue()?tn:Promise.resolve(En)}),function Zt(R,U,M,j,Q,oe){return(0,le.Z)(be=>function Jr(R,U,M,j,Q,oe,be="emptyOnly"){return new cr(R,U,M,j,Q,be,oe).recognize()}(R,U,M,j,be.extractedUrl,Q,oe).pipe((0,Xe.T)(({state:dt,tree:Je})=>({...be,targetSnapshot:dt,urlAfterRedirects:Je}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,M.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Ne.M)(En=>{oe.targetSnapshot=En.targetSnapshot,oe.urlAfterRedirects=En.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:En.urlAfterRedirects};const xr=new ua(En.id,this.urlSerializer.serialize(En.extractedUrl),this.urlSerializer.serialize(En.urlAfterRedirects),En.targetSnapshot);this.events.next(xr)}));if(Pt&&this.urlHandlingStrategy.shouldProcessUrl(Je.currentRawUrl)){const{id:En,extractedUrl:xr,source:sr,restoredState:rs,extras:Ea}=Je,Ps=new bo(En,this.urlSerializer.serialize(xr),sr,rs);this.events.next(Ps);const zc=Sa(this.rootComponentType).snapshot;return this.currentTransition=oe={...Je,targetSnapshot:zc,urlAfterRedirects:xr,extras:{...Ea,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=xr,(0,Ke.of)(oe)}{const En="";return this.events.next(new yi(Je.id,this.urlSerializer.serialize(Je.extractedUrl),En,Ar.IgnoredByUrlHandlingStrategy)),Je.resolve(!1),tn}}),(0,Ne.M)(Je=>{const Pt=new qi(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects),Je.targetSnapshot);this.events.next(Pt)}),(0,Xe.T)(Je=>(this.currentTransition=oe={...Je,guards:al(Je.targetSnapshot,Je.currentSnapshot,this.rootContexts)},oe)),function xe(R,U){return(0,le.Z)(M=>{const{targetSnapshot:j,currentSnapshot:Q,guards:{canActivateChecks:oe,canDeactivateChecks:be}}=M;return 0===be.length&&0===oe.length?(0,Ke.of)({...M,guardsResult:!0}):function Ot(R,U,M,j){return(0,Ce.H)(R).pipe((0,le.Z)(Q=>function Sn(R,U,M,j,Q){const oe=U&&U.routeConfig?U.routeConfig.canDeactivate:null;if(!oe||0===oe.length)return(0,Ke.of)(!0);const be=oe.map(dt=>{const Je=_a(U)??Q,Pt=Ho(dt,Je);return Jn(function Bu(R){return R&&Go(R.canDeactivate)}(Pt)?Pt.canDeactivate(R,U,M,j):(0,T.N4e)(Je,()=>Pt(R,U,M,j))).pipe(Ve())});return(0,Ke.of)(be).pipe(H())}(Q.component,Q.route,M,U,j)),Ve(Q=>!0!==Q,!0))}(be,j,Q,R).pipe((0,le.Z)(dt=>dt&&function Yr(R){return"boolean"==typeof R}(dt)?function qn(R,U,M,j){return(0,Ce.H)(U).pipe(bt(Q=>(0,Pe.x)(function va(R,U){return null!==R&&U&&U(new Jo(R)),(0,Ke.of)(!0)}(Q.route.parent,j),function $o(R,U){return null!==R&&U&&U(new xs(R)),(0,Ke.of)(!0)}(Q.route,j),function zs(R,U,M){const j=U[U.length-1],oe=U.slice(0,U.length-1).reverse().map(be=>function Uc(R){const U=R.routeConfig?R.routeConfig.canActivateChild:null;return U&&0!==U.length?{node:R,guards:U}:null}(be)).filter(be=>null!==be).map(be=>Ue(()=>{const dt=be.guards.map(Je=>{const Pt=_a(be.node)??M,pn=Ho(Je,Pt);return Jn(function So(R){return R&&Go(R.canActivateChild)}(pn)?pn.canActivateChild(j,R):(0,T.N4e)(Pt,()=>pn(j,R))).pipe(Ve())});return(0,Ke.of)(dt).pipe(H())}));return(0,Ke.of)(oe).pipe(H())}(R,Q.path,M),function Do(R,U,M){const j=U.routeConfig?U.routeConfig.canActivate:null;if(!j||0===j.length)return(0,Ke.of)(!0);const Q=j.map(oe=>Ue(()=>{const be=_a(U)??M,dt=Ho(oe,be);return Jn(function _c(R){return R&&Go(R.canActivate)}(dt)?dt.canActivate(U,R):(0,T.N4e)(be,()=>dt(U,R))).pipe(Ve())}));return(0,Ke.of)(Q).pipe(H())}(R,Q.route,M))),Ve(Q=>!0!==Q,!0))}(j,oe,R,U):(0,Ke.of)(dt)),(0,Xe.T)(dt=>({...M,guardsResult:dt})))})}(this.environmentInjector,Je=>this.events.next(Je)),(0,Ne.M)(Je=>{if(oe.guardsResult=Je.guardsResult,Je.guardsResult&&"boolean"!=typeof Je.guardsResult)throw qa(0,Je.guardsResult);const Pt=new Ri(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects),Je.targetSnapshot,!!Je.guardsResult);this.events.next(Pt)}),Mn(Je=>!!Je.guardsResult||(this.cancelNavigationTransition(Je,"",ro.GuardRejected),!1)),re(Je=>{if(Je.guards.canActivateChecks.length)return(0,Ke.of)(Je).pipe((0,Ne.M)(Pt=>{const pn=new js(Pt.id,this.urlSerializer.serialize(Pt.extractedUrl),this.urlSerializer.serialize(Pt.urlAfterRedirects),Pt.targetSnapshot);this.events.next(pn)}),(0,Vn.n)(Pt=>{let pn=!1;return(0,Ke.of)(Pt).pipe(function Dd(R,U){return(0,le.Z)(M=>{const{targetSnapshot:j,guards:{canActivateChecks:Q}}=M;if(!Q.length)return(0,Ke.of)(M);const oe=new Set(Q.map(Je=>Je.route)),be=new Set;for(const Je of oe)if(!be.has(Je))for(const Pt of _r(Je))be.add(Pt);let dt=0;return(0,Ce.H)(be).pipe(bt(Je=>oe.has(Je)?function Ah(R,U,M,j){const Q=R.routeConfig,oe=R._resolve;return void 0!==Q?.title&&!xo(Q)&&(oe[pr]=Q.title),function po(R,U,M,j){const Q=ln(R);if(0===Q.length)return(0,Ke.of)({});const oe={};return(0,Ce.H)(Q).pipe((0,le.Z)(be=>function F(R,U,M,j){const Q=_a(U)??j,oe=Ho(R,Q);return Jn(oe.resolve?oe.resolve(U,M):(0,T.N4e)(Q,()=>oe(U,M)))}(R[be],U,M,j).pipe(Ve(),(0,Ne.M)(dt=>{if(dt instanceof pa)throw qa(new Cr,dt);oe[be]=dt}))),zt(1),function nn(R){return(0,Xe.T)(()=>R)}(oe),pe(be=>Y(be)?tn:Mt(be)))}(oe,R,U,j).pipe((0,Xe.T)(be=>(R._resolvedData=be,R.data=Gs(R,R.parent,M).resolve,null)))}(Je,j,R,U):(Je.data=Gs(Je,Je.parent,R).resolve,(0,Ke.of)(void 0))),(0,Ne.M)(()=>dt++),zt(1),(0,le.Z)(Je=>dt===be.size?(0,Ke.of)(M):tn))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Ne.M)({next:()=>pn=!0,complete:()=>{pn||this.cancelNavigationTransition(Pt,"",ro.NoDataFromResolver)}}))}),(0,Ne.M)(Pt=>{const pn=new Bl(Pt.id,this.urlSerializer.serialize(Pt.extractedUrl),this.urlSerializer.serialize(Pt.urlAfterRedirects),Pt.targetSnapshot);this.events.next(pn)}))}),re(Je=>{const Pt=pn=>{const En=[];pn.routeConfig?.loadComponent&&!pn.routeConfig._loadedComponent&&En.push(this.configLoader.loadComponent(pn.routeConfig).pipe((0,Ne.M)(xr=>{pn.component=xr}),(0,Xe.T)(()=>{})));for(const xr of pn.children)En.push(...Pt(xr));return En};return(0,rt.z)(Pt(Je.targetSnapshot.root)).pipe(gt(null),xn(1))}),re(()=>this.afterPreactivation()),(0,Vn.n)(()=>{const{currentSnapshot:Je,targetSnapshot:Pt}=oe,pn=this.createViewTransition?.(this.environmentInjector,Je.root,Pt.root);return pn?(0,Ce.H)(pn).pipe((0,Xe.T)(()=>oe)):(0,Ke.of)(oe)}),(0,Xe.T)(Je=>{const Pt=function Lc(R,U,M){const j=Qr(R,U._root,M?M._root:void 0);return new fa(j,U)}(M.routeReuseStrategy,Je.targetSnapshot,Je.currentRouterState);return this.currentTransition=oe={...Je,targetRouterState:Pt},this.currentNavigation.targetRouterState=Pt,oe}),(0,Ne.M)(()=>{this.events.next(new To)}),((R,U,M,j)=>(0,Xe.T)(Q=>(new Bc(U,Q.targetRouterState,Q.currentRouterState,M,j).activate(R),Q)))(this.rootContexts,M.routeReuseStrategy,Je=>this.events.next(Je),this.inputBindingEnabled),xn(1),(0,Ne.M)({next:Je=>{be=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zo(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects))),this.titleStrategy?.updateTitle(Je.targetRouterState.snapshot),Je.resolve(!0)},complete:()=>{be=!0}}),function to(R){return(0,Tt.N)((U,M)=>{(0,pt.Tg)(R).subscribe((0,Ct._)(M,()=>M.complete(),jr.l)),!M.closed&&U.subscribe(M)})}(this.transitionAbortSubject.pipe((0,Ne.M)(Je=>{throw Je}))),Qn(()=>{!be&&!dt&&this.cancelNavigationTransition(oe,"",ro.SupersededByNewNavigation),this.currentTransition?.id===oe.id&&(this.currentNavigation=null,this.currentTransition=null)}),pe(Je=>{if(dt=!0,hr(Je))this.events.next(new as(oe.id,this.urlSerializer.serialize(oe.extractedUrl),Je.message,Je.cancellationCode)),function Zn(R){return hr(R)&&As(R.url)}(Je)?this.events.next(new na(Je.url,Je.navigationBehaviorOptions)):oe.resolve(!1);else{const Pt=new Wn(oe.id,this.urlSerializer.serialize(oe.extractedUrl),Je,oe.targetSnapshot??void 0);try{const pn=(0,T.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(Pt));if(pn instanceof pa){const{message:En,cancellationCode:xr}=qa(0,pn);this.events.next(new as(oe.id,this.urlSerializer.serialize(oe.extractedUrl),En,xr)),this.events.next(new na(pn.redirectTo,pn.navigationBehaviorOptions))}else{this.events.next(Pt);const En=M.errorHandler(Je);oe.resolve(!!En)}}catch(pn){this.options.resolveNavigationPromiseOnError?oe.resolve(!1):oe.reject(pn)}}return tn}))}))}cancelNavigationTransition(M,j,Q){const oe=new as(M.id,this.urlSerializer.serialize(M.extractedUrl),j,Q);this.events.next(oe),M.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function Ya(R){return R!==Ts}let Oi=(()=>{class R{static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=T.jDH({token:R,factory:()=>(0,T.WQX)(_n),providedIn:"root"})}return R})();class ya{shouldDetach(U){return!1}store(U,M){}shouldAttach(U){return!1}retrieve(U){return null}shouldReuseRoute(U,M){return U.routeConfig===M.routeConfig}}let _n=(()=>{class R extends ya{static#e=this.\u0275fac=(()=>{let M;return function(Q){return(M||(M=T.xGo(R)))(Q||R)}})();static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})(),hs=(()=>{class R{static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=T.jDH({token:R,factory:()=>(0,T.WQX)(Ws),providedIn:"root"})}return R})(),Ws=(()=>{class R extends hs{constructor(){super(...arguments),this.location=(0,T.WQX)(Qt.aZ),this.urlSerializer=(0,T.WQX)(ei),this.options=(0,T.WQX)(we,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,T.WQX)(rr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new jn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Sa(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(M){return this.location.subscribe(j=>{"popstate"===j.type&&M(j.url,j.state)})}handleRouterEvent(M,j){if(M instanceof bo)this.stateMemento=this.createStateMemento();else if(M instanceof yi)this.rawUrlTree=j.initialUrl;else if(M instanceof ua){if("eager"===this.urlUpdateStrategy&&!j.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(j.finalUrl,j.initialUrl);this.setBrowserUrl(Q,j)}}else M instanceof To?(this.currentUrlTree=j.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(j.finalUrl,j.initialUrl),this.routerState=j.targetRouterState,"deferred"===this.urlUpdateStrategy&&(j.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,j))):M instanceof as&&(M.code===ro.GuardRejected||M.code===ro.NoDataFromResolver)?this.restoreHistory(j):M instanceof Wn?this.restoreHistory(j,!0):M instanceof Zo&&(this.lastSuccessfulId=M.id,this.currentPageId=this.browserPageId)}setBrowserUrl(M,j){const Q=this.urlSerializer.serialize(M);if(this.location.isCurrentPathEqualTo(Q)||j.extras.replaceUrl){const be={...j.extras.state,...this.generateNgRouterState(j.id,this.browserPageId)};this.location.replaceState(Q,"",be)}else{const oe={...j.extras.state,...this.generateNgRouterState(j.id,this.browserPageId+1)};this.location.go(Q,"",oe)}}restoreHistory(M,j=!1){if("computed"===this.canceledNavigationResolution){const oe=this.currentPageId-this.browserPageId;0!==oe?this.location.historyGo(oe):this.currentUrlTree===M.finalUrl&&0===oe&&(this.resetState(M),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(j&&this.resetState(M),this.resetUrlToCurrentUrlTree())}resetState(M){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,M.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(M,j){return"computed"===this.canceledNavigationResolution?{navigationId:M,\u0275routerPageId:j}:{navigationId:M}}static#e=this.\u0275fac=(()=>{let M;return function(Q){return(M||(M=T.xGo(R)))(Q||R)}})();static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();var Mo=function(R){return R[R.COMPLETE=0]="COMPLETE",R[R.FAILED=1]="FAILED",R[R.REDIRECTING=2]="REDIRECTING",R}(Mo||{});function dl(R,U){R.events.pipe(Mn(M=>M instanceof Zo||M instanceof as||M instanceof Wn||M instanceof yi),(0,Xe.T)(M=>M instanceof Zo||M instanceof yi?Mo.COMPLETE:M instanceof as&&(M.code===ro.Redirect||M.code===ro.SupersededByNewNavigation)?Mo.REDIRECTING:Mo.FAILED),Mn(M=>M!==Mo.REDIRECTING),xn(1)).subscribe(()=>{U()})}function Rd(R){throw R}const Md={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ps={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let di=(()=>{class R{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,T.WQX)(T.H3F),this.stateManager=(0,T.WQX)(hs),this.options=(0,T.WQX)(we,{optional:!0})||{},this.pendingTasks=(0,T.WQX)(T.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,T.WQX)(Ro),this.urlSerializer=(0,T.WQX)(ei),this.location=(0,T.WQX)(Qt.aZ),this.urlHandlingStrategy=(0,T.WQX)(rr),this._events=new Xt.B,this.errorHandler=this.options.errorHandler||Rd,this.navigated=!1,this.routeReuseStrategy=(0,T.WQX)(Oi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,T.WQX)(ut,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,T.WQX)(Uo,{optional:!0}),this.eventsSubscription=new Tn.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:M=>{this.console.warn(M)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const M=this.navigationTransitions.events.subscribe(j=>{try{const Q=this.navigationTransitions.currentTransition,oe=this.navigationTransitions.currentNavigation;if(null!==Q&&null!==oe)if(this.stateManager.handleRouterEvent(j,oe),j instanceof as&&j.code!==ro.Redirect&&j.code!==ro.SupersededByNewNavigation)this.navigated=!0;else if(j instanceof Zo)this.navigated=!0;else if(j instanceof na){const be=j.navigationBehaviorOptions,dt=this.urlHandlingStrategy.merge(j.url,Q.currentRawUrl),Je={info:Q.extras.info,skipLocationChange:Q.extras.skipLocationChange,replaceUrl:Q.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Ya(Q.source),...be};this.scheduleNavigation(dt,Ts,null,Je,{resolve:Q.resolve,reject:Q.reject,promise:Q.promise})}(function oa(R){return!(R instanceof To||R instanceof na)})(j)&&this._events.next(j)}catch(Q){this.navigationTransitions.transitionAbortSubject.next(Q)}});this.eventsSubscription.add(M)}resetRootComponentType(M){this.routerState.root.component=M,this.navigationTransitions.rootComponentType=M}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ts,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((M,j)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(M,"popstate",j)},0)})}navigateToSyncWithBrowser(M,j,Q){const oe={replaceUrl:!0},be=Q?.navigationId?Q:null;if(Q){const Je={...Q};delete Je.navigationId,delete Je.\u0275routerPageId,0!==Object.keys(Je).length&&(oe.state=Je)}const dt=this.parseUrl(M);this.scheduleNavigation(dt,j,be,oe)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(M){this.config=M.map(ma),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(M,j={}){const{relativeTo:Q,queryParams:oe,fragment:be,queryParamsHandling:dt,preserveFragment:Je}=j,Pt=Je?this.currentUrlTree.fragment:be;let En,pn=null;switch(dt){case"merge":pn={...this.currentUrlTree.queryParams,...oe};break;case"preserve":pn=this.currentUrlTree.queryParams;break;default:pn=oe||null}null!==pn&&(pn=this.removeEmptyProps(pn));try{En=vt(Q?Q.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof M[0]||"/"!==M[0][0])&&(M=[]),En=this.currentUrlTree.root}return ze(En,M,pn,Pt??null)}navigateByUrl(M,j={skipLocationChange:!1}){const Q=As(M)?M:this.parseUrl(M),oe=this.urlHandlingStrategy.merge(Q,this.rawUrlTree);return this.scheduleNavigation(oe,Ts,null,j)}navigate(M,j={skipLocationChange:!1}){return function Od(R){for(let U=0;U<R.length;U++)if(null==R[U])throw new T.wOt(4008,!1)}(M),this.navigateByUrl(this.createUrlTree(M,j),j)}serializeUrl(M){return this.urlSerializer.serialize(M)}parseUrl(M){try{return this.urlSerializer.parse(M)}catch{return this.urlSerializer.parse("/")}}isActive(M,j){let Q;if(Q=!0===j?{...Md}:!1===j?{...ps}:j,As(M))return zr(this.currentUrlTree,M,Q);const oe=this.parseUrl(M);return zr(this.currentUrlTree,oe,Q)}removeEmptyProps(M){return Object.entries(M).reduce((j,[Q,oe])=>(null!=oe&&(j[Q]=oe),j),{})}scheduleNavigation(M,j,Q,oe,be){if(this.disposed)return Promise.resolve(!1);let dt,Je,Pt;be?(dt=be.resolve,Je=be.reject,Pt=be.promise):Pt=new Promise((En,xr)=>{dt=En,Je=xr});const pn=this.pendingTasks.add();return dl(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(pn))}),this.navigationTransitions.handleNavigationRequest({source:j,restoredState:Q,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:M,extras:oe,resolve:dt,reject:Je,promise:Pt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Pt.catch(En=>Promise.reject(En))}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})(),vu=(()=>{class R{constructor(M,j,Q,oe,be,dt){this.router=M,this.route=j,this.tabIndexAttribute=Q,this.renderer=oe,this.el=be,this.locationStrategy=dt,this.href=null,this.commands=null,this.onChanges=new Xt.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Je=be.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Je||"area"===Je,this.isAnchorElement?this.subscription=M.events.subscribe(Pt=>{Pt instanceof Zo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(M){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",M)}ngOnChanges(M){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(M){null!=M?(this.commands=Array.isArray(M)?M:[M],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(M,j,Q,oe,be){const dt=this.urlTree;return!!(null===dt||this.isAnchorElement&&(0!==M||j||Q||oe||be||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(dt,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const M=this.urlTree;this.href=null!==M&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(M)):null;const j=null===this.href?null:(0,T.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",j)}applyAttributeValue(M,j){const Q=this.renderer,oe=this.el.nativeElement;null!==j?Q.setAttribute(oe,M,j):Q.removeAttribute(oe,M)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(j){return new(j||R)(T.rXU(di),T.rXU(Hi),T.kS0("tabindex"),T.rXU(T.sFG),T.rXU(T.aKT),T.rXU(Qt.hb))};static#t=this.\u0275dir=T.FsC({type:R,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(j,Q){1&j&&T.bIt("click",function(be){return Q.onClick(be.button,be.ctrlKey,be.shiftKey,be.altKey,be.metaKey)}),2&j&&T.BMQ("target",Q.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",T.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",T.L39],replaceUrl:[2,"replaceUrl","replaceUrl",T.L39],routerLink:"routerLink"},standalone:!0,features:[T.GFd,T.OA$]})}return R})();class cn{}let Hu=(()=>{class R{constructor(M,j,Q,oe,be){this.router=M,this.injector=Q,this.preloadingStrategy=oe,this.loader=be}setUpPreloading(){this.subscription=this.router.events.pipe(Mn(M=>M instanceof Zo),bt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(M,j){const Q=[];for(const oe of j){oe.providers&&!oe._injector&&(oe._injector=(0,T.Ol2)(oe.providers,M,`Route: ${oe.path}`));const be=oe._injector??M,dt=oe._loadedInjector??be;(oe.loadChildren&&!oe._loadedRoutes&&void 0===oe.canLoad||oe.loadComponent&&!oe._loadedComponent)&&Q.push(this.preloadConfig(be,oe)),(oe.children||oe._loadedRoutes)&&Q.push(this.processRoutes(dt,oe.children??oe._loadedRoutes))}return(0,Ce.H)(Q).pipe((0,lr.U)())}preloadConfig(M,j){return this.preloadingStrategy.preload(j,()=>{let Q;Q=j.loadChildren&&void 0===j.canLoad?this.loader.loadChildren(M,j):(0,Ke.of)(null);const oe=Q.pipe((0,le.Z)(be=>null===be?(0,Ke.of)(void 0):(j._loadedRoutes=be.routes,j._loadedInjector=be.injector,this.processRoutes(be.injector??M,be.routes))));if(j.loadComponent&&!j._loadedComponent){const be=this.loader.loadComponent(j);return(0,Ce.H)([oe,be]).pipe((0,lr.U)())}return oe})}static#e=this.\u0275fac=function(j){return new(j||R)(T.KVO(di),T.KVO(T.Ql9),T.KVO(T.uvJ),T.KVO(cn),T.KVO(mt))};static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const wc=new T.nKC("");let Bi=(()=>{class R{constructor(M,j,Q,oe,be={}){this.urlSerializer=M,this.transitions=j,this.viewportScroller=Q,this.zone=oe,this.options=be,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,T.WQX)(T.uvJ),be.scrollPositionRestoration||="disabled",be.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(M=>{M instanceof bo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=M.navigationTrigger,this.restoredId=M.restoredState?M.restoredState.navigationId:0):M instanceof Zo?(this.lastId=M.id,this.scheduleScrollEvent(M,this.urlSerializer.parse(M.urlAfterRedirects).fragment)):M instanceof yi&&M.code===Ar.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(M,this.urlSerializer.parse(M.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(M=>{M instanceof la&&(M.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(M.position):M.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(M.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(M,j){var Q=this;this.zone.runOutsideAngular((0,D.A)(function*(){yield new Promise(oe=>{setTimeout(()=>{oe()}),(0,T.mal)(()=>{oe()},{injector:Q.environmentInjector})}),Q.zone.run(()=>{Q.transitions.events.next(new la(M,"popstate"===Q.lastSource?Q.store[Q.restoredId]:null,j))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(j){T.QTQ()};static#t=this.\u0275prov=T.jDH({token:R,factory:R.\u0275fac})}return R})();function Gu(R,...U){return(0,T.EmA)([{provide:ut,multi:!0,useValue:R},[],{provide:Hi,useFactory:yu,deps:[di]},{provide:T.iLQ,multi:!0,useFactory:$u},U.map(M=>M.\u0275providers)])}function yu(R){return R.routerState.root}function zo(R,U){return{\u0275kind:R,\u0275providers:U}}function $u(){const R=(0,T.WQX)(T.zZn);return U=>{const M=R.get(T.o8S);if(U!==M.components[0])return;const j=R.get(di),Q=R.get(pi);1===R.get(Pr)&&j.initialNavigation(),R.get(ka,null,T.$GK.Optional)?.setUpPreloading(),R.get(wc,null,T.$GK.Optional)?.init(),j.resetRootComponentType(M.componentTypes[0]),Q.closed||(Q.next(),Q.complete(),Q.unsubscribe())}}const pi=new T.nKC("",{factory:()=>new Xt.B}),Pr=new T.nKC("",{providedIn:"root",factory:()=>1}),ka=new T.nKC("");function gs(R){return zo(0,[{provide:ka,useExisting:Hu},{provide:cn,useExisting:R}])}function Ic(){return zo(8,[ho,{provide:Uo,useExisting:ho}])}function Wu(R){return zo(9,[{provide:dr,useValue:Qi},{provide:We,useValue:{skipNextTransition:!!R?.skipInitialTransition,...R}}])}const Ir=new T.nKC("ROUTER_FORROOT_GUARD"),fl=[Qt.aZ,{provide:ei,useClass:Cr},di,Hs,{provide:Hi,useFactory:yu,deps:[di]},mt,[]];let hl=(()=>{class R{constructor(M){}static forRoot(M,j){return{ngModule:R,providers:[fl,[],{provide:ut,multi:!0,useValue:M},{provide:Ir,useFactory:pl,deps:[[di,new T.Xx1,new T.kdw]]},{provide:we,useValue:j||{}},j?.useHash?{provide:Qt.hb,useClass:Qt.fw}:{provide:Qt.hb,useClass:Qt.Sm},{provide:wc,useFactory:()=>{const R=(0,T.WQX)(Qt.Xr),U=(0,T.WQX)(T.SKi),M=(0,T.WQX)(we),j=(0,T.WQX)(Ro),Q=(0,T.WQX)(ei);return M.scrollOffset&&R.setOffset(M.scrollOffset),new Bi(Q,j,R,U,M)}},j?.preloadingStrategy?gs(j.preloadingStrategy).\u0275providers:[],j?.initialNavigation?Va(j):[],j?.bindToComponentInputs?Ic().\u0275providers:[],j?.enableViewTransitions?Wu().\u0275providers:[],[{provide:Gl,useFactory:$u},{provide:T.iLQ,multi:!0,useExisting:Gl}]]}}static forChild(M){return{ngModule:R,providers:[{provide:ut,multi:!0,useValue:M}]}}static#e=this.\u0275fac=function(j){return new(j||R)(T.KVO(Ir,8))};static#t=this.\u0275mod=T.$C({type:R});static#n=this.\u0275inj=T.G2t({})}return R})();function pl(R){return"guarded"}function Va(R){return["disabled"===R.initialNavigation?zo(3,[{provide:T.hnV,multi:!0,useFactory:()=>{const U=(0,T.WQX)(di);return()=>{U.setUpLocationChangeListener()}}},{provide:Pr,useValue:2}]).\u0275providers:[],"enabledBlocking"===R.initialNavigation?zo(2,[{provide:Pr,useValue:0},{provide:T.hnV,multi:!0,deps:[T.zZn],useFactory:U=>{const M=U.get(Qt.hj,Promise.resolve());return()=>M.then(()=>new Promise(j=>{const Q=U.get(di),oe=U.get(pi);dl(Q,()=>{j(!0)}),U.get(Ro).afterPreactivation=()=>(j(!0),oe.closed?(0,Ke.of)(void 0):oe),Q.initialNavigation()}))}}]).\u0275providers:[]]}const Gl=new T.nKC("")},7852:(yn,wt,ie)=>{ie.d(wt,{MF:()=>ei,j6:()=>ci,xZ:()=>jn,om:()=>mi,Sx:()=>tt,Dk:()=>Te,Wp:()=>Cr,KO:()=>_e});var D=ie(467),T=ie(1362),L=ie(8041),Be=ie(1076);const Ze=(vt,ze)=>ze.some(xt=>vt instanceof xt);let Ce,Ke;const me=new WeakMap,Ae=new WeakMap,Pe=new WeakMap,pt=new WeakMap,Ue=new WeakMap;let tn={get(vt,ze,xt){if(vt instanceof IDBTransaction){if("done"===ze)return Ae.get(vt);if("objectStoreNames"===ze)return vt.objectStoreNames||Pe.get(vt);if("store"===ze)return xt.objectStoreNames[1]?void 0:xt.objectStore(xt.objectStoreNames[0])}return Tt(vt[ze])},set:(vt,ze,xt)=>(vt[ze]=xt,!0),has:(vt,ze)=>vt instanceof IDBTransaction&&("done"===ze||"store"===ze)||ze in vt};function Tn(vt){return"function"==typeof vt?function On(vt){return vt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function rt(){return Ke||(Ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(vt)?function(...ze){return vt.apply(Ct(this),ze),Tt(me.get(this))}:function(...ze){return Tt(vt.apply(Ct(this),ze))}:function(ze,...xt){const rn=vt.call(Ct(this),ze,...xt);return Pe.set(rn,ze.sort?ze.sort():[ze]),Tt(rn)}}(vt):(vt instanceof IDBTransaction&&function Mt(vt){if(Ae.has(vt))return;const ze=new Promise((xt,rn)=>{const Hn=()=>{vt.removeEventListener("complete",Pn),vt.removeEventListener("error",kn),vt.removeEventListener("abort",kn)},Pn=()=>{xt(),Hn()},kn=()=>{rn(vt.error||new DOMException("AbortError","AbortError")),Hn()};vt.addEventListener("complete",Pn),vt.addEventListener("error",kn),vt.addEventListener("abort",kn)});Ae.set(vt,ze)}(vt),Ze(vt,function Et(){return Ce||(Ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(vt,tn):vt)}function Tt(vt){if(vt instanceof IDBRequest)return function It(vt){const ze=new Promise((xt,rn)=>{const Hn=()=>{vt.removeEventListener("success",Pn),vt.removeEventListener("error",kn)},Pn=()=>{xt(Tt(vt.result)),Hn()},kn=()=>{rn(vt.error),Hn()};vt.addEventListener("success",Pn),vt.addEventListener("error",kn)});return ze.then(xt=>{xt instanceof IDBCursor&&me.set(xt,vt)}).catch(()=>{}),Ue.set(ze,vt),ze}(vt);if(pt.has(vt))return pt.get(vt);const ze=Tn(vt);return ze!==vt&&(pt.set(vt,ze),Ue.set(ze,vt)),ze}const Ct=vt=>Ue.get(vt),Xt=["get","getKey","getAll","getAllKeys","count"],Qt=["put","add","delete","clear"],Xe=new Map;function Vn(vt,ze){if(!(vt instanceof IDBDatabase)||ze in vt||"string"!=typeof ze)return;if(Xe.get(ze))return Xe.get(ze);const xt=ze.replace(/FromIndex$/,""),rn=ze!==xt,Hn=Qt.includes(xt);if(!(xt in(rn?IDBIndex:IDBObjectStore).prototype)||!Hn&&!Xt.includes(xt))return;const Pn=function(){var kn=(0,D.A)(function*(Rr,...Mr){const uo=this.transaction(Rr,Hn?"readwrite":"readonly");let Vo=uo.store;return rn&&(Vo=Vo.index(Mr.shift())),(yield Promise.all([Vo[xt](...Mr),Hn&&uo.done]))[0]});return function(Mr){return kn.apply(this,arguments)}}();return Xe.set(ze,Pn),Pn}!function Nt(vt){tn=vt(tn)}(vt=>({...vt,get:(ze,xt,rn)=>Vn(ze,xt)||vt.get(ze,xt,rn),has:(ze,xt)=>!!Vn(ze,xt)||vt.has(ze,xt)}));class xn{constructor(ze){this.container=ze}getPlatformInfoString(){return this.container.getProviders().map(xt=>{if(function Bt(vt){const ze=vt.getComponent();return"VERSION"===ze?.type}(xt)){const rn=xt.getImmediate();return`${rn.library}/${rn.version}`}return null}).filter(xt=>xt).join(" ")}}const Mn="@firebase/app",gt=new L.Vy("@firebase/app"),St="@firebase/app-compat",Un="@firebase/analytics-compat",De="@firebase/analytics",Ve="@firebase/app-check-compat",bt="@firebase/app-check",Ne="@firebase/auth",pe="@firebase/auth-compat",ye="@firebase/database",_t="@firebase/database-compat",zt="@firebase/functions",$n="@firebase/functions-compat",nn="@firebase/installations",Qn="@firebase/installations-compat",jr="@firebase/messaging",to="@firebase/messaging-compat",lr="@firebase/performance",qr="@firebase/performance-compat",An="@firebase/remote-config",pr="@firebase/remote-config-compat",si="@firebase/storage",wn="@firebase/storage-compat",Br="@firebase/firestore",ai="@firebase/vertexai-preview",Yn="@firebase/firestore-compat",ln="firebase",Ft="[DEFAULT]",Jn={[Mn]:"fire-core",[St]:"fire-core-compat",[De]:"fire-analytics",[Un]:"fire-analytics-compat",[bt]:"fire-app-check",[Ve]:"fire-app-check-compat",[Ne]:"fire-auth",[pe]:"fire-auth-compat",[ye]:"fire-rtdb",[_t]:"fire-rtdb-compat",[zt]:"fire-fn",[$n]:"fire-fn-compat",[nn]:"fire-iid",[Qn]:"fire-iid-compat",[jr]:"fire-fcm",[to]:"fire-fcm-compat",[lr]:"fire-perf",[qr]:"fire-perf-compat",[An]:"fire-rc",[pr]:"fire-rc-compat",[si]:"fire-gcs",[wn]:"fire-gcs-compat",[Br]:"fire-fst",[Yn]:"fire-fst-compat",[ai]:"fire-vertex","fire-js":"fire-js",[ln]:"fire-js-all"},dn=new Map,Wt=new Map,zr=new Map;function ki(vt,ze){try{vt.container.addComponent(ze)}catch(xt){gt.debug(`Component ${ze.name} failed to register with FirebaseApp ${vt.name}`,xt)}}function mi(vt){const ze=vt.name;if(zr.has(ze))return gt.debug(`There were multiple attempts to register component ${ze}.`),!1;zr.set(ze,vt);for(const xt of dn.values())ki(xt,vt);for(const xt of Wt.values())ki(xt,vt);return!0}function ci(vt,ze){const xt=vt.container.getProvider("heartbeat").getImmediate({optional:!0});return xt&&xt.triggerHeartbeat(),vt.container.getProvider(ze)}function jn(vt){return void 0!==vt.settings}const zi=new Be.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Wi{constructor(ze,xt,rn){this._isDeleted=!1,this._options=Object.assign({},ze),this._config=Object.assign({},xt),this._name=xt.name,this._automaticDataCollectionEnabled=xt.automaticDataCollectionEnabled,this._container=rn,this.container.addComponent(new T.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ze){this._isDeleted=ze}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}const ei="10.12.2";function Cr(vt,ze={}){let xt=vt;"object"!=typeof ze&&(ze={name:ze});const rn=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},ze),Hn=rn.name;if("string"!=typeof Hn||!Hn)throw zi.create("bad-app-name",{appName:String(Hn)});if(xt||(xt=(0,Be.T9)()),!xt)throw zi.create("no-options");const Pn=dn.get(Hn);if(Pn){if((0,Be.bD)(xt,Pn.options)&&(0,Be.bD)(rn,Pn.config))return Pn;throw zi.create("duplicate-app",{appName:Hn})}const kn=new T.h1(Hn);for(const Mr of zr.values())kn.addComponent(Mr);const Rr=new Wi(xt,rn,kn);return dn.set(Hn,Rr),Rr}function tt(vt=Ft){const ze=dn.get(vt);if(!ze&&vt===Ft&&(0,Be.T9)())return Cr();if(!ze)throw zi.create("no-app",{appName:vt});return ze}function Te(){return Array.from(dn.values())}function _e(vt,ze,xt){var rn;let Hn=null!==(rn=Jn[vt])&&void 0!==rn?rn:vt;xt&&(Hn+=`-${xt}`);const Pn=Hn.match(/\s|\//),kn=ze.match(/\s|\//);if(Pn||kn){const Rr=[`Unable to register library "${Hn}" with version "${ze}":`];return Pn&&Rr.push(`library name "${Hn}" contains illegal characters (whitespace or "/")`),Pn&&kn&&Rr.push("and"),kn&&Rr.push(`version name "${ze}" contains illegal characters (whitespace or "/")`),void gt.warn(Rr.join(" "))}mi(new T.uA(`${Hn}-version`,()=>({library:Hn,version:ze}),"VERSION"))}const qe="firebase-heartbeat-database",Kt=1,bn="firebase-heartbeat-store";let zn=null;function Kr(){return zn||(zn=function kt(vt,ze,{blocked:xt,upgrade:rn,blocking:Hn,terminated:Pn}={}){const kn=indexedDB.open(vt,ze),Rr=Tt(kn);return rn&&kn.addEventListener("upgradeneeded",Mr=>{rn(Tt(kn.result),Mr.oldVersion,Mr.newVersion,Tt(kn.transaction),Mr)}),xt&&kn.addEventListener("blocked",Mr=>xt(Mr.oldVersion,Mr.newVersion,Mr)),Rr.then(Mr=>{Pn&&Mr.addEventListener("close",()=>Pn()),Hn&&Mr.addEventListener("versionchange",uo=>Hn(uo.oldVersion,uo.newVersion,uo))}).catch(()=>{}),Rr}(qe,Kt,{upgrade:(vt,ze)=>{if(0===ze)try{vt.createObjectStore(bn)}catch(xt){console.warn(xt)}}}).catch(vt=>{throw zi.create("idb-open",{originalErrorMessage:vt.message})})),zn}function vi(){return(vi=(0,D.A)(function*(vt){try{const xt=(yield Kr()).transaction(bn),rn=yield xt.objectStore(bn).get(Hr(vt));return yield xt.done,rn}catch(ze){if(ze instanceof Be.g)gt.warn(ze.message);else{const xt=zi.create("idb-get",{originalErrorMessage:ze?.message});gt.warn(xt.message)}}})).apply(this,arguments)}function er(vt,ze){return Li.apply(this,arguments)}function Li(){return(Li=(0,D.A)(function*(vt,ze){try{const rn=(yield Kr()).transaction(bn,"readwrite");yield rn.objectStore(bn).put(ze,Hr(vt)),yield rn.done}catch(xt){if(xt instanceof Be.g)gt.warn(xt.message);else{const rn=zi.create("idb-set",{originalErrorMessage:xt?.message});gt.warn(rn.message)}}})).apply(this,arguments)}function Hr(vt){return`${vt.name}!${vt.options.appId}`}class yo{constructor(ze){this.container=ze,this._heartbeatsCache=null;const xt=this.container.getProvider("app").getImmediate();this._storage=new kc(xt),this._heartbeatsCachePromise=this._storage.read().then(rn=>(this._heartbeatsCache=rn,rn))}triggerHeartbeat(){var ze=this;return(0,D.A)(function*(){var xt,rn;const Pn=ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kn=no();if((null!=(null===(xt=ze._heartbeatsCache)||void 0===xt?void 0:xt.heartbeats)||(ze._heartbeatsCache=yield ze._heartbeatsCachePromise,null!=(null===(rn=ze._heartbeatsCache)||void 0===rn?void 0:rn.heartbeats)))&&ze._heartbeatsCache.lastSentHeartbeatDate!==kn&&!ze._heartbeatsCache.heartbeats.some(Rr=>Rr.date===kn))return ze._heartbeatsCache.heartbeats.push({date:kn,agent:Pn}),ze._heartbeatsCache.heartbeats=ze._heartbeatsCache.heartbeats.filter(Rr=>{const Mr=new Date(Rr.date).valueOf();return Date.now()-Mr<=2592e6}),ze._storage.overwrite(ze._heartbeatsCache)})()}getHeartbeatsHeader(){var ze=this;return(0,D.A)(function*(){var xt;if(null===ze._heartbeatsCache&&(yield ze._heartbeatsCachePromise),null==(null===(xt=ze._heartbeatsCache)||void 0===xt?void 0:xt.heartbeats)||0===ze._heartbeatsCache.heartbeats.length)return"";const rn=no(),{heartbeatsToSend:Hn,unsentEntries:Pn}=function Is(vt,ze=1024){const xt=[];let rn=vt.slice();for(const Hn of vt){const Pn=xt.find(kn=>kn.agent===Hn.agent);if(Pn){if(Pn.dates.push(Hn.date),As(xt)>ze){Pn.dates.pop();break}}else if(xt.push({agent:Hn.agent,dates:[Hn.date]}),As(xt)>ze){xt.pop();break}rn=rn.slice(1)}return{heartbeatsToSend:xt,unsentEntries:rn}}(ze._heartbeatsCache.heartbeats),kn=(0,Be.Uj)(JSON.stringify({version:2,heartbeats:Hn}));return ze._heartbeatsCache.lastSentHeartbeatDate=rn,Pn.length>0?(ze._heartbeatsCache.heartbeats=Pn,yield ze._storage.overwrite(ze._heartbeatsCache)):(ze._heartbeatsCache.heartbeats=[],ze._storage.overwrite(ze._heartbeatsCache)),kn})()}}function no(){return(new Date).toISOString().substring(0,10)}class kc{constructor(ze){this.app=ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!(0,Be.zW)()&&(0,Be.eX)().then(()=>!0).catch(()=>!1)})()}read(){var ze=this;return(0,D.A)(function*(){if(yield ze._canUseIndexedDBPromise){const rn=yield function mr(vt){return vi.apply(this,arguments)}(ze.app);return rn?.heartbeats?rn:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(ze){var xt=this;return(0,D.A)(function*(){var rn;if(yield xt._canUseIndexedDBPromise){const Pn=yield xt.read();return er(xt.app,{lastSentHeartbeatDate:null!==(rn=ze.lastSentHeartbeatDate)&&void 0!==rn?rn:Pn.lastSentHeartbeatDate,heartbeats:ze.heartbeats})}})()}add(ze){var xt=this;return(0,D.A)(function*(){var rn;if(yield xt._canUseIndexedDBPromise){const Pn=yield xt.read();return er(xt.app,{lastSentHeartbeatDate:null!==(rn=ze.lastSentHeartbeatDate)&&void 0!==rn?rn:Pn.lastSentHeartbeatDate,heartbeats:[...Pn.heartbeats,...ze.heartbeats]})}})()}}function As(vt){return(0,Be.Uj)(JSON.stringify({version:2,heartbeats:vt})).length}!function du(vt){mi(new T.uA("platform-logger",ze=>new xn(ze),"PRIVATE")),mi(new T.uA("heartbeat",ze=>new yo(ze),"PRIVATE")),_e(Mn,"0.10.5",vt),_e(Mn,"0.10.5","esm2017"),_e("fire-js","")}("")},1362:(yn,wt,ie)=>{ie.d(wt,{h1:()=>Et,uA:()=>L});var D=ie(467),T=ie(1076);class L{constructor(me,Ae,Pe){this.name=me,this.instanceFactory=Ae,this.type=Pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(me){return this.instantiationMode=me,this}setMultipleInstances(me){return this.multipleInstances=me,this}setServiceProps(me){return this.serviceProps=me,this}setInstanceCreatedCallback(me){return this.onInstanceCreated=me,this}}const Be="[DEFAULT]";class Ze{constructor(me,Ae){this.name=me,this.container=Ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(me){const Ae=this.normalizeInstanceIdentifier(me);if(!this.instancesDeferred.has(Ae)){const Pe=new T.cY;if(this.instancesDeferred.set(Ae,Pe),this.isInitialized(Ae)||this.shouldAutoInitialize())try{const pt=this.getOrInitializeService({instanceIdentifier:Ae});pt&&Pe.resolve(pt)}catch{}}return this.instancesDeferred.get(Ae).promise}getImmediate(me){var Ae;const Pe=this.normalizeInstanceIdentifier(me?.identifier),pt=null!==(Ae=me?.optional)&&void 0!==Ae&&Ae;if(!this.isInitialized(Pe)&&!this.shouldAutoInitialize()){if(pt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Pe})}catch(Ue){if(pt)return null;throw Ue}}getComponent(){return this.component}setComponent(me){if(me.name!==this.name)throw Error(`Mismatching Component ${me.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=me,this.shouldAutoInitialize()){if(function Ke(rt){return"EAGER"===rt.instantiationMode}(me))try{this.getOrInitializeService({instanceIdentifier:Be})}catch{}for(const[Ae,Pe]of this.instancesDeferred.entries()){const pt=this.normalizeInstanceIdentifier(Ae);try{const Ue=this.getOrInitializeService({instanceIdentifier:pt});Pe.resolve(Ue)}catch{}}}}clearInstance(me=Be){this.instancesDeferred.delete(me),this.instancesOptions.delete(me),this.instances.delete(me)}delete(){var me=this;return(0,D.A)(function*(){const Ae=Array.from(me.instances.values());yield Promise.all([...Ae.filter(Pe=>"INTERNAL"in Pe).map(Pe=>Pe.INTERNAL.delete()),...Ae.filter(Pe=>"_delete"in Pe).map(Pe=>Pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(me=Be){return this.instances.has(me)}getOptions(me=Be){return this.instancesOptions.get(me)||{}}initialize(me={}){const{options:Ae={}}=me,Pe=this.normalizeInstanceIdentifier(me.instanceIdentifier);if(this.isInitialized(Pe))throw Error(`${this.name}(${Pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const pt=this.getOrInitializeService({instanceIdentifier:Pe,options:Ae});for(const[Ue,It]of this.instancesDeferred.entries())Pe===this.normalizeInstanceIdentifier(Ue)&&It.resolve(pt);return pt}onInit(me,Ae){var Pe;const pt=this.normalizeInstanceIdentifier(Ae),Ue=null!==(Pe=this.onInitCallbacks.get(pt))&&void 0!==Pe?Pe:new Set;Ue.add(me),this.onInitCallbacks.set(pt,Ue);const It=this.instances.get(pt);return It&&me(It,pt),()=>{Ue.delete(me)}}invokeOnInitCallbacks(me,Ae){const Pe=this.onInitCallbacks.get(Ae);if(Pe)for(const pt of Pe)try{pt(me,Ae)}catch{}}getOrInitializeService({instanceIdentifier:me,options:Ae={}}){let Pe=this.instances.get(me);if(!Pe&&this.component&&(Pe=this.component.instanceFactory(this.container,{instanceIdentifier:(rt=me,rt===Be?void 0:rt),options:Ae}),this.instances.set(me,Pe),this.instancesOptions.set(me,Ae),this.invokeOnInitCallbacks(Pe,me),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,me,Pe)}catch{}var rt;return Pe||null}normalizeInstanceIdentifier(me=Be){return this.component?this.component.multipleInstances?me:Be:me}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Et{constructor(me){this.name=me,this.providers=new Map}addComponent(me){const Ae=this.getProvider(me.name);if(Ae.isComponentSet())throw new Error(`Component ${me.name} has already been registered with ${this.name}`);Ae.setComponent(me)}addOrOverwriteComponent(me){this.getProvider(me.name).isComponentSet()&&this.providers.delete(me.name),this.addComponent(me)}getProvider(me){if(this.providers.has(me))return this.providers.get(me);const Ae=new Ze(me,this);return this.providers.set(me,Ae),Ae}getProviders(){return Array.from(this.providers.values())}}},8041:(yn,wt,ie)=>{ie.d(wt,{$b:()=>T,Vy:()=>Ke});const D=[];var T=function(me){return me[me.DEBUG=0]="DEBUG",me[me.VERBOSE=1]="VERBOSE",me[me.INFO=2]="INFO",me[me.WARN=3]="WARN",me[me.ERROR=4]="ERROR",me[me.SILENT=5]="SILENT",me}(T||{});const L={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},Be=T.INFO,Ze={[T.DEBUG]:"log",[T.VERBOSE]:"log",[T.INFO]:"info",[T.WARN]:"warn",[T.ERROR]:"error"},Ce=(me,Ae,...Pe)=>{if(Ae<me.logLevel)return;const pt=(new Date).toISOString(),Ue=Ze[Ae];if(!Ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ae})`);console[Ue](`[${pt}]  ${me.name}:`,...Pe)};class Ke{constructor(Ae){this.name=Ae,this._logLevel=Be,this._logHandler=Ce,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(Ae){if(!(Ae in T))throw new TypeError(`Invalid value "${Ae}" assigned to \`logLevel\``);this._logLevel=Ae}setLogLevel(Ae){this._logLevel="string"==typeof Ae?L[Ae]:Ae}get logHandler(){return this._logHandler}set logHandler(Ae){if("function"!=typeof Ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ae){this._userLogHandler=Ae}debug(...Ae){this._userLogHandler&&this._userLogHandler(this,T.DEBUG,...Ae),this._logHandler(this,T.DEBUG,...Ae)}log(...Ae){this._userLogHandler&&this._userLogHandler(this,T.VERBOSE,...Ae),this._logHandler(this,T.VERBOSE,...Ae)}info(...Ae){this._userLogHandler&&this._userLogHandler(this,T.INFO,...Ae),this._logHandler(this,T.INFO,...Ae)}warn(...Ae){this._userLogHandler&&this._userLogHandler(this,T.WARN,...Ae),this._logHandler(this,T.WARN,...Ae)}error(...Ae){this._userLogHandler&&this._userLogHandler(this,T.ERROR,...Ae),this._logHandler(this,T.ERROR,...Ae)}}},2214:(yn,wt,ie)=>{ie.d(wt,{Dk:()=>D.Dk,KO:()=>D.KO,Sx:()=>D.Sx,Wp:()=>D.Wp});var D=ie(7852);(0,D.KO)("firebase","10.12.2","app")},6114:(yn,wt,ie)=>{ie.d(wt,{Dt:()=>mc,HF:()=>Vc,eJ:()=>ll,xI:()=>Nh,hg:()=>ns,x9:()=>yc,df:()=>Wc,r7:()=>Dd});var D=ie(467),T=ie(7852),L=ie(1076),Be=ie(8041),Ze=ie(1635),Ce=ie(1362);const It=function pt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Mt=new L.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nt=new Be.Vy("@firebase/auth");function Tn(O,...E){Nt.logLevel<=Be.$b.ERROR&&Nt.error(`Auth (${T.MF}): ${O}`,...E)}function Tt(O,...E){throw Qt(O,...E)}function Ct(O,...E){return Qt(O,...E)}function kt(O,E,A){const k=Object.assign(Object.assign({},It()),{[E]:A});return new L.FA("auth","Firebase",k).create(E,{appName:O.name})}function Ht(O){return kt(O,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qt(O,...E){if("string"!=typeof O){const A=E[0],k=[...E.slice(1)];return k[0]&&(k[0].appName=O.name),O._errorFactory.create(A,...k)}return Mt.create(O,...E)}function Xe(O,E,...A){if(!O)throw Qt(E,...A)}function Vn(O){const E="INTERNAL ASSERTION FAILED: "+O;throw Tn(E),new Error(E)}function xn(O,E){O||Vn(E)}function Bt(){var O;return typeof self<"u"&&(null===(O=self.location)||void 0===O?void 0:O.href)||""}function le(){var O;return typeof self<"u"&&(null===(O=self.location)||void 0===O?void 0:O.protocol)||null}class Un{constructor(E,A){this.shortDelay=E,this.longDelay=A,xn(A>E,"Short delay should be less than long delay!"),this.isMobile=(0,L.jZ)()||(0,L.lV)()}get(){return function gt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Mn(){return"http:"===le()||"https:"===le()}()||(0,L.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function De(O,E){xn(O.emulator,"Emulator should always be set here");const{url:A}=O.emulator;return E?`${A}${E.startsWith("/")?E.slice(1):E}`:A}class Ve{static initialize(E,A,k){this.fetchImpl=E,A&&(this.headersImpl=A),k&&(this.responseImpl=k)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ne=new Un(3e4,6e4);function pe(O,E){return O.tenantId&&!E.tenantId?Object.assign(Object.assign({},E),{tenantId:O.tenantId}):E}function ye(O,E,A,k){return _t.apply(this,arguments)}function _t(){return(_t=(0,D.A)(function*(O,E,A,k,te={}){return zt(O,te,(0,D.A)(function*(){let ue={},Ge={};k&&("GET"===E?Ge=k:ue={body:JSON.stringify(k)});const ot=(0,L.Am)(Object.assign({key:O.config.apiKey},Ge)).slice(1),jt=yield O._getAdditionalHeaders();return jt["Content-Type"]="application/json",O.languageCode&&(jt["X-Firebase-Locale"]=O.languageCode),Ve.fetch()(jr(O,O.config.apiHost,A,ot),Object.assign({method:E,headers:jt,referrerPolicy:"no-referrer"},ue))}))})).apply(this,arguments)}function zt(O,E,A){return $n.apply(this,arguments)}function $n(){return($n=(0,D.A)(function*(O,E,A){O._canInitEmulator=!1;const k=Object.assign(Object.assign({},bt),E);try{const te=new lr(O),ue=yield Promise.race([A(),te.promise]);te.clearNetworkTimeout();const Ge=yield ue.json();if("needConfirmation"in Ge)throw qr(O,"account-exists-with-different-credential",Ge);if(ue.ok&&!("errorMessage"in Ge))return Ge;{const ot=ue.ok?Ge.errorMessage:Ge.error.message,[jt,Cn]=ot.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===jt)throw qr(O,"credential-already-in-use",Ge);if("EMAIL_EXISTS"===jt)throw qr(O,"email-already-in-use",Ge);if("USER_DISABLED"===jt)throw qr(O,"user-disabled",Ge);const In=k[jt]||jt.toLowerCase().replace(/[_\s]+/g,"-");if(Cn)throw kt(O,In,Cn);Tt(O,In)}}catch(te){if(te instanceof L.g)throw te;Tt(O,"network-request-failed",{message:String(te)})}})).apply(this,arguments)}function nn(O,E,A,k){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,D.A)(function*(O,E,A,k,te={}){const ue=yield ye(O,E,A,k,te);return"mfaPendingCredential"in ue&&Tt(O,"multi-factor-auth-required",{_serverResponse:ue}),ue})).apply(this,arguments)}function jr(O,E,A,k){const te=`${E}${A}?${k}`;return O.config.emulator?De(O.config,te):`${O.config.apiScheme}://${te}`}function to(O){switch(O){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lr{constructor(E){this.auth=E,this.timer=null,this.promise=new Promise((A,k)=>{this.timer=setTimeout(()=>k(Ct(this.auth,"network-request-failed")),Ne.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qr(O,E,A){const k={appName:O.name};A.email&&(k.email=A.email),A.phoneNumber&&(k.phoneNumber=A.phoneNumber);const te=Ct(O,E,k);return te.customData._tokenResponse=A,te}function pr(O){return void 0!==O&&void 0!==O.enterprise}class si{constructor(E){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===E.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=E.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=E.recaptchaEnforcementState}getProviderEnforcementState(E){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const A of this.recaptchaEnforcementState)if(A.provider&&A.provider===E)return to(A.enforcementState);return null}isProviderEnabled(E){return"ENFORCE"===this.getProviderEnforcementState(E)||"AUDIT"===this.getProviderEnforcementState(E)}}function ai(O,E){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,D.A)(function*(O,E){return ye(O,"GET","/v2/recaptchaConfig",pe(O,E))})).apply(this,arguments)}function Lo(){return(Lo=(0,D.A)(function*(O,E){return ye(O,"POST","/v1/accounts:delete",E)})).apply(this,arguments)}function dn(O,E){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,D.A)(function*(O,E){return ye(O,"POST","/v1/accounts:lookup",E)})).apply(this,arguments)}function zr(O){if(O)try{const E=new Date(Number(O));if(!isNaN(E.getTime()))return E.toUTCString()}catch{}}function mi(){return(mi=(0,D.A)(function*(O,E=!1){const A=(0,L.Ku)(O),k=yield A.getIdToken(E),te=Wr(k);Xe(te&&te.exp&&te.auth_time&&te.iat,A.auth,"internal-error");const ue="object"==typeof te.firebase?te.firebase:void 0,Ge=ue?.sign_in_provider;return{claims:te,token:k,authTime:zr(ci(te.auth_time)),issuedAtTime:zr(ci(te.iat)),expirationTime:zr(ci(te.exp)),signInProvider:Ge||null,signInSecondFactor:ue?.sign_in_second_factor||null}})).apply(this,arguments)}function ci(O){return 1e3*Number(O)}function Wr(O){const[E,A,k]=O.split(".");if(void 0===E||void 0===A||void 0===k)return Tn("JWT malformed, contained fewer than 3 sections"),null;try{const te=(0,L.u)(A);return te?JSON.parse(te):(Tn("Failed to decode base64 JWT payload"),null)}catch(te){return Tn("Caught error parsing JWT payload as JSON",te?.toString()),null}}function _i(O){const E=Wr(O);return Xe(E,"internal-error"),Xe(typeof E.exp<"u","internal-error"),Xe(typeof E.iat<"u","internal-error"),Number(E.exp)-Number(E.iat)}function jn(O,E){return Er.apply(this,arguments)}function Er(){return(Er=(0,D.A)(function*(O,E,A=!1){if(A)return E;try{return yield E}catch(k){throw k instanceof L.g&&function ri({code:O}){return"auth/user-disabled"===O||"auth/user-token-expired"===O}(k)&&O.auth.currentUser===O&&(yield O.auth.signOut()),k}})).apply(this,arguments)}class zi{constructor(E){this.user=E,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(E){var A;if(E){const k=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),k}{this.errorBackoff=3e4;const te=(null!==(A=this.user.stsTokenManager.expirationTime)&&void 0!==A?A:0)-Date.now()-3e5;return Math.max(0,te)}}schedule(E=!1){var A=this;if(!this.isRunning)return;const k=this.getInterval(E);this.timerId=setTimeout((0,D.A)(function*(){yield A.iteration()}),k)}iteration(){var E=this;return(0,D.A)(function*(){try{yield E.user.getIdToken(!0)}catch(A){return void("auth/network-request-failed"===A?.code&&E.schedule(!0))}E.schedule()})()}}class Wi{constructor(E,A){this.createdAt=E,this.lastLoginAt=A,this._initializeTime()}_initializeTime(){this.lastSignInTime=zr(this.lastLoginAt),this.creationTime=zr(this.createdAt)}_copy(E){this.createdAt=E.createdAt,this.lastLoginAt=E.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fi(O){return ei.apply(this,arguments)}function ei(){return(ei=(0,D.A)(function*(O){var E;const A=O.auth,k=yield O.getIdToken(),te=yield jn(O,dn(A,{idToken:k}));Xe(te?.users.length,A,"internal-error");const ue=te.users[0];O._notifyReloadListener(ue);const Ge=null!==(E=ue.providerUserInfo)&&void 0!==E&&E.length?Te(ue.providerUserInfo):[],ot=function tt(O,E){return[...O.filter(k=>!E.some(te=>te.providerId===k.providerId)),...E]}(O.providerData,Ge),In=!!O.isAnonymous&&!(O.email&&ue.passwordHash||ot?.length),vr={uid:ue.localId,displayName:ue.displayName||null,photoURL:ue.photoUrl||null,email:ue.email||null,emailVerified:ue.emailVerified||!1,phoneNumber:ue.phoneNumber||null,tenantId:ue.tenantId||null,providerData:ot,metadata:new Wi(ue.createdAt,ue.lastLoginAt),isAnonymous:In};Object.assign(O,vr)})).apply(this,arguments)}function he(){return(he=(0,D.A)(function*(O){const E=(0,L.Ku)(O);yield Fi(E),yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)})).apply(this,arguments)}function Te(O){return O.map(E=>{var{providerId:A}=E,k=(0,Ze.Tt)(E,["providerId"]);return{providerId:A,uid:k.rawId||"",displayName:k.displayName||null,email:k.email||null,phoneNumber:k.phoneNumber||null,photoURL:k.photoUrl||null}})}function de(){return(de=(0,D.A)(function*(O,E){const A=yield zt(O,{},(0,D.A)(function*(){const k=(0,L.Am)({grant_type:"refresh_token",refresh_token:E}).slice(1),{tokenApiHost:te,apiKey:ue}=O.config,Ge=jr(O,te,"/v1/token",`key=${ue}`),ot=yield O._getAdditionalHeaders();return ot["Content-Type"]="application/x-www-form-urlencoded",Ve.fetch()(Ge,{method:"POST",headers:ot,body:k})}));return{accessToken:A.access_token,expiresIn:A.expires_in,refreshToken:A.refresh_token}})).apply(this,arguments)}function Re(){return(Re=(0,D.A)(function*(O,E){return ye(O,"POST","/v2/accounts:revokeToken",pe(O,E))})).apply(this,arguments)}class lt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(E){Xe(E.idToken,"internal-error"),Xe(typeof E.idToken<"u","internal-error"),Xe(typeof E.refreshToken<"u","internal-error");const A="expiresIn"in E&&typeof E.expiresIn<"u"?Number(E.expiresIn):_i(E.idToken);this.updateTokensAndExpiration(E.idToken,E.refreshToken,A)}updateFromIdToken(E){Xe(0!==E.length,"internal-error");const A=_i(E);this.updateTokensAndExpiration(E,null,A)}getToken(E,A=!1){var k=this;return(0,D.A)(function*(){return A||!k.accessToken||k.isExpired?(Xe(k.refreshToken,E,"user-token-expired"),k.refreshToken?(yield k.refresh(E,k.refreshToken),k.accessToken):null):k.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(E,A){var k=this;return(0,D.A)(function*(){const{accessToken:te,refreshToken:ue,expiresIn:Ge}=yield function Qe(O,E){return de.apply(this,arguments)}(E,A);k.updateTokensAndExpiration(te,ue,Number(Ge))})()}updateTokensAndExpiration(E,A,k){this.refreshToken=A||null,this.accessToken=E||null,this.expirationTime=Date.now()+1e3*k}static fromJSON(E,A){const{refreshToken:k,accessToken:te,expirationTime:ue}=A,Ge=new lt;return k&&(Xe("string"==typeof k,"internal-error",{appName:E}),Ge.refreshToken=k),te&&(Xe("string"==typeof te,"internal-error",{appName:E}),Ge.accessToken=te),ue&&(Xe("number"==typeof ue,"internal-error",{appName:E}),Ge.expirationTime=ue),Ge}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(E){this.accessToken=E.accessToken,this.refreshToken=E.refreshToken,this.expirationTime=E.expirationTime}_clone(){return Object.assign(new lt,this.toJSON())}_performRefresh(){return Vn("not implemented")}}function qe(O,E){Xe("string"==typeof O||typeof O>"u","internal-error",{appName:E})}class Kt{constructor(E){var{uid:A,auth:k,stsTokenManager:te}=E,ue=(0,Ze.Tt)(E,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=A,this.auth=k,this.stsTokenManager=te,this.accessToken=te.accessToken,this.displayName=ue.displayName||null,this.email=ue.email||null,this.emailVerified=ue.emailVerified||!1,this.phoneNumber=ue.phoneNumber||null,this.photoURL=ue.photoURL||null,this.isAnonymous=ue.isAnonymous||!1,this.tenantId=ue.tenantId||null,this.providerData=ue.providerData?[...ue.providerData]:[],this.metadata=new Wi(ue.createdAt||void 0,ue.lastLoginAt||void 0)}getIdToken(E){var A=this;return(0,D.A)(function*(){const k=yield jn(A,A.stsTokenManager.getToken(A.auth,E));return Xe(k,A.auth,"internal-error"),A.accessToken!==k&&(A.accessToken=k,yield A.auth._persistUserIfCurrent(A),A.auth._notifyListenersIfCurrent(A)),k})()}getIdTokenResult(E){return function Dr(O){return mi.apply(this,arguments)}(this,E)}reload(){return function Cr(O){return he.apply(this,arguments)}(this)}_assign(E){this!==E&&(Xe(this.uid===E.uid,this.auth,"internal-error"),this.displayName=E.displayName,this.photoURL=E.photoURL,this.email=E.email,this.emailVerified=E.emailVerified,this.phoneNumber=E.phoneNumber,this.isAnonymous=E.isAnonymous,this.tenantId=E.tenantId,this.providerData=E.providerData.map(A=>Object.assign({},A)),this.metadata._copy(E.metadata),this.stsTokenManager._assign(E.stsTokenManager))}_clone(E){const A=new Kt(Object.assign(Object.assign({},this),{auth:E,stsTokenManager:this.stsTokenManager._clone()}));return A.metadata._copy(this.metadata),A}_onReload(E){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=E,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(E){this.reloadListener?this.reloadListener(E):this.reloadUserInfo=E}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(E,A=!1){var k=this;return(0,D.A)(function*(){let te=!1;E.idToken&&E.idToken!==k.stsTokenManager.accessToken&&(k.stsTokenManager.updateFromServerResponse(E),te=!0),A&&(yield Fi(k)),yield k.auth._persistUserIfCurrent(k),te&&k.auth._notifyListenersIfCurrent(k)})()}delete(){var E=this;return(0,D.A)(function*(){if((0,T.xZ)(E.auth.app))return Promise.reject(Ht(E.auth));const A=yield E.getIdToken();return yield jn(E,function ln(O,E){return Lo.apply(this,arguments)}(E.auth,{idToken:A})),E.stsTokenManager.clearRefreshToken(),E.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(E=>Object.assign({},E)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(E,A){var k,te,ue,Ge,ot,jt,Cn,In;const vr=null!==(k=A.displayName)&&void 0!==k?k:void 0,ys=null!==(te=A.email)&&void 0!==te?te:void 0,Zc=null!==(ue=A.phoneNumber)&&void 0!==ue?ue:void 0,Tl=null!==(Ge=A.photoURL)&&void 0!==Ge?Ge:void 0,kh=null!==(ot=A.tenantId)&&void 0!==ot?ot:void 0,Ha=null!==(jt=A._redirectEventId)&&void 0!==jt?jt:void 0,Zl=null!==(Cn=A.createdAt)&&void 0!==Cn?Cn:void 0,kf=null!==(In=A.lastLoginAt)&&void 0!==In?In:void 0,{uid:Nr,emailVerified:xl,isAnonymous:ic,providerData:Ji,stsTokenManager:Jl}=A;Xe(Nr&&Jl,E,"internal-error");const Jc=lt.fromJSON(this.name,Jl);Xe("string"==typeof Nr,E,"internal-error"),qe(vr,E.name),qe(ys,E.name),Xe("boolean"==typeof xl,E,"internal-error"),Xe("boolean"==typeof ic,E,"internal-error"),qe(Zc,E.name),qe(Tl,E.name),qe(kh,E.name),qe(Ha,E.name),qe(Zl,E.name),qe(kf,E.name);const oc=new Kt({uid:Nr,auth:E,email:ys,emailVerified:xl,displayName:vr,isAnonymous:ic,photoURL:Tl,phoneNumber:Zc,tenantId:kh,stsTokenManager:Jc,createdAt:Zl,lastLoginAt:kf});return Ji&&Array.isArray(Ji)&&(oc.providerData=Ji.map(gr=>Object.assign({},gr))),Ha&&(oc._redirectEventId=Ha),oc}static _fromIdTokenResponse(E,A,k=!1){return(0,D.A)(function*(){const te=new lt;te.updateFromServerResponse(A);const ue=new Kt({uid:A.localId,auth:E,stsTokenManager:te,isAnonymous:k});return yield Fi(ue),ue})()}static _fromGetAccountInfoResponse(E,A,k){return(0,D.A)(function*(){const te=A.users[0];Xe(void 0!==te.localId,"internal-error");const ue=void 0!==te.providerUserInfo?Te(te.providerUserInfo):[],Ge=!(te.email&&te.passwordHash||ue?.length),ot=new lt;ot.updateFromIdToken(k);const jt=new Kt({uid:te.localId,auth:E,stsTokenManager:ot,isAnonymous:Ge}),Cn={uid:te.localId,displayName:te.displayName||null,photoURL:te.photoUrl||null,email:te.email||null,emailVerified:te.emailVerified||!1,phoneNumber:te.phoneNumber||null,tenantId:te.tenantId||null,providerData:ue,metadata:new Wi(te.createdAt,te.lastLoginAt),isAnonymous:!(te.email&&te.passwordHash||ue?.length)};return Object.assign(jt,Cn),jt})()}}const bn=new Map;function zn(O){xn(O instanceof Function,"Expected a class definition");let E=bn.get(O);return E?(xn(E instanceof O,"Instance stored in cache mismatched with class"),E):(E=new O,bn.set(O,E),E)}const mr=(()=>{class O{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(A,k){var te=this;return(0,D.A)(function*(){te.storage[A]=k})()}_get(A){var k=this;return(0,D.A)(function*(){const te=k.storage[A];return void 0===te?null:te})()}_remove(A){var k=this;return(0,D.A)(function*(){delete k.storage[A]})()}_addListener(A,k){}_removeListener(A,k){}}return O.type="NONE",O})();function vi(O,E,A){return`firebase:${O}:${E}:${A}`}class er{constructor(E,A,k){this.persistence=E,this.auth=A,this.userKey=k;const{config:te,name:ue}=this.auth;this.fullUserKey=vi(this.userKey,te.apiKey,ue),this.fullPersistenceKey=vi("persistence",te.apiKey,ue),this.boundEventHandler=A._onStorageEvent.bind(A),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(E){return this.persistence._set(this.fullUserKey,E.toJSON())}getCurrentUser(){var E=this;return(0,D.A)(function*(){const A=yield E.persistence._get(E.fullUserKey);return A?Kt._fromJSON(E.auth,A):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(E){var A=this;return(0,D.A)(function*(){if(A.persistence===E)return;const k=yield A.getCurrentUser();return yield A.removeCurrentUser(),A.persistence=E,k?A.setCurrentUser(k):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(E,A,k="authUser"){return(0,D.A)(function*(){if(!A.length)return new er(zn(mr),E,k);const te=(yield Promise.all(A.map(function(){var Cn=(0,D.A)(function*(In){if(yield In._isAvailable())return In});return function(In){return Cn.apply(this,arguments)}}()))).filter(Cn=>Cn);let ue=te[0]||zn(mr);const Ge=vi(k,E.config.apiKey,E.name);let ot=null;for(const Cn of A)try{const In=yield Cn._get(Ge);if(In){const vr=Kt._fromJSON(E,In);Cn!==ue&&(ot=vr),ue=Cn;break}}catch{}const jt=te.filter(Cn=>Cn._shouldAllowMigration);return ue._shouldAllowMigration&&jt.length?(ue=jt[0],ot&&(yield ue._set(Ge,ot.toJSON())),yield Promise.all(A.map(function(){var Cn=(0,D.A)(function*(In){if(In!==ue)try{yield In._remove(Ge)}catch{}});return function(In){return Cn.apply(this,arguments)}}())),new er(ue,E,k)):new er(ue,E,k)})()}}function Li(O){const E=O.toLowerCase();if(E.includes("opera/")||E.includes("opr/")||E.includes("opios/"))return"Opera";if(yo(E))return"IEMobile";if(E.includes("msie")||E.includes("trident/"))return"IE";if(E.includes("edge/"))return"Edge";if(Hr(E))return"Firefox";if(E.includes("silk/"))return"Silk";if(Is(E))return"Blackberry";if(kc(E))return"Webos";if(ui(E))return"Safari";if((E.includes("chrome/")||Us(E))&&!E.includes("edge/"))return"Chrome";if(no(E))return"Android";{const k=O.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===k?.length)return k[1]}return"Other"}function Hr(O=(0,L.ZQ)()){return/firefox\//i.test(O)}function ui(O=(0,L.ZQ)()){const E=O.toLowerCase();return E.includes("safari/")&&!E.includes("chrome/")&&!E.includes("crios/")&&!E.includes("android")}function Us(O=(0,L.ZQ)()){return/crios\//i.test(O)}function yo(O=(0,L.ZQ)()){return/iemobile/i.test(O)}function no(O=(0,L.ZQ)()){return/android/i.test(O)}function Is(O=(0,L.ZQ)()){return/blackberry/i.test(O)}function kc(O=(0,L.ZQ)()){return/webos/i.test(O)}function As(O=(0,L.ZQ)()){return/iphone|ipad|ipod/i.test(O)||/macintosh/i.test(O)&&/mobile/i.test(O)}function xt(O=(0,L.ZQ)()){return As(O)||no(O)||kc(O)||Is(O)||/windows phone/i.test(O)||yo(O)}function Hn(O,E=[]){let A;switch(O){case"Browser":A=Li((0,L.ZQ)());break;case"Worker":A=`${Li((0,L.ZQ)())}-${O}`;break;default:A=O}const k=E.length?E.join(","):"FirebaseCore-web";return`${A}/JsCore/${T.MF}/${k}`}class Pn{constructor(E){this.auth=E,this.queue=[]}pushCallback(E,A){const k=ue=>new Promise((Ge,ot)=>{try{Ge(E(ue))}catch(jt){ot(jt)}});k.onAbort=A,this.queue.push(k);const te=this.queue.length-1;return()=>{this.queue[te]=()=>Promise.resolve()}}runMiddleware(E){var A=this;return(0,D.A)(function*(){if(A.auth.currentUser===E)return;const k=[];try{for(const te of A.queue)yield te(E),te.onAbort&&k.push(te.onAbort)}catch(te){k.reverse();for(const ue of k)try{ue()}catch{}throw A.auth._errorFactory.create("login-blocked",{originalMessage:te?.message})}})()}}function Rr(){return(Rr=(0,D.A)(function*(O,E={}){return ye(O,"GET","/v2/passwordPolicy",pe(O,E))})).apply(this,arguments)}class uo{constructor(E){var A,k,te,ue;const Ge=E.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(A=Ge.minPasswordLength)&&void 0!==A?A:6,Ge.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Ge.maxPasswordLength),void 0!==Ge.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Ge.containsLowercaseCharacter),void 0!==Ge.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Ge.containsUppercaseCharacter),void 0!==Ge.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Ge.containsNumericCharacter),void 0!==Ge.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Ge.containsNonAlphanumericCharacter),this.enforcementState=E.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(te=null===(k=E.allowedNonAlphanumericCharacters)||void 0===k?void 0:k.join(""))&&void 0!==te?te:"",this.forceUpgradeOnSignin=null!==(ue=E.forceUpgradeOnSignin)&&void 0!==ue&&ue,this.schemaVersion=E.schemaVersion}validatePassword(E){var A,k,te,ue,Ge,ot;const jt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(E,jt),this.validatePasswordCharacterOptions(E,jt),jt.isValid&&(jt.isValid=null===(A=jt.meetsMinPasswordLength)||void 0===A||A),jt.isValid&&(jt.isValid=null===(k=jt.meetsMaxPasswordLength)||void 0===k||k),jt.isValid&&(jt.isValid=null===(te=jt.containsLowercaseLetter)||void 0===te||te),jt.isValid&&(jt.isValid=null===(ue=jt.containsUppercaseLetter)||void 0===ue||ue),jt.isValid&&(jt.isValid=null===(Ge=jt.containsNumericCharacter)||void 0===Ge||Ge),jt.isValid&&(jt.isValid=null===(ot=jt.containsNonAlphanumericCharacter)||void 0===ot||ot),jt}validatePasswordLengthOptions(E,A){const k=this.customStrengthOptions.minPasswordLength,te=this.customStrengthOptions.maxPasswordLength;k&&(A.meetsMinPasswordLength=E.length>=k),te&&(A.meetsMaxPasswordLength=E.length<=te)}validatePasswordCharacterOptions(E,A){let k;this.updatePasswordCharacterOptionsStatuses(A,!1,!1,!1,!1);for(let te=0;te<E.length;te++)k=E.charAt(te),this.updatePasswordCharacterOptionsStatuses(A,k>="a"&&k<="z",k>="A"&&k<="Z",k>="0"&&k<="9",this.allowedNonAlphanumericCharacters.includes(k))}updatePasswordCharacterOptionsStatuses(E,A,k,te,ue){this.customStrengthOptions.containsLowercaseLetter&&(E.containsLowercaseLetter||(E.containsLowercaseLetter=A)),this.customStrengthOptions.containsUppercaseLetter&&(E.containsUppercaseLetter||(E.containsUppercaseLetter=k)),this.customStrengthOptions.containsNumericCharacter&&(E.containsNumericCharacter||(E.containsNumericCharacter=te)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(E.containsNonAlphanumericCharacter||(E.containsNonAlphanumericCharacter=ue))}}class Vo{constructor(E,A,k,te){this.app=E,this.heartbeatServiceProvider=A,this.appCheckServiceProvider=k,this.config=te,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $a(this),this.idTokenSubscription=new $a(this),this.beforeStateQueue=new Pn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=E.name,this.clientVersion=te.sdkClientVersion}_initializeWithPersistence(E,A){var k=this;return A&&(this._popupRedirectResolver=zn(A)),this._initializationPromise=this.queue((0,D.A)(function*(){var te,ue;if(!k._deleted&&(k.persistenceManager=yield er.create(k,E),!k._deleted)){if(null!==(te=k._popupRedirectResolver)&&void 0!==te&&te._shouldInitProactively)try{yield k._popupRedirectResolver._initialize(k)}catch{}yield k.initializeCurrentUser(A),k.lastNotifiedUid=(null===(ue=k.currentUser)||void 0===ue?void 0:ue.uid)||null,!k._deleted&&(k._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var E=this;return(0,D.A)(function*(){if(E._deleted)return;const A=yield E.assertedPersistence.getCurrentUser();if(E.currentUser||A){if(E.currentUser&&A&&E.currentUser.uid===A.uid)return E._currentUser._assign(A),void(yield E.currentUser.getIdToken());yield E._updateCurrentUser(A,!0)}})()}initializeCurrentUserFromIdToken(E){var A=this;return(0,D.A)(function*(){try{const k=yield dn(A,{idToken:E}),te=yield Kt._fromGetAccountInfoResponse(A,k,E);yield A.directlySetCurrentUser(te)}catch(k){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",k),yield A.directlySetCurrentUser(null)}})()}initializeCurrentUser(E){var A=this;return(0,D.A)(function*(){var k;if((0,T.xZ)(A.app)){const ot=A.app.settings.authIdToken;return ot?new Promise(jt=>{setTimeout(()=>A.initializeCurrentUserFromIdToken(ot).then(jt,jt))}):A.directlySetCurrentUser(null)}const te=yield A.assertedPersistence.getCurrentUser();let ue=te,Ge=!1;if(E&&A.config.authDomain){yield A.getOrInitRedirectPersistenceManager();const ot=null===(k=A.redirectUser)||void 0===k?void 0:k._redirectEventId,jt=ue?._redirectEventId,Cn=yield A.tryRedirectSignIn(E);(!ot||ot===jt)&&Cn?.user&&(ue=Cn.user,Ge=!0)}if(!ue)return A.directlySetCurrentUser(null);if(!ue._redirectEventId){if(Ge)try{yield A.beforeStateQueue.runMiddleware(ue)}catch(ot){ue=te,A._popupRedirectResolver._overrideRedirectResult(A,()=>Promise.reject(ot))}return ue?A.reloadAndSetCurrentUserOrClear(ue):A.directlySetCurrentUser(null)}return Xe(A._popupRedirectResolver,A,"argument-error"),yield A.getOrInitRedirectPersistenceManager(),A.redirectUser&&A.redirectUser._redirectEventId===ue._redirectEventId?A.directlySetCurrentUser(ue):A.reloadAndSetCurrentUserOrClear(ue)})()}tryRedirectSignIn(E){var A=this;return(0,D.A)(function*(){let k=null;try{k=yield A._popupRedirectResolver._completeRedirectFn(A,E,!0)}catch{yield A._setRedirectUser(null)}return k})()}reloadAndSetCurrentUserOrClear(E){var A=this;return(0,D.A)(function*(){try{yield Fi(E)}catch(k){if("auth/network-request-failed"!==k?.code)return A.directlySetCurrentUser(null)}return A.directlySetCurrentUser(E)})()}useDeviceLanguage(){this.languageCode=function St(){if(typeof navigator>"u")return null;const O=navigator;return O.languages&&O.languages[0]||O.language||null}()}_delete(){var E=this;return(0,D.A)(function*(){E._deleted=!0})()}updateCurrentUser(E){var A=this;return(0,D.A)(function*(){if((0,T.xZ)(A.app))return Promise.reject(Ht(A));const k=E?(0,L.Ku)(E):null;return k&&Xe(k.auth.config.apiKey===A.config.apiKey,A,"invalid-user-token"),A._updateCurrentUser(k&&k._clone(A))})()}_updateCurrentUser(E,A=!1){var k=this;return(0,D.A)(function*(){if(!k._deleted)return E&&Xe(k.tenantId===E.tenantId,k,"tenant-id-mismatch"),A||(yield k.beforeStateQueue.runMiddleware(E)),k.queue((0,D.A)(function*(){yield k.directlySetCurrentUser(E),k.notifyAuthListeners()}))})()}signOut(){var E=this;return(0,D.A)(function*(){return(0,T.xZ)(E.app)?Promise.reject(Ht(E)):(yield E.beforeStateQueue.runMiddleware(null),(E.redirectPersistenceManager||E._popupRedirectResolver)&&(yield E._setRedirectUser(null)),E._updateCurrentUser(null,!0))})()}setPersistence(E){var A=this;return(0,T.xZ)(this.app)?Promise.reject(Ht(this)):this.queue((0,D.A)(function*(){yield A.assertedPersistence.setPersistence(zn(E))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(E){var A=this;return(0,D.A)(function*(){A._getPasswordPolicyInternal()||(yield A._updatePasswordPolicy());const k=A._getPasswordPolicyInternal();return k.schemaVersion!==A.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(A._errorFactory.create("unsupported-password-policy-schema-version",{})):k.validatePassword(E)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var E=this;return(0,D.A)(function*(){const A=yield function kn(O){return Rr.apply(this,arguments)}(E),k=new uo(A);null===E.tenantId?E._projectPasswordPolicy=k:E._tenantPasswordPolicies[E.tenantId]=k})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(E){this._errorFactory=new L.FA("auth","Firebase",E())}onAuthStateChanged(E,A,k){return this.registerStateListener(this.authStateSubscription,E,A,k)}beforeAuthStateChanged(E,A){return this.beforeStateQueue.pushCallback(E,A)}onIdTokenChanged(E,A,k){return this.registerStateListener(this.idTokenSubscription,E,A,k)}authStateReady(){return new Promise((E,A)=>{if(this.currentUser)E();else{const k=this.onAuthStateChanged(()=>{k(),E()},A)}})}revokeAccessToken(E){var A=this;return(0,D.A)(function*(){if(A.currentUser){const k=yield A.currentUser.getIdToken(),te={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:E,idToken:k};null!=A.tenantId&&(te.tenantId=A.tenantId),yield function _e(O,E){return Re.apply(this,arguments)}(A,te)}})()}toJSON(){var E;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(E=this._currentUser)||void 0===E?void 0:E.toJSON()}}_setRedirectUser(E,A){var k=this;return(0,D.A)(function*(){const te=yield k.getOrInitRedirectPersistenceManager(A);return null===E?te.removeCurrentUser():te.setCurrentUser(E)})()}getOrInitRedirectPersistenceManager(E){var A=this;return(0,D.A)(function*(){if(!A.redirectPersistenceManager){const k=E&&zn(E)||A._popupRedirectResolver;Xe(k,A,"argument-error"),A.redirectPersistenceManager=yield er.create(A,[zn(k._redirectPersistence)],"redirectUser"),A.redirectUser=yield A.redirectPersistenceManager.getCurrentUser()}return A.redirectPersistenceManager})()}_redirectUserForId(E){var A=this;return(0,D.A)(function*(){var k,te;return A._isInitialized&&(yield A.queue((0,D.A)(function*(){}))),(null===(k=A._currentUser)||void 0===k?void 0:k._redirectEventId)===E?A._currentUser:(null===(te=A.redirectUser)||void 0===te?void 0:te._redirectEventId)===E?A.redirectUser:null})()}_persistUserIfCurrent(E){var A=this;return(0,D.A)(function*(){if(E===A.currentUser)return A.queue((0,D.A)(function*(){return A.directlySetCurrentUser(E)}))})()}_notifyListenersIfCurrent(E){E===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var E,A;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const k=null!==(A=null===(E=this.currentUser)||void 0===E?void 0:E.uid)&&void 0!==A?A:null;this.lastNotifiedUid!==k&&(this.lastNotifiedUid=k,this.authStateSubscription.next(this.currentUser))}registerStateListener(E,A,k,te){if(this._deleted)return()=>{};const ue="function"==typeof A?A:A.next.bind(A);let Ge=!1;const ot=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xe(ot,this,"internal-error"),ot.then(()=>{Ge||ue(this.currentUser)}),"function"==typeof A){const jt=E.addObserver(A,k,te);return()=>{Ge=!0,jt()}}{const jt=E.addObserver(A);return()=>{Ge=!0,jt()}}}directlySetCurrentUser(E){var A=this;return(0,D.A)(function*(){A.currentUser&&A.currentUser!==E&&A._currentUser._stopProactiveRefresh(),E&&A.isProactiveRefreshEnabled&&E._startProactiveRefresh(),A.currentUser=E,E?yield A.assertedPersistence.setCurrentUser(E):yield A.assertedPersistence.removeCurrentUser()})()}queue(E){return this.operations=this.operations.then(E,E),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(E){!E||this.frameworks.includes(E)||(this.frameworks.push(E),this.frameworks.sort(),this.clientVersion=Hn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var E=this;return(0,D.A)(function*(){var A;const k={"X-Client-Version":E.clientVersion};E.app.options.appId&&(k["X-Firebase-gmpid"]=E.app.options.appId);const te=yield null===(A=E.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===A?void 0:A.getHeartbeatsHeader();te&&(k["X-Firebase-Client"]=te);const ue=yield E._getAppCheckToken();return ue&&(k["X-Firebase-AppCheck"]=ue),k})()}_getAppCheckToken(){var E=this;return(0,D.A)(function*(){var A;const k=yield null===(A=E.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===A?void 0:A.getToken();return k?.error&&function On(O,...E){Nt.logLevel<=Be.$b.WARN&&Nt.warn(`Auth (${T.MF}): ${O}`,...E)}(`Error while retrieving App Check token: ${k.error}`),k?.token})()}}function Xr(O){return(0,L.Ku)(O)}class $a{constructor(E){this.auth=E,this.observer=null,this.addObserver=(0,L.tD)(A=>this.observer=A)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bs={loadJS:()=>(0,D.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ca(O){return bs.loadJS(O)}function Ts(O){return`__${O}${Math.floor(1e6*Math.random())}`}class bo{constructor(E){this.type="recaptcha-enterprise",this.auth=Xr(E)}verify(E="verify",A=!1){var k=this;return(0,D.A)(function*(){function ue(){return ue=(0,D.A)(function*(ot){if(!A){if(null==ot.tenantId&&null!=ot._agentRecaptchaConfig)return ot._agentRecaptchaConfig.siteKey;if(null!=ot.tenantId&&void 0!==ot._tenantRecaptchaConfigs[ot.tenantId])return ot._tenantRecaptchaConfigs[ot.tenantId].siteKey}return new Promise(function(){var jt=(0,D.A)(function*(Cn,In){ai(ot,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(vr=>{if(void 0!==vr.recaptchaKey){const ys=new si(vr);return null==ot.tenantId?ot._agentRecaptchaConfig=ys:ot._tenantRecaptchaConfigs[ot.tenantId]=ys,Cn(ys.siteKey)}In(new Error("recaptcha Enterprise site key undefined"))}).catch(vr=>{In(vr)})});return function(Cn,In){return jt.apply(this,arguments)}}())}),ue.apply(this,arguments)}function Ge(ot,jt,Cn){const In=window.grecaptcha;pr(In)?In.enterprise.ready(()=>{In.enterprise.execute(ot,{action:E}).then(vr=>{jt(vr)}).catch(()=>{jt("NO_RECAPTCHA")})}):Cn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ot,jt)=>{(function te(ot){return ue.apply(this,arguments)})(k.auth).then(Cn=>{if(!A&&pr(window.grecaptcha))Ge(Cn,ot,jt);else{if(typeof window>"u")return void jt(new Error("RecaptchaVerifier is only supported in browser"));let In=function fc(){return bs.recaptchaEnterpriseScript}();0!==In.length&&(In+=Cn),ca(In).then(()=>{Ge(Cn,ot,jt)}).catch(vr=>{jt(vr)})}}).catch(Cn=>{jt(Cn)})})})()}}function Zo(O,E,A){return ro.apply(this,arguments)}function ro(){return(ro=(0,D.A)(function*(O,E,A,k=!1){const te=new bo(O);let ue;try{ue=yield te.verify(A)}catch{ue=yield te.verify(A,!0)}const Ge=Object.assign({},E);return Object.assign(Ge,k?{captchaResp:ue}:{captchaResponse:ue}),Object.assign(Ge,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ge,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ge})).apply(this,arguments)}function Ar(O,E,A,k){return as.apply(this,arguments)}function as(){return as=(0,D.A)(function*(O,E,A,k){var te;if(null!==(te=O._getRecaptchaConfig())&&void 0!==te&&te.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const ue=yield Zo(O,E,A,"getOobCode"===A);return k(O,ue)}return k(O,E).catch(function(){var ue=(0,D.A)(function*(Ge){if("auth/missing-recaptcha-token"===Ge.code){console.log(`${A} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ot=yield Zo(O,E,A,"getOobCode"===A);return k(O,ot)}return Promise.reject(Ge)});return function(Ge){return ue.apply(this,arguments)}}())}),as.apply(this,arguments)}function js(O){const E=O.indexOf(":");return E<0?"":O.substr(0,E+1)}function Vi(O){if(!O)return null;const E=Number(O);return isNaN(E)?null:E}class Jo{constructor(E,A){this.providerId=E,this.signInMethod=A}toJSON(){return Vn("not implemented")}_getIdTokenResponse(E){return Vn("not implemented")}_linkToIdToken(E,A){return Vn("not implemented")}_getReauthenticationResolver(E){return Vn("not implemented")}}function To(O,E){return na.apply(this,arguments)}function na(){return(na=(0,D.A)(function*(O,E){return ye(O,"POST","/v1/accounts:signUp",E)})).apply(this,arguments)}function Hs(O,E){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,D.A)(function*(O,E){return nn(O,"POST","/v1/accounts:signInWithPassword",pe(O,E))})).apply(this,arguments)}function fo(){return(fo=(0,D.A)(function*(O,E){return nn(O,"POST","/v1/accounts:signInWithEmailLink",pe(O,E))})).apply(this,arguments)}function es(){return(es=(0,D.A)(function*(O,E){return nn(O,"POST","/v1/accounts:signInWithEmailLink",pe(O,E))})).apply(this,arguments)}class ha extends Jo{constructor(E,A,k,te=null){super("password",k),this._email=E,this._password=A,this._tenantId=te}static _fromEmailAndPassword(E,A){return new ha(E,A,"password")}static _fromEmailAndCode(E,A,k=null){return new ha(E,A,"emailLink",k)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(E){const A="string"==typeof E?JSON.parse(E):E;if(A?.email&&A?.password){if("password"===A.signInMethod)return this._fromEmailAndPassword(A.email,A.password);if("emailLink"===A.signInMethod)return this._fromEmailAndCode(A.email,A.password,A.tenantId)}return null}_getIdTokenResponse(E){var A=this;return(0,D.A)(function*(){switch(A.signInMethod){case"password":return Ar(E,{returnSecureToken:!0,email:A._email,password:A._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Hs);case"emailLink":return function hu(O,E){return fo.apply(this,arguments)}(E,{email:A._email,oobCode:A._password});default:Tt(E,"internal-error")}})()}_linkToIdToken(E,A){var k=this;return(0,D.A)(function*(){switch(k.signInMethod){case"password":return Ar(E,{idToken:A,returnSecureToken:!0,email:k._email,password:k._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",To);case"emailLink":return function za(O,E){return es.apply(this,arguments)}(E,{idToken:A,email:k._email,oobCode:k._password});default:Tt(E,"internal-error")}})()}_getReauthenticationResolver(E){return this._getIdTokenResponse(E)}}function xo(O,E){return Da.apply(this,arguments)}function Da(){return(Da=(0,D.A)(function*(O,E){return nn(O,"POST","/v1/accounts:signInWithIdp",pe(O,E))})).apply(this,arguments)}class Uo extends Jo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(E){const A=new Uo(E.providerId,E.signInMethod);return E.idToken||E.accessToken?(E.idToken&&(A.idToken=E.idToken),E.accessToken&&(A.accessToken=E.accessToken),E.nonce&&!E.pendingToken&&(A.nonce=E.nonce),E.pendingToken&&(A.pendingToken=E.pendingToken)):E.oauthToken&&E.oauthTokenSecret?(A.accessToken=E.oauthToken,A.secret=E.oauthTokenSecret):Tt("argument-error"),A}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(E){const A="string"==typeof E?JSON.parse(E):E,{providerId:k,signInMethod:te}=A,ue=(0,Ze.Tt)(A,["providerId","signInMethod"]);if(!k||!te)return null;const Ge=new Uo(k,te);return Ge.idToken=ue.idToken||void 0,Ge.accessToken=ue.accessToken||void 0,Ge.secret=ue.secret,Ge.nonce=ue.nonce,Ge.pendingToken=ue.pendingToken||null,Ge}_getIdTokenResponse(E){return xo(E,this.buildRequest())}_linkToIdToken(E,A){const k=this.buildRequest();return k.idToken=A,xo(E,k)}_getReauthenticationResolver(E){const A=this.buildRequest();return A.autoCreate=!1,xo(E,A)}buildRequest(){const E={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)E.pendingToken=this.pendingToken;else{const A={};this.idToken&&(A.id_token=this.idToken),this.accessToken&&(A.access_token=this.accessToken),this.secret&&(A.oauth_token_secret=this.secret),A.providerId=this.providerId,this.nonce&&!this.pendingToken&&(A.nonce=this.nonce),E.postBody=(0,L.Am)(A)}return E}}class Ra{constructor(E){var A,k,te,ue,Ge,ot;const jt=(0,L.I9)((0,L.hp)(E)),Cn=null!==(A=jt.apiKey)&&void 0!==A?A:null,In=null!==(k=jt.oobCode)&&void 0!==k?k:null,vr=function hr(O){switch(O){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(te=jt.mode)&&void 0!==te?te:null);Xe(Cn&&In&&vr,"argument-error"),this.apiKey=Cn,this.operation=vr,this.code=In,this.continueUrl=null!==(ue=jt.continueUrl)&&void 0!==ue?ue:null,this.languageCode=null!==(Ge=jt.languageCode)&&void 0!==Ge?Ge:null,this.tenantId=null!==(ot=jt.tenantId)&&void 0!==ot?ot:null}static parseLink(E){const A=function $s(O){const E=(0,L.I9)((0,L.hp)(O)).link,A=E?(0,L.I9)((0,L.hp)(E)).deep_link_id:null,k=(0,L.I9)((0,L.hp)(O)).deep_link_id;return(k?(0,L.I9)((0,L.hp)(k)).link:null)||k||A||E||O}(E);try{return new Ra(A)}catch{return null}}}let pu=(()=>{class O{constructor(){this.providerId=O.PROVIDER_ID}static credential(A,k){return ha._fromEmailAndPassword(A,k)}static credentialWithLink(A,k){const te=Ra.parseLink(k);return Xe(te,"argument-error"),ha._fromEmailAndCode(A,te.code,te.tenantId)}}return O.PROVIDER_ID="password",O.EMAIL_PASSWORD_SIGN_IN_METHOD="password",O.EMAIL_LINK_SIGN_IN_METHOD="emailLink",O})();class oo{constructor(E){this.providerId=E,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(E){this.defaultLanguageCode=E}setCustomParameters(E){return this.customParameters=E,this}getCustomParameters(){return this.customParameters}}class ga extends oo{constructor(){super(...arguments),this.scopes=[]}addScope(E){return this.scopes.includes(E)||this.scopes.push(E),this}getScopes(){return[...this.scopes]}}let Vc=(()=>{class O extends ga{constructor(){super("google.com"),this.addScope("profile")}static credential(A,k){return Uo._fromParams({providerId:O.PROVIDER_ID,signInMethod:O.GOOGLE_SIGN_IN_METHOD,idToken:A,accessToken:k})}static credentialFromResult(A){return O.credentialFromTaggedObject(A)}static credentialFromError(A){return O.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A)return null;const{oauthIdToken:k,oauthAccessToken:te}=A;if(!k&&!te)return null;try{return O.credential(k,te)}catch{return null}}}return O.GOOGLE_SIGN_IN_METHOD="google.com",O.PROVIDER_ID="google.com",O})(),mc=(()=>{class O extends ga{constructor(){super("github.com")}static credential(A){return Uo._fromParams({providerId:O.PROVIDER_ID,signInMethod:O.GITHUB_SIGN_IN_METHOD,accessToken:A})}static credentialFromResult(A){return O.credentialFromTaggedObject(A)}static credentialFromError(A){return O.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A||!("oauthAccessToken"in A)||!A.oauthAccessToken)return null;try{return O.credential(A.oauthAccessToken)}catch{return null}}}return O.GITHUB_SIGN_IN_METHOD="github.com",O.PROVIDER_ID="github.com",O})();function Gr(O,E){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,D.A)(function*(O,E){return nn(O,"POST","/v1/accounts:signUp",pe(O,E))})).apply(this,arguments)}class Tr{constructor(E){this.user=E.user,this.providerId=E.providerId,this._tokenResponse=E._tokenResponse,this.operationType=E.operationType}static _fromIdTokenResponse(E,A,k,te=!1){return(0,D.A)(function*(){const ue=yield Kt._fromIdTokenResponse(E,k,te),Ge=jo(k);return new Tr({user:ue,providerId:Ge,_tokenResponse:k,operationType:A})})()}static _forOperation(E,A,k){return(0,D.A)(function*(){yield E._updateTokensIfNecessary(k,!0);const te=jo(k);return new Tr({user:E,providerId:te,_tokenResponse:k,operationType:A})})()}}function jo(O){return O.providerId?O.providerId:"phoneNumber"in O?"phone":null}class Ho extends L.g{constructor(E,A,k,te){var ue;super(A.code,A.message),this.operationType=k,this.user=te,Object.setPrototypeOf(this,Ho.prototype),this.customData={appName:E.name,tenantId:null!==(ue=E.tenantId)&&void 0!==ue?ue:void 0,_serverResponse:A.customData._serverResponse,operationType:k}}static _fromErrorAndOperation(E,A,k,te){return new Ho(E,A,k,te)}}function Fn(O,E,A,k){return("reauthenticate"===E?A._getReauthenticationResolver(O):A._getIdTokenResponse(O)).catch(ue=>{throw"auth/multi-factor-auth-required"===ue.code?Ho._fromErrorAndOperation(O,ue,E,k):ue})}function Yr(){return(Yr=(0,D.A)(function*(O,E,A=!1){const k=yield jn(O,E._linkToIdToken(O.auth,yield O.getIdToken()),A);return Tr._forOperation(O,"link",k)})).apply(this,arguments)}function Bu(){return(Bu=(0,D.A)(function*(O,E,A=!1){const{auth:k}=O;if((0,T.xZ)(k.app))return Promise.reject(Ht(k));const te="reauthenticate";try{const ue=yield jn(O,Fn(k,te,E,O),A);Xe(ue.idToken,k,"internal-error");const Ge=Wr(ue.idToken);Xe(Ge,k,"internal-error");const{sub:ot}=Ge;return Xe(O.uid===ot,k,"user-mismatch"),Tr._forOperation(O,te,ue)}catch(ue){throw"auth/user-not-found"===ue?.code&&Tt(k,"user-mismatch"),ue}})).apply(this,arguments)}function cl(O,E){return Y.apply(this,arguments)}function Y(){return(Y=(0,D.A)(function*(O,E,A=!1){if((0,T.xZ)(O.app))return Promise.reject(Ht(O));const k="signIn",te=yield Fn(O,k,E),ue=yield Tr._fromIdTokenResponse(O,k,te);return A||(yield O._updateCurrentUser(ue.user)),ue})).apply(this,arguments)}function H(){return(H=(0,D.A)(function*(O,E){return cl(Xr(O),E)})).apply(this,arguments)}function fs(O){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,D.A)(function*(O){const E=Xr(O);E._getPasswordPolicyInternal()&&(yield E._updatePasswordPolicy())})).apply(this,arguments)}function ll(O,E,A){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,D.A)(function*(O,E,A){if((0,T.xZ)(O.app))return Promise.reject(Ht(O));const k=Xr(O),Ge=yield Ar(k,{returnSecureToken:!0,email:E,password:A,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gr).catch(jt=>{throw"auth/password-does-not-meet-requirements"===jt.code&&fs(O),jt}),ot=yield Tr._fromIdTokenResponse(k,"signIn",Ge);return yield k._updateCurrentUser(ot.user),ot})).apply(this,arguments)}function yc(O,E,A){return(0,T.xZ)(O.app)?Promise.reject(Ht(O)):function Z(O,E){return H.apply(this,arguments)}((0,L.Ku)(O),pu.credential(E,A)).catch(function(){var k=(0,D.A)(function*(te){throw"auth/password-does-not-meet-requirements"===te.code&&fs(O),te});return function(te){return k.apply(this,arguments)}}())}function Zt(){return(Zt=(0,D.A)(function*(O,E){return ye(O,"POST","/v1/accounts:update",E)})).apply(this,arguments)}function Dd(O,E){return _r.apply(this,arguments)}function _r(){return _r=(0,D.A)(function*(O,{displayName:E,photoURL:A}){if(void 0===E&&void 0===A)return;const k=(0,L.Ku)(O),ue={idToken:yield k.getIdToken(),displayName:E,photoUrl:A,returnSecureToken:!0},Ge=yield jn(k,function Or(O,E){return Zt.apply(this,arguments)}(k.auth,ue));k.displayName=Ge.displayName||null,k.photoURL=Ge.photoUrl||null;const ot=k.providerData.find(({providerId:jt})=>"password"===jt);ot&&(ot.displayName=k.displayName,ot.photoURL=k.photoURL),yield k._updateTokensIfNecessary(Ge)}),_r.apply(this,arguments)}function ns(O,E,A,k){return(0,L.Ku)(O).onAuthStateChanged(E,A,k)}const ju="__sak";class cn{constructor(E,A){this.storageRetriever=E,this.type=A}_isAvailable(){try{return this.storage?(this.storage.setItem(ju,"1"),this.storage.removeItem(ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(E,A){return this.storage.setItem(E,JSON.stringify(A)),Promise.resolve()}_get(E){const A=this.storage.getItem(E);return Promise.resolve(A?JSON.parse(A):null)}_remove(E){return this.storage.removeItem(E),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bi=(()=>{class O extends cn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(A,k)=>this.onStorageEvent(A,k),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cc(){const O=(0,L.ZQ)();return ui(O)||As(O)}()&&function rn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xt(),this._shouldAllowMigration=!0}forAllChangedKeys(A){for(const k of Object.keys(this.listeners)){const te=this.storage.getItem(k),ue=this.localCache[k];te!==ue&&A(k,ue,te)}}onStorageEvent(A,k=!1){if(!A.key)return void this.forAllChangedKeys((ot,jt,Cn)=>{this.notifyListeners(ot,Cn)});const te=A.key;if(k?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ot=this.storage.getItem(te);if(A.newValue!==ot)null!==A.newValue?this.storage.setItem(te,A.newValue):this.storage.removeItem(te);else if(this.localCache[te]===A.newValue&&!k)return}const ue=()=>{const ot=this.storage.getItem(te);!k&&this.localCache[te]===ot||this.notifyListeners(te,ot)},Ge=this.storage.getItem(te);!function ze(){return(0,L.lT)()&&10===document.documentMode}()||Ge===A.newValue||A.newValue===A.oldValue?ue():setTimeout(ue,10)}notifyListeners(A,k){this.localCache[A]=k;const te=this.listeners[A];if(te)for(const ue of Array.from(te))ue(k&&JSON.parse(k))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((A,k,te)=>{this.onStorageEvent(new StorageEvent("storage",{key:A,oldValue:k,newValue:te}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(A,k){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[A]||(this.listeners[A]=new Set,this.localCache[A]=this.storage.getItem(A)),this.listeners[A].add(k)}_removeListener(A,k){this.listeners[A]&&(this.listeners[A].delete(k),0===this.listeners[A].size&&delete this.listeners[A]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(A,k){var te=()=>super._set,ue=this;return(0,D.A)(function*(){yield te().call(ue,A,k),ue.localCache[A]=JSON.stringify(k)})()}_get(A){var k=()=>super._get,te=this;return(0,D.A)(function*(){const ue=yield k().call(te,A);return te.localCache[A]=JSON.stringify(ue),ue})()}_remove(A){var k=()=>super._remove,te=this;return(0,D.A)(function*(){yield k().call(te,A),delete te.localCache[A]})()}}return O.type="LOCAL",O})(),yu=(()=>{class O extends cn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(A,k){}_removeListener(A,k){}}return O.type="SESSION",O})();let Wo=(()=>{class O{constructor(A){this.eventTarget=A,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(A){const k=this.receivers.find(ue=>ue.isListeningto(A));if(k)return k;const te=new O(A);return this.receivers.push(te),te}isListeningto(A){return this.eventTarget===A}handleEvent(A){var k=this;return(0,D.A)(function*(){const te=A,{eventId:ue,eventType:Ge,data:ot}=te.data,jt=k.handlersMap[Ge];if(!jt?.size)return;te.ports[0].postMessage({status:"ack",eventId:ue,eventType:Ge});const Cn=Array.from(jt).map(function(){var vr=(0,D.A)(function*(ys){return ys(te.origin,ot)});return function(ys){return vr.apply(this,arguments)}}()),In=yield function zo(O){return Promise.all(O.map(function(){var E=(0,D.A)(function*(A){try{return{fulfilled:!0,value:yield A}}catch(k){return{fulfilled:!1,reason:k}}});return function(A){return E.apply(this,arguments)}}()))}(Cn);te.ports[0].postMessage({status:"done",eventId:ue,eventType:Ge,response:In})})()}_subscribe(A,k){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[A]||(this.handlersMap[A]=new Set),this.handlersMap[A].add(k)}_unsubscribe(A,k){this.handlersMap[A]&&k&&this.handlersMap[A].delete(k),(!k||0===this.handlersMap[A].size)&&delete this.handlersMap[A],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return O.receivers=[],O})();function Os(O="",E=10){let A="";for(let k=0;k<E;k++)A+=Math.floor(10*Math.random());return O+A}class Gc{constructor(E){this.target=E,this.handlers=new Set}removeMessageHandler(E){E.messageChannel&&(E.messageChannel.port1.removeEventListener("message",E.onMessage),E.messageChannel.port1.close()),this.handlers.delete(E)}_send(E,A,k=50){var te=this;return(0,D.A)(function*(){const ue=typeof MessageChannel<"u"?new MessageChannel:null;if(!ue)throw new Error("connection_unavailable");let Ge,ot;return new Promise((jt,Cn)=>{const In=Os("",20);ue.port1.start();const vr=setTimeout(()=>{Cn(new Error("unsupported_event"))},k);ot={messageChannel:ue,onMessage(ys){const Zc=ys;if(Zc.data.eventId===In)switch(Zc.data.status){case"ack":clearTimeout(vr),Ge=setTimeout(()=>{Cn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ge),jt(Zc.data.response);break;default:clearTimeout(vr),clearTimeout(Ge),Cn(new Error("invalid_response"))}}},te.handlers.add(ot),ue.port1.addEventListener("message",ot.onMessage),te.target.postMessage({eventType:E,eventId:In,data:A},[ue.port2])}).finally(()=>{ot&&te.removeMessageHandler(ot)})})()}}function Co(){return window}function pi(){return typeof Co().WorkerGlobalScope<"u"&&"function"==typeof Co().importScripts}function qs(){return(qs=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ka="firebaseLocalStorageDb",Fa="firebaseLocalStorage",La="fbase_key";class Zi{constructor(E){this.request=E}toPromise(){return new Promise((E,A)=>{this.request.addEventListener("success",()=>{E(this.request.result)}),this.request.addEventListener("error",()=>{A(this.request.error)})})}}function Ic(O,E){return O.transaction([Fa],E?"readwrite":"readonly").objectStore(Fa)}function jl(){const O=indexedDB.open(ka,1);return new Promise((E,A)=>{O.addEventListener("error",()=>{A(O.error)}),O.addEventListener("upgradeneeded",()=>{const k=O.result;try{k.createObjectStore(Fa,{keyPath:La})}catch(te){A(te)}}),O.addEventListener("success",(0,D.A)(function*(){const k=O.result;k.objectStoreNames.contains(Fa)?E(k):(k.close(),yield function Wu(){const O=indexedDB.deleteDatabase(ka);return new Zi(O).toPromise()}(),E(yield jl()))}))})}function Ir(O,E,A){return fl.apply(this,arguments)}function fl(){return(fl=(0,D.A)(function*(O,E,A){const k=Ic(O,!0).put({[La]:E,value:A});return new Zi(k).toPromise()})).apply(this,arguments)}function Hl(){return(Hl=(0,D.A)(function*(O,E){const A=Ic(O,!1).get(E),k=yield new Zi(A).toPromise();return void 0===k?null:k.value})).apply(this,arguments)}function gn(O,E){const A=Ic(O,!0).delete(E);return new Zi(A).toPromise()}const Gl=(()=>{class O{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var A=this;return(0,D.A)(function*(){return A.db||(A.db=yield jl()),A.db})()}_withRetries(A){var k=this;return(0,D.A)(function*(){let te=0;for(;;)try{const ue=yield k._openDb();return yield A(ue)}catch(ue){if(te++>3)throw ue;k.db&&(k.db.close(),k.db=void 0)}})()}initializeServiceWorkerMessaging(){var A=this;return(0,D.A)(function*(){return pi()?A.initializeReceiver():A.initializeSender()})()}initializeReceiver(){var A=this;return(0,D.A)(function*(){A.receiver=Wo._getInstance(function Pd(){return pi()?self:null}()),A.receiver._subscribe("keyChanged",function(){var k=(0,D.A)(function*(te,ue){return{keyProcessed:(yield A._poll()).includes(ue.key)}});return function(te,ue){return k.apply(this,arguments)}}()),A.receiver._subscribe("ping",function(){var k=(0,D.A)(function*(te,ue){return["keyChanged"]});return function(te,ue){return k.apply(this,arguments)}}())})()}initializeSender(){var A=this;return(0,D.A)(function*(){var k,te;if(A.activeServiceWorker=yield function Pr(){return qs.apply(this,arguments)}(),!A.activeServiceWorker)return;A.sender=new Gc(A.activeServiceWorker);const ue=yield A.sender._send("ping",{},800);ue&&null!==(k=ue[0])&&void 0!==k&&k.fulfilled&&null!==(te=ue[0])&&void 0!==te&&te.value.includes("keyChanged")&&(A.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(A){var k=this;return(0,D.A)(function*(){if(k.sender&&k.activeServiceWorker&&function zu(){var O;return(null===(O=navigator?.serviceWorker)||void 0===O?void 0:O.controller)||null}()===k.activeServiceWorker)try{yield k.sender._send("keyChanged",{key:A},k.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const A=yield jl();return yield Ir(A,ju,"1"),yield gn(A,ju),!0}catch{}return!1})()}_withPendingWrite(A){var k=this;return(0,D.A)(function*(){k.pendingWrites++;try{yield A()}finally{k.pendingWrites--}})()}_set(A,k){var te=this;return(0,D.A)(function*(){return te._withPendingWrite((0,D.A)(function*(){return yield te._withRetries(ue=>Ir(ue,A,k)),te.localCache[A]=k,te.notifyServiceWorker(A)}))})()}_get(A){var k=this;return(0,D.A)(function*(){const te=yield k._withRetries(ue=>function hl(O,E){return Hl.apply(this,arguments)}(ue,A));return k.localCache[A]=te,te})()}_remove(A){var k=this;return(0,D.A)(function*(){return k._withPendingWrite((0,D.A)(function*(){return yield k._withRetries(te=>gn(te,A)),delete k.localCache[A],k.notifyServiceWorker(A)}))})()}_poll(){var A=this;return(0,D.A)(function*(){const k=yield A._withRetries(Ge=>{const ot=Ic(Ge,!1).getAll();return new Zi(ot).toPromise()});if(!k)return[];if(0!==A.pendingWrites)return[];const te=[],ue=new Set;if(0!==k.length)for(const{fbase_key:Ge,value:ot}of k)ue.add(Ge),JSON.stringify(A.localCache[Ge])!==JSON.stringify(ot)&&(A.notifyListeners(Ge,ot),te.push(Ge));for(const Ge of Object.keys(A.localCache))A.localCache[Ge]&&!ue.has(Ge)&&(A.notifyListeners(Ge,null),te.push(Ge));return te})()}notifyListeners(A,k){this.localCache[A]=k;const te=this.listeners[A];if(te)for(const ue of Array.from(te))ue(k)}startPolling(){var A=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return A._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(A,k){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[A]||(this.listeners[A]=new Set,this._get(A)),this.listeners[A].add(k)}_removeListener(A,k){this.listeners[A]&&(this.listeners[A].delete(k),0===this.listeners[A].size&&delete this.listeners[A]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return O.type="LOCAL",O})();function Ja(O,E){return E?zn(E):(Xe(O._popupRedirectResolver,O,"argument-error"),O._popupRedirectResolver)}Ts("rcb"),new Un(3e4,6e4);class Tf extends Jo{constructor(E){super("custom","custom"),this.params=E}_getIdTokenResponse(E){return xo(E,this._buildIdpRequest())}_linkToIdToken(E,A){return xo(E,this._buildIdpRequest(A))}_getReauthenticationResolver(E){return xo(E,this._buildIdpRequest())}_buildIdpRequest(E){const A={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return E&&(A.idToken=E),A}}function $l(O){return cl(O.auth,new Tf(O),O.bypassAuthState)}function xf(O){const{auth:E,user:A}=O;return Xe(A,E,"internal-error"),function So(O,E){return Bu.apply(this,arguments)}(A,new Tf(O),O.bypassAuthState)}function Fd(O){return qu.apply(this,arguments)}function qu(){return(qu=(0,D.A)(function*(O){const{auth:E,user:A}=O;return Xe(A,E,"internal-error"),function Go(O,E){return Yr.apply(this,arguments)}(A,new Tf(O),O.bypassAuthState)})).apply(this,arguments)}class zl{constructor(E,A,k,te,ue=!1){this.auth=E,this.resolver=k,this.user=te,this.bypassAuthState=ue,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(A)?A:[A]}execute(){var E=this;return new Promise(function(){var A=(0,D.A)(function*(k,te){E.pendingPromise={resolve:k,reject:te};try{E.eventManager=yield E.resolver._initialize(E.auth),yield E.onExecution(),E.eventManager.registerConsumer(E)}catch(ue){E.reject(ue)}});return function(k,te){return A.apply(this,arguments)}}())}onAuthEvent(E){var A=this;return(0,D.A)(function*(){const{urlResponse:k,sessionId:te,postBody:ue,tenantId:Ge,error:ot,type:jt}=E;if(ot)return void A.reject(ot);const Cn={auth:A.auth,requestUri:k,sessionId:te,tenantId:Ge||void 0,postBody:ue||void 0,user:A.user,bypassAuthState:A.bypassAuthState};try{A.resolve(yield A.getIdpTask(jt)(Cn))}catch(In){A.reject(In)}})()}onError(E){this.reject(E)}getIdpTask(E){switch(E){case"signInViaPopup":case"signInViaRedirect":return $l;case"linkViaPopup":case"linkViaRedirect":return Fd;case"reauthViaPopup":case"reauthViaRedirect":return xf;default:Tt(this.auth,"internal-error")}}resolve(E){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(E),this.unregisterAndCleanUp()}reject(E){xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(E),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wu=new Un(2e3,1e4);function Wc(O,E,A){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,D.A)(function*(O,E,A){if((0,T.xZ)(O.app))return Promise.reject(Ct(O,"operation-not-supported-in-this-environment"));const k=Xr(O);!function Xt(O,E,A){if(!(E instanceof A))throw A.name!==E.constructor.name&&Tt(O,"argument-error"),kt(O,"argument-error",`Type of ${E.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(O,E,oo);const te=Ja(k,A);return new qo(k,"signInViaPopup",E,te).executeNotNull()})).apply(this,arguments)}let qo=(()=>{class O extends zl{constructor(A,k,te,ue,Ge){super(A,k,ue,Ge),this.provider=te,this.authWindow=null,this.pollId=null,O.currentPopupAction&&O.currentPopupAction.cancel(),O.currentPopupAction=this}executeNotNull(){var A=this;return(0,D.A)(function*(){const k=yield A.execute();return Xe(k,A.auth,"internal-error"),k})()}onExecution(){var A=this;return(0,D.A)(function*(){xn(1===A.filter.length,"Popup operations only handle one event");const k=Os();A.authWindow=yield A.resolver._openPopup(A.auth,A.provider,A.filter[0],k),A.authWindow.associatedEvent=k,A.resolver._originValidation(A.auth).catch(te=>{A.reject(te)}),A.resolver._isIframeWebStorageSupported(A.auth,te=>{te||A.reject(Ct(A.auth,"web-storage-unsupported"))}),A.pollUserCancellation()})()}get eventId(){var A;return(null===(A=this.authWindow)||void 0===A?void 0:A.associatedEvent)||null}cancel(){this.reject(Ct(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,O.currentPopupAction=null}pollUserCancellation(){const A=()=>{var k,te;this.pollId=null!==(te=null===(k=this.authWindow)||void 0===k?void 0:k.window)&&void 0!==te&&te.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ct(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(A,wu.get())};A()}}return O.currentPopupAction=null,O})();const Ac="pendingRedirect",ja=new Map;class Th extends zl{constructor(E,A,k=!1){super(E,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],A,void 0,k),this.eventId=null}execute(){var E=()=>super.execute,A=this;return(0,D.A)(function*(){let k=ja.get(A.auth._key());if(!k){try{const ue=(yield function xh(O,E){return Lr.apply(this,arguments)}(A.resolver,A.auth))?yield E().call(A):null;k=()=>Promise.resolve(ue)}catch(te){k=()=>Promise.reject(te)}ja.set(A.auth._key(),k)}return A.bypassAuthState||ja.set(A.auth._key(),()=>Promise.resolve(null)),k()})()}onAuthEvent(E){var A=()=>super.onAuthEvent,k=this;return(0,D.A)(function*(){if("signInViaRedirect"===E.type)return A().call(k,E);if("unknown"!==E.type){if(E.eventId){const te=yield k.auth._redirectUserForId(E.eventId);if(te)return k.user=te,A().call(k,E);k.resolve(null)}}else k.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function Lr(){return(Lr=(0,D.A)(function*(O,E){const A=function bc(O){return vi(Ac,O.config.apiKey,O.name)}(E),k=function ec(O){return zn(O._redirectPersistence)}(O);if(!(yield k._isAvailable()))return!1;const te="true"===(yield k._get(A));return yield k._remove(A),te})).apply(this,arguments)}function Ld(O,E){ja.set(O._key(),E)}function Rh(O,E){return Au.apply(this,arguments)}function Au(){return(Au=(0,D.A)(function*(O,E,A=!1){if((0,T.xZ)(O.app))return Promise.reject(Ht(O));const k=Xr(O),te=Ja(k,E),Ge=yield new Th(k,te,A).execute();return Ge&&!A&&(delete Ge.user._redirectEventId,yield k._persistUserIfCurrent(Ge.user),yield k._setRedirectUser(null,E)),Ge})).apply(this,arguments)}class Bd{constructor(E){this.auth=E,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(E){this.consumers.add(E),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,E)&&(this.sendToConsumer(this.queuedRedirectEvent,E),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(E){this.consumers.delete(E)}onEvent(E){if(this.hasEventBeenHandled(E))return!1;let A=!1;return this.consumers.forEach(k=>{this.isEventForConsumer(E,k)&&(A=!0,this.sendToConsumer(E,k),this.saveEventToCache(E))}),this.hasHandledPotentialRedirect||!function Dn(O){switch(O.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qt(O);default:return!1}}(E)||(this.hasHandledPotentialRedirect=!0,A||(this.queuedRedirectEvent=E,A=!0)),A}sendToConsumer(E,A){var k;if(E.error&&!qt(E)){const te=(null===(k=E.error.code)||void 0===k?void 0:k.split("auth/")[1])||"internal-error";A.onError(Ct(this.auth,te))}else A.onAuthEvent(E)}isEventForConsumer(E,A){const k=null===A.eventId||!!E.eventId&&E.eventId===A.eventId;return A.filter.includes(E.type)&&k}hasEventBeenHandled(E){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ui(E))}saveEventToCache(E){this.cachedEventUids.add(Ui(E)),this.lastProcessedEventTime=Date.now()}}function Ui(O){return[O.type,O.eventId,O.sessionId,O.tenantId].filter(E=>E).join("-")}function qt({type:O,error:E}){return"unknown"===O&&"auth/no-auth-event"===E?.code}function ms(){return(ms=(0,D.A)(function*(O,E={}){return ye(O,"GET","/v1/projects",E)})).apply(this,arguments)}const _s=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vs=/^https?/;function Ii(){return Ii=(0,D.A)(function*(O){if(O.config.emulator)return;const{authorizedDomains:E}=yield function wo(O){return ms.apply(this,arguments)}(O);for(const A of E)try{if(Pi(A))return}catch{}Tt(O,"unauthorized-domain")}),Ii.apply(this,arguments)}function Pi(O){const E=Bt(),{protocol:A,hostname:k}=new URL(E);if(O.startsWith("chrome-extension://")){const Ge=new URL(O);return""===Ge.hostname&&""===k?"chrome-extension:"===A&&O.replace("chrome-extension://","")===E.replace("chrome-extension://",""):"chrome-extension:"===A&&Ge.hostname===k}if(!vs.test(A))return!1;if(_s.test(O))return k===O;const te=O.replace(/\./g,"\\.");return new RegExp("^(.+\\."+te+"|"+te+")$","i").test(k)}const Ni=new Un(3e4,6e4);function ir(){const O=Co().___jsl;if(O?.H)for(const E of Object.keys(O.H))if(O.H[E].r=O.H[E].r||[],O.H[E].L=O.H[E].L||[],O.H[E].r=[...O.H[E].L],O.CP)for(let A=0;A<O.CP.length;A++)O.CP[A]=null}let nc=null;const Ai=new Un(5e3,15e3),Qu="__/auth/iframe",Xc="emulator/auth/iframe",go={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},El=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Of(O){const E=O.config;Xe(E.authDomain,O,"auth-domain-config-required");const A=E.emulator?De(E,Xc):`https://${O.config.authDomain}/${Qu}`,k={apiKey:E.apiKey,appName:O.name,v:T.MF},te=El.get(O.config.apiHost);te&&(k.eid=te);const ue=O._getFrameworks();return ue.length&&(k.fw=ue.join(",")),`${A}?${(0,L.Am)(k).slice(1)}`}function bu(){return bu=(0,D.A)(function*(O){const E=yield function yl(O){return nc=nc||function Ql(O){return new Promise((E,A)=>{var k,te,ue;function Ge(){ir(),gapi.load("gapi.iframes",{callback:()=>{E(gapi.iframes.getContext())},ontimeout:()=>{ir(),A(Ct(O,"network-request-failed"))},timeout:Ni.get()})}if(null!==(te=null===(k=Co().gapi)||void 0===k?void 0:k.iframes)&&void 0!==te&&te.Iframe)E(gapi.iframes.getContext());else{if(null===(ue=Co().gapi)||void 0===ue||!ue.load){const ot=Ts("iframefcb");return Co()[ot]=()=>{gapi.load?Ge():A(Ct(O,"network-request-failed"))},ca(`${function hc(){return bs.gapiScript}()}?onload=${ot}`).catch(jt=>A(jt))}Ge()}}).catch(E=>{throw nc=null,E})}(O),nc}(O),A=Co().gapi;return Xe(A,O,"internal-error"),E.open({where:document.body,url:Of(O),messageHandlersFilter:A.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:go,dontclear:!0},k=>new Promise(function(){var te=(0,D.A)(function*(ue,Ge){yield k.restyle({setHideOnLeave:!1});const ot=Ct(O,"network-request-failed"),jt=Co().setTimeout(()=>{Ge(ot)},Ai.get());function Cn(){Co().clearTimeout(jt),ue(k)}k.ping(Cn).then(Cn,()=>{Ge(ot)})});return function(ue,Ge){return te.apply(this,arguments)}}()))}),bu.apply(this,arguments)}const rc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cl{constructor(E){this.window=E,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const wl="__/auth/handler",Oo="emulator/auth/handler",ks=encodeURIComponent("fac");function Ks(O,E,A,k,te,ue){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,D.A)(function*(O,E,A,k,te,ue){Xe(O.config.authDomain,O,"auth-domain-config-required"),Xe(O.config.apiKey,O,"invalid-api-key");const Ge={apiKey:O.config.apiKey,appName:O.name,authType:A,redirectUrl:k,v:T.MF,eventId:te};if(E instanceof oo){E.setDefaultLanguage(O.languageCode),Ge.providerId=E.providerId||"",(0,L.Im)(E.getCustomParameters())||(Ge.customParameters=JSON.stringify(E.getCustomParameters()));for(const[In,vr]of Object.entries(ue||{}))Ge[In]=vr}if(E instanceof ga){const In=E.getScopes().filter(vr=>""!==vr);In.length>0&&(Ge.scopes=In.join(","))}O.tenantId&&(Ge.tid=O.tenantId);const ot=Ge;for(const In of Object.keys(ot))void 0===ot[In]&&delete ot[In];const jt=yield O._getAppCheckToken(),Cn=jt?`#${ks}=${encodeURIComponent(jt)}`:"";return`${function Yl({config:O}){return O.emulator?De(O,Oo):`https://${O.authDomain}/${wl}`}(O)}?${(0,L.Am)(ot).slice(1)}${Cn}`})).apply(this,arguments)}const Ca="webStorageSupport",Il=class xc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yu,this._completeRedirectFn=Rh,this._overrideRedirectResult=Ld}_openPopup(E,A,k,te){var ue=this;return(0,D.A)(function*(){var Ge;xn(null===(Ge=ue.eventManagers[E._key()])||void 0===Ge?void 0:Ge.manager,"_initialize() not called before _openPopup()");const ot=yield Ks(E,A,k,Bt(),te);return function Qc(O,E,A,k=500,te=600){const ue=Math.max((window.screen.availHeight-te)/2,0).toString(),Ge=Math.max((window.screen.availWidth-k)/2,0).toString();let ot="";const jt=Object.assign(Object.assign({},rc),{width:k.toString(),height:te.toString(),top:ue,left:Ge}),Cn=(0,L.ZQ)().toLowerCase();A&&(ot=Us(Cn)?"_blank":A),Hr(Cn)&&(E=E||"http://localhost",jt.scrollbars="yes");const In=Object.entries(jt).reduce((ys,[Zc,Tl])=>`${ys}${Zc}=${Tl},`,"");if(function vt(O=(0,L.ZQ)()){var E;return As(O)&&!(null===(E=window.navigator)||void 0===E||!E.standalone)}(Cn)&&"_self"!==ot)return function mo(O,E){const A=document.createElement("a");A.href=O,A.target=E;const k=document.createEvent("MouseEvent");k.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),A.dispatchEvent(k)}(E||"",ot),new Cl(null);const vr=window.open(E||"",ot,In);Xe(vr,O,"popup-blocked");try{vr.focus()}catch{}return new Cl(vr)}(E,ot,Os())})()}_openRedirect(E,A,k,te){var ue=this;return(0,D.A)(function*(){return yield ue._originValidation(E),function $u(O){Co().location.href=O}(yield Ks(E,A,k,Bt(),te)),new Promise(()=>{})})()}_initialize(E){const A=E._key();if(this.eventManagers[A]){const{manager:te,promise:ue}=this.eventManagers[A];return te?Promise.resolve(te):(xn(ue,"If manager is not set, promise should be"),ue)}const k=this.initAndGetManager(E);return this.eventManagers[A]={promise:k},k.catch(()=>{delete this.eventManagers[A]}),k}initAndGetManager(E){var A=this;return(0,D.A)(function*(){const k=yield function Ns(O){return bu.apply(this,arguments)}(E),te=new Bd(E);return k.register("authEvent",ue=>(Xe(ue?.authEvent,E,"invalid-auth-event"),{status:te.onEvent(ue.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),A.eventManagers[E._key()]={manager:te},A.iframes[E._key()]=k,te})()}_isIframeWebStorageSupported(E,A){this.iframes[E._key()].send(Ca,{type:Ca},te=>{var ue;const Ge=null===(ue=te?.[0])||void 0===ue?void 0:ue[Ca];void 0!==Ge&&A(!!Ge),Tt(E,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(E){const A=E._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=function vl(O){return Ii.apply(this,arguments)}(E)),this.originValidationPromises[A]}get _shouldInitProactively(){return xt()||ui()||As()}};var $p="@firebase/auth";class zp{constructor(E){this.auth=E,this.internalListeners=new Map}getUid(){var E;return this.assertAuthConfigured(),(null===(E=this.auth.currentUser)||void 0===E?void 0:E.uid)||null}getToken(E){var A=this;return(0,D.A)(function*(){return A.assertAuthConfigured(),yield A.auth._initializationPromise,A.auth.currentUser?{accessToken:yield A.auth.currentUser.getIdToken(E)}:null})()}addAuthTokenListener(E){if(this.assertAuthConfigured(),this.internalListeners.has(E))return;const A=this.auth.onIdTokenChanged(k=>{E(k?.stsTokenManager.accessToken||null)});this.internalListeners.set(E,A),this.updateProactiveRefresh()}removeAuthTokenListener(E){this.assertAuthConfigured();const A=this.internalListeners.get(E);A&&(this.internalListeners.delete(E),A(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Hd=(0,L.XA)("authIdTokenMaxAge")||300;let Gd=null;const Ph=O=>function(){var E=(0,D.A)(function*(A){const k=A&&(yield A.getIdTokenResult()),te=k&&((new Date).getTime()-Date.parse(k.issuedAtTime))/1e3;if(te&&te>Hd)return;const ue=k?.token;Gd!==ue&&(Gd=ue,yield fetch(O,{method:ue?"POST":"DELETE",headers:ue?{Authorization:`Bearer ${ue}`}:{}}))});return function(A){return E.apply(this,arguments)}}();function Nh(O=(0,T.Sx)()){const E=(0,T.j6)(O,"auth");if(E.isInitialized())return E.getImmediate();const A=function ua(O,E){const A=(0,T.j6)(O,"auth");if(A.isInitialized()){const te=A.getImmediate(),ue=A.getOptions();if((0,L.bD)(ue,E??{}))return te;Tt(te,"already-initialized")}return A.initialize({options:E})}(O,{popupRedirectResolver:Il,persistence:[Gl,Bi,yu]}),k=(0,L.XA)("authTokenSyncURL");if(k&&"boolean"==typeof isSecureContext&&isSecureContext){const ue=new URL(k,location.origin);if(location.origin===ue.origin){const Ge=Ph(ue.toString());(function ts(O,E,A){(0,L.Ku)(O).beforeAuthStateChanged(E,A)})(A,Ge,()=>Ge(A.currentUser)),function Qi(O,E,A,k){(0,L.Ku)(O).onIdTokenChanged(E,A,k)}(A,ot=>Ge(ot))}}const te=(0,L.Tj)("auth");return te&&function Ri(O,E,A){const k=Xr(O);Xe(k._canInitEmulator,k,"emulator-config-failed"),Xe(/^https?:\/\//.test(E),k,"invalid-emulator-scheme");const te=!!A?.disableWarnings,ue=js(E),{host:Ge,port:ot}=function Bl(O){const E=js(O),A=/(\/\/)?([^?#/]+)/.exec(O.substr(E.length));if(!A)return{host:"",port:null};const k=A[2].split("@").pop()||"",te=/^(\[[^\]]+\])(:|$)/.exec(k);if(te){const ue=te[1];return{host:ue,port:Vi(k.substr(ue.length+1))}}{const[ue,Ge]=k.split(":");return{host:ue,port:Vi(Ge)}}}(E);k.config.emulator={url:`${ue}//${Ge}${null===ot?"":`:${ot}`}/`},k.settings.appVerificationDisabledForTesting=!0,k.emulatorConfig=Object.freeze({host:Ge,port:ot,protocol:ue.replace(":",""),options:Object.freeze({disableWarnings:te})}),te||function Bo(){function O(){const E=document.createElement("p"),A=E.style;E.innerText="Running in emulator mode. Do not use with production credentials.",A.position="fixed",A.width="100%",A.backgroundColor="#ffffff",A.border=".1em solid #000000",A.color="#b50000",A.bottom="0px",A.left="0px",A.margin="0px",A.zIndex="10000",A.textAlign="center",E.classList.add("firebase-emulator-warning"),document.body.appendChild(E)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",O):O())}()}(A,`http://${te}`),A}(function fu(O){bs=O})({loadJS:O=>new Promise((E,A)=>{const k=document.createElement("script");k.setAttribute("src",O),k.onload=E,k.onerror=te=>{const ue=Ct("internal-error");ue.customData=te,A(ue)},k.type="text/javascript",k.charset="UTF-8",function $d(){var O,E;return null!==(E=null===(O=document.getElementsByTagName("head"))||void 0===O?void 0:O[0])&&void 0!==E?E:document}().appendChild(k)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Oh(O){(0,T.om)(new Ce.uA("auth",(E,{options:A})=>{const k=E.getProvider("app").getImmediate(),te=E.getProvider("heartbeat"),ue=E.getProvider("app-check-internal"),{apiKey:Ge,authDomain:ot}=k.options;Xe(Ge&&!Ge.includes(":"),"invalid-api-key",{appName:k.name});const jt={apiKey:Ge,authDomain:ot,clientPlatform:O,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hn(O)},Cn=new Vo(k,te,ue,jt);return function qi(O,E){const A=E?.persistence||[],k=(Array.isArray(A)?A:[A]).map(zn);E?.errorMap&&O._updateErrorMap(E.errorMap),O._initializeWithPersistence(k,E?.popupRedirectResolver)}(Cn,A),Cn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((E,A,k)=>{E.getProvider("auth-internal").initialize()})),(0,T.om)(new Ce.uA("auth-internal",E=>{const A=Xr(E.getProvider("auth").getImmediate());return new zp(A)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,T.KO)($p,"1.7.4",function Wp(O){switch(O){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(O)),(0,T.KO)($p,"1.7.4","esm2017")}("Browser")},467:(yn,wt,ie)=>{function D(L,Be,Ze,Ce,Ke,Et,rt){try{var me=L[Et](rt),Ae=me.value}catch(Pe){return void Ze(Pe)}me.done?Be(Ae):Promise.resolve(Ae).then(Ce,Ke)}function T(L){return function(){var Be=this,Ze=arguments;return new Promise(function(Ce,Ke){var Et=L.apply(Be,Ze);function rt(Ae){D(Et,Ce,Ke,rt,me,"next",Ae)}function me(Ae){D(Et,Ce,Ke,rt,me,"throw",Ae)}rt(void 0)})}}ie.d(wt,{A:()=>T})},1635:(yn,wt,ie)=>{function Be(De,Ve){var bt={};for(var Ne in De)Object.prototype.hasOwnProperty.call(De,Ne)&&Ve.indexOf(Ne)<0&&(bt[Ne]=De[Ne]);if(null!=De&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(Ne=Object.getOwnPropertySymbols(De);pe<Ne.length;pe++)Ve.indexOf(Ne[pe])<0&&Object.prototype.propertyIsEnumerable.call(De,Ne[pe])&&(bt[Ne[pe]]=De[Ne[pe]])}return bt}function Pe(De,Ve,bt,Ne){return new(bt||(bt=Promise))(function(ye,_t){function zt(Qn){try{nn(Ne.next(Qn))}catch(jr){_t(jr)}}function $n(Qn){try{nn(Ne.throw(Qn))}catch(jr){_t(jr)}}function nn(Qn){Qn.done?ye(Qn.value):function pe(ye){return ye instanceof bt?ye:new bt(function(_t){_t(ye)})}(Qn.value).then(zt,$n)}nn((Ne=Ne.apply(De,Ve||[])).next())})}function Tt(De){return this instanceof Tt?(this.v=De,this):new Tt(De)}function Ct(De,Ve,bt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,Ne=bt.apply(De,Ve||[]),ye=[];return pe={},zt("next"),zt("throw"),zt("return",function _t(lr){return function(qr){return Promise.resolve(qr).then(lr,jr)}}),pe[Symbol.asyncIterator]=function(){return this},pe;function zt(lr,qr){Ne[lr]&&(pe[lr]=function(An){return new Promise(function(pr,si){ye.push([lr,An,pr,si])>1||$n(lr,An)})},qr&&(pe[lr]=qr(pe[lr])))}function $n(lr,qr){try{!function nn(lr){lr.value instanceof Tt?Promise.resolve(lr.value.v).then(Qn,jr):to(ye[0][2],lr)}(Ne[lr](qr))}catch(An){to(ye[0][3],An)}}function Qn(lr){$n("next",lr)}function jr(lr){$n("throw",lr)}function to(lr,qr){lr(qr),ye.shift(),ye.length&&$n(ye[0][0],ye[0][1])}}function Ht(De){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bt,Ve=De[Symbol.asyncIterator];return Ve?Ve.call(De):(De=function Mt(De){var Ve="function"==typeof Symbol&&Symbol.iterator,bt=Ve&&De[Ve],Ne=0;if(bt)return bt.call(De);if(De&&"number"==typeof De.length)return{next:function(){return De&&Ne>=De.length&&(De=void 0),{value:De&&De[Ne++],done:!De}}};throw new TypeError(Ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(De),bt={},Ne("next"),Ne("throw"),Ne("return"),bt[Symbol.asyncIterator]=function(){return this},bt);function Ne(ye){bt[ye]=De[ye]&&function(_t){return new Promise(function(zt,$n){!function pe(ye,_t,zt,$n){Promise.resolve($n).then(function(nn){ye({value:nn,done:zt})},_t)}(zt,$n,(_t=De[ye](_t)).done,_t.value)})}}}ie.d(wt,{AQ:()=>Ct,N3:()=>Tt,Tt:()=>Be,sH:()=>Pe,xN:()=>Ht}),"function"==typeof SuppressedError&&SuppressedError}},yn=>{yn(yn.s=6184)}]);