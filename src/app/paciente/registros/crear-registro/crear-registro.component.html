  <form [formGroup]="form" class="main__wrapper" (ngSubmit)="createRegistro()">
  
    <div type="flex" class="panel__wrapper--main">

      <header class="panel__header--row">
          <app-label
          size="lg"
          [label]="editableTitle"
          [prefix]="editableCategory"
          [icon]="'fa-solid fa-' + editableIcon"
          [iconColor]="editableColor"
          direction="horizontal"
        ></app-label>
        <app-badge type="success" label="Registro guardado" size="md"></app-badge>
      </header>

      <div class="form__input--wrapper">
        <label for="titulo">Titulo</label>
        <input type="text" formControlName="titulo" (change)="onTitleChange()">
      </div>

      <div class="form__input--wrapper">
        <label for="descripcion"
          >Description (optional)</label
        >
        <textarea
          rows="5"
          type="text"
          id="descripcion"
          class=""
          placeholder="Your description goes here"
          formControlName="descripcion"
        ></textarea>
      </div>

        @if (qrResultString) {
          <div class="form__input--wrapper">
            <label for="paciente">Registro de esta consulta</label>
            <textarea 
              id="paciente"
              formControlName="paciente">
              {{ qrResultString }}
            </textarea>
            <button (click)="clearResult()">&times;</button>
          </div>
          }

        <div class="form__input--wrapper">
          <label for="categoria">Categor√≠a</label>
          <select id="categoria" formControlName="categoria" (change)="onCategoryChange()">
            <option value="" disabled selected>Select a category</option>
            @for (categoria of categorias; track categoria) {
              <option [value]="categoria">
                {{ categoria }}
              </option>
            }
          </select>
        </div>
          
        <div>
          <a
            class=""
            routerLink="/"
          >
            Back to dashboard
          </a>
  
          <button
            class=""
            type="submit"
          >
            @if (registroId) {
              Edit your registro
            } @else {
              Create your registro
            }
          </button>
        </div>
    </div>

    <div class="panel__wrapper--aside">

    <div class="form__input--wrapper">
      <label for="emisor"
        >emisor</label
      >
      <input
        type="text"
        id="emisor"
        class=""
        placeholder="+51 995123233"
        formControlName="emisor"
      />
    </div>

    
      <zxing-scanner class="qr" [torch]="torchEnabled" [(device)]="currentDevice" (scanSuccess)="onCodeResult($event)"
      [formats]="formatsEnabled" [tryHarder]="tryHarder" (permissionResponse)="onHasPermission($event)"
      (camerasFound)="onCamerasFound($event)" (torchCompatible)="onTorchCompatible($event)"></zxing-scanner>

    </div> 
  </form>
