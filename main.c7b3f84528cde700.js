"use strict";(self.webpackChunkportal_paciente=self.webpackChunkportal_paciente||[]).push([[792],{1076:(yn,wt,ie)=>{ie.d(wt,{Am:()=>cn,FA:()=>_e,Fy:()=>Lt,I9:()=>Lo,Im:()=>oi,Ku:()=>Qe,T9:()=>Dt,Tj:()=>An,Uj:()=>it,XA:()=>It,ZQ:()=>At,bD:()=>Br,cY:()=>_t,eX:()=>je,g:()=>he,hp:()=>Nt,jZ:()=>Ht,lT:()=>Se,lV:()=>Sn,nr:()=>er,sr:()=>_n,tD:()=>un,u:()=>ve,yU:()=>Jn,zW:()=>Pe});const Ue=function(le){const ge=[];let De=0;for(let lt=0;lt<le.length;lt++){let Ke=le.charCodeAt(lt);Ke<128?ge[De++]=Ke:Ke<2048?(ge[De++]=Ke>>6|192,ge[De++]=63&Ke|128):55296==(64512&Ke)&&lt+1<le.length&&56320==(64512&le.charCodeAt(lt+1))?(Ke=65536+((1023&Ke)<<10)+(1023&le.charCodeAt(++lt)),ge[De++]=Ke>>18|240,ge[De++]=Ke>>12&63|128,ge[De++]=Ke>>6&63|128,ge[De++]=63&Ke|128):(ge[De++]=Ke>>12|224,ge[De++]=Ke>>6&63|128,ge[De++]=63&Ke|128)}return ge},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(le,ge){if(!Array.isArray(le))throw Error("encodeByteArray takes an array as a parameter");this.init_();const De=ge?this.byteToCharMapWebSafe_:this.byteToCharMap_,lt=[];for(let Ke=0;Ke<le.length;Ke+=3){const Xt=le[Ke],xn=Ke+1<le.length,Hn=xn?le[Ke+1]:0,Kr=Ke+2<le.length,mr=Kr?le[Ke+2]:0;let Li=(15&Hn)<<2|mr>>6,Hr=63&mr;Kr||(Hr=64,xn||(Li=64)),lt.push(De[Xt>>2],De[(3&Xt)<<4|Hn>>4],De[Li],De[Hr])}return lt.join("")},encodeString(le,ge){return this.HAS_NATIVE_SUPPORT&&!ge?btoa(le):this.encodeByteArray(Ue(le),ge)},decodeString(le,ge){return this.HAS_NATIVE_SUPPORT&&!ge?atob(le):function(le){const ge=[];let De=0,lt=0;for(;De<le.length;){const Ke=le[De++];if(Ke<128)ge[lt++]=String.fromCharCode(Ke);else if(Ke>191&&Ke<224){const Xt=le[De++];ge[lt++]=String.fromCharCode((31&Ke)<<6|63&Xt)}else if(Ke>239&&Ke<365){const Kr=((7&Ke)<<18|(63&le[De++])<<12|(63&le[De++])<<6|63&le[De++])-65536;ge[lt++]=String.fromCharCode(55296+(Kr>>10)),ge[lt++]=String.fromCharCode(56320+(1023&Kr))}else{const Xt=le[De++],xn=le[De++];ge[lt++]=String.fromCharCode((15&Ke)<<12|(63&Xt)<<6|63&xn)}}return ge.join("")}(this.decodeStringToByteArray(le,ge))},decodeStringToByteArray(le,ge){this.init_();const De=ge?this.charToByteMapWebSafe_:this.charToByteMap_,lt=[];for(let Ke=0;Ke<le.length;){const Xt=De[le.charAt(Ke++)],Hn=Ke<le.length?De[le.charAt(Ke)]:0;++Ke;const mr=Ke<le.length?De[le.charAt(Ke)]:64;++Ke;const Yn=Ke<le.length?De[le.charAt(Ke)]:64;if(++Ke,null==Xt||null==Hn||null==mr||null==Yn)throw new Xe;lt.push(Xt<<2|Hn>>4),64!==mr&&(lt.push(Hn<<4&240|mr>>2),64!==Yn&&lt.push(mr<<6&192|Yn))}return lt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let le=0;le<this.ENCODED_VALS.length;le++)this.byteToCharMap_[le]=this.ENCODED_VALS.charAt(le),this.charToByteMap_[this.byteToCharMap_[le]]=le,this.byteToCharMapWebSafe_[le]=this.ENCODED_VALS_WEBSAFE.charAt(le),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[le]]=le,le>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(le)]=le,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(le)]=le)}}};class Xe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const it=function(le){return function(le){const ge=Ue(le);return Ee.encodeByteArray(ge,!0)}(le).replace(/\./g,"")},ve=function(le){try{return Ee.decodeString(le,!0)}catch(ge){console.error("base64Decode failed: ",ge)}return null},Kt=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const le=process.env.__FIREBASE_DEFAULTS__;return le?JSON.parse(le):void 0})()||(()=>{if(typeof document>"u")return;let le;try{le=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ge=le&&ve(le[1]);return ge&&JSON.parse(ge)})()}catch(le){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${le}`)}},An=le=>{var ge,De;return null===(De=null===(ge=Kt())||void 0===ge?void 0:ge.emulatorHosts)||void 0===De?void 0:De[le]},Jn=le=>{const ge=An(le);if(!ge)return;const De=ge.lastIndexOf(":");if(De<=0||De+1===ge.length)throw new Error(`Invalid host ${ge} with no separate hostname and port!`);const lt=parseInt(ge.substring(De+1),10);return"["===ge[0]?[ge.substring(1,De-1),lt]:[ge.substring(0,De),lt]},Dt=()=>{var le;return null===(le=Kt())||void 0===le?void 0:le.config},It=le=>{var ge;return null===(ge=Kt())||void 0===ge?void 0:ge[`_${le}`]};class _t{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ge,De)=>{this.resolve=ge,this.reject=De})}wrapCallback(ge){return(De,lt)=>{De?this.reject(De):this.resolve(lt),"function"==typeof ge&&(this.promise.catch(()=>{}),1===ge.length?ge(De):ge(De,lt))}}}function Lt(le,ge){if(le.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const lt=ge||"demo-project",Ke=le.iat||0,Xt=le.sub||le.user_id;if(!Xt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xn=Object.assign({iss:`https://securetoken.google.com/${lt}`,aud:lt,iat:Ke,exp:Ke+3600,auth_time:Ke,sub:Xt,user_id:Xt,firebase:{sign_in_provider:"custom",identities:{}}},le);return[it(JSON.stringify({alg:"none",type:"JWT"})),it(JSON.stringify(xn)),""].join(".")}function At(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ht(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function _n(){const le="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof le&&void 0!==le.id}function Sn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){const le=At();return le.indexOf("MSIE ")>=0||le.indexOf("Trident/")>=0}function er(){return!function ke(){var le;const ge=null===(le=Kt())||void 0===le?void 0:le.forceEnvironment;if("node"===ge)return!0;if("browser"===ge)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pe(){try{return"object"==typeof indexedDB}catch{return!1}}function je(){return new Promise((le,ge)=>{try{let De=!0;const lt="validate-browser-context-for-indexeddb-analytics-module",Ke=self.indexedDB.open(lt);Ke.onsuccess=()=>{Ke.result.close(),De||self.indexedDB.deleteDatabase(lt),le(!0)},Ke.onupgradeneeded=()=>{De=!1},Ke.onerror=()=>{var Xt;ge((null===(Xt=Ke.error)||void 0===Xt?void 0:Xt.message)||"")}}catch(De){ge(De)}})}class he extends Error{constructor(ge,De,lt){super(De),this.code=ge,this.customData=lt,this.name="FirebaseError",Object.setPrototypeOf(this,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_e.prototype.create)}}class _e{constructor(ge,De,lt){this.service=ge,this.serviceName=De,this.errors=lt}create(ge,...De){const lt=De[0]||{},Ke=`${this.service}/${ge}`,Xt=this.errors[ge],xn=Xt?function mt(le,ge){return le.replace(zt,(De,lt)=>{const Ke=ge[lt];return null!=Ke?String(Ke):`<${lt}?>`})}(Xt,lt):"Error";return new he(Ke,`${this.serviceName}: ${xn} (${Ke}).`,lt)}}const zt=/\{\$([^}]+)}/g;function oi(le){for(const ge in le)if(Object.prototype.hasOwnProperty.call(le,ge))return!1;return!0}function Br(le,ge){if(le===ge)return!0;const De=Object.keys(le),lt=Object.keys(ge);for(const Ke of De){if(!lt.includes(Ke))return!1;const Xt=le[Ke],xn=ge[Ke];if(si(Xt)&&si(xn)){if(!Br(Xt,xn))return!1}else if(Xt!==xn)return!1}for(const Ke of lt)if(!De.includes(Ke))return!1;return!0}function si(le){return null!==le&&"object"==typeof le}function cn(le){const ge=[];for(const[De,lt]of Object.entries(le))Array.isArray(lt)?lt.forEach(Ke=>{ge.push(encodeURIComponent(De)+"="+encodeURIComponent(Ke))}):ge.push(encodeURIComponent(De)+"="+encodeURIComponent(lt));return ge.length?"&"+ge.join("&"):""}function Lo(le){const ge={};return le.replace(/^\?/,"").split("&").forEach(lt=>{if(lt){const[Ke,Xt]=lt.split("=");ge[decodeURIComponent(Ke)]=decodeURIComponent(Xt)}}),ge}function Nt(le){const ge=le.indexOf("?");if(!ge)return"";const De=le.indexOf("#",ge);return le.substring(ge,De>0?De:void 0)}function un(le,ge){const De=new Wt(le,ge);return De.subscribe.bind(De)}class Wt{constructor(ge,De){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=De,this.task.then(()=>{ge(this)}).catch(lt=>{this.error(lt)})}next(ge){this.forEachObserver(De=>{De.next(ge)})}error(ge){this.forEachObserver(De=>{De.error(ge)}),this.close(ge)}complete(){this.forEachObserver(ge=>{ge.complete()}),this.close()}subscribe(ge,De,lt){let Ke;if(void 0===ge&&void 0===De&&void 0===lt)throw new Error("Missing Observer.");Ke=function ki(le,ge){if("object"!=typeof le||null===le)return!1;for(const De of ge)if(De in le&&"function"==typeof le[De])return!0;return!1}(ge,["next","error","complete"])?ge:{next:ge,error:De,complete:lt},void 0===Ke.next&&(Ke.next=Dr),void 0===Ke.error&&(Ke.error=Dr),void 0===Ke.complete&&(Ke.complete=Dr);const Xt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ke.error(this.finalError):Ke.complete()}catch{}}),this.observers.push(Ke),Xt}unsubscribeOne(ge){void 0===this.observers||void 0===this.observers[ge]||(delete this.observers[ge],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ge){if(!this.finalized)for(let De=0;De<this.observers.length;De++)this.sendOne(De,ge)}sendOne(ge,De){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ge])try{De(this.observers[ge])}catch(lt){typeof console<"u"&&console.error&&console.error(lt)}})}close(ge){this.finalized||(this.finalized=!0,void 0!==ge&&(this.finalError=ge),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dr(){}function Qe(le){return le&&le._delegate?le._delegate:le}},8010:(yn,wt,ie)=>{ie.d(wt,{u:()=>Ee});var D=ie(467),x=ie(3953),L=ie(2418),Ue=ie(6335),Ze=ie(6114);let Ee=(()=>{class Xe{constructor(it){this.firestore=it,this.auth=(0,x.WQX)(Ue.Nj),this.authState$=(0,Ue.wh)(this.auth)}signUpWithEmailAndPassword(it){var ve=this;return(0,D.A)(function*(){try{const Ie=yield(0,Ue.eJ)(ve.auth,it.email,it.password);Ie.user&&(yield(0,Ue.r7)(Ie.user,{displayName:`${it.name} ${it.lastName}`}));const Oe=(0,L.H9)(ve.firestore,`users/${Ie.user?.uid}`);yield(0,L.BN)(Oe,{uid:Ie.user?.uid,name:it.name,lastName:it.lastName,email:it.email})}catch(Ie){throw console.error("Error creating user:",Ie),Ie}})()}logInWithEmailAndPassword(it){return(0,Ue.x9)(this.auth,it.email,it.password)}logOut(){return this.auth.signOut()}signInWithGoogleProvider(){const it=new Ze.HF;return this.callPopUp(it)}signInWithGithubProvider(){const it=new Ze.Dt;return this.callPopUp(it)}callPopUp(it){var ve=this;return(0,D.A)(function*(){try{return yield(0,Ue.df)(ve.auth,it)}catch(Ie){return Ie}})()}static#e=this.\u0275fac=function(ve){return new(ve||Xe)(x.KVO(L._7))};static#t=this.\u0275prov=x.jDH({token:Xe,factory:Xe.\u0275fac,providedIn:"root"})}return Xe})()},6418:(yn,wt,ie)=>{ie.d(wt,{J:()=>L});var D=ie(4412),x=ie(3953);let L=(()=>{class Ue{constructor(){this.notificationsSubject=new D.t([]),this.notifications$=this.notificationsSubject.asObservable()}addNotification(Ee,Xe){this.notificationsSubject.next([...this.notificationsSubject.value,{message:Ee,severity:Xe}]),setTimeout(()=>{this.removeNotification(0)},3e3)}removeNotification(Ee){const Xe=this.notificationsSubject.value;Xe.splice(Ee,1),this.notificationsSubject.next([...Xe])}clearNotifications(){this.notificationsSubject.next([])}static#e=this.\u0275fac=function(Xe){return new(Xe||Ue)};static#t=this.\u0275prov=x.jDH({token:Ue,factory:Ue.\u0275fac,providedIn:"root"})}return Ue})()},4258:(yn,wt,ie)=>{ie.d(wt,{m:()=>Ze});var D=ie(467),x=ie(3953),L=ie(2418);const Ue="registros";let Ze=(()=>{class Ee{constructor(){this._firestore=(0,x.WQX)(L._7),this._collection=(0,L.rJ)(this._firestore,Ue)}getRegistros(){return(0,L.xs)(this._collection,{idField:"id"})}getRegistro(Et){var it=this;return(0,D.A)(function*(){try{return(yield(0,L.x7)(it.document(Et))).data()}catch{return}})()}searchRegistroByQuery(Et){var it=this;return(0,D.A)(function*(){const ve=(0,L.P)(it._collection,(0,L._M)("fullName",">=",Et),(0,L._M)("fullName","<=",Et+"\uf8ff")),Ie=yield(0,L.GG)(ve);let Oe=[];return Ie.forEach(pt=>{Oe=[...Oe,{id:pt.id,...pt.data()}]}),Oe})()}createRegistro(Et){return(0,L.gS)(this._collection,Et)}updateRegistro(Et,it){return(0,L.mZ)(this.document(Et),{...it})}deleteRegistro(Et){return(0,L.kd)(this.document(Et))}getRegistrosByUserId(Et){const it=(0,L.P)(this._collection,(0,L._M)("userId","==",Et));return(0,L.xs)(it,{idField:"id"})}document(Et){return(0,L.H9)(this._firestore,`${Ue}/${Et}`)}static#e=this.\u0275fac=function(it){return new(it||Ee)};static#t=this.\u0275prov=x.jDH({token:Ee,factory:Ee.\u0275fac,providedIn:"root"})}return Ee})()},6553:(yn,wt,ie)=>{ie.r(wt),ie.d(wt,{default:()=>Be});var D=ie(467),x=ie(3953),L=ie(4341),Ue=ie(177),Ze=ie(7407),Ee=ie(8010),Xe=ie(1827),Et=ie(1229),it=ie(5699),ve=ie(7533);function Ie(Ct,kt){if(1&Ct&&(x.j41(0,"small",18),x.EFF(1),x.k0s()),2&Ct){const Bt=kt.ngIf;x.R7$(),x.JRh(Bt)}}function Oe(Ct,kt){1&Ct&&(x.j41(0,"small",18),x.EFF(1," La contrase\xf1a es obligatoria "),x.k0s())}function pt(Ct,kt){if(1&Ct&&(x.j41(0,"app-card",17),x.nrm(1,"app-label",19),x.k0s()),2&Ct){const Bt=x.XpG();x.Y8G("variant","fab")("severity",Bt.errorMessage?"danger":"success")("closable",Bt.hide),x.R7$(),x.Y8G("label",Bt.errorMessage?"No se ha podido autenticar el usuario":"El usuario ha sido creado exitosamente")("subtitle",Bt.errorMessage?Bt.errorMessage:Bt.successMessage)("icon",Bt.errorMessage?"alert-circle":"info-circle")}}let Be=(()=>{class Ct{constructor(){this.hide=!0,this.successMessage="",this.errorMessage="",this.formBuilder=(0,x.WQX)(L.ok),this.authService=(0,x.WQX)(Ee.u),this.router=(0,x.WQX)(Ze.Ix),this.form=this.formBuilder.group({nombre:this.formBuilder.control(""),apellido:this.formBuilder.control(""),email:this.formBuilder.control("",{validators:[L.k0.required,L.k0.email],nonNullable:!0}),password:this.formBuilder.control("",{validators:L.k0.required,nonNullable:!0})})}get isEmailValid(){const Bt=this.form.get("email");return!(!Bt?.invalid||!Bt.touched)&&(Bt.hasError("required")?"Este campo es requerido":"Ingrese un mail v\xe1lido")}logIn(){var Bt=this;return(0,D.A)(function*(){if(Bt.form.invalid)return;const Kt={name:Bt.form.value.email||"",lastName:Bt.form.value.email||"",email:Bt.form.value.email||"",password:Bt.form.value.password||""};try{yield Bt.authService.logInWithEmailAndPassword(Kt),Bt.successMessage="Usuario autenticado, redirigiendo...",Bt.errorMessage="",Bt.router.navigateByUrl("/")}catch{Bt.successMessage="",Bt.errorMessage="Las credenciales ingresadas no son correctas"}})()}openSnackBar(){return alert("Succesfully Log in")}static#e=this.\u0275fac=function(Kt){return new(Kt||Ct)};static#t=this.\u0275cmp=x.VBU({type:Ct,selectors:[["app-sign-in"]],standalone:!0,features:[x.aNF],decls:22,vars:33,consts:[["id","signIn",1,""],[1,"page__bg--overlay"],[1,"page__panel--sidebar",3,"ngSubmit","formGroup"],["type","flex"],["width","84","height","84","src","./assets/img/ep__marca--sqr.png","alt","logo experiencia paciente",1,"panel__img--center"],["size","md","subtitle","Aqu\xed comienza tu historia de Salud",3,"prefix","label","direction"],[1,"form__input-wrapper--col"],[3,"label","control"],["type","email","formControlName","email"],["class","required",4,"ngIf"],[1,"form__input-wrapper--row"],["formControlName","password",3,"type"],["size","sm",3,"click","severity","variant","icon","direction"],["size","xxs",3,"severity","variant","icon","direction","label","disabled"],[1,"panel__footer"],["size","xxs",3,"severity","variant","icon","direction","label","path"],["severity","success","type","submit","variant","fill","icon","user","size","xxs",3,"bottom","right","direction","label","disabled"],["size","lg","direction","row","bottom","20px","left","calc(50vw - 180px)",3,"variant","severity","closable"],[1,"required"],["size","xxs","variant","outline","direction","row","severity","danger",3,"label","subtitle","icon"]],template:function(Kt,An){1&Kt&&(x.j41(0,"section",0),x.nrm(1,"span",1),x.j41(2,"form",2),x.bIt("ngSubmit",function(){return An.logIn()}),x.j41(3,"section",3),x.nrm(4,"img",4)(5,"app-label",5),x.k0s(),x.j41(6,"section",3)(7,"div",6),x.nrm(8,"app-required",7)(9,"input",8),x.DNE(10,Ie,2,1,"small",9),x.k0s(),x.j41(11,"div",10)(12,"div",6),x.nrm(13,"app-required",7)(14,"input",11),x.DNE(15,Oe,2,0,"small",9),x.k0s(),x.j41(16,"app-button",12),x.bIt("click",function(){return An.hide=!An.hide}),x.k0s()(),x.nrm(17,"app-button",13),x.k0s(),x.j41(18,"footer",14),x.nrm(19,"app-button",15)(20,"app-button",16),x.k0s()(),x.DNE(21,pt,2,6,"app-card",17),x.k0s()),2&Kt&&(x.R7$(2),x.Y8G("formGroup",An.form),x.R7$(3),x.Y8G("prefix","Ingreso")("label","Bienvenido")("direction","column"),x.R7$(3),x.Y8G("label","Email")("control","email"),x.R7$(2),x.Y8G("ngIf",An.isEmailValid),x.R7$(3),x.Y8G("label","Contrase\xf1a")("control","password"),x.R7$(),x.Y8G("type",An.hide?"password":"text"),x.R7$(),x.Y8G("ngIf",(null==An.form.controls.password?null:An.form.controls.password.invalid)&&(null==An.form.controls.password?null:An.form.controls.password.touched)),x.R7$(),x.Y8G("severity","primary")("variant","outline")("icon","eye")("direction","none"),x.R7$(),x.Y8G("severity","secondary")("variant","link")("icon","key")("direction","row")("label","Recuperar contrase\xf1a")("disabled",!0),x.R7$(2),x.Y8G("severity","primary")("variant","link")("icon","user-plus")("direction","row")("label","Registrarse")("path","registrarse"),x.R7$(),x.Y8G("bottom","24px")("right","24px")("direction","row")("label","Acceder")("disabled",An.form.invalid),x.R7$(),x.vxM(An.errorMessage?21:-1))},dependencies:[L.X1,L.qT,L.me,L.BC,L.cb,L.j4,L.JD,Ze.iI,Xe.U,Et.Q,it.d,ve.i,Ue.MD,Ue.bT],encapsulation:2})}return Ct})()},903:(yn,wt,ie)=>{ie.r(wt),ie.d(wt,{default:()=>It});var D=ie(467),x=ie(3953),L=ie(177),Ue=ie(4341),Ze=ie(7407),Ee=ie(2418);const Xe="pacientes";let Et=(()=>{class _t{constructor(){this._firestore=(0,x.WQX)(Ee._7),this._collection=(0,Ee.rJ)(this._firestore,Xe)}getPacientes(){return(0,Ee.xs)(this._collection,{idField:"id"})}getPaciente(At){var Ht=this;return(0,D.A)(function*(){try{return(yield(0,Ee.x7)(Ht.document(At))).data()}catch{return}})()}searchPacienteByQuery(At){var Ht=this;return(0,D.A)(function*(){const ke=(0,Ee.P)(Ht._collection,(0,Ee._M)("fullName",">=",At),(0,Ee._M)("fullName","<=",At+"\uf8ff")),bn=yield(0,Ee.GG)(ke);let _n=[];return bn.forEach(Sn=>{_n=[..._n,{id:Sn.id,...Sn.data()}]}),_n})()}createPaciente(At){return(0,Ee.gS)(this._collection,At)}updatePaciente(At,Ht){return(0,Ee.mZ)(this.document(At),{...Ht})}deletePaciente(At){return(0,Ee.kd)(this.document(At))}document(At){return(0,Ee.H9)(this._firestore,`${Xe}/${At}`)}static#e=this.\u0275fac=function(Ht){return new(Ht||_t)};static#t=this.\u0275prov=x.jDH({token:_t,factory:_t.\u0275fac,providedIn:"root"})}return _t})();var it=ie(8010),ve=ie(1229),Ie=ie(1827),Oe=ie(5699),pt=ie(7533);function Be(_t,Lt){1&_t&&x.nrm(0,"img",27)}function Ct(_t,Lt){1&_t&&x.nrm(0,"img",28)}function kt(_t,Lt){1&_t&&(x.j41(0,"small",29),x.EFF(1," Nombre es obligatorio "),x.k0s())}function Bt(_t,Lt){1&_t&&(x.j41(0,"small",29),x.EFF(1," Apellido es obligatorio "),x.k0s())}function Kt(_t,Lt){if(1&_t&&(x.j41(0,"small",29),x.EFF(1),x.k0s()),2&_t){const At=x.XpG();x.R7$(),x.SpI(" ",null!=At.form.controls.email.errors&&At.form.controls.email.errors.required?"Email es obligatorio":"Email no es v\xe1lido"," ")}}function An(_t,Lt){1&_t&&(x.j41(0,"small",29),x.EFF(1," La contrase\xf1a es obligatoria "),x.k0s())}function Jn(_t,Lt){1&_t&&(x.j41(0,"small",29),x.EFF(1," Las contrase\xf1as no coinciden "),x.k0s())}function Dt(_t,Lt){if(1&_t&&(x.j41(0,"app-card",30),x.nrm(1,"app-label",31),x.k0s()),2&_t){const At=x.XpG();x.Y8G("variant","fab")("severity",At.showErrorMsg?"danger":"success")("closable",At.hide)("selectable",At.showErrorMsg),x.R7$(),x.Y8G("label",At.showErrorMsg?"No se ha podido registrar el usuario":"El usuario ha sido creado exitosamente")("subtitle",At.showErrorMsg?"Vuelva a intentar luego":"Ser\xe1 redirigido al login")("icon",At.showErrorMsg?"alert-circle":"info-circle")}}let It=(()=>{class _t{constructor(){this.hide=!0,this.isMobile=!1,this.direction="column",this.showConfirmMsg=!1,this.showErrorMsg=!1,this.confirmPassword="",this.passHasChange=!1,this.passwordHelpText='\n  Por favor, aseg\xfarate de que tu contrase\xf1a cumpla con los siguientes requisitos:\n  Longitud M\xednima: La contrase\xf1a debe tener al menos 8 caracteres.\n  Incluye un N\xfamero: Debe contener al menos un n\xfamero (0-9).\n  May\xfasculas: Debe incluir al menos una letra may\xfascula (A-Z).\n  S\xedmbolos Especiales: Debe tener al menos un s\xedmbolo especial, como: ! @ # $ % ^ & * ( ) , . ? " : { } | < >.\n',this.router=(0,x.WQX)(Ze.Ix),this.pacienteId="",this.formBuilder=(0,x.WQX)(Ue.ok).nonNullable,this.authService=(0,x.WQX)(it.u),this.pacienteService=(0,x.WQX)(Et),this.form=this.formBuilder.group({nombre:this.formBuilder.control("",Ue.k0.required),apellido:this.formBuilder.control("",Ue.k0.required),email:this.formBuilder.control("",Ue.k0.email),password:this.formBuilder.control("",Ue.k0.required),confirmPassword:this.formBuilder.control("",{validators:[Ue.k0.required,this.passwordFormatValidator()]})})}get _pacienteId(){return this.pacienteId}ngOnInit(){this.checkIfMobile(window.innerWidth)}checkIfMobile(At){this.isMobile=At<768}passwordFormatValidator(){return At=>{const Ht=/\d/.test(At.value),ke=/[A-Z]/.test(At.value),bn=/[!@#$%^&*(),.?":{}|<>]/.test(At.value);return Ht&&ke&&bn&&At.value?.length>=8?null:{invalidPasswordFormat:!0}}}signUp(){var At=this;return(0,D.A)(function*(){if(At.form.invalid||At.passwordsDoNotMatch)return void(At.showErrorMsg=!0);const Ht={name:At.form.value.nombre||"",lastName:At.form.value.apellido||"",email:At.form.value.email||"",password:At.form.value.password||""};try{yield At.authService.signUpWithEmailAndPassword(Ht),At.showConfirmMsg=!0,setTimeout(()=>{At.router.navigateByUrl("/ingresar")},1500)}catch(ke){console.error(ke),At.showErrorMsg=!0}})()}get isEmailValid(){const At=this.form.get("email");return!(!At?.invalid||!At.touched)&&(At.hasError("required")?"Este campo es requerido":"Ingrese un mail v\xe1lido")}get passwordsDoNotMatch(){return this.form.controls.password.value!==this.form.controls.confirmPassword.value}static#e=this.\u0275fac=function(Ht){return new(Ht||_t)};static#t=this.\u0275cmp=x.VBU({type:_t,selectors:[["app-sign-up"]],standalone:!0,features:[x.Jv_([]),x.aNF],decls:47,vars:42,consts:[["id","signUp"],[1,"page__bg--overlay"],[1,"page__panel--float",3,"ngSubmit","formGroup"],[1,"panel__inner--left"],["class","panel__img--center","width","240","src","./assets/img/ep__marca--row.svg","alt","logo experiencia paciente",4,"ngIf"],["class","panel__img--center","width","60","height","60","src","./assets/img/ep__marca--sqr.png","alt","logo experiencia paciente",4,"ngIf"],["type","flex",1,"panel__inner--right"],["size","md","subtitle","Aqu\xed comienza tu historia de Salud",3,"prefix","label","direction"],["type","wrap"],[1,"form__input-wrapper--col"],[3,"label","control"],["formControlName","nombre"],["class","required",4,"ngIf"],["formControlName","apellido"],["for","email",1,"required"],["formControlName","email"],["type","flex"],[1,"form__input-wrapper--row"],["formControlName","password",3,"type"],["size","sm",3,"click","type","severity","variant","icon","direction"],["formControlName","confirmPassword",3,"input","type"],[1,"panel__prefooter"],[1,"footer__text--sm"],[1,"panel__footer"],["size","xs",3,"severity","variant","icon","direction","label","path"],["severity","success","type","submit","variant","fill","size","xs",3,"icon","direction","label","disabled"],["size","lg","direction","row","bottom","20px","left","calc(50vw - 180px)",3,"variant","severity","closable","selectable",4,"ngIf"],["width","240","src","./assets/img/ep__marca--row.svg","alt","logo experiencia paciente",1,"panel__img--center"],["width","60","height","60","src","./assets/img/ep__marca--sqr.png","alt","logo experiencia paciente",1,"panel__img--center"],[1,"required"],["size","lg","direction","row","bottom","20px","left","calc(50vw - 180px)",3,"variant","severity","closable","selectable"],["size","xxs","variant","outline","direction","row","severity","success",3,"label","subtitle","icon"]],template:function(Ht,ke){1&Ht&&(x.j41(0,"main",0),x.nrm(1,"span",1),x.j41(2,"form",2),x.bIt("ngSubmit",function(){return ke.signUp()}),x.j41(3,"section",3),x.DNE(4,Be,1,0,"img",4)(5,Ct,1,0,"img",5),x.k0s(),x.j41(6,"section",6),x.nrm(7,"app-label",7)(8,"hr"),x.j41(9,"div",8)(10,"div",9),x.nrm(11,"app-required",10)(12,"input",11),x.DNE(13,kt,2,0,"small",12),x.k0s(),x.j41(14,"div",9),x.nrm(15,"app-required",10)(16,"input",13),x.DNE(17,Bt,2,0,"small",12),x.k0s(),x.j41(18,"div",9)(19,"label",14),x.EFF(20,"Email"),x.k0s(),x.nrm(21,"input",15),x.DNE(22,Kt,2,1,"small",12),x.k0s(),x.j41(23,"section",16)(24,"span",17)(25,"div",17)(26,"div",9),x.nrm(27,"app-required",10)(28,"input",18),x.DNE(29,An,2,0,"small",12),x.k0s(),x.j41(30,"app-button",19),x.bIt("click",function(){return ke.hide=!ke.hide}),x.k0s()(),x.j41(31,"div",17)(32,"div",9),x.nrm(33,"app-required",10),x.j41(34,"input",20),x.bIt("input",function(){let _n;return null==(_n=ke.form.get("confirmPassword"))?null:_n.updateValueAndValidity()}),x.k0s(),x.DNE(35,Jn,2,0,"small",12),x.k0s(),x.j41(36,"app-button",19),x.bIt("click",function(){return ke.hide=!ke.hide}),x.k0s()()()()()(),x.j41(37,"section",21)(38,"small",22)(39,"b"),x.EFF(40,"Aviso Legal y T\xe9rminos de Uso"),x.k0s(),x.nrm(41,"br"),x.EFF(42," Al registrarte en experienciaPaciente, reconoces que la plataforma te brinda el poder de gestionar y controlar tus propios datos de salud, sin depender exclusivamente de sistemas tradicionales. experienciaPaciente no sustituye la atenci\xf3n m\xe9dica, pero te posibilita acceder, registrar y compartir tu informaci\xf3n de Salud. "),x.k0s()(),x.j41(43,"footer",23),x.nrm(44,"app-button",24)(45,"app-button",25),x.k0s()(),x.DNE(46,Dt,2,7,"app-card",26),x.k0s()),2&Ht&&(x.R7$(2),x.Y8G("formGroup",ke.form),x.R7$(2),x.Y8G("ngIf",!ke.isMobile),x.R7$(),x.Y8G("ngIf",ke.isMobile),x.R7$(2),x.Y8G("prefix","Ingreso")("label","Bienvenido")("direction",ke.isMobile?"column":"row"),x.R7$(4),x.Y8G("label","Nombre")("control","nombre"),x.R7$(2),x.Y8G("ngIf",(null==ke.form.controls.nombre?null:ke.form.controls.nombre.invalid)&&(null==ke.form.controls.nombre?null:ke.form.controls.nombre.touched)),x.R7$(2),x.Y8G("label","Apellido")("control","apellido"),x.R7$(2),x.Y8G("ngIf",(null==ke.form.controls.apellido?null:ke.form.controls.apellido.invalid)&&(null==ke.form.controls.apellido?null:ke.form.controls.apellido.touched)),x.R7$(5),x.Y8G("ngIf",ke.form.controls.email.invalid&&(null==ke.form.controls.email?null:ke.form.controls.email.touched)),x.R7$(5),x.Y8G("label","Contrase\xf1a")("control","password"),x.R7$(),x.Y8G("type",ke.hide?"password":"text"),x.R7$(),x.Y8G("ngIf",(null==ke.form.controls.password?null:ke.form.controls.password.invalid)&&(null==ke.form.controls.password?null:ke.form.controls.password.touched)),x.R7$(),x.Y8G("type","button")("severity","primary")("variant","outline")("icon","eye")("direction","none"),x.R7$(3),x.Y8G("label","Repetir contrase\xf1a")("control","confirmPassword"),x.R7$(),x.Y8G("type",ke.hide?"password":"text"),x.R7$(),x.Y8G("ngIf",ke.passwordsDoNotMatch),x.R7$(),x.Y8G("type","button")("severity","primary")("variant","outline")("icon","eye")("direction","none"),x.R7$(8),x.Y8G("severity","primary")("variant","link")("icon","arrow-left")("direction","row")("label","Volver")("path","ingresar"),x.R7$(),x.Y8G("icon","check-circle")("direction","row")("label","Registrarme")("disabled",ke.form.invalid||ke.passwordsDoNotMatch),x.R7$(),x.Y8G("ngIf",ke.showConfirmMsg||ke.showErrorMsg))},dependencies:[Ue.X1,Ue.qT,Ue.me,Ue.BC,Ue.cb,Ue.j4,Ue.JD,Ze.iI,ve.Q,Ie.U,Oe.d,pt.i,L.MD,L.bT],encapsulation:2})}return _t})()},4908:(yn,wt,ie)=>{ie.d(wt,{s:()=>_n});var D=ie(467),x=ie(3953),L=ie(1827),Ue=ie(6335),Ze=ie(5558),Ee=ie(9172),Xe=ie(7673),Et=ie(4572),it=ie(6354),ve=ie(177),Ie=ie(7533),Oe=ie(223),pt=ie(1229);function Be(Sn,sr){if(1&Sn){const Se=x.RV6();x.qex(0),x.j41(1,"app-card",2),x.bIt("click",function(){const gn=x.eBV(Se).$implicit,er=x.XpG();return x.Njj(er.toggleSelectable(gn))}),x.nrm(2,"app-label",3),x.k0s(),x.bVm()}if(2&Sn){const Se=sr.$implicit;x.R7$(),x.Y8G("selectable",!0)("variant","fill")("severity","custom")("color",Se.color)("selected",Se.selectable),x.R7$(),x.Y8G("label",Se.label)("icon",Se.icon)}}let Ct=(()=>{class Sn{constructor(){this.items=[],this.categorySelected=new x.bkB}toggleSelectable(Se){Se.selectable=!Se.selectable,this.categorySelected.emit(Se.selectable?Se.label:"")}trackByFn(Se,bt){return bt.label}static#e=this.\u0275fac=function(bt){return new(bt||Sn)};static#t=this.\u0275cmp=x.VBU({type:Sn,selectors:[["app-navbar"]],inputs:{items:"items"},outputs:{categorySelected:"categorySelected"},standalone:!0,features:[x.aNF],decls:2,vars:2,consts:[[1,"nav__wrapper--row"],[4,"ngFor","ngForOf","ngForTrackBy"],["size","xs","direction","column",3,"click","selectable","variant","severity","color","selected"],["size","xxs",3,"label","icon"]],template:function(bt,gn){1&bt&&(x.j41(0,"nav",0),x.DNE(1,Be,3,7,"ng-container",1),x.k0s()),2&bt&&(x.R7$(),x.Y8G("ngForOf",gn.items)("ngForTrackBy",gn.trackByFn))},dependencies:[L.U,Ie.i,ve.MD,ve.Sq],styles:["nav.nav__wrapper--row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;overflow-x:scroll;column-gap:var(--wrapper__gap--col)}nav.nav__wrapper[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;height:var(--footer__height);display:flex;align-items:flex-end;width:420px;box-sizing:border-box;background-color:#d3d3d3}nav.nav__wrapper[_ngcontent-%COMP%]   .nav__list--row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:72px;align-items:center;justify-content:space-around;width:100%;background-color:#4682b4}"]})}return Sn})();var kt=ie(5023),Bt=ie(4341),Kt=ie(7587),An=ie(4258),Jn=ie(7407),Dt=ie(6418);function It(Sn,sr){if(1&Sn&&x.nrm(0,"app-label",1),2&Sn){const Se=x.XpG();x.Mz_("prefix","Hola ",Se.name,""),x.Y8G("label","Estos son tus registros")}}function _t(Sn,sr){if(1&Sn){const Se=x.RV6();x.j41(0,"app-navbar",10),x.bIt("categorySelected",function(gn){x.eBV(Se);const er=x.XpG();return x.Njj(er.onCategorySelected(gn))}),x.k0s()}if(2&Sn){const Se=x.XpG();x.Y8G("items",Se.categoriaItems)}}function Lt(Sn,sr){if(1&Sn&&(x.j41(0,"ul",13),x.nrm(1,"app-label",14),x.k0s()),2&Sn){const Se=x.XpG(2);x.R7$(),x.Y8G("size",Se.isMobile?"xs":"sm")("icon","pen-to-square")("prefix","Tus registros")("label","Comienza a escribir tu historia de salud")("direction","column")}}function At(Sn,sr){if(1&Sn&&x.nrm(0,"app-badge",19),2&Sn){const Se=x.XpG().$implicit;x.Y8G("label",Se.lugar)}}function Ht(Sn,sr){if(1&Sn){const Se=x.RV6();x.j41(0,"app-modal",23),x.bIt("closeModal",function(){x.eBV(Se);const gn=x.XpG(3);return x.Njj(gn.isModalOpen=!1)}),x.j41(1,"app-button",24),x.bIt("click",function(){x.eBV(Se);const gn=x.XpG(3);return x.Njj(gn.isModalOpen=!1)}),x.k0s(),x.j41(2,"app-button",25),x.bIt("click",function(){x.eBV(Se);const gn=x.XpG().$implicit,er=x.XpG(2);return x.Njj(er.onConfirm(gn))}),x.k0s()()}if(2&Sn){const Se=x.XpG().$implicit,bt=x.XpG(2);x.Y8G("prefix","Eliminar registro")("title","\xbfDesea eliminar "+Se.titulo+"?")("subtitle","Esta acci\xf3n es irreversible, si elimina el registro no podr\xe1 recuperar su contenido.")("size",bt.isMobile?"sm":"md")}}function ke(Sn,sr){if(1&Sn){const Se=x.RV6();x.j41(0,"li",15),x.bIt("click",function(){const gn=x.eBV(Se).$implicit,er=x.XpG(2);return x.Njj(er.onItemSelected(gn))}),x.j41(1,"app-card",16),x.bIt("cardSelected",function(){const gn=x.eBV(Se).$implicit,er=x.XpG(2);return x.Njj(er.onCardSelected(gn))}),x.j41(2,"app-label",17),x.nrm(3,"app-badge",18),x.DNE(4,At,1,1,"app-badge",19),x.j41(5,"app-button",20),x.bIt("click",function(gn){const er=x.eBV(Se).$implicit,Pe=x.XpG(2);return x.Njj(Pe.openModal(gn,er))}),x.k0s(),x.nrm(6,"app-dropdown",21),x.k0s()(),x.DNE(7,Ht,3,4,"app-modal",22),x.k0s()}if(2&Sn){const Se=sr.$implicit,bt=x.XpG(2);x.R7$(),x.Y8G("selectable",!0)("selected",bt.selectedItemId===Se.id)("variant","fill")("color",bt.getColorForCategoria(Se.categoria)),x.R7$(),x.Y8G("size","xs")("label",Se.titulo)("prefix",Se.categoria)("subtitle",bt.isMobile?"":Se.descripcion)("icon",bt.getIconForCategoria(Se.categoria))("severity","custom")("color",bt.getColorForCategoria(Se.categoria)),x.R7$(),x.Y8G("severity",Se.validado?"success":"info")("label",Se.validado?"Validado":"Auto-registro"),x.R7$(),x.vxM(Se.lugar?4:-1),x.R7$(2),x.Y8G("items",bt.getMenuItems(Se))("position",bt.dropdownPosition),x.R7$(),x.vxM(bt.isModalOpen?7:-1)}}function bn(Sn,sr){if(1&Sn&&(x.qex(0),x.DNE(1,Lt,2,5,"ul",11),x.j41(2,"ul"),x.DNE(3,ke,8,17,"li",12),x.nI1(4,"async"),x.k0s(),x.bVm()),2&Sn){const Se=sr.ngIf,bt=x.XpG();x.R7$(),x.Y8G("ngIf",!Se.length),x.R7$(),x.ZvI("list__wrapper--",bt.type,""),x.R7$(),x.Y8G("ngForOf",x.bMT(4,6,bt.filteredRegistros$))("ngForTrackBy",bt.trackByFn)}}let _n=(()=>{class Sn{onCardSelected(Se){this.selectedItemId=Se.id}getMenuItems(Se){return[{label:"Ver detalle",icon:"file-lines",disabled:!1,callback:()=>this.onItemSelected(Se)},{label:"Editar",icon:"pencil",disabled:!1,callback:()=>this.navigateToEdit(Se)},{label:"Destacar",icon:"star",disabled:!0},{label:"Gestionar permisos",icon:"user-lock",disabled:!0},{label:"Asociar a registro",icon:"link",disabled:!0},{label:"Eliminar",icon:"trash",disabled:!1,callback:bt=>this.openModal(bt,{id:Se.id})}]}getRegistroOptions(Se){return[{label:"Registro manual",icon:"file-lines",path:"/registrar",disabled:!1},{label:"Registro QR",icon:"qrcode",path:"/scan",disabled:!1}]}constructor(Se,bt,gn){this.registroService=Se,this.router=bt,this.notificationService=gn,this.loggedUser=!0,this.email=null,this.name=null,this.searchControl=new Bt.MJ(""),this.selectedCategory="",this.selectedItemId=null,this.isModalOpen=!1,this.auth=(0,x.WQX)(Ue.Nj),this.authState$=(0,Ue.wh)(this.auth),this.type="flex",this.direction="horizontal",this.categoriaMap={"Medicina General":{icon:"user-md",color:"#007bff"},Pediatr\u00eda:{icon:"baby",color:"#28a745"},"Ginecolog\xeda y Obstetricia":{icon:"venus",color:"#e83e8c"},Cardiolog\u00eda:{icon:"heart",color:"#dc3545"},Dermatolog\u00eda:{icon:"spa",color:"#fd7e14"},Neurolog\u00eda:{icon:"brain",color:"#6f42c1"},Psiquiatr\u00eda:{icon:"comments",color:"#20c997"},Endocrinolog\u00eda:{icon:"balance-scale",color:"#ffc107"},Gastroenterolog\u00eda:{icon:"stethoscope",color:"#795548"},"Traumatolog\xeda y Ortopedia":{icon:"crutch",color:"#6c757d"},Oftalmolog\u00eda:{icon:"eye",color:"#17a2b8"},Otorrinolaringolog\u00eda:{icon:"head-side-cough",color:"#6610f2"},Urolog\u00eda:{icon:"x-ray",color:"#007bff"},Neumolog\u00eda:{icon:"lungs",color:"#87ceeb"},Oncolog\u00eda:{icon:"ribbon",color:"#6f42c1"},"Nutrici\xf3n y Diet\xe9tica":{icon:"utensils",color:"#a2d729"},"Fisiatr\xeda y Rehabilitaci\xf3n":{icon:"dumbbell",color:"#fd7e14"},Odontolog\u00eda:{icon:"tooth",color:"#5fc8db"}},this.dropdownPosition={top:"35px",left:"-170px"},this.splitButtonPosition={top:"45px",left:"-160px"},this.categoriaItems=Object.keys(this.categoriaMap).map(er=>({label:er,icon:this.categoriaMap[er].icon,color:this.categoriaMap[er].color,path:`/categories/${er}`,selectable:!1}))}triggerSuccess(){this.notificationService.addNotification("Registro eliminado!","danger")}triggerError(){this.notificationService.addNotification("Error al eliminar registro","warning")}ngOnInit(){this.authState$.subscribe(Se=>{Se?(this.email=Se.email,this.name=Se.displayName):(this.email=null,this.name="Usuario")}),this.authState$.subscribe(Se=>{Se&&(this.registros$=this.authState$.pipe((0,Ze.n)(bt=>bt?this.registroService.getRegistrosByUserId(bt.uid).pipe((0,Ee.Z)([])):(0,Xe.of)([]))),this.filteredRegistros$=(0,Et.z)([this.searchControl.valueChanges.pipe((0,Ee.Z)("")),this.registros$]).pipe((0,it.T)(([bt,gn])=>gn.filter(er=>er.titulo.toLowerCase().includes((bt??"").toLowerCase())&&(""===this.selectedCategory||er.categoria===this.selectedCategory)))))}),this.checkIfMobile(window.innerWidth)}onResize(Se){this.checkIfMobile(Se.target.innerWidth)}checkIfMobile(Se){this.isMobile=Se<768}onItemSelected(Se){this.router.navigate([`/item/${Se.id}`])}navigateToEdit(Se){this.router.navigate([`/actualizar/${Se.id}`])}navigateToDelete(Se){var bt=this;return(0,D.A)(function*(){try{yield bt.registroService.deleteRegistro(Se.id)}catch(gn){console.error("Error deleting registro",gn)}})()}onCategorySelected(Se){this.selectedCategory=Se,this.filteredRegistros$=this.filterRegistros(this.searchControl.value||"",this.selectedCategory)}filterRegistros(Se,bt){const gn=Se.toLowerCase()||"";return this.registros$.pipe((0,it.T)(er=>er.filter(Pe=>Pe.titulo.toLowerCase().includes(gn)&&(""===bt||Pe.categoria===bt))))}getIconForCategoria(Se){return this.categoriaMap[Se]?.icon||"question-circle"}getColorForCategoria(Se){return this.categoriaMap[Se]?.color||"gray"}trackByFn(Se,bt){return bt.id}showMedCategories(Se){this.medCategories=!this.medCategories}openModal(Se,bt){Se?.stopPropagation(),this.selectedItemId=bt.id,this.isModalOpen=!0}onConfirm(Se){var bt=this;return(0,D.A)(function*(){if(bt.selectedItemId=Se.id,bt.isModalOpen=!1,bt.selectedItemId)try{yield bt.registroService.deleteRegistro(bt.selectedItemId),bt.router.navigate(["/"]),bt.triggerSuccess()}catch{bt.triggerError()}finally{bt.selectedItemId=null}})()}static#e=this.\u0275fac=function(bt){return new(bt||Sn)(x.rXU(An.m),x.rXU(Jn.Ix),x.rXU(Dt.J))};static#t=this.\u0275cmp=x.VBU({type:Sn,selectors:[["app-list"]],hostBindings:function(bt,gn){1&bt&&x.bIt("resize",function(Pe){return gn.onResize(Pe)},!1,x.tSv)},inputs:{type:"type",direction:"direction"},standalone:!0,features:[x.aNF],decls:13,vars:11,consts:[[1,"sidebar__header"],["size","md","direction","row",3,"label","prefix"],[1,"input__group"],[1,"input__wrapper"],["for","titulo"],["type","text","placeholder","Busca por t\xedtulo del registro",1,"input__size--sm",3,"formControl"],["type","button","size","xs","severity","primary","direction","none",3,"clickEvent","direction","icon","variant"],["buttonSize","xs","buttonDirection","none","buttonVariant","fill","buttonSeverity","success","buttonIcon","plus",3,"items","position"],[3,"items"],[4,"ngIf"],[3,"categorySelected","items"],["class","list__wrapper--center",4,"ngIf"],[3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list__wrapper--center"],["subtitle","Aqu\xed se listar\xe1n los datos de salud que registres manualmente o a trav\xe9s del QR facilitado por qui\xe9n haya gestionado tu registro de salud.",3,"size","icon","prefix","label","direction"],[3,"click"],["direction","row","severity","custom",3,"cardSelected","selectable","selected","variant","color"],["direction","row",3,"size","label","prefix","subtitle","icon","severity","color"],["size","xs",3,"severity","label"],["severity","info","size","xs","icon","hospital",3,"label"],["variant","icon","icon","trash-can","size","xs","severity","neutral",3,"click"],["buttonLabel","","buttonIcon","ellipsis-vertical",3,"items","position"],["icon","trash-can",3,"prefix","title","subtitle","size"],["icon","trash-can",3,"closeModal","prefix","title","subtitle","size"],["direction","none","size","sm","label","Cancel","variant","outline","severity","danger",3,"click"],["direction","none","size","sm","label","Confirm","variant","fill","severity","success",3,"click"]],template:function(bt,gn){1&bt&&(x.j41(0,"section",0),x.DNE(1,It,1,3,"app-label",1),x.j41(2,"section",2)(3,"span",3)(4,"label",4),x.EFF(5,"Buscador"),x.k0s(),x.nrm(6,"input",5),x.k0s(),x.j41(7,"app-button",6),x.bIt("clickEvent",function(Pe){return gn.showMedCategories(Pe)}),x.k0s(),x.nrm(8,"app-dropdown",7),x.k0s(),x.DNE(9,_t,1,1,"app-navbar",8),x.nrm(10,"hr"),x.k0s(),x.DNE(11,bn,5,8,"ng-container",9),x.nI1(12,"async")),2&bt&&(x.R7$(),x.vxM(gn.loggedUser?1:-1),x.R7$(5),x.Y8G("formControl",gn.searchControl),x.R7$(),x.Y8G("direction","none")("icon",gn.medCategories?"chevron-up":"chevron-down")("variant","outline"),x.R7$(),x.Y8G("items",gn.getRegistroOptions())("position",gn.splitButtonPosition),x.R7$(),x.vxM(gn.medCategories?9:-1),x.R7$(2),x.Y8G("ngIf",x.bMT(12,9,gn.registros$)))},dependencies:[L.U,ve.MD,ve.Sq,ve.bT,ve.Jj,Ie.i,Oe.n,pt.Q,Ct,kt.P,Bt.X1,Bt.me,Bt.BC,Bt.l_,Kt.z],styles:["ul[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box}ul.list__wrapper--flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--form__gap--col)}ul.list__wrapper--center[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:0 1vw}ul.list__wrapper--grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;row-gap:var(--list__item--gap);column-gap:var(--list__item--gap);padding:var(--list__item--padding);width:100%;box-sizing:border-box;box-shadow:0 0 4px 0 var(--shadow);height:-moz-fit-content;height:fit-content;min-height:120px;border-radius:var(--card__border--radius);border-bottom:solid 1px var(--primaryLight)}ul.list__item--row[_ngcontent-%COMP%]{flex-direction:row}ul.list__item--vertical[_ngcontent-%COMP%]{flex-direction:column}"]})}return Sn})()},223:(yn,wt,ie)=>{ie.d(wt,{n:()=>Ue});var D=ie(177),x=ie(3953);function L(Ze,Ee){if(1&Ze&&x.nrm(0,"i"),2&Ze){const Xe=x.XpG();x.HbH(Xe.badgeIconClass)}}let Ue=(()=>{class Ze{constructor(){this.severity="info",this.size="md",this.badgeStyle={},this.badgeIconClass=""}ngOnChanges(){this.setBadgeProperties()}setBadgeProperties(){switch(this.severity){case"success":this.badgeStyle={"background-color":"var(--success--light)",color:"var(--success--dark)"},this.badgeIconClass="fa-solid fa-circle-check";break;case"warning":this.badgeStyle={"background-color":"var(--warning--light)",color:"var(--warning)"},this.badgeIconClass="fa-solid fa-circle-exclamation";break;case"danger":this.badgeStyle={"background-color":"var(--danger--light)",color:"var(--danger)"},this.badgeIconClass="fa-solid fa-triangle-exclamation";break;case"info":this.badgeStyle={"background-color":"var(--info--light)",color:"var(--info)"},this.badgeIconClass="fa-solid fa-circle-info";break;case"neutral":this.badgeStyle={"background-color":"#e0e0e0",color:"#6c757d"},this.badgeIconClass="fa-solid fa-circle-question"}}static#e=this.\u0275fac=function(Et){return new(Et||Ze)};static#t=this.\u0275cmp=x.VBU({type:Ze,selectors:[["app-badge"]],inputs:{severity:"severity",size:"size",label:"label"},standalone:!0,features:[x.OA$,x.aNF],decls:4,vars:5,consts:[[3,"ngStyle"],[3,"class",4,"ngIf"]],template:function(Et,it){1&Et&&(x.j41(0,"span",0),x.DNE(1,L,1,2,"i",1),x.j41(2,"p"),x.EFF(3),x.k0s()()),2&Et&&(x.HbH("badge__wrapper--"+it.size),x.Y8G("ngStyle",it.badgeStyle),x.R7$(),x.Y8G("ngIf",it.badgeIconClass),x.R7$(2),x.JRh(it.label))},dependencies:[D.MD,D.bT,D.B3],styles:["app-badge[_ngcontent-%COMP%]   [class^=badge__wrapper][_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.5em 1em;border-radius:6px;font-weight:400;font-size:var(--badge__font--size);align-self:center;text-wrap:nowrap;text-overflow:ellipsis}app-badge[_ngcontent-%COMP%]   [class^=badge__wrapper][_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5em}"]})}return Ze})()},1229:(yn,wt,ie)=>{ie.d(wt,{Q:()=>Xe});var D=ie(3953),x=ie(177),L=ie(1827),Ue=ie(7407);const Ze=Et=>[Et];function Ee(Et,it){if(1&Et&&(D.j41(0,"span",3),D.EFF(1),D.k0s()),2&Et){const ve=D.XpG();D.R7$(),D.JRh(ve.badgeCount)}}let Xe=(()=>{class Et{constructor(ve){this.router=ve,this.variant="fill",this.type="button",this.severity="info",this.size="md",this.direction="column",this.clickEvent=new D.bkB}handleClick(){this.clickEvent.emit(),this.path&&this.router.navigate([this.path]).catch(ve=>{console.error("Navigation error:",ve)})}setButtonClass(){return`button__size--${this.size} button__${this.variant}--${this.severity}`}setFabPositionStyles(){return"fab"===this.variant?{top:this.top,right:this.right,bottom:this.bottom,left:this.left}:{}}static#e=this.\u0275fac=function(Ie){return new(Ie||Et)(D.rXU(Ue.Ix))};static#t=this.\u0275cmp=D.VBU({type:Et,selectors:[["app-button"]],inputs:{variant:"variant",type:"type",severity:"severity",size:"size",icon:"icon",label:"label",badgeCount:"badgeCount",prefix:"prefix",subtitle:"subtitle",path:"path",direction:"direction",top:"top",right:"right",bottom:"bottom",left:"left",disabled:"disabled"},outputs:{clickEvent:"clickEvent"},standalone:!0,features:[D.aNF],decls:3,vars:14,consts:[[3,"click","type","disabled","ngClass","ngStyle"],[3,"icon","severity","label","subtitle","prefix","direction","size"],["class","button__badge",4,"ngIf"],[1,"button__badge"]],template:function(Ie,Oe){1&Ie&&(D.j41(0,"button",0),D.bIt("click",function(){return Oe.handleClick()}),D.nrm(1,"app-label",1),D.DNE(2,Ee,2,1,"span",2),D.k0s()),2&Ie&&(D.FS9("type",Oe.type),D.Y8G("disabled",Oe.disabled)("ngClass",D.eq3(12,Ze,"button__size--"+Oe.size+" button__"+Oe.variant+"--"+Oe.severity))("ngStyle",Oe.setFabPositionStyles()),D.R7$(),D.Y8G("icon",Oe.icon)("severity",Oe.severity)("label",Oe.label)("subtitle",Oe.subtitle)("prefix",Oe.prefix)("direction",Oe.direction)("size",Oe.size),D.R7$(),D.Y8G("ngIf",Oe.badgeCount))},dependencies:[x.MD,x.YU,x.bT,x.B3,L.U],styles:["app-button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:var(--button__padding);background:var(--button__bg--color);font-size:var(--button__font--size);color:var(--button__text--color);text-align:var(--button__text--align);border-radius:var(--button__border--radius);width:var(--button__width);text-transform:capitalize;text-wrap:nowrap}app-button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{filter:brightness(120%);cursor:pointer}app-button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background-color:var(--secondary);filter:brightness(95%);cursor:grab}app-button[_ngcontent-%COMP%] > button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.5;-webkit-user-select:none;user-select:none}app-button[_ngcontent-%COMP%] > button[class*=__fill][_ngcontent-%COMP%]{--button__text--color: white!important;--label__title--color: white;--button__border--color: transparent!important;border:solid 2px var(--button__border--color)}app-button[_ngcontent-%COMP%] > button[class*=__outline][_ngcontent-%COMP%]{--label__title--color: var(--button__bg--color);--button__border--color: var(--button__bg--color);background:transparent!important;border:solid 2px var(--button__bg--color);color:var(--label__title--color)}app-button[_ngcontent-%COMP%] > button[class*=__link][_ngcontent-%COMP%]{--button__border--color: var(--button__bg--color);--button__padding: 0;background:transparent!important;border:none!important;color:var(--button__bg--color)!important}app-button[_ngcontent-%COMP%] > button[class*=__fab][_ngcontent-%COMP%]{--button__text--color: white!important;--label__title--color: white;--button__border--color: transparent!important;position:absolute;width:calc(var(--button__font--size) * 7.5);height:calc(var(--button__font--size) * 7.5);border:solid 2px var(--button__border--color);border-radius:50%;z-index:3}app-button[_ngcontent-%COMP%] > button[class*=__icon][_ngcontent-%COMP%]{background-color:transparent;color:var(--label__title--color);padding:.5rem}app-button[_ngcontent-%COMP%] > button[class$=--primary][_ngcontent-%COMP%]{--button__text--color: inherit;--button__border--color: var(--primary);--button__bg--color: var(--primary)}app-button[_ngcontent-%COMP%] > button[class$=--secondary][_ngcontent-%COMP%]{--button__text--color: inherit;--button__border--color: var(--secondary);--button__bg--color: var(--secondary)}app-button[_ngcontent-%COMP%] > button[class$=--tertiary][_ngcontent-%COMP%]{--button__text--color: inherit;--button__border--color: var(--tertiary);--button__bg--color: var(--tertiary)}app-button[_ngcontent-%COMP%] > button[class$=--success][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--success)}app-button[_ngcontent-%COMP%] > button[class$=--warning][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--warning)}app-button[_ngcontent-%COMP%] > button[class$=--danger][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--danger)}app-button[_ngcontent-%COMP%] > button[class$=--info][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--info)}app-button[_ngcontent-%COMP%] > button[class$=--neutral][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--neutral)}app-button[_ngcontent-%COMP%] > button.button__size--xxs[_ngcontent-%COMP%]{--button__padding: .1rem .2rem;--button__font--size: 8px}app-button[_ngcontent-%COMP%] > button.button__size--xs[_ngcontent-%COMP%]{--button__padding: .2rem .25rem;--button__font--size: 10px}app-button[_ngcontent-%COMP%] > button.button__size--sm[_ngcontent-%COMP%]{--button__padding: .35rem .7rem;--button__font--size: 12px}app-button[_ngcontent-%COMP%] > button.button__size--md[_ngcontent-%COMP%]{--button__padding: .5rem 1rem;--button__font--size: 14px}app-button[_ngcontent-%COMP%] > button.button__size--lg[_ngcontent-%COMP%]{--button__padding: .65rem 1.25rem;--button__font--size: 16px}app-button[_ngcontent-%COMP%] > button.button__size--xl[_ngcontent-%COMP%]{--button__padding: .9rem 1.5rem;--button__font--size: 18px}"]})}return Et})()},7533:(yn,wt,ie)=>{ie.d(wt,{i:()=>it});var D=ie(3953),x=ie(1827),L=ie(177),Ue=ie(1229);const Ze=["cardColor"],Ee=[[["app-label"]]],Xe=["app-label"];function Et(ve,Ie){if(1&ve){const Oe=D.RV6();D.j41(0,"app-button",3),D.bIt("click",function(Be){D.eBV(Oe);const Ct=D.XpG();return D.Njj(Ct.closeCard(Be))}),D.k0s()}}let it=(()=>{class ve{constructor(){this.selected=!1,this.aligned="center",this.selectable=!1,this.align="center",this.size="md",this.severity="neutral",this.variant="outline",this.direction="column",this.color="",this.closable=!1,this.cardSelected=new D.bkB}get cssDirection(){return"row"===this.direction?"card__wrapper--row":"card__wrapper--column"}ngAfterViewInit(){this.label&&(this.label.direction=this.direction),"custom"===this.severity&&this.color&&this.applyCustomColor()}applyCustomColor(){this.cardColor.nativeElement.style.setProperty("--card__border--color",this.color),this.cardColor.nativeElement.style.setProperty("--card__bg--color",`${this.color}25`),this.label&&(this.label.severity=this.color)}ngOnChanges(Oe){Oe.direction&&this.label&&(this.label.direction=this.direction)}closeCard(Oe){Oe.stopPropagation(),this.cardColor.nativeElement.remove()}onCardClick(){this.selectable&&this.cardSelected.emit()}setFabPositionStyles(){return"fab"===this.variant?{position:"absolute",top:this.top,right:this.right,bottom:this.bottom,left:this.left}:{}}static#e=this.\u0275fac=function(pt){return new(pt||ve)};static#t=this.\u0275cmp=D.VBU({type:ve,selectors:[["app-card"]],viewQuery:function(pt,Be){if(1&pt&&(D.GBs(Ze,7),D.GBs(x.U,7)),2&pt){let Ct;D.mGM(Ct=D.lsd())&&(Be.cardColor=Ct.first),D.mGM(Ct=D.lsd())&&(Be.label=Ct.first)}},inputs:{selected:"selected",aligned:"aligned",selectable:"selectable",align:"align",size:"size",severity:"severity",variant:"variant",direction:"direction",color:"color",closable:"closable",top:"top",right:"right",bottom:"bottom",left:"left"},outputs:{cardSelected:"cardSelected"},standalone:!0,features:[D.OA$,D.aNF],ngContentSelectors:Xe,decls:4,vars:12,consts:[["cardColor",""],["tabindex","0",3,"click","ngStyle","ngClass"],["variant","link","icon","close","size","xs","severity","neutral"],["variant","link","icon","close","size","xs","severity","neutral",3,"click"]],template:function(pt,Be){if(1&pt){const Ct=D.RV6();D.NAR(Ee),D.j41(0,"div",1,0),D.bIt("click",function(){return D.eBV(Ct),D.Njj(Be.onCardClick())}),D.SdG(2),D.DNE(3,Et,1,0,"app-button",2),D.k0s()}2&pt&&(D.ZWY("card card__",Be.variant,"--",Be.severity," card--",Be.size,""),D.AVh("card--selectable",Be.selectable)("card--selected",Be.selected),D.Y8G("ngStyle",Be.setFabPositionStyles())("ngClass",Be.cssDirection),D.R7$(3),D.vxM(Be.closable?3:-1))},dependencies:[L.MD,L.YU,L.B3,Ue.Q],styles:["app-card[_ngcontent-%COMP%]{width:100%}app-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:var(--card__direction);justify-content:var(--card__wrapper--justify);align-items:var(--card__wrapper--align);background-color:transparent;padding:var(--card__padding);gap:var(--card__gap);text-align:var(--card__text--align);border-radius:var(--card__border--radius);box-sizing:border-box;width:var(--card__width);height:var(--card__height);z-index:3}app-card[_ngcontent-%COMP%]   .card__wrapper--row[_ngcontent-%COMP%]{--card__direction: row;--card__wrapper--justify: space-between;--card__text--align: left}app-card[_ngcontent-%COMP%]   .card__wrapper--row[_ngcontent-%COMP%]   .card__inner-wrapper--left[_ngcontent-%COMP%]{width:180px}app-card[_ngcontent-%COMP%]   .card__wrapper--row[_ngcontent-%COMP%]   .card__inner-wrapper--right[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;width:-moz-fit-content;width:fit-content}app-card[_ngcontent-%COMP%]   .card__wrapper--column[_ngcontent-%COMP%]{--card__wrapper--justify: flex-start;--card__direction: column}app-card[_ngcontent-%COMP%]   .card.card__fill--custom[_ngcontent-%COMP%], app-card[_ngcontent-%COMP%]   .card.card__outline--custom[_ngcontent-%COMP%], app-card[_ngcontent-%COMP%]   .card.card__fab--custom[_ngcontent-%COMP%]{--card__bg--color: var(--card__bg--color);--card__border--color: var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--custom.card--selectable[_ngcontent-%COMP%]:hover, app-card[_ngcontent-%COMP%]   .card.card__outline--custom.card--selectable[_ngcontent-%COMP%]:hover, app-card[_ngcontent-%COMP%]   .card.card__fab--custom.card--selectable[_ngcontent-%COMP%]:hover{background-color:var(--card__bg--color);cursor:pointer}app-card[_ngcontent-%COMP%]   .card.card__fill--custom.card--selectable[_ngcontent-%COMP%]:focus, app-card[_ngcontent-%COMP%]   .card.card__outline--custom.card--selectable[_ngcontent-%COMP%]:focus, app-card[_ngcontent-%COMP%]   .card.card__fab--custom.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--primary[_ngcontent-%COMP%]{--card__border--color: var(--primary)}app-card[_ngcontent-%COMP%]   .card.card__fill--primary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--primaryLight);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--primary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--secondary[_ngcontent-%COMP%]{--card__border--color: var(--secondary)}app-card[_ngcontent-%COMP%]   .card.card__fill--secondary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--secondaryLight);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--secondary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--tertiary[_ngcontent-%COMP%]{--card__border--color: var(--tertiary)}app-card[_ngcontent-%COMP%]   .card.card__fill--tertiary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--tertiaryLight);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--tertiary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--info[_ngcontent-%COMP%]{--card__border--color: var(--info)}app-card[_ngcontent-%COMP%]   .card.card__fill--info.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--info--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--info.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--neutral[_ngcontent-%COMP%]{--card__border--color: var(--neutral)}app-card[_ngcontent-%COMP%]   .card.card__fill--neutral.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--neutral--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--neutral.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--primary[_ngcontent-%COMP%]{--card__border--color: var(--card__text--color);border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--primary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--primaryLighter);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--primary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--secondary[_ngcontent-%COMP%]{--card__border--color: var(--secondary)}app-card[_ngcontent-%COMP%]   .card.card__outline--secondary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--secondaryLighter);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--secondary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--tertiary[_ngcontent-%COMP%]{--card__border--color: var(--tertiary)}app-card[_ngcontent-%COMP%]   .card.card__outline--tertiary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--tertiaryLighter);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--tertiary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--info[_ngcontent-%COMP%]{--card__border--color: var(--info)}app-card[_ngcontent-%COMP%]   .card.card__outline--info.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--info--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--info.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--neutral[_ngcontent-%COMP%]{--card__border--color: var(--neutral)}app-card[_ngcontent-%COMP%]   .card.card__outline--neutral.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--neutral--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--neutral.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab[_ngcontent-%COMP%]{animation:fade-in 1.5s ease-in}app-card[_ngcontent-%COMP%]   .card.card__fab--success[_ngcontent-%COMP%]{--card__border--color: var(--success);--card__bg--color: var(--success--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--success.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--success--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--success.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--warning[_ngcontent-%COMP%]{--card__border--color: var(--warning);--card__bg--color: var(--warning--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--warning.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--warning--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--warning.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--danger[_ngcontent-%COMP%]{--card__border--color: var(--danger);--card__bg--color: var(--danger--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--danger.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--danger--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--danger.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--info[_ngcontent-%COMP%]{--card__border--color: var(--info);--card__bg--color: var(--info--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--info.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--info--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--info.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card--selected[_ngcontent-%COMP%]{border:solid 2px var(--card__border--color);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card--xs[_ngcontent-%COMP%]{--card__width: 90px;--card__padding: 12px;--card__height: 100%;background-color:#f1f4f5;width:var(--card__width);height:var(--card__height)}app-card[_ngcontent-%COMP%]   .card--sm[_ngcontent-%COMP%]{--card__padding: 6px 14px}app-card[_ngcontent-%COMP%]   .card--md[_ngcontent-%COMP%]{--card__padding: 0 0 0 12px;--card__width: 100%;--card__height: 100%;width:var(--card__width);height:var(--card__height)}app-card[_ngcontent-%COMP%]   .card--md[_ngcontent-%COMP%]   .label__content[_ngcontent-%COMP%]{row-gap:4px}app-card[_ngcontent-%COMP%]   .card--lg[_ngcontent-%COMP%]{--card__padding: 10px 18px}app-card[_ngcontent-%COMP%]   .card--xl[_ngcontent-%COMP%]{--card__padding: 12px 24px}app-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{margin-bottom:.75rem;object-fit:cover}"]})}return ve})()},5023:(yn,wt,ie)=>{ie.d(wt,{P:()=>Ie});var D=ie(3953),x=ie(177),L=ie(1229),Ue=ie(7407);const Ze=(Oe,pt)=>({top:Oe,left:pt}),Ee=Oe=>({nested:Oe});function Xe(Oe,pt){if(1&Oe){const Be=D.RV6();D.qex(0),D.j41(1,"app-button",8),D.bIt("clickEvent",function(){D.eBV(Be);const kt=D.XpG().$implicit;return D.Njj(kt.callback?kt.callback():null)}),D.k0s(),D.bVm()}if(2&Oe){const Be=D.XpG().$implicit;D.R7$(),D.Y8G("variant","link")("direction","row")("size","xxs")("icon",Be.icon)("label",Be.label)("path",Be.path)("disabled",Be.disabled)}}function Et(Oe,pt){if(1&Oe){const Be=D.RV6();D.j41(0,"app-button",8),D.bIt("clickEvent",function(){D.eBV(Be);const kt=D.XpG().$implicit;return D.Njj(kt.callback?kt.callback():null)}),D.k0s()}if(2&Oe){const Be=D.XpG().$implicit;D.Y8G("variant","link")("direction","row")("size","xxs")("icon",Be.icon)("label",Be.label)("path",Be.path)("disabled",Be.disabled)}}function it(Oe,pt){if(1&Oe&&(D.qex(0),D.DNE(1,Xe,2,7,"ng-container",7)(2,Et,1,7,"ng-template",null,0,D.C5r),D.bVm()),2&Oe){const Be=pt.$implicit,Ct=D.sdS(3);D.R7$(),D.Y8G("ngIf",!Be.subItems)("ngIfElse",Ct)}}function ve(Oe,pt){if(1&Oe&&(D.j41(0,"div",4)(1,"div",5),D.DNE(2,it,4,2,"ng-container",6),D.k0s()()),2&Oe){const Be=D.XpG();D.Y8G("ngStyle",D.l_i(3,Ze,null==Be.position?null:Be.position.top,null==Be.position?null:Be.position.left)),D.R7$(),D.Y8G("ngClass",D.eq3(6,Ee,Be.hasNestedItems)),D.R7$(),D.Y8G("ngForOf",Be.items)}}let Ie=(()=>{class Oe{constructor(Be){this.router=Be,this.items=[],this.buttonVariant="link",this.buttonSeverity="info",this.buttonDirection="none",this.buttonSize="sm",this.itemSelected=new D.bkB,this.isOpen=!1,this.hasNestedItems=!1}onClick(Be){!Be.target.closest(".dropdown-container")&&this.isOpen&&this.close()}toggle(Be){this.isOpen=!this.isOpen,this.hasNestedItems=this.items.some(Ct=>Ct.subItems&&Ct.subItems.length>0),Be.stopPropagation()}onItemClicked(Be){this.itemSelected.emit(Be),Be.callback&&Be.callback(),this.close()}handleNestedItemClick(Be){this.itemSelected.emit(Be),this.close()}close(){this.isOpen=!1}static#e=this.\u0275fac=function(Ct){return new(Ct||Oe)(D.rXU(Ue.Ix))};static#t=this.\u0275cmp=D.VBU({type:Oe,selectors:[["app-dropdown"]],hostBindings:function(Ct,kt){1&Ct&&D.bIt("click",function(Kt){return kt.onClick(Kt)},!1,D.EBC)},inputs:{items:"items",position:"position",buttonLabel:"buttonLabel",buttonIcon:"buttonIcon",buttonVariant:"buttonVariant",buttonSeverity:"buttonSeverity",buttonDirection:"buttonDirection",buttonSize:"buttonSize"},outputs:{itemSelected:"itemSelected"},standalone:!0,features:[D.aNF],decls:3,vars:7,consts:[["nestedItems",""],[1,"dropdown-container"],[3,"click","size","severity","variant","direction","icon","label"],["class","dropdown-menu",3,"ngStyle",4,"ngIf"],[1,"dropdown-menu",3,"ngStyle"],[1,"dropdown-content",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[3,"clickEvent","variant","direction","size","icon","label","path","disabled"]],template:function(Ct,kt){1&Ct&&(D.j41(0,"div",1)(1,"app-button",2),D.bIt("click",function(Kt){return kt.toggle(Kt)}),D.k0s(),D.DNE(2,ve,3,8,"div",3),D.k0s()),2&Ct&&(D.R7$(),D.Y8G("size",kt.buttonSize)("severity",kt.buttonSeverity)("variant",kt.buttonVariant)("direction",kt.buttonDirection)("icon",kt.buttonIcon)("label",kt.buttonLabel),D.R7$(),D.Y8G("ngIf",kt.isOpen))},dependencies:[x.MD,x.YU,x.Sq,x.bT,x.B3,L.Q],styles:[".dropdown-container[_ngcontent-%COMP%]{position:relative}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;z-index:1000;background-color:#fff;border:1px solid #ccc;box-shadow:0 2px 10px #0003;width:200px;overflow:hidden}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-label[_ngcontent-%COMP%], .dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{margin-bottom:.5rem}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-label[_ngcontent-%COMP%]:last-child, .dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]})}return Oe})()},1827:(yn,wt,ie)=>{ie.d(wt,{U:()=>Ie});var D=ie(177),x=ie(3953);const L=["labelColor"],Ue=[[["app-badge"]],[["app-button"]],[["app-dropdown"]]],Ze=["app-badge","app-button","app-dropdown"],Ee=(Oe,pt,Be)=>[Oe,pt,Be];function Xe(Oe,pt){if(1&Oe&&(x.j41(0,"div",3),x.nrm(1,"i"),x.k0s()),2&Oe){const Be=x.XpG();x.Y8G("ngClass",Be.label?"":"icon__border--none"),x.R7$(),x.ZvI("fa-solid fa-",Be.icon,""),x.BMQ("aria-label",Be.iconLabel)}}function Et(Oe,pt){if(1&Oe&&(x.j41(0,"div",5),x.EFF(1),x.k0s()),2&Oe){const Be=x.XpG();x.R7$(),x.JRh(Be.prefix)}}function it(Oe,pt){if(1&Oe&&(x.j41(0,"div",6),x.EFF(1),x.k0s()),2&Oe){const Be=x.XpG();x.R7$(),x.JRh(Be.label)}}function ve(Oe,pt){if(1&Oe&&(x.j41(0,"div",7),x.EFF(1),x.k0s()),2&Oe){const Be=x.XpG();x.R7$(),x.JRh(Be.subtitle)}}let Ie=(()=>{class Oe{constructor(){this.severity="neutral",this.direction="column",this.size="md"}ngOnChanges(Be){this.updateIconColor()}updateIconColor(){"string"==typeof this.severity&&(["primary","secondary","tertiary","neutral"].includes(this.severity)?this.labelColor.nativeElement.style.setProperty("--label__icon--color",`var(--${this.severity})`):this.labelColor.nativeElement.style.setProperty("--label__icon--color",this.color))}static#e=this.\u0275fac=function(Ct){return new(Ct||Oe)};static#t=this.\u0275cmp=x.VBU({type:Oe,selectors:[["app-label"]],viewQuery:function(Ct,kt){if(1&Ct&&x.GBs(L,7),2&Ct){let Bt;x.mGM(Bt=x.lsd())&&(kt.labelColor=Bt.first)}},inputs:{icon:"icon",img:"img",iconLabel:"iconLabel",severity:"severity",color:"color",label:"label",subtitle:"subtitle",prefix:"prefix",direction:"direction",size:"size"},standalone:!0,features:[x.OA$,x.aNF],ngContentSelectors:Ze,decls:13,vars:9,consts:[["labelColor",""],[1,"panel__header"],[1,"label",3,"ngClass"],[1,"label__icon",3,"ngClass"],[1,"label__content"],[1,"label__prefix"],[1,"label__title"],[1,"label__subtitle"],[1,"button__group"],[1,"label__menu"]],template:function(Ct,kt){1&Ct&&(x.NAR(Ue),x.j41(0,"section",1)(1,"span",2,0),x.DNE(3,Xe,2,5,"div",3),x.j41(4,"div",4),x.DNE(5,Et,2,1,"div",5)(6,it,2,1,"div",6)(7,ve,2,1,"div",7),x.j41(8,"span",8),x.SdG(9),x.k0s()(),x.j41(10,"div",9),x.SdG(11,1),x.SdG(12,2),x.k0s()()()),2&Ct&&(x.R7$(),x.Y8G("ngClass",x.sMw(5,Ee,kt.size,kt.direction,kt.severity)),x.R7$(2),x.vxM(kt.icon?3:-1),x.R7$(2),x.vxM(kt.prefix?5:-1),x.R7$(),x.vxM(kt.label?6:-1),x.R7$(),x.vxM(kt.subtitle?7:-1))},dependencies:[D.MD,D.YU],styles:["app-label[_ngcontent-%COMP%]   .label__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}app-label[_ngcontent-%COMP%]{width:100%}app-label[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%;height:-moz-fit-content;height:fit-content}app-label[_ngcontent-%COMP%]   .label.row[_ngcontent-%COMP%]{flex-direction:row;align-items:center;column-gap:.65rem}app-label[_ngcontent-%COMP%]   .label.row[_ngcontent-%COMP%] > .label__icon[_ngcontent-%COMP%]{--label__icon--align: center}app-label[_ngcontent-%COMP%]   .label.column[_ngcontent-%COMP%]{--button__text--align: center;flex-direction:column;align-items:center;justify-content:center;row-gap:var(--label__gap);text-align:center}app-label[_ngcontent-%COMP%]   .label.xxs[_ngcontent-%COMP%]{--label__prefix--size: 8px;--label__subtitle--size: 10px;--label__icon--size: 12px}app-label[_ngcontent-%COMP%]   .label.xs[_ngcontent-%COMP%]{--label__prefix--size: 10px;--label__subtitle--size: 11px;--label__icon--size: 14px}app-label[_ngcontent-%COMP%]   .label.sm[_ngcontent-%COMP%]{--label__prefix--size: 11px;--label__subtitle--size: 12px;--label__icon--size: 16px}app-label[_ngcontent-%COMP%]   .label.sm[_ngcontent-%COMP%] > .label__content[_ngcontent-%COMP%]{row-gap:6px}app-label[_ngcontent-%COMP%]   .label.md[_ngcontent-%COMP%]{--label__prefix--size: 12px;--label__subtitle--size: 14px;--label__icon--size: 36px}app-label[_ngcontent-%COMP%]   .label.md[_ngcontent-%COMP%] > .label__content[_ngcontent-%COMP%]{row-gap:8px}app-label[_ngcontent-%COMP%]   .label.lg[_ngcontent-%COMP%]{--label__prefix--size: 14px;--label__subtitle--size: 16px;--label__icon--size: 56px}app-label[_ngcontent-%COMP%]   .label.xl[_ngcontent-%COMP%]{--label__prefix--size: 18px;--label__subtitle--size: 20px;--label__icon--size: 64px}app-label[_ngcontent-%COMP%]   .label__icon[_ngcontent-%COMP%]{padding:.5rem;border:solid 2px var(--label__icon--color);border-radius:50%;color:var(--label__icon--color);width:var(--label__icon--size);height:var(--label__icon--size);align-self:var(--label__icon--align)}app-label[_ngcontent-%COMP%]   .label__icon.icon__border--none[_ngcontent-%COMP%]{border:none}app-label[_ngcontent-%COMP%]   .label.column[_ngcontent-%COMP%]   .label__icon[_ngcontent-%COMP%]{--label__icon--align: center}app-label[_ngcontent-%COMP%]   .label__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;overflow:hidden;line-height:1.5;width:var(--label__width)}app-label[_ngcontent-%COMP%]   .label__prefix[_ngcontent-%COMP%]{font-size:var(--label__prefix--size);color:var(--label__prefix--color);text-transform:uppercase}app-label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{color:var(--label__title--color);font-weight:600;line-height:1.25;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;text-overflow:ellipsis;overflow:hidden}app-label[_ngcontent-%COMP%]   .label__subtitle[_ngcontent-%COMP%]{font-size:var(--label__subtitle--size);color:var(--label__subtitle--color);width:-webkit-fill-available;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;text-overflow:ellipsis;overflow:hidden}.button__group[_ngcontent-%COMP%]{--panel__direction: row;display:flex;flex-direction:row;align-items:center;justify-content:flex-start;column-gap:var(--wrapper__gap--col);width:100%}.label.xxs[_ngcontent-%COMP%]{font-size:12px}.label.xs[_ngcontent-%COMP%]{font-size:14px}.label.sm[_ngcontent-%COMP%]{font-size:16px}.label.md[_ngcontent-%COMP%]{font-size:20px}.label.lg[_ngcontent-%COMP%]{font-size:30px}.label.xl[_ngcontent-%COMP%]{font-size:40px}"]})}return Oe})()},7587:(yn,wt,ie)=>{ie.d(wt,{z:()=>it});var D=ie(3953),x=ie(1827),L=ie(1229);const Ue=[[["app-button","severity","danger"]],[["app-button","variant","outline"]],[["app-button","severity","success"]]],Ze=["app-button[severity=danger]","app-button[variant=outline]","app-button[severity=success]"];function Ee(ve,Ie){if(1&ve){const Oe=D.RV6();D.j41(0,"app-button",12),D.bIt("click",function(){D.eBV(Oe);const Be=D.XpG();return D.Njj(Be.close())}),D.k0s()}}function Xe(ve,Ie){if(1&ve&&D.nrm(0,"img",7),2&ve){const Oe=D.XpG();D.FS9("alt",Oe.caption),D.Y8G("src",Oe.img,D.B4B)}}function Et(ve,Ie){if(1&ve&&(D.j41(0,"p",8),D.EFF(1),D.k0s()),2&ve){const Oe=D.XpG();D.R7$(),D.JRh(Oe.caption)}}let it=(()=>{class ve{constructor(){this.size="md",this.closeModal=new D.bkB,this.confirmAction=new D.bkB}close(){this.closeModal.emit()}confirm(){this.confirmAction.emit(),this.close()}static#e=this.\u0275fac=function(pt){return new(pt||ve)};static#t=this.\u0275cmp=D.VBU({type:ve,selectors:[["app-modal"]],inputs:{img:"img",caption:"caption",prefix:"prefix",title:"title",subtitle:"subtitle",icon:"icon",size:"size",closeable:"closeable"},outputs:{closeModal:"closeModal",confirmAction:"confirmAction"},standalone:!0,features:[D.aNF],ngContentSelectors:Ze,decls:15,vars:8,consts:[[1,"modal__backdrop",3,"click"],[1,"modal__wrapper",3,"click"],[1,"modal__header"],["direction","row",3,"prefix","icon","size","label","subtitle"],["icon","close","variant","icon","severity","primary"],[1,"modal__body"],[1,"modal__img--wrapper"],[1,"modal__img",3,"src","alt"],[1,"modal__caption"],[1,"modal__footer"],[1,"modal__footer--left"],[1,"modal__footer--right"],["icon","close","variant","icon","severity","primary",3,"click"]],template:function(pt,Be){1&pt&&(D.NAR(Ue),D.j41(0,"span",0),D.bIt("click",function(){return Be.close()}),D.j41(1,"section",1),D.bIt("click",function(kt){return kt.stopPropagation()}),D.j41(2,"header",2)(3,"app-label",3),D.DNE(4,Ee,1,0,"app-button",4),D.k0s()(),D.j41(5,"div",5)(6,"figure",6),D.DNE(7,Xe,1,2,"img",7)(8,Et,2,1,"p",8),D.k0s()(),D.j41(9,"footer",9)(10,"span",10),D.SdG(11),D.SdG(12,1),D.k0s(),D.j41(13,"span",11),D.SdG(14,2),D.k0s()()()()),2&pt&&(D.R7$(3),D.Y8G("prefix",Be.prefix)("icon",Be.icon)("size",Be.size)("label",Be.title)("subtitle",Be.subtitle),D.R7$(),D.vxM(Be.closeable?4:-1),D.R7$(3),D.vxM(Be.img?7:-1),D.R7$(),D.vxM(Be.caption?8:-1))},dependencies:[x.U,L.Q],styles:[".modal__backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:3}.modal__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:var(--wrapper__gap);background-color:#fff;padding:1.5rem;border-radius:8px;max-width:80vw;max-height:75vh;width:500px;height:-moz-fit-content;height:fit-content;position:relative;box-shadow:var(--box-shadow)}.modal__wrapper[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:var(--wrapper__gap)}.modal__wrapper[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]   .modal__img--wrapper[_ngcontent-%COMP%]   .modal__img[_ngcontent-%COMP%]{width:100%;max-height:280px;object-fit:contain}.modal__wrapper[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]   .modal__img--wrapper[_ngcontent-%COMP%]   .modal__caption[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.875rem;color:var(--neutral)}.modal__wrapper[_ngcontent-%COMP%]   .modal__footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}@media screen and (max-width: 768px){.modal__content[_ngcontent-%COMP%]{max-width:90%;padding:1rem}}"]})}return ve})()},5699:(yn,wt,ie)=>{ie.d(wt,{d:()=>L});var D=ie(4341),x=ie(3953);let L=(()=>{class Ue{constructor(Ee){this.formGroupDirective=Ee,this.isRequired=!1}ngOnInit(){if(this.control){const Ee=this.getFormControl(this.control);Ee&&(this.isRequired=this.hasRequiredValidator(Ee))}}getFormControl(Ee){return this.formGroupDirective.form.get(Ee)}hasRequiredValidator(Ee){return Ee.hasValidator(D.k0.required)}static#e=this.\u0275fac=function(Xe){return new(Xe||Ue)(x.rXU(D.j4))};static#t=this.\u0275cmp=x.VBU({type:Ue,selectors:[["app-required"]],inputs:{label:"label",control:"control"},standalone:!0,features:[x.aNF],decls:4,vars:3,consts:[[3,"for"],[1,"required"]],template:function(Xe,Et){1&Xe&&(x.j41(0,"label",0),x.EFF(1),x.k0s(),x.j41(2,"span",1),x.EFF(3),x.k0s()),2&Xe&&(x.Y8G("for",Et.control),x.R7$(),x.SpI(" ",Et.label,"\n"),x.R7$(2),x.JRh(Et.isRequired?"*":" "))}})}return Ue})()},6184:(yn,wt,ie)=>{var D=ie(345),x=ie(7407),L=ie(3953),Ue=ie(8010),Ze=ie(6354);const Ee=()=>(0,L.WQX)(x.Ix),Xe=()=>(0,L.WQX)(Ue.u).authState$;var ve=ie(467),Ie=ie(4341),Oe=ie(4258),pt=ie(6335),Be=ie(1827),Ct=ie(223),kt=ie(1229),Bt=ie(8359),Kt=ie(177);function An(i,e){if(1&i&&(L.j41(0,"label",4),L.EFF(1),L.k0s()),2&i){const n=L.XpG();L.STu("switcher__label switcher__label--right switcher--",n.size," ",n.on?"switcher--on":"switcher--off",""),L.R7$(),L.JRh(n.on?n.onLabel:n.offLabel)}}let Jn=(()=>{class i{constructor(){this.size="md",this.onLabel="On",this.offLabel="Off",this.colorOn="green",this.colorOff="gray",this.disabled=!1,this.labelPosition="right",this.toggle=new L.bkB}onToggle(){this.disabled||(this.on=!this.on,this.toggle.emit(this.on))}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-switcher"]],inputs:{on:"on",size:"size",onLabel:"onLabel",offLabel:"offLabel",colorOn:"colorOn",colorOff:"colorOff",disabled:"disabled",labelPosition:"labelPosition"},outputs:{toggle:"toggle"},standalone:!0,features:[L.aNF],decls:4,vars:4,consts:[[1,"switcher"],["type","checkbox",3,"click","checked"],[1,"slider","round"],["for","",3,"class",4,"ngIf"],["for",""]],template:function(s,c){1&s&&(L.j41(0,"section",0)(1,"input",1),L.bIt("click",function(){return c.onToggle()}),L.k0s(),L.nrm(2,"span",2),L.DNE(3,An,2,5,"label",3),L.k0s()),2&s&&(L.AVh("switcher--disabled",c.disabled),L.R7$(),L.Y8G("checked",c.on),L.R7$(2),L.Y8G("ngIf","right"===c.labelPosition))},dependencies:[Kt.MD,Kt.bT],styles:['.switcher[_ngcontent-%COMP%]{--switcher--color-on: var(--color-on, --success);--switcher--color-off: var(--color-off, --neutralLight);--switcher__height: 36px;--switcher__width: 60px;position:relative;height:200px;display:flex;justify-content:space-between;column-gap:var(--panel__gap--col);align-items:center;width:100%;max-width:max-content;height:var(--switcher__height);margin:calc(var(--panel__gap--col) / 2) 0}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{opacity:0;width:calc(var(--switcher__width) + 20px);height:var(--switcher__height);z-index:1}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:34px;width:var(--switcher__width);height:var(--switcher__height)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:var(--primary)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider.round[_ngcontent-%COMP%]{border-radius:var(--switcher__height)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px var(--primary)}.switcher--disabled[_ngcontent-%COMP%]{cursor:not-allowed;pointer-events:none;opacity:.5}.switcher__label[_ngcontent-%COMP%]{font-size:var(--input__label--size);line-height:var(--input__label--lineHeight)}']})}return i})();var Dt=ie(3586),It=ie(7440),_t=ie(2214),Lt=ie(7852),At=ie(1076),Ht=ie(1362);const ke="firebasestorage.googleapis.com",bn="storageBucket";class Se extends At.g{constructor(e,n,s=0){super(gn(e),`Firebase Storage: ${n} (${gn(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Se.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gn(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var bt=function(i){return i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment",i}(bt||{});function gn(i){return"storage/"+i}function er(){return new Se(bt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function _e(){return new Se(bt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mt(){return new Se(bt.CANCELED,"User canceled the upload/download.")}function qn(){return new Se(bt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qr(i){return new Se(bt.INVALID_ARGUMENT,i)}function Tn(){return new Se(bt.APP_DELETED,"The Firebase app was deleted.")}function oi(i,e){return new Se(bt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function wn(i){throw new Se(bt.INTERNAL_ERROR,"Internal error: "+i)}class Br{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Br.makeFromUrl(e,n)}catch{return new Br(e,"")}if(""===s.path)return s;throw function jn(i){return new Se(bt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}(e)}static makeFromUrl(e,n){let s=null;const c="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+c+"(/(.*))?$","i");function b(at){at.path_=decodeURIComponent(at.path)}const B=n.replace(/[.]/g,"\\."),Ye=[{regex:m,indices:{bucket:1,path:3},postModify:function l(at){"/"===at.path.charAt(at.path.length-1)&&(at.path_=at.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${B}/v[A-Za-z0-9_]+/b/${c}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${n===ke?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${c}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let at=0;at<Ye.length;at++){const Ft=Ye[at],$t=Ft.regex.exec(e);if($t){let pn=$t[Ft.indices.path];pn||(pn=""),s=new Br($t[Ft.indices.bucket],pn),Ft.postModify(s);break}}if(null==s)throw function zt(i){return new Se(bt.INVALID_URL,"Invalid URL '"+i+"'.")}(e);return s}}class si{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function un(i){return"string"==typeof i||i instanceof String}function Wt(i){return zr()&&i instanceof Blob}function zr(){return typeof Blob<"u"}function ki(i,e,n,s){if(s<e)throw qr(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw qr(`Invalid value for '${i}'. Expected ${n} or less.`)}function Dr(i,e,n){let s=e;return null==n&&(s=`https://${e}`),`${n}://${s}/v0${i}`}function mi(i){const e=encodeURIComponent;let n="?";for(const s in i)i.hasOwnProperty(s)&&(n=n+(e(s)+"=")+e(i[s])+"&");return n=n.slice(0,-1),n}var ai=function(i){return i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT",i}(ai||{});function Wr(i,e){const n=i>=500&&i<600,c=-1!==[408,429].indexOf(i),l=-1!==e.indexOf(i);return n||c||l}class _i{constructor(e,n,s,c,l,g,m,y,b,P,B,z=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=c,this.successCodes_=l,this.additionalRetryCodes_=g,this.callback_=m,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=P,this.connectionFactory_=B,this.retry=z,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,ae)=>{this.resolve_=K,this.reject_=ae,this.start_()})}start_(){const n=(s,c)=>{const l=this.resolve_,g=this.reject_,m=c.connection;if(c.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());!function Lo(i){return void 0!==i}(y)?l():l(y)}catch(y){g(y)}else if(null!==m){const y=er();y.serverResponse=m.getErrorText(),g(this.errorCallback_?this.errorCallback_(m,y):y)}else g(c.canceled?this.appDelete_?Tn():mt():_e())};this.canceled_?n(0,new Vn(!1,null,!0)):this.backoffId_=function Kn(i,e,n){let s=1,c=null,l=null,g=!1,m=0;function y(){return 2===m}let b=!1;function P(...Re){b||(b=!0,e.apply(null,Re))}function B(Re){c=setTimeout(()=>{c=null,i(K,y())},Re)}function z(){l&&clearTimeout(l)}function K(Re,...Ve){if(b)return void z();if(Re)return z(),void P.call(null,Re,...Ve);if(y()||g)return z(),void P.call(null,Re,...Ve);let Ye;s<64&&(s*=2),1===m?(m=2,Ye=0):Ye=1e3*(s+Math.random()),B(Ye)}let ae=!1;function ye(Re){ae||(ae=!0,z(),!b&&(null!==c?(Re||(m=2),clearTimeout(c),B(0)):Re||(m=1)))}return B(0),l=setTimeout(()=>{g=!0,ye(!0)},n),ye}((s,c)=>{if(c)return void s(!1,new Vn(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const g=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(g),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(g),this.pendingConnection_=null;const m=l.getErrorCode()===ai.NO_ERROR,y=l.getStatus();if(!m||Wr(y,this.additionalRetryCodes_)&&this.retry){const P=l.getErrorCode()===ai.ABORT;return void s(!1,new Vn(!1,null,P))}const b=-1!==this.successCodes_.indexOf(y);s(!0,new Vn(b,l))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function cn(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Vn{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function Cr(...i){const e=function ei(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let s=0;s<i.length;s++)n.append(i[s]);return n.getBlob()}if(zr())return new Blob(i);throw new Se(bt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const be={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qe{constructor(e,n){this.data=e,this.contentType=n||null}}function ge(i){const e=[];for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);s<=127?e.push(s):s<=2047?e.push(192|s>>6,128|63&s):55296==(64512&s)?n<i.length-1&&56320==(64512&i.charCodeAt(n+1))?(s=65536|(1023&s)<<10|1023&i.charCodeAt(++n),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):e.push(239,191,189):56320==(64512&s)?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(e)}function lt(i,e){switch(i){case be.BASE64:{const c=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(c||l)throw oi(i,"Invalid character '"+(c?"-":"_")+"' found: is it base64url encoded?");break}case be.BASE64URL:{const c=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(c||l)throw oi(i,"Invalid character '"+(c?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function tt(i){if(typeof atob>"u")throw function lr(i){return new Se(bt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(i)}(e)}catch(c){throw c.message.includes("polyfill")?c:oi(i,"Invalid character found")}const s=new Uint8Array(n.length);for(let c=0;c<n.length;c++)s[c]=n.charCodeAt(c);return s}class Ke{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw oi(be.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;null!=s&&(this.base64=function Hn(i,e){return i.length>=e.length&&i.substring(i.length-e.length)===e}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}class Kr{constructor(e,n){let s=0,c="";Wt(e)?(this.data_=e,s=e.size,c=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=c}size(){return this.size_}type(){return this.type_}slice(e,n){if(Wt(this.data_)){const c=function fe(i,e,n){return i.webkitSlice?i.webkitSlice(e,n):i.mozSlice?i.mozSlice(e,n):i.slice?i.slice(e,n):null}(this.data_,e,n);return null===c?null:new Kr(c)}{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Kr(s,!0)}}static getBlob(...e){if(zr()){const n=e.map(s=>s instanceof Kr?s.data_:s);return new Kr(Cr.apply(null,n))}{const n=e.map(g=>un(g)?function le(i,e){switch(i){case be.RAW:return new Qe(ge(e));case be.BASE64:case be.BASE64URL:return new Qe(lt(i,e));case be.DATA_URL:return new Qe(function Xt(i){const e=new Ke(i);return e.base64?lt(be.BASE64,e.rest):function De(i){let e;try{e=decodeURIComponent(i)}catch{throw oi(be.DATA_URL,"Malformed data URL.")}return ge(e)}(e.rest)}(e),function xn(i){return new Ke(i).contentType}(e))}throw er()}(be.RAW,g).data:g.data_);let s=0;n.forEach(g=>{s+=g.byteLength});const c=new Uint8Array(s);let l=0;return n.forEach(g=>{for(let m=0;m<g.length;m++)c[l++]=g[m]}),new Kr(c,!0)}}uploadData(){return this.data_}}function mr(i){let e;try{e=JSON.parse(i)}catch{return null}return function Qn(i){return"object"==typeof i&&!Array.isArray(i)}(e)?e:null}function Li(i){const e=i.lastIndexOf("/",i.length-2);return-1===e?i:i.slice(e+1)}function Hr(i,e){return e}class ci{constructor(e,n,s,c){this.server=e,this.local=n||e,this.writable=!!s,this.xform=c||Hr}}let Us=null;function no(){if(Us)return Us;const i=[];i.push(new ci("bucket")),i.push(new ci("generation")),i.push(new ci("metageneration")),i.push(new ci("name","fullPath",!0));const n=new ci("name");n.xform=function e(l,g){return function yo(i){return!un(i)||i.length<2?i:Li(i)}(g)},i.push(n);const c=new ci("size");return c.xform=function s(l,g){return void 0!==g?Number(g):g},i.push(c),i.push(new ci("timeCreated")),i.push(new ci("updated")),i.push(new ci("md5Hash",null,!0)),i.push(new ci("cacheControl",null,!0)),i.push(new ci("contentDisposition",null,!0)),i.push(new ci("contentEncoding",null,!0)),i.push(new ci("contentLanguage",null,!0)),i.push(new ci("contentType",null,!0)),i.push(new ci("metadata","customMetadata",!0)),Us=i,Us}function As(i,e,n){const s=mr(e);return null===s?null:function kc(i,e,n){const s={type:"file"},c=n.length;for(let l=0;l<c;l++){const g=n[l];s[g.local]=g.xform(s,e[g.server])}return function Is(i,e){Object.defineProperty(i,"ref",{get:function n(){const l=new Br(i.bucket,i.fullPath);return e._makeStorageReference(l)}})}(s,i),s}(i,s,n)}function vt(i,e){const n={},s=e.length;for(let c=0;c<s;c++){const l=e[c];l.writable&&(n[l.server]=i[l.local])}return JSON.stringify(n)}class On{constructor(e,n,s,c){this.url=e,this.method=n,this.handler=s,this.timeout=c,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Nn(i){if(!i)throw er()}function Rr(i,e){return function n(s,c){const l=As(i,c,e);return Nn(null!==l),l}}function Vo(i){return function e(n,s){let c;return c=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function Fe(){return new Se(bt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function xt(){return new Se(bt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function je(i){return new Se(bt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===n.getStatus()?function he(i){return new Se(bt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}(i.path):s,c.status=n.getStatus(),c.serverResponse=s.serverResponse,c}}function Xr(i){const e=Vo(i);return function n(s,c){let l=e(s,c);return 404===s.getStatus()&&(l=function Pe(i){return new Se(bt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}(i.path)),l.serverResponse=c.serverResponse,l}}function Ts(i,e,n){const s=Object.assign({},n);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=function hc(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}(null,e)),s}class lo{constructor(e,n,s,c){this.current=e,this.total=n,this.finalized=!!s,this.metadata=c||null}}function To(i,e){let n=null;try{n=i.getResponseHeader("X-Goog-Upload-Status")}catch{Nn(!1)}return Nn(!!n&&-1!==(e||["active"]).indexOf(n)),n}function ua(i){switch(i){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class qi{constructor(e,n,s){if(function Nt(i){return"function"==typeof i}(e)||null!=n||null!=s)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function Ri(i){return(...e)=>{Promise.resolve().then(()=>i(...e))}}let js=null;class Vl{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ai.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ai.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ai.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,c){if(this.sent_)throw wn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==c)for(const l in c)c.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,c[l].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Vi extends Vl{initXhr(){this.xhr_.responseType="text"}}function Bo(){return js?js():new Vi}class la{constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=no(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=c=>{if(this._request=void 0,this._chunkMultiplier=1,c._codeEquals(bt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(Wr(c.status,[])){if(!l)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();c=_e()}this._error=c,this._transition("error")}},this._metadataErrorHandler=c=>{this._request=void 0,c._codeEquals(bt.CANCELED)?this.completeTransitions_():(this._error=c,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((c,l)=>{this._resolve=c,this._reject=l,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const s=function Zo(i,e,n,s,c){const l=e.bucketOnlyServerUrl(),g=Ts(e,s,c),m={name:g.fullPath},y=Dr(l,i.host,i._protocol),P={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":g.contentType,"Content-Type":"application/json; charset=utf-8"},B=vt(g,n),ae=new On(y,"POST",function K(ye){let Re;To(ye);try{Re=ye.getResponseHeader("X-Goog-Upload-URL")}catch{Nn(!1)}return Nn(un(Re)),Re},i.maxUploadRetryTime);return ae.urlParams=m,ae.headers=P,ae.body=B,ae.errorHandler=Vo(e),ae}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),c=this._ref.storage._makeRequest(s,Bo,e,n);this._request=c,c.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const c=function ro(i,e,n,s){const y=new On(n,"POST",function l(b){const P=To(b,["active","final"]);let B=null;try{B=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Nn(!1)}B||Nn(!1);const z=Number(B);return Nn(!isNaN(z)),new lo(z,s.size(),"final"===P)},i.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=Vo(e),y}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(c,Bo,n,s);this._request=l,l.getPromise().then(g=>{this._request=void 0,this._updateProgress(g.current),this._needToFetchStatus=!1,g.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new lo(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((c,l)=>{let g;try{g=function as(i,e,n,s,c,l,g,m){const y=new lo(0,0);if(g?(y.current=g.current,y.total=g.total):(y.current=0,y.total=s.size()),s.size()!==y.total)throw function jr(){return new Se(bt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const b=y.total-y.current;let P=b;c>0&&(P=Math.min(P,c));const B=y.current;let K="";K=0===P?"finalize":b===P?"upload, finalize":"upload";const ae={"X-Goog-Upload-Command":K,"X-Goog-Upload-Offset":`${y.current}`},ye=s.slice(B,B+P);if(null===ye)throw qn();const Ye=new On(n,"POST",function Re(at,Ft){const $t=To(at,["active","final"]),Zt=y.current+P,pn=s.size();let rr;return rr="final"===$t?Rr(e,l)(at,Ft):null,new lo(Zt,pn,"final"===$t,rr)},e.maxUploadRetryTime);return Ye.headers=ae,Ye.body=ye.uploadData(),Ye.progressCallback=m||null,Ye.errorHandler=Vo(i),Ye}(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const m=this._ref.storage._makeRequest(g,Bo,c,l,!1);this._request=m,m.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=function $a(i,e,n){const c=Dr(e.fullServerUrl(),i.host,i._protocol),g=i.maxOperationRetryTime,m=new On(c,"GET",Rr(i,n),g);return m.errorHandler=Xr(e),m}(this._ref.storage,this._ref._location,this._mappings),c=this._ref.storage._makeRequest(s,Bo,e,n);this._request=c,c.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=function Ln(i,e,n,s,c){const l=e.bucketOnlyServerUrl(),g={"X-Goog-Upload-Protocol":"multipart"},y=function m(){let Ye="";for(let at=0;at<2;at++)Ye+=Math.random().toString().slice(2);return Ye}();g["Content-Type"]="multipart/related; boundary="+y;const b=Ts(e,s,c),P=vt(b,n),K=Kr.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+P+"\r\n--"+y+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",s,"\r\n--"+y+"--");if(null===K)throw qn();const ae={name:b.fullPath},ye=Dr(l,i.host,i._protocol),Ve=i.maxUploadRetryTime,Ne=new On(ye,"POST",Rr(i,n),Ve);return Ne.urlParams=ae,Ne.headers=g,Ne.body=K.uploadData(),Ne.errorHandler=Vo(e),Ne}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),c=this._ref.storage._makeRequest(s,Bo,e,n);this._request=c,c.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=mt(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ua(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,c){const l=new qi(n||void 0,s||void 0,c||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ua(this._state)){case"success":Ri(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":Ri(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ua(this._state)){case"running":case"paused":e.next&&Ri(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&Ri(e.complete.bind(e))();break;default:e.error&&Ri(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class xo{constructor(e,n){this._service=e,this._location=n instanceof Br?n:Br.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xo(e,n)}get root(){const e=new Br(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Li(this._location.path)}get storage(){return this._service}get parent(){const e=function vi(i){if(0===i.length)return null;const e=i.lastIndexOf("/");return-1===e?"":i.slice(0,e)}(this._location.path);if(null===e)return null;const n=new Br(this._location.bucket,e);return new xo(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw function pr(i){return new Se(bt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function pc(i){i._throwIfRoot("getDownloadURL");const e=function ca(i,e,n){const c=Dr(e.fullServerUrl(),i.host,i._protocol),g=i.maxOperationRetryTime,m=new On(c,"GET",function uo(i,e){return function n(s,c){const l=As(i,c,e);return Nn(null!==l),function du(i,e,n,s){const c=mr(e);if(null===c||!un(c.downloadTokens))return null;const l=c.downloadTokens;if(0===l.length)return null;const g=encodeURIComponent;return l.split(",").map(b=>{const B=i.fullPath;return Dr("/b/"+g(i.bucket)+"/o/"+g(B),n,s)+mi({alt:"media",token:b})})[0]}(l,c,i.host,i._protocol)}}(i,n),g);return m.errorHandler=Xr(e),m}(i.storage,i._location,no());return i.storage.makeRequestWithTokens(e,Bo).then(n=>{if(null===n)throw function to(){return new Se(bt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function fo(i,e){if(i instanceof So){const n=i;if(null==n._bucket)throw function en(){return new Se(bt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bn+"' property when initializing the app?")}();const s=new xo(n,n._bucket);return null!=e?fo(s,e):s}return void 0!==e?function Gs(i,e){const n=function Yn(i,e){const n=e.split("/").filter(s=>s.length>0).join("/");return 0===i.length?n:i+"/"+n}(i._location.path,e),s=new Br(i._location.bucket,n);return new xo(i.storage,s)}(i,e):i}function es(i,e){const n=e?.[bn];return null==n?null:Br.makeFromBucketSpec(n,i)}class So{constructor(e,n,s,c,l){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=c,this._firebaseVersion=l,this._bucket=null,this._host=ke,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=c?Br.makeFromBucketSpec(c,this._host):es(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Br.makeFromBucketSpec(this._url,e):es(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ki("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ki("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ve.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const s=yield n.getToken();if(null!==s)return s.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ve.A)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xo(this,e)}_makeRequest(e,n,s,c,l=!0){if(this._deleted)return new si(Tn());{const g=function Fi(i,e,n,s,c,l,g=!0){const m=mi(i.urlParams),y=i.url+m,b=Object.assign({},i.headers);return function zi(i,e){e&&(i["X-Firebase-GMPID"]=e)}(b,e),function Er(i,e){null!==e&&e.length>0&&(i.Authorization="Firebase "+e)}(b,n),function ri(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(b,l),function Wi(i,e){null!==e&&(i["X-Firebase-AppCheck"]=e)}(b,s),new _i(y,i.method,b,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,c,g)}(e,this._appId,s,c,n,this._firebaseVersion,l);return this._requests.add(g),g.getPromise().then(()=>this._requests.delete(g),()=>this._requests.delete(g)),g}}makeRequestWithTokens(e,n){var s=this;return(0,ve.A)(function*(){const[c,l]=yield Promise.all([s._getAuthToken(),s._getAppCheckToken()]);return s._makeRequest(e,n,c,l).getPromise()})()}}const Da="@firebase/storage",Uo="storage";function Eo(i,e,n){return function Hs(i,e,n){return i._throwIfRoot("uploadBytesResumable"),new la(i,new Kr(e),n)}(i=(0,At.Ku)(i),e,n)}function nn(i){return pc(i=(0,At.Ku)(i))}function hr(i,e){return function za(i,e){if(e&&function ls(i){return/^[A-Za-z]+:\/\//.test(i)}(e)){if(i instanceof So)return function hu(i,e){return new xo(i,e)}(i,e);throw qr("To use ref(service, url), the first argument must be a Storage instance.")}return fo(i,e)}(i=(0,At.Ku)(i),e)}function Ra(i=(0,Lt.Sx)(),e){i=(0,At.Ku)(i);const s=(0,Lt.j6)(i,Uo).getImmediate({identifier:e}),c=(0,At.yU)("storage");return c&&function Ma(i,e,n,s={}){!function ha(i,e,n,s={}){i.host=`${e}:${n}`,i._protocol="http";const{mockUserToken:c}=s;c&&(i._overrideAuthToken="string"==typeof c?c:(0,At.Fy)(c,i.app.options.projectId))}(i,e,n,s)}(s,...c),s}function ga(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),c=i.getProvider("app-check-internal");return new So(n,s,c,e,Lt.MF)}!function ds(){(0,Lt.om)(new Ht.uA(Uo,ga,"PUBLIC").setMultipleInstances(!0)),(0,Lt.KO)(Da,"0.12.5",""),(0,Lt.KO)(Da,"0.12.5","esm2017")}();class ra{constructor(e){return e}}const Vc="storage",so=new L.nKC("angularfire2.storage-instances");function _a(i){return(e,n)=>{const s=e.runOutsideAngular(()=>i(n));return new ra(s)}}const xd={provide:class mc{constructor(){return(0,Dt.CA)(Vc)}},deps:[[new L.Xx1,so]]},Gr={provide:ra,useFactory:function Ei(i,e){const n=(0,Dt.lR)(Vc,i,e);return n&&new ra(n)},deps:[[new L.Xx1,so],It.XU]},Xi=(0,Dt.S3)(nn,!0),Go=(0,Dt.S3)(Ra,!0),Do=(0,Dt.S3)(hr,!0),Y=(0,Dt.S3)(Eo,!0);var H=ie(2418);var Ot=function(){var i=function(n,s){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(c[g]=l[g])})(n,s)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),$n=function(i){function e(n,s){var c=this.constructor,l=i.call(this,n,s)||this;return Object.defineProperty(l,"name",{value:c.name,enumerable:!1,configurable:!0}),function se(i,e){var n=Object.setPrototypeOf;n?n(i,e):i.__proto__=e}(l,c.prototype),function Te(i,e){void 0===e&&(e=i.constructor);var n=Error.captureStackTrace;n&&n(i,e)}(l),l}return Ot(e,i),e}(Error),Ro=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Dn=function(i){function e(n){void 0===n&&(n=void 0);var s=i.call(this,n)||this;return s.message=n,s}return Ro(e,i),e.prototype.getKind=function(){return this.constructor.kind},e.kind="Exception",e}($n);var gu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Zr=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return gu(e,i),e.kind="ArgumentException",e}(Dn);var fs=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const ln=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return fs(e,i),e.kind="IllegalArgumentException",e}(Dn),jc=function(){function i(e){if(this.binarizer=e,null===e)throw new ln("Binarizer must be non-null.")}return i.prototype.getWidth=function(){return this.binarizer.getWidth()},i.prototype.getHeight=function(){return this.binarizer.getHeight()},i.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},i.prototype.getBlackMatrix=function(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},i.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},i.prototype.crop=function(e,n,s,c){var l=this.binarizer.getLuminanceSource().crop(e,n,s,c);return new i(this.binarizer.createBinarizer(l))},i.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},i.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new i(this.binarizer.createBinarizer(e))},i.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new i(this.binarizer.createBinarizer(e))},i.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},i}();var Zn=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const ui=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Zn(e,i),e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Dn),Xa=function(){function i(e){this.source=e}return i.prototype.getLuminanceSource=function(){return this.source},i.prototype.getWidth=function(){return this.source.getWidth()},i.prototype.getHeight=function(){return this.source.getHeight()},i}(),Ur=function(){function i(){}return i.arraycopy=function(e,n,s,c,l){for(;l--;)s[c++]=e[n++]},i.currentTimeMillis=function(){return Date.now()},i}();var ll=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const yc=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return ll(e,i),e.kind="IndexOutOfBoundsException",e}(Dn);var mu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Bl=function(i){function e(n,s){void 0===n&&(n=void 0),void 0===s&&(s=void 0);var c=i.call(this,s)||this;return c.index=n,c.message=s,c}return mu(e,i),e.kind="ArrayIndexOutOfBoundsException",e}(yc),Jr=function(){function i(){}return i.fill=function(e,n){for(var s=0,c=e.length;s<c;s++)e[s]=n},i.fillWithin=function(e,n,s,c){i.rangeCheck(e.length,n,s);for(var l=n;l<s;l++)e[l]=c},i.rangeCheck=function(e,n,s){if(n>s)throw new ln("fromIndex("+n+") > toIndex("+s+")");if(n<0)throw new Bl(n);if(s>e)throw new Bl(s)},i.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},i.create=function(e,n,s){return Array.from({length:e}).map(function(l){return Array.from({length:n}).fill(s)})},i.createInt32Array=function(e,n,s){return Array.from({length:e}).map(function(l){return Int32Array.from({length:n}).fill(s)})},i.equals=function(e,n){if(!(e&&n&&e.length&&n.length&&e.length===n.length))return!1;for(var s=0,c=e.length;s<c;s++)if(e[s]!==n[s])return!1;return!0},i.hashCode=function(e){var n,s;if(null===e)return 0;var c=1;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),g=l.next();!g.done;g=l.next())c=31*c+g.value}catch(y){n={error:y}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return c},i.fillUint8Array=function(e,n){for(var s=0;s!==e.length;s++)e[s]=n},i.copyOf=function(e,n){return e.slice(0,n)},i.copyOfUint8Array=function(e,n){if(e.length<=n){var s=new Uint8Array(n);return s.set(e),s}return e.slice(0,n)},i.copyOfRange=function(e,n,s){var c=s-n,l=new Int32Array(c);return Ur.arraycopy(e,n,l,0,c),l},i.binarySearch=function(e,n,s){void 0===s&&(s=i.numberComparator);for(var c=0,l=e.length-1;c<=l;){var g=l+c>>1,m=s(n,e[g]);if(m>0)c=g+1;else{if(!(m<0))return g;l=g-1}}return-c-1},i.numberComparator=function(e,n){return e-n},i}(),ur=function(){function i(){}return i.numberOfTrailingZeros=function(e){var n;if(0===e)return 32;var s=31;return 0!=(n=e<<16)&&(s-=16,e=n),0!=(n=e<<8)&&(s-=8,e=n),0!=(n=e<<4)&&(s-=4,e=n),0!=(n=e<<2)&&(s-=2,e=n),s-(e<<1>>>31)},i.numberOfLeadingZeros=function(e){if(0===e)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-(e>>>31)},i.toHexString=function(e){return e.toString(16)},i.toBinaryString=function(e){return String(parseInt(String(e),2))},i.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,63&(e+=e>>>8)+(e>>>16)},i.truncDivision=function(e,n){return Math.trunc(e/n)},i.parseInt=function(e,n){return void 0===n&&(n=void 0),parseInt(e,n)},i.MIN_VALUE_32_BITS=-2147483648,i.MAX_VALUE=Number.MAX_SAFE_INTEGER,i}(),Ci=function(){function i(e,n){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=null==n?i.makeArray(e):n)}return i.prototype.getSize=function(){return this.size},i.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},i.prototype.ensureCapacity=function(e){if(e>32*this.bits.length){var n=i.makeArray(e);Ur.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},i.prototype.get=function(e){return!!(this.bits[Math.floor(e/32)]&1<<(31&e))},i.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},i.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},i.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var s=this.bits,c=Math.floor(e/32),l=s[c];l&=~((1<<(31&e))-1);for(var g=s.length;0===l;){if(++c===g)return n;l=s[c]}var m=32*c+ur.numberOfTrailingZeros(l);return m>n?n:m},i.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var s=this.bits,c=Math.floor(e/32),l=~s[c];l&=~((1<<(31&e))-1);for(var g=s.length;0===l;){if(++c===g)return n;l=~s[c]}var m=32*c+ur.numberOfTrailingZeros(l);return m>n?n:m},i.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},i.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new ln;if(n!==e){n--;for(var s=Math.floor(e/32),c=Math.floor(n/32),l=this.bits,g=s;g<=c;g++)l[g]|=(2<<(g<c?31:31&n))-(1<<(g>s?0:31&e))}},i.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,s=0;s<e;s++)n[s]=0},i.prototype.isRange=function(e,n,s){if(n<e||e<0||n>this.size)throw new ln;if(n===e)return!0;n--;for(var c=Math.floor(e/32),l=Math.floor(n/32),g=this.bits,m=c;m<=l;m++){var P=(2<<(m<l?31:31&n))-(1<<(m>c?0:31&e))&4294967295;if((g[m]&P)!==(s?P:0))return!1}return!0},i.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},i.prototype.appendBits=function(e,n){if(n<0||n>32)throw new ln("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var s=n;s>0;s--)this.appendBit(1==(e>>s-1&1))},i.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var s=0;s<n;s++)this.appendBit(e.get(s))},i.prototype.xor=function(e){if(this.size!==e.size)throw new ln("Sizes don't match");for(var n=this.bits,s=0,c=n.length;s<c;s++)n[s]^=e.bits[s]},i.prototype.toBytes=function(e,n,s,c){for(var l=0;l<c;l++){for(var g=0,m=0;m<8;m++)this.get(e)&&(g|=1<<7-m),e++;n[s+l]=g}},i.prototype.getBitArray=function(){return this.bits},i.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),s=n+1,c=this.bits,l=0;l<s;l++){var g=c[l];e[n-l]=g=(g=(g=(g=(g=g>>1&1431655765|(1431655765&g)<<1)>>2&858993459|(858993459&g)<<2)>>4&252645135|(252645135&g)<<4)>>8&16711935|(16711935&g)<<8)>>16&65535|(65535&g)<<16}if(this.size!==32*s){var m=32*s-this.size,y=e[0]>>>m;for(l=1;l<s;l++){var b=e[l];e[l-1]=y|=b<<32-m,y=b>>>m}e[s-1]=y}this.bits=e},i.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},i.prototype.equals=function(e){return e instanceof i&&(this.size===e.size&&Jr.equals(this.bits,e.bits))},i.prototype.hashCode=function(){return 31*this.size+Jr.hashCode(this.bits)},i.prototype.toString=function(){for(var e="",n=0,s=this.size;n<s;n++)7&n||(e+=" "),e+=this.get(n)?"X":".";return e},i.prototype.clone=function(){return new i(this.size,this.bits.slice())},i.prototype.toArray=function(){for(var e=[],n=0,s=this.size;n<s;n++)e.push(this.get(n));return e},i}();var Na=function(i){return i[i.OTHER=0]="OTHER",i[i.PURE_BARCODE=1]="PURE_BARCODE",i[i.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",i[i.TRY_HARDER=3]="TRY_HARDER",i[i.CHARACTER_SET=4]="CHARACTER_SET",i[i.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",i[i.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",i[i.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",i[i.ASSUME_GS1=8]="ASSUME_GS1",i[i.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",i[i.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",i[i.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS",i}(Na||{});const Un=Na;var zn=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Yt=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return zn(e,i),e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Dn);var _r=function(i){return i[i.Cp437=0]="Cp437",i[i.ISO8859_1=1]="ISO8859_1",i[i.ISO8859_2=2]="ISO8859_2",i[i.ISO8859_3=3]="ISO8859_3",i[i.ISO8859_4=4]="ISO8859_4",i[i.ISO8859_5=5]="ISO8859_5",i[i.ISO8859_6=6]="ISO8859_6",i[i.ISO8859_7=7]="ISO8859_7",i[i.ISO8859_8=8]="ISO8859_8",i[i.ISO8859_9=9]="ISO8859_9",i[i.ISO8859_10=10]="ISO8859_10",i[i.ISO8859_11=11]="ISO8859_11",i[i.ISO8859_13=12]="ISO8859_13",i[i.ISO8859_14=13]="ISO8859_14",i[i.ISO8859_15=14]="ISO8859_15",i[i.ISO8859_16=15]="ISO8859_16",i[i.SJIS=16]="SJIS",i[i.Cp1250=17]="Cp1250",i[i.Cp1251=18]="Cp1251",i[i.Cp1252=19]="Cp1252",i[i.Cp1256=20]="Cp1256",i[i.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",i[i.UTF8=22]="UTF8",i[i.ASCII=23]="ASCII",i[i.Big5=24]="Big5",i[i.GB18030=25]="GB18030",i[i.EUC_KR=26]="EUC_KR",i}(_r||{});const po=function(){function i(e,n,s){for(var c,l,g=[],m=3;m<arguments.length;m++)g[m-3]=arguments[m];this.valueIdentifier=e,this.name=s,this.values="number"==typeof n?Int32Array.from([n]):n,this.otherEncodingNames=g,i.VALUE_IDENTIFIER_TO_ECI.set(e,this),i.NAME_TO_ECI.set(s,this);for(var y=this.values,b=0,P=y.length;b!==P;b++)i.VALUES_TO_ECI.set(y[b],this);try{for(var z=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),K=z.next();!K.done;K=z.next())i.NAME_TO_ECI.set(K.value,this)}catch(ye){c={error:ye}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}}return i.prototype.getValueIdentifier=function(){return this.valueIdentifier},i.prototype.getName=function(){return this.name},i.prototype.getValue=function(){return this.values[0]},i.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Yt("incorect value");var n=i.VALUES_TO_ECI.get(e);if(void 0===n)throw new Yt("incorect value");return n},i.getCharacterSetECIByName=function(e){var n=i.NAME_TO_ECI.get(e);if(void 0===n)throw new Yt("incorect value");return n},i.prototype.equals=function(e){if(!(e instanceof i))return!1;var n=e;return this.getName()===n.getName()},i.VALUE_IDENTIFIER_TO_ECI=new Map,i.VALUES_TO_ECI=new Map,i.NAME_TO_ECI=new Map,i.Cp437=new i(_r.Cp437,Int32Array.from([0,2]),"Cp437"),i.ISO8859_1=new i(_r.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),i.ISO8859_2=new i(_r.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),i.ISO8859_3=new i(_r.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),i.ISO8859_4=new i(_r.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),i.ISO8859_5=new i(_r.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),i.ISO8859_6=new i(_r.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),i.ISO8859_7=new i(_r.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),i.ISO8859_8=new i(_r.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),i.ISO8859_9=new i(_r.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),i.ISO8859_10=new i(_r.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),i.ISO8859_11=new i(_r.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),i.ISO8859_13=new i(_r.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),i.ISO8859_14=new i(_r.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),i.ISO8859_15=new i(_r.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),i.ISO8859_16=new i(_r.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),i.SJIS=new i(_r.SJIS,20,"SJIS","Shift_JIS"),i.Cp1250=new i(_r.Cp1250,21,"Cp1250","windows-1250"),i.Cp1251=new i(_r.Cp1251,22,"Cp1251","windows-1251"),i.Cp1252=new i(_r.Cp1252,23,"Cp1252","windows-1252"),i.Cp1256=new i(_r.Cp1256,24,"Cp1256","windows-1256"),i.UnicodeBigUnmarked=new i(_r.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),i.UTF8=new i(_r.UTF8,26,"UTF8","UTF-8"),i.ASCII=new i(_r.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),i.Big5=new i(_r.Big5,28,"Big5"),i.GB18030=new i(_r.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),i.EUC_KR=new i(_r.EUC_KR,30,"EUC_KR","EUC-KR"),i}();var F=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const W=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return F(e,i),e.kind="UnsupportedOperationException",e}(Dn),Ce=function(){function i(){}return i.decode=function(e,n){var s=this.encodingName(n);return this.customDecoder?this.customDecoder(e,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(e,s):new TextDecoder(s).decode(e)},i.shouldDecodeOnFallback=function(e){return!i.isBrowser()&&"ISO-8859-1"===e},i.encode=function(e,n){var s=this.encodingName(n);return this.customEncoder?this.customEncoder(e,s):typeof TextEncoder>"u"?this.encodeFallback(e):(new TextEncoder).encode(e)},i.isBrowser=function(){return typeof window<"u"&&"[object Window]"==={}.toString.call(window)},i.encodingName=function(e){return"string"==typeof e?e:e.getName()},i.encodingCharacterSet=function(e){return e instanceof po?e:po.getCharacterSetECIByName(e)},i.decodeFallback=function(e,n){var s=this.encodingCharacterSet(n);if(i.isDecodeFallbackSupported(s)){for(var c="",l=0,g=e.length;l<g;l++){var m=e[l].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(s.equals(po.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new W("Encoding "+this.encodingName(n)+" not supported by fallback.")},i.isDecodeFallbackSupported=function(e){return e.equals(po.UTF8)||e.equals(po.ISO8859_1)||e.equals(po.ASCII)},i.encodeFallback=function(e){for(var s=btoa(unescape(encodeURIComponent(e))).split(""),c=[],l=0;l<s.length;l++)c.push(s[l].charCodeAt(0));return new Uint8Array(c)},i}(),gt=function(){function i(){}return i.castAsNonUtf8Char=function(e,n){void 0===n&&(n=null);var s=n?n.getName():this.ISO88591;return Ce.decode(new Uint8Array([e]),s)},i.guessEncoding=function(e,n){if(null!=n&&void 0!==n.get(Un.CHARACTER_SET))return n.get(Un.CHARACTER_SET).toString();for(var s=e.length,c=!0,l=!0,g=!0,m=0,y=0,b=0,P=0,B=0,z=0,K=0,ae=0,ye=0,Re=0,Ve=0,Ne=e.length>3&&239===e[0]&&187===e[1]&&191===e[2],Ye=0;Ye<s&&(c||l||g);Ye++){var at=255&e[Ye];g&&(m>0?128&at?m--:g=!1:128&at&&(64&at?(m++,32&at?(m++,16&at?(m++,8&at?g=!1:P++):b++):y++):g=!1)),c&&(at>127&&at<160?c=!1:at>159&&(at<192||215===at||247===at)&&Ve++),l&&(B>0?at<64||127===at||at>252?l=!1:B--:128===at||160===at||at>239?l=!1:at>160&&at<224?(z++,ae=0,++K>ye&&(ye=K)):at>127?(B++,K=0,++ae>Re&&(Re=ae)):(K=0,ae=0))}return g&&m>0&&(g=!1),l&&B>0&&(l=!1),g&&(Ne||y+b+P>0)?i.UTF8:l&&(i.ASSUME_SHIFT_JIS||ye>=3||Re>=3)?i.SHIFT_JIS:c&&l?2===ye&&2===z||10*Ve>=s?i.SHIFT_JIS:i.ISO88591:c?i.ISO88591:l?i.SHIFT_JIS:g?i.UTF8:i.PLATFORM_DEFAULT_ENCODING},i.format=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var c=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function l(m,y,b,P,B,z){if("%%"===m)return"%";if(void 0!==n[++c]){m=P?parseInt(P.substr(1)):void 0;var ae,K=B?parseInt(B.substr(1)):void 0;switch(z){case"s":ae=n[c];break;case"c":ae=n[c][0];break;case"f":ae=parseFloat(n[c]).toFixed(m);break;case"p":ae=parseFloat(n[c]).toPrecision(m);break;case"e":ae=parseFloat(n[c]).toExponential(m);break;case"x":ae=parseInt(n[c]).toString(K||16);break;case"d":ae=parseFloat(parseInt(n[c],K||10).toPrecision(m)).toFixed(0)}ae="object"==typeof ae?JSON.stringify(ae):(+ae).toString(K);for(var ye=parseInt(b),Re=b&&b[0]+""=="0"?"0":" ";ae.length<ye;)ae=void 0!==y?ae+Re:Re+ae;return ae}})},i.getBytes=function(e,n){return Ce.encode(e,n)},i.getCharCode=function(e,n){return void 0===n&&(n=0),e.charCodeAt(n)},i.getCharAt=function(e){return String.fromCharCode(e)},i.SHIFT_JIS=po.SJIS.getName(),i.GB2312="GB2312",i.ISO88591=po.ISO8859_1.getName(),i.EUC_JP="EUC_JP",i.UTF8=po.UTF8.getName(),i.PLATFORM_DEFAULT_ENCODING=i.UTF8,i.ASSUME_SHIFT_JIS=!1,i}(),dn=function(){function i(e){void 0===e&&(e=""),this.value=e}return i.prototype.enableDecoding=function(e){return this.encoding=e,this},i.prototype.append=function(e){return this.value+="string"==typeof e?e.toString():this.encoding?gt.castAsNonUtf8Char(e,this.encoding):String.fromCharCode(e),this},i.prototype.appendChars=function(e,n,s){for(var c=n;n<n+s;c++)this.append(e[c]);return this},i.prototype.length=function(){return this.value.length},i.prototype.charAt=function(e){return this.value.charAt(e)},i.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},i.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},i.prototype.substring=function(e,n){return this.value.substring(e,n)},i.prototype.setLengthToZero=function(){this.value=""},i.prototype.toString=function(){return this.value},i.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},i}(),tr=function(){function i(e,n,s,c){if(this.width=e,this.height=n,this.rowSize=s,this.bits=c,null==n&&(n=e),this.height=n,e<1||n<1)throw new ln("Both dimensions must be greater than 0");null==s&&(s=Math.floor((e+31)/32)),this.rowSize=s,null==c&&(this.bits=new Int32Array(this.rowSize*this.height))}return i.parseFromBooleanArray=function(e){for(var n=e.length,s=e[0].length,c=new i(s,n),l=0;l<n;l++)for(var g=e[l],m=0;m<s;m++)g[m]&&c.set(m,l);return c},i.parseFromString=function(e,n,s){if(null===e)throw new ln("stringRepresentation cannot be null");for(var c=new Array(e.length),l=0,g=0,m=-1,y=0,b=0;b<e.length;)if("\n"===e.charAt(b)||"\r"===e.charAt(b)){if(l>g){if(-1===m)m=l-g;else if(l-g!==m)throw new ln("row lengths do not match");g=l,y++}b++}else if(e.substring(b,b+n.length)===n)b+=n.length,c[l]=!0,l++;else{if(e.substring(b,b+s.length)!==s)throw new ln("illegal character encountered: "+e.substring(b));b+=s.length,c[l]=!1,l++}if(l>g){if(-1===m)m=l-g;else if(l-g!==m)throw new ln("row lengths do not match");y++}for(var P=new i(m,y),B=0;B<l;B++)c[B]&&P.set(Math.floor(B%m),Math.floor(B/m));return P},i.prototype.get=function(e,n){var s=n*this.rowSize+Math.floor(e/32);return!!(this.bits[s]>>>(31&e)&1)},i.prototype.set=function(e,n){var s=n*this.rowSize+Math.floor(e/32);this.bits[s]|=1<<(31&e)&4294967295},i.prototype.unset=function(e,n){var s=n*this.rowSize+Math.floor(e/32);this.bits[s]&=~(1<<(31&e)&4294967295)},i.prototype.flip=function(e,n){var s=n*this.rowSize+Math.floor(e/32);this.bits[s]^=1<<(31&e)&4294967295},i.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new ln("input matrix dimensions do not match");for(var n=new Ci(Math.floor(this.width/32)+1),s=this.rowSize,c=this.bits,l=0,g=this.height;l<g;l++)for(var m=l*s,y=e.getRow(l,n).getBitArray(),b=0;b<s;b++)c[m+b]^=y[b]},i.prototype.clear=function(){for(var e=this.bits,n=e.length,s=0;s<n;s++)e[s]=0},i.prototype.setRegion=function(e,n,s,c){if(n<0||e<0)throw new ln("Left and top must be nonnegative");if(c<1||s<1)throw new ln("Height and width must be at least 1");var l=e+s,g=n+c;if(g>this.height||l>this.width)throw new ln("The region must fit inside the matrix");for(var m=this.rowSize,y=this.bits,b=n;b<g;b++)for(var P=b*m,B=e;B<l;B++)y[P+Math.floor(B/32)]|=1<<(31&B)&4294967295},i.prototype.getRow=function(e,n){null==n||n.getSize()<this.width?n=new Ci(this.width):n.clear();for(var s=this.rowSize,c=this.bits,l=e*s,g=0;g<s;g++)n.setBulk(32*g,c[l+g]);return n},i.prototype.setRow=function(e,n){Ur.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},i.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),s=new Ci(e),c=new Ci(e),l=0,g=Math.floor((n+1)/2);l<g;l++)s=this.getRow(l,s),c=this.getRow(n-1-l,c),s.reverse(),c.reverse(),this.setRow(l,c),this.setRow(n-1-l,s)},i.prototype.getEnclosingRectangle=function(){for(var n=this.height,s=this.rowSize,c=this.bits,l=this.width,g=n,m=-1,y=-1,b=0;b<n;b++)for(var P=0;P<s;P++){var B=c[b*s+P];if(0!==B){if(b<g&&(g=b),b>y&&(y=b),32*P<l){for(var z=0;!(B<<31-z&4294967295);)z++;32*P+z<l&&(l=32*P+z)}if(32*P+31>m){for(z=31;!(B>>>z);)z--;32*P+z>m&&(m=32*P+z)}}}return m<l||y<g?null:Int32Array.from([l,g,m-l+1,y-g+1])},i.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,s=0;s<n.length&&0===n[s];)s++;if(s===n.length)return null;for(var c=s/e,l=s%e*32,g=n[s],m=0;!(g<<31-m&4294967295);)m++;return Int32Array.from([l+=m,c])},i.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,s=n.length-1;s>=0&&0===n[s];)s--;if(s<0)return null;for(var c=Math.floor(s/e),l=32*Math.floor(s%e),g=n[s],m=31;!(g>>>m);)m--;return Int32Array.from([l+=m,c])},i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.getRowSize=function(){return this.rowSize},i.prototype.equals=function(e){return e instanceof i&&(this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&Jr.equals(this.bits,e.bits))},i.prototype.hashCode=function(){var e=this.width;return 31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+Jr.hashCode(this.bits)},i.prototype.toString=function(e,n,s){return void 0===e&&(e="X "),void 0===n&&(n="  "),void 0===s&&(s="\n"),this.buildToString(e,n,s)},i.prototype.buildToString=function(e,n,s){for(var c=new dn,l=0,g=this.height;l<g;l++){for(var m=0,y=this.width;m<y;m++)c.append(this.get(m,l)?e:n);c.append(s)}return c.toString()},i.prototype.clone=function(){return new i(this.width,this.height,this.rowSize,this.bits.slice())},i}();var wr=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const qe=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return wr(e,i),e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Dn);var Qi=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const ns=function(i){function e(n){var s=i.call(this,n)||this;return s.luminances=e.EMPTY,s.buckets=new Int32Array(e.LUMINANCE_BUCKETS),s}return Qi(e,i),e.prototype.getBlackRow=function(n,s){var c=this.getLuminanceSource(),l=c.getWidth();null==s||s.getSize()<l?s=new Ci(l):s.clear(),this.initArrays(l);for(var g=c.getRow(n,this.luminances),m=this.buckets,y=0;y<l;y++)m[(255&g[y])>>e.LUMINANCE_SHIFT]++;var b=e.estimateBlackPoint(m);if(l<3)for(y=0;y<l;y++)(255&g[y])<b&&s.set(y);else{var P=255&g[0],B=255&g[1];for(y=1;y<l-1;y++){var z=255&g[y+1];(4*B-P-z)/2<b&&s.set(y),P=B,B=z}}return s},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),s=n.getWidth(),c=n.getHeight(),l=new tr(s,c);this.initArrays(s);for(var g=this.buckets,m=1;m<5;m++)for(var y=Math.floor(c*m/5),b=n.getRow(y,this.luminances),P=Math.floor(4*s/5),B=Math.floor(s/5);B<P;B++)g[(255&b[B])>>e.LUMINANCE_SHIFT]++;var K=e.estimateBlackPoint(g),ae=n.getMatrix();for(m=0;m<c;m++){var ye=m*s;for(B=0;B<s;B++)(255&ae[ye+B])<K&&l.set(B,m)}return l},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var s=this.buckets,c=0;c<e.LUMINANCE_BUCKETS;c++)s[c]=0},e.estimateBlackPoint=function(n){for(var s=n.length,c=0,l=0,g=0,m=0;m<s;m++)n[m]>g&&(l=m,g=n[m]),n[m]>c&&(c=n[m]);var y=0,b=0;for(m=0;m<s;m++){var P=m-l;(B=n[m]*P*P)>b&&(y=m,b=B)}if(l>y){var z=l;l=y,y=z}if(y-l<=s/16)throw new qe;var K=y-1,ae=-1;for(m=y-1;m>l;m--){var B,ye=m-l;(B=ye*ye*(y-m)*(c-n[m]))>ae&&(K=m,ae=B)}return K<<e.LUMINANCE_SHIFT},e.LUMINANCE_SHIFT=8-(e.LUMINANCE_BITS=5),e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(Xa);var Mo=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Oi=function(i){function e(n){var s=i.call(this,n)||this;return s.matrix=null,s}return Mo(e,i),e.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var n=this.getLuminanceSource(),s=n.getWidth(),c=n.getHeight();if(s>=e.MINIMUM_DIMENSION&&c>=e.MINIMUM_DIMENSION){var l=n.getMatrix(),g=s>>e.BLOCK_SIZE_POWER;s&e.BLOCK_SIZE_MASK&&g++;var m=c>>e.BLOCK_SIZE_POWER;c&e.BLOCK_SIZE_MASK&&m++;var y=e.calculateBlackPoints(l,g,m,s,c),b=new tr(s,c);e.calculateThresholdForBlock(l,g,m,s,c,y,b),this.matrix=b}else this.matrix=i.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,s,c,l,g,m,y){for(var b=g-e.BLOCK_SIZE,P=l-e.BLOCK_SIZE,B=0;B<c;B++){var z=B<<e.BLOCK_SIZE_POWER;z>b&&(z=b);for(var K=e.cap(B,2,c-3),ae=0;ae<s;ae++){var ye=ae<<e.BLOCK_SIZE_POWER;ye>P&&(ye=P);for(var Re=e.cap(ae,2,s-3),Ve=0,Ne=-2;Ne<=2;Ne++){var Ye=m[K+Ne];Ve+=Ye[Re-2]+Ye[Re-1]+Ye[Re]+Ye[Re+1]+Ye[Re+2]}e.thresholdBlock(n,ye,z,Ve/25,l,y)}}},e.cap=function(n,s,c){return n<s?s:n>c?c:n},e.thresholdBlock=function(n,s,c,l,g,m){for(var y=0,b=c*g+s;y<e.BLOCK_SIZE;y++,b+=g)for(var P=0;P<e.BLOCK_SIZE;P++)(255&n[b+P])<=l&&m.set(s+P,c+y)},e.calculateBlackPoints=function(n,s,c,l,g){for(var m=g-e.BLOCK_SIZE,y=l-e.BLOCK_SIZE,b=new Array(c),P=0;P<c;P++){b[P]=new Int32Array(s);var B=P<<e.BLOCK_SIZE_POWER;B>m&&(B=m);for(var z=0;z<s;z++){var K=z<<e.BLOCK_SIZE_POWER;K>y&&(K=y);for(var ae=0,ye=255,Re=0,Ve=0,Ne=B*l+K;Ve<e.BLOCK_SIZE;Ve++,Ne+=l){for(var Ye=0;Ye<e.BLOCK_SIZE;Ye++){var at=255&n[Ne+Ye];ae+=at,at<ye&&(ye=at),at>Re&&(Re=at)}if(Re-ye>e.MIN_DYNAMIC_RANGE)for(Ve++,Ne+=l;Ve<e.BLOCK_SIZE;Ve++,Ne+=l)for(Ye=0;Ye<e.BLOCK_SIZE;Ye++)ae+=255&n[Ne+Ye]}var Ft=ae>>2*e.BLOCK_SIZE_POWER;if(Re-ye<=e.MIN_DYNAMIC_RANGE&&(Ft=ye/2,P>0&&z>0)){var $t=(b[P-1][z]+2*b[P][z-1]+b[P-1][z-1])/4;ye<$t&&(Ft=$t)}b[P][z]=Ft}}return b},e.BLOCK_SIZE_MASK=(e.BLOCK_SIZE=1<<(e.BLOCK_SIZE_POWER=3))-1,e.MINIMUM_DIMENSION=5*e.BLOCK_SIZE,e.MIN_DYNAMIC_RANGE=24,e}(ns),mn=function(){function i(e,n){this.width=e,this.height=n}return i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.isCropSupported=function(){return!1},i.prototype.crop=function(e,n,s,c){throw new W("This luminance source does not support cropping.")},i.prototype.isRotateSupported=function(){return!1},i.prototype.rotateCounterClockwise=function(){throw new W("This luminance source does not support rotation by 90 degrees.")},i.prototype.rotateCounterClockwise45=function(){throw new W("This luminance source does not support rotation by 45 degrees.")},i.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new dn,s=0;s<this.height;s++){for(var c=this.getRow(s,e),l=0;l<this.width;l++){var g=255&c[l];n.append(g<64?"#":g<128?"+":g<192?".":" ")}n.append("\n")}return n.toString()},i}();var hs=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Oo=function(i){function e(n){var s=i.call(this,n.getWidth(),n.getHeight())||this;return s.delegate=n,s}return hs(e,i),e.prototype.getRow=function(n,s){for(var c=this.delegate.getRow(n,s),l=this.getWidth(),g=0;g<l;g++)c[g]=255-(255&c[g]);return c},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(s),l=0;l<s;l++)c[l]=255-(255&n[l]);return c},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,s,c,l){return new e(this.delegate.crop(n,s,c,l))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(mn);var dl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Rd=function(i){function e(n){var s=i.call(this,n.width,n.height)||this;return s.canvas=n,s.tempCanvasElement=null,s.buffer=e.makeBufferFromCanvasImageData(n),s}return dl(e,i),e.makeBufferFromCanvasImageData=function(n){var s=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(s.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,s,c){var l=new Uint8ClampedArray(s*c);if(e.FRAME_INDEX=!e.FRAME_INDEX)for(var g=0,m=0,y=n.length;g<y;g+=4,m++){l[m]=0===n[g+3]?255:306*n[g]+601*n[g+1]+117*n[g+2]+512>>10}else{g=0,m=0;for(var ae=n.length;g<ae;g+=4,m++)void 0,l[m]=255-(0===n[g+3]?255:306*n[g]+601*n[g+1]+117*n[g+2]+512>>10)}return l},e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new ln("Requested row is outside the image: "+n);var c=this.getWidth(),l=n*c;return null===s?s=this.buffer.slice(l,l+c):(s.length<c&&(s=new Uint8ClampedArray(c)),s.set(this.buffer.slice(l,l+c))),s},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return i.prototype.crop.call(this,n,s,c,l),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var s=this.getTempCanvasElement(),c=s.getContext("2d"),l=n*e.DEGREE_TO_RADIANS,g=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(l))*g+Math.abs(Math.sin(l))*m),b=Math.ceil(Math.abs(Math.sin(l))*g+Math.abs(Math.cos(l))*m);return s.width=y,s.height=b,c.translate(y/2,b/2),c.rotate(l),c.drawImage(this.canvas,g/-2,m/-2),this.buffer=e.makeBufferFromCanvasImageData(s),this},e.prototype.invert=function(){return new Oo(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(mn),Md=function(){function i(e,n,s){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=s||void 0}return i.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},i}(),ps=function(i,e,n,s){return new(n||(n=Promise))(function(l,g){function m(P){try{b(s.next(P))}catch(B){g(B)}}function y(P){try{b(s.throw(P))}catch(B){g(B)}}function b(P){P.done?l(P.value):function c(l){return l instanceof n?l:new n(function(g){g(l)})}(P.value).then(m,y)}b((s=s.apply(i,e||[])).next())})},li=function(i,e){var s,c,l,g,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return g={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function m(b){return function(P){return function y(b){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,c&&(l=2&b[0]?c.return:b[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,b[1])).done)return l;switch(c=0,l&&(b=[2&b[0],l.value]),b[0]){case 0:case 1:l=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===b[0]||2===b[0])){n=0;continue}if(3===b[0]&&(!l||b[1]>l[0]&&b[1]<l[3])){n.label=b[1];break}if(6===b[0]&&n.label<l[1]){n.label=l[1],l=b;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(b);break}l[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(i,n)}catch(P){b=[6,P],c=0}finally{s=l=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,P])}}},oa=function(){function i(e,n,s){void 0===n&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(i.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),i.prototype.listVideoInputDevices=function(){return ps(this,void 0,void 0,function(){var e,n,s,c,l,g,B,z;return li(this,function(K){switch(K.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=K.sent(),n=[];try{for(s=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),c=s.next();!c.done;c=s.next())"videoinput"===(g="video"===(l=c.value).kind?"videoinput":l.kind)&&n.push({deviceId:l.deviceId||l.id,label:l.label||"Video device "+(n.length+1),kind:g,groupId:l.groupId})}catch(ae){B={error:ae}}finally{try{c&&!c.done&&(z=s.return)&&z.call(s)}finally{if(B)throw B.error}}return[2,n]}})})},i.prototype.getVideoInputDevices=function(){return ps(this,void 0,void 0,function(){return li(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,n.sent().map(function(s){return new Md(s.deviceId,s.label)})]}})})},i.prototype.findDeviceById=function(e){return ps(this,void 0,void 0,function(){var n;return li(this,function(s){switch(s.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(n=s.sent())?[2,n.find(function(c){return c.deviceId===e})]:[2,null]}})})},i.prototype.decodeFromInputVideoDevice=function(e,n){return ps(this,void 0,void 0,function(){return li(this,function(s){switch(s.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,s.sent()]}})})},i.prototype.decodeOnceFromVideoDevice=function(e,n){return ps(this,void 0,void 0,function(){return li(this,function(l){switch(l.label){case 0:return this.reset(),[4,this.decodeOnceFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n)];case 1:return[2,l.sent()]}})})},i.prototype.decodeOnceFromConstraints=function(e,n){return ps(this,void 0,void 0,function(){var s;return li(this,function(c){switch(c.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return s=c.sent(),[4,this.decodeOnceFromStream(s,n)];case 2:return[2,c.sent()]}})})},i.prototype.decodeOnceFromStream=function(e,n){return ps(this,void 0,void 0,function(){var s;return li(this,function(l){switch(l.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return s=l.sent(),[4,this.decodeOnce(s)];case 2:return[2,l.sent()]}})})},i.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,s){return ps(this,void 0,void 0,function(){return li(this,function(c){switch(c.label){case 0:return[4,this.decodeFromVideoDevice(e,n,s)];case 1:return[2,c.sent()]}})})},i.prototype.decodeFromVideoDevice=function(e,n,s){return ps(this,void 0,void 0,function(){return li(this,function(g){switch(g.label){case 0:return[4,this.decodeFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n,s)];case 1:return[2,g.sent()]}})})},i.prototype.decodeFromConstraints=function(e,n,s){return ps(this,void 0,void 0,function(){var c;return li(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return c=l.sent(),[4,this.decodeFromStream(c,n,s)];case 2:return[2,l.sent()]}})})},i.prototype.decodeFromStream=function(e,n,s){return ps(this,void 0,void 0,function(){var c;return li(this,function(l){switch(l.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return c=l.sent(),[4,this.decodeContinuously(c,s)];case 2:return[2,l.sent()]}})})},i.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},i.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},i.prototype.attachStreamToVideo=function(e,n){return ps(this,void 0,void 0,function(){var s;return li(this,function(c){switch(c.label){case 0:return s=this.prepareVideoElement(n),this.addVideoSource(s,e),this.videoElement=s,this.stream=e,[4,this.playVideoOnLoadAsync(s)];case 1:return c.sent(),[2,s]}})})},i.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(s,c){return n.playVideoOnLoad(e,function(){return s()})})},i.prototype.playVideoOnLoad=function(e,n){var s=this;this.videoEndedListener=function(){return s.stopStreams()},this.videoCanPlayListener=function(){return s.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},i.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},i.prototype.tryPlayVideo=function(e){return ps(this,void 0,void 0,function(){return li(this,function(s){switch(s.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.play()];case 2:return s.sent(),[3,4];case 3:return s.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},i.prototype.getMediaElement=function(e,n){var s=document.getElementById(e);if(!s)throw new Zr("element with id '"+e+"' not found");if(s.nodeName.toLowerCase()!==n.toLowerCase())throw new Zr("element with id '"+e+"' must be an "+n+" element");return s},i.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new Zr("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},i.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new Zr("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},i.prototype.decodeFromVideoContinuously=function(e,n,s){if(void 0===e&&void 0===n)throw new Zr("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,s):this.decodeFromVideoElementContinuously(e,s)},i.prototype.decodeFromImageElement=function(e){if(!e)throw new Zr("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);return this.imageElement=n,this.isImageLoaded(n)?this.decodeOnce(n,!1,!0):this._decodeOnLoadImage(n)},i.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},i.prototype.decodeFromVideoElementContinuously=function(e,n){var s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(s,n)},i.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Zr("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},i.prototype.decodeFromImageUrl=function(e){if(!e)throw new Zr("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var s=this._decodeOnLoadImage(n);return n.src=e,s},i.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Zr("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),s=this.decodeFromVideoElement(n);return n.src=e,s},i.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new Zr("An URL must be provided.");this.reset();var s=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(s,n);return s.src=e,c},i.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(s,c){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(s,c)},e.addEventListener("load",n.imageLoadedListener)})},i.prototype._decodeOnLoadVideo=function(e){return ps(this,void 0,void 0,function(){return li(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},i.prototype._decodeOnLoadVideoContinuously=function(e,n){return ps(this,void 0,void 0,function(){return li(this,function(s){switch(s.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return s.sent(),this.decodeContinuously(e,n),[2]}})})},i.prototype.isImageLoaded=function(e){return!(!e.complete||0===e.naturalWidth)},i.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&((n=document.createElement("img")).width=200,n.height=200),"string"==typeof e&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},i.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&((n=document.createElement("video")).width=200,n.height=200),"string"==typeof e&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},i.prototype.decodeOnce=function(e,n,s){var c=this;void 0===n&&(n=!0),void 0===s&&(s=!0),this._stopAsyncDecode=!1;var l=function(g,m){if(c._stopAsyncDecode)return m(new qe("Video stream has ended before any code could be detected.")),void(c._stopAsyncDecode=void 0);try{g(c.decode(e))}catch(z){if(n&&z instanceof qe||(z instanceof ui||z instanceof Yt)&&s)return setTimeout(l,c._timeBetweenDecodingAttempts,g,m);m(z)}};return new Promise(function(g,m){return l(g,m)})},i.prototype.decodeContinuously=function(e,n){var s=this;this._stopContinuousDecode=!1;var c=function(){if(s._stopContinuousDecode)s._stopContinuousDecode=void 0;else try{var l=s.decode(e);n(l,null),setTimeout(c,s.timeBetweenScansMillis)}catch(y){n(null,y),(y instanceof ui||y instanceof Yt||y instanceof qe)&&setTimeout(c,s._timeBetweenDecodingAttempts)}};c()},i.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},i.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var s=this.getCaptureCanvas(e),c=new Rd(s),l=new Oi(c);return new jc(l)},i.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),s=void 0;try{s=n.getContext("2d",{willReadFrequently:!0})}catch{s=n.getContext("2d")}this.captureCanvasContext=s}return this.captureCanvasContext},i.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},i.prototype.drawFrameOnCanvas=function(e,n,s){void 0===n&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),void 0===s&&(s=this.captureCanvasContext),s.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},i.prototype.drawImageOnCanvas=function(e,n,s){void 0===n&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),void 0===s&&(s=this.captureCanvasContext),s.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},i.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},i.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var s,c,n=document.createElement("canvas");return typeof e<"u"&&(e instanceof HTMLVideoElement?(s=e.videoWidth,c=e.videoHeight):e instanceof HTMLImageElement&&(s=e.naturalWidth||e.width,c=e.naturalHeight||e.height)),n.style.width=s+"px",n.style.height=c+"px",n.width=s,n.height=c,n},i.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},i.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},i.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},i.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},i.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},i.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},i.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},i}();const ao=function(){function i(e,n,s,c,l,g){void 0===s&&(s=null==n?0:8*n.length),void 0===g&&(g=Ur.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=s,this.resultPoints=c,this.format=l,this.timestamp=g,this.text=e,this.rawBytes=n,this.numBits=null==s?null==n?0:8*n.length:s,this.resultPoints=c,this.format=l,this.resultMetadata=null,this.timestamp=null==g?Ur.currentTimeMillis():g}return i.prototype.getText=function(){return this.text},i.prototype.getRawBytes=function(){return this.rawBytes},i.prototype.getNumBits=function(){return this.numBits},i.prototype.getResultPoints=function(){return this.resultPoints},i.prototype.getBarcodeFormat=function(){return this.format},i.prototype.getResultMetadata=function(){return this.resultMetadata},i.prototype.putMetadata=function(e,n){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},i.prototype.putAllMetadata=function(e){null!==e&&(this.resultMetadata=null===this.resultMetadata?e:new Map(e))},i.prototype.addResultPoints=function(e){var n=this.resultPoints;if(null===n)this.resultPoints=e;else if(null!==e&&e.length>0){var s=new Array(n.length+e.length);Ur.arraycopy(n,0,s,0,n.length),Ur.arraycopy(e,0,s,n.length,e.length),this.resultPoints=s}},i.prototype.getTimestamp=function(){return this.timestamp},i.prototype.toString=function(){return this.text},i}();var ju=function(i){return i[i.AZTEC=0]="AZTEC",i[i.CODABAR=1]="CODABAR",i[i.CODE_39=2]="CODE_39",i[i.CODE_93=3]="CODE_93",i[i.CODE_128=4]="CODE_128",i[i.DATA_MATRIX=5]="DATA_MATRIX",i[i.EAN_8=6]="EAN_8",i[i.EAN_13=7]="EAN_13",i[i.ITF=8]="ITF",i[i.MAXICODE=9]="MAXICODE",i[i.PDF_417=10]="PDF_417",i[i.QR_CODE=11]="QR_CODE",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",i}(ju||{});const sn=ju;var Cc=function(i){return i[i.OTHER=0]="OTHER",i[i.ORIENTATION=1]="ORIENTATION",i[i.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",i[i.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",i[i.ISSUE_NUMBER=4]="ISSUE_NUMBER",i[i.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",i[i.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",i[i.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",i[i.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",i[i.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",i[i.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",i}(Cc||{});const Yi=Cc,wc=function(){function i(e,n,s,c,l,g){void 0===l&&(l=-1),void 0===g&&(g=-1),this.rawBytes=e,this.text=n,this.byteSegments=s,this.ecLevel=c,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=g,this.numBits=null==e?0:8*e.length}return i.prototype.getRawBytes=function(){return this.rawBytes},i.prototype.getNumBits=function(){return this.numBits},i.prototype.setNumBits=function(e){this.numBits=e},i.prototype.getText=function(){return this.text},i.prototype.getByteSegments=function(){return this.byteSegments},i.prototype.getECLevel=function(){return this.ecLevel},i.prototype.getErrorsCorrected=function(){return this.errorsCorrected},i.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},i.prototype.getErasures=function(){return this.erasures},i.prototype.setErasures=function(e){this.erasures=e},i.prototype.getOther=function(){return this.other},i.prototype.setOther=function(e){this.other=e},i.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},i.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},i.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},i}(),Gu=function(){function i(){}return i.prototype.exp=function(e){return this.expTable[e]},i.prototype.log=function(e){if(0===e)throw new ln;return this.logTable[e]},i.addOrSubtract=function(e,n){return e^n},i}(),zo=function(){function i(e,n){if(0===n.length)throw new ln;this.field=e;var s=n.length;if(s>1&&0===n[0]){for(var c=1;c<s&&0===n[c];)c++;c===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-c),Ur.arraycopy(n,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return i.prototype.getCoefficients=function(){return this.coefficients},i.prototype.getDegree=function(){return this.coefficients.length-1},i.prototype.isZero=function(){return 0===this.coefficients[0]},i.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},i.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var s,n=this.coefficients;if(1===e){s=0;for(var c=0,l=n.length;c!==l;c++)s=Gu.addOrSubtract(s,n[c]);return s}s=n[0];var m=n.length,y=this.field;for(c=1;c<m;c++)s=Gu.addOrSubtract(y.multiply(e,s),n[c]);return s},i.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new ln("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,s=e.coefficients;if(n.length>s.length){var c=n;n=s,s=c}var l=new Int32Array(s.length),g=s.length-n.length;Ur.arraycopy(s,0,l,0,g);for(var m=g;m<s.length;m++)l[m]=Gu.addOrSubtract(n[m-g],s[m]);return new i(this.field,l)},i.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new ln("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,s=n.length,c=e.coefficients,l=c.length,g=new Int32Array(s+l-1),m=this.field,y=0;y<s;y++)for(var b=n[y],P=0;P<l;P++)g[y+P]=Gu.addOrSubtract(g[y+P],m.multiply(b,c[P]));return new i(m,g)},i.prototype.multiplyScalar=function(e){if(0===e)return this.field.getZero();if(1===e)return this;for(var n=this.coefficients.length,s=this.field,c=new Int32Array(n),l=this.coefficients,g=0;g<n;g++)c[g]=s.multiply(l[g],e);return new i(s,c)},i.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new ln;if(0===n)return this.field.getZero();for(var s=this.coefficients,c=s.length,l=new Int32Array(c+e),g=this.field,m=0;m<c;m++)l[m]=g.multiply(s[m],n);return new i(g,l)},i.prototype.divide=function(e){if(!this.field.equals(e.field))throw new ln("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new ln("Divide by 0");for(var n=this.field,s=n.getZero(),c=this,l=e.getCoefficient(e.getDegree()),g=n.inverse(l);c.getDegree()>=e.getDegree()&&!c.isZero();){var m=c.getDegree()-e.getDegree(),y=n.multiply(c.getCoefficient(c.getDegree()),g),b=e.multiplyByMonomial(m,y),P=n.buildMonomial(m,y);s=s.addOrSubtract(P),c=c.addOrSubtract(b)}return[s,c]},i.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var s=this.getCoefficient(n);if(0!==s){if(s<0?(e+=" - ",s=-s):e.length>0&&(e+=" + "),0===n||1!==s){var c=this.field.log(s);0===c?e+="1":1===c?e+="a":(e+="a^",e+=c)}0!==n&&(1===n?e+="x":(e+="x^",e+=n))}}return e},i}();var Wo=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Gc=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Wo(e,i),e.kind="ArithmeticException",e}(Dn);var Co=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const pi=function(i){function e(n,s,c){var l=i.call(this)||this;l.primitive=n,l.size=s,l.generatorBase=c;for(var g=new Int32Array(s),m=1,y=0;y<s;y++)g[y]=m,(m*=2)>=s&&(m^=n,m&=s-1);l.expTable=g;var b=new Int32Array(s);for(y=0;y<s-1;y++)b[g[y]]=y;return l.logTable=b,l.zero=new zo(l,Int32Array.from([0])),l.one=new zo(l,Int32Array.from([1])),l}return Co(e,i),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,s){if(n<0)throw new ln;if(0===s)return this.zero;var c=new Int32Array(n+1);return c[0]=s,new zo(this,c)},e.prototype.inverse=function(n){if(0===n)throw new Gc;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,s){return 0===n||0===s?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ur.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Gu);var Pr=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const zu=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Pr(e,i),e.kind="ReedSolomonException",e}(Dn);var Pd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const gs=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Pd(e,i),e.kind="IllegalStateException",e}(Dn),La=function(){function i(e){this.field=e}return i.prototype.decode=function(e,n){for(var s=this.field,c=new zo(s,e),l=new Int32Array(n),g=!0,m=0;m<n;m++){var y=c.evaluateAt(s.exp(m+s.getGeneratorBase()));l[l.length-1-m]=y,0!==y&&(g=!1)}if(!g){var b=new zo(s,l),P=this.runEuclideanAlgorithm(s.buildMonomial(n,1),b,n),z=P[1],K=this.findErrorLocations(P[0]),ae=this.findErrorMagnitudes(z,K);for(m=0;m<K.length;m++){var ye=e.length-1-s.log(K[m]);if(ye<0)throw new zu("Bad error location");e[ye]=pi.addOrSubtract(e[ye],ae[m])}}},i.prototype.runEuclideanAlgorithm=function(e,n,s){if(e.getDegree()<n.getDegree()){var c=e;e=n,n=c}for(var l=this.field,g=e,m=n,y=l.getZero(),b=l.getOne();m.getDegree()>=(s/2|0);){var P=g,B=y;if(y=b,(g=m).isZero())throw new zu("r_{i-1} was zero");m=P;for(var z=l.getZero(),K=g.getCoefficient(g.getDegree()),ae=l.inverse(K);m.getDegree()>=g.getDegree()&&!m.isZero();){var ye=m.getDegree()-g.getDegree(),Re=l.multiply(m.getCoefficient(m.getDegree()),ae);z=z.addOrSubtract(l.buildMonomial(ye,Re)),m=m.addOrSubtract(g.multiplyByMonomial(ye,Re))}if(b=z.multiply(y).addOrSubtract(B),m.getDegree()>=g.getDegree())throw new gs("Division algorithm failed to reduce polynomial?")}var Ve=b.getCoefficient(0);if(0===Ve)throw new zu("sigmaTilde(0) was zero");var Ne=l.inverse(Ve);return[b.multiplyScalar(Ne),m.multiplyScalar(Ne)]},i.prototype.findErrorLocations=function(e){var n=e.getDegree();if(1===n)return Int32Array.from([e.getCoefficient(1)]);for(var s=new Int32Array(n),c=0,l=this.field,g=1;g<l.getSize()&&c<n;g++)0===e.evaluateAt(g)&&(s[c]=l.inverse(g),c++);if(c!==n)throw new zu("Error locator degree does not match number of roots");return s},i.prototype.findErrorMagnitudes=function(e,n){for(var s=n.length,c=new Int32Array(s),l=this.field,g=0;g<s;g++){for(var m=l.inverse(n[g]),y=1,b=0;b<s;b++)if(g!==b){var P=l.multiply(n[b],m);y=l.multiply(y,1&P?-2&P:1|P)}c[g]=l.multiply(e.evaluateAt(m),l.inverse(y)),0!==l.getGeneratorBase()&&(c[g]=l.multiply(c[g],m))}return c},i}();var Zi=function(i){return i[i.UPPER=0]="UPPER",i[i.LOWER=1]="LOWER",i[i.MIXED=2]="MIXED",i[i.DIGIT=3]="DIGIT",i[i.PUNCT=4]="PUNCT",i[i.BINARY=5]="BINARY",i}(Zi||{});const Wu=function(){function i(){}return i.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),s=this.extractBits(n),c=this.correctBits(s),l=i.convertBoolArrayToByteArray(c),g=i.getEncodedData(c),m=new wc(l,g,null,null);return m.setNumBits(c.length),m},i.highLevelDecode=function(e){return this.getEncodedData(e)},i.getEncodedData=function(e){for(var n=e.length,s=Zi.UPPER,c=Zi.UPPER,l="",g=0;g<n;)if(c===Zi.BINARY){if(n-g<5)break;var m=i.readCode(e,g,5);if(g+=5,0===m){if(n-g<11)break;m=i.readCode(e,g,11)+31,g+=11}for(var y=0;y<m;y++){if(n-g<8){g=n;break}var b=i.readCode(e,g,8);l+=gt.castAsNonUtf8Char(b),g+=8}c=s}else{var P=c===Zi.DIGIT?4:5;if(n-g<P)break;b=i.readCode(e,g,P),g+=P;var B=i.getCharacter(c,b);B.startsWith("CTRL_")?(s=c,c=i.getTable(B.charAt(5)),"L"===B.charAt(6)&&(s=c)):(l+=B,c=s)}return l},i.getTable=function(e){switch(e){case"L":return Zi.LOWER;case"P":return Zi.PUNCT;case"M":return Zi.MIXED;case"D":return Zi.DIGIT;case"B":return Zi.BINARY;default:return Zi.UPPER}},i.getCharacter=function(e,n){switch(e){case Zi.UPPER:return i.UPPER_TABLE[n];case Zi.LOWER:return i.LOWER_TABLE[n];case Zi.MIXED:return i.MIXED_TABLE[n];case Zi.PUNCT:return i.PUNCT_TABLE[n];case Zi.DIGIT:return i.DIGIT_TABLE[n];default:throw new gs("Bad table")}},i.prototype.correctBits=function(e){var n,s;this.ddata.getNbLayers()<=2?(s=6,n=pi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,n=pi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,n=pi.AZTEC_DATA_10):(s=12,n=pi.AZTEC_DATA_12);var c=this.ddata.getNbDatablocks(),l=e.length/s;if(l<c)throw new Yt;for(var g=e.length%s,m=new Int32Array(l),y=0;y<l;y++,g+=s)m[y]=i.readCode(e,g,s);try{new La(n).decode(m,l-c)}catch(Re){throw new Yt(Re)}var P=(1<<s)-1,B=0;for(y=0;y<c;y++){if(0===(z=m[y])||z===P)throw new Yt;(1===z||z===P-1)&&B++}var K=new Array(c*s-B),ae=0;for(y=0;y<c;y++){var z;if(1===(z=m[y])||z===P-1)K.fill(z>1,ae,ae+s-1),ae+=s-1;else for(var ye=s-1;ye>=0;--ye)K[ae++]=!!(z&1<<ye)}return K},i.prototype.extractBits=function(e){var n=this.ddata.isCompact(),s=this.ddata.getNbLayers(),c=(n?11:14)+4*s,l=new Int32Array(c),g=new Array(this.totalBitsInLayer(s,n));if(n)for(var m=0;m<l.length;m++)l[m]=m;else{var y=c+1+2*ur.truncDivision(ur.truncDivision(c,2)-1,15),b=c/2,P=ur.truncDivision(y,2);for(m=0;m<b;m++){var B=m+ur.truncDivision(m,15);l[b-m-1]=P-B-1,l[b+m]=P+B+1}}m=0;for(var z=0;m<s;m++){for(var K=4*(s-m)+(n?9:12),ae=2*m,ye=c-1-ae,Re=0;Re<K;Re++)for(var Ve=2*Re,Ne=0;Ne<2;Ne++)g[z+Ve+Ne]=e.get(l[ae+Ne],l[ae+Re]),g[z+2*K+Ve+Ne]=e.get(l[ae+Re],l[ye-Ne]),g[z+4*K+Ve+Ne]=e.get(l[ye-Ne],l[ye-Re]),g[z+6*K+Ve+Ne]=e.get(l[ye-Re],l[ae+Ne]);z+=8*K}return g},i.readCode=function(e,n,s){for(var c=0,l=n;l<n+s;l++)c<<=1,e[l]&&(c|=1);return c},i.readByte=function(e,n){var s=e.length-n;return s>=8?i.readCode(e,n,8):i.readCode(e,n,s)<<8-s},i.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),s=0;s<n.length;s++)n[s]=i.readByte(e,8*s);return n},i.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},i.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],i.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],i.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],i.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],i.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],i}(),Ir=function(){function i(){}return i.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},i.distance=function(e,n,s,c){var l=e-s,g=n-c;return Math.sqrt(l*l+g*g)},i.sum=function(e){for(var n=0,s=0,c=e.length;s!==c;s++)n+=e[s];return n},i}(),hl=function(){function i(){}return i.floatToIntBits=function(e){return e},i.MAX_VALUE=Number.MAX_SAFE_INTEGER,i}(),hn=function(){function i(e,n){this.x=e,this.y=n}return i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.equals=function(e){return e instanceof i&&(this.x===e.x&&this.y===e.y)},i.prototype.hashCode=function(){return 31*hl.floatToIntBits(this.x)+hl.floatToIntBits(this.y)},i.prototype.toString=function(){return"("+this.x+","+this.y+")"},i.orderBestPatterns=function(e){var l,g,m,n=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),c=this.distance(e[0],e[2]);if(s>=n&&s>=c?(g=e[0],l=e[1],m=e[2]):c>=s&&c>=n?(g=e[1],l=e[0],m=e[2]):(g=e[2],l=e[0],m=e[1]),this.crossProductZ(l,g,m)<0){var y=l;l=m,m=y}e[0]=l,e[1]=g,e[2]=m},i.distance=function(e,n){return Ir.distance(e.x,e.y,n.x,n.y)},i.crossProductZ=function(e,n,s){var c=n.x,l=n.y;return(s.x-c)*(e.y-l)-(s.y-l)*(e.x-c)},i}(),pl=function(){function i(e,n){this.bits=e,this.points=n}return i.prototype.getBits=function(){return this.bits},i.prototype.getPoints=function(){return this.points},i}();var Va=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ba=function(i){function e(n,s,c,l,g){var m=i.call(this,n,s)||this;return m.compact=c,m.nbDatablocks=l,m.nbLayers=g,m}return Va(e,i),e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(pl),Nd=function(){function i(e,n,s,c){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==n&&(n=i.INIT_SIZE),null==s&&(s=e.getWidth()/2|0),null==c&&(c=e.getHeight()/2|0);var l=n/2|0;if(this.leftInit=s-l,this.rightInit=s+l,this.upInit=c-l,this.downInit=c+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new qe}return i.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,s=this.upInit,c=this.downInit,l=!1,g=!0,m=!1,y=!1,b=!1,P=!1,B=!1,z=this.width,K=this.height;g;){g=!1;for(var ae=!0;(ae||!y)&&n<z;)(ae=this.containsBlackPoint(s,c,n,!1))?(n++,g=!0,y=!0):y||n++;if(n>=z){l=!0;break}for(var ye=!0;(ye||!b)&&c<K;)(ye=this.containsBlackPoint(e,n,c,!0))?(c++,g=!0,b=!0):b||c++;if(c>=K){l=!0;break}for(var Re=!0;(Re||!P)&&e>=0;)(Re=this.containsBlackPoint(s,c,e,!1))?(e--,g=!0,P=!0):P||e--;if(e<0){l=!0;break}for(var Ve=!0;(Ve||!B)&&s>=0;)(Ve=this.containsBlackPoint(e,n,s,!0))?(s--,g=!0,B=!0):B||s--;if(s<0){l=!0;break}g&&(m=!0)}if(!l&&m){for(var Ne=n-e,Ye=null,at=1;null===Ye&&at<Ne;at++)Ye=this.getBlackPointOnSegment(e,c-at,e+at,c);if(null==Ye)throw new qe;var Ft=null;for(at=1;null===Ft&&at<Ne;at++)Ft=this.getBlackPointOnSegment(e,s+at,e+at,s);if(null==Ft)throw new qe;var $t=null;for(at=1;null===$t&&at<Ne;at++)$t=this.getBlackPointOnSegment(n,s+at,n-at,s);if(null==$t)throw new qe;var Zt=null;for(at=1;null===Zt&&at<Ne;at++)Zt=this.getBlackPointOnSegment(n,c-at,n-at,c);if(null==Zt)throw new qe;return this.centerEdges(Zt,Ye,$t,Ft)}throw new qe},i.prototype.getBlackPointOnSegment=function(e,n,s,c){for(var l=Ir.round(Ir.distance(e,n,s,c)),g=(s-e)/l,m=(c-n)/l,y=this.image,b=0;b<l;b++){var P=Ir.round(e+b*g),B=Ir.round(n+b*m);if(y.get(P,B))return new hn(P,B)}return null},i.prototype.centerEdges=function(e,n,s,c){var l=e.getX(),g=e.getY(),m=n.getX(),y=n.getY(),b=s.getX(),P=s.getY(),B=c.getX(),z=c.getY(),K=i.CORR;return l<this.width/2?[new hn(B-K,z+K),new hn(m+K,y+K),new hn(b-K,P-K),new hn(l+K,g-K)]:[new hn(B+K,z+K),new hn(m+K,y-K),new hn(b-K,P+K),new hn(l-K,g-K)]},i.prototype.containsBlackPoint=function(e,n,s,c){var l=this.image;if(c){for(var g=e;g<=n;g++)if(l.get(g,s))return!0}else for(var m=e;m<=n;m++)if(l.get(s,m))return!0;return!1},i.INIT_SIZE=10,i.CORR=1,i}(),gl=function(){function i(){}return i.checkAndNudgePoints=function(e,n){for(var s=e.getWidth(),c=e.getHeight(),l=!0,g=0;g<n.length&&l;g+=2){var m=Math.floor(n[g]),y=Math.floor(n[g+1]);if(m<-1||m>s||y<-1||y>c)throw new qe;l=!1,-1===m?(n[g]=0,l=!0):m===s&&(n[g]=s-1,l=!0),-1===y?(n[g+1]=0,l=!0):y===c&&(n[g+1]=c-1,l=!0)}for(l=!0,g=n.length-2;g>=0&&l;g-=2){if(m=Math.floor(n[g]),y=Math.floor(n[g+1]),m<-1||m>s||y<-1||y>c)throw new qe;l=!1,-1===m?(n[g]=0,l=!0):m===s&&(n[g]=s-1,l=!0),-1===y?(n[g+1]=0,l=!0):y===c&&(n[g+1]=c-1,l=!0)}},i}(),$c=function(){function i(e,n,s,c,l,g,m,y,b){this.a11=e,this.a21=n,this.a31=s,this.a12=c,this.a22=l,this.a32=g,this.a13=m,this.a23=y,this.a33=b}return i.quadrilateralToQuadrilateral=function(e,n,s,c,l,g,m,y,b,P,B,z,K,ae,ye,Re){var Ve=i.quadrilateralToSquare(e,n,s,c,l,g,m,y);return i.squareToQuadrilateral(b,P,B,z,K,ae,ye,Re).times(Ve)},i.prototype.transformPoints=function(e){for(var n=e.length,s=this.a11,c=this.a12,l=this.a13,g=this.a21,m=this.a22,y=this.a23,b=this.a31,P=this.a32,B=this.a33,z=0;z<n;z+=2){var K=e[z],ae=e[z+1],ye=l*K+y*ae+B;e[z]=(s*K+g*ae+b)/ye,e[z+1]=(c*K+m*ae+P)/ye}},i.prototype.transformPointsWithValues=function(e,n){for(var s=this.a11,c=this.a12,l=this.a13,g=this.a21,m=this.a22,y=this.a23,b=this.a31,P=this.a32,B=this.a33,z=e.length,K=0;K<z;K++){var ae=e[K],ye=n[K],Re=l*ae+y*ye+B;e[K]=(s*ae+g*ye+b)/Re,n[K]=(c*ae+m*ye+P)/Re}},i.squareToQuadrilateral=function(e,n,s,c,l,g,m,y){var b=e-s+l-m,P=n-c+g-y;if(0===b&&0===P)return new i(s-e,l-s,e,c-n,g-c,n,0,0,1);var B=s-l,z=m-l,K=c-g,ae=y-g,ye=B*ae-z*K,Re=(b*ae-z*P)/ye,Ve=(B*P-b*K)/ye;return new i(s-e+Re*s,m-e+Ve*m,e,c-n+Re*c,y-n+Ve*y,n,Re,Ve,1)},i.quadrilateralToSquare=function(e,n,s,c,l,g,m,y){return i.squareToQuadrilateral(e,n,s,c,l,g,m,y).buildAdjoint()},i.prototype.buildAdjoint=function(){return new i(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},i.prototype.times=function(e){return new i(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},i}();var R=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const M=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return R(e,i),e.prototype.sampleGrid=function(n,s,c,l,g,m,y,b,P,B,z,K,ae,ye,Re,Ve,Ne,Ye,at){var Ft=$c.quadrilateralToQuadrilateral(l,g,m,y,b,P,B,z,K,ae,ye,Re,Ve,Ne,Ye,at);return this.sampleGridWithTransform(n,s,c,Ft)},e.prototype.sampleGridWithTransform=function(n,s,c,l){if(s<=0||c<=0)throw new qe;for(var g=new tr(s,c),m=new Float32Array(2*s),y=0;y<c;y++){for(var b=m.length,P=y+.5,B=0;B<b;B+=2)m[B]=B/2+.5,m[B+1]=P;l.transformPoints(m),gl.checkAndNudgePoints(n,m);try{for(B=0;B<b;B+=2)n.get(Math.floor(m[B]),Math.floor(m[B+1]))&&g.set(B/2,y)}catch{throw new qe}}return g},e}(gl),Q=function(){function i(){}return i.setGridSampler=function(e){i.gridSampler=e},i.getInstance=function(){return i.gridSampler},i.gridSampler=new M,i}();var oe=function(){function i(e,n){this.x=e,this.y=n}return i.prototype.toResultPoint=function(){return new hn(this.getX(),this.getY())},i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i}();const dt=function(){function i(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return i.prototype.detect=function(){return this.detectMirror(!1)},i.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),s=this.getBullsEyeCorners(n);if(e){var c=s[0];s[0]=s[2],s[2]=c}this.extractParameters(s);var l=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),g=this.getMatrixCornerPoints(s);return new Ba(l,g,this.compact,this.nbDataBlocks,this.nbLayers)},i.prototype.extractParameters=function(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new qe;var n=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(s,n);for(var c=0,l=0;l<4;l++){var g=s[(this.shift+l)%4];this.compact?(c<<=7,c+=g>>1&127):(c<<=10,c+=(g>>2&992)+(g>>1&31))}var m=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=1+(m>>6),this.nbDataBlocks=1+(63&m)):(this.nbLayers=1+(m>>11),this.nbDataBlocks=1+(2047&m))},i.prototype.getRotation=function(e,n){var s=0;e.forEach(function(l,g,m){s=(l>>n-2<<1)+(1&l)+(s<<3)}),s=((1&s)<<11)+(s>>1);for(var c=0;c<4;c++)if(ur.bitCount(s^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new qe},i.prototype.getCorrectedParameterData=function(e,n){var s,c;n?(s=7,c=2):(s=10,c=4);for(var l=s-c,g=new Int32Array(s),m=s-1;m>=0;--m)g[m]=15&e,e>>=4;try{new La(pi.AZTEC_PARAM).decode(g,l)}catch{throw new qe}var b=0;for(m=0;m<c;m++)b=(b<<4)+g[m];return b},i.prototype.getBullsEyeCorners=function(e){var n=e,s=e,c=e,l=e,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var m=this.getFirstDifferent(n,g,1,-1),y=this.getFirstDifferent(s,g,1,1),b=this.getFirstDifferent(c,g,-1,1),P=this.getFirstDifferent(l,g,-1,-1);if(this.nbCenterLayers>2){var B=this.distancePoint(P,m)*this.nbCenterLayers/(this.distancePoint(l,n)*(this.nbCenterLayers+2));if(B<.75||B>1.25||!this.isWhiteOrBlackRectangle(m,y,b,P))break}n=m,s=y,c=b,l=P,g=!g}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new qe;this.compact=5===this.nbCenterLayers;var z=new hn(n.getX()+.5,n.getY()-.5),K=new hn(s.getX()+.5,s.getY()+.5),ae=new hn(c.getX()-.5,c.getY()+.5),ye=new hn(l.getX()-.5,l.getY()-.5);return this.expandSquare([z,K,ae,ye],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},i.prototype.getMatrixCenter=function(){var e,n,s,c;try{e=(l=new Nd(this.image).detect())[0],n=l[1],s=l[2],c=l[3]}catch{var g=this.image.getWidth()/2,m=this.image.getHeight()/2;e=this.getFirstDifferent(new oe(g+7,m-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new oe(g+7,m+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new oe(g-7,m+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new oe(g-7,m-7),!1,-1,-1).toResultPoint()}var y=Ir.round((e.getX()+c.getX()+n.getX()+s.getX())/4),b=Ir.round((e.getY()+c.getY()+n.getY()+s.getY())/4);try{var l;e=(l=new Nd(this.image,15,y,b).detect())[0],n=l[1],s=l[2],c=l[3]}catch{e=this.getFirstDifferent(new oe(y+7,b-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new oe(y+7,b+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new oe(y-7,b+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new oe(y-7,b-7),!1,-1,-1).toResultPoint()}return y=Ir.round((e.getX()+c.getX()+n.getX()+s.getX())/4),b=Ir.round((e.getY()+c.getY()+n.getY()+s.getY())/4),new oe(y,b)},i.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},i.prototype.sampleGrid=function(e,n,s,c,l){var g=Q.getInstance(),m=this.getDimension(),y=m/2-this.nbCenterLayers,b=m/2+this.nbCenterLayers;return g.sampleGrid(e,m,m,y,y,b,y,b,b,y,b,n.getX(),n.getY(),s.getX(),s.getY(),c.getX(),c.getY(),l.getX(),l.getY())},i.prototype.sampleLine=function(e,n,s){for(var c=0,l=this.distanceResultPoint(e,n),g=l/s,m=e.getX(),y=e.getY(),b=g*(n.getX()-e.getX())/l,P=g*(n.getY()-e.getY())/l,B=0;B<s;B++)this.image.get(Ir.round(m+B*b),Ir.round(y+B*P))&&(c|=1<<s-B-1);return c},i.prototype.isWhiteOrBlackRectangle=function(e,n,s,c){e=new oe(e.getX()-3,e.getY()+3),n=new oe(n.getX()-3,n.getY()-3),s=new oe(s.getX()+3,s.getY()-3),c=new oe(c.getX()+3,c.getY()+3);var g=this.getColor(c,e);if(0===g)return!1;var m=this.getColor(e,n);return m===g&&(m=this.getColor(n,s))===g&&(m=this.getColor(s,c))===g},i.prototype.getColor=function(e,n){for(var s=this.distancePoint(e,n),c=(n.getX()-e.getX())/s,l=(n.getY()-e.getY())/s,g=0,m=e.getX(),y=e.getY(),b=this.image.get(e.getX(),e.getY()),P=Math.ceil(s),B=0;B<P;B++)y+=l,this.image.get(Ir.round(m+=c),Ir.round(y))!==b&&g++;var z=g/s;return z>.1&&z<.9?0:z<=.1===b?1:-1},i.prototype.getFirstDifferent=function(e,n,s,c){for(var l=e.getX()+s,g=e.getY()+c;this.isValid(l,g)&&this.image.get(l,g)===n;)l+=s,g+=c;for(l-=s,g-=c;this.isValid(l,g)&&this.image.get(l,g)===n;)l+=s;for(l-=s;this.isValid(l,g)&&this.image.get(l,g)===n;)g+=c;return new oe(l,g-=c)},i.prototype.expandSquare=function(e,n,s){var c=s/(2*n),l=e[0].getX()-e[2].getX(),g=e[0].getY()-e[2].getY(),m=(e[0].getX()+e[2].getX())/2,y=(e[0].getY()+e[2].getY())/2,b=new hn(m+c*l,y+c*g),P=new hn(m-c*l,y-c*g);return l=e[1].getX()-e[3].getX(),g=e[1].getY()-e[3].getY(),m=(e[1].getX()+e[3].getX())/2,y=(e[1].getY()+e[3].getY())/2,[b,new hn(m+c*l,y+c*g),P,new hn(m-c*l,y-c*g)]},i.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},i.prototype.isValidPoint=function(e){var n=Ir.round(e.getX()),s=Ir.round(e.getY());return this.isValid(n,s)},i.prototype.distancePoint=function(e,n){return Ir.distance(e.getX(),e.getY(),n.getX(),n.getY())},i.prototype.distanceResultPoint=function(e,n){return Ir.distance(e.getX(),e.getY(),n.getX(),n.getY())},i.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ur.truncDivision(this.nbLayers-4,8)+1)+15},i}(),Pt=function(){function i(){}return i.prototype.decode=function(e,n){void 0===n&&(n=null);var s=null,c=new dt(e.getBlackMatrix()),l=null,g=null;try{l=(m=c.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(n,l),g=(new Wu).decode(m)}catch(B){s=B}if(null==g)try{var m;l=(m=c.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(n,l),g=(new Wu).decode(m)}catch(B){throw s??B}var y=new ao(g.getText(),g.getRawBytes(),g.getNumBits(),l,sn.AZTEC,Ur.currentTimeMillis()),b=g.getByteSegments();null!=b&&y.putMetadata(Yi.BYTE_SEGMENTS,b);var P=g.getECLevel();return null!=P&&y.putMetadata(Yi.ERROR_CORRECTION_LEVEL,P),y},i.prototype.reportFoundResultPoints=function(e,n){if(null!=e){var s=e.get(Un.NEED_RESULT_POINT_CALLBACK);null!=s&&n.forEach(function(c,l,g){s.foundPossibleResultPoint(c)})}},i.prototype.reset=function(){},i}();var i,fn=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();fn(function e(n){return void 0===n&&(n=500),i.call(this,new Pt,n)||this},i=oa);const ar=function(){function i(){}return i.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{if(n&&!0===n.get(Un.TRY_HARDER)&&e.isRotateSupported()){var c=e.rotateCounterClockwise(),l=this.doDecode(c,n),g=l.getResultMetadata(),m=270;null!==g&&!0===g.get(Yi.ORIENTATION)&&(m+=g.get(Yi.ORIENTATION)%360),l.putMetadata(Yi.ORIENTATION,m);var y=l.getResultPoints();if(null!==y)for(var b=c.getHeight(),P=0;P<y.length;P++)y[P]=new hn(b-y[P].getY()-1,y[P].getX());return l}throw new qe}},i.prototype.reset=function(){},i.prototype.doDecode=function(e,n){var y,s=e.getWidth(),c=e.getHeight(),l=new Ci(s),g=n&&!0===n.get(Un.TRY_HARDER),m=Math.max(1,c>>(g?8:5));y=g?c:15;for(var b=Math.trunc(c/2),P=0;P<y;P++){var B=Math.trunc((P+1)/2),K=b+m*(1&P?-B:B);if(K<0||K>=c)break;try{l=e.getBlackRow(K,l)}catch{continue}for(var ae=function(Ne){if(1===Ne&&(l.reverse(),n&&!0===n.get(Un.NEED_RESULT_POINT_CALLBACK))){var Ye=new Map;n.forEach(function($t,Zt){return Ye.set(Zt,$t)}),Ye.delete(Un.NEED_RESULT_POINT_CALLBACK),n=Ye}try{var at=ye.decodeRow(K,l,n);if(1===Ne){at.putMetadata(Yi.ORIENTATION,180);var Ft=at.getResultPoints();null!==Ft&&(Ft[0]=new hn(s-Ft[0].getX()-1,Ft[0].getY()),Ft[1]=new hn(s-Ft[1].getX()-1,Ft[1].getY()))}return{value:at}}catch{}},ye=this,Re=0;Re<2;Re++){var Ve=ae(Re);if("object"==typeof Ve)return Ve.value}}throw new qe},i.recordPattern=function(e,n,s){for(var c=s.length,l=0;l<c;l++)s[l]=0;var g=e.getSize();if(n>=g)throw new qe;for(var m=!e.get(n),y=0,b=n;b<g;){if(e.get(b)!==m)s[y]++;else{if(++y===c)break;s[y]=1,m=!m}b++}if(y!==c&&(y!==c-1||b!==g))throw new qe},i.recordPatternInReverse=function(e,n,s){for(var c=s.length,l=e.get(n);n>0&&c>=0;)e.get(--n)!==l&&(c--,l=!l);if(c>=0)throw new qe;i.recordPattern(e,n+1,s)},i.patternMatchVariance=function(e,n,s){for(var c=e.length,l=0,g=0,m=0;m<c;m++)l+=e[m],g+=n[m];if(l<g)return Number.POSITIVE_INFINITY;var y=l/g;s*=y;for(var b=0,P=0;P<c;P++){var B=e[P],z=n[P]*y,K=B>z?B-z:z-B;if(K>s)return Number.POSITIVE_INFINITY;b+=K}return b/l},i}();var rs=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ps=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return rs(e,i),e.findStartPattern=function(n){for(var s=n.getSize(),c=n.getNextSet(0),l=0,g=Int32Array.from([0,0,0,0,0,0]),m=c,y=!1,P=c;P<s;P++)if(n.get(P)!==y)g[l]++;else{if(5===l){for(var B=e.MAX_AVG_VARIANCE,z=-1,K=e.CODE_START_A;K<=e.CODE_START_C;K++){var ae=ar.patternMatchVariance(g,e.CODE_PATTERNS[K],e.MAX_INDIVIDUAL_VARIANCE);ae<B&&(B=ae,z=K)}if(z>=0&&n.isRange(Math.max(0,m-(P-m)/2),m,!1))return Int32Array.from([m,P,z]);m+=g[0]+g[1],(g=g.slice(2,g.length))[l-1]=0,g[l]=0,l--}else l++;g[l]=1,y=!y}throw new qe},e.decodeCode=function(n,s,c){ar.recordPattern(n,c,s);for(var l=e.MAX_AVG_VARIANCE,g=-1,m=0;m<e.CODE_PATTERNS.length;m++){var b=this.patternMatchVariance(s,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);b<l&&(l=b,g=m)}if(g>=0)return g;throw new qe},e.prototype.decodeRow=function(n,s,c){var P,l=c&&!0===c.get(Un.ASSUME_GS1),g=e.findStartPattern(s),m=g[2],y=0,b=new Uint8Array(20);switch(b[y++]=m,m){case e.CODE_START_A:P=e.CODE_CODE_A;break;case e.CODE_START_B:P=e.CODE_CODE_B;break;case e.CODE_START_C:P=e.CODE_CODE_C;break;default:throw new Yt}for(var B=!1,z=!1,K="",ae=g[0],ye=g[1],Re=Int32Array.from([0,0,0,0,0,0]),Ve=0,Ne=0,Ye=m,at=0,Ft=!0,$t=!1,Zt=!1;!B;){var pn=z;switch(z=!1,Ve=Ne,Ne=e.decodeCode(s,Re,ye),b[y++]=Ne,Ne!==e.CODE_STOP&&(Ft=!0),Ne!==e.CODE_STOP&&(Ye+=++at*Ne),ae=ye,ye+=Re.reduce(function(Ap,ff){return Ap+ff},0),Ne){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Yt}switch(P){case e.CODE_CODE_A:if(Ne<64)K+=String.fromCharCode(Zt===$t?32+Ne:32+Ne+128),Zt=!1;else if(Ne<96)K+=String.fromCharCode(Zt===$t?Ne-64:Ne+64),Zt=!1;else switch(Ne!==e.CODE_STOP&&(Ft=!1),Ne){case e.CODE_FNC_1:l&&(K+=0===K.length?"]C1":"\x1d");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!$t&&Zt?($t=!0,Zt=!1):$t&&Zt?($t=!1,Zt=!1):Zt=!0;break;case e.CODE_SHIFT:z=!0,P=e.CODE_CODE_B;break;case e.CODE_CODE_B:P=e.CODE_CODE_B;break;case e.CODE_CODE_C:P=e.CODE_CODE_C;break;case e.CODE_STOP:B=!0}break;case e.CODE_CODE_B:if(Ne<96)K+=String.fromCharCode(Zt===$t?32+Ne:32+Ne+128),Zt=!1;else switch(Ne!==e.CODE_STOP&&(Ft=!1),Ne){case e.CODE_FNC_1:l&&(K+=0===K.length?"]C1":"\x1d");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!$t&&Zt?($t=!0,Zt=!1):$t&&Zt?($t=!1,Zt=!1):Zt=!0;break;case e.CODE_SHIFT:z=!0,P=e.CODE_CODE_A;break;case e.CODE_CODE_A:P=e.CODE_CODE_A;break;case e.CODE_CODE_C:P=e.CODE_CODE_C;break;case e.CODE_STOP:B=!0}break;case e.CODE_CODE_C:if(Ne<100)Ne<10&&(K+="0"),K+=Ne;else switch(Ne!==e.CODE_STOP&&(Ft=!1),Ne){case e.CODE_FNC_1:l&&(K+=0===K.length?"]C1":"\x1d");break;case e.CODE_CODE_A:P=e.CODE_CODE_A;break;case e.CODE_CODE_B:P=e.CODE_CODE_B;break;case e.CODE_STOP:B=!0}}pn&&(P=P===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var rr=ye-ae;if(ye=s.getNextUnset(ye),!s.isRange(ye,Math.min(s.getSize(),ye+(ye-ae)/2),!1))throw new qe;if((Ye-=at*Ve)%103!==Ve)throw new ui;var ir=K.length;if(0===ir)throw new qe;ir>0&&Ft&&(K=K.substring(0,P===e.CODE_CODE_C?ir-2:ir-1));for(var ss=(g[1]+g[0])/2,fi=ae+rr/2,Ao=b.length,uu=new Uint8Array(Ao),_d=0;_d<Ao;_d++)uu[_d]=b[_d];var Ug=[new hn(ss,n),new hn(fi,n)];return new ao(K,uu,0,Ug,sn.CODE_128,(new Date).getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(ar);var zc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Za=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Eu=function(i){function e(n,s){void 0===n&&(n=!1),void 0===s&&(s=!1);var c=i.call(this)||this;return c.usingCheckDigit=n,c.extendedMode=s,c.decodeRowResult="",c.counters=new Int32Array(9),c}return zc(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m,y,b=this.counters;b.fill(0),this.decodeRowResult="";var K,ae,P=e.findAsteriskPattern(s,b),B=s.getNextSet(P[1]),z=s.getSize();do{e.recordPattern(s,B,b);var ye=e.toNarrowWidePattern(b);if(ye<0)throw new qe;K=e.patternToChar(ye),this.decodeRowResult+=K,ae=B;try{for(var Re=(l=void 0,Za(b)),Ve=Re.next();!Ve.done;Ve=Re.next())B+=Ve.value}catch(Ao){l={error:Ao}}finally{try{Ve&&!Ve.done&&(g=Re.return)&&g.call(Re)}finally{if(l)throw l.error}}B=s.getNextSet(B)}while("*"!==K);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var ir,Ye=0;try{for(var at=Za(b),Ft=at.next();!Ft.done;Ft=at.next())Ye+=Ft.value}catch(Ao){m={error:Ao}}finally{try{Ft&&!Ft.done&&(y=at.return)&&y.call(at)}finally{if(m)throw m.error}}if(B!==z&&2*(B-ae-Ye)<Ye)throw new qe;if(this.usingCheckDigit){for(var Zt=this.decodeRowResult.length-1,pn=0,rr=0;rr<Zt;rr++)pn+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(rr));if(this.decodeRowResult.charAt(Zt)!==e.ALPHABET_STRING.charAt(pn%43))throw new ui;this.decodeRowResult=this.decodeRowResult.substring(0,Zt)}if(0===this.decodeRowResult.length)throw new qe;ir=this.extendedMode?e.decodeExtended(this.decodeRowResult):this.decodeRowResult;var fi=ae+Ye/2;return new ao(ir,null,0,[new hn((P[1]+P[0])/2,n),new hn(fi,n)],sn.CODE_39,(new Date).getTime())},e.findAsteriskPattern=function(n,s){for(var c=n.getSize(),l=n.getNextSet(0),g=0,m=l,y=!1,b=s.length,P=l;P<c;P++)if(n.get(P)!==y)s[g]++;else{if(g===b-1){if(this.toNarrowWidePattern(s)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,m-Math.floor((P-m)/2)),m,!1))return[m,P];m+=s[0]+s[1],s.copyWithin(0,2,2+g-1),s[g-1]=0,s[g]=0,g--}else g++;s[g]=1,y=!y}throw new qe},e.toNarrowWidePattern=function(n){var s,c,m,l=n.length,g=0;do{var y=2147483647;try{for(var b=(s=void 0,Za(n)),P=b.next();!P.done;P=b.next())(B=P.value)<y&&B>g&&(y=B)}catch(ye){s={error:ye}}finally{try{P&&!P.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}g=y,m=0;for(var z=0,K=0,ae=0;ae<l;ae++)(B=n[ae])>g&&(K|=1<<l-1-ae,m++,z+=B);if(3===m){for(ae=0;ae<l&&m>0;ae++){var B;if((B=n[ae])>g&&(m--,2*B>=z))return-1}return K}}while(m>3);return-1},e.patternToChar=function(n){for(var s=0;s<e.CHARACTER_ENCODINGS.length;s++)if(e.CHARACTER_ENCODINGS[s]===n)return e.ALPHABET_STRING.charAt(s);if(n===e.ASTERISK_ENCODING)return"*";throw new qe},e.decodeExtended=function(n){for(var s=n.length,c="",l=0;l<s;l++){var g=n.charAt(l);if("+"===g||"$"===g||"%"===g||"/"===g){var m=n.charAt(l+1),y="\0";switch(g){case"+":if(!(m>="A"&&m<="Z"))throw new Yt;y=String.fromCharCode(m.charCodeAt(0)+32);break;case"$":if(!(m>="A"&&m<="Z"))throw new Yt;y=String.fromCharCode(m.charCodeAt(0)-64);break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if("U"===m)y="\0";else if("V"===m)y="@";else if("W"===m)y="`";else{if("X"!==m&&"Y"!==m&&"Z"!==m)throw new Yt;y="\x7f"}break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else{if("Z"!==m)throw new Yt;y=":"}}c+=y,l++}else c+=g}return c},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(ar);var ml=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),kd=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const bf=function(i){function e(){var n=i.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return ml(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m,y,K,ae,b=this.findAsteriskPattern(s),P=s.getNextSet(b[1]),B=s.getSize(),z=this.counters;z.fill(0),this.decodeRowResult="";do{e.recordPattern(s,P,z);var ye=this.toPattern(z);if(ye<0)throw new qe;K=this.patternToChar(ye),this.decodeRowResult+=K,ae=P;try{for(var Re=(l=void 0,kd(z)),Ve=Re.next();!Ve.done;Ve=Re.next())P+=Ve.value}catch(rr){l={error:rr}}finally{try{Ve&&!Ve.done&&(g=Re.return)&&g.call(Re)}finally{if(l)throw l.error}}P=s.getNextSet(P)}while("*"!==K);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var Ye=0;try{for(var at=kd(z),Ft=at.next();!Ft.done;Ft=at.next())Ye+=Ft.value}catch(rr){m={error:rr}}finally{try{Ft&&!Ft.done&&(y=at.return)&&y.call(at)}finally{if(m)throw m.error}}if(P===B||!s.get(P))throw new qe;if(this.decodeRowResult.length<2)throw new qe;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var $t=this.decodeExtended(this.decodeRowResult),pn=ae+Ye/2;return new ao($t,null,0,[new hn((b[1]+b[0])/2,n),new hn(pn,n)],sn.CODE_93,(new Date).getTime())},e.prototype.findAsteriskPattern=function(n){var s=n.getSize(),c=n.getNextSet(0);this.counters.fill(0);for(var l=this.counters,g=c,m=!1,y=l.length,b=0,P=c;P<s;P++)if(n.get(P)!==m)l[b]++;else{if(b===y-1){if(this.toPattern(l)===e.ASTERISK_ENCODING)return new Int32Array([g,P]);g+=l[0]+l[1],l.copyWithin(0,2,2+b-1),l[b-1]=0,l[b]=0,b--}else b++;l[b]=1,m=!m}throw new qe},e.prototype.toPattern=function(n){var s,c,l=0;try{for(var g=kd(n),m=g.next();!m.done;m=g.next())l+=m.value}catch(ae){s={error:ae}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}for(var b=0,P=n.length,B=0;B<P;B++){var z=Math.round(9*n[B]/l);if(z<1||z>4)return-1;if(1&B)b<<=z;else for(var K=0;K<z;K++)b=b<<1|1}return b},e.prototype.patternToChar=function(n){for(var s=0;s<e.CHARACTER_ENCODINGS.length;s++)if(e.CHARACTER_ENCODINGS[s]===n)return e.ALPHABET_STRING.charAt(s);throw new qe},e.prototype.decodeExtended=function(n){for(var s=n.length,c="",l=0;l<s;l++){var g=n.charAt(l);if(g>="a"&&g<="d"){if(l>=s-1)throw new Yt;var m=n.charAt(l+1),y="\0";switch(g){case"d":if(!(m>="A"&&m<="Z"))throw new Yt;y=String.fromCharCode(m.charCodeAt(0)+32);break;case"a":if(!(m>="A"&&m<="Z"))throw new Yt;y=String.fromCharCode(m.charCodeAt(0)-64);break;case"b":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if("U"===m)y="\0";else if("V"===m)y="@";else if("W"===m)y="`";else{if(!(m>="X"&&m<="Z"))throw new Yt;y="\x7f"}break;case"c":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else{if("Z"!==m)throw new Yt;y=":"}}c+=y,l++}else c+=g}return c},e.prototype.checkChecksums=function(n){var s=n.length;this.checkOneChecksum(n,s-2,20),this.checkOneChecksum(n,s-1,15)},e.prototype.checkOneChecksum=function(n,s,c){for(var l=1,g=0,m=s-1;m>=0;m--)g+=l*e.ALPHABET_STRING.indexOf(n.charAt(m)),++l>c&&(l=1);if(n.charAt(s)!==e.ALPHABET_STRING[g%47])throw new ui},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.ASTERISK_ENCODING=(e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350])[47],e}(ar);var Gl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const qu=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return Gl(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m=this.decodeStart(s),y=this.decodeEnd(s),b=new dn;e.decodeMiddle(s,m[1],y[0],b);var P=b.toString(),B=null;null!=c&&(B=c.get(Un.ALLOWED_LENGTHS)),null==B&&(B=e.DEFAULT_ALLOWED_LENGTHS);var z=P.length,K=!1,ae=0;try{for(var ye=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(B),Re=ye.next();!Re.done;Re=ye.next()){var Ve=Re.value;if(z===Ve){K=!0;break}Ve>ae&&(ae=Ve)}}catch(at){l={error:at}}finally{try{Re&&!Re.done&&(g=ye.return)&&g.call(ye)}finally{if(l)throw l.error}}if(!K&&z>ae&&(K=!0),!K)throw new Yt;var Ne=[new hn(m[1],n),new hn(y[0],n)];return new ao(P,null,0,Ne,sn.ITF,(new Date).getTime())},e.decodeMiddle=function(n,s,c,l){var g=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(g.fill(0),m.fill(0),y.fill(0);s<c;){ar.recordPattern(n,s,g);for(var b=0;b<5;b++){var P=2*b;m[b]=g[P],y[b]=g[P+1]}var B=e.decodeDigit(m);l.append(B.toString()),B=this.decodeDigit(y),l.append(B.toString()),g.forEach(function(z){s+=z})}},e.prototype.decodeStart=function(n){var s=e.skipWhiteSpace(n),c=e.findGuardPattern(n,s,e.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(n,c[0]),c},e.prototype.validateQuietZone=function(n,s){var c=10*this.narrowLineWidth;c=c<s?c:s;for(var l=s-1;c>0&&l>=0&&!n.get(l);l--)c--;if(0!==c)throw new qe},e.skipWhiteSpace=function(n){var s=n.getSize(),c=n.getNextSet(0);if(c===s)throw new qe;return c},e.prototype.decodeEnd=function(n){n.reverse();try{var s=e.skipWhiteSpace(n),c=void 0;try{c=e.findGuardPattern(n,s,e.END_PATTERN_REVERSED[0])}catch(g){g instanceof qe&&(c=e.findGuardPattern(n,s,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,c[0]);var l=c[0];return c[0]=n.getSize()-c[1],c[1]=n.getSize()-l,c}finally{n.reverse()}},e.findGuardPattern=function(n,s,c){var l=c.length,g=new Int32Array(l),m=n.getSize(),y=!1,b=0,P=s;g.fill(0);for(var B=s;B<m;B++)if(n.get(B)!==y)g[b]++;else{if(b===l-1){if(ar.patternMatchVariance(g,c,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[P,B];P+=g[0]+g[1],Ur.arraycopy(g,2,g,0,b-1),g[b-1]=0,g[b]=0,b--}else b++;g[b]=1,y=!y}throw new qe},e.decodeDigit=function(n){for(var s=e.MAX_AVG_VARIANCE,c=-1,l=e.PATTERNS.length,g=0;g<l;g++){var y=ar.patternMatchVariance(n,e.PATTERNS[g],e.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,c=g):y===s&&(c=-1)}if(c>=0)return c%10;throw new qe},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(ar);var $l=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Wc=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return $l(e,i),e.findStartGuardPattern=function(n){for(var c,s=!1,l=0,g=Int32Array.from([0,0,0]);!s;){g=Int32Array.from([0,0,0]);var m=(c=e.findGuardPattern(n,l,!1,this.START_END_PATTERN,g))[0],y=m-((l=c[1])-m);y>=0&&(s=n.isRange(y,m,!1))}return c},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var s=n.length;if(0===s)return!1;var c=parseInt(n.charAt(s-1),10);return e.getStandardUPCEANChecksum(n.substring(0,s-1))===c},e.getStandardUPCEANChecksum=function(n){for(var s=n.length,c=0,l=s-1;l>=0;l-=2){if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Yt;c+=g}for(c*=3,l=s-2;l>=0;l-=2){var g;if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Yt;c+=g}return(1e3-c)%10},e.decodeEnd=function(n,s){return e.findGuardPattern(n,s,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,s,c,l){return this.findGuardPattern(n,s,c,l,new Int32Array(l.length))},e.findGuardPattern=function(n,s,c,l,g){for(var m=n.getSize(),y=0,b=s=c?n.getNextUnset(s):n.getNextSet(s),P=l.length,B=c,z=s;z<m;z++)if(n.get(z)!==B)g[y]++;else{if(y===P-1){if(ar.patternMatchVariance(g,l,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([b,z]);b+=g[0]+g[1];for(var K=g.slice(2,g.length),ae=0;ae<y-1;ae++)g[ae]=K[ae];g[y-1]=0,g[y]=0,y--}else y++;g[y]=1,B=!B}throw new qe},e.decodeDigit=function(n,s,c,l){this.recordPattern(n,c,s);for(var g=this.MAX_AVG_VARIANCE,m=-1,y=l.length,b=0;b<y;b++){var B=ar.patternMatchVariance(s,l[b],e.MAX_INDIVIDUAL_VARIANCE);B<g&&(g=B,m=b)}if(m>=0)return m;throw new qe},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(ar);var zl=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const _l=function(){function i(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return i.prototype.decodeRow=function(e,n,s){var c=this.decodeRowStringBuffer,l=this.decodeMiddle(n,s,c),g=c.toString(),m=i.parseExtensionString(g),y=[new hn((s[0]+s[1])/2,e),new hn(l,e)],b=new ao(g,null,0,y,sn.UPC_EAN_EXTENSION,(new Date).getTime());return null!=m&&b.putAllMetadata(m),b},i.prototype.decodeMiddle=function(e,n,s){var c,l,g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var m=e.getSize(),y=n[1],b=0,P=0;P<5&&y<m;P++){var B=Wc.decodeDigit(e,g,y,Wc.L_AND_G_PATTERNS);s+=String.fromCharCode(48+B%10);try{for(var z=(c=void 0,zl(g)),K=z.next();!K.done;K=z.next())y+=K.value}catch(Re){c={error:Re}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}B>=10&&(b|=1<<4-P),4!==P&&(y=e.getNextSet(y),y=e.getNextUnset(y))}if(5!==s.length)throw new qe;var ye=this.determineCheckDigit(b);if(i.extensionChecksum(s.toString())!==ye)throw new qe;return y},i.extensionChecksum=function(e){for(var n=e.length,s=0,c=n-2;c>=0;c-=2)s+=e.charAt(c).charCodeAt(0)-48;for(s*=3,c=n-1;c>=0;c-=2)s+=e.charAt(c).charCodeAt(0)-48;return(s*=3)%10},i.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new qe},i.parseExtensionString=function(e){if(5!==e.length)return null;var n=i.parseExtension5String(e);return null==n?null:new Map([[Yi.SUGGESTED_PRICE,n]])},i.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="\xa3";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n=""}var s=parseInt(e.substring(1)),l=s%100;return n+(s/100).toString()+"."+(l<10?"0"+l:l.toString())},i}();var Ah=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const qo=function(){function i(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return i.prototype.decodeRow=function(e,n,s){var c=this.decodeRowStringBuffer,l=this.decodeMiddle(n,s,c),g=c.toString(),m=i.parseExtensionString(g),y=[new hn((s[0]+s[1])/2,e),new hn(l,e)],b=new ao(g,null,0,y,sn.UPC_EAN_EXTENSION,(new Date).getTime());return null!=m&&b.putAllMetadata(m),b},i.prototype.decodeMiddle=function(e,n,s){var c,l,g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var m=e.getSize(),y=n[1],b=0,P=0;P<2&&y<m;P++){var B=Wc.decodeDigit(e,g,y,Wc.L_AND_G_PATTERNS);s+=String.fromCharCode(48+B%10);try{for(var z=(c=void 0,Ah(g)),K=z.next();!K.done;K=z.next())y+=K.value}catch(ye){c={error:ye}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}B>=10&&(b|=1<<1-P),1!==P&&(y=e.getNextSet(y),y=e.getNextUnset(y))}if(2!==s.length)throw new qe;if(parseInt(s.toString())%4!==b)throw new qe;return y},i.parseExtensionString=function(e){return 2!==e.length?null:new Map([[Yi.ISSUE_NUMBER,parseInt(e)]])},i}(),ja=function(){function i(){}return i.decodeRow=function(e,n,s){var c=Wc.findGuardPattern(n,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new _l).decodeRow(e,n,c)}catch{return(new qo).decodeRow(e,n,c)}},i.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),i}();var bh=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Lr=function(i){function e(){var n=i.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(m){return Int32Array.from(m)});for(var s=10;s<20;s++){for(var c=e.L_PATTERNS[s-10],l=new Int32Array(c.length),g=0;g<c.length;g++)l[g]=c[c.length-g-1];e.L_AND_G_PATTERNS[s]=l}return n}return bh(e,i),e.prototype.decodeRow=function(n,s,c){var l=e.findStartGuardPattern(s),g=null==c?null:c.get(Un.NEED_RESULT_POINT_CALLBACK);if(null!=g){var m=new hn((l[0]+l[1])/2,n);g.foundPossibleResultPoint(m)}var y=this.decodeMiddle(s,l,this.decodeRowStringBuffer),b=y.rowOffset,P=y.resultString;if(null!=g){var B=new hn(b,n);g.foundPossibleResultPoint(B)}var z=e.decodeEnd(s,b);if(null!=g){var K=new hn((z[0]+z[1])/2,n);g.foundPossibleResultPoint(K)}var ae=z[1],ye=ae+(ae-z[0]);if(ye>=s.getSize()||!s.isRange(ae,ye,!1))throw new qe;var Re=P.toString();if(Re.length<8)throw new Yt;if(!e.checkChecksum(Re))throw new ui;var Ve=(l[1]+l[0])/2,Ne=(z[1]+z[0])/2,Ye=this.getBarcodeFormat(),at=[new hn(Ve,n),new hn(Ne,n)],Ft=new ao(Re,null,0,at,Ye,(new Date).getTime()),$t=0;try{var Zt=ja.decodeRow(n,s,z[1]);Ft.putMetadata(Yi.UPC_EAN_EXTENSION,Zt.getText()),Ft.putAllMetadata(Zt.getResultMetadata()),Ft.addResultPoints(Zt.getResultPoints()),$t=Zt.getText().length}catch{}var pn=null==c?null:c.get(Un.ALLOWED_EAN_EXTENSIONS);if(null!=pn){var rr=!1;for(var ir in pn)if($t.toString()===ir){rr=!0;break}if(!rr)throw new qe}return Ft},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var s=n.length;if(0===s)return!1;var c=parseInt(n.charAt(s-1),10);return e.getStandardUPCEANChecksum(n.substring(0,s-1))===c},e.getStandardUPCEANChecksum=function(n){for(var s=n.length,c=0,l=s-1;l>=0;l-=2){if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Yt;c+=g}for(c*=3,l=s-2;l>=0;l-=2){var g;if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Yt;c+=g}return(1e3-c)%10},e.decodeEnd=function(n,s){return e.findGuardPattern(n,s,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Wc);var qc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Xu=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Ld=function(i){function e(){var n=i.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return qc(e,i),e.prototype.decodeMiddle=function(n,s,c){var l,g,m,y,b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;for(var P=n.getSize(),B=s[1],z=0,K=0;K<6&&B<P;K++){var ae=Lr.decodeDigit(n,b,B,Lr.L_AND_G_PATTERNS);c+=String.fromCharCode(48+ae%10);try{for(var ye=(l=void 0,Xu(b)),Re=ye.next();!Re.done;Re=ye.next())B+=Re.value}catch(Ft){l={error:Ft}}finally{try{Re&&!Re.done&&(g=ye.return)&&g.call(ye)}finally{if(l)throw l.error}}ae>=10&&(z|=1<<5-K)}for(c=e.determineFirstDigit(c,z),B=Lr.findGuardPattern(n,B,!0,Lr.MIDDLE_PATTERN,new Int32Array(Lr.MIDDLE_PATTERN.length).fill(0))[1],K=0;K<6&&B<P;K++){ae=Lr.decodeDigit(n,b,B,Lr.L_PATTERNS),c+=String.fromCharCode(48+ae);try{for(var Ye=(m=void 0,Xu(b)),at=Ye.next();!at.done;at=Ye.next())B+=at.value}catch(Zt){m={error:Zt}}finally{try{at&&!at.done&&(y=Ye.return)&&y.call(Ye)}finally{if(m)throw m.error}}}return{rowOffset:B,resultString:c}},e.prototype.getBarcodeFormat=function(){return sn.EAN_13},e.determineFirstDigit=function(n,s){for(var c=0;c<10;c++)if(s===this.FIRST_DIGIT_ENCODINGS[c])return String.fromCharCode(48+c)+n;throw new qe},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Lr);var ec=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),bc=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const tc=function(i){function e(){var n=i.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return ec(e,i),e.prototype.decodeMiddle=function(n,s,c){var l,g,m,y,b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;for(var P=n.getSize(),B=s[1],z=0;z<4&&B<P;z++){var K=Lr.decodeDigit(n,b,B,Lr.L_PATTERNS);c+=String.fromCharCode(48+K);try{for(var ae=(l=void 0,bc(b)),ye=ae.next();!ye.done;ye=ae.next())B+=ye.value}catch(at){l={error:at}}finally{try{ye&&!ye.done&&(g=ae.return)&&g.call(ae)}finally{if(l)throw l.error}}}for(B=Lr.findGuardPattern(n,B,!0,Lr.MIDDLE_PATTERN,new Int32Array(Lr.MIDDLE_PATTERN.length).fill(0))[1],z=0;z<4&&B<P;z++){K=Lr.decodeDigit(n,b,B,Lr.L_PATTERNS),c+=String.fromCharCode(48+K);try{for(var Ne=(m=void 0,bc(b)),Ye=Ne.next();!Ye.done;Ye=Ne.next())B+=Ye.value}catch($t){m={error:$t}}finally{try{Ye&&!Ye.done&&(y=Ne.return)&&y.call(Ne)}finally{if(m)throw m.error}}}return{rowOffset:B,resultString:c}},e.prototype.getBarcodeFormat=function(){return sn.EAN_8},e}(Lr);var wu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Sf=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.ean13Reader=new Ld,n}return wu(e,i),e.prototype.getBarcodeFormat=function(){return sn.UPC_A},e.prototype.decode=function(n,s){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,s,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,s,c))},e.prototype.decodeMiddle=function(n,s,c){return this.ean13Reader.decodeMiddle(n,s,c)},e.prototype.maybeReturnResult=function(n){var s=n.getText();if("0"===s.charAt(0)){var c=new ao(s.substring(1),null,null,n.getResultPoints(),sn.UPC_A);return null!=n.getResultMetadata()&&c.putAllMetadata(n.getResultMetadata()),c}throw new qe},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Lr);var wi=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Sh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Kc=function(i){function e(){var n=i.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return wi(e,i),e.prototype.decodeMiddle=function(n,s,c){var l,g,m=this.decodeMiddleCounters.map(function(Re){return Re});m[0]=0,m[1]=0,m[2]=0,m[3]=0;for(var y=n.getSize(),b=s[1],P=0,B=0;B<6&&b<y;B++){var z=e.decodeDigit(n,m,b,e.L_AND_G_PATTERNS);c+=String.fromCharCode(48+z%10);try{for(var K=(l=void 0,Sh(m)),ae=K.next();!ae.done;ae=K.next())b+=ae.value}catch(Re){l={error:Re}}finally{try{ae&&!ae.done&&(g=K.return)&&g.call(K)}finally{if(l)throw l.error}}z>=10&&(P|=1<<5-B)}return e.determineNumSysAndCheckDigit(new dn(c),P),b},e.prototype.decodeEnd=function(n,s){return e.findGuardPatternWithoutCounters(n,s,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return Lr.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,s){for(var c=0;c<=1;c++)for(var l=0;l<10;l++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][l])return n.insert(0,"0"+c),void n.append("0"+l);throw qe.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return sn.UPC_E},e.convertUPCEtoUPCA=function(n){var s=n.slice(1,7).split("").map(function(g){return g.charCodeAt(0)}),c=new dn;c.append(n.charAt(0));var l=s[5];switch(l){case 0:case 1:case 2:c.appendChars(s,0,2),c.append(l),c.append("0000"),c.appendChars(s,2,3);break;case 3:c.appendChars(s,0,3),c.append("00000"),c.appendChars(s,3,2);break;case 4:c.appendChars(s,0,4),c.append("00000"),c.append(s[4]);break;default:c.appendChars(s,0,5),c.append("0000"),c.append(l)}return n.length>=8&&c.append(n.charAt(7)),c.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Lr);var bm=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Kl=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Iu=function(i){function e(n){var s=i.call(this)||this,c=null==n?null:n.get(Un.POSSIBLE_FORMATS),l=[];return null!=c&&(c.indexOf(sn.EAN_13)>-1&&l.push(new Ld),c.indexOf(sn.UPC_A)>-1&&l.push(new Sf),c.indexOf(sn.EAN_8)>-1&&l.push(new tc),c.indexOf(sn.UPC_E)>-1&&l.push(new Kc)),0===l.length&&(l.push(new Ld),l.push(new Sf),l.push(new tc),l.push(new Kc)),s.readers=l,s}return bm(e,i),e.prototype.decodeRow=function(n,s,c){var l,g;try{for(var m=Kl(this.readers),y=m.next();!y.done;y=m.next()){var b=y.value;try{var P=b.decodeRow(n,s,c),B=P.getBarcodeFormat()===sn.EAN_13&&"0"===P.getText().charAt(0),z=null==c?null:c.get(Un.POSSIBLE_FORMATS),K=null==z||z.includes(sn.UPC_A);if(B&&K){var ae=P.getRawBytes(),ye=new ao(P.getText().substring(1),ae,ae?ae.length:null,P.getResultPoints(),sn.UPC_A);return ye.putAllMetadata(P.getResultMetadata()),ye}return P}catch{}}}catch(Re){l={error:Re}}finally{try{y&&!y.done&&(g=m.return)&&g.call(m)}finally{if(l)throw l.error}}throw new qe},e.prototype.reset=function(){var n,s;try{for(var c=Kl(this.readers),l=c.next();!l.done;l=c.next())l.value.reset()}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}},e}(ar);var Df=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Vd=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return Df(e,i),e.prototype.decodeRow=function(n,s,c){var l=this.getValidRowData(s);if(!l)throw new qe;var g=this.codaBarDecodeRow(l.row);if(!g)throw new qe;return new ao(g,null,0,[new hn(l.left,n),new hn(l.right,n)],sn.CODABAR,(new Date).getTime())},e.prototype.getValidRowData=function(n){var s=n.toArray(),c=s.indexOf(!0);if(-1===c)return null;var l=s.lastIndexOf(!0);if(l<=c)return null;for(var g=[],m=(s=s.slice(c,l+1))[0],y=1,b=1;b<s.length;b++)s[b]===m?y++:(m=s[b],g.push(y),y=1);return g.push(y),g.length<23&&(g.length+1)%8!=0?null:{row:g,left:c,right:l}},e.prototype.codaBarDecodeRow=function(n){for(var s=[],c=Math.ceil(n.reduce(function(y,b){return(y+b)/2},0));n.length>0;){var g=n.splice(0,8).splice(0,7).map(function(y){return y<c?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[g])return null;s.push(this.CODA_BAR_CHAR_SET[g])}var m=s.join("");return this.validCodaBarString(m)?m:null},e.prototype.validCodaBarString=function(n){return/^[A-D].{1,}[A-D]$/.test(n)},e}(ar);var Bd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Rn=function(i){function e(){var n=i.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return Bd(e,i),e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,s){for(var c=0;c<s.length;c++)if(ar.patternMatchVariance(n,s[c],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return c;throw new qe},e.count=function(n){return Ir.sum(new Int32Array(n))},e.increment=function(n,s){for(var c=0,l=s[0],g=1;g<n.length;g++)s[g]>l&&(l=s[g],c=g);n[c]++},e.decrement=function(n,s){for(var c=0,l=s[0],g=1;g<n.length;g++)s[g]<l&&(l=s[g],c=g);n[c]--},e.isFinderPattern=function(n){var s,c,l=n[0]+n[1],m=l/(l+n[2]+n[3]);if(m>=e.MIN_FINDER_PATTERN_RATIO&&m<=e.MAX_FINDER_PATTERN_RATIO){var y=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER;try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),B=P.next();!B.done;B=P.next()){var z=B.value;z>b&&(b=z),z<y&&(y=z)}}catch(K){s={error:K}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}return b<10*y}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(ar),ms=function(){function i(e,n){this.value=e,this.checksumPortion=n}return i.prototype.getValue=function(){return this.value},i.prototype.getChecksumPortion=function(){return this.checksumPortion},i.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},i.prototype.equals=function(e){return e instanceof i&&(this.value===e.value&&this.checksumPortion===e.checksumPortion)},i.prototype.hashCode=function(){return this.value^this.checksumPortion},i}(),vs=function(){function i(e,n,s,c,l){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new hn(s,l)),this.resultPoints.push(new hn(c,l))}return i.prototype.getValue=function(){return this.value},i.prototype.getStartEnd=function(){return this.startEnd},i.prototype.getResultPoints=function(){return this.resultPoints},i.prototype.equals=function(e){return e instanceof i&&this.value===e.value},i.prototype.hashCode=function(){return this.value},i}(),Pi=function(){function i(){}return i.getRSSvalue=function(e,n,s){var c,l,g=0;try{for(var m=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),y=m.next();!y.done;y=m.next())g+=y.value}catch(Ne){c={error:Ne}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}for(var P=0,B=0,z=e.length,K=0;K<z-1;K++){var ae=void 0;for(ae=1,B|=1<<K;ae<e[K];ae++,B&=~(1<<K)){var ye=i.combins(g-ae-1,z-K-2);if(s&&0===B&&g-ae-(z-K-1)>=z-K-1&&(ye-=i.combins(g-ae-(z-K),z-K-2)),z-K-1>1){for(var Re=0,Ve=g-ae-(z-K-2);Ve>n;Ve--)Re+=i.combins(g-ae-Ve-1,z-K-3);ye-=Re*(z-1-K)}else g-ae>n&&ye--;P+=ye}g-=ae}return P},i.combins=function(e,n){var s,c;e-n>n?(c=n,s=e-n):(c=e-n,s=n);for(var l=1,g=1,m=e;m>s;m--)l*=m,g<=c&&(l/=g,g++);for(;g<=c;)l/=g,g++;return l},i}(),nr=function(){function i(){}return i.buildBitArray=function(e){var n=2*e.length-1;null==e[e.length-1].getRightChar()&&(n-=1);for(var c=new Ci(12*n),l=0,m=e[0].getRightChar().getValue(),y=11;y>=0;--y)m&1<<y&&c.set(l),l++;for(y=1;y<e.length;++y){for(var b=e[y],P=b.getLeftChar().getValue(),B=11;B>=0;--B)P&1<<B&&c.set(l),l++;if(null!==b.getRightChar()){var z=b.getRightChar().getValue();for(B=11;B>=0;--B)z&1<<B&&c.set(l),l++}}return c},i}(),nc=function(){function i(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return i.prototype.getDecodedInformation=function(){return this.decodedInformation},i.prototype.isFinished=function(){return this.finished},i}(),Ai=function(){function i(e){this.newPosition=e}return i.prototype.getNewPosition=function(){return this.newPosition},i}();var Qu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const go=function(i){function e(n,s){var c=i.call(this,n)||this;return c.value=s,c}return Qu(e,i),e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Ai);var El=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ns=function(i){function e(n,s,c){var l=i.call(this,n)||this;return c?(l.remaining=!0,l.remainingValue=l.remainingValue):(l.remaining=!1,l.remainingValue=0),l.newString=s,l}return El(e,i),e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Ai);var Au=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Pn=function(i){function e(n,s,c){var l=i.call(this,n)||this;if(s<0||s>10||c<0||c>10)throw new Yt;return l.firstDigit=s,l.secondDigit=c,l}return Au(e,i),e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Ai);var bu=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Tc=function(){function i(){}return i.parseFieldsInGeneralPurpose=function(e){var n,s,c,l,g,m,y,b;if(!e)return null;if(e.length<2)throw new qe;var P=e.substring(0,2);try{for(var B=bu(i.TWO_DIGIT_DATA_LENGTH),z=B.next();!z.done;z=B.next())if((K=z.value)[0]===P)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(2,K[2],e):i.processFixedAI(2,K[1],e)}catch($t){n={error:$t}}finally{try{z&&!z.done&&(s=B.return)&&s.call(B)}finally{if(n)throw n.error}}if(e.length<3)throw new qe;var ae=e.substring(0,3);try{for(var ye=bu(i.THREE_DIGIT_DATA_LENGTH),Re=ye.next();!Re.done;Re=ye.next())if((K=Re.value)[0]===ae)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(3,K[2],e):i.processFixedAI(3,K[1],e)}catch($t){c={error:$t}}finally{try{Re&&!Re.done&&(l=ye.return)&&l.call(ye)}finally{if(c)throw c.error}}try{for(var Ve=bu(i.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),Ne=Ve.next();!Ne.done;Ne=Ve.next())if((K=Ne.value)[0]===ae)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(4,K[2],e):i.processFixedAI(4,K[1],e)}catch($t){g={error:$t}}finally{try{Ne&&!Ne.done&&(m=Ve.return)&&m.call(Ve)}finally{if(g)throw g.error}}if(e.length<4)throw new qe;var Ye=e.substring(0,4);try{for(var at=bu(i.FOUR_DIGIT_DATA_LENGTH),Ft=at.next();!Ft.done;Ft=at.next()){var K;if((K=Ft.value)[0]===Ye)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(4,K[2],e):i.processFixedAI(4,K[1],e)}}catch($t){y={error:$t}}finally{try{Ft&&!Ft.done&&(b=at.return)&&b.call(at)}finally{if(y)throw y.error}}throw new qe},i.processFixedAI=function(e,n,s){if(s.length<e)throw new qe;var c=s.substring(0,e);if(s.length<e+n)throw new qe;var l=s.substring(e,e+n),g=s.substring(e+n),m="("+c+")"+l,y=i.parseFieldsInGeneralPurpose(g);return null==y?m:m+y},i.processVariableAI=function(e,n,s){var l,c=s.substring(0,e),g=s.substring(e,l=s.length<e+n?s.length:e+n),m=s.substring(l),y="("+c+")"+g,b=i.parseFieldsInGeneralPurpose(m);return null==b?y:y+b},i.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",i.VARIABLE_LENGTH=[],20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",i.VARIABLE_LENGTH,20],["22",i.VARIABLE_LENGTH,29],["30",i.VARIABLE_LENGTH,8],["37",i.VARIABLE_LENGTH,8],["90",i.VARIABLE_LENGTH,30],["91",i.VARIABLE_LENGTH,30],["92",i.VARIABLE_LENGTH,30],["93",i.VARIABLE_LENGTH,30],["94",i.VARIABLE_LENGTH,30],["95",i.VARIABLE_LENGTH,30],["96",i.VARIABLE_LENGTH,30],["97",i.VARIABLE_LENGTH,3],["98",i.VARIABLE_LENGTH,30],["99",i.VARIABLE_LENGTH,30]],i.THREE_DIGIT_DATA_LENGTH=[["240",i.VARIABLE_LENGTH,30],["241",i.VARIABLE_LENGTH,30],["242",i.VARIABLE_LENGTH,6],["250",i.VARIABLE_LENGTH,30],["251",i.VARIABLE_LENGTH,30],["253",i.VARIABLE_LENGTH,17],["254",i.VARIABLE_LENGTH,20],["400",i.VARIABLE_LENGTH,30],["401",i.VARIABLE_LENGTH,30],["402",17],["403",i.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",i.VARIABLE_LENGTH,20],["421",i.VARIABLE_LENGTH,15],["422",3],["423",i.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],i.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",i.VARIABLE_LENGTH,15],["391",i.VARIABLE_LENGTH,18],["392",i.VARIABLE_LENGTH,15],["393",i.VARIABLE_LENGTH,18],["703",i.VARIABLE_LENGTH,30]],i.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",i.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",i.VARIABLE_LENGTH,20],["8003",i.VARIABLE_LENGTH,30],["8004",i.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",i.VARIABLE_LENGTH,30],["8008",i.VARIABLE_LENGTH,12],["8018",18],["8020",i.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",i.VARIABLE_LENGTH,70],["8200",i.VARIABLE_LENGTH,70]],i}(),Qc=function(){function i(e){this.buffer=new dn,this.information=e}return i.prototype.decodeAllCodes=function(e,n){for(var s=n,c=null;;){var l=this.decodeGeneralPurposeField(s,c),g=Tc.parseFieldsInGeneralPurpose(l.getNewString());if(null!=g&&e.append(g),c=l.isRemaining()?""+l.getRemainingValue():null,s===l.getNewPosition())break;s=l.getNewPosition()}return e.toString()},i.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},i.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return new Pn(this.information.getSize(),0===n?Pn.FNC1:n-1,Pn.FNC1)}var s=this.extractNumericValueFromBitArray(e,7);return new Pn(e+7,(s-8)/11,(s-8)%11)},i.prototype.extractNumericValueFromBitArray=function(e,n){return i.extractNumericValueFromBitArray(this.information,e,n)},i.extractNumericValueFromBitArray=function(e,n,s){for(var c=0,l=0;l<s;++l)e.get(n+l)&&(c|=1<<s-l-1);return c},i.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),null!=n&&this.buffer.append(n),this.current.setPosition(e);var s=this.parseBlocks();return null!=s&&s.isRemaining()?new Ns(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new Ns(this.current.getPosition(),this.buffer.toString())},i.prototype.parseBlocks=function(){var e,n;do{var s=this.current.getPosition();if(e=this.current.isAlpha()?(n=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(n=this.parseIsoIec646Block()).isFinished():(n=this.parseNumericBlock()).isFinished(),s===this.current.getPosition()&&!e)break}while(!e);return n.getDecodedInformation()},i.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return n=e.isSecondDigitFNC1()?new Ns(this.current.getPosition(),this.buffer.toString()):new Ns(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new nc(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return n=new Ns(this.current.getPosition(),this.buffer.toString()),new nc(!0,n);this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new nc(!1)},i.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Ns(this.current.getPosition(),this.buffer.toString());return new nc(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new nc(!1)},i.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Ns(this.current.getPosition(),this.buffer.toString());return new nc(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new nc(!1)},i.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<116)return!0;if(e+8>this.information.getSize())return!1;var c=this.extractNumericValueFromBitArray(e,8);return c>=232&&c<253},i.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(15===n)return new go(e+5,go.FNC1);if(n>=5&&n<15)return new go(e+5,"0"+(n-5));var l,s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<90)return new go(e+7,""+(s+1));if(s>=90&&s<116)return new go(e+7,""+(s+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new Yt}return new go(e+8,l)},i.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(e,6);return s>=16&&s<63},i.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(15===n)return new go(e+5,go.FNC1);if(n>=5&&n<15)return new go(e+5,"0"+(n-5));var c,s=this.extractNumericValueFromBitArray(e,6);if(s>=32&&s<58)return new go(e+6,""+(s+33));switch(s){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new gs("Decoding invalid alphanumeric value: "+s)}return new go(e+6,c)},i.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(2===n){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},i.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},i.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},i}(),wl=function(){function i(e){this.information=e,this.generalDecoder=new Qc(e)}return i.prototype.getInformation=function(){return this.information},i.prototype.getGeneralDecoder=function(){return this.generalDecoder},i}();var Po=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ks=function(i){function e(n){return i.call(this,n)||this}return Po(e,i),e.prototype.encodeCompressedGtin=function(n,s){n.append("(01)");var c=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,s,c)},e.prototype.encodeCompressedGtinWithoutAI=function(n,s,c){for(var l=0;l<4;++l){var g=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*l,10);g/100==0&&n.append("0"),g/10==0&&n.append("0"),n.append(g)}e.appendCheckDigit(n,c)},e.appendCheckDigit=function(n,s){for(var c=0,l=0;l<13;l++){var g=n.charAt(l+s).charCodeAt(0)-48;c+=1&l?g:3*g}10==(c=10-c%10)&&(c=0),n.append(c)},e.GTIN_SIZE=40,e}(wl);var Yc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ca=function(i){function e(n){return i.call(this,n)||this}return Yc(e,i),e.prototype.parseInformation=function(){var n=new dn;n.append("(01)");var s=n.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(c),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Ks);var xc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ud=function(i){function e(n){return i.call(this,n)||this}return xc(e,i),e.prototype.parseInformation=function(){var n=new dn;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(wl);var Zu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const jd=function(i){function e(n){return i.call(this,n)||this}return Zu(e,i),e.prototype.encodeCompressedWeight=function(n,s,c){var l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,c);this.addWeightCode(n,l);for(var g=this.checkWeight(l),m=1e5,y=0;y<5;++y)g/m==0&&n.append("0"),m/=10;n.append(g)},e}(Ks);var Al=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const bl=function(i){function e(n){return i.call(this,n)||this}return Al(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+jd.GTIN_SIZE+e.WEIGHT_SIZE)throw new qe;var n=new dn;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+jd.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(jd);var Gp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const $p=function(i){function e(n){return i.call(this,n)||this}return Gp(e,i),e.prototype.addWeightCode=function(n,s){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(bl);var zp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Pf=function(i){function e(n){return i.call(this,n)||this}return zp(e,i),e.prototype.addWeightCode=function(n,s){n.append(s<1e4?"(3202)":"(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(bl);var Hd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Oh=function(i){function e(n){return i.call(this,n)||this}return Hd(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ks.GTIN_SIZE)throw new qe;var n=new dn;this.encodeCompressedGtin(n,e.HEADER_SIZE);var s=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ks.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(s),n.append(")");var c=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ks.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(c.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Ks);var Ph=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const O=function(i){function e(n){return i.call(this,n)||this}return Ph(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ks.GTIN_SIZE)throw new qe;var n=new dn;this.encodeCompressedGtin(n,e.HEADER_SIZE);var s=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ks.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(s),n.append(")");var c=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ks.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);c/100==0&&n.append("0"),c/10==0&&n.append("0"),n.append(c);var l=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ks.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(l.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Ks);var E=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const k=function(i){function e(n,s,c){var l=i.call(this,n)||this;return l.dateCode=c,l.firstAIdigits=s,l}return E(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new qe;var n=new dn;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,s){var c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,e.DATE_SIZE);if(38400!==c){n.append("("),n.append(this.dateCode),n.append(")");var l=c%32,g=(c/=32)%12+1,m=c/=12;m/10==0&&n.append("0"),n.append(m),g/10==0&&n.append("0"),n.append(g),l/10==0&&n.append("0"),n.append(l)}},e.prototype.addWeightCode=function(n,s){n.append("("),n.append(this.firstAIdigits),n.append(s/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(jd),$e=function(){function i(e,n,s,c){this.leftchar=e,this.rightchar=n,this.finderpattern=s,this.maybeLast=c}return i.prototype.mayBeLast=function(){return this.maybeLast},i.prototype.getLeftChar=function(){return this.leftchar},i.prototype.getRightChar=function(){return this.rightchar},i.prototype.getFinderPattern=function(){return this.finderpattern},i.prototype.mustBeLast=function(){return null==this.rightchar},i.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},i.equals=function(e,n){return e instanceof i&&i.equalsOrNull(e.leftchar,n.leftchar)&&i.equalsOrNull(e.rightchar,n.rightchar)&&i.equalsOrNull(e.finderpattern,n.finderpattern)},i.equalsOrNull=function(e,n){return null===e?null===n:i.equals(e,n)},i.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},i}(),jt=function(){function i(e,n,s){this.pairs=e,this.rowNumber=n,this.wasReversed=s}return i.prototype.getPairs=function(){return this.pairs},i.prototype.getRowNumber=function(){return this.rowNumber},i.prototype.isReversed=function(){return this.wasReversed},i.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},i.prototype.toString=function(){return"{ "+this.pairs+" }"},i.prototype.equals=function(e,n){return e instanceof i&&this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed},i.prototype.checkEqualitity=function(e,n){var s;if(e&&n)return e.forEach(function(c,l){n.forEach(function(g){c.getLeftChar().getValue()===g.getLeftChar().getValue()&&c.getRightChar().getValue()===g.getRightChar().getValue()&&c.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(s=!0)})}),s},i}();var Cn=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),In=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const ys=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return Cn(e,i),e.prototype.decodeRow=function(n,s,c){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,s))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,s))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,s){for(var c=!1;!c;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,n))}catch(m){if(m instanceof qe){if(!this.pairs.length)throw new qe;c=!0}}if(this.checkChecksum())return this.pairs;var l;if(l=!!this.rows.length,this.storeRow(n,!1),l){var g=this.checkRowsBoolean(!1);if(null!=g||null!=(g=this.checkRowsBoolean(!0)))return g}throw new qe},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var s=null;try{s=this.checkRows(new Array,0)}catch(c){console.log(c)}return n&&(this.rows=this.rows.reverse()),s},e.prototype.checkRows=function(n,s){for(var c,l,g=s;g<this.rows.length;g++){var m=this.rows[g];this.pairs.length=0;try{for(var y=(c=void 0,In(n)),b=y.next();!b.done;b=y.next())this.pairs.push(b.value.getPairs())}catch(z){c={error:z}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(c)throw c.error}}if(this.pairs.push(m.getPairs()),e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var B=new Array(n);B.push(m);try{return this.checkRows(B,g+1)}catch(z){console.log(z)}}}throw new qe},e.isValidSequence=function(n){var s,c;try{for(var l=In(e.FINDER_PATTERN_SEQUENCES),g=l.next();!g.done;g=l.next()){var m=g.value;if(!(n.length>m.length)){for(var y=!0,b=0;b<n.length;b++)if(n[b].getFinderPattern().getValue()!==m[b]){y=!1;break}if(y)return!0}}}catch(P){s={error:P}}finally{try{g&&!g.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}return!1},e.prototype.storeRow=function(n,s){for(var c=0,l=!1,g=!1;c<this.rows.length;){var m=this.rows[c];if(m.getRowNumber()>n){g=m.isEquivalent(this.pairs);break}l=m.isEquivalent(this.pairs),c++}g||l||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new jt(this.pairs,n,s)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,s){var c,l,g,m,y,b;try{for(var P=In(s),B=P.next();!B.done;B=P.next()){var z=B.value;if(z.getPairs().length!==n.length)try{for(var ae=(g=void 0,In(z.getPairs())),ye=ae.next();!ye.done;ye=ae.next()){var Re=ye.value;try{for(var Ne=(y=void 0,In(n)),Ye=Ne.next();!Ye.done;Ye=Ne.next())if($e.equals(Re,Ye.value)){!0;break}}catch(Ft){y={error:Ft}}finally{try{Ye&&!Ye.done&&(b=Ne.return)&&b.call(Ne)}finally{if(y)throw y.error}}}}catch(Ft){g={error:Ft}}finally{try{ye&&!ye.done&&(m=ae.return)&&m.call(ae)}finally{if(g)throw g.error}}}}catch(Ft){c={error:Ft}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}},e.isPartialRow=function(n,s){var c,l,g,m,y,b;try{for(var P=In(s),B=P.next();!B.done;B=P.next()){var z=B.value,K=!0;try{for(var ae=(g=void 0,In(n)),ye=ae.next();!ye.done;ye=ae.next()){var Re=ye.value,Ve=!1;try{for(var Ne=(y=void 0,In(z.getPairs())),Ye=Ne.next();!Ye.done;Ye=Ne.next())if(Re.equals(Ye.value)){Ve=!0;break}}catch(Ft){y={error:Ft}}finally{try{Ye&&!Ye.done&&(b=Ne.return)&&b.call(Ne)}finally{if(y)throw y.error}}if(!Ve){K=!1;break}}}catch(Ft){g={error:Ft}}finally{try{ye&&!ye.done&&(m=ae.return)&&m.call(ae)}finally{if(g)throw g.error}}if(K)return!0}}catch(Ft){c={error:Ft}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var c=function te(i){try{if(i.get(1))return new Ca(i);if(!i.get(2))return new Ud(i);switch(Qc.extractNumericValueFromBitArray(i,1,4)){case 4:return new $p(i);case 5:return new Pf(i)}switch(Qc.extractNumericValueFromBitArray(i,1,5)){case 12:return new Oh(i);case 13:return new O(i)}switch(Qc.extractNumericValueFromBitArray(i,1,7)){case 56:return new k(i,"310","11");case 57:return new k(i,"320","11");case 58:return new k(i,"310","13");case 59:return new k(i,"320","13");case 60:return new k(i,"310","15");case 61:return new k(i,"320","15");case 62:return new k(i,"310","17");case 63:return new k(i,"320","17")}}catch(c){throw console.log(c),new gs("unknown decoder: "+i)}}(nr.buildBitArray(n)),l=c.parseInformation(),g=n[0].getFinderPattern().getResultPoints(),m=n[n.length-1].getFinderPattern().getResultPoints();return new ao(l,null,null,[g[0],g[1],m[0],m[1]],sn.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),s=n.getLeftChar(),c=n.getRightChar();if(null===c)return!1;for(var l=c.getChecksumPortion(),g=2,m=1;m<this.pairs.size();++m){var y=this.pairs.get(m);l+=y.getLeftChar().getChecksumPortion(),g++;var b=y.getRightChar();null!=b&&(l+=b.getChecksumPortion(),g++)}return 211*(g-4)+(l%=211)===s.getValue()},e.getNextSecondBar=function(n,s){var c;return n.get(s)?(c=n.getNextUnset(s),c=n.getNextSet(c)):(c=n.getNextSet(s),c=n.getNextUnset(c)),c},e.prototype.retrieveNextPair=function(n,s,c){var l=s.length%2==0;this.startFromEven&&(l=!l);var g,m=!0,y=-1;do{this.findNextPair(n,s,y),null===(g=this.parseFoundFinderPattern(n,c,l))?y=e.getNextSecondBar(n,this.startEnd[0]):m=!1}while(m);var P,b=this.decodeDataCharacter(n,g,l,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new qe;try{P=this.decodeDataCharacter(n,g,l,!1)}catch(B){P=null,console.log(B)}return new $e(b,P,g,!0)},e.prototype.isEmptyPair=function(n){return 0===n.length},e.prototype.findNextPair=function(n,s,c){var l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;var m,g=n.getSize();m=c>=0?c:this.isEmptyPair(s)?0:s[s.length-1].getFinderPattern().getStartEnd()[1];var b=s.length%2!=0;this.startFromEven&&(b=!b);for(var P=!1;m<g&&(P=!n.get(m));)m++;for(var B=0,z=m,K=m;K<g;K++)if(n.get(K)!==P)l[B]++;else{if(3===B){if(b&&e.reverseCounters(l),e.isFinderPattern(l))return this.startEnd[0]=z,void(this.startEnd[1]=K);b&&e.reverseCounters(l),z+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,B--}else B++;l[B]=1,P=!P}throw new qe},e.reverseCounters=function(n){for(var s=n.length,c=0;c<s/2;++c){var l=n[c];n[c]=n[s-c-1],n[s-c-1]=l}},e.prototype.parseFoundFinderPattern=function(n,s,c){var l,g,m;if(c){for(var y=this.startEnd[0]-1;y>=0&&!n.get(y);)y--;y++,l=this.startEnd[0]-y,g=y,m=this.startEnd[1]}else g=this.startEnd[0],l=(m=n.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var P,b=this.getDecodeFinderCounters();Ur.arraycopy(b,0,b,1,b.length-1),b[0]=l;try{P=this.parseFinderValue(b,e.FINDER_PATTERNS)}catch{return null}return new vs(P,[g,m],g,m,s)},e.prototype.decodeDataCharacter=function(n,s,c,l){for(var g=this.getDataCharacterCounters(),m=0;m<g.length;m++)g[m]=0;if(l)e.recordPatternInReverse(n,s.getStartEnd()[0],g);else{e.recordPattern(n,s.getStartEnd()[1],g);for(var y=0,b=g.length-1;y<b;y++,b--){var P=g[y];g[y]=g[b],g[b]=P}}var z=Ir.sum(new Int32Array(g))/17,K=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(z-K)/K>.3)throw new qe;var ae=this.getOddCounts(),ye=this.getEvenCounts(),Re=this.getOddRoundingErrors(),Ve=this.getEvenRoundingErrors();for(y=0;y<g.length;y++){var Ne=1*g[y]/z,Ye=Ne+.5;if(Ye<1){if(Ne<.3)throw new qe;Ye=1}else if(Ye>8){if(Ne>8.7)throw new qe;Ye=8}var at=y/2;1&y?(ye[at]=Ye,Ve[at]=Ne-Ye):(ae[at]=Ye,Re[at]=Ne-Ye)}this.adjustOddEvenCounts(17);var Ft=4*s.getValue()+(c?0:2)+(l?0:1)-1,$t=0,Zt=0;for(y=ae.length-1;y>=0;y--)e.isNotA1left(s,c,l)&&(Zt+=ae[y]*e.WEIGHTS[Ft][2*y]),$t+=ae[y];var rr=0;for(y=ye.length-1;y>=0;y--)e.isNotA1left(s,c,l)&&(rr+=ye[y]*e.WEIGHTS[Ft][2*y+1]);var ir=Zt+rr;if(1&$t||$t>13||$t<4)throw new qe;var ss=(13-$t)/2,fi=e.SYMBOL_WIDEST[ss],Ao=9-fi,uu=Pi.getRSSvalue(ae,fi,!0),_d=Pi.getRSSvalue(ye,Ao,!1);return new ms(uu*e.EVEN_TOTAL_SUBSET[ss]+_d+e.GSUM[ss],ir)},e.isNotA1left=function(n,s,c){return!(0===n.getValue()&&s&&c)},e.prototype.adjustOddEvenCounts=function(n){var s=Ir.sum(new Int32Array(this.getOddCounts())),c=Ir.sum(new Int32Array(this.getEvenCounts())),l=!1,g=!1;s>13?g=!0:s<4&&(l=!0);var m=!1,y=!1;c>13?y=!0:c<4&&(m=!0);var b=s+c-n,P=!(1&~s),B=!(1&c);if(1===b)if(P){if(B)throw new qe;g=!0}else{if(!B)throw new qe;y=!0}else if(-1===b)if(P){if(B)throw new qe;l=!0}else{if(!B)throw new qe;m=!0}else{if(0!==b)throw new qe;if(P){if(!B)throw new qe;s<c?(l=!0,y=!0):(g=!0,m=!0)}else if(B)throw new qe}if(l){if(g)throw new qe;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new qe;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A=0,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B=1,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C=2,e.FINDER_PAT_B,e.FINDER_PAT_D=3],[e.FINDER_PAT_A,e.FINDER_PAT_E=4,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F=5],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Rn);var Zc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Nh=function(i){function e(n,s,c){var l=i.call(this,n,s)||this;return l.count=0,l.finderPattern=c,l}return Zc(e,i),e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(ms);var Ha=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Yl=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Nr=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return Ha(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m,y,b=this.decodePair(s,!1,n,c);e.addOrTally(this.possibleLeftPairs,b),s.reverse();var P=this.decodePair(s,!0,n,c);e.addOrTally(this.possibleRightPairs,P),s.reverse();try{for(var B=Yl(this.possibleLeftPairs),z=B.next();!z.done;z=B.next()){var K=z.value;if(K.getCount()>1)try{for(var ae=(m=void 0,Yl(this.possibleRightPairs)),ye=ae.next();!ye.done;ye=ae.next()){var Re=ye.value;if(Re.getCount()>1&&e.checkChecksum(K,Re))return e.constructResult(K,Re)}}catch(Ve){m={error:Ve}}finally{try{ye&&!ye.done&&(y=ae.return)&&y.call(ae)}finally{if(m)throw m.error}}}}catch(Ve){l={error:Ve}}finally{try{z&&!z.done&&(g=B.return)&&g.call(B)}finally{if(l)throw l.error}}throw new qe},e.addOrTally=function(n,s){var c,l;if(null!=s){var g=!1;try{for(var m=Yl(n),y=m.next();!y.done;y=m.next()){var b=y.value;if(b.getValue()===s.getValue()){b.incrementCount(),g=!0;break}}}catch(P){c={error:P}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}g||n.push(s)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,s){for(var c=4537077*n.getValue()+s.getValue(),l=new String(c).toString(),g=new dn,m=13-l.length;m>0;m--)g.append("0");g.append(l);var y=0;for(m=0;m<13;m++){var b=g.charAt(m).charCodeAt(0)-48;y+=1&m?b:3*b}10==(y=10-y%10)&&(y=0),g.append(y.toString());var P=n.getFinderPattern().getResultPoints(),B=s.getFinderPattern().getResultPoints();return new ao(g.toString(),null,0,[P[0],P[1],B[0],B[1]],sn.RSS_14,(new Date).getTime())},e.checkChecksum=function(n,s){var c=(n.getChecksumPortion()+16*s.getChecksumPortion())%79,l=9*n.getFinderPattern().getValue()+s.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,c===l},e.prototype.decodePair=function(n,s,c,l){try{var g=this.findFinderPattern(n,s),m=this.parseFoundFinderPattern(n,c,s,g),y=null==l?null:l.get(Un.NEED_RESULT_POINT_CALLBACK);if(null!=y){var b=(g[0]+g[1])/2;s&&(b=n.getSize()-1-b),y.foundPossibleResultPoint(new hn(b,c))}var P=this.decodeDataCharacter(n,m,!0),B=this.decodeDataCharacter(n,m,!1);return new Nh(1597*P.getValue()+B.getValue(),P.getChecksumPortion()+4*B.getChecksumPortion(),m)}catch{return null}},e.prototype.decodeDataCharacter=function(n,s,c){for(var l=this.getDataCharacterCounters(),g=0;g<l.length;g++)l[g]=0;if(c)ar.recordPatternInReverse(n,s.getStartEnd()[0],l);else{ar.recordPattern(n,s.getStartEnd()[1]+1,l);for(var m=0,y=l.length-1;m<y;m++,y--){var b=l[m];l[m]=l[y],l[y]=b}}var P=c?16:15,B=Ir.sum(new Int32Array(l))/P,z=this.getOddCounts(),K=this.getEvenCounts(),ae=this.getOddRoundingErrors(),ye=this.getEvenRoundingErrors();for(m=0;m<l.length;m++){var Re=l[m]/B,Ve=Math.floor(Re+.5);Ve<1?Ve=1:Ve>8&&(Ve=8);var Ne=Math.floor(m/2);1&m?(K[Ne]=Ve,ye[Ne]=Re-Ve):(z[Ne]=Ve,ae[Ne]=Re-Ve)}this.adjustOddEvenCounts(c,P);var Ye=0,at=0;for(m=z.length-1;m>=0;m--)at*=9,at+=z[m],Ye+=z[m];var Ft=0,$t=0;for(m=K.length-1;m>=0;m--)Ft*=9,Ft+=K[m],$t+=K[m];var pn,rr,Zt=at+3*Ft;if(c){if(1&Ye||Ye>12||Ye<4)throw new qe;var ir=9-(rr=e.OUTSIDE_ODD_WIDEST[pn=(12-Ye)/2]),ss=Pi.getRSSvalue(z,rr,!1),fi=Pi.getRSSvalue(K,ir,!0);return new ms(ss*e.OUTSIDE_EVEN_TOTAL_SUBSET[pn]+fi+e.OUTSIDE_GSUM[pn],Zt)}if(1&$t||$t>10||$t<4)throw new qe;return ir=9-(rr=e.INSIDE_ODD_WIDEST[pn=(10-$t)/2]),ss=Pi.getRSSvalue(z,rr,!0),fi=Pi.getRSSvalue(K,ir,!1),new ms(fi*e.INSIDE_ODD_TOTAL_SUBSET[pn]+ss+e.INSIDE_GSUM[pn],Zt)},e.prototype.findFinderPattern=function(n,s){var c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var l=n.getSize(),g=!1,m=0;m<l&&s!==(g=!n.get(m));)m++;for(var y=0,b=m,P=m;P<l;P++)if(n.get(P)!==g)c[y]++;else{if(3===y){if(Rn.isFinderPattern(c))return[b,P];b+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,g=!g}throw new qe},e.prototype.parseFoundFinderPattern=function(n,s,c,l){for(var g=n.get(l[0]),m=l[0]-1;m>=0&&g!==n.get(m);)m--;m++;var y=l[0]-m,b=this.getDecodeFinderCounters(),P=new Int32Array(b.length);Ur.arraycopy(b,0,P,1,b.length-1),P[0]=y;var B=this.parseFinderValue(P,e.FINDER_PATTERNS),z=m,K=l[1];return c&&(z=n.getSize()-1-z,K=n.getSize()-1-K),new vs(B,[m,l[1]],z,K,s)},e.prototype.adjustOddEvenCounts=function(n,s){var c=Ir.sum(new Int32Array(this.getOddCounts())),l=Ir.sum(new Int32Array(this.getEvenCounts())),g=!1,m=!1,y=!1,b=!1;n?(c>12?m=!0:c<4&&(g=!0),l>12?b=!0:l<4&&(y=!0)):(c>11?m=!0:c<5&&(g=!0),l>10?b=!0:l<4&&(y=!0));var P=c+l-s,B=(1&c)==(n?1:0),z=!(1&~l);if(1===P)if(B){if(z)throw new qe;m=!0}else{if(!z)throw new qe;b=!0}else if(-1===P)if(B){if(z)throw new qe;g=!0}else{if(!z)throw new qe;y=!0}else{if(0!==P)throw new qe;if(B){if(!z)throw new qe;c<l?(g=!0,b=!0):(m=!0,y=!0)}else if(z)throw new qe}if(g){if(m)throw new qe;Rn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Rn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(b)throw new qe;Rn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&Rn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Rn);var xl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ji=function(i){function e(n){var s=i.call(this)||this;s.readers=[];var c=n?n.get(Un.POSSIBLE_FORMATS):null,l=n&&void 0!==n.get(Un.ASSUME_CODE_39_CHECK_DIGIT),g=n&&void 0!==n.get(Un.ENABLE_CODE_39_EXTENDED_MODE);return c&&((c.includes(sn.EAN_13)||c.includes(sn.UPC_A)||c.includes(sn.EAN_8)||c.includes(sn.UPC_E))&&s.readers.push(new Iu(n)),c.includes(sn.CODE_39)&&s.readers.push(new Eu(l,g)),c.includes(sn.CODE_93)&&s.readers.push(new bf),c.includes(sn.CODE_128)&&s.readers.push(new Ps),c.includes(sn.ITF)&&s.readers.push(new qu),c.includes(sn.CODABAR)&&s.readers.push(new Vd),c.includes(sn.RSS_14)&&s.readers.push(new Nr),c.includes(sn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),s.readers.push(new ys))),0===s.readers.length&&(s.readers.push(new Iu(n)),s.readers.push(new Eu),s.readers.push(new bf),s.readers.push(new Iu(n)),s.readers.push(new Ps),s.readers.push(new qu),s.readers.push(new Nr)),s}return xl(e,i),e.prototype.decodeRow=function(n,s,c){for(var l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(n,s,c)}catch{}throw new qe},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(ar);var Zl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),oc=(function(i){Zl(function e(n,s){return void 0===n&&(n=500),i.call(this,new Ji(s),n,s)||this},i)}(oa),function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}),gr=function(){function i(e,n,s){this.ecCodewords=e,this.ecBlocks=[n],s&&this.ecBlocks.push(s)}return i.prototype.getECCodewords=function(){return this.ecCodewords},i.prototype.getECBlocks=function(){return this.ecBlocks},i}(),ii=function(){function i(e,n){this.count=e,this.dataCodewords=n}return i.prototype.getCount=function(){return this.count},i.prototype.getDataCodewords=function(){return this.dataCodewords},i}();const Sl=function(){function i(e,n,s,c,l,g){var m,y;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=s,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=l,this.ecBlocks=g;var b=0,P=g.getECCodewords(),B=g.getECBlocks();try{for(var z=oc(B),K=z.next();!K.done;K=z.next()){var ae=K.value;b+=ae.getCount()*(ae.getDataCodewords()+P)}}catch(ye){m={error:ye}}finally{try{K&&!K.done&&(y=z.return)&&y.call(z)}finally{if(m)throw m.error}}this.totalCodewords=b}return i.prototype.getVersionNumber=function(){return this.versionNumber},i.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},i.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},i.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},i.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},i.prototype.getTotalCodewords=function(){return this.totalCodewords},i.prototype.getECBlocks=function(){return this.ecBlocks},i.getVersionForDimensions=function(e,n){var s,c;if(1&e||1&n)throw new Yt;try{for(var l=oc(i.VERSIONS),g=l.next();!g.done;g=l.next()){var m=g.value;if(m.symbolSizeRows===e&&m.symbolSizeColumns===n)return m}}catch(y){s={error:y}}finally{try{g&&!g.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}throw new Yt},i.prototype.toString=function(){return""+this.versionNumber},i.buildVersions=function(){return[new i(1,10,10,8,8,new gr(5,new ii(1,3))),new i(2,12,12,10,10,new gr(7,new ii(1,5))),new i(3,14,14,12,12,new gr(10,new ii(1,8))),new i(4,16,16,14,14,new gr(12,new ii(1,12))),new i(5,18,18,16,16,new gr(14,new ii(1,18))),new i(6,20,20,18,18,new gr(18,new ii(1,22))),new i(7,22,22,20,20,new gr(20,new ii(1,30))),new i(8,24,24,22,22,new gr(24,new ii(1,36))),new i(9,26,26,24,24,new gr(28,new ii(1,44))),new i(10,32,32,14,14,new gr(36,new ii(1,62))),new i(11,36,36,16,16,new gr(42,new ii(1,86))),new i(12,40,40,18,18,new gr(48,new ii(1,114))),new i(13,44,44,20,20,new gr(56,new ii(1,144))),new i(14,48,48,22,22,new gr(68,new ii(1,174))),new i(15,52,52,24,24,new gr(42,new ii(2,102))),new i(16,64,64,14,14,new gr(56,new ii(2,140))),new i(17,72,72,16,16,new gr(36,new ii(4,92))),new i(18,80,80,18,18,new gr(48,new ii(4,114))),new i(19,88,88,20,20,new gr(56,new ii(4,144))),new i(20,96,96,22,22,new gr(68,new ii(4,174))),new i(21,104,104,24,24,new gr(56,new ii(6,136))),new i(22,120,120,18,18,new gr(68,new ii(6,175))),new i(23,132,132,20,20,new gr(62,new ii(8,163))),new i(24,144,144,22,22,new gr(62,new ii(8,156),new ii(2,155))),new i(25,8,18,6,16,new gr(7,new ii(1,5))),new i(26,8,32,6,14,new gr(11,new ii(1,10))),new i(27,12,26,10,24,new gr(14,new ii(1,16))),new i(28,12,36,10,16,new gr(18,new ii(1,22))),new i(29,16,36,14,16,new gr(24,new ii(1,32))),new i(30,16,48,14,22,new gr(28,new ii(1,49)))]},i.VERSIONS=i.buildVersions(),i}(),Tm=function(){function i(e){var n=e.getHeight();if(n<8||n>144||1&n)throw new Yt;this.version=i.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new tr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return i.prototype.getVersion=function(){return this.version},i.readVersion=function(e){var n=e.getHeight(),s=e.getWidth();return Sl.getVersionForDimensions(n,s)},i.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,s=4,c=0,l=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth(),m=!1,y=!1,b=!1,P=!1;do{if(s!==l||0!==c||m)if(s===l-2&&0===c&&3&g&&!y)e[n++]=255&this.readCorner2(l,g),s-=2,c+=2,y=!0;else if(s!==l+4||2!==c||7&g||b)if(s!==l-2||0!==c||4!=(7&g)||P){do{s<l&&c>=0&&!this.readMappingMatrix.get(c,s)&&(e[n++]=255&this.readUtah(s,c,l,g)),s-=2,c+=2}while(s>=0&&c<g);s+=1,c+=3;do{s>=0&&c<g&&!this.readMappingMatrix.get(c,s)&&(e[n++]=255&this.readUtah(s,c,l,g)),s+=2,c-=2}while(s<l&&c>=0);s+=3,c+=1}else e[n++]=255&this.readCorner4(l,g),s-=2,c+=2,P=!0;else e[n++]=255&this.readCorner3(l,g),s-=2,c+=2,b=!0;else e[n++]=255&this.readCorner1(l,g),s-=2,c+=2,m=!0}while(s<l||c<g);if(n!==this.version.getTotalCodewords())throw new Yt;return e},i.prototype.readModule=function(e,n,s,c){return e<0&&(e+=s,n+=4-(s+4&7)),n<0&&(n+=c,e+=4-(c+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},i.prototype.readUtah=function(e,n,s,c){var l=0;return this.readModule(e-2,n-2,s,c)&&(l|=1),l<<=1,this.readModule(e-2,n-1,s,c)&&(l|=1),l<<=1,this.readModule(e-1,n-2,s,c)&&(l|=1),l<<=1,this.readModule(e-1,n-1,s,c)&&(l|=1),l<<=1,this.readModule(e-1,n,s,c)&&(l|=1),l<<=1,this.readModule(e,n-2,s,c)&&(l|=1),l<<=1,this.readModule(e,n-1,s,c)&&(l|=1),l<<=1,this.readModule(e,n,s,c)&&(l|=1),l},i.prototype.readCorner1=function(e,n){var s=0;return this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,1,e,n)&&(s|=1),s<<=1,this.readModule(e-1,2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(2,n-1,e,n)&&(s|=1),s<<=1,this.readModule(3,n-1,e,n)&&(s|=1),s},i.prototype.readCorner2=function(e,n){var s=0;return this.readModule(e-3,0,e,n)&&(s|=1),s<<=1,this.readModule(e-2,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(0,n-4,e,n)&&(s|=1),s<<=1,this.readModule(0,n-3,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s},i.prototype.readCorner3=function(e,n){var s=0;return this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(0,n-3,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-3,e,n)&&(s|=1),s<<=1,this.readModule(1,n-2,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s},i.prototype.readCorner4=function(e,n){var s=0;return this.readModule(e-3,0,e,n)&&(s|=1),s<<=1,this.readModule(e-2,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(2,n-1,e,n)&&(s|=1),s<<=1,this.readModule(3,n-1,e,n)&&(s|=1),s},i.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new ln("Dimension of bitMatrix must match the version size");for(var c=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),g=n/c|0,m=s/l|0,P=new tr(m*l,g*c),B=0;B<g;++B)for(var z=B*c,K=0;K<m;++K)for(var ae=K*l,ye=0;ye<c;++ye)for(var Re=B*(c+2)+1+ye,Ve=z+ye,Ne=0;Ne<l;++Ne)e.get(K*(l+2)+1+Ne,Re)&&P.set(ae+Ne,Ve);return P},i}();var kh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Jl=function(){function i(e,n){this.numDataCodewords=e,this.codewords=n}return i.getDataBlocks=function(e,n){var s,c,l,g,m=n.getECBlocks(),y=0,b=m.getECBlocks();try{for(var P=kh(b),B=P.next();!B.done;B=P.next())y+=(z=B.value).getCount()}catch(uu){s={error:uu}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}var K=new Array(y),ae=0;try{for(var ye=kh(b),Re=ye.next();!Re.done;Re=ye.next())for(var z=Re.value,Ve=0;Ve<z.getCount();Ve++){var Ne=z.getDataCodewords(),Ye=m.getECCodewords()+Ne;K[ae++]=new i(Ne,new Uint8Array(Ye))}}catch(uu){l={error:uu}}finally{try{Re&&!Re.done&&(g=ye.return)&&g.call(ye)}finally{if(l)throw l.error}}var Ft=K[0].codewords.length-m.getECCodewords(),$t=Ft-1,Zt=0;for(Ve=0;Ve<$t;Ve++)for(var pn=0;pn<ae;pn++)K[pn].codewords[Ve]=e[Zt++];var rr=24===n.getVersionNumber(),ir=rr?8:ae;for(pn=0;pn<ir;pn++)K[pn].codewords[Ft-1]=e[Zt++];var ss=K[0].codewords.length;for(Ve=Ft;Ve<ss;Ve++)for(pn=0;pn<ae;pn++){var fi=rr?(pn+8)%ae:pn;K[fi].codewords[rr&&fi>7?Ve-1:Ve]=e[Zt++]}if(Zt!==e.length)throw new ln;return K},i.prototype.getNumDataCodewords=function(){return this.numDataCodewords},i.prototype.getCodewords=function(){return this.codewords},i}(),ed=function(){function i(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return i.prototype.getBitOffset=function(){return this.bitOffset},i.prototype.getByteOffset=function(){return this.byteOffset},i.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new ln(""+e);var n=0,s=this.bitOffset,c=this.byteOffset,l=this.bytes;if(s>0){var g=8-s,m=e<g?e:g;n=(l[c]&255>>8-m<<(y=g-m))>>y,e-=m,8===(s+=m)&&(s=0,c++)}if(e>0){for(;e>=8;)n=n<<8|255&l[c],c++,e-=8;var y;e>0&&(n=n<<e|(l[c]&255>>(y=8-e)<<y)>>y,s+=e)}return this.bitOffset=s,this.byteOffset=c,n},i.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},i}();var Ko=function(i){return i[i.PAD_ENCODE=0]="PAD_ENCODE",i[i.ASCII_ENCODE=1]="ASCII_ENCODE",i[i.C40_ENCODE=2]="C40_ENCODE",i[i.TEXT_ENCODE=3]="TEXT_ENCODE",i[i.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",i[i.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",i[i.BASE256_ENCODE=6]="BASE256_ENCODE",i}(Ko||{});const Tu=function(){function i(){}return i.decode=function(e){var n=new ed(e),s=new dn,c=new dn,l=new Array,g=Ko.ASCII_ENCODE;do{if(g===Ko.ASCII_ENCODE)g=this.decodeAsciiSegment(n,s,c);else{switch(g){case Ko.C40_ENCODE:this.decodeC40Segment(n,s);break;case Ko.TEXT_ENCODE:this.decodeTextSegment(n,s);break;case Ko.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,s);break;case Ko.EDIFACT_ENCODE:this.decodeEdifactSegment(n,s);break;case Ko.BASE256_ENCODE:this.decodeBase256Segment(n,s,l);break;default:throw new Yt}g=Ko.ASCII_ENCODE}}while(g!==Ko.PAD_ENCODE&&n.available()>0);return c.length()>0&&s.append(c.toString()),new wc(e,s.toString(),0===l.length?null:l,null)},i.decodeAsciiSegment=function(e,n,s){var c=!1;do{var l=e.readBits(8);if(0===l)throw new Yt;if(l<=128)return c&&(l+=128),n.append(String.fromCharCode(l-1)),Ko.ASCII_ENCODE;if(129===l)return Ko.PAD_ENCODE;if(l<=229){var g=l-130;g<10&&n.append("0"),n.append(""+g)}else switch(l){case 230:return Ko.C40_ENCODE;case 231:return Ko.BASE256_ENCODE;case 232:n.append("\x1d");break;case 233:case 234:case 241:break;case 235:c=!0;break;case 236:n.append("[)>\x1e05\x1d"),s.insert(0,"\x1e\x04");break;case 237:n.append("[)>\x1e06\x1d"),s.insert(0,"\x1e\x04");break;case 238:return Ko.ANSIX12_ENCODE;case 239:return Ko.TEXT_ENCODE;case 240:return Ko.EDIFACT_ENCODE;default:if(254!==l||0!==e.available())throw new Yt}}while(e.available()>0);return Ko.ASCII_ENCODE},i.decodeC40Segment=function(e,n){var s=!1,c=[],l=0;do{if(8===e.available())return;var g=e.readBits(8);if(254===g)return;this.parseTwoBytes(g,e.readBits(8),c);for(var m=0;m<3;m++){var y=c[m];switch(l){case 0:if(y<3)l=y+1;else{if(!(y<this.C40_BASIC_SET_CHARS.length))throw new Yt;var b=this.C40_BASIC_SET_CHARS[y];s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b)}break;case 1:s?(n.append(String.fromCharCode(y+128)),s=!1):n.append(String.fromCharCode(y)),l=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length)b=this.C40_SHIFT2_SET_CHARS[y],s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b);else switch(y){case 27:n.append("\x1d");break;case 30:s=!0;break;default:throw new Yt}l=0;break;case 3:s?(n.append(String.fromCharCode(y+224)),s=!1):n.append(String.fromCharCode(y+96)),l=0;break;default:throw new Yt}}}while(e.available()>0)},i.decodeTextSegment=function(e,n){var s=!1,c=[],l=0;do{if(8===e.available())return;var g=e.readBits(8);if(254===g)return;this.parseTwoBytes(g,e.readBits(8),c);for(var m=0;m<3;m++){var y=c[m];switch(l){case 0:if(y<3)l=y+1;else{if(!(y<this.TEXT_BASIC_SET_CHARS.length))throw new Yt;var b=this.TEXT_BASIC_SET_CHARS[y];s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b)}break;case 1:s?(n.append(String.fromCharCode(y+128)),s=!1):n.append(String.fromCharCode(y)),l=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length)b=this.TEXT_SHIFT2_SET_CHARS[y],s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b);else switch(y){case 27:n.append("\x1d");break;case 30:s=!0;break;default:throw new Yt}l=0;break;case 3:if(!(y<this.TEXT_SHIFT3_SET_CHARS.length))throw new Yt;b=this.TEXT_SHIFT3_SET_CHARS[y],s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b),l=0;break;default:throw new Yt}}}while(e.available()>0)},i.decodeAnsiX12Segment=function(e,n){var s=[];do{if(8===e.available())return;var c=e.readBits(8);if(254===c)return;this.parseTwoBytes(c,e.readBits(8),s);for(var l=0;l<3;l++){var g=s[l];switch(g){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(g<14)n.append(String.fromCharCode(g+44));else{if(!(g<40))throw new Yt;n.append(String.fromCharCode(g+51))}}}}while(e.available()>0)},i.parseTwoBytes=function(e,n,s){var c=(e<<8)+n-1,l=Math.floor(c/1600);s[0]=l,c-=1600*l,l=Math.floor(c/40),s[1]=l,s[2]=c-40*l},i.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var s=0;s<4;s++){var c=e.readBits(6);if(31===c){var l=8-e.getBitOffset();return void(8!==l&&e.readBits(l))}32&c||(c|=64),n.append(String.fromCharCode(c))}}while(e.available()>0)},i.decodeBase256Segment=function(e,n,s){var g,c=1+e.getByteOffset(),l=this.unrandomize255State(e.readBits(8),c++);if((g=0===l?e.available()/8|0:l<250?l:250*(l-249)+this.unrandomize255State(e.readBits(8),c++))<0)throw new Yt;for(var m=new Uint8Array(g),y=0;y<g;y++){if(e.available()<8)throw new Yt;m[y]=this.unrandomize255State(e.readBits(8),c++)}s.push(m);try{n.append(Ce.decode(m,gt.ISO88591))}catch(b){throw new gs("Platform does not support required encoding: "+b.message)}},i.unrandomize255State=function(e,n){var c=e-(149*n%255+1);return c>=0?c:c+256},i.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],i.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i.TEXT_SHIFT2_SET_CHARS=i.C40_SHIFT2_SET_CHARS,i.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7f"],i}(),Dl=function(){function i(){this.rsDecoder=new La(pi.DATA_MATRIX_FIELD_256)}return i.prototype.decode=function(e){var n,s,c=new Tm(e),l=c.getVersion(),g=c.readCodewords(),m=Jl.getDataBlocks(g,l),y=0;try{for(var b=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(m),P=b.next();!P.done;P=b.next())y+=P.value.getNumDataCodewords()}catch(Ye){n={error:Ye}}finally{try{P&&!P.done&&(s=b.return)&&s.call(b)}finally{if(n)throw n.error}}for(var z=new Uint8Array(y),K=m.length,ae=0;ae<K;ae++){var ye=m[ae],Re=ye.getCodewords(),Ve=ye.getNumDataCodewords();this.correctErrors(Re,Ve);for(var Ne=0;Ne<Ve;Ne++)z[Ne*K+ae]=Re[Ne]}return Tu.decode(z)},i.prototype.correctErrors=function(e,n){var s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-n)}catch{throw new ui}for(var c=0;c<n;c++)e[c]=s[c]},i}(),t1=function(){function i(e){this.image=e,this.rectangleDetector=new Nd(this.image)}return i.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new qe;var s=(n=this.shiftToModuleCenter(n))[0],c=n[1],l=n[2],g=n[3],m=this.transitionsBetween(s,g)+1,y=this.transitionsBetween(l,g)+1;!(1&~m)&&(m+=1),!(1&~y)&&(y+=1),4*m<7*y&&4*y<7*m&&(m=y=Math.max(m,y));var b=i.sampleGrid(this.image,s,c,l,g,m,y);return new pl(b,[s,c,l,g])},i.shiftPoint=function(e,n,s){var c=(n.getX()-e.getX())/(s+1),l=(n.getY()-e.getY())/(s+1);return new hn(e.getX()+c,e.getY()+l)},i.moveAway=function(e,n,s){var c=e.getX(),l=e.getY();return c<n?c-=1:c+=1,l<s?l-=1:l+=1,new hn(c,l)},i.prototype.detectSolid1=function(e){var n=e[0],s=e[1],c=e[3],l=e[2],g=this.transitionsBetween(n,s),m=this.transitionsBetween(s,c),y=this.transitionsBetween(c,l),b=this.transitionsBetween(l,n),P=g,B=[l,n,s,c];return P>m&&(P=m,B[0]=n,B[1]=s,B[2]=c,B[3]=l),P>y&&(P=y,B[0]=s,B[1]=c,B[2]=l,B[3]=n),P>b&&(B[0]=c,B[1]=l,B[2]=n,B[3]=s),B},i.prototype.detectSolid2=function(e){var n=e[0],s=e[1],c=e[2],l=e[3],g=this.transitionsBetween(n,l),m=i.shiftPoint(s,c,4*(g+1)),y=i.shiftPoint(c,s,4*(g+1));return this.transitionsBetween(m,n)<this.transitionsBetween(y,l)?(e[0]=n,e[1]=s,e[2]=c,e[3]=l):(e[0]=s,e[1]=c,e[2]=l,e[3]=n),e},i.prototype.correctTopRight=function(e){var n=e[0],s=e[1],c=e[2],l=e[3],g=this.transitionsBetween(n,l),m=this.transitionsBetween(s,l),y=i.shiftPoint(n,s,4*(m+1)),b=i.shiftPoint(c,s,4*(g+1));g=this.transitionsBetween(y,l),m=this.transitionsBetween(b,l);var P=new hn(l.getX()+(c.getX()-s.getX())/(g+1),l.getY()+(c.getY()-s.getY())/(g+1)),B=new hn(l.getX()+(n.getX()-s.getX())/(m+1),l.getY()+(n.getY()-s.getY())/(m+1));return this.isValid(P)?this.isValid(B)?this.transitionsBetween(y,P)+this.transitionsBetween(b,P)>this.transitionsBetween(y,B)+this.transitionsBetween(b,B)?P:B:P:this.isValid(B)?B:null},i.prototype.shiftToModuleCenter=function(e){var n=e[0],s=e[1],c=e[2],l=e[3],g=this.transitionsBetween(n,l)+1,m=this.transitionsBetween(c,l)+1,y=i.shiftPoint(n,s,4*m),b=i.shiftPoint(c,s,4*g);!(1&~(g=this.transitionsBetween(y,l)+1))&&(g+=1),!(1&~(m=this.transitionsBetween(b,l)+1))&&(m+=1);var z,K,P=(n.getX()+s.getX()+c.getX()+l.getX())/4,B=(n.getY()+s.getY()+c.getY()+l.getY())/4;return n=i.moveAway(n,P,B),s=i.moveAway(s,P,B),c=i.moveAway(c,P,B),l=i.moveAway(l,P,B),y=i.shiftPoint(n,s,4*m),y=i.shiftPoint(y,l,4*g),z=i.shiftPoint(s,n,4*m),z=i.shiftPoint(z,c,4*g),b=i.shiftPoint(c,l,4*m),b=i.shiftPoint(b,s,4*g),K=i.shiftPoint(l,c,4*m),[y,z,b,K=i.shiftPoint(K,n,4*g)]},i.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},i.sampleGrid=function(e,n,s,c,l,g,m){return Q.getInstance().sampleGrid(e,g,m,.5,.5,g-.5,.5,g-.5,m-.5,.5,m-.5,n.getX(),n.getY(),l.getX(),l.getY(),c.getX(),c.getY(),s.getX(),s.getY())},i.prototype.transitionsBetween=function(e,n){var s=Math.trunc(e.getX()),c=Math.trunc(e.getY()),l=Math.trunc(n.getX()),g=Math.trunc(n.getY()),m=Math.abs(g-c)>Math.abs(l-s);if(m){var y=s;s=c,c=y,y=l,l=g,g=y}for(var b=Math.abs(l-s),P=Math.abs(g-c),B=-b/2,z=c<g?1:-1,K=s<l?1:-1,ae=0,ye=this.image.get(m?c:s,m?s:c),Re=s,Ve=c;Re!==l;Re+=K){var Ne=this.image.get(m?Ve:Re,m?Re:Ve);if(Ne!==ye&&(ae++,ye=Ne),(B+=P)>0){if(Ve===g)break;Ve+=z,B-=b}}return ae},i}(),Vf=function(){function i(){this.decoder=new Dl}return i.prototype.decode=function(e,n){var s,c;if(void 0===n&&(n=null),null!=n&&n.has(Un.PURE_BARCODE)){var l=i.extractPureBits(e.getBlackMatrix());s=this.decoder.decode(l),c=i.NO_POINTS}else{var g=new t1(e.getBlackMatrix()).detect();s=this.decoder.decode(g.getBits()),c=g.getPoints()}var m=s.getRawBytes(),y=new ao(s.getText(),m,8*m.length,c,sn.DATA_MATRIX,Ur.currentTimeMillis()),b=s.getByteSegments();null!=b&&y.putMetadata(Yi.BYTE_SEGMENTS,b);var P=s.getECLevel();return null!=P&&y.putMetadata(Yi.ERROR_CORRECTION_LEVEL,P),y},i.prototype.reset=function(){},i.extractPureBits=function(e){var n=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(null==n||null==s)throw new qe;var c=this.moduleSize(n,e),l=n[1],m=n[0],b=(s[0]-m+1)/c,P=(s[1]-l+1)/c;if(b<=0||P<=0)throw new qe;var B=c/2;l+=B,m+=B;for(var z=new tr(b,P),K=0;K<P;K++)for(var ae=l+K*c,ye=0;ye<b;ye++)e.get(m+ye*c,ae)&&z.set(ye,K);return z},i.moduleSize=function(e,n){for(var s=n.getWidth(),c=e[0],l=e[1];c<s&&n.get(c,l);)c++;if(c===s)throw new qe;var g=c-e[0];if(0===g)throw new qe;return g},i.NO_POINTS=[],i}();var Sm=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ac=(function(i){Sm(function e(n){return void 0===n&&(n=500),i.call(this,new Vf,n)||this},i)}(oa),function(i){return i[i.L=0]="L",i[i.M=1]="M",i[i.Q=2]="Q",i[i.H=3]="H",i}(ac||{}));const eu=function(){function i(e,n,s){this.value=e,this.stringValue=n,this.bits=s,i.FOR_BITS.set(s,this),i.FOR_VALUE.set(e,this)}return i.prototype.getValue=function(){return this.value},i.prototype.getBits=function(){return this.bits},i.fromString=function(e){switch(e){case"L":return i.L;case"M":return i.M;case"Q":return i.Q;case"H":return i.H;default:throw new Zr(e+"not available")}},i.prototype.toString=function(){return this.stringValue},i.prototype.equals=function(e){return e instanceof i&&this.value===e.value},i.forBits=function(e){if(e<0||e>=i.FOR_BITS.size)throw new ln;return i.FOR_BITS.get(e)},i.FOR_BITS=new Map,i.FOR_VALUE=new Map,i.L=new i(ac.L,"L",1),i.M=new i(ac.M,"M",0),i.Q=new i(ac.Q,"Q",3),i.H=new i(ac.H,"H",2),i}(),Dm=function(){function i(e){this.errorCorrectionLevel=eu.forBits(e>>3&3),this.dataMask=7&e}return i.numBitsDiffering=function(e,n){return ur.bitCount(e^n)},i.decodeFormatInformation=function(e,n){var s=i.doDecodeFormatInformation(e,n);return null!==s?s:i.doDecodeFormatInformation(e^i.FORMAT_INFO_MASK_QR,n^i.FORMAT_INFO_MASK_QR)},i.doDecodeFormatInformation=function(e,n){var s,c,l=Number.MAX_SAFE_INTEGER,g=0;try{for(var m=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i.FORMAT_INFO_DECODE_LOOKUP),y=m.next();!y.done;y=m.next()){var b=y.value,P=b[0];if(P===e||P===n)return new i(b[1]);var B=i.numBitsDiffering(e,P);B<l&&(g=b[1],l=B),e!==n&&(B=i.numBitsDiffering(n,P))<l&&(g=b[1],l=B)}}catch(z){s={error:z}}finally{try{y&&!y.done&&(c=m.return)&&c.call(m)}finally{if(s)throw s.error}}return l<=3?new i(g):null},i.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},i.prototype.getDataMask=function(){return this.dataMask},i.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},i.prototype.equals=function(e){return e instanceof i&&(this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask)},i.FORMAT_INFO_MASK_QR=21522,i.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],i}(),ft=function(){function i(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return i.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},i.prototype.getNumBlocks=function(){var e,n,s=0,c=this.ecBlocks;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),g=l.next();!g.done;g=l.next())s+=g.value.getCount()}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s},i.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},i.prototype.getECBlocks=function(){return this.ecBlocks},i}(),me=function(){function i(e,n){this.count=e,this.dataCodewords=n}return i.prototype.getCount=function(){return this.count},i.prototype.getDataCodewords=function(){return this.dataCodewords},i}(),Fs=function(){function i(e,n){for(var s,c,l=[],g=2;g<arguments.length;g++)l[g-2]=arguments[g];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=l;var m=0,y=l[0].getECCodewordsPerBlock(),b=l[0].getECBlocks();try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(b),B=P.next();!B.done;B=P.next()){var z=B.value;m+=z.getCount()*(z.getDataCodewords()+y)}}catch(K){s={error:K}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}this.totalCodewords=m}return i.prototype.getVersionNumber=function(){return this.versionNumber},i.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},i.prototype.getTotalCodewords=function(){return this.totalCodewords},i.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},i.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},i.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw new Yt;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Yt}},i.getVersionForNumber=function(e){if(e<1||e>40)throw new ln;return i.VERSIONS[e-1]},i.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,s=0,c=0;c<i.VERSION_DECODE_INFO.length;c++){var l=i.VERSION_DECODE_INFO[c];if(l===e)return i.getVersionForNumber(c+7);var g=Dm.numBitsDiffering(e,l);g<n&&(s=c+7,n=g)}return n<=3?i.getVersionForNumber(s):null},i.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new tr(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var s=this.alignmentPatternCenters.length,c=0;c<s;c++)for(var l=this.alignmentPatternCenters[c]-2,g=0;g<s;g++)0===c&&(0===g||g===s-1)||c===s-1&&0===g||n.setRegion(this.alignmentPatternCenters[g]-2,l,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},i.prototype.toString=function(){return""+this.versionNumber},i.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),i.VERSIONS=[new i(1,new Int32Array(0),new ft(7,new me(1,19)),new ft(10,new me(1,16)),new ft(13,new me(1,13)),new ft(17,new me(1,9))),new i(2,Int32Array.from([6,18]),new ft(10,new me(1,34)),new ft(16,new me(1,28)),new ft(22,new me(1,22)),new ft(28,new me(1,16))),new i(3,Int32Array.from([6,22]),new ft(15,new me(1,55)),new ft(26,new me(1,44)),new ft(18,new me(2,17)),new ft(22,new me(2,13))),new i(4,Int32Array.from([6,26]),new ft(20,new me(1,80)),new ft(18,new me(2,32)),new ft(26,new me(2,24)),new ft(16,new me(4,9))),new i(5,Int32Array.from([6,30]),new ft(26,new me(1,108)),new ft(24,new me(2,43)),new ft(18,new me(2,15),new me(2,16)),new ft(22,new me(2,11),new me(2,12))),new i(6,Int32Array.from([6,34]),new ft(18,new me(2,68)),new ft(16,new me(4,27)),new ft(24,new me(4,19)),new ft(28,new me(4,15))),new i(7,Int32Array.from([6,22,38]),new ft(20,new me(2,78)),new ft(18,new me(4,31)),new ft(18,new me(2,14),new me(4,15)),new ft(26,new me(4,13),new me(1,14))),new i(8,Int32Array.from([6,24,42]),new ft(24,new me(2,97)),new ft(22,new me(2,38),new me(2,39)),new ft(22,new me(4,18),new me(2,19)),new ft(26,new me(4,14),new me(2,15))),new i(9,Int32Array.from([6,26,46]),new ft(30,new me(2,116)),new ft(22,new me(3,36),new me(2,37)),new ft(20,new me(4,16),new me(4,17)),new ft(24,new me(4,12),new me(4,13))),new i(10,Int32Array.from([6,28,50]),new ft(18,new me(2,68),new me(2,69)),new ft(26,new me(4,43),new me(1,44)),new ft(24,new me(6,19),new me(2,20)),new ft(28,new me(6,15),new me(2,16))),new i(11,Int32Array.from([6,30,54]),new ft(20,new me(4,81)),new ft(30,new me(1,50),new me(4,51)),new ft(28,new me(4,22),new me(4,23)),new ft(24,new me(3,12),new me(8,13))),new i(12,Int32Array.from([6,32,58]),new ft(24,new me(2,92),new me(2,93)),new ft(22,new me(6,36),new me(2,37)),new ft(26,new me(4,20),new me(6,21)),new ft(28,new me(7,14),new me(4,15))),new i(13,Int32Array.from([6,34,62]),new ft(26,new me(4,107)),new ft(22,new me(8,37),new me(1,38)),new ft(24,new me(8,20),new me(4,21)),new ft(22,new me(12,11),new me(4,12))),new i(14,Int32Array.from([6,26,46,66]),new ft(30,new me(3,115),new me(1,116)),new ft(24,new me(4,40),new me(5,41)),new ft(20,new me(11,16),new me(5,17)),new ft(24,new me(11,12),new me(5,13))),new i(15,Int32Array.from([6,26,48,70]),new ft(22,new me(5,87),new me(1,88)),new ft(24,new me(5,41),new me(5,42)),new ft(30,new me(5,24),new me(7,25)),new ft(24,new me(11,12),new me(7,13))),new i(16,Int32Array.from([6,26,50,74]),new ft(24,new me(5,98),new me(1,99)),new ft(28,new me(7,45),new me(3,46)),new ft(24,new me(15,19),new me(2,20)),new ft(30,new me(3,15),new me(13,16))),new i(17,Int32Array.from([6,30,54,78]),new ft(28,new me(1,107),new me(5,108)),new ft(28,new me(10,46),new me(1,47)),new ft(28,new me(1,22),new me(15,23)),new ft(28,new me(2,14),new me(17,15))),new i(18,Int32Array.from([6,30,56,82]),new ft(30,new me(5,120),new me(1,121)),new ft(26,new me(9,43),new me(4,44)),new ft(28,new me(17,22),new me(1,23)),new ft(28,new me(2,14),new me(19,15))),new i(19,Int32Array.from([6,30,58,86]),new ft(28,new me(3,113),new me(4,114)),new ft(26,new me(3,44),new me(11,45)),new ft(26,new me(17,21),new me(4,22)),new ft(26,new me(9,13),new me(16,14))),new i(20,Int32Array.from([6,34,62,90]),new ft(28,new me(3,107),new me(5,108)),new ft(26,new me(3,41),new me(13,42)),new ft(30,new me(15,24),new me(5,25)),new ft(28,new me(15,15),new me(10,16))),new i(21,Int32Array.from([6,28,50,72,94]),new ft(28,new me(4,116),new me(4,117)),new ft(26,new me(17,42)),new ft(28,new me(17,22),new me(6,23)),new ft(30,new me(19,16),new me(6,17))),new i(22,Int32Array.from([6,26,50,74,98]),new ft(28,new me(2,111),new me(7,112)),new ft(28,new me(17,46)),new ft(30,new me(7,24),new me(16,25)),new ft(24,new me(34,13))),new i(23,Int32Array.from([6,30,54,78,102]),new ft(30,new me(4,121),new me(5,122)),new ft(28,new me(4,47),new me(14,48)),new ft(30,new me(11,24),new me(14,25)),new ft(30,new me(16,15),new me(14,16))),new i(24,Int32Array.from([6,28,54,80,106]),new ft(30,new me(6,117),new me(4,118)),new ft(28,new me(6,45),new me(14,46)),new ft(30,new me(11,24),new me(16,25)),new ft(30,new me(30,16),new me(2,17))),new i(25,Int32Array.from([6,32,58,84,110]),new ft(26,new me(8,106),new me(4,107)),new ft(28,new me(8,47),new me(13,48)),new ft(30,new me(7,24),new me(22,25)),new ft(30,new me(22,15),new me(13,16))),new i(26,Int32Array.from([6,30,58,86,114]),new ft(28,new me(10,114),new me(2,115)),new ft(28,new me(19,46),new me(4,47)),new ft(28,new me(28,22),new me(6,23)),new ft(30,new me(33,16),new me(4,17))),new i(27,Int32Array.from([6,34,62,90,118]),new ft(30,new me(8,122),new me(4,123)),new ft(28,new me(22,45),new me(3,46)),new ft(30,new me(8,23),new me(26,24)),new ft(30,new me(12,15),new me(28,16))),new i(28,Int32Array.from([6,26,50,74,98,122]),new ft(30,new me(3,117),new me(10,118)),new ft(28,new me(3,45),new me(23,46)),new ft(30,new me(4,24),new me(31,25)),new ft(30,new me(11,15),new me(31,16))),new i(29,Int32Array.from([6,30,54,78,102,126]),new ft(30,new me(7,116),new me(7,117)),new ft(28,new me(21,45),new me(7,46)),new ft(30,new me(1,23),new me(37,24)),new ft(30,new me(19,15),new me(26,16))),new i(30,Int32Array.from([6,26,52,78,104,130]),new ft(30,new me(5,115),new me(10,116)),new ft(28,new me(19,47),new me(10,48)),new ft(30,new me(15,24),new me(25,25)),new ft(30,new me(23,15),new me(25,16))),new i(31,Int32Array.from([6,30,56,82,108,134]),new ft(30,new me(13,115),new me(3,116)),new ft(28,new me(2,46),new me(29,47)),new ft(30,new me(42,24),new me(1,25)),new ft(30,new me(23,15),new me(28,16))),new i(32,Int32Array.from([6,34,60,86,112,138]),new ft(30,new me(17,115)),new ft(28,new me(10,46),new me(23,47)),new ft(30,new me(10,24),new me(35,25)),new ft(30,new me(19,15),new me(35,16))),new i(33,Int32Array.from([6,30,58,86,114,142]),new ft(30,new me(17,115),new me(1,116)),new ft(28,new me(14,46),new me(21,47)),new ft(30,new me(29,24),new me(19,25)),new ft(30,new me(11,15),new me(46,16))),new i(34,Int32Array.from([6,34,62,90,118,146]),new ft(30,new me(13,115),new me(6,116)),new ft(28,new me(14,46),new me(23,47)),new ft(30,new me(44,24),new me(7,25)),new ft(30,new me(59,16),new me(1,17))),new i(35,Int32Array.from([6,30,54,78,102,126,150]),new ft(30,new me(12,121),new me(7,122)),new ft(28,new me(12,47),new me(26,48)),new ft(30,new me(39,24),new me(14,25)),new ft(30,new me(22,15),new me(41,16))),new i(36,Int32Array.from([6,24,50,76,102,128,154]),new ft(30,new me(6,121),new me(14,122)),new ft(28,new me(6,47),new me(34,48)),new ft(30,new me(46,24),new me(10,25)),new ft(30,new me(2,15),new me(64,16))),new i(37,Int32Array.from([6,28,54,80,106,132,158]),new ft(30,new me(17,122),new me(4,123)),new ft(28,new me(29,46),new me(14,47)),new ft(30,new me(49,24),new me(10,25)),new ft(30,new me(24,15),new me(46,16))),new i(38,Int32Array.from([6,32,58,84,110,136,162]),new ft(30,new me(4,122),new me(18,123)),new ft(28,new me(13,46),new me(32,47)),new ft(30,new me(48,24),new me(14,25)),new ft(30,new me(42,15),new me(32,16))),new i(39,Int32Array.from([6,26,54,82,110,138,166]),new ft(30,new me(20,117),new me(4,118)),new ft(28,new me(40,47),new me(7,48)),new ft(30,new me(43,24),new me(22,25)),new ft(30,new me(10,15),new me(67,16))),new i(40,Int32Array.from([6,30,58,86,114,142,170]),new ft(30,new me(19,118),new me(6,119)),new ft(28,new me(18,47),new me(31,48)),new ft(30,new me(34,24),new me(34,25)),new ft(30,new me(20,15),new me(61,16)))],i}();var _o=function(i){return i[i.DATA_MASK_000=0]="DATA_MASK_000",i[i.DATA_MASK_001=1]="DATA_MASK_001",i[i.DATA_MASK_010=2]="DATA_MASK_010",i[i.DATA_MASK_011=3]="DATA_MASK_011",i[i.DATA_MASK_100=4]="DATA_MASK_100",i[i.DATA_MASK_101=5]="DATA_MASK_101",i[i.DATA_MASK_110=6]="DATA_MASK_110",i[i.DATA_MASK_111=7]="DATA_MASK_111",i}(_o||{});const Kp=function(){function i(e,n){this.value=e,this.isMasked=n}return i.prototype.unmaskBitMatrix=function(e,n){for(var s=0;s<n;s++)for(var c=0;c<n;c++)this.isMasked(s,c)&&e.flip(c,s)},i.values=new Map([[_o.DATA_MASK_000,new i(_o.DATA_MASK_000,function(e,n){return!(e+n&1)})],[_o.DATA_MASK_001,new i(_o.DATA_MASK_001,function(e,n){return!(1&e)})],[_o.DATA_MASK_010,new i(_o.DATA_MASK_010,function(e,n){return n%3==0})],[_o.DATA_MASK_011,new i(_o.DATA_MASK_011,function(e,n){return(e+n)%3==0})],[_o.DATA_MASK_100,new i(_o.DATA_MASK_100,function(e,n){return!(Math.floor(e/2)+Math.floor(n/3)&1)})],[_o.DATA_MASK_101,new i(_o.DATA_MASK_101,function(e,n){return e*n%6==0})],[_o.DATA_MASK_110,new i(_o.DATA_MASK_110,function(e,n){return e*n%6<3})],[_o.DATA_MASK_111,new i(_o.DATA_MASK_111,function(e,n){return!(e+n+e*n%3&1)})]]),i}(),n1=function(){function i(e){var n=e.getHeight();if(n<21||1!=(3&n))throw new Yt;this.bitMatrix=e}return i.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var s=5;s>=0;s--)e=this.copyBit(8,s,e);var c=this.bitMatrix.getHeight(),l=0,g=c-7;for(s=c-1;s>=g;s--)l=this.copyBit(8,s,l);for(n=c-8;n<c;n++)l=this.copyBit(n,8,l);if(this.parsedFormatInfo=Dm.decodeFormatInformation(e,l),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new Yt},i.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Fs.getVersionForNumber(n);for(var s=0,c=e-11,l=5;l>=0;l--)for(var g=e-9;g>=c;g--)s=this.copyBit(g,l,s);var m=Fs.decodeVersionInformation(s);if(null!==m&&m.getDimensionForVersion()===e)return this.parsedVersion=m,m;for(s=0,g=5;g>=0;g--)for(l=e-9;l>=c;l--)s=this.copyBit(g,l,s);if(null!==(m=Fs.decodeVersionInformation(s))&&m.getDimensionForVersion()===e)return this.parsedVersion=m,m;throw new Yt},i.prototype.copyBit=function(e,n,s){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?s<<1|1:s<<1},i.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),s=Kp.values.get(e.getDataMask()),c=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,c);for(var l=n.buildFunctionPattern(),g=!0,m=new Uint8Array(n.getTotalCodewords()),y=0,b=0,P=0,B=c-1;B>0;B-=2){6===B&&B--;for(var z=0;z<c;z++)for(var K=g?c-1-z:z,ae=0;ae<2;ae++)l.get(B-ae,K)||(P++,b<<=1,this.bitMatrix.get(B-ae,K)&&(b|=1),8===P&&(m[y++]=b,P=0,b=0));g=!g}if(y!==n.getTotalCodewords())throw new Yt;return m},i.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=Kp.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},i.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},i.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,s=e.getWidth();n<s;n++)for(var c=n+1,l=e.getHeight();c<l;c++)e.get(n,c)!==e.get(c,n)&&(e.flip(c,n),e.flip(n,c))},i}();var Xp=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Bh=function(){function i(e,n){this.numDataCodewords=e,this.codewords=n}return i.getDataBlocks=function(e,n,s){var c,l,g,m;if(e.length!==n.getTotalCodewords())throw new ln;var y=n.getECBlocksForLevel(s),b=0,P=y.getECBlocks();try{for(var B=Xp(P),z=B.next();!z.done;z=B.next())b+=(K=z.value).getCount()}catch(Ao){c={error:Ao}}finally{try{z&&!z.done&&(l=B.return)&&l.call(B)}finally{if(c)throw c.error}}var ae=new Array(b),ye=0;try{for(var Re=Xp(P),Ve=Re.next();!Ve.done;Ve=Re.next())for(var K=Ve.value,Ne=0;Ne<K.getCount();Ne++){var Ye=K.getDataCodewords(),at=y.getECCodewordsPerBlock()+Ye;ae[ye++]=new i(Ye,new Uint8Array(at))}}catch(Ao){g={error:Ao}}finally{try{Ve&&!Ve.done&&(m=Re.return)&&m.call(Re)}finally{if(g)throw g.error}}for(var Ft=ae[0].codewords.length,$t=ae.length-1;$t>=0&&ae[$t].codewords.length!==Ft;)$t--;$t++;var pn=Ft-y.getECCodewordsPerBlock(),rr=0;for(Ne=0;Ne<pn;Ne++)for(var ir=0;ir<ye;ir++)ae[ir].codewords[Ne]=e[rr++];for(ir=$t;ir<ye;ir++)ae[ir].codewords[pn]=e[rr++];var ss=ae[0].codewords.length;for(Ne=pn;Ne<ss;Ne++)for(ir=0;ir<ye;ir++)ae[ir].codewords[ir<$t?Ne:Ne+1]=e[rr++];return ae},i.prototype.getNumDataCodewords=function(){return this.numDataCodewords},i.prototype.getCodewords=function(){return this.codewords},i}();var Gi=function(i){return i[i.TERMINATOR=0]="TERMINATOR",i[i.NUMERIC=1]="NUMERIC",i[i.ALPHANUMERIC=2]="ALPHANUMERIC",i[i.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",i[i.BYTE=4]="BYTE",i[i.ECI=5]="ECI",i[i.KANJI=6]="KANJI",i[i.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",i[i.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",i[i.HANZI=9]="HANZI",i}(Gi||{});const eo=function(){function i(e,n,s,c){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=s,this.bits=c,i.FOR_BITS.set(c,this),i.FOR_VALUE.set(e,this)}return i.forBits=function(e){var n=i.FOR_BITS.get(e);if(void 0===n)throw new ln;return n},i.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber();return this.characterCountBitsForVersions[n<=9?0:n<=26?1:2]},i.prototype.getValue=function(){return this.value},i.prototype.getBits=function(){return this.bits},i.prototype.equals=function(e){return e instanceof i&&this.value===e.value},i.prototype.toString=function(){return this.stringValue},i.FOR_BITS=new Map,i.FOR_VALUE=new Map,i.TERMINATOR=new i(Gi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),i.NUMERIC=new i(Gi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),i.ALPHANUMERIC=new i(Gi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),i.STRUCTURED_APPEND=new i(Gi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),i.BYTE=new i(Gi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),i.ECI=new i(Gi.ECI,"ECI",Int32Array.from([0,0,0]),7),i.KANJI=new i(Gi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),i.FNC1_FIRST_POSITION=new i(Gi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),i.FNC1_SECOND_POSITION=new i(Gi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),i.HANZI=new i(Gi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),i}(),ru=function(){function i(){}return i.decode=function(e,n,s,c){var l=new ed(e),g=new dn,m=new Array,y=-1,b=-1;try{var P=null,B=!1,z=void 0;do{if(l.available()<4)z=eo.TERMINATOR;else{var K=l.readBits(4);z=eo.forBits(K)}switch(z){case eo.TERMINATOR:break;case eo.FNC1_FIRST_POSITION:case eo.FNC1_SECOND_POSITION:B=!0;break;case eo.STRUCTURED_APPEND:if(l.available()<16)throw new Yt;y=l.readBits(8),b=l.readBits(8);break;case eo.ECI:var ae=i.parseECIValue(l);if(null===(P=po.getCharacterSetECIByValue(ae)))throw new Yt;break;case eo.HANZI:var ye=l.readBits(4),Re=l.readBits(z.getCharacterCountBits(n));ye===i.GB2312_SUBSET&&i.decodeHanziSegment(l,g,Re);break;default:var Ve=l.readBits(z.getCharacterCountBits(n));switch(z){case eo.NUMERIC:i.decodeNumericSegment(l,g,Ve);break;case eo.ALPHANUMERIC:i.decodeAlphanumericSegment(l,g,Ve,B);break;case eo.BYTE:i.decodeByteSegment(l,g,Ve,P,m,c);break;case eo.KANJI:i.decodeKanjiSegment(l,g,Ve);break;default:throw new Yt}}}while(z!==eo.TERMINATOR)}catch{throw new Yt}return new wc(e,g.toString(),0===m.length?null:m,null===s?null:s.toString(),y,b)},i.decodeHanziSegment=function(e,n,s){if(13*s>e.available())throw new Yt;for(var c=new Uint8Array(2*s),l=0;s>0;){var g=e.readBits(13),m=g/96<<8&4294967295|g%96;c[l]=(m+=m<959?41377:42657)>>8&255,c[l+1]=255&m,l+=2,s--}try{n.append(Ce.decode(c,gt.GB2312))}catch(y){throw new Yt(y)}},i.decodeKanjiSegment=function(e,n,s){if(13*s>e.available())throw new Yt;for(var c=new Uint8Array(2*s),l=0;s>0;){var g=e.readBits(13),m=g/192<<8&4294967295|g%192;c[l]=(m+=m<7936?33088:49472)>>8,c[l+1]=m,l+=2,s--}try{n.append(Ce.decode(c,gt.SHIFT_JIS))}catch(y){throw new Yt(y)}},i.decodeByteSegment=function(e,n,s,c,l,g){if(8*s>e.available())throw new Yt;for(var m=new Uint8Array(s),y=0;y<s;y++)m[y]=e.readBits(8);var b;b=null===c?gt.guessEncoding(m,g):c.getName();try{n.append(Ce.decode(m,b))}catch(P){throw new Yt(P)}l.push(m)},i.toAlphaNumericChar=function(e){if(e>=i.ALPHANUMERIC_CHARS.length)throw new Yt;return i.ALPHANUMERIC_CHARS[e]},i.decodeAlphanumericSegment=function(e,n,s,c){for(var l=n.length();s>1;){if(e.available()<11)throw new Yt;var g=e.readBits(11);n.append(i.toAlphaNumericChar(Math.floor(g/45))),n.append(i.toAlphaNumericChar(g%45)),s-=2}if(1===s){if(e.available()<6)throw new Yt;n.append(i.toAlphaNumericChar(e.readBits(6)))}if(c)for(var m=l;m<n.length();m++)"%"===n.charAt(m)&&(m<n.length()-1&&"%"===n.charAt(m+1)?n.deleteCharAt(m+1):n.setCharAt(m,"\x1d"))},i.decodeNumericSegment=function(e,n,s){for(;s>=3;){if(e.available()<10)throw new Yt;var c=e.readBits(10);if(c>=1e3)throw new Yt;n.append(i.toAlphaNumericChar(Math.floor(c/100))),n.append(i.toAlphaNumericChar(Math.floor(c/10)%10)),n.append(i.toAlphaNumericChar(c%10)),s-=3}if(2===s){if(e.available()<7)throw new Yt;var l=e.readBits(7);if(l>=100)throw new Yt;n.append(i.toAlphaNumericChar(Math.floor(l/10))),n.append(i.toAlphaNumericChar(l%10))}else if(1===s){if(e.available()<4)throw new Yt;var g=e.readBits(4);if(g>=10)throw new Yt;n.append(i.toAlphaNumericChar(g))}},i.parseECIValue=function(e){var n=e.readBits(8);if(!(128&n))return 127&n;if(128==(192&n))return(63&n)<<8&4294967295|e.readBits(8);if(192==(224&n))return(31&n)<<16&4294967295|e.readBits(16);throw new Yt},i.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.GB2312_SUBSET=1,i}(),Uh=function(){function i(e){this.mirrored=e}return i.prototype.isMirrored=function(){return this.mirrored},i.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},i}();var jh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Hh=function(){function i(){this.rsDecoder=new La(pi.QR_CODE_FIELD_256)}return i.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(tr.parseFromBooleanArray(e),n)},i.prototype.decodeBitMatrix=function(e,n){var s=new n1(e),c=null;try{return this.decodeBitMatrixParser(s,n)}catch(g){c=g}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();var l=this.decodeBitMatrixParser(s,n);return l.setOther(new Uh(!0)),l}catch(g){throw null!==c?c:g}},i.prototype.decodeBitMatrixParser=function(e,n){var s,c,l,g,m=e.readVersion(),y=e.readFormatInformation().getErrorCorrectionLevel(),b=e.readCodewords(),P=Bh.getDataBlocks(b,m,y),B=0;try{for(var z=jh(P),K=z.next();!K.done;K=z.next())B+=(ae=K.value).getNumDataCodewords()}catch($t){s={error:$t}}finally{try{K&&!K.done&&(c=z.return)&&c.call(z)}finally{if(s)throw s.error}}var ye=new Uint8Array(B),Re=0;try{for(var Ve=jh(P),Ne=Ve.next();!Ne.done;Ne=Ve.next()){var ae,Ye=(ae=Ne.value).getCodewords(),at=ae.getNumDataCodewords();this.correctErrors(Ye,at);for(var Ft=0;Ft<at;Ft++)ye[Re++]=Ye[Ft]}}catch($t){l={error:$t}}finally{try{Ne&&!Ne.done&&(g=Ve.return)&&g.call(Ve)}finally{if(l)throw l.error}}return ru.decode(ye,m,y,n)},i.prototype.correctErrors=function(e,n){var s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-n)}catch{throw new ui}for(var c=0;c<n;c++)e[c]=s[c]},i}();var Yp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Uf=function(i){function e(n,s,c){var l=i.call(this,n,s)||this;return l.estimatedModuleSize=c,l}return Yp(e,i),e.prototype.aboutEquals=function(n,s,c){if(Math.abs(s-this.getY())<=n&&Math.abs(c-this.getX())<=n){var l=Math.abs(n-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,s,c){return new e((this.getX()+s)/2,(this.getY()+n)/2,(this.estimatedModuleSize+c)/2)},e}(hn),Jp=function(){function i(e,n,s,c,l,g,m){this.image=e,this.startX=n,this.startY=s,this.width=c,this.height=l,this.moduleSize=g,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return i.prototype.find=function(){for(var e=this.startX,n=this.height,c=e+this.width,l=this.startY+n/2,g=new Int32Array(3),m=this.image,y=0;y<n;y++){var b=l+(1&y?-Math.floor((y+1)/2):Math.floor((y+1)/2));g[0]=0,g[1]=0,g[2]=0;for(var P=e;P<c&&!m.get(P,b);)P++;for(var B=0;P<c;){if(m.get(P,b))if(1===B)g[1]++;else if(2===B){var z;if(this.foundPatternCross(g)&&null!==(z=this.handlePossibleCenter(g,b,P)))return z;g[0]=g[2],g[1]=1,g[2]=0,B=1}else g[++B]++;else 1===B&&B++,g[B]++;P++}if(this.foundPatternCross(g)&&null!==(z=this.handlePossibleCenter(g,b,c)))return z}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new qe},i.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},i.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,s=n/2,c=0;c<3;c++)if(Math.abs(n-e[c])>=s)return!1;return!0},i.prototype.crossCheckVertical=function(e,n,s,c){var l=this.image,g=l.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;for(var y=e;y>=0&&l.get(n,y)&&m[1]<=s;)m[1]++,y--;if(y<0||m[1]>s)return NaN;for(;y>=0&&!l.get(n,y)&&m[0]<=s;)m[0]++,y--;if(m[0]>s)return NaN;for(y=e+1;y<g&&l.get(n,y)&&m[1]<=s;)m[1]++,y++;if(y===g||m[1]>s)return NaN;for(;y<g&&!l.get(n,y)&&m[2]<=s;)m[2]++,y++;return m[2]>s||5*Math.abs(m[0]+m[1]+m[2]-c)>=2*c?NaN:this.foundPatternCross(m)?i.centerFromEnd(m,y):NaN},i.prototype.handlePossibleCenter=function(e,n,s){var c,l,g=e[0]+e[1]+e[2],m=i.centerFromEnd(e,s),y=this.crossCheckVertical(n,m,2*e[1],g);if(!isNaN(y)){var b=(e[0]+e[1]+e[2])/3;try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.possibleCenters),B=P.next();!B.done;B=P.next()){var z=B.value;if(z.aboutEquals(b,y,m))return z.combineEstimate(y,m,b)}}catch(ae){c={error:ae}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}var K=new Uf(m,y,b);this.possibleCenters.push(K),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(K)}return null},i}();var Mm=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Pm=function(i){function e(n,s,c,l){var g=i.call(this,n,s)||this;return g.estimatedModuleSize=c,g.count=l,void 0===l&&(g.count=1),g}return Mm(e,i),e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,s,c){if(Math.abs(s-this.getY())<=n&&Math.abs(c-this.getX())<=n){var l=Math.abs(n-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,s,c){var l=this.count+1;return new e((this.count*this.getX()+s)/l,(this.count*this.getY()+n)/l,(this.count*this.estimatedModuleSize+c)/l,l)},e}(hn),eg=function(){function i(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return i.prototype.getBottomLeft=function(){return this.bottomLeft},i.prototype.getTopLeft=function(){return this.topLeft},i.prototype.getTopRight=function(){return this.topRight},i}();var nd=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Ju=function(){function i(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return i.prototype.getImage=function(){return this.image},i.prototype.getPossibleCenters=function(){return this.possibleCenters},i.prototype.find=function(e){var n=null!=e&&void 0!==e.get(Un.TRY_HARDER),s=null!=e&&void 0!==e.get(Un.PURE_BARCODE),c=this.image,l=c.getHeight(),g=c.getWidth(),m=Math.floor(3*l/(4*i.MAX_MODULES));(m<i.MIN_SKIP||n)&&(m=i.MIN_SKIP);for(var y=!1,b=new Int32Array(5),P=m-1;P<l&&!y;P+=m){b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0;for(var B=0,z=0;z<g;z++)if(c.get(z,P))!(1&~B)&&B++,b[B]++;else if(1&B)b[B]++;else if(4===B)if(i.foundPatternCross(b)){if(!0!==this.handlePossibleCenter(b,P,z,s)){b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,B=3;continue}if(m=2,!0===this.hasSkipped)y=this.haveMultiplyConfirmedCenters();else{var ae=this.findRowSkip();ae>b[2]&&(P+=ae-b[2]-m,z=g-1)}B=0,b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0}else b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,B=3;else b[++B]++;i.foundPatternCross(b)&&!0===this.handlePossibleCenter(b,P,g,s)&&(m=b[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}var ye=this.selectBestPatterns();return hn.orderBestPatterns(ye),new eg(ye)},i.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},i.foundPatternCross=function(e){for(var n=0,s=0;s<5;s++){var c=e[s];if(0===c)return!1;n+=c}if(n<7)return!1;var l=n/7,g=l/2;return Math.abs(l-e[0])<g&&Math.abs(l-e[1])<g&&Math.abs(3*l-e[2])<3*g&&Math.abs(l-e[3])<g&&Math.abs(l-e[4])<g},i.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},i.prototype.crossCheckDiagonal=function(e,n,s,c){for(var l=this.getCrossCheckStateCount(),g=0,m=this.image;e>=g&&n>=g&&m.get(n-g,e-g);)l[2]++,g++;if(e<g||n<g)return!1;for(;e>=g&&n>=g&&!m.get(n-g,e-g)&&l[1]<=s;)l[1]++,g++;if(e<g||n<g||l[1]>s)return!1;for(;e>=g&&n>=g&&m.get(n-g,e-g)&&l[0]<=s;)l[0]++,g++;if(l[0]>s)return!1;var y=m.getHeight(),b=m.getWidth();for(g=1;e+g<y&&n+g<b&&m.get(n+g,e+g);)l[2]++,g++;if(e+g>=y||n+g>=b)return!1;for(;e+g<y&&n+g<b&&!m.get(n+g,e+g)&&l[3]<s;)l[3]++,g++;if(e+g>=y||n+g>=b||l[3]>=s)return!1;for(;e+g<y&&n+g<b&&m.get(n+g,e+g)&&l[4]<s;)l[4]++,g++;return!(l[4]>=s)&&Math.abs(l[0]+l[1]+l[2]+l[3]+l[4]-c)<2*c&&i.foundPatternCross(l)},i.prototype.crossCheckVertical=function(e,n,s,c){for(var l=this.image,g=l.getHeight(),m=this.getCrossCheckStateCount(),y=e;y>=0&&l.get(n,y);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!l.get(n,y)&&m[1]<=s;)m[1]++,y--;if(y<0||m[1]>s)return NaN;for(;y>=0&&l.get(n,y)&&m[0]<=s;)m[0]++,y--;if(m[0]>s)return NaN;for(y=e+1;y<g&&l.get(n,y);)m[2]++,y++;if(y===g)return NaN;for(;y<g&&!l.get(n,y)&&m[3]<s;)m[3]++,y++;if(y===g||m[3]>=s)return NaN;for(;y<g&&l.get(n,y)&&m[4]<s;)m[4]++,y++;return m[4]>=s||5*Math.abs(m[0]+m[1]+m[2]+m[3]+m[4]-c)>=2*c?NaN:i.foundPatternCross(m)?i.centerFromEnd(m,y):NaN},i.prototype.crossCheckHorizontal=function(e,n,s,c){for(var l=this.image,g=l.getWidth(),m=this.getCrossCheckStateCount(),y=e;y>=0&&l.get(y,n);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!l.get(y,n)&&m[1]<=s;)m[1]++,y--;if(y<0||m[1]>s)return NaN;for(;y>=0&&l.get(y,n)&&m[0]<=s;)m[0]++,y--;if(m[0]>s)return NaN;for(y=e+1;y<g&&l.get(y,n);)m[2]++,y++;if(y===g)return NaN;for(;y<g&&!l.get(y,n)&&m[3]<s;)m[3]++,y++;if(y===g||m[3]>=s)return NaN;for(;y<g&&l.get(y,n)&&m[4]<s;)m[4]++,y++;return m[4]>=s||5*Math.abs(m[0]+m[1]+m[2]+m[3]+m[4]-c)>=c?NaN:i.foundPatternCross(m)?i.centerFromEnd(m,y):NaN},i.prototype.handlePossibleCenter=function(e,n,s,c){var l=e[0]+e[1]+e[2]+e[3]+e[4],g=i.centerFromEnd(e,s),m=this.crossCheckVertical(n,Math.floor(g),e[2],l);if(!isNaN(m)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(m),e[2],l),!isNaN(g)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(g),e[2],l)))){for(var y=l/7,b=!1,P=this.possibleCenters,B=0,z=P.length;B<z;B++){var K=P[B];if(K.aboutEquals(y,m,g)){P[B]=K.combineEstimate(m,g,y),b=!0;break}}if(!b){var ae=new Pm(g,m,y);P.push(ae),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(ae)}return!0}return!1},i.prototype.findRowSkip=function(){var e,n;if(this.possibleCenters.length<=1)return 0;var c=null;try{for(var l=nd(this.possibleCenters),g=l.next();!g.done;g=l.next()){var m=g.value;if(m.getCount()>=i.CENTER_QUORUM){if(null!=c)return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-m.getX())-Math.abs(c.getY()-m.getY()))/2);c=m}}}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return 0},i.prototype.haveMultiplyConfirmedCenters=function(){var e,n,s,c,l=0,g=0,m=this.possibleCenters.length;try{for(var y=nd(this.possibleCenters),b=y.next();!b.done;b=y.next())(P=b.value).getCount()>=i.CENTER_QUORUM&&(l++,g+=P.getEstimatedModuleSize())}catch(ye){e={error:ye}}finally{try{b&&!b.done&&(n=y.return)&&n.call(y)}finally{if(e)throw e.error}}if(l<3)return!1;var B=g/m,z=0;try{for(var K=nd(this.possibleCenters),ae=K.next();!ae.done;ae=K.next()){var P=ae.value;z+=Math.abs(P.getEstimatedModuleSize()-B)}}catch(ye){s={error:ye}}finally{try{ae&&!ae.done&&(c=K.return)&&c.call(K)}finally{if(s)throw s.error}}return z<=.05*g},i.prototype.selectBestPatterns=function(){var e,n,s,c,l=this.possibleCenters.length;if(l<3)throw new qe;var m,g=this.possibleCenters;if(l>3){var y=0,b=0;try{for(var P=nd(this.possibleCenters),B=P.next();!B.done;B=P.next()){var K=B.value.getEstimatedModuleSize();y+=K,b+=K*K}}catch(Ft){e={error:Ft}}finally{try{B&&!B.done&&(n=P.return)&&n.call(P)}finally{if(e)throw e.error}}m=y/l;var ae=Math.sqrt(b/l-m*m);g.sort(function(Ft,$t){var Zt=Math.abs($t.getEstimatedModuleSize()-m),pn=Math.abs(Ft.getEstimatedModuleSize()-m);return Zt<pn?-1:Zt>pn?1:0});for(var ye=Math.max(.2*m,ae),Re=0;Re<g.length&&g.length>3;Re++)Math.abs(g[Re].getEstimatedModuleSize()-m)>ye&&(g.splice(Re,1),Re--)}if(g.length>3){y=0;try{for(var Ne=nd(g),Ye=Ne.next();!Ye.done;Ye=Ne.next())y+=Ye.value.getEstimatedModuleSize()}catch($t){s={error:$t}}finally{try{Ye&&!Ye.done&&(c=Ne.return)&&c.call(Ne)}finally{if(s)throw s.error}}m=y/g.length,g.sort(function($t,Zt){if(Zt.getCount()===$t.getCount()){var pn=Math.abs(Zt.getEstimatedModuleSize()-m),rr=Math.abs($t.getEstimatedModuleSize()-m);return pn<rr?1:pn>rr?-1:0}return Zt.getCount()-$t.getCount()}),g.splice(3)}return[g[0],g[1],g[2]]},i.CENTER_QUORUM=2,i.MIN_SKIP=3,i.MAX_MODULES=57,i}(),tg=function(){function i(e){this.image=e}return i.prototype.getImage=function(){return this.image},i.prototype.getResultPointCallback=function(){return this.resultPointCallback},i.prototype.detect=function(e){this.resultPointCallback=null==e?null:e.get(Un.NEED_RESULT_POINT_CALLBACK);var s=new Ju(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(s)},i.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),s=e.getTopRight(),c=e.getBottomLeft(),l=this.calculateModuleSize(n,s,c);if(l<1)throw new qe("No pattern found in proccess finder.");var g=i.computeDimension(n,s,c,l),m=Fs.getProvisionalVersionForDimension(g),y=m.getDimensionForVersion()-7,b=null;if(m.getAlignmentPatternCenters().length>0)for(var P=s.getX()-n.getX()+c.getX(),B=s.getY()-n.getY()+c.getY(),z=1-3/y,K=Math.floor(n.getX()+z*(P-n.getX())),ae=Math.floor(n.getY()+z*(B-n.getY())),ye=4;ye<=16;ye<<=1)try{b=this.findAlignmentInRegion(l,K,ae,ye);break}catch(Ye){if(!(Ye instanceof qe))throw Ye}var Re=i.createTransform(n,s,c,b,g),Ve=i.sampleGrid(this.image,Re,g);return new pl(Ve,null===b?[c,n,s]:[c,n,s,b])},i.createTransform=function(e,n,s,c,l){var m,y,b,P,g=l-3.5;return null!==c?(m=c.getX(),y=c.getY(),P=b=g-3):(m=n.getX()-e.getX()+s.getX(),y=n.getY()-e.getY()+s.getY(),b=g,P=g),$c.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,b,P,3.5,g,e.getX(),e.getY(),n.getX(),n.getY(),m,y,s.getX(),s.getY())},i.sampleGrid=function(e,n,s){return Q.getInstance().sampleGridWithTransform(e,s,s,n)},i.computeDimension=function(e,n,s,c){var l=Ir.round(hn.distance(e,n)/c),g=Ir.round(hn.distance(e,s)/c),m=Math.floor((l+g)/2)+7;switch(3&m){case 0:m++;break;case 2:m--;break;case 3:throw new qe("Dimensions could be not found.")}return m},i.prototype.calculateModuleSize=function(e,n,s){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,s))/2},i.prototype.calculateModuleSizeOneWay=function(e,n){var s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(s)?c/7:isNaN(c)?s/7:(s+c)/14},i.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,s,c){var l=this.sizeOfBlackWhiteBlackRun(e,n,s,c),g=1,m=e-(s-e);m<0?(g=e/(e-m),m=0):m>=this.image.getWidth()&&(g=(this.image.getWidth()-1-e)/(m-e),m=this.image.getWidth()-1);var y=Math.floor(n-(c-n)*g);return g=1,y<0?(g=n/(n-y),y=0):y>=this.image.getHeight()&&(g=(this.image.getHeight()-1-n)/(y-n),y=this.image.getHeight()-1),m=Math.floor(e+(m-e)*g),(l+=this.sizeOfBlackWhiteBlackRun(e,n,m,y))-1},i.prototype.sizeOfBlackWhiteBlackRun=function(e,n,s,c){var l=Math.abs(c-n)>Math.abs(s-e);if(l){var g=e;e=n,n=g,g=s,s=c,c=g}for(var m=Math.abs(s-e),y=Math.abs(c-n),b=-m/2,P=e<s?1:-1,B=n<c?1:-1,z=0,K=s+P,ae=e,ye=n;ae!==K;ae+=P){if(1===z===this.image.get(l?ye:ae,l?ae:ye)){if(2===z)return Ir.distance(ae,ye,e,n);z++}if((b+=y)>0){if(ye===c)break;ye+=B,b-=m}}return 2===z?Ir.distance(s+P,c,e,n):NaN},i.prototype.findAlignmentInRegion=function(e,n,s,c){var l=Math.floor(c*e),g=Math.max(0,n-l),m=Math.min(this.image.getWidth()-1,n+l);if(m-g<3*e)throw new qe("Alignment top exceeds estimated module size.");var y=Math.max(0,s-l),b=Math.min(this.image.getHeight()-1,s+l);if(b-y<3*e)throw new qe("Alignment bottom exceeds estimated module size.");return new Jp(this.image,g,y,m-g,b-y,e,this.resultPointCallback).find()},i}(),zd=function(){function i(){this.decoder=new Hh}return i.prototype.getDecoder=function(){return this.decoder},i.prototype.decode=function(e,n){var s,c;if(null!=n&&void 0!==n.get(Un.PURE_BARCODE)){var l=i.extractPureBits(e.getBlackMatrix());s=this.decoder.decodeBitMatrix(l,n),c=i.NO_POINTS}else{var g=new tg(e.getBlackMatrix()).detect(n);s=this.decoder.decodeBitMatrix(g.getBits(),n),c=g.getPoints()}s.getOther()instanceof Uh&&s.getOther().applyMirroredCorrection(c);var m=new ao(s.getText(),s.getRawBytes(),void 0,c,sn.QR_CODE,void 0),y=s.getByteSegments();null!==y&&m.putMetadata(Yi.BYTE_SEGMENTS,y);var b=s.getECLevel();return null!==b&&m.putMetadata(Yi.ERROR_CORRECTION_LEVEL,b),s.hasStructuredAppend()&&(m.putMetadata(Yi.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),m.putMetadata(Yi.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),m},i.prototype.reset=function(){},i.extractPureBits=function(e){var n=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(null===n||null===s)throw new qe;var c=this.moduleSize(n,e),l=n[1],g=s[1],m=n[0],y=s[0];if(m>=y||l>=g)throw new qe;if(g-l!=y-m&&(y=m+(g-l))>=e.getWidth())throw new qe;var b=Math.round((y-m+1)/c),P=Math.round((g-l+1)/c);if(b<=0||P<=0)throw new qe;if(P!==b)throw new qe;var B=Math.floor(c/2);l+=B;var z=(m+=B)+Math.floor((b-1)*c)-y;if(z>0){if(z>B)throw new qe;m-=z}var K=l+Math.floor((P-1)*c)-g;if(K>0){if(K>B)throw new qe;l-=K}for(var ae=new tr(b,P),ye=0;ye<P;ye++)for(var Re=l+Math.floor(ye*c),Ve=0;Ve<b;Ve++)e.get(m+Math.floor(Ve*c),Re)&&ae.set(Ve,ye);return ae},i.moduleSize=function(e,n){for(var s=n.getHeight(),c=n.getWidth(),l=e[0],g=e[1],m=!0,y=0;l<c&&g<s;){if(m!==n.get(l,g)){if(5==++y)break;m=!m}l++,g++}if(l===c||g===s)throw new qe;return(l-e[0])/7},i.NO_POINTS=new Array,i}(),ti=function(){function i(){}return i.prototype.PDF417Common=function(){},i.getBitCountSum=function(e){return Ir.sum(e)},i.toIntArray=function(e){var n,s;if(null==e||!e.length)return i.EMPTY_INT_ARRAY;var c=new Int32Array(e.length),l=0;try{for(var g=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),m=g.next();!m.done;m=g.next())c[l++]=m.value}catch(b){n={error:b}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}return c},i.getCodeword=function(e){var n=Jr.binarySearch(i.SYMBOL_TABLE,262143&e);return n<0?-1:(i.CODEWORD_TABLE[n]-1)%i.NUMBER_OF_CODEWORDS},i.MAX_CODEWORDS_IN_BARCODE=(i.NUMBER_OF_CODEWORDS=929)-1,i.MIN_ROWS_IN_BARCODE=3,i.MAX_ROWS_IN_BARCODE=90,i.MODULES_IN_CODEWORD=17,i.MODULES_IN_STOP_PATTERN=18,i.BARS_IN_MODULE=8,i.EMPTY_INT_ARRAY=new Int32Array([]),i.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),i.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),i}(),iu=function(){function i(e,n){this.bits=e,this.points=n}return i.prototype.getBits=function(){return this.bits},i.prototype.getPoints=function(){return this.points},i}();var ng=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Wh=function(){function i(){}return i.detectMultiple=function(e,n,s){var c=e.getBlackMatrix(),l=i.detect(s,c);return l.length||((c=c.clone()).rotate180(),l=i.detect(s,c)),new iu(c,l)},i.detect=function(e,n){for(var s,c,l=new Array,g=0,m=0,y=!1;g<n.getHeight();){var b=i.findVertices(n,g,m);if(null!=b[0]||null!=b[3]){if(y=!0,l.push(b),!e)break;null!=b[2]?(m=Math.trunc(b[2].getX()),g=Math.trunc(b[2].getY())):(m=Math.trunc(b[4].getX()),g=Math.trunc(b[4].getY()))}else{if(!y)break;y=!1,m=0;try{for(var P=(s=void 0,ng(l)),B=P.next();!B.done;B=P.next()){var z=B.value;null!=z[1]&&(g=Math.trunc(Math.max(g,z[1].getY()))),null!=z[3]&&(g=Math.max(g,Math.trunc(z[3].getY())))}}catch(K){s={error:K}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}g+=i.ROW_STEP}}return l},i.findVertices=function(e,n,s){var c=e.getHeight(),l=e.getWidth(),g=new Array(8);return i.copyToResult(g,i.findRowsWithPattern(e,c,l,n,s,i.START_PATTERN),i.INDEXES_START_PATTERN),null!=g[4]&&(s=Math.trunc(g[4].getX()),n=Math.trunc(g[4].getY())),i.copyToResult(g,i.findRowsWithPattern(e,c,l,n,s,i.STOP_PATTERN),i.INDEXES_STOP_PATTERN),g},i.copyToResult=function(e,n,s){for(var c=0;c<s.length;c++)e[s[c]]=n[c]},i.findRowsWithPattern=function(e,n,s,c,l,g){for(var m=new Array(4),y=!1,b=new Int32Array(g.length);c<n;c+=i.ROW_STEP)if(null!=(P=i.findGuardPattern(e,l,c,s,!1,g,b))){for(;c>0;){if(null==(B=i.findGuardPattern(e,l,--c,s,!1,g,b))){c++;break}P=B}m[0]=new hn(P[0],c),m[1]=new hn(P[1],c),y=!0;break}var z=c+1;if(y){for(var K=0,B=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);z<n;z++){var P;if(null!=(P=i.findGuardPattern(e,B[0],z,s,!1,g,b))&&Math.abs(B[0]-P[0])<i.MAX_PATTERN_DRIFT&&Math.abs(B[1]-P[1])<i.MAX_PATTERN_DRIFT)B=P,K=0;else{if(K>i.SKIPPED_ROW_COUNT_MAX)break;K++}}m[2]=new hn(B[0],z-=K+1),m[3]=new hn(B[1],z)}return z-c<i.BARCODE_MIN_HEIGHT&&Jr.fill(m,null),m},i.findGuardPattern=function(e,n,s,c,l,g,m){Jr.fillWithin(m,0,m.length,0);for(var y=n,b=0;e.get(y,s)&&y>0&&b++<i.MAX_PIXEL_DRIFT;)y--;for(var P=y,B=0,z=g.length,K=l;P<c;P++)if(e.get(P,s)!==K)m[B]++;else{if(B===z-1){if(i.patternMatchVariance(m,g,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE)return new Int32Array([y,P]);y+=m[0]+m[1],Ur.arraycopy(m,2,m,0,B-1),m[B-1]=0,m[B]=0,B--}else B++;m[B]=1,K=!K}return B===z-1&&i.patternMatchVariance(m,g,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE?new Int32Array([y,P-1]):null},i.patternMatchVariance=function(e,n,s){for(var c=e.length,l=0,g=0,m=0;m<c;m++)l+=e[m],g+=n[m];if(l<g)return 1/0;var y=l/g;s*=y;for(var b=0,P=0;P<c;P++){var B=e[P],z=n[P]*y,K=B>z?B-z:z-B;if(K>s)return 1/0;b+=K}return b/l},i.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),i.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),i.MAX_AVG_VARIANCE=.42,i.MAX_INDIVIDUAL_VARIANCE=.8,i.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),i.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),i.MAX_PIXEL_DRIFT=3,i.MAX_PATTERN_DRIFT=5,i.SKIPPED_ROW_COUNT_MAX=25,i.ROW_STEP=5,i.BARCODE_MIN_HEIGHT=10,i}(),xu=function(){function i(e,n){if(0===n.length)throw new ln;this.field=e;var s=n.length;if(s>1&&0===n[0]){for(var c=1;c<s&&0===n[c];)c++;c===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-c),Ur.arraycopy(n,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return i.prototype.getCoefficients=function(){return this.coefficients},i.prototype.getDegree=function(){return this.coefficients.length-1},i.prototype.isZero=function(){return 0===this.coefficients[0]},i.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},i.prototype.evaluateAt=function(e){var n,s;if(0===e)return this.getCoefficient(0);if(1===e){var c=0;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.coefficients),g=l.next();!g.done;g=l.next())c=this.field.add(c,g.value)}catch(B){n={error:B}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return c}for(var y=this.coefficients[0],b=this.coefficients.length,P=1;P<b;P++)y=this.field.add(this.field.multiply(e,y),this.coefficients[P]);return y},i.prototype.add=function(e){if(!this.field.equals(e.field))throw new ln("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,s=e.coefficients;if(n.length>s.length){var c=n;n=s,s=c}var l=new Int32Array(s.length),g=s.length-n.length;Ur.arraycopy(s,0,l,0,g);for(var m=g;m<s.length;m++)l[m]=this.field.add(n[m-g],s[m]);return new i(this.field,l)},i.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new ln("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},i.prototype.multiply=function(e){return e instanceof i?this.multiplyOther(e):this.multiplyScalar(e)},i.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new ln("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new i(this.field,new Int32Array([0]));for(var n=this.coefficients,s=n.length,c=e.coefficients,l=c.length,g=new Int32Array(s+l-1),m=0;m<s;m++)for(var y=n[m],b=0;b<l;b++)g[m+b]=this.field.add(g[m+b],this.field.multiply(y,c[b]));return new i(this.field,g)},i.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),s=0;s<e;s++)n[s]=this.field.subtract(0,this.coefficients[s]);return new i(this.field,n)},i.prototype.multiplyScalar=function(e){if(0===e)return new i(this.field,new Int32Array([0]));if(1===e)return this;for(var n=this.coefficients.length,s=new Int32Array(n),c=0;c<n;c++)s[c]=this.field.multiply(this.coefficients[c],e);return new i(this.field,s)},i.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new ln;if(0===n)return new i(this.field,new Int32Array([0]));for(var s=this.coefficients.length,c=new Int32Array(s+e),l=0;l<s;l++)c[l]=this.field.multiply(this.coefficients[l],n);return new i(this.field,c)},i.prototype.toString=function(){for(var e=new dn,n=this.getDegree();n>=0;n--){var s=this.getCoefficient(n);0!==s&&(s<0?(e.append(" - "),s=-s):e.length()>0&&e.append(" + "),(0===n||1!==s)&&e.append(s),0!==n&&(1===n?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},i}(),ig=function(){function i(){}return i.prototype.add=function(e,n){return(e+n)%this.modulus},i.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},i.prototype.exp=function(e){return this.expTable[e]},i.prototype.log=function(e){if(0===e)throw new ln;return this.logTable[e]},i.prototype.inverse=function(e){if(0===e)throw new Gc;return this.expTable[this.modulus-this.logTable[e]-1]},i.prototype.multiply=function(e,n){return 0===e||0===n?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},i.prototype.getSize=function(){return this.modulus},i.prototype.equals=function(e){return e===this},i}();var qd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const og=function(i){function e(n,s){var c=i.call(this)||this;c.modulus=n,c.expTable=new Int32Array(n),c.logTable=new Int32Array(n);for(var l=1,g=0;g<n;g++)c.expTable[g]=l,l=l*s%n;for(g=0;g<n-1;g++)c.logTable[c.expTable[g]]=g;return c.zero=new xu(c,new Int32Array([0])),c.one=new xu(c,new Int32Array([1])),c}return qd(e,i),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,s){if(n<0)throw new ln;if(0===s)return this.zero;var c=new Int32Array(n+1);return c[0]=s,new xu(this,c)},e.PDF417_GF=new e(ti.NUMBER_OF_CODEWORDS,3),e}(ig),km=function(){function i(){this.field=og.PDF417_GF}return i.prototype.decode=function(e,n,s){for(var c,l,g=new xu(this.field,e),m=new Int32Array(n),y=!1,b=n;b>0;b--){var P=g.evaluateAt(this.field.exp(b));m[n-b]=P,0!==P&&(y=!0)}if(!y)return 0;var B=this.field.getOne();if(null!=s)try{for(var z=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),K=z.next();!K.done;K=z.next()){var ye=this.field.exp(e.length-1-K.value),Re=new xu(this.field,new Int32Array([this.field.subtract(0,ye),1]));B=B.multiply(Re)}}catch(pn){c={error:pn}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}var Ve=new xu(this.field,m),Ne=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),Ve,n),Ye=Ne[0],at=Ne[1],Ft=this.findErrorLocations(Ye),$t=this.findErrorMagnitudes(at,Ye,Ft);for(b=0;b<Ft.length;b++){var Zt=e.length-1-this.field.log(Ft[b]);if(Zt<0)throw ui.getChecksumInstance();e[Zt]=this.field.subtract(e[Zt],$t[b])}return Ft.length},i.prototype.runEuclideanAlgorithm=function(e,n,s){if(e.getDegree()<n.getDegree()){var c=e;e=n,n=c}for(var l=e,g=n,m=this.field.getZero(),y=this.field.getOne();g.getDegree()>=Math.round(s/2);){var b=l,P=m;if(m=y,(l=g).isZero())throw ui.getChecksumInstance();g=b;for(var B=this.field.getZero(),z=l.getCoefficient(l.getDegree()),K=this.field.inverse(z);g.getDegree()>=l.getDegree()&&!g.isZero();){var ae=g.getDegree()-l.getDegree(),ye=this.field.multiply(g.getCoefficient(g.getDegree()),K);B=B.add(this.field.buildMonomial(ae,ye)),g=g.subtract(l.multiplyByMonomial(ae,ye))}y=B.multiply(m).subtract(P).negative()}var Re=y.getCoefficient(0);if(0===Re)throw ui.getChecksumInstance();var Ve=this.field.inverse(Re);return[y.multiply(Ve),g.multiply(Ve)]},i.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),s=new Int32Array(n),c=0,l=1;l<this.field.getSize()&&c<n;l++)0===e.evaluateAt(l)&&(s[c]=this.field.inverse(l),c++);if(c!==n)throw ui.getChecksumInstance();return s},i.prototype.findErrorMagnitudes=function(e,n,s){for(var c=n.getDegree(),l=new Int32Array(c),g=1;g<=c;g++)l[c-g]=this.field.multiply(g,n.getCoefficient(g));var m=new xu(this.field,l),y=s.length,b=new Int32Array(y);for(g=0;g<y;g++){var P=this.field.inverse(s[g]),B=this.field.subtract(0,e.evaluateAt(P)),z=this.field.inverse(m.evaluateAt(P));b[g]=this.field.multiply(B,z)}return b},i}(),Fm=function(){function i(e,n,s,c,l){e instanceof i?this.constructor_2(e):this.constructor_1(e,n,s,c,l)}return i.prototype.constructor_1=function(e,n,s,c,l){var g=null==n||null==s,m=null==c||null==l;if(g&&m)throw new qe;g?(n=new hn(0,c.getY()),s=new hn(0,l.getY())):m&&(c=new hn(e.getWidth()-1,n.getY()),l=new hn(e.getWidth()-1,s.getY())),this.image=e,this.topLeft=n,this.bottomLeft=s,this.topRight=c,this.bottomRight=l,this.minX=Math.trunc(Math.min(n.getX(),s.getX())),this.maxX=Math.trunc(Math.max(c.getX(),l.getX())),this.minY=Math.trunc(Math.min(n.getY(),c.getY())),this.maxY=Math.trunc(Math.max(s.getY(),l.getY()))},i.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},i.merge=function(e,n){return null==e?n:null==n?e:new i(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},i.prototype.addMissingRows=function(e,n,s){var c=this.topLeft,l=this.bottomLeft,g=this.topRight,m=this.bottomRight;if(e>0){var y=s?this.topLeft:this.topRight,b=Math.trunc(y.getY()-e);b<0&&(b=0);var P=new hn(y.getX(),b);s?c=P:g=P}if(n>0){var B=s?this.bottomLeft:this.bottomRight,z=Math.trunc(B.getY()+n);z>=this.image.getHeight()&&(z=this.image.getHeight()-1);var K=new hn(B.getX(),z);s?l=K:m=K}return new i(this.image,c,l,g,m)},i.prototype.getMinX=function(){return this.minX},i.prototype.getMaxX=function(){return this.maxX},i.prototype.getMinY=function(){return this.minY},i.prototype.getMaxY=function(){return this.maxY},i.prototype.getTopLeft=function(){return this.topLeft},i.prototype.getTopRight=function(){return this.topRight},i.prototype.getBottomLeft=function(){return this.bottomLeft},i.prototype.getBottomRight=function(){return this.bottomRight},i}(),ou=function(){function i(e,n,s,c){this.columnCount=e,this.errorCorrectionLevel=c,this.rowCountUpperPart=n,this.rowCountLowerPart=s,this.rowCount=n+s}return i.prototype.getColumnCount=function(){return this.columnCount},i.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},i.prototype.getRowCount=function(){return this.rowCount},i.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},i.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},i}(),ag=function(){function i(){this.buffer=""}return i.form=function(e,n){var s=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function c(g,m,y,b,P,B){if("%%"===g)return"%";if(void 0!==n[++s]){g=b?parseInt(b.substr(1)):void 0;var K,z=P?parseInt(P.substr(1)):void 0;switch(B){case"s":K=n[s];break;case"c":K=n[s][0];break;case"f":K=parseFloat(n[s]).toFixed(g);break;case"p":K=parseFloat(n[s]).toPrecision(g);break;case"e":K=parseFloat(n[s]).toExponential(g);break;case"x":K=parseInt(n[s]).toString(z||16);break;case"d":K=parseFloat(parseInt(n[s],z||10).toPrecision(g)).toFixed(0)}K="object"==typeof K?JSON.stringify(K):(+K).toString(z);for(var ae=parseInt(y),ye=y&&y[0]+""=="0"?"0":" ";K.length<ae;)K=void 0!==m?K+ye:ye+K;return K}})},i.prototype.format=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];this.buffer+=i.form(e,n)},i.prototype.toString=function(){return this.buffer},i}(),Gf=function(){function i(e){this.boundingBox=new Fm(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return i.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(null!=n)return n;for(var s=1;s<i.MAX_NEARBY_DISTANCE;s++){var c=this.imageRowToCodewordIndex(e)-s;if(c>=0&&null!=(n=this.codewords[c])||(c=this.imageRowToCodewordIndex(e)+s)<this.codewords.length&&null!=(n=this.codewords[c]))return n}return null},i.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},i.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},i.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},i.prototype.getBoundingBox=function(){return this.boundingBox},i.prototype.getCodewords=function(){return this.codewords},i.prototype.toString=function(){var e,n,s=new ag,c=0;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.codewords),g=l.next();!g.done;g=l.next()){var m=g.value;null!=m?s.format("%3d: %3d|%3d%n",c++,m.getRowNumber(),m.getValue()):s.format("%3d:    |   %n",c++)}}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s.toString()},i.MAX_NEARBY_DISTANCE=5,i}();var Bm=function(i,e){var n="function"==typeof Symbol&&i[Symbol.iterator];if(!n)return i;var c,g,s=n.call(i),l=[];try{for(;(void 0===e||e-- >0)&&!(c=s.next()).done;)l.push(c.value)}catch(m){g={error:m}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(g)throw g.error}}return l};const $f=function(){function i(){this.values=new Map}return i.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);null==n&&(n=0),n++,this.values.set(e,n)},i.prototype.getValue=function(){var e,n,s=-1,c=new Array,l=function(B,z){var K_getKey=function(){return B},K_getValue=function(){return z};K_getValue()>s?(s=K_getValue(),(c=[]).push(K_getKey())):K_getValue()===s&&c.push(K_getKey())};try{for(var g=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.values.entries()),m=g.next();!m.done;m=g.next()){var y=Bm(m.value,2);l(y[0],y[1])}}catch(B){e={error:B}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(e)throw e.error}}return ti.toIntArray(c)},i.prototype.getConfidence=function(e){return this.values.get(e)},i}();var Dc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ug=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const zf=function(i){function e(n,s){var c=i.call(this,n)||this;return c._isLeft=s,c}return Dc(e,i),e.prototype.setRowNumbers=function(){var n,s;try{for(var c=ug(this.getCodewords()),l=c.next();!l.done;l=c.next()){var g=l.value;g?.setRowNumberAsRowIndicatorColumn()}}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,n);for(var c=this.getBoundingBox(),l=this._isLeft?c.getTopLeft():c.getTopRight(),g=this._isLeft?c.getBottomLeft():c.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(l.getY())),y=this.imageRowToCodewordIndex(Math.trunc(g.getY())),b=-1,P=1,B=0,z=m;z<y;z++)if(null!=s[z]){var K=s[z],ae=K.getRowNumber()-b;if(0===ae)B++;else if(1===ae)P=Math.max(P,B),B=1,b=K.getRowNumber();else if(ae<0||K.getRowNumber()>=n.getRowCount()||ae>z)s[z]=null;else{for(var ye,Re=(ye=P>2?(P-2)*ae:ae)>=z,Ve=1;Ve<=ye&&!Re;Ve++)Re=null!=s[z-Ve];Re?s[z]=null:(b=K.getRowNumber(),B=1)}}},e.prototype.getRowHeights=function(){var n,s,c=this.getBarcodeMetadata();if(null==c)return null;this.adjustIncompleteIndicatorColumnRowNumbers(c);var l=new Int32Array(c.getRowCount());try{for(var g=ug(this.getCodewords()),m=g.next();!m.done;m=g.next()){var y=m.value;if(null!=y){var b=y.getRowNumber();if(b>=l.length)continue;l[b]++}}}catch(P){n={error:P}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}return l},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var s=this.getBoundingBox(),c=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(l.getY())),y=this.getCodewords(),b=-1,P=1,B=0,z=g;z<m;z++)if(null!=y[z]){var K=y[z];K.setRowNumberAsRowIndicatorColumn();var ae=K.getRowNumber()-b;0===ae?B++:1===ae?(P=Math.max(P,B),B=1,b=K.getRowNumber()):K.getRowNumber()>=n.getRowCount()?y[z]=null:(b=K.getRowNumber(),B=1)}},e.prototype.getBarcodeMetadata=function(){var n,s,c=this.getCodewords(),l=new $f,g=new $f,m=new $f,y=new $f;try{for(var b=ug(c),P=b.next();!P.done;P=b.next()){var B=P.value;if(null!=B){B.setRowNumberAsRowIndicatorColumn();var z=B.getValue()%30,K=B.getRowNumber();switch(this._isLeft||(K+=2),K%3){case 0:g.setValue(3*z+1);break;case 1:y.setValue(z/3),m.setValue(z%3);break;case 2:l.setValue(z+1)}}}}catch(ye){n={error:ye}}finally{try{P&&!P.done&&(s=b.return)&&s.call(b)}finally{if(n)throw n.error}}if(0===l.getValue().length||0===g.getValue().length||0===m.getValue().length||0===y.getValue().length||l.getValue()[0]<1||g.getValue()[0]+m.getValue()[0]<ti.MIN_ROWS_IN_BARCODE||g.getValue()[0]+m.getValue()[0]>ti.MAX_ROWS_IN_BARCODE)return null;var ae=new ou(l.getValue()[0],g.getValue()[0],m.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(c,ae),ae},e.prototype.removeIncorrectCodewords=function(n,s){for(var c=0;c<n.length;c++){var l=n[c];if(null!=n[c]){var g=l.getValue()%30,m=l.getRowNumber();if(m>s.getRowCount()){n[c]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:3*g+1!==s.getRowCountUpperPart()&&(n[c]=null);break;case 1:(Math.trunc(g/3)!==s.getErrorCorrectionLevel()||g%3!==s.getRowCountLowerPart())&&(n[c]=null);break;case 2:g+1!==s.getColumnCount()&&(n[c]=null)}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+i.prototype.toString.call(this)},e}(Gf),lg=function(){function i(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return i.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var n,e=ti.MAX_CODEWORDS_IN_BARCODE;do{n=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<n);return this.detectionResultColumns},i.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},i.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var s=this.detectionResultColumns[n].getCodewords(),c=0;c<s.length;c++)null!=s[c]&&(s[c].hasValidRowNumber()||this.adjustRowNumbers(n,c,s));return e},i.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},i.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),s=0;s<e.length;s++)if(null!=e[s]&&null!=n[s]&&e[s].getRowNumber()===n[s].getRowNumber())for(var c=1;c<=this.barcodeColumnCount;c++){var l=this.detectionResultColumns[c].getCodewords()[s];null!=l&&(l.setRowNumber(e[s].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[s]=null))}},i.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),s=0;s<n.length;s++)if(null!=n[s])for(var c=n[s].getRowNumber(),l=0,g=this.barcodeColumnCount+1;g>0&&l<this.ADJUST_ROW_NUMBER_SKIP;g--){var m=this.detectionResultColumns[g].getCodewords()[s];null!=m&&(l=i.adjustRowNumberIfValid(c,l,m),m.hasValidRowNumber()||e++)}return e},i.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),s=0;s<n.length;s++)if(null!=n[s])for(var c=n[s].getRowNumber(),l=0,g=1;g<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;g++){var m=this.detectionResultColumns[g].getCodewords()[s];null!=m&&(l=i.adjustRowNumberIfValid(c,l,m),m.hasValidRowNumber()||e++)}return e},i.adjustRowNumberIfValid=function(e,n,s){return null==s||s.hasValidRowNumber()||(s.isValidRowNumber(e)?(s.setRowNumber(e),n=0):++n),n},i.prototype.adjustRowNumbers=function(e,n,s){var c,l;if(null!=this.detectionResultColumns[e-1]){var g=s[n],m=this.detectionResultColumns[e-1].getCodewords(),y=m;null!=this.detectionResultColumns[e+1]&&(y=this.detectionResultColumns[e+1].getCodewords());var b=new Array(14);b[2]=m[n],b[3]=y[n],n>0&&(b[0]=s[n-1],b[4]=m[n-1],b[5]=y[n-1]),n>1&&(b[8]=s[n-2],b[10]=m[n-2],b[11]=y[n-2]),n<s.length-1&&(b[1]=s[n+1],b[6]=m[n+1],b[7]=y[n+1]),n<s.length-2&&(b[9]=s[n+2],b[12]=m[n+2],b[13]=y[n+2]);try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(b),B=P.next();!B.done;B=P.next())if(i.adjustRowNumber(g,B.value))return}catch(K){c={error:K}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}}},i.adjustRowNumber=function(e,n){return!(null==n||!n.hasValidRowNumber()||n.getBucket()!==e.getBucket()||(e.setRowNumber(n.getRowNumber()),0))},i.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},i.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},i.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},i.prototype.setBoundingBox=function(e){this.boundingBox=e},i.prototype.getBoundingBox=function(){return this.boundingBox},i.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},i.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},i.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new ag,s=0;s<e.getCodewords().length;s++){n.format("CW %3d:",s);for(var c=0;c<this.barcodeColumnCount+2;c++)if(null!=this.detectionResultColumns[c]){var l=this.detectionResultColumns[c].getCodewords()[s];null!=l?n.format(" %3d|%3d",l.getRowNumber(),l.getValue()):n.format("    |   ")}else n.format("    |   ");n.format("%n")}return n.toString()},i}(),Xh=function(){function i(e,n,s,c){this.rowNumber=i.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(s),this.value=Math.trunc(c)}return i.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},i.prototype.isValidRowNumber=function(e){return e!==i.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},i.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},i.prototype.getWidth=function(){return this.endX-this.startX},i.prototype.getStartX=function(){return this.startX},i.prototype.getEndX=function(){return this.endX},i.prototype.getBucket=function(){return this.bucket},i.prototype.getValue=function(){return this.value},i.prototype.getRowNumber=function(){return this.rowNumber},i.prototype.setRowNumber=function(e){this.rowNumber=e},i.prototype.toString=function(){return this.rowNumber+"|"+this.value},i.BARCODE_ROW_UNKNOWN=-1,i}(),Qh=function(){function i(){}return i.initialize=function(){for(var e=0;e<ti.SYMBOL_TABLE.length;e++)for(var n=ti.SYMBOL_TABLE[e],s=1&n,c=0;c<ti.BARS_IN_MODULE;c++){for(var l=0;(1&n)===s;)l+=1,n>>=1;s=1&n,i.RATIOS_TABLE[e]||(i.RATIOS_TABLE[e]=new Array(ti.BARS_IN_MODULE)),i.RATIOS_TABLE[e][ti.BARS_IN_MODULE-c-1]=Math.fround(l/ti.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},i.getDecodedValue=function(e){var n=i.getDecodedCodewordValue(i.sampleBitCounts(e));return-1!==n?n:i.getClosestDecodedValue(e)},i.sampleBitCounts=function(e){for(var n=Ir.sum(e),s=new Int32Array(ti.BARS_IN_MODULE),c=0,l=0,g=0;g<ti.MODULES_IN_CODEWORD;g++)l+e[c]<=n/(2*ti.MODULES_IN_CODEWORD)+g*n/ti.MODULES_IN_CODEWORD&&(l+=e[c],c++),s[c]++;return s},i.getDecodedCodewordValue=function(e){var n=i.getBitValue(e);return-1===ti.getCodeword(n)?-1:n},i.getBitValue=function(e){for(var n=0,s=0;s<e.length;s++)for(var c=0;c<e[s];c++)n=n<<1|(s%2==0?1:0);return Math.trunc(n)},i.getClosestDecodedValue=function(e){var n=Ir.sum(e),s=new Array(ti.BARS_IN_MODULE);if(n>1)for(var c=0;c<s.length;c++)s[c]=Math.fround(e[c]/n);var l=hl.MAX_VALUE,g=-1;this.bSymbolTableReady||i.initialize();for(var m=0;m<i.RATIOS_TABLE.length;m++){for(var y=0,b=i.RATIOS_TABLE[m],P=0;P<ti.BARS_IN_MODULE;P++){var B=Math.fround(b[P]-s[P]);if((y+=Math.fround(B*B))>=l)break}y<l&&(l=y,g=ti.SYMBOL_TABLE[m])}return g},i.bSymbolTableReady=!1,i.RATIOS_TABLE=new Array(ti.SYMBOL_TABLE.length).map(function(e){return new Array(ti.BARS_IN_MODULE)}),i}(),dg=function(){function i(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return i.prototype.getSegmentIndex=function(){return this.segmentIndex},i.prototype.setSegmentIndex=function(e){this.segmentIndex=e},i.prototype.getFileId=function(){return this.fileId},i.prototype.setFileId=function(e){this.fileId=e},i.prototype.getOptionalData=function(){return this.optionalData},i.prototype.setOptionalData=function(e){this.optionalData=e},i.prototype.isLastSegment=function(){return this.lastSegment},i.prototype.setLastSegment=function(e){this.lastSegment=e},i.prototype.getSegmentCount=function(){return this.segmentCount},i.prototype.setSegmentCount=function(e){this.segmentCount=e},i.prototype.getSender=function(){return this.sender||null},i.prototype.setSender=function(e){this.sender=e},i.prototype.getAddressee=function(){return this.addressee||null},i.prototype.setAddressee=function(e){this.addressee=e},i.prototype.getFileName=function(){return this.fileName},i.prototype.setFileName=function(e){this.fileName=e},i.prototype.getFileSize=function(){return this.fileSize},i.prototype.setFileSize=function(e){this.fileSize=e},i.prototype.getChecksum=function(){return this.checksum},i.prototype.setChecksum=function(e){this.checksum=e},i.prototype.getTimestamp=function(){return this.timestamp},i.prototype.setTimestamp=function(e){this.timestamp=e},i}(),cc=function(){function i(){}return i.parseLong=function(e,n){return void 0===n&&(n=void 0),parseInt(e,n)},i}();var x0=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const fg=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return x0(e,i),e.kind="NullPointerException",e}(Dn),ad=function(){function i(){}return i.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},i.prototype.writeBytesOffset=function(e,n,s){if(null==e)throw new fg;if(n<0||n>e.length||s<0||n+s>e.length||n+s<0)throw new yc;if(0!==s)for(var c=0;c<s;c++)this.write(e[n+c])},i.prototype.flush=function(){},i.prototype.close=function(){},i}();var No=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const jm=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return No(e,i),e}(Dn);var hg=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Kf=function(i){function e(n){void 0===n&&(n=32);var s=i.call(this)||this;if(s.count=0,n<0)throw new ln("Negative initial size: "+n);return s.buf=new Uint8Array(n),s}return hg(e,i),e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var c=this.buf.length<<1;if(c-n<0&&(c=n),c<0){if(n<0)throw new jm;c=ur.MAX_VALUE}this.buf=Jr.copyOfUint8Array(this.buf,c)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,s,c){if(s<0||s>n.length||c<0||s+c-n.length>0)throw new yc;this.ensureCapacity(this.count+c),Ur.arraycopy(n,s,this.buf,this.count,c),this.count+=c},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Jr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?"string"==typeof n?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(ad);var cd,di=function(i){return i[i.ALPHA=0]="ALPHA",i[i.LOWER=1]="LOWER",i[i.MIXED=2]="MIXED",i[i.PUNCT=3]="PUNCT",i[i.ALPHA_SHIFT=4]="ALPHA_SHIFT",i[i.PUNCT_SHIFT=5]="PUNCT_SHIFT",i}(di||{});function Jh(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function au(i){if(typeof cd>"u"&&(cd=Jh()),null===cd)throw new Error("BigInt is not supported!");return cd(i)}const tp=function(){function i(){}return i.decode=function(e,n){var s=new dn(""),c=po.ISO8859_1;s.enableDecoding(c);for(var l=1,g=e[l++],m=new dg;l<e[0];){switch(g){case i.TEXT_COMPACTION_MODE_LATCH:l=i.textCompaction(e,l,s);break;case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:l=i.byteCompaction(g,e,c,l,s);break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(e[l++]);break;case i.NUMERIC_COMPACTION_MODE_LATCH:l=i.numericCompaction(e,l,s);break;case i.ECI_CHARSET:po.getCharacterSetECIByValue(e[l++]);break;case i.ECI_GENERAL_PURPOSE:l+=2;break;case i.ECI_USER_DEFINED:l++;break;case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=i.decodeMacroBlock(e,l,m);break;case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:throw new Yt;default:l--,l=i.textCompaction(e,l,s)}if(!(l<e.length))throw Yt.getFormatInstance();g=e[l++]}if(0===s.length())throw Yt.getFormatInstance();var b=new wc(null,s.toString(),null,n);return b.setOther(m),b},i.decodeMacroBlock=function(e,n,s){if(n+i.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Yt.getFormatInstance();for(var c=new Int32Array(i.NUMBER_OF_SEQUENCE_CODEWORDS),l=0;l<i.NUMBER_OF_SEQUENCE_CODEWORDS;l++,n++)c[l]=e[n];s.setSegmentIndex(ur.parseInt(i.decodeBase900toBase10(c,i.NUMBER_OF_SEQUENCE_CODEWORDS)));var g=new dn;n=i.textCompaction(e,n,g),s.setFileId(g.toString());var m=-1;for(e[n]===i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=n+1);n<e[0];)switch(e[n]){case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++n]){case i.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var y=new dn;n=i.textCompaction(e,n+1,y),s.setFileName(y.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var b=new dn;n=i.textCompaction(e,n+1,b),s.setSender(b.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var P=new dn;n=i.textCompaction(e,n+1,P),s.setAddressee(P.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var B=new dn;n=i.numericCompaction(e,n+1,B),s.setSegmentCount(ur.parseInt(B.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var z=new dn;n=i.numericCompaction(e,n+1,z),s.setTimestamp(cc.parseLong(z.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var K=new dn;n=i.numericCompaction(e,n+1,K),s.setChecksum(ur.parseInt(K.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var ae=new dn;n=i.numericCompaction(e,n+1,ae),s.setFileSize(cc.parseLong(ae.toString()));break;default:throw Yt.getFormatInstance()}break;case i.MACRO_PDF417_TERMINATOR:n++,s.setLastSegment(!0);break;default:throw Yt.getFormatInstance()}if(-1!==m){var ye=n-m;s.isLastSegment()&&ye--,s.setOptionalData(Jr.copyOfRange(e,m,m+ye))}return n},i.textCompaction=function(e,n,s){for(var c=new Int32Array(2*(e[0]-n)),l=new Int32Array(2*(e[0]-n)),g=0,m=!1;n<e[0]&&!m;){var y=e[n++];if(y<i.TEXT_COMPACTION_MODE_LATCH)c[g]=y/30,c[g+1]=y%30,g+=2;else switch(y){case i.TEXT_COMPACTION_MODE_LATCH:c[g++]=i.TEXT_COMPACTION_MODE_LATCH;break;case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:n--,m=!0;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[g]=i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=e[n++],l[g]=y,g++}}return i.decodeTextCompaction(c,l,g,s),n},i.decodeTextCompaction=function(e,n,s,c){for(var l=di.ALPHA,g=di.ALPHA,m=0;m<s;){var y=e[m],b="";switch(l){case di.ALPHA:if(y<26)b=String.fromCharCode(65+y);else switch(y){case 26:b=" ";break;case i.LL:l=di.LOWER;break;case i.ML:l=di.MIXED;break;case i.PS:g=l,l=di.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=di.ALPHA}break;case di.LOWER:if(y<26)b=String.fromCharCode(97+y);else switch(y){case 26:b=" ";break;case i.AS:g=l,l=di.ALPHA_SHIFT;break;case i.ML:l=di.MIXED;break;case i.PS:g=l,l=di.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=di.ALPHA}break;case di.MIXED:if(y<i.PL)b=i.MIXED_CHARS[y];else switch(y){case i.PL:l=di.PUNCT;break;case 26:b=" ";break;case i.LL:l=di.LOWER;break;case i.AL:l=di.ALPHA;break;case i.PS:g=l,l=di.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=di.ALPHA}break;case di.PUNCT:if(y<i.PAL)b=i.PUNCT_CHARS[y];else switch(y){case i.PAL:l=di.ALPHA;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=di.ALPHA}break;case di.ALPHA_SHIFT:if(l=g,y<26)b=String.fromCharCode(65+y);else switch(y){case 26:b=" ";break;case i.TEXT_COMPACTION_MODE_LATCH:l=di.ALPHA}break;case di.PUNCT_SHIFT:if(l=g,y<i.PAL)b=i.PUNCT_CHARS[y];else switch(y){case i.PAL:l=di.ALPHA;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=di.ALPHA}}""!==b&&c.append(b),m++}},i.byteCompaction=function(e,n,s,c,l){var g=new Kf,m=0,y=0,b=!1;switch(e){case i.BYTE_COMPACTION_MODE_LATCH:for(var P=new Int32Array(6),B=n[c++];c<n[0]&&!b;)switch(P[m++]=B,y=900*y+B,B=n[c++],B){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:c--,b=!0;break;default:if(m%5==0&&m>0){for(var z=0;z<6;++z)g.write(Number(au(y)>>au(8*(5-z))));y=0,m=0}}c===n[0]&&B<i.TEXT_COMPACTION_MODE_LATCH&&(P[m++]=B);for(var K=0;K<m;K++)g.write(P[K]);break;case i.BYTE_COMPACTION_MODE_LATCH_6:for(;c<n[0]&&!b;){var ae=n[c++];if(ae<i.TEXT_COMPACTION_MODE_LATCH)m++,y=900*y+ae;else switch(ae){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:c--,b=!0}if(m%5==0&&m>0){for(z=0;z<6;++z)g.write(Number(au(y)>>au(8*(5-z))));y=0,m=0}}}return l.append(Ce.decode(g.toByteArray(),s)),c},i.numericCompaction=function(e,n,s){for(var c=0,l=!1,g=new Int32Array(i.MAX_NUMERIC_CODEWORDS);n<e[0]&&!l;){var m=e[n++];if(n===e[0]&&(l=!0),m<i.TEXT_COMPACTION_MODE_LATCH)g[c]=m,c++;else switch(m){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:n--,l=!0}(c%i.MAX_NUMERIC_CODEWORDS==0||m===i.NUMERIC_COMPACTION_MODE_LATCH||l)&&c>0&&(s.append(i.decodeBase900toBase10(g,c)),c=0)}return n},i.decodeBase900toBase10=function(e,n){for(var s=au(0),c=0;c<n;c++)s+=i.EXP900[n-c-1]*au(e[c]);var l=s.toString();if("1"!==l.charAt(0))throw new Yt;return l.substring(1)},i.TEXT_COMPACTION_MODE_LATCH=900,i.BYTE_COMPACTION_MODE_LATCH=901,i.NUMERIC_COMPACTION_MODE_LATCH=902,i.BYTE_COMPACTION_MODE_LATCH_6=924,i.ECI_USER_DEFINED=925,i.ECI_GENERAL_PURPOSE=926,i.ECI_CHARSET=927,i.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,i.MACRO_PDF417_TERMINATOR=922,i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,i.MAX_NUMERIC_CODEWORDS=15,i.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,i.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,i.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,i.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,i.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,i.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,i.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,i.PL=25,i.LL=27,i.AS=27,i.ML=28,i.AL=28,i.PS=29,i.PAL=29,i.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",i.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",i.EXP900=Jh()?function Qd(){var i=[];i[0]=au(1);var e=au(900);i[1]=e;for(var n=2;n<16;n++)i[n]=i[n-1]*e;return i}():[],i.NUMBER_OF_SEQUENCE_CODEWORDS=2,i}();var ud=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const ld=function(){function i(){}return i.decode=function(e,n,s,c,l,g,m){for(var B,y=new Fm(e,n,s,c,l),b=null,P=null,z=!0;;z=!1){if(null!=n&&(b=i.getRowIndicatorColumn(e,y,n,!0,g,m)),null!=c&&(P=i.getRowIndicatorColumn(e,y,c,!1,g,m)),null==(B=i.merge(b,P)))throw qe.getNotFoundInstance();var K=B.getBoundingBox();if(!z||null==K||!(K.getMinY()<y.getMinY()||K.getMaxY()>y.getMaxY()))break;y=K}B.setBoundingBox(y);var ae=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,b),B.setDetectionResultColumn(ae,P);for(var ye=null!=b,Re=1;Re<=ae;Re++){var Ve=ye?Re:ae-Re;if(void 0===B.getDetectionResultColumn(Ve)){var Ne=void 0;Ne=0===Ve||Ve===ae?new zf(y,0===Ve):new Gf(y),B.setDetectionResultColumn(Ve,Ne);for(var Ye=-1,at=Ye,Ft=y.getMinY();Ft<=y.getMaxY();Ft++){if((Ye=i.getStartColumn(B,Ve,Ft,ye))<0||Ye>y.getMaxX()){if(-1===at)continue;Ye=at}var $t=i.detectCodeword(e,y.getMinX(),y.getMaxX(),ye,Ye,Ft,g,m);null!=$t&&(Ne.setCodeword(Ft,$t),at=Ye,g=Math.min(g,$t.getWidth()),m=Math.max(m,$t.getWidth()))}}}return i.createDecoderResult(B)},i.merge=function(e,n){if(null==e&&null==n)return null;var s=i.getBarcodeMetadata(e,n);if(null==s)return null;var c=Fm.merge(i.adjustBoundingBox(e),i.adjustBoundingBox(n));return new lg(s,c)},i.adjustBoundingBox=function(e){var n,s;if(null==e)return null;var c=e.getRowHeights();if(null==c)return null;var l=i.getMax(c),g=0;try{for(var m=ud(c),y=m.next();!y.done;y=m.next()){var b=y.value;if(g+=l-b,b>0)break}}catch(K){n={error:K}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}for(var P=e.getCodewords(),B=0;g>0&&null==P[B];B++)g--;var z=0;for(B=c.length-1;B>=0&&(z+=l-c[B],!(c[B]>0));B--);for(B=P.length-1;z>0&&null==P[B];B--)z--;return e.getBoundingBox().addMissingRows(g,z,e.isLeft())},i.getMax=function(e){var n,s,c=-1;try{for(var l=ud(e),g=l.next();!g.done;g=l.next())c=Math.max(c,g.value)}catch(y){n={error:y}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return c},i.getBarcodeMetadata=function(e,n){var s,c;return null==e||null==(s=e.getBarcodeMetadata())?null==n?null:n.getBarcodeMetadata():null==n||null==(c=n.getBarcodeMetadata())?s:s.getColumnCount()!==c.getColumnCount()&&s.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&s.getRowCount()!==c.getRowCount()?null:s},i.getRowIndicatorColumn=function(e,n,s,c,l,g){for(var m=new zf(n,c),y=0;y<2;y++)for(var b=0===y?1:-1,P=Math.trunc(Math.trunc(s.getX())),B=Math.trunc(Math.trunc(s.getY()));B<=n.getMaxY()&&B>=n.getMinY();B+=b){var z=i.detectCodeword(e,0,e.getWidth(),c,P,B,l,g);null!=z&&(m.setCodeword(B,z),P=c?z.getStartX():z.getEndX())}return m},i.adjustCodewordCount=function(e,n){var s=n[0][1],c=s.getValue(),l=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-i.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===c.length){if(l<1||l>ti.MAX_CODEWORDS_IN_BARCODE)throw qe.getNotFoundInstance();s.setValue(l)}else c[0]!==l&&s.setValue(l)},i.createDecoderResult=function(e){var n=i.createBarcodeMatrix(e);i.adjustCodewordCount(e,n);for(var s=new Array,c=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),l=[],g=new Array,m=0;m<e.getBarcodeRowCount();m++)for(var y=0;y<e.getBarcodeColumnCount();y++){var b=n[m][y+1].getValue(),P=m*e.getBarcodeColumnCount()+y;0===b.length?s.push(P):1===b.length?c[P]=b[0]:(g.push(P),l.push(b))}for(var B=new Array(l.length),z=0;z<B.length;z++)B[z]=l[z];return i.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),c,ti.toIntArray(s),ti.toIntArray(g),B)},i.createDecoderResultFromAmbiguousValues=function(e,n,s,c,l){for(var g=new Int32Array(c.length),m=100;m-- >0;){for(var y=0;y<g.length;y++)n[c[y]]=l[y][g[y]];try{return i.decodeCodewords(n,e,s)}catch(P){if(!(P instanceof ui))throw P}if(0===g.length)throw ui.getChecksumInstance();for(y=0;y<g.length;y++){if(g[y]<l[y].length-1){g[y]++;break}if(g[y]=0,y===g.length-1)throw ui.getChecksumInstance()}}throw ui.getChecksumInstance()},i.createBarcodeMatrix=function(e){for(var n,s,c,l,g=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),m=0;m<g.length;m++)for(var y=0;y<g[m].length;y++)g[m][y]=new $f;var b=0;try{for(var P=ud(e.getDetectionResultColumns()),B=P.next();!B.done;B=P.next()){var z=B.value;if(null!=z)try{for(var K=(c=void 0,ud(z.getCodewords())),ae=K.next();!ae.done;ae=K.next()){var ye=ae.value;if(null!=ye){var Re=ye.getRowNumber();if(Re>=0){if(Re>=g.length)continue;g[Re][b].setValue(ye.getValue())}}}}catch(Ve){c={error:Ve}}finally{try{ae&&!ae.done&&(l=K.return)&&l.call(K)}finally{if(c)throw c.error}}b++}}catch(Ve){n={error:Ve}}finally{try{B&&!B.done&&(s=P.return)&&s.call(P)}finally{if(n)throw n.error}}return g},i.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},i.getStartColumn=function(e,n,s,c){var l,g,m=c?1:-1,y=null;if(i.isValidBarcodeColumn(e,n-m)&&(y=e.getDetectionResultColumn(n-m).getCodeword(s)),null!=y)return c?y.getEndX():y.getStartX();if(null!=(y=e.getDetectionResultColumn(n).getCodewordNearby(s)))return c?y.getStartX():y.getEndX();if(i.isValidBarcodeColumn(e,n-m)&&(y=e.getDetectionResultColumn(n-m).getCodewordNearby(s)),null!=y)return c?y.getEndX():y.getStartX();for(var b=0;i.isValidBarcodeColumn(e,n-m);){n-=m;try{for(var P=(l=void 0,ud(e.getDetectionResultColumn(n).getCodewords())),B=P.next();!B.done;B=P.next()){var z=B.value;if(null!=z)return(c?z.getEndX():z.getStartX())+m*b*(z.getEndX()-z.getStartX())}}catch(K){l={error:K}}finally{try{B&&!B.done&&(g=P.return)&&g.call(P)}finally{if(l)throw l.error}}b++}return c?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},i.detectCodeword=function(e,n,s,c,l,g,m,y){l=i.adjustCodewordStartColumn(e,n,s,c,l,g);var b=i.getModuleBitCount(e,n,s,c,l,g);if(null==b)return null;var P,B=Ir.sum(b);if(c)P=l+B;else{for(var z=0;z<b.length/2;z++){var K=b[z];b[z]=b[b.length-1-z],b[b.length-1-z]=K}l=(P=l)-B}if(!i.checkCodewordSkew(B,m,y))return null;var ae=Qh.getDecodedValue(b),ye=ti.getCodeword(ae);return-1===ye?null:new Xh(l,P,i.getCodewordBucketNumber(ae),ye)},i.getModuleBitCount=function(e,n,s,c,l,g){for(var m=l,y=new Int32Array(8),b=0,P=c?1:-1,B=c;(c?m<s:m>=n)&&b<y.length;)e.get(m,g)===B?(y[b]++,m+=P):(b++,B=!B);return b===y.length||m===(c?s:n)&&b===y.length-1?y:null},i.getNumberOfECCodeWords=function(e){return 2<<e},i.adjustCodewordStartColumn=function(e,n,s,c,l,g){for(var m=l,y=c?-1:1,b=0;b<2;b++){for(;(c?m>=n:m<s)&&c===e.get(m,g);){if(Math.abs(l-m)>i.CODEWORD_SKEW_SIZE)return l;m+=y}y=-y,c=!c}return m},i.checkCodewordSkew=function(e,n,s){return n-i.CODEWORD_SKEW_SIZE<=e&&e<=s+i.CODEWORD_SKEW_SIZE},i.decodeCodewords=function(e,n,s){if(0===e.length)throw Yt.getFormatInstance();var c=1<<n+1,l=i.correctErrors(e,s,c);i.verifyCodewordCount(e,c);var g=tp.decode(e,""+n);return g.setErrorsCorrected(l),g.setErasures(s.length),g},i.correctErrors=function(e,n,s){if(null!=n&&n.length>s/2+i.MAX_ERRORS||s<0||s>i.MAX_EC_CODEWORDS)throw ui.getChecksumInstance();return i.errorCorrection.decode(e,s,n)},i.verifyCodewordCount=function(e,n){if(e.length<4)throw Yt.getFormatInstance();var s=e[0];if(s>e.length)throw Yt.getFormatInstance();if(0===s){if(!(n<e.length))throw Yt.getFormatInstance();e[0]=e.length-n}},i.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),s=0,c=n.length-1;!((1&e)!==s&&(s=1&e,c--,c<0));)n[c]++,e>>=1;return n},i.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},i.getCodewordBucketNumber_number=function(e){return i.getCodewordBucketNumber(i.getBitCountForCodeword(e))},i.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},i.toString=function(e){for(var n=new ag,s=0;s<e.length;s++){n.format("Row %2d: ",s);for(var c=0;c<e[s].length;c++){var l=e[s][c];0===l.getValue().length?n.format("        ",null):n.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}n.format("%n")}return n.toString()},i.CODEWORD_SKEW_SIZE=2,i.MAX_ERRORS=3,i.MAX_EC_CODEWORDS=512,i.errorCorrection=new km,i}(),Xf=function(){function i(){}return i.prototype.decode=function(e,n){void 0===n&&(n=null);var s=i.decode(e,n,!1);if(null==s||0===s.length||null==s[0])throw qe.getNotFoundInstance();return s[0]},i.prototype.decodeMultiple=function(e,n){void 0===n&&(n=null);try{return i.decode(e,n,!0)}catch(s){throw s instanceof Yt||s instanceof ui?qe.getNotFoundInstance():s}},i.decode=function(e,n,s){var c,l,g=new Array,m=Wh.detectMultiple(e,n,s);try{for(var y=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(m.getPoints()),b=y.next();!b.done;b=y.next()){var P=b.value,B=ld.decode(m.getBits(),P[4],P[5],P[6],P[7],i.getMinCodewordWidth(P),i.getMaxCodewordWidth(P)),z=new ao(B.getText(),B.getRawBytes(),void 0,P,sn.PDF_417);z.putMetadata(Yi.ERROR_CORRECTION_LEVEL,B.getECLevel());var K=B.getOther();null!=K&&z.putMetadata(Yi.PDF417_EXTRA_METADATA,K),g.push(z)}}catch(ae){c={error:ae}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(c)throw c.error}}return g.map(function(ae){return ae})},i.getMaxWidth=function(e,n){return null==e||null==n?0:Math.trunc(Math.abs(e.getX()-n.getX()))},i.getMinWidth=function(e,n){return null==e||null==n?ur.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},i.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(i.getMaxWidth(e[0],e[4]),i.getMaxWidth(e[6],e[2])*ti.MODULES_IN_CODEWORD/ti.MODULES_IN_STOP_PATTERN),Math.max(i.getMaxWidth(e[1],e[5]),i.getMaxWidth(e[7],e[3])*ti.MODULES_IN_CODEWORD/ti.MODULES_IN_STOP_PATTERN)))},i.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(i.getMinWidth(e[0],e[4]),i.getMinWidth(e[6],e[2])*ti.MODULES_IN_CODEWORD/ti.MODULES_IN_STOP_PATTERN),Math.min(i.getMinWidth(e[1],e[5]),i.getMinWidth(e[7],e[3])*ti.MODULES_IN_CODEWORD/ti.MODULES_IN_STOP_PATTERN)))},i.prototype.reset=function(){},i}();var Yd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const pg=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Yd(e,i),e.kind="ReaderException",e}(Dn);var gg=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const zm=function(){function i(){}return i.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},i.prototype.decodeWithState=function(e){return null==this.readers&&this.setHints(null),this.decodeInternal(e)},i.prototype.setHints=function(e){this.hints=e;var n=null!=e&&void 0!==e.get(Un.TRY_HARDER),s=null==e?null:e.get(Un.POSSIBLE_FORMATS),c=new Array;if(null!=s){var l=s.some(function(g){return g===sn.UPC_A||g===sn.UPC_E||g===sn.EAN_13||g===sn.EAN_8||g===sn.CODABAR||g===sn.CODE_39||g===sn.CODE_93||g===sn.CODE_128||g===sn.ITF||g===sn.RSS_14||g===sn.RSS_EXPANDED});l&&!n&&c.push(new Ji(e)),s.includes(sn.QR_CODE)&&c.push(new zd),s.includes(sn.DATA_MATRIX)&&c.push(new Vf),s.includes(sn.AZTEC)&&c.push(new Pt),s.includes(sn.PDF_417)&&c.push(new Xf),l&&n&&c.push(new Ji(e))}0===c.length&&(n||c.push(new Ji(e)),c.push(new zd),c.push(new Vf),c.push(new Pt),c.push(new Xf),n&&c.push(new Ji(e))),this.readers=c},i.prototype.reset=function(){var e,n;if(null!==this.readers)try{for(var s=gg(this.readers),c=s.next();!c.done;c=s.next())c.value.reset()}catch(g){e={error:g}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},i.prototype.decodeInternal=function(e){var n,s;if(null===this.readers)throw new pg("No readers where selected, nothing can be read.");try{for(var c=gg(this.readers),l=c.next();!l.done;l=c.next()){var g=l.value;try{return g.decode(e,this.hints)}catch(m){if(m instanceof pg)continue}}}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}throw new qe("No MultiFormat Readers were able to detect the code.")},i}();var R0=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Wm=(function(i){function e(n,s){void 0===n&&(n=null),void 0===s&&(s=500);var l=new zm;return l.setHints(n),i.call(this,l,s)||this}R0(e,i),e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)}}(oa),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),mg=(function(i){Wm(function e(n){return void 0===n&&(n=500),i.call(this,new Xf,n)||this},i)}(oa),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),_g=(function(i){mg(function e(n){return void 0===n&&(n=500),i.call(this,new zd,n)||this},i)}(oa),function(i){return i[i.ERROR_CORRECTION=0]="ERROR_CORRECTION",i[i.CHARACTER_SET=1]="CHARACTER_SET",i[i.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",i[i.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",i[i.MIN_SIZE=4]="MIN_SIZE",i[i.MAX_SIZE=5]="MAX_SIZE",i[i.MARGIN=6]="MARGIN",i[i.PDF417_COMPACT=7]="PDF417_COMPACT",i[i.PDF417_COMPACTION=8]="PDF417_COMPACTION",i[i.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",i[i.AZTEC_LAYERS=10]="AZTEC_LAYERS",i[i.QR_VERSION=11]="QR_VERSION",i[i.GS1_FORMAT=12]="GS1_FORMAT",i[i.FORCE_C40=13]="FORCE_C40",i}(_g||{}));const br=_g,vg=function(){function i(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new zo(e,Int32Array.from([1])))}return i.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var s=n[n.length-1],c=this.field,l=n.length;l<=e;l++){var g=s.multiply(new zo(c,Int32Array.from([1,c.exp(l-1+c.getGeneratorBase())])));n.push(g),s=g}return n[e]},i.prototype.encode=function(e,n){if(0===n)throw new ln("No error correction bytes");var s=e.length-n;if(s<=0)throw new ln("No data bytes provided");var c=this.buildGenerator(n),l=new Int32Array(s);Ur.arraycopy(e,0,l,0,s);for(var g=new zo(this.field,l),y=(g=g.multiplyByMonomial(n,1)).divide(c)[1].getCoefficients(),b=n-y.length,P=0;P<b;P++)e[s+P]=0;Ur.arraycopy(y,0,e,s+b,y.length)},i}(),Zd=function(){function i(){}return i.applyMaskPenaltyRule1=function(e){return i.applyMaskPenaltyRule1Internal(e,!0)+i.applyMaskPenaltyRule1Internal(e,!1)},i.applyMaskPenaltyRule2=function(e){for(var n=0,s=e.getArray(),c=e.getWidth(),l=e.getHeight(),g=0;g<l-1;g++)for(var m=s[g],y=0;y<c-1;y++){var b=m[y];b===m[y+1]&&b===s[g+1][y]&&b===s[g+1][y+1]&&n++}return i.N2*n},i.applyMaskPenaltyRule3=function(e){for(var n=0,s=e.getArray(),c=e.getWidth(),l=e.getHeight(),g=0;g<l;g++)for(var m=0;m<c;m++){var y=s[g];m+6<c&&1===y[m]&&0===y[m+1]&&1===y[m+2]&&1===y[m+3]&&1===y[m+4]&&0===y[m+5]&&1===y[m+6]&&(i.isWhiteHorizontal(y,m-4,m)||i.isWhiteHorizontal(y,m+7,m+11))&&n++,g+6<l&&1===s[g][m]&&0===s[g+1][m]&&1===s[g+2][m]&&1===s[g+3][m]&&1===s[g+4][m]&&0===s[g+5][m]&&1===s[g+6][m]&&(i.isWhiteVertical(s,m,g-4,g)||i.isWhiteVertical(s,m,g+7,g+11))&&n++}return n*i.N3},i.isWhiteHorizontal=function(e,n,s){n=Math.max(n,0),s=Math.min(s,e.length);for(var c=n;c<s;c++)if(1===e[c])return!1;return!0},i.isWhiteVertical=function(e,n,s,c){s=Math.max(s,0),c=Math.min(c,e.length);for(var l=s;l<c;l++)if(1===e[l][n])return!1;return!0},i.applyMaskPenaltyRule4=function(e){for(var n=0,s=e.getArray(),c=e.getWidth(),l=e.getHeight(),g=0;g<l;g++)for(var m=s[g],y=0;y<c;y++)1===m[y]&&n++;var b=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*n-b)/b)*i.N4},i.getDataMaskBit=function(e,n,s){var c,l;switch(e){case 0:c=s+n&1;break;case 1:c=1&s;break;case 2:c=n%3;break;case 3:c=(s+n)%3;break;case 4:c=Math.floor(s/2)+Math.floor(n/3)&1;break;case 5:c=(1&(l=s*n))+l%3;break;case 6:c=(1&(l=s*n))+l%3&1;break;case 7:c=(l=s*n)%3+(s+n&1)&1;break;default:throw new ln("Invalid mask pattern: "+e)}return 0===c},i.applyMaskPenaltyRule1Internal=function(e,n){for(var s=0,c=n?e.getHeight():e.getWidth(),l=n?e.getWidth():e.getHeight(),g=e.getArray(),m=0;m<c;m++){for(var y=0,b=-1,P=0;P<l;P++){var B=n?g[m][P]:g[P][m];B===b?y++:(y>=5&&(s+=i.N1+(y-5)),y=1,b=B)}y>=5&&(s+=i.N1+(y-5))}return s},i.N1=3,i.N2=3,i.N3=40,i.N4=10,i}(),qm=function(){function i(e,n){this.width=e,this.height=n;for(var s=new Array(n),c=0;c!==n;c++)s[c]=new Uint8Array(e);this.bytes=s}return i.prototype.getHeight=function(){return this.height},i.prototype.getWidth=function(){return this.width},i.prototype.get=function(e,n){return this.bytes[n][e]},i.prototype.getArray=function(){return this.bytes},i.prototype.setNumber=function(e,n,s){this.bytes[n][e]=s},i.prototype.setBoolean=function(e,n,s){this.bytes[n][e]=s?1:0},i.prototype.clear=function(e){var n,s;try{for(var c=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.bytes),l=c.next();!l.done;l=c.next())Jr.fill(l.value,e)}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}},i.prototype.equals=function(e){if(!(e instanceof i))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var s=0,c=this.height;s<c;++s)for(var l=this.bytes[s],g=n.bytes[s],m=0,y=this.width;m<y;++m)if(l[m]!==g[m])return!1;return!0},i.prototype.toString=function(){for(var e=new dn,n=0,s=this.height;n<s;++n){for(var c=this.bytes[n],l=0,g=this.width;l<g;++l)switch(c[l]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()},i}(),kr=function(){function i(){this.maskPattern=-1}return i.prototype.getMode=function(){return this.mode},i.prototype.getECLevel=function(){return this.ecLevel},i.prototype.getVersion=function(){return this.version},i.prototype.getMaskPattern=function(){return this.maskPattern},i.prototype.getMatrix=function(){return this.matrix},i.prototype.toString=function(){var e=new dn;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},i.prototype.setMode=function(e){this.mode=e},i.prototype.setECLevel=function(e){this.ecLevel=e},i.prototype.setVersion=function(e){this.version=e},i.prototype.setMaskPattern=function(e){this.maskPattern=e},i.prototype.setMatrix=function(e){this.matrix=e},i.isValidMaskPattern=function(e){return e>=0&&e<i.NUM_MASK_PATTERNS},i.NUM_MASK_PATTERNS=8,i}();var dd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const bi=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return dd(e,i),e.kind="WriterException",e}(Dn),os=function(){function i(){}return i.clearMatrix=function(e){e.clear(255)},i.buildMatrix=function(e,n,s,c,l){i.clearMatrix(l),i.embedBasicPatterns(s,l),i.embedTypeInfo(n,c,l),i.maybeEmbedVersionInfo(s,l),i.embedDataBits(e,c,l)},i.embedBasicPatterns=function(e,n){i.embedPositionDetectionPatternsAndSeparators(n),i.embedDarkDotAtLeftBottomCorner(n),i.maybeEmbedPositionAdjustmentPatterns(e,n),i.embedTimingPatterns(n)},i.embedTypeInfo=function(e,n,s){var c=new Ci;i.makeTypeInfoBits(e,n,c);for(var l=0,g=c.getSize();l<g;++l){var m=c.get(c.getSize()-1-l),y=i.TYPE_INFO_COORDINATES[l];if(s.setBoolean(y[0],y[1],m),l<8){var B=s.getWidth()-l-1;s.setBoolean(B,z=8,m)}else{B=8;var z=s.getHeight()-7+(l-8);s.setBoolean(B,z,m)}}},i.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var s=new Ci;i.makeVersionInfoBits(e,s);for(var c=17,l=0;l<6;++l)for(var g=0;g<3;++g){var m=s.get(c);c--,n.setBoolean(l,n.getHeight()-11+g,m),n.setBoolean(n.getHeight()-11+g,l,m)}}},i.embedDataBits=function(e,n,s){for(var c=0,l=-1,g=s.getWidth()-1,m=s.getHeight()-1;g>0;){for(6===g&&(g-=1);m>=0&&m<s.getHeight();){for(var y=0;y<2;++y){var b=g-y;if(i.isEmpty(s.get(b,m))){var P=void 0;c<e.getSize()?(P=e.get(c),++c):P=!1,255!==n&&Zd.getDataMaskBit(n,b,m)&&(P=!P),s.setBoolean(b,m,P)}}m+=l}m+=l=-l,g-=2}if(c!==e.getSize())throw new bi("Not all bits consumed: "+c+"/"+e.getSize())},i.findMSBSet=function(e){return 32-ur.numberOfLeadingZeros(e)},i.calculateBCHCode=function(e,n){if(0===n)throw new ln("0 polynomial");var s=i.findMSBSet(n);for(e<<=s-1;i.findMSBSet(e)>=s;)e^=n<<i.findMSBSet(e)-s;return e},i.makeTypeInfoBits=function(e,n,s){if(!kr.isValidMaskPattern(n))throw new bi("Invalid mask pattern");var c=e.getBits()<<3|n;s.appendBits(c,5);var l=i.calculateBCHCode(c,i.TYPE_INFO_POLY);s.appendBits(l,10);var g=new Ci;if(g.appendBits(i.TYPE_INFO_MASK_PATTERN,15),s.xor(g),15!==s.getSize())throw new bi("should not happen but we got: "+s.getSize())},i.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var s=i.calculateBCHCode(e.getVersionNumber(),i.VERSION_INFO_POLY);if(n.appendBits(s,12),18!==n.getSize())throw new bi("should not happen but we got: "+n.getSize())},i.isEmpty=function(e){return 255===e},i.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var s=(n+1)%2;i.isEmpty(e.get(n,6))&&e.setNumber(n,6,s),i.isEmpty(e.get(6,n))&&e.setNumber(6,n,s)}},i.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new bi;e.setNumber(8,e.getHeight()-8,1)},i.embedHorizontalSeparationPattern=function(e,n,s){for(var c=0;c<8;++c){if(!i.isEmpty(s.get(e+c,n)))throw new bi;s.setNumber(e+c,n,0)}},i.embedVerticalSeparationPattern=function(e,n,s){for(var c=0;c<7;++c){if(!i.isEmpty(s.get(e,n+c)))throw new bi;s.setNumber(e,n+c,0)}},i.embedPositionAdjustmentPattern=function(e,n,s){for(var c=0;c<5;++c)for(var l=i.POSITION_ADJUSTMENT_PATTERN[c],g=0;g<5;++g)s.setNumber(e+g,n+c,l[g])},i.embedPositionDetectionPattern=function(e,n,s){for(var c=0;c<7;++c)for(var l=i.POSITION_DETECTION_PATTERN[c],g=0;g<7;++g)s.setNumber(e+g,n+c,l[g])},i.embedPositionDetectionPatternsAndSeparators=function(e){var n=i.POSITION_DETECTION_PATTERN[0].length;i.embedPositionDetectionPattern(0,0,e),i.embedPositionDetectionPattern(e.getWidth()-n,0,e),i.embedPositionDetectionPattern(0,e.getWidth()-n,e),i.embedHorizontalSeparationPattern(0,7,e),i.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),i.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),i.embedVerticalSeparationPattern(7,0,e),i.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),i.embedVerticalSeparationPattern(7,e.getHeight()-7,e)},i.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var s=e.getVersionNumber()-1,c=i.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s],l=0,g=c.length;l!==g;l++){var m=c[l];if(m>=0)for(var y=0;y!==g;y++){var b=c[y];b>=0&&i.isEmpty(n.get(b,m))&&i.embedPositionAdjustmentPattern(b-2,m-2,n)}}},i.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),i.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),i.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),i.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),i.VERSION_INFO_POLY=7973,i.TYPE_INFO_POLY=1335,i.TYPE_INFO_MASK_PATTERN=21522,i}(),Du=function(){function i(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return i.prototype.getDataBytes=function(){return this.dataBytes},i.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},i}();var rp=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Qf=function(){function i(){}return i.calculateMaskPenalty=function(e){return Zd.applyMaskPenaltyRule1(e)+Zd.applyMaskPenaltyRule2(e)+Zd.applyMaskPenaltyRule3(e)+Zd.applyMaskPenaltyRule4(e)},i.encode=function(e,n,s){void 0===s&&(s=null);var c=i.DEFAULT_BYTE_MODE_ENCODING,l=null!==s&&void 0!==s.get(br.CHARACTER_SET);l&&(c=s.get(br.CHARACTER_SET).toString());var g=this.chooseMode(e,c),m=new Ci;if(g===eo.BYTE&&(l||i.DEFAULT_BYTE_MODE_ENCODING!==c)){var y=po.getCharacterSetECIByName(c);void 0!==y&&this.appendECI(y,m)}this.appendModeInfo(g,m);var P,b=new Ci;if(this.appendBytes(e,g,b,c),null!==s&&void 0!==s.get(br.QR_VERSION)){var B=Number.parseInt(s.get(br.QR_VERSION).toString(),10);P=Fs.getVersionForNumber(B);var z=this.calculateBitsNeeded(g,m,b,P);if(!this.willFit(z,P,n))throw new bi("Data too big for requested version")}else P=this.recommendVersion(n,g,m,b);var K=new Ci;K.appendBitArray(m);var ae=g===eo.BYTE?b.getSizeInBytes():e.length;this.appendLengthInfo(ae,P,g,K),K.appendBitArray(b);var ye=P.getECBlocksForLevel(n),Re=P.getTotalCodewords()-ye.getTotalECCodewords();this.terminateBits(Re,K);var Ve=this.interleaveWithECBytes(K,P.getTotalCodewords(),Re,ye.getNumBlocks()),Ne=new kr;Ne.setECLevel(n),Ne.setMode(g),Ne.setVersion(P);var Ye=P.getDimensionForVersion(),at=new qm(Ye,Ye),Ft=this.chooseMaskPattern(Ve,n,P,at);return Ne.setMaskPattern(Ft),os.buildMatrix(Ve,n,P,Ft,at),Ne.setMatrix(at),Ne},i.recommendVersion=function(e,n,s,c){var l=this.calculateBitsNeeded(n,s,c,Fs.getVersionForNumber(1)),g=this.chooseVersion(l,e),m=this.calculateBitsNeeded(n,s,c,g);return this.chooseVersion(m,e)},i.calculateBitsNeeded=function(e,n,s,c){return n.getSize()+e.getCharacterCountBits(c)+s.getSize()},i.getAlphanumericCode=function(e){return e<i.ALPHANUMERIC_TABLE.length?i.ALPHANUMERIC_TABLE[e]:-1},i.chooseMode=function(e,n){if(void 0===n&&(n=null),po.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return eo.KANJI;for(var s=!1,c=!1,l=0,g=e.length;l<g;++l){var m=e.charAt(l);if(i.isDigit(m))s=!0;else{if(-1===this.getAlphanumericCode(m.charCodeAt(0)))return eo.BYTE;c=!0}}return c?eo.ALPHANUMERIC:s?eo.NUMERIC:eo.BYTE},i.isOnlyDoubleByteKanji=function(e){var n;try{n=Ce.encode(e,po.SJIS)}catch{return!1}var s=n.length;if(s%2!=0)return!1;for(var c=0;c<s;c+=2){var l=255&n[c];if((l<129||l>159)&&(l<224||l>235))return!1}return!0},i.chooseMaskPattern=function(e,n,s,c){for(var l=Number.MAX_SAFE_INTEGER,g=-1,m=0;m<kr.NUM_MASK_PATTERNS;m++){os.buildMatrix(e,n,s,m,c);var y=this.calculateMaskPenalty(c);y<l&&(l=y,g=m)}return g},i.chooseVersion=function(e,n){for(var s=1;s<=40;s++){var c=Fs.getVersionForNumber(s);if(i.willFit(e,c,n))return c}throw new bi("Data too big")},i.willFit=function(e,n,s){return n.getTotalCodewords()-n.getECBlocksForLevel(s).getTotalECCodewords()>=(e+7)/8},i.terminateBits=function(e,n){var s=8*e;if(n.getSize()>s)throw new bi("data bits cannot fit in the QR Code"+n.getSize()+" > "+s);for(var c=0;c<4&&n.getSize()<s;++c)n.appendBit(!1);var l=7&n.getSize();if(l>0)for(c=l;c<8;c++)n.appendBit(!1);var g=e-n.getSizeInBytes();for(c=0;c<g;++c)n.appendBits(1&c?17:236,8);if(n.getSize()!==s)throw new bi("Bits size does not equal capacity")},i.getNumDataBytesAndNumECBytesForBlockID=function(e,n,s,c,l,g){if(c>=s)throw new bi("Block ID too large");var m=e%s,y=s-m,b=Math.floor(e/s),P=b+1,B=Math.floor(n/s),z=B+1,K=b-B,ae=P-z;if(K!==ae)throw new bi("EC bytes mismatch");if(s!==y+m)throw new bi("RS blocks mismatch");if(e!==(B+K)*y+(z+ae)*m)throw new bi("Total bytes mismatch");c<y?(l[0]=B,g[0]=K):(l[0]=z,g[0]=ae)},i.interleaveWithECBytes=function(e,n,s,c){var l,g,m,y;if(e.getSizeInBytes()!==s)throw new bi("Number of bits and data bytes does not match");for(var b=0,P=0,B=0,z=new Array,K=0;K<c;++K){var ae=new Int32Array(1),ye=new Int32Array(1);i.getNumDataBytesAndNumECBytesForBlockID(n,s,c,K,ae,ye);var Re=ae[0],Ve=new Uint8Array(Re);e.toBytes(8*b,Ve,0,Re);var Ne=i.generateECBytes(Ve,ye[0]);z.push(new Du(Ve,Ne)),P=Math.max(P,Re),B=Math.max(B,Ne.length),b+=ae[0]}if(s!==b)throw new bi("Data bytes does not match offset");var Ye=new Ci;for(K=0;K<P;++K)try{for(var at=(l=void 0,rp(z)),Ft=at.next();!Ft.done;Ft=at.next())K<(Ve=Ft.value.getDataBytes()).length&&Ye.appendBits(Ve[K],8)}catch(ir){l={error:ir}}finally{try{Ft&&!Ft.done&&(g=at.return)&&g.call(at)}finally{if(l)throw l.error}}for(K=0;K<B;++K)try{for(var Zt=(m=void 0,rp(z)),pn=Zt.next();!pn.done;pn=Zt.next())K<(Ne=pn.value.getErrorCorrectionBytes()).length&&Ye.appendBits(Ne[K],8)}catch(ir){m={error:ir}}finally{try{pn&&!pn.done&&(y=Zt.return)&&y.call(Zt)}finally{if(m)throw m.error}}if(n!==Ye.getSizeInBytes())throw new bi("Interleaving error: "+n+" and "+Ye.getSizeInBytes()+" differ.");return Ye},i.generateECBytes=function(e,n){for(var s=e.length,c=new Int32Array(s+n),l=0;l<s;l++)c[l]=255&e[l];new vg(pi.QR_CODE_FIELD_256).encode(c,n);var g=new Uint8Array(n);for(l=0;l<n;l++)g[l]=c[s+l];return g},i.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},i.appendLengthInfo=function(e,n,s,c){var l=s.getCharacterCountBits(n);if(e>=1<<l)throw new bi(e+" is bigger than "+((1<<l)-1));c.appendBits(e,l)},i.appendBytes=function(e,n,s,c){switch(n){case eo.NUMERIC:i.appendNumericBytes(e,s);break;case eo.ALPHANUMERIC:i.appendAlphanumericBytes(e,s);break;case eo.BYTE:i.append8BitBytes(e,s,c);break;case eo.KANJI:i.appendKanjiBytes(e,s);break;default:throw new bi("Invalid mode: "+n)}},i.getDigit=function(e){return e.charCodeAt(0)-48},i.isDigit=function(e){var n=i.getDigit(e);return n>=0&&n<=9},i.appendNumericBytes=function(e,n){for(var s=e.length,c=0;c<s;){var l=i.getDigit(e.charAt(c));if(c+2<s){var g=i.getDigit(e.charAt(c+1)),m=i.getDigit(e.charAt(c+2));n.appendBits(100*l+10*g+m,10),c+=3}else c+1<s?(g=i.getDigit(e.charAt(c+1)),n.appendBits(10*l+g,7),c+=2):(n.appendBits(l,4),c++)}},i.appendAlphanumericBytes=function(e,n){for(var s=e.length,c=0;c<s;){var l=i.getAlphanumericCode(e.charCodeAt(c));if(-1===l)throw new bi;if(c+1<s){var g=i.getAlphanumericCode(e.charCodeAt(c+1));if(-1===g)throw new bi;n.appendBits(45*l+g,11),c+=2}else n.appendBits(l,6),c++}},i.append8BitBytes=function(e,n,s){var c;try{c=Ce.encode(e,s)}catch(y){throw new bi(y)}for(var l=0,g=c.length;l!==g;l++)n.appendBits(c[l],8)},i.appendKanjiBytes=function(e,n){var s;try{s=Ce.encode(e,po.SJIS)}catch(B){throw new bi(B)}for(var c=s.length,l=0;l<c;l+=2){var y=(255&s[l])<<8&4294967295|255&s[l+1],b=-1;if(y>=33088&&y<=40956?b=y-33088:y>=57408&&y<=60351&&(b=y-49472),-1===b)throw new bi("Invalid byte sequence");n.appendBits(192*(b>>8)+(255&b),13)}},i.appendECI=function(e,n){n.appendBits(eo.ECI.getBits(),4),n.appendBits(e.getValue(),8)},i.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),i.DEFAULT_BYTE_MODE_ENCODING=po.UTF8.getName(),i}();!function(){function i(){}i.prototype.write=function(e,n,s,c){if(void 0===c&&(c=null),0===e.length)throw new ln("Found empty contents");if(n<0||s<0)throw new ln("Requested dimensions are too small: "+n+"x"+s);var l=eu.L,g=i.QUIET_ZONE_SIZE;null!==c&&(void 0!==c.get(br.ERROR_CORRECTION)&&(l=eu.fromString(c.get(br.ERROR_CORRECTION).toString())),void 0!==c.get(br.MARGIN)&&(g=Number.parseInt(c.get(br.MARGIN).toString(),10)));var m=Qf.encode(e,l,c);return this.renderResult(m,n,s,g)},i.prototype.writeToDom=function(e,n,s,c,l){void 0===l&&(l=null),"string"==typeof e&&(e=document.querySelector(e));var g=this.write(n,s,c,l);e&&e.appendChild(g)},i.prototype.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new gs;for(var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),ye=this.createSVGElement(P,B),Re=0,Ve=ae;Re<m;Re++,Ve+=z)for(var Ne=0,Ye=K;Ne<g;Ne++,Ye+=z)if(1===l.get(Ne,Re)){var at=this.createSvgRectElement(Ye,Ve,z,z);ye.appendChild(at)}return ye},i.prototype.createSVGElement=function(e,n){var s=document.createElementNS(i.SVG_NS,"svg");return s.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width",n.toString()),s},i.prototype.createSvgRectElement=function(e,n,s,c){var l=document.createElementNS(i.SVG_NS,"rect");return l.setAttributeNS(null,"x",e.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",c.toString()),l.setAttributeNS(null,"fill","#000000"),l},i.QUIET_ZONE_SIZE=4,i.SVG_NS="http://www.w3.org/2000/svg"}();!function(){function i(){}i.prototype.encode=function(e,n,s,c,l){if(0===e.length)throw new ln("Found empty contents");if(n!==sn.QR_CODE)throw new ln("Can only encode QR_CODE, but got "+n);if(s<0||c<0)throw new ln("Requested dimensions are too small: "+s+"x"+c);var g=eu.L,m=i.QUIET_ZONE_SIZE;null!==l&&(void 0!==l.get(br.ERROR_CORRECTION)&&(g=eu.fromString(l.get(br.ERROR_CORRECTION).toString())),void 0!==l.get(br.MARGIN)&&(m=Number.parseInt(l.get(br.MARGIN).toString(),10)));var y=Qf.encode(e,g,l);return i.renderResult(y,s,c,m)},i.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new gs;for(var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),ye=new tr(P,B),Re=0,Ve=ae;Re<m;Re++,Ve+=z)for(var Ne=0,Ye=K;Ne<g;Ne++,Ye+=z)1===l.get(Ne,Re)&&ye.setRegion(Ye,Ve,z,z);return ye},i.QUIET_ZONE_SIZE=4}();var s1=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();!function(i){function e(n,s,c,l,g,m,y,b){var P=i.call(this,m,y)||this;if(P.yuvData=n,P.dataWidth=s,P.dataHeight=c,P.left=l,P.top=g,l+m>s||g+y>c)throw new ln("Crop rectangle does not fit within image data.");return b&&P.reverseHorizontal(m,y),P}s1(e,i),e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new ln("Requested row is outside the image: "+n);var c=this.getWidth();return(null==s||s.length<c)&&(s=new Uint8ClampedArray(c)),Ur.arraycopy(this.yuvData,(n+this.top)*this.dataWidth+this.left,s,0,c),s},e.prototype.getMatrix=function(){var n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.yuvData;var c=n*s,l=new Uint8ClampedArray(c),g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Ur.arraycopy(this.yuvData,g,l,0,c),l;for(var m=0;m<s;m++)Ur.arraycopy(this.yuvData,g,l,m*n,n),g+=this.dataWidth;return l},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+s,c,l,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(n*s),l=this.yuvData,g=this.top*this.dataWidth+this.left,m=0;m<s;m++){for(var y=m*n,b=0;b<n;b++)c[y+b]=4278190080|65793*(255&l[g+b*e.THUMBNAIL_SCALE_FACTOR]);g+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return c},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,s){for(var c=this.yuvData,l=0,g=this.top*this.dataWidth+this.left;l<s;l++,g+=this.dataWidth)for(var m=g+n/2,y=g,b=g+n-1;y<m;y++,b--){var P=c[y];c[y]=c[b],c[b]=P}},e.prototype.invert=function(){return new Oo(this)},e.THUMBNAIL_SCALE_FACTOR=2}(mn);var Xm=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();!function(i){function e(n,s,c,l,g,m,y){var b=i.call(this,s,c)||this;if(b.dataWidth=l,b.dataHeight=g,b.left=m,b.top=y,4===n.BYTES_PER_ELEMENT){for(var P=s*c,B=new Uint8ClampedArray(P),z=0;z<P;z++){var K=n[z];B[z]=((K>>16&255)+(K>>7&510)+(255&K))/4&255}b.luminances=B}else b.luminances=n;if(void 0===l&&(b.dataWidth=s),void 0===g&&(b.dataHeight=c),void 0===m&&(b.left=0),void 0===y&&(b.top=0),b.left+s>b.dataWidth||b.top+c>b.dataHeight)throw new ln("Crop rectangle does not fit within image data.");return b}Xm(e,i),e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new ln("Requested row is outside the image: "+n);var c=this.getWidth();return(null==s||s.length<c)&&(s=new Uint8ClampedArray(c)),Ur.arraycopy(this.luminances,(n+this.top)*this.dataWidth+this.left,s,0,c),s},e.prototype.getMatrix=function(){var n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.luminances;var c=n*s,l=new Uint8ClampedArray(c),g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Ur.arraycopy(this.luminances,g,l,0,c),l;for(var m=0;m<s;m++)Ur.arraycopy(this.luminances,g,l,m*n,n),g+=this.dataWidth;return l},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return new e(this.luminances,c,l,this.dataWidth,this.dataHeight,this.left+n,this.top+s)},e.prototype.invert=function(){return new Oo(this)}}(mn);var uc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Zf=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return uc(e,i),e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(po),a1=function(){function i(){}return i.ISO_8859_1=po.ISO8859_1,i}(),wa=function(){function i(e,n,s){this.codewords=e,this.numcols=n,this.numrows=s,this.bits=new Uint8Array(n*s),Jr.fill(this.bits,2)}return i.prototype.getNumrows=function(){return this.numrows},i.prototype.getNumcols=function(){return this.numcols},i.prototype.getBits=function(){return this.bits},i.prototype.getBit=function(e,n){return 1===this.bits[n*this.numcols+e]},i.prototype.setBit=function(e,n,s){this.bits[n*this.numcols+e]=s?1:0},i.prototype.noBit=function(e,n){return 2===this.bits[n*this.numcols+e]},i.prototype.place=function(){var e=0,n=4,s=0;do{n===this.numrows&&0===s&&this.corner1(e++),n===this.numrows-2&&0===s&&this.numcols%4!=0&&this.corner2(e++),n===this.numrows-2&&0===s&&this.numcols%8==4&&this.corner3(e++),n===this.numrows+4&&2===s&&this.numcols%8==0&&this.corner4(e++);do{n<this.numrows&&s>=0&&this.noBit(s,n)&&this.utah(n,s,e++),n-=2,s+=2}while(n>=0&&s<this.numcols);n++,s+=3;do{n>=0&&s<this.numcols&&this.noBit(s,n)&&this.utah(n,s,e++),n+=2,s-=2}while(n<this.numrows&&s>=0);n+=3,s++}while(n<this.numrows||s<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},i.prototype.module=function(e,n,s,c){e<0&&(e+=this.numrows,n+=4-(this.numrows+4)%8),n<0&&(n+=this.numcols,e+=4-(this.numcols+4)%8);var l=this.codewords.charCodeAt(s);this.setBit(n,e,0!=(l&=1<<8-c))},i.prototype.utah=function(e,n,s){this.module(e-2,n-2,s,1),this.module(e-2,n-1,s,2),this.module(e-1,n-2,s,3),this.module(e-1,n-1,s,4),this.module(e-1,n,s,5),this.module(e,n-2,s,6),this.module(e,n-1,s,7),this.module(e,n,s,8)},i.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},i.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},i.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},i.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},i}();var fd,Ym=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],k0=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],sp=(fd=function(i,e){for(var n=1,s=0;s<255;s++)e[s]=n,i[n]=s,(n*=2)>=256&&(n^=301);return{LOG:i,ALOG:e}}([],[])).LOG,el=fd.ALOG,tl="[)>\x1e05\x1d",tf="[)>\x1e06\x1d";const e_=function(){function i(){}return i.encodeECC200=function(e,n){if(e.length!==n.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var s=new dn;s.append(e);var c=n.getInterleavedBlockCount();if(1===c){var l=this.createECCBlock(e,n.getErrorCodewords());s.append(l)}else{for(var g=[],m=[],y=0;y<c;y++)g[y]=n.getDataLengthForInterleavedBlock(y+1),m[y]=n.getErrorLengthForInterleavedBlock(y+1);for(var b=0;b<c;b++){for(var P=new dn,B=b;B<n.getDataCapacity();B+=c)P.append(e.charAt(B));l=this.createECCBlock(P.toString(),m[b]);for(var z=0,K=b;K<m[b]*c;K+=c)s.setCharAt(n.getDataCapacity()+K,l.charAt(z++))}}return s.toString()},i.createECCBlock=function(e,n){for(var s=-1,c=0;c<Ym.length;c++)if(Ym[c]===n){s=c;break}if(s<0)throw new Error("Illegal number of error correction codewords specified: "+n);var l=k0[s],g=[];for(c=0;c<n;c++)g[c]=0;for(c=0;c<e.length;c++){for(var m=g[n-1]^e.charAt(c).charCodeAt(0),y=n-1;y>0;y--)g[y]=0!==m&&0!==l[y]?g[y-1]^el[(sp[m]+sp[l[y]])%255]:g[y-1];g[0]=0!==m&&0!==l[0]?el[(sp[m]+sp[l[0]])%255]:0}var b=[];for(c=0;c<n;c++)b[c]=g[n-c-1];return b.map(function(P){return String.fromCharCode(P)}).join("")},i}();var V0=function(){function i(){}return i.prototype.getEncodingMode=function(){return 0},i.prototype.encode=function(e){if(Sr.determineConsecutiveDigitCount(e.getMessage(),e.pos)>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var s=e.getCurrentChar(),c=Sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode())switch(c){case 5:return e.writeCodeword(231),void e.signalEncoderChange(5);case 1:return e.writeCodeword(230),void e.signalEncoderChange(1);case 3:e.writeCodeword(238),e.signalEncoderChange(3);break;case 2:e.writeCodeword(239),e.signalEncoderChange(2);break;case 4:e.writeCodeword(240),e.signalEncoderChange(4);break;default:throw new Error("Illegal mode: "+c)}else Sr.isExtendedASCII(s)?(e.writeCodeword(235),e.writeCodeword(s-128+1),e.pos++):(e.writeCodeword(s+1),e.pos++)}},i.prototype.encodeASCIIDigits=function(e,n){if(Sr.isDigit(e)&&Sr.isDigit(n))return 10*(e-48)+(n-48)+130;throw new Error("not digits: "+e+n)},i}(),Tg=function(){function i(){}return i.prototype.getEncodingMode=function(){return 5},i.prototype.encode=function(e){var n=new dn;for(n.append(0);e.hasMoreCharacters();){var s=e.getCurrentChar();if(n.append(s),e.pos++,Sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}var l=n.length()-1,m=e.getCodewordCount()+l+1;e.updateSymbolInfo(m);var y=e.getSymbolInfo().getDataCapacity()-m>0;if(e.hasMoreCharacters()||y)if(l<=249)n.setCharAt(0,gt.getCharAt(l));else{if(!(l<=1555))throw new Error("Message length not in valid ranges: "+l);n.setCharAt(0,gt.getCharAt(Math.floor(l/250)+249)),n.insert(1,gt.getCharAt(l%250))}var b=0;for(s=n.length();b<s;b++)e.writeCodeword(this.randomize255State(n.charAt(b).charCodeAt(0),e.getCodewordCount()+1))},i.prototype.randomize255State=function(e,n){var c=e+(149*n%255+1);return c<=255?c:c-256},i}(),Ml=function(){function i(){}return i.prototype.getEncodingMode=function(){return 1},i.prototype.encodeMaximal=function(e){for(var n=new dn,s=0,c=e.pos,l=0;e.hasMoreCharacters();){var g=e.getCurrentChar();e.pos++,s=this.encodeChar(g,n),n.length()%3==0&&(c=e.pos,l=n.length())}if(l!==n.length()){var m=Math.floor(n.length()/3*2),y=Math.floor(e.getCodewordCount()+m+1);e.updateSymbolInfo(y);var b=e.getSymbolInfo().getDataCapacity()-y,P=Math.floor(n.length()%3);(2===P&&2!==b||1===P&&(s>3||1!==b))&&(e.pos=c)}n.length()>0&&e.writeCodeword(230),this.handleEOD(e,n)},i.prototype.encode=function(e){for(var n=new dn;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++;var c=this.encodeChar(s,n),l=2*Math.floor(n.length()/3),g=e.getCodewordCount()+l;e.updateSymbolInfo(g);var m=e.getSymbolInfo().getDataCapacity()-g;if(!e.hasMoreCharacters()){var y=new dn;for(n.length()%3==2&&2!==m&&(c=this.backtrackOneCharacter(e,n,y,c));n.length()%3==1&&(c>3||1!==m);)c=this.backtrackOneCharacter(e,n,y,c);break}if(n.length()%3==0&&Sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,n)},i.prototype.backtrackOneCharacter=function(e,n,s,c){var l=n.length(),g=n.toString().substring(0,l-c);n.setLengthToZero(),n.append(g),e.pos--;var m=e.getCurrentChar();return c=this.encodeChar(m,s),e.resetSymbolInfo(),c},i.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var s=n.toString().substring(3);n.setLengthToZero(),n.append(s)},i.prototype.handleEOD=function(e,n){var s=Math.floor(n.length()/3*2),c=n.length()%3,l=e.getCodewordCount()+s;e.updateSymbolInfo(l);var g=e.getSymbolInfo().getDataCapacity()-l;if(2===c){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(254)}else if(1===g&&1===c){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(254),e.pos--}else{if(0!==c)throw new Error("Unexpected case. Please report!");for(;n.length()>=3;)this.writeNextTriplet(e,n);(g>0||e.hasMoreCharacters())&&e.writeCodeword(254)}e.signalEncoderChange(0)},i.prototype.encodeChar=function(e,n){return 32===e?(n.append(3),1):e>=48&&e<=57?(n.append(e-48+4),1):e>=65&&e<=90?(n.append(e-65+14),1):e<32?(n.append(0),n.append(e),2):e<=47?(n.append(1),n.append(e-33),2):e<=64?(n.append(1),n.append(e-58+15),2):e<=95?(n.append(1),n.append(e-91+22),2):e<=127?(n.append(2),n.append(e-96),2):(n.append("1\x1e"),2+this.encodeChar(e-128,n))},i.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,s=n/256,c=n%256,l=new dn;return l.append(s),l.append(c),l.toString()},i}(),xg=function(){function i(){}return i.prototype.getEncodingMode=function(){return 4},i.prototype.encode=function(e){for(var n=new dn;e.hasMoreCharacters();){var s=e.getCurrentChar();if(this.encodeChar(s,n),e.pos++,n.length()>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var l=n.toString().substring(4);if(n.setLengthToZero(),n.append(l),Sr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}}n.append(gt.getCharAt(31)),this.handleEOD(e,n)},i.prototype.handleEOD=function(e,n){try{var s=n.length();if(0===s)return;if(1===s){e.updateSymbolInfo();var c=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),l=e.getRemainingCharacters();if(l>c&&(e.updateSymbolInfo(e.getCodewordCount()+1),c=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),l<=c&&c<=2)return}if(s>4)throw new Error("Count must not exceed 4");var g=s-1,m=this.encodeToCodewords(n.toString()),b=!e.hasMoreCharacters()&&g<=2;g<=2&&(e.updateSymbolInfo(e.getCodewordCount()+g),(c=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount())>=3&&(b=!1,e.updateSymbolInfo(e.getCodewordCount()+m.length))),b?(e.resetSymbolInfo(),e.pos-=g):e.writeCodewords(m)}finally{e.signalEncoderChange(0)}},i.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(gt.getCharAt(e-64)):Sr.illegalCharacter(gt.getCharAt(e))},i.prototype.encodeToCodewords=function(e){var n=e.length;if(0===n)throw new Error("StringBuilder must not be empty");var m=(e.charAt(0).charCodeAt(0)<<18)+((n>=2?e.charAt(1).charCodeAt(0):0)<<12)+((n>=3?e.charAt(2).charCodeAt(0):0)<<6)+(n>=4?e.charAt(3).charCodeAt(0):0),y=m>>16&255,b=m>>8&255,P=255&m,B=new dn;return B.append(y),n>=2&&B.append(b),n>=3&&B.append(P),B.toString()},i}(),cp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ni=function(){function i(e,n,s,c,l,g,m,y){void 0===m&&(m=0),void 0===y&&(y=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=s,this.matrixWidth=c,this.matrixHeight=l,this.dataRegions=g,this.rsBlockData=m,this.rsBlockError=y}return i.lookup=function(e,n,s,c,l){var g,m;void 0===n&&(n=0),void 0===s&&(s=null),void 0===c&&(c=null),void 0===l&&(l=!0);try{for(var y=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(sf),b=y.next();!b.done;b=y.next()){var P=b.value;if((1!==n||!P.rectangular)&&(2!==n||P.rectangular)&&(null==s||!(P.getSymbolWidth()<s.getWidth()||P.getSymbolHeight()<s.getHeight()))&&(null==c||!(P.getSymbolWidth()>c.getWidth()||P.getSymbolHeight()>c.getHeight()))&&e<=P.dataCapacity)return P}}catch(B){g={error:B}}finally{try{b&&!b.done&&(m=y.return)&&m.call(y)}finally{if(g)throw g.error}}if(l)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},i.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},i.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},i.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},i.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},i.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},i.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},i.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},i.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},i.prototype.getDataCapacity=function(){return this.dataCapacity},i.prototype.getErrorCodewords=function(){return this.errorCodewords},i.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},i.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},i}();const rf=ni;var t_=function(i){function e(){return i.call(this,!1,1558,620,22,22,36,-1,62)||this}return cp(e,i),e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(ni),sf=[new ni(!1,3,5,8,8,1),new ni(!1,5,7,10,10,1),new ni(!0,5,7,16,6,1),new ni(!1,8,10,12,12,1),new ni(!0,10,11,14,6,2),new ni(!1,12,12,14,14,1),new ni(!0,16,14,24,10,1),new ni(!1,18,14,16,16,1),new ni(!1,22,18,18,18,1),new ni(!0,22,18,16,10,2),new ni(!1,30,20,20,20,1),new ni(!0,32,24,16,14,2),new ni(!1,36,24,22,22,1),new ni(!1,44,28,24,24,1),new ni(!0,49,28,22,14,2),new ni(!1,62,36,14,14,4),new ni(!1,86,42,16,16,4),new ni(!1,114,48,18,18,4),new ni(!1,144,56,20,20,4),new ni(!1,174,68,22,22,4),new ni(!1,204,84,24,24,4,102,42),new ni(!1,280,112,14,14,16,140,56),new ni(!1,368,144,16,16,16,92,36),new ni(!1,456,192,18,18,16,114,48),new ni(!1,576,224,20,20,16,144,56),new ni(!1,696,272,22,22,16,174,68),new ni(!1,816,336,24,24,16,136,56),new ni(!1,1050,408,18,18,36,175,68),new ni(!1,1304,496,20,20,36,163,62),new t_],B0=function(){function i(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(m){return m.charCodeAt(0)}),s=new dn,c=0,l=n.length;c<l;c++){var g=String.fromCharCode(255&n[c]);if("?"===g&&"?"!==e.charAt(c))throw new Error("Message contains characters outside ISO-8859-1 encoding.");s.append(g)}this.msg=s.toString(),this.shape=0,this.codewords=new dn,this.newEncoding=-1}return i.prototype.setSymbolShape=function(e){this.shape=e},i.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},i.prototype.getMessage=function(){return this.msg},i.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},i.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},i.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},i.prototype.getCodewords=function(){return this.codewords},i.prototype.writeCodewords=function(e){this.codewords.append(e)},i.prototype.writeCodeword=function(e){this.codewords.append(e)},i.prototype.getCodewordCount=function(){return this.codewords.length()},i.prototype.getNewEncoding=function(){return this.newEncoding},i.prototype.signalEncoderChange=function(e){this.newEncoding=e},i.prototype.resetEncoderSignal=function(){this.newEncoding=-1},i.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},i.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},i.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},i.prototype.getSymbolInfo=function(){return this.symbolInfo},i.prototype.updateSymbolInfo=function(e){void 0===e&&(e=this.getCodewordCount()),(null==this.symbolInfo||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=rf.lookup(e,this.shape,this.minSize,this.maxSize,!0))},i.prototype.resetSymbolInfo=function(){this.symbolInfo=null},i}(),n_=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),th=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return n_(e,i),e.prototype.getEncodingMode=function(){return 3},e.prototype.encode=function(n){for(var s=new dn;n.hasMoreCharacters();){var c=n.getCurrentChar();if(n.pos++,this.encodeChar(c,s),s.length()%3==0&&(this.writeNextTriplet(n,s),Sr.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode())!==this.getEncodingMode())){n.signalEncoderChange(0);break}}this.handleEOD(n,s)},e.prototype.encodeChar=function(n,s){switch(n){case 13:s.append(0);break;case 42:s.append(1);break;case 62:s.append(2);break;case 32:s.append(3);break;default:n>=48&&n<=57?s.append(n-48+4):n>=65&&n<=90?s.append(n-65+14):Sr.illegalCharacter(gt.getCharAt(n))}return 1},e.prototype.handleEOD=function(n,s){n.updateSymbolInfo();var c=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),l=s.length();n.pos-=l,(n.getRemainingCharacters()>1||c>1||n.getRemainingCharacters()!==c)&&n.writeCodeword(254),n.getNewEncoding()<0&&n.signalEncoderChange(0)},e}(Ml),U0=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),nh=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return U0(e,i),e.prototype.getEncodingMode=function(){return 2},e.prototype.encodeChar=function(n,s){return 32===n?(s.append(3),1):n>=48&&n<=57?(s.append(n-48+4),1):n>=97&&n<=122?(s.append(n-97+14),1):n<32?(s.append(0),s.append(n),2):n<=47?(s.append(1),s.append(n-33),2):n<=64?(s.append(1),s.append(n-58+15),2):n>=91&&n<=95?(s.append(1),s.append(n-91+22),2):96===n?(s.append(2),s.append(0),2):n<=90?(s.append(2),s.append(n-65+1),2):n<=127?(s.append(2),s.append(n-123+27),2):(s.append("1\x1e"),2+this.encodeChar(n-128,s))},e}(Ml);const Sr=function(){function i(){}return i.randomize253State=function(e){var s=149*e%253+1+129;return s<=254?s:s-254},i.encodeHighLevel=function(e,n,s,c,l){void 0===n&&(n=0),void 0===s&&(s=null),void 0===c&&(c=null),void 0===l&&(l=!1);var g=new Ml,m=[new V0,g,new nh,new th,new xg,new Tg],y=new B0(e);y.setSymbolShape(n),y.setSizeConstraints(s,c),e.startsWith(tl)&&e.endsWith("\x1e\x04")?(y.writeCodeword(236),y.setSkipAtEnd(2),y.pos+=7):e.startsWith(tf)&&e.endsWith("\x1e\x04")&&(y.writeCodeword(237),y.setSkipAtEnd(2),y.pos+=7);var b=0;for(l&&(g.encodeMaximal(y),b=y.getNewEncoding(),y.resetEncoderSignal());y.hasMoreCharacters();)m[b].encode(y),y.getNewEncoding()>=0&&(b=y.getNewEncoding(),y.resetEncoderSignal());var P=y.getCodewordCount();y.updateSymbolInfo();var B=y.getSymbolInfo().getDataCapacity();P<B&&0!==b&&5!==b&&4!==b&&y.writeCodeword("\xfe");var z=y.getCodewords();for(z.length()<B&&z.append(129);z.length()<B;)z.append(this.randomize253State(z.length()+1));return y.getCodewords().toString()},i.lookAheadTest=function(e,n,s){var c=this.lookAheadTestIntern(e,n,s);if(3===s&&3===c){for(var l=Math.min(n+3,e.length),g=n;g<l;g++)if(!this.isNativeX12(e.charCodeAt(g)))return 0}else if(4===s&&4===c)for(l=Math.min(n+4,e.length),g=n;g<l;g++)if(!this.isNativeEDIFACT(e.charCodeAt(g)))return 0;return c},i.lookAheadTestIntern=function(e,n,s){if(n>=e.length)return s;var c;0===s?c=[0,1,1,1,1,1.25]:(c=[1,2,2,2,2,2.25])[s]=0;for(var l=0,g=new Uint8Array(6),m=[];;){if(n+l===e.length){Jr.fill(g,0),Jr.fill(m,0);var y=this.findMinimums(c,m,ur.MAX_VALUE,g),b=this.getMinimumCount(g);if(m[0]===y)return 0;if(1===b){if(g[5]>0)return 5;if(g[4]>0)return 4;if(g[2]>0)return 2;if(g[3]>0)return 3}return 1}var P=e.charCodeAt(n+l);if(l++,this.isDigit(P)?c[0]+=.5:this.isExtendedASCII(P)?(c[0]=Math.ceil(c[0]),c[0]+=2):(c[0]=Math.ceil(c[0]),c[0]++),this.isNativeC40(P)?c[1]+=2/3:this.isExtendedASCII(P)?c[1]+=8/3:c[1]+=4/3,this.isNativeText(P)?c[2]+=2/3:this.isExtendedASCII(P)?c[2]+=8/3:c[2]+=4/3,this.isNativeX12(P)?c[3]+=2/3:this.isExtendedASCII(P)?c[3]+=13/3:c[3]+=10/3,this.isNativeEDIFACT(P)?c[4]+=3/4:this.isExtendedASCII(P)?c[4]+=4.25:c[4]+=3.25,this.isSpecialB256(P)?c[5]+=4:c[5]++,l>=4){if(Jr.fill(g,0),Jr.fill(m,0),this.findMinimums(c,m,ur.MAX_VALUE,g),m[0]<this.min(m[5],m[1],m[2],m[3],m[4]))return 0;if(m[5]<m[0]||m[5]+1<this.min(m[1],m[2],m[3],m[4]))return 5;if(m[4]+1<this.min(m[5],m[1],m[2],m[3],m[0]))return 4;if(m[2]+1<this.min(m[5],m[1],m[4],m[3],m[0]))return 2;if(m[3]+1<this.min(m[5],m[1],m[4],m[2],m[0]))return 3;if(m[1]+1<this.min(m[0],m[5],m[4],m[2])){if(m[1]<m[3])return 1;if(m[1]===m[3]){for(var B=n+l+1;B<e.length;){var z=e.charCodeAt(B);if(this.isX12TermSep(z))return 3;if(!this.isNativeX12(z))break;B++}return 1}}}}},i.min=function(e,n,s,c,l){var g=Math.min(e,Math.min(n,Math.min(s,c)));return void 0===l?g:Math.min(g,l)},i.findMinimums=function(e,n,s,c){for(var l=0;l<6;l++){var g=n[l]=Math.ceil(e[l]);s>g&&(s=g,Jr.fill(c,0)),s===g&&(c[l]=c[l]+1)}return s},i.getMinimumCount=function(e){for(var n=0,s=0;s<6;s++)n+=e[s];return n||0},i.isDigit=function(e){return e>=48&&e<=57},i.isExtendedASCII=function(e){return e>=128&&e<=255},i.isNativeC40=function(e){return 32===e||e>=48&&e<=57||e>=65&&e<=90},i.isNativeText=function(e){return 32===e||e>=48&&e<=57||e>=97&&e<=122},i.isNativeX12=function(e){return this.isX12TermSep(e)||32===e||e>=48&&e<=57||e>=65&&e<=90},i.isX12TermSep=function(e){return 13===e||42===e||62===e},i.isNativeEDIFACT=function(e){return e>=32&&e<=94},i.isSpecialB256=function(e){return!1},i.determineConsecutiveDigitCount=function(e,n){void 0===n&&(n=0);for(var s=e.length,c=n;c<s&&this.isDigit(e.charCodeAt(c));)c++;return c-n},i.illegalCharacter=function(e){var n=ur.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},i}();var rh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j0=function(){function i(e){this.charset=e,this.name=e.name}return i.prototype.canEncode=function(e){try{return null!=Ce.encode(e,this.charset)}catch{return!1}},i}(),ih=function(){function i(e,n,s){var c,l,g,m,y,b;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(rr){return new j0(Zf.forName(rr))}),this.encoders=[];var P=[];P.push(new j0(a1.ISO_8859_1));for(var B=null!=n&&n.name.startsWith("UTF"),z=0;z<e.length;z++){var K=!1;try{for(var ae=(c=void 0,rh(P)),ye=ae.next();!ye.done;ye=ae.next()){var Re=ye.value,Ve=e.charAt(z);if(Ve.charCodeAt(0)===s||Re.canEncode(Ve)){K=!0;break}}}catch(rr){c={error:rr}}finally{try{ye&&!ye.done&&(l=ae.return)&&l.call(ae)}finally{if(c)throw c.error}}if(!K)try{for(var Ye=(g=void 0,rh(this.ENCODERS)),at=Ye.next();!at.done;at=Ye.next())if((Re=at.value).canEncode(e.charAt(z))){P.push(Re),K=!0;break}}catch(rr){g={error:rr}}finally{try{at&&!at.done&&(m=Ye.return)&&m.call(Ye)}finally{if(g)throw g.error}}K||(B=!0)}if(1!==P.length||B){this.encoders=[];var Ft=0;try{for(var $t=rh(P),Zt=$t.next();!Zt.done;Zt=$t.next())this.encoders[Ft++]=Re=Zt.value}catch(rr){y={error:rr}}finally{try{Zt&&!Zt.done&&(b=$t.return)&&b.call($t)}finally{if(y)throw y.error}}}else this.encoders=[P[0]];var pn=-1;if(null!=n)for(z=0;z<this.encoders.length;z++)if(null!=this.encoders[z]&&n.name===this.encoders[z].name){pn=z;break}this.priorityEncoderIndex=pn}return i.prototype.length=function(){return this.encoders.length},i.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},i.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},i.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},i.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},i.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},i.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return Ce.encode(gt.getCharAt(e),this.encoders[n].name)},i}(),nl=function(){function i(e,n,s){this.fnc1=s;var c=new ih(e,n,s);if(1===c.length())for(var l=0;l<this.bytes.length;l++){var g=e.charAt(l).charCodeAt(0);this.bytes[l]=g===s?1e3:g}else this.bytes=this.encodeMinimally(e,c,s)}return i.prototype.getFNC1Character=function(){return this.fnc1},i.prototype.length=function(){return this.bytes.length},i.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var s=0;s<n;s++)if(this.isECI(e+s))return!1;return!0},i.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},i.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var s=new dn,c=e;c<n;c++){if(this.isECI(c))throw new Error("value at "+c+" is not a character but an ECI");s.append(this.charAt(c))}return s.toString()},i.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},i.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return 1e3===this.bytes[e]},i.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},i.prototype.addEdge=function(e,n,s){(null==e[n][s.encoderIndex]||e[n][s.encoderIndex].cachedTotalSize>s.cachedTotalSize)&&(e[n][s.encoderIndex]=s)},i.prototype.addEdges=function(e,n,s,c,l,g){var m=e.charAt(c).charCodeAt(0),y=0,b=n.length();n.getPriorityEncoderIndex()>=0&&(m===g||n.canEncode(m,n.getPriorityEncoderIndex()))&&(b=(y=n.getPriorityEncoderIndex())+1);for(var P=y;P<b;P++)(m===g||n.canEncode(m,P))&&this.addEdge(s,c+1,new up(m,n,P,l,g))},i.prototype.encodeMinimally=function(e,n,s){var c=e.length,l=new(up[c+1][n.length()]);this.addEdges(e,n,l,0,null,s);for(var g=1;g<=c;g++){for(var m=0;m<n.length();m++)null!=l[g][m]&&g<c&&this.addEdges(e,n,l,g,l[g][m],s);for(m=0;m<n.length();m++)l[g-1][m]=null}var y=-1,b=ur.MAX_VALUE;for(m=0;m<n.length();m++)if(null!=l[c][m]){var P=l[c][m];P.cachedTotalSize<b&&(b=P.cachedTotalSize,y=m)}if(y<0)throw new Error('Failed to encode "'+e+'"');for(var B=[],z=l[c][y];null!=z;){if(z.isFNC1())B.unshift(1e3);else{var K=n.encode(z.c,z.encoderIndex);for(g=K.length-1;g>=0;g--)B.unshift(255&K[g])}(null===z.previous?0:z.previous.encoderIndex)!==z.encoderIndex&&B.unshift(256+n.getECIValue(z.encoderIndex)),z=z.previous}var ye=[];for(g=0;g<ye.length;g++)ye[g]=B[g];return ye},i}(),up=function(){function i(e,n,s,c,l){this.c=e,this.encoderSet=n,this.encoderIndex=s,this.previous=c,this.fnc1=l,this.c=e===l?1e3:e;var g=this.isFNC1()?1:n.encode(e,s).length;(null===c?0:c.encoderIndex)!==s&&(g+=3),null!=c&&(g+=c.cachedTotalSize),this.cachedTotalSize=g}return i.prototype.isFNC1=function(){return 1e3===this.c},i}(),i_=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Rc=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sg=function(i,e){var n="function"==typeof Symbol&&i[Symbol.iterator];if(!n)return i;var c,g,s=n.call(i),l=[];try{for(;(void 0===e||e-- >0)&&!(c=s.next()).done;)l.push(c.value)}catch(m){g={error:m}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(g)throw g.error}}return l},on=function(i){return i[i.ASCII=0]="ASCII",i[i.C40=1]="C40",i[i.TEXT=2]="TEXT",i[i.X12=3]="X12",i[i.EDF=4]="EDF",i[i.B256=5]="B256",i}(on||{}),Dg=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ys=function(){function i(){}return i.isExtendedASCII=function(e,n){return e!==n&&e>=128&&e<=255},i.isInC40Shift1Set=function(e){return e<=31},i.isInC40Shift2Set=function(e,n){var s,c;try{for(var l=Rc(Dg),g=l.next();!g.done;g=l.next())if(g.value.charCodeAt(0)===e)return!0}catch(y){s={error:y}}finally{try{g&&!g.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}return e===n},i.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},i.isInTextShift2Set=function(e,n){return this.isInC40Shift2Set(e,n)},i.encodeHighLevel=function(e,n,s,c){void 0===n&&(n=null),void 0===s&&(s=-1),void 0===c&&(c=0);var l=0;return e.startsWith(tl)&&e.endsWith("\x1e\x04")?(l=5,e=e.substring(7,e.length-2)):e.startsWith(tf)&&e.endsWith("\x1e\x04")&&(l=6,e=e.substring(7,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,function(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Sg(arguments[e]));return i}(this.encode(e,n,s,c,l)))))},i.encode=function(e,n,s,c,l){return this.encodeMinimally(new dp(e,n,s,c,l)).getBytes()},i.addEdge=function(e,n){var s=n.fromPosition+n.characterLength;(null===e[s][n.getEndMode()]||e[s][n.getEndMode()].cachedTotalSize>n.cachedTotalSize)&&(e[s][n.getEndMode()]=n)},i.getNumberOfC40Words=function(e,n,s,c){for(var l=0,g=n;g<e.length();g++){if(e.isECI(g))return c[0]=0,0;var m=e.charAt(g);if(s&&Sr.isNativeC40(m)||!s&&Sr.isNativeText(m))l++;else if(i.isExtendedASCII(m,e.getFNC1Character())){var y=255&m;y>=128&&(s&&Sr.isNativeC40(y-128)||!s&&Sr.isNativeText(y-128))?l+=3:l+=4}else l+=2;if(l%3==0||(l-2)%3==0&&g+1===e.length())return c[0]=g-n+1,Math.ceil(l/3)}return c[0]=0,0},i.addEdges=function(e,n,s,c){var l,g;if(e.isECI(s))this.addEdge(n,new Mc(e,on.ASCII,s,1,c));else{var K,m=e.charAt(s);if(null===c||c.getEndMode()!==on.EDF){Sr.isDigit(m)&&e.haveNCharacters(s,2)&&Sr.isDigit(e.charAt(s+1))?this.addEdge(n,new Mc(e,on.ASCII,s,2,c)):this.addEdge(n,new Mc(e,on.ASCII,s,1,c));var y=[on.C40,on.TEXT];try{for(var b=Rc(y),P=b.next();!P.done;P=b.next()){var B=P.value,z=[];i.getNumberOfC40Words(e,s,B===on.C40,z)>0&&this.addEdge(n,new Mc(e,B,s,z[0],c))}}catch(ye){l={error:ye}}finally{try{P&&!P.done&&(g=b.return)&&g.call(b)}finally{if(l)throw l.error}}e.haveNCharacters(s,3)&&Sr.isNativeX12(e.charAt(s))&&Sr.isNativeX12(e.charAt(s+1))&&Sr.isNativeX12(e.charAt(s+2))&&this.addEdge(n,new Mc(e,on.X12,s,3,c)),this.addEdge(n,new Mc(e,on.B256,s,1,c))}for(K=0;K<3;K++){var ae=s+K;if(!e.haveNCharacters(ae,1)||!Sr.isNativeEDIFACT(e.charAt(ae)))break;this.addEdge(n,new Mc(e,on.EDF,s,K+1,c))}3===K&&e.haveNCharacters(s,4)&&Sr.isNativeEDIFACT(e.charAt(s+3))&&this.addEdge(n,new Mc(e,on.EDF,s,4,c))}},i.encodeMinimally=function(e){var n=e.length(),s=Array(n+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,s,0,null);for(var c=1;c<=n;c++){for(var l=0;l<6;l++)null!==s[c][l]&&c<n&&this.addEdges(e,s,c,s[c][l]);for(l=0;l<6;l++)s[c-1][l]=null}var g=-1,m=ur.MAX_VALUE;for(l=0;l<6;l++)if(null!==s[n][l]){var y=s[n][l],b=l>=1&&l<=3?y.cachedTotalSize+1:y.cachedTotalSize;b<m&&(m=b,g=l)}if(g<0)throw new Error('Failed to encode "'+e+'"');return new lp(s[n][g])},i}(),lp=function(){function i(e){var n=e.input,s=0,c=[],l=[],g=[];(e.mode===on.C40||e.mode===on.TEXT||e.mode===on.X12)&&e.getEndMode()!==on.ASCII&&(s+=this.prepend(Mc.getBytes(254),c));for(var m=e;null!==m;)s+=this.prepend(m.getDataBytes(),c),(null===m.previous||m.getPreviousStartMode()!==m.getMode())&&(m.getMode()===on.B256&&(s<=249?(c.unshift(s),s++):(c.unshift(s%250),c.unshift(s/250+249),s+=2),l.push(c.length),g.push(s)),this.prepend(m.getLatchBytes(),c),s=0),m=m.previous;5===n.getMacroId()?s+=this.prepend(Mc.getBytes(236),c):6===n.getMacroId()&&(s+=this.prepend(Mc.getBytes(237),c)),n.getFNC1Character()>0&&(s+=this.prepend(Mc.getBytes(232),c));for(var y=0;y<l.length;y++)this.applyRandomPattern(c,c.length-l[y],g[y]);var b=e.getMinSymbolSize(c.length);for(c.length<b&&c.push(129);c.length<b;)c.push(this.randomize253State(c.length+1));for(this.bytes=new Uint8Array(c.length),y=0;y<this.bytes.length;y++)this.bytes[y]=c[y]}return i.prototype.prepend=function(e,n){for(var s=e.length-1;s>=0;s--)n.unshift(e[s]);return e.length},i.prototype.randomize253State=function(e){var s=149*e%253+1+129;return s<=254?s:s-254},i.prototype.applyRandomPattern=function(e,n,s){for(var c=0;c<s;c++){var l=n+c,y=149*(l+1)%255+1+(255&e[l]);e[l]=y<=255?y:y-256}},i.prototype.getBytes=function(){return this.bytes},i}(),Mc=function(){function i(e,n,s,c,l){if(this.input=e,this.mode=n,this.fromPosition=s,this.characterLength=c,this.previous=l,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(s+c<=e.length()))throw new Error("Invalid edge");var g=null!==l?l.cachedTotalSize:0,m=this.getPreviousMode();switch(n){case on.ASCII:g++,(e.isECI(s)||Ys.isExtendedASCII(e.charAt(s),e.getFNC1Character()))&&g++,(m===on.C40||m===on.TEXT||m===on.X12)&&g++;break;case on.B256:g++,(m!==on.B256||250===this.getB256Size())&&g++,m===on.ASCII?g++:(m===on.C40||m===on.TEXT||m===on.X12)&&(g+=2);break;case on.C40:case on.TEXT:case on.X12:g+=n===on.X12?2:2*Ys.getNumberOfC40Words(e,s,n===on.C40,[]),m===on.ASCII||m===on.B256?g++:m!==n&&(m===on.C40||m===on.TEXT||m===on.X12)&&(g+=2);break;case on.EDF:g+=3,m===on.ASCII||m===on.B256?g++:(m===on.C40||m===on.TEXT||m===on.X12)&&(g+=2)}this.cachedTotalSize=g}return i.prototype.getB256Size=function(){for(var e=0,n=this;null!==n&&n.mode===on.B256&&e<=250;)e++,n=n.previous;return e},i.prototype.getPreviousStartMode=function(){return null===this.previous?on.ASCII:this.previous.mode},i.prototype.getPreviousMode=function(){return null===this.previous?on.ASCII:this.previous.getEndMode()},i.prototype.getEndMode=function(){if(this.mode===on.EDF){if(this.characterLength<4)return on.ASCII;if((e=this.getLastASCII())>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return on.ASCII}if(this.mode===on.C40||this.mode===on.TEXT||this.mode===on.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return on.ASCII;var e;if(1===(e=this.getLastASCII())&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return on.ASCII}return this.mode},i.prototype.getMode=function(){return this.mode},i.prototype.getLastASCII=function(){var e=this.input.length(),n=this.fromPosition+this.characterLength;return e-n>4||n>=e?0:e-n==1?Ys.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())?0:1:e-n==2?Ys.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())||Ys.isExtendedASCII(this.input.charAt(n+1),this.input.getFNC1Character())?0:Sr.isDigit(this.input.charAt(n))&&Sr.isDigit(this.input.charAt(n+1))?1:2:e-n==3?Sr.isDigit(this.input.charAt(n))&&Sr.isDigit(this.input.charAt(n+1))&&!Ys.isExtendedASCII(this.input.charAt(n+2),this.input.getFNC1Character())||Sr.isDigit(this.input.charAt(n+1))&&Sr.isDigit(this.input.charAt(n+2))&&!Ys.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())?2:0:Sr.isDigit(this.input.charAt(n))&&Sr.isDigit(this.input.charAt(n+1))&&Sr.isDigit(this.input.charAt(n+2))&&Sr.isDigit(this.input.charAt(n+3))?2:0},i.prototype.getMinSymbolSize=function(e){var n,s,c,l,g,m;switch(this.input.getShapeHint()){case 1:try{for(var y=Rc(this.squareCodewordCapacities),b=y.next();!b.done;b=y.next())if((P=b.value)>=e)return P}catch(ye){n={error:ye}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(n)throw n.error}}break;case 2:try{for(var B=Rc(this.rectangularCodewordCapacities),z=B.next();!z.done;z=B.next())if((P=z.value)>=e)return P}catch(ye){c={error:ye}}finally{try{z&&!z.done&&(l=B.return)&&l.call(B)}finally{if(c)throw c.error}}}try{for(var K=Rc(this.allCodewordCapacities),ae=K.next();!ae.done;ae=K.next()){var P;if((P=ae.value)>=e)return P}}catch(ye){g={error:ye}}finally{try{ae&&!ae.done&&(m=K.return)&&m.call(K)}finally{if(g)throw g.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},i.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},i.getBytes=function(e,n){var s=new Uint8Array(n?2:1);return s[0]=e,n&&(s[1]=n),s},i.prototype.setC40Word=function(e,n,s,c,l){var g=1600*(255&s)+40*(255&c)+(255&l)+1;e[n]=g/256,e[n+1]=g%256},i.prototype.getX12Value=function(e){return 13===e?0:42===e?1:62===e?2:32===e?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},i.prototype.getX12Words=function(){if(this.characterLength%3!=0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),n=0;n<e.length;n+=2)this.setC40Word(e,n,this.getX12Value(this.input.charAt(this.fromPosition+n/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+n/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+n/2*3+2)));return e},i.prototype.getShiftValue=function(e,n,s){return n&&Ys.isInC40Shift1Set(e)||!n&&Ys.isInTextShift1Set(e)?0:n&&Ys.isInC40Shift2Set(e,s)||!n&&Ys.isInTextShift2Set(e,s)?1:2},i.prototype.getC40Value=function(e,n,s,c){if(s===c){if(2!==n)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?s<=31?s:32===s?3:s<=47?s-33:s<=57?s-44:s<=64?s-43:s<=90?s-51:s<=95?s-69:s<=127?s-96:s:0===s?0:0===n&&s<=3?s-1:1===n&&s<=31?s:32===s?3:s>=33&&s<=47?s-33:s>=48&&s<=57?s-44:s>=58&&s<=64?s-43:s>=65&&s<=90?s-64:s>=91&&s<=95?s-69:96===s?0:s>=97&&s<=122?s-83:s>=123&&s<=127?s-96:s},i.prototype.getC40Words=function(e,n){for(var s=[],c=0;c<this.characterLength;c++){var l=this.input.charAt(this.fromPosition+c);if(e&&Sr.isNativeC40(l)||!e&&Sr.isNativeText(l))s.push(this.getC40Value(e,0,l,n));else if(Ys.isExtendedASCII(l,n)){var m=(255&l)-128;if(e&&Sr.isNativeC40(m)||!e&&Sr.isNativeText(m))s.push(1),s.push(30),s.push(this.getC40Value(e,0,m,n));else{s.push(1),s.push(30);var g=this.getShiftValue(m,e,n);s.push(g),s.push(this.getC40Value(e,g,m,n))}}else g=this.getShiftValue(l,e,n),s.push(g),s.push(this.getC40Value(e,g,l,n))}if(s.length%3!=0){if((s.length-2)%3!=0||this.fromPosition+this.characterLength!==this.input.length())throw new Error("C40 words must be a multiple of 3");s.push(0)}var y=new Uint8Array(s.length/3*2),b=0;for(c=0;c<s.length;c+=3)this.setC40Word(y,b,255&s[c],255&s[c+1],255&s[c+2]),b+=2;return y},i.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),n=new Uint8Array(3*e),s=this.fromPosition,c=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),l=0;l<e;l+=3){for(var g=[],m=0;m<4;m++)g[m]=s<=c?63&this.input.charAt(s++):s===c+1?31:0;var y=g[0]<<18;y|=g[1]<<12,y|=g[2]<<6,n[l]=(y|=g[3])>>16&255,n[l+1]=y>>8&255,n[l+2]=255&y}return n},i.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case on.ASCII:case on.B256:switch(this.mode){case on.B256:return i.getBytes(231);case on.C40:return i.getBytes(230);case on.TEXT:return i.getBytes(239);case on.X12:return i.getBytes(238);case on.EDF:return i.getBytes(240)}break;case on.C40:case on.TEXT:case on.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case on.ASCII:return i.getBytes(254);case on.B256:return i.getBytes(254,231);case on.C40:return i.getBytes(254,230);case on.TEXT:return i.getBytes(254,239);case on.X12:return i.getBytes(254,238);case on.EDF:return i.getBytes(254,240)}break;case on.EDF:if(this.mode!==on.EDF)throw new Error("Cannot switch from EDF to "+this.mode)}return new Uint8Array(0)},i.prototype.getDataBytes=function(){switch(this.mode){case on.ASCII:return this.input.isECI(this.fromPosition)?i.getBytes(241,this.input.getECIValue(this.fromPosition)+1):Ys.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?i.getBytes(235,this.input.charAt(this.fromPosition)-127):2===this.characterLength?i.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?i.getBytes(232):i.getBytes(this.input.charAt(this.fromPosition)+1);case on.B256:return i.getBytes(this.input.charAt(this.fromPosition));case on.C40:return this.getC40Words(!0,this.input.getFNC1Character());case on.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case on.X12:return this.getX12Words();case on.EDF:return this.getEDFBytes()}},i}(),dp=function(i){function e(n,s,c,l,g){var m=i.call(this,n,s,c)||this;return m.shape=l,m.macroId=g,m}return i_(e,i),e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(nl);!function(){function i(){}i.prototype.encode=function(e,n,s,c,l){if(void 0===l&&(l=null),""===e.trim())throw new Error("Found empty contents");if(n!==sn.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+n);if(s<0||c<0)throw new Error("Requested dimensions can't be negative: "+s+"x"+c);var z,g=0,m=null,y=null;if(null!=l){var b=l.get(br.DATA_MATRIX_SHAPE);null!=b&&(g=b);var P=l.get(br.MIN_SIZE);null!=P&&(m=P);var B=l.get(br.MAX_SIZE);null!=B&&(y=B)}if(null!=l&&l.has(br.DATA_MATRIX_COMPACT)&&l.get(br.DATA_MATRIX_COMPACT).toString()){var ae=l.has(br.GS1_FORMAT)&&!!l.get(br.GS1_FORMAT).toString(),ye=null;l.has(br.CHARACTER_SET)&&(ye=Zf.forName(l.get(br.CHARACTER_SET).toString())),z=Ys.encodeHighLevel(e,ye,ae?29:-1,g)}else{var Ve=null!=l&&l.has(br.FORCE_C40)&&!!l.get(br.FORCE_C40).toString();z=Sr.encodeHighLevel(e,g,m,y,Ve)}var Ne=rf.lookup(z.length,g,m,y,!0),Ye=e_.encodeECC200(z,Ne),at=new wa(Ye,Ne.getSymbolDataWidth(),Ne.getSymbolDataHeight());return at.place(),this.encodeLowLevel(at,Ne,s,c)},i.prototype.encodeLowLevel=function(e,n,s,c){for(var l=n.getSymbolDataWidth(),g=n.getSymbolDataHeight(),m=new qm(n.getSymbolWidth(),n.getSymbolHeight()),y=0,b=0;b<g;b++){var P=void 0;if(b%n.matrixHeight==0){P=0;for(var B=0;B<n.getSymbolWidth();B++)m.setBoolean(P,y,B%2==0),P++;y++}for(P=0,B=0;B<l;B++)B%n.matrixWidth==0&&(m.setBoolean(P,y,!0),P++),m.setBoolean(P,y,e.getBit(B,b)),P++,B%n.matrixWidth==n.matrixWidth-1&&(m.setBoolean(P,y,b%2==0),P++);if(y++,b%n.matrixHeight==n.matrixHeight-1){for(P=0,B=0;B<n.getSymbolWidth();B++)m.setBoolean(P,y,!0),P++;y++}}return this.convertByteMatrixToBitMatrix(m,s,c)},i.prototype.convertByteMatrixToBitMatrix=function(e,n,s){var B,c=e.getWidth(),l=e.getHeight(),g=Math.max(n,c),m=Math.max(s,l),y=Math.min(g/c,m/l),b=(g-c*y)/2,P=(m-l*y)/2;s<l||n<c?(b=0,P=0,B=new tr(c,l)):B=new tr(n,s),B.clear();for(var z=0,K=P;z<l;z++,K+=y)for(var ae=0,ye=b;ae<c;ae++,ye+=y)1===e.get(ae,z)&&B.setRegion(ye,K,y,y);return B}}();const fp=function(){function i(){}return i.prototype.isCompact=function(){return this.compact},i.prototype.setCompact=function(e){this.compact=e},i.prototype.getSize=function(){return this.size},i.prototype.setSize=function(e){this.size=e},i.prototype.getLayers=function(){return this.layers},i.prototype.setLayers=function(e){this.layers=e},i.prototype.getCodeWords=function(){return this.codeWords},i.prototype.setCodeWords=function(e){this.codeWords=e},i.prototype.getMatrix=function(){return this.matrix},i.prototype.setMatrix=function(e){this.matrix=e},i}(),Mg=function(){function i(){}return i.singletonList=function(e){return[e]},i.min=function(e,n){return e.sort(n)[0]},i}(),z0=function(){function i(e){this.previous=e}return i.prototype.getPrevious=function(){return this.previous},i}();var u1=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Mu=function(i){function e(n,s,c){var l=i.call(this,n)||this;return l.value=s,l.bitCount=c,l}return u1(e,i),e.prototype.appendTo=function(n,s){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,s){return new e(this,n,s)},e.prototype.addBinaryShift=function(n,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,s)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return"<"+ur.toBinaryString((n|=1<<this.bitCount)|1<<this.bitCount).substring(1)+">"},e}(z0);var Ol=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const ah=function(i){function e(n,s,c){var l=i.call(this,n,0,0)||this;return l.binaryShiftStart=s,l.binaryShiftByteCount=c,l}return Ol(e,i),e.prototype.appendTo=function(n,s){for(var c=0;c<this.binaryShiftByteCount;c++)(0===c||31===c&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):n.appendBits(0===c?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),n.appendBits(s[this.binaryShiftStart+c],8)},e.prototype.addBinaryShift=function(n,s){return new e(this,n,s)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Mu);function Pl(i,e,n){return new Mu(i,e,n)}var W0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],s_=new Mu(null,0,0),gp=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],lh=function a_(i){var e,n;try{for(var s=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),c=s.next();!c.done;c=s.next())Jr.fill(c.value,-1)}catch(g){e={error:g}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i[0][4]=0,i[1][4]=0,i[1][0]=28,i[3][4]=0,i[2][4]=0,i[2][0]=15,i}(Jr.createInt32Array(6,6));const af=function(){function i(e,n,s,c){this.token=e,this.mode=n,this.binaryShiftByteCount=s,this.bitCount=c}return i.prototype.getMode=function(){return this.mode},i.prototype.getToken=function(){return this.token},i.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},i.prototype.getBitCount=function(){return this.bitCount},i.prototype.latchAndAppend=function(e,n){var s=this.bitCount,c=this.token;if(e!==this.mode){var l=gp[this.mode][e];c=Pl(c,65535&l,l>>16),s+=l>>16}var g=2===e?4:5;return new i(c=Pl(c,n,g),e,0,s+g)},i.prototype.shiftAndAppend=function(e,n){var s=this.token,c=2===this.mode?4:5;return s=Pl(s,lh[this.mode][e],c),new i(s=Pl(s,n,5),this.mode,0,this.bitCount+c+5)},i.prototype.addBinaryShiftChar=function(e){var n=this.token,s=this.mode,c=this.bitCount;if(4===this.mode||2===this.mode){var l=gp[s][0];n=Pl(n,65535&l,l>>16),c+=l>>16,s=0}var m=new i(n,s,this.binaryShiftByteCount+1,c+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===m.binaryShiftByteCount&&(m=m.endBinaryShift(e+1)),m},i.prototype.endBinaryShift=function(e){if(0===this.binaryShiftByteCount)return this;var n=this.token;return n=function l1(i,e,n){return new ah(i,e,n)}(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new i(n,this.mode,0,this.bitCount)},i.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(gp[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=i.calculateBinaryShiftCost(e)-i.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},i.prototype.toBitArray=function(e){for(var n,s,c=[],l=this.endBinaryShift(e.length).token;null!==l;l=l.getPrevious())c.unshift(l);var g=new Ci;try{for(var m=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),y=m.next();!y.done;y=m.next())y.value.appendTo(g,e)}catch(P){n={error:P}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}return g},i.prototype.toString=function(){return gt.format("%s bits=%d bytes=%d",W0[this.mode],this.bitCount,this.binaryShiftByteCount)},i.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},i.INITIAL_STATE=new i(s_,0,0,0),i}();var Og=function dh(i){var e=gt.getCharCode(" "),n=gt.getCharCode("."),s=gt.getCharCode(",");i[0][e]=1;for(var c=gt.getCharCode("Z"),l=gt.getCharCode("A"),g=l;g<=c;g++)i[0][g]=g-l+2;i[1][e]=1;var m=gt.getCharCode("z"),y=gt.getCharCode("a");for(g=y;g<=m;g++)i[1][g]=g-y+2;i[2][e]=1;var b=gt.getCharCode("9"),P=gt.getCharCode("0");for(g=P;g<=b;g++)i[2][g]=g-P+2;i[2][s]=12,i[2][n]=13;for(var B=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],z=0;z<B.length;z++)i[3][gt.getCharCode(B[z])]=z;var K=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(z=0;z<K.length;z++)gt.getCharCode(K[z])>0&&(i[4][gt.getCharCode(K[z])]=z);return i}(Jr.createInt32Array(5,256)),mp=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Pg=function(){function i(e){this.text=e}return i.prototype.encode=function(){for(var e=gt.getCharCode(" "),n=gt.getCharCode("\n"),s=Mg.singletonList(af.INITIAL_STATE),c=0;c<this.text.length;c++){var l=void 0,g=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case gt.getCharCode("\r"):l=g===n?2:0;break;case gt.getCharCode("."):l=g===e?3:0;break;case gt.getCharCode(","):l=g===e?4:0;break;case gt.getCharCode(":"):l=g===e?5:0;break;default:l=0}l>0?(s=i.updateStateListForPair(s,c,l),c++):s=this.updateStateListForChar(s,c)}return Mg.min(s,function(y,b){return y.getBitCount()-b.getBitCount()}).toBitArray(this.text)},i.prototype.updateStateListForChar=function(e,n){var s,c,l=[];try{for(var g=mp(e),m=g.next();!m.done;m=g.next())this.updateStateForChar(m.value,n,l)}catch(b){s={error:b}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}return i.simplifyStates(l)},i.prototype.updateStateForChar=function(e,n,s){for(var c=255&this.text[n],l=Og[e.getMode()][c]>0,g=null,m=0;m<=4;m++){var y=Og[m][c];if(y>0){if(null==g&&(g=e.endBinaryShift(n)),!l||m===e.getMode()||2===m){var b=g.latchAndAppend(m,y);s.push(b)}if(!l&&lh[e.getMode()][m]>=0){var P=g.shiftAndAppend(m,y);s.push(P)}}}if(e.getBinaryShiftByteCount()>0||0===Og[e.getMode()][c]){var B=e.addBinaryShiftChar(n);s.push(B)}},i.updateStateListForPair=function(e,n,s){var c,l,g=[];try{for(var m=mp(e),y=m.next();!y.done;y=m.next())this.updateStateForPair(y.value,n,s,g)}catch(P){c={error:P}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}return this.simplifyStates(g)},i.updateStateForPair=function(e,n,s,c){var l=e.endBinaryShift(n);if(c.push(l.latchAndAppend(4,s)),4!==e.getMode()&&c.push(l.shiftAndAppend(4,s)),3===s||4===s){var g=l.latchAndAppend(2,16-s).latchAndAppend(2,1);c.push(g)}if(e.getBinaryShiftByteCount()>0){var m=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);c.push(m)}},i.simplifyStates=function(e){var n,s,c,l,g=[];try{for(var m=mp(e),y=m.next();!y.done;y=m.next()){var b=y.value,P=!0,B=function(Re){if(Re.isBetterThanOrEqualTo(b))return P=!1,"break";b.isBetterThanOrEqualTo(Re)&&(g=g.filter(function(Ve){return Ve!==Re}))};try{for(var z=(c=void 0,mp(g)),K=z.next();!K.done&&"break"!==B(K.value);K=z.next());}catch(Re){c={error:Re}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}P&&g.push(b)}}catch(Re){n={error:Re}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}return g},i}(),u_=function(){function i(){}return i.encodeBytes=function(e){return i.encode(e,i.DEFAULT_EC_PERCENT,i.DEFAULT_AZTEC_LAYERS)},i.encode=function(e,n,s){var m,y,b,P,B,c=new Pg(e).encode(),l=ur.truncDivision(c.getSize()*n,100)+11,g=c.getSize()+l;if(s!==i.DEFAULT_AZTEC_LAYERS){if(m=s<0,(y=Math.abs(s))>(m?i.MAX_NB_BITS_COMPACT:i.MAX_NB_BITS))throw new ln(gt.format("Illegal value %s for layers",s));var z=(b=i.totalBitsInLayer(y,m))-b%(P=i.WORD_SIZE[y]);if((B=i.stuffBits(c,P)).getSize()+l>z)throw new ln("Data to large for user specified layer");if(m&&B.getSize()>64*P)throw new ln("Data to large for user specified layer")}else{P=0,B=null;for(var K=0;;K++){if(K>i.MAX_NB_BITS)throw new ln("Data too large for an Aztec code");if(!(g>(b=i.totalBitsInLayer(y=(m=K<=3)?K+1:K,m)))&&((null==B||P!==i.WORD_SIZE[y])&&(B=i.stuffBits(c,P=i.WORD_SIZE[y])),z=b-b%P,!(m&&B.getSize()>64*P)&&B.getSize()+l<=z))break}}var Ye,ae=i.generateCheckWords(B,b,P),ye=B.getSize()/P,Re=i.generateModeMessage(m,y,ye),Ve=(m?11:14)+4*y,Ne=new Int32Array(Ve);if(m)for(Ye=Ve,K=0;K<Ne.length;K++)Ne[K]=K;else{Ye=Ve+1+2*ur.truncDivision(ur.truncDivision(Ve,2)-1,15);var at=ur.truncDivision(Ve,2),Ft=ur.truncDivision(Ye,2);for(K=0;K<at;K++){var $t=K+ur.truncDivision(K,15);Ne[at-K-1]=Ft-$t-1,Ne[at+K]=Ft+$t+1}}for(var Zt=new tr(Ye),pn=(K=0,0);K<y;K++){for(var rr=4*(y-K)+(m?9:12),ir=0;ir<rr;ir++)for(var ss=2*ir,fi=0;fi<2;fi++)ae.get(pn+ss+fi)&&Zt.set(Ne[2*K+fi],Ne[2*K+ir]),ae.get(pn+2*rr+ss+fi)&&Zt.set(Ne[2*K+ir],Ne[Ve-1-2*K-fi]),ae.get(pn+4*rr+ss+fi)&&Zt.set(Ne[Ve-1-2*K-fi],Ne[Ve-1-2*K-ir]),ae.get(pn+6*rr+ss+fi)&&Zt.set(Ne[Ve-1-2*K-ir],Ne[2*K+fi]);pn+=8*rr}if(i.drawModeMessage(Zt,m,Ye,Re),m)i.drawBullsEye(Zt,ur.truncDivision(Ye,2),5);else for(i.drawBullsEye(Zt,ur.truncDivision(Ye,2),7),K=0,ir=0;K<ur.truncDivision(Ve,2)-1;K+=15,ir+=16)for(fi=1&ur.truncDivision(Ye,2);fi<Ye;fi+=2)Zt.set(ur.truncDivision(Ye,2)-ir,fi),Zt.set(ur.truncDivision(Ye,2)+ir,fi),Zt.set(fi,ur.truncDivision(Ye,2)-ir),Zt.set(fi,ur.truncDivision(Ye,2)+ir);var Ao=new fp;return Ao.setCompact(m),Ao.setSize(Ye),Ao.setLayers(y),Ao.setCodeWords(ye),Ao.setMatrix(Zt),Ao},i.drawBullsEye=function(e,n,s){for(var c=0;c<s;c+=2)for(var l=n-c;l<=n+c;l++)e.set(l,n-c),e.set(l,n+c),e.set(n-c,l),e.set(n+c,l);e.set(n-s,n-s),e.set(n-s+1,n-s),e.set(n-s,n-s+1),e.set(n+s,n-s),e.set(n+s,n-s+1),e.set(n+s,n+s-1)},i.generateModeMessage=function(e,n,s){var c=new Ci;return e?(c.appendBits(n-1,2),c.appendBits(s-1,6),c=i.generateCheckWords(c,28,4)):(c.appendBits(n-1,5),c.appendBits(s-1,11),c=i.generateCheckWords(c,40,4)),c},i.drawModeMessage=function(e,n,s,c){var l=ur.truncDivision(s,2);if(n)for(var g=0;g<7;g++){var m=l-3+g;c.get(g)&&e.set(m,l-5),c.get(g+7)&&e.set(l+5,m),c.get(20-g)&&e.set(m,l+5),c.get(27-g)&&e.set(l-5,m)}else for(g=0;g<10;g++)m=l-5+g+ur.truncDivision(g,5),c.get(g)&&e.set(m,l-7),c.get(g+10)&&e.set(l+7,m),c.get(29-g)&&e.set(m,l+7),c.get(39-g)&&e.set(l-7,m)},i.generateCheckWords=function(e,n,s){var c,l,g=e.getSize()/s,m=new vg(i.getGF(s)),y=ur.truncDivision(n,s),b=i.bitsToWords(e,s,y);m.encode(b,y-g);var P=n%s,B=new Ci;B.appendBits(0,P);try{for(var z=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(b)),K=z.next();!K.done;K=z.next())B.appendBits(K.value,s)}catch(ye){c={error:ye}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}return B},i.bitsToWords=function(e,n,s){var l,g,c=new Int32Array(s);for(l=0,g=e.getSize()/n;l<g;l++){for(var m=0,y=0;y<n;y++)m|=e.get(l*n+y)?1<<n-y-1:0;c[l]=m}return c},i.getGF=function(e){switch(e){case 4:return pi.AZTEC_PARAM;case 6:return pi.AZTEC_DATA_6;case 8:return pi.AZTEC_DATA_8;case 10:return pi.AZTEC_DATA_10;case 12:return pi.AZTEC_DATA_12;default:throw new ln("Unsupported word size "+e)}},i.stuffBits=function(e,n){for(var s=new Ci,c=e.getSize(),l=(1<<n)-2,g=0;g<c;g+=n){for(var m=0,y=0;y<n;y++)(g+y>=c||e.get(g+y))&&(m|=1<<n-1-y);(m&l)===l?(s.appendBits(m&l,n),g--):m&l?s.appendBits(m,n):(s.appendBits(1|m,n),g--)}return s},i.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},i.DEFAULT_EC_PERCENT=33,i.DEFAULT_AZTEC_LAYERS=0,i.MAX_NB_BITS=32,i.MAX_NB_BITS_COMPACT=4,i.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),i}();!function(){function i(){}i.prototype.encode=function(e,n,s,c){return this.encodeWithHints(e,n,s,c,null)},i.prototype.encodeWithHints=function(e,n,s,c,l){var g=a1.ISO_8859_1,m=u_.DEFAULT_EC_PERCENT,y=u_.DEFAULT_AZTEC_LAYERS;return null!=l&&(l.has(br.CHARACTER_SET)&&(g=Zf.forName(l.get(br.CHARACTER_SET).toString())),l.has(br.ERROR_CORRECTION)&&(m=ur.parseInt(l.get(br.ERROR_CORRECTION).toString())),l.has(br.AZTEC_LAYERS)&&(y=ur.parseInt(l.get(br.AZTEC_LAYERS).toString()))),i.encodeLayers(e,n,s,c,g,m,y)},i.encodeLayers=function(e,n,s,c,l,g,m){if(n!==sn.AZTEC)throw new ln("Can only encode AZTEC, but got "+n);var y=u_.encode(gt.getBytes(e,l),g,m);return i.renderResult(y,s,c)},i.renderResult=function(e,n,s){var c=e.getMatrix();if(null==c)throw new gs;for(var l=c.getWidth(),g=c.getHeight(),m=Math.max(n,l),y=Math.max(s,g),b=Math.min(m/l,y/g),P=(m-l*b)/2,B=(y-g*b)/2,z=new tr(m,y),K=0,ae=B;K<g;K++,ae+=b)for(var ye=0,Re=P;ye<l;ye++,Re+=b)c.get(ye,K)&&z.setRegion(Re,ae,b,b);return z}}();var d_=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),f_=function(i){function e(n){var s=i.call(this,n.width,n.height)||this;return s.canvas=n,s.tempCanvasElement=null,s.buffer=e.makeBufferFromCanvasImageData(n),s}return d_(e,i),e.makeBufferFromCanvasImageData=function(n){var s;try{s=n.getContext("2d",{willReadFrequently:!0})}catch{s=n.getContext("2d")}if(!s)throw new Error("Couldn't get canvas context.");var c=s.getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(c.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,s,c){for(var l=new Uint8ClampedArray(s*c),g=0,m=0,y=n.length;g<y;g+=4,m++){l[m]=0===n[g+3]?255:306*n[g]+601*n[g+1]+117*n[g+2]+512>>10}return l},e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new ln("Requested row is outside the image: "+n);var c=this.getWidth(),l=n*c;return null===s?s=this.buffer.slice(l,l+c):(s.length<c&&(s=new Uint8ClampedArray(c)),s.set(this.buffer.slice(l,l+c))),s},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return i.prototype.crop.call(this,n,s,c,l),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Oo(this)},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var s=this.getTempCanvasElement();if(!s)throw new Error("Could not create a Canvas element.");var c=n*e.DEGREE_TO_RADIANS,l=this.canvas.width,g=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*l+Math.abs(Math.sin(c))*g),y=Math.ceil(Math.abs(Math.sin(c))*l+Math.abs(Math.cos(c))*g);s.width=m,s.height=y;var b=s.getContext("2d");if(!b)throw new Error("Could not create a Canvas Context element.");return b.translate(m/2,y/2),b.rotate(c),b.drawImage(this.canvas,l/-2,g/-2),this.buffer=e.makeBufferFromCanvasImageData(s),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(mn);function Ng(){return typeof navigator<"u"}var uf=function(){return uf=Object.assign||function(i){for(var e,n=1,s=arguments.length;n<s;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(i[c]=e[c]);return i},uf.apply(this,arguments)},Io=function(i,e,n,s){return new(n||(n=Promise))(function(l,g){function m(P){try{b(s.next(P))}catch(B){g(B)}}function y(P){try{b(s.throw(P))}catch(B){g(B)}}function b(P){P.done?l(P.value):function c(l){return l instanceof n?l:new n(function(g){g(l)})}(P.value).then(m,y)}b((s=s.apply(i,e||[])).next())})},xi=function(i,e){var s,c,l,g,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return g={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function m(b){return function(P){return function y(b){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,c&&(l=2&b[0]?c.return:b[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,b[1])).done)return l;switch(c=0,l&&(b=[2&b[0],l.value]),b[0]){case 0:case 1:l=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===b[0]||2===b[0])){n=0;continue}if(3===b[0]&&(!l||b[1]>l[0]&&b[1]<l[3])){n.label=b[1];break}if(6===b[0]&&n.label<l[1]){n.label=l[1],l=b;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(b);break}l[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(i,n)}catch(P){b=[6,P],c=0}finally{s=l=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,P])}}},kg=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d1={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Zs=function(){function i(e,n,s){void 0===n&&(n=new Map),void 0===s&&(s={}),this.reader=e,this.hints=n,this.options=uf(uf({},d1),s)}return Object.defineProperty(i.prototype,"possibleFormats",{set:function(e){this.hints.set(Un.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),i.addVideoSource=function(e,n){try{e.srcObject=n}catch{console.error("got interrupted by new loading request")}},i.mediaStreamSetTorch=function(e,n){return Io(this,void 0,void 0,function(){return xi(this,function(s){switch(s.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:n?"flash":"off",torch:!!n}]})];case 1:return s.sent(),[2]}})})},i.mediaStreamIsTorchCompatible=function(e){var n,s,c=e.getVideoTracks();try{for(var l=kg(c),g=l.next();!g.done;g=l.next())if(i.mediaStreamIsTorchCompatibleTrack(g.value))return!0}catch(y){n={error:y}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return!1},i.mediaStreamIsTorchCompatibleTrack=function(e){try{return"torch"in e.getCapabilities()}catch(s){return console.error(s),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},i.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},i.getMediaElement=function(e,n){var s=document.getElementById(e);if(!s)throw new Zr("element with id '".concat(e,"' not found"));if(s.nodeName.toLowerCase()!==n.toLowerCase())throw new Zr("element with id '".concat(e,"' must be an ").concat(n," element"));return s},i.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if("string"==typeof e)return i.getMediaElement(e,"video");if(!e&&typeof document<"u"){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},i.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if("string"==typeof e)return i.getMediaElement(e,"img");if(typeof e>"u"){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},i.prepareVideoElement=function(e){var n=i.createVideoElement(e);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},i.isImageLoaded=function(e){return!(!e.complete||0===e.naturalWidth)},i.createBinaryBitmapFromCanvas=function(e){var n=new f_(e),s=new Oi(n);return new jc(s)},i.drawImageOnCanvas=function(e,n){e.drawImage(n,0,0)},i.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},i.createCaptureCanvas=function(e){if(!e)throw new Zr("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var n=document.createElement("canvas"),s=i.getMediaElementDimensions(e),c=s.width,l=s.height;return n.style.width=c+"px",n.style.height=l+"px",n.width=c,n.height=l,n},i.tryPlayVideo=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(s){switch(s.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(i.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.play()];case 2:return s.sent(),[2,!0];case 3:return n=s.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}})})},i.createCanvasFromMediaElement=function(e){var n=i.createCaptureCanvas(e),s=n.getContext("2d");if(!s)throw new Error("Couldn't find Canvas 2D Context.");return i.drawImageOnCanvas(s,e),n},i.createBinaryBitmapFromMediaElem=function(e){var n=i.createCanvasFromMediaElement(e);return i.createBinaryBitmapFromCanvas(n)},i.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},i.listVideoInputDevices=function(){return Io(this,void 0,void 0,function(){var e,n,s,c,l,g,m,y,B,z;return xi(this,function(K){switch(K.label){case 0:if(!Ng())throw new Error("Can't enumerate devices, navigator is not present.");if(!function X0(){return!(!function h_(){return Ng()&&!!navigator.mediaDevices}()||!navigator.mediaDevices.enumerateDevices)}())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=K.sent(),n=[];try{for(s=kg(e),c=s.next();!c.done;c=s.next())"videoinput"===(g="video"===(l=c.value).kind?"videoinput":l.kind)&&(m=l.deviceId||l.id,y=l.label||"Video device ".concat(n.length+1),n.push({deviceId:m,label:y,kind:g,groupId:l.groupId}))}catch(ae){B={error:ae}}finally{try{c&&!c.done&&(z=s.return)&&z.call(s)}finally{if(B)throw B.error}}return[2,n]}})})},i.findDeviceById=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(s){switch(s.label){case 0:return[4,i.listVideoInputDevices()];case 1:return(n=s.sent())?[2,n.find(function(c){return c.deviceId===e})]:[2]}})})},i.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},i.releaseAllStreams=function(){0!==i.streamTracker.length&&i.streamTracker.forEach(function(e){e.getTracks().forEach(function(n){return n.stop()})}),i.streamTracker=[]},i.playVideoOnLoadAsync=function(e,n){return Io(this,void 0,void 0,function(){return xi(this,function(c){switch(c.label){case 0:return[4,i.tryPlayVideo(e)];case 1:return c.sent()?[2,!0]:[2,new Promise(function(l,g){var m=setTimeout(function(){i.isVideoPlaying(e)||(g(!1),e.removeEventListener("canplay",y))},n),y=function(){i.tryPlayVideo(e).then(function(b){clearTimeout(m),e.removeEventListener("canplay",y),l(b)})};e.addEventListener("canplay",y)})]}})})},i.attachStreamToVideo=function(e,n,s){return void 0===s&&(s=5e3),Io(this,void 0,void 0,function(){var c;return xi(this,function(l){switch(l.label){case 0:return c=i.prepareVideoElement(n),i.addVideoSource(c,e),[4,i.playVideoOnLoadAsync(c,s)];case 1:return l.sent(),[2,c]}})})},i._waitImageLoad=function(e){return new Promise(function(n,s){var l=setTimeout(function(){i.isImageLoaded(e)||(e.removeEventListener("load",g),s())},1e4),g=function(){clearTimeout(l),e.removeEventListener("load",g),n()};e.addEventListener("load",g)})},i.checkCallbackFnOrThrow=function(e){if(!e)throw new Zr("`callbackFn` is a required parameter, you cannot capture results without it.")},i.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(n){return n.stop()}),e=void 0},i.prototype.decode=function(e){var n=i.createCanvasFromMediaElement(e);return this.decodeFromCanvas(n)},i.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},i.prototype.decodeFromCanvas=function(e){var n=i.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(n)},i.prototype.decodeFromImageElement=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(s){switch(s.label){case 0:if(!e)throw new Zr("An image element must be provided.");return n=i.prepareImageElement(e),[4,this._decodeOnLoadImage(n)];case 1:return[2,s.sent()]}})})},i.prototype.decodeFromImageUrl=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(s){switch(s.label){case 0:if(!e)throw new Zr("An URL must be provided.");(n=i.prepareImageElement()).src=e,s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,s.sent()];case 3:return i.destroyImageElement(n),[7];case 4:return[2]}})})},i.prototype.decodeFromConstraints=function(e,n,s){return Io(this,void 0,void 0,function(){var c,l;return xi(this,function(g){switch(g.label){case 0:return i.checkCallbackFnOrThrow(s),[4,this.getUserMedia(e)];case 1:c=g.sent(),g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.decodeFromStream(c,n,s)];case 3:return[2,g.sent()];case 4:throw l=g.sent(),i.disposeMediaStream(c),l;case 5:return[2]}})})},i.prototype.decodeFromStream=function(e,n,s){return Io(this,void 0,void 0,function(){var l,m,y,b,B,z,K=this;return xi(this,function(ae){switch(ae.label){case 0:return i.checkCallbackFnOrThrow(s),[4,i.attachStreamToVideo(e,n,this.options.tryPlayVideoTimeout)];case 1:return l=ae.sent(),m=this.scan(l,s,function(){i.disposeMediaStream(e),i.cleanVideoSource(l)}),y=e.getVideoTracks(),b=uf(uf({},m),{stop:function(){m.stop()},streamVideoConstraintsApply:function(ye,Re){return Io(this,void 0,void 0,function(){var Ve,Ne,Ye,Ft,$t,Zt;return xi(this,function(pn){switch(pn.label){case 0:Ve=Re?y.filter(Re):y,pn.label=1;case 1:pn.trys.push([1,6,7,8]),Ne=kg(Ve),Ye=Ne.next(),pn.label=2;case 2:return Ye.done?[3,5]:[4,Ye.value.applyConstraints(ye)];case 3:pn.sent(),pn.label=4;case 4:return Ye=Ne.next(),[3,2];case 5:return[3,8];case 6:return Ft=pn.sent(),$t={error:Ft},[3,8];case 7:try{Ye&&!Ye.done&&(Zt=Ne.return)&&Zt.call(Ne)}finally{if($t)throw $t.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(ye){return y.find(ye).getConstraints()},streamVideoSettingsGet:function(ye){return y.find(ye).getSettings()},streamVideoCapabilitiesGet:function(ye){return y.find(ye).getCapabilities()}}),i.mediaStreamIsTorchCompatible(e)&&(B=y?.find(function(ye){return i.mediaStreamIsTorchCompatibleTrack(ye)}),b.switchTorch=z=function(ye){return Io(K,void 0,void 0,function(){return xi(this,function(Re){switch(Re.label){case 0:return[4,i.mediaStreamSetTorch(B,ye)];case 1:return Re.sent(),[2]}})})},b.stop=function(){return Io(K,void 0,void 0,function(){return xi(this,function(ye){switch(ye.label){case 0:return m.stop(),[4,z(!1)];case 1:return ye.sent(),[2]}})})}),[2,b]}})})},i.prototype.decodeFromVideoDevice=function(e,n,s){return Io(this,void 0,void 0,function(){return xi(this,function(g){switch(g.label){case 0:return i.checkCallbackFnOrThrow(s),[4,this.decodeFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n,s)];case 1:return[2,g.sent()]}})})},i.prototype.decodeFromVideoElement=function(e,n){return Io(this,void 0,void 0,function(){var s;return xi(this,function(l){switch(l.label){case 0:if(i.checkCallbackFnOrThrow(n),!e)throw new Zr("A video element must be provided.");return s=i.prepareVideoElement(e),[4,i.playVideoOnLoadAsync(s,this.options.tryPlayVideoTimeout)];case 1:return l.sent(),[2,this.scan(s,n)]}})})},i.prototype.decodeFromVideoUrl=function(e,n){return Io(this,void 0,void 0,function(){var s,c;return xi(this,function(m){switch(m.label){case 0:if(i.checkCallbackFnOrThrow(n),!e)throw new Zr("An URL must be provided.");return(s=i.prepareVideoElement()).src=e,c=function(){i.cleanVideoSource(s)},[4,i.playVideoOnLoadAsync(s,this.options.tryPlayVideoTimeout)];case 1:return m.sent(),[2,this.scan(s,n,c)]}})})},i.prototype.decodeOnceFromConstraints=function(e,n){return Io(this,void 0,void 0,function(){var s;return xi(this,function(c){switch(c.label){case 0:return[4,this.getUserMedia(e)];case 1:return s=c.sent(),[4,this.decodeOnceFromStream(s,n)];case 2:return[2,c.sent()]}})})},i.prototype.decodeOnceFromStream=function(e,n){return Io(this,void 0,void 0,function(){var s,c;return xi(this,function(g){switch(g.label){case 0:return s=!!n,[4,i.attachStreamToVideo(e,n)];case 1:c=g.sent(),g.label=2;case 2:return g.trys.push([2,,4,5]),[4,this.scanOneResult(c)];case 3:return[2,g.sent()];case 4:return s||i.cleanVideoSource(c),[7];case 5:return[2]}})})},i.prototype.decodeOnceFromVideoDevice=function(e,n){return Io(this,void 0,void 0,function(){return xi(this,function(l){switch(l.label){case 0:return[4,this.decodeOnceFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n)];case 1:return[2,l.sent()]}})})},i.prototype.decodeOnceFromVideoElement=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(c){switch(c.label){case 0:if(!e)throw new Zr("A video element must be provided.");return n=i.prepareVideoElement(e),[4,i.playVideoOnLoadAsync(n,this.options.tryPlayVideoTimeout)];case 1:return c.sent(),[4,this.scanOneResult(n)];case 2:return[2,c.sent()]}})})},i.prototype.decodeOnceFromVideoUrl=function(e){return Io(this,void 0,void 0,function(){var n,s;return xi(this,function(c){switch(c.label){case 0:if(!e)throw new Zr("An URL must be provided.");(n=i.prepareVideoElement()).src=e,s=this.decodeOnceFromVideoElement(n),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,s];case 2:return[2,c.sent()];case 3:return i.cleanVideoSource(n),[7];case 4:return[2]}})})},i.prototype.scanOneResult=function(e,n,s,c){var l=this;return void 0===n&&(n=!0),void 0===s&&(s=!0),void 0===c&&(c=!0),new Promise(function(g,m){l.scan(e,function(y,b,P){if(y)return g(y),void P.stop();if(b){if(b instanceof qe&&n||b instanceof ui&&s||b instanceof Yt&&c)return;P.stop(),m(b)}})})},i.prototype.scan=function(e,n,s){var c=this;i.checkCallbackFnOrThrow(n);var g,l=i.createCaptureCanvas(e);try{g=l.getContext("2d",{willReadFrequently:!0})}catch{g=l.getContext("2d")}if(!g)throw new Error("Couldn't create canvas for visual element scan.");var b,m=function(){g=void 0,l=void 0},y=!1,B={stop:function(){y=!0,clearTimeout(b),m(),s&&s()}},z=function(){if(!y)try{i.drawImageOnCanvas(g,e);var K=c.decodeFromCanvas(l);n(K,void 0,B),b=setTimeout(z,c.options.delayBetweenScanSuccess)}catch(Ve){if(n(void 0,Ve,B),Ve instanceof ui||Ve instanceof Yt||Ve instanceof qe)return void(b=setTimeout(z,c.options.delayBetweenScanAttempts));m(),s&&s(Ve)}};return z(),B},i.prototype._decodeOnLoadImage=function(e){return Io(this,void 0,void 0,function(){return xi(this,function(s){switch(s.label){case 0:return i.isImageLoaded(e)?[3,2]:[4,i._waitImageLoad(e)];case 1:s.sent(),s.label=2;case 2:return[2,this.decode(e)]}})})},i.prototype.getUserMedia=function(e){return Io(this,void 0,void 0,function(){var n;return xi(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=s.sent(),i.streamTracker.push(n),[2,n]}})})},i.streamTracker=[],i}(),vp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),hE=(function(i){vp(function e(n,s){return i.call(this,new Pt,n,s)||this},i)}(Zs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),pE=(function(i){hE(function e(n,s){return i.call(this,new Ji(n),n,s)||this},i)}(Zs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),Q0=(function(i){pE(function e(n,s){return i.call(this,new Vf,n,s)||this},i)}(Zs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),p_=function(i){function e(n,s){var c=this,l=new zm;return l.setHints(n),(c=i.call(this,l,n,s)||this).reader=l,c}return Q0(e,i),Object.defineProperty(e.prototype,"possibleFormats",{set:function(n){this.hints.set(Un.POSSIBLE_FORMATS,n),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e.prototype.setHints=function(n){this.hints=n,this.reader.setHints(this.hints)},e}(Zs),f1=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),h1=(function(i){f1(function e(n,s){return i.call(this,new Xf,n,s)||this},i)}(Zs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),Pc=(function(i){h1(function e(n,s){return i.call(this,new zd,n,s)||this},i)}(Zs),"http://www.w3.org/2000/svg"),fh=(function(){function i(e){if("string"==typeof e){var n=document.getElementById(e);if(!n)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=n}else this.containerElement=e}i.prototype.write=function(e,n,s,c){if(0===e.length)throw new ln("Found empty contents");if(n<0||s<0)throw new ln("Requested dimensions are too small: "+n+"x"+s);var l=c&&void 0!==c.get(br.MARGIN)?Number.parseInt(c.get(br.MARGIN).toString(),10):i.QUIET_ZONE_SIZE,g=this.encode(c,e);return this.renderResult(g,n,s,l)},i.prototype.createSVGElement=function(e,n){var s=document.createElementNS(i.SVG_NS,"svg");return s.setAttributeNS(Pc,"width",n.toString()),s.setAttributeNS(Pc,"height",e.toString()),s},i.prototype.createSvgPathPlaceholderElement=function(e,n){var s=document.createElementNS(i.SVG_NS,"path");return s.setAttributeNS(Pc,"d","M0 0h".concat(e,"v").concat(n,"H0z")),s.setAttributeNS(Pc,"fill","none"),s},i.prototype.createSvgRectElement=function(e,n,s,c){var l=document.createElementNS(i.SVG_NS,"rect");return l.setAttributeNS(Pc,"x",e.toString()),l.setAttributeNS(Pc,"y",n.toString()),l.setAttributeNS(Pc,"height",s.toString()),l.setAttributeNS(Pc,"width",c.toString()),l.setAttributeNS(Pc,"fill","#000000"),l},i.prototype.encode=function(e,n){var s=eu.L;if(e&&void 0!==e.get(br.ERROR_CORRECTION)){var c=e.get(br.ERROR_CORRECTION).toString();s=eu.fromString(c)}return Qf.encode(n,s,e)},i.prototype.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new gs;var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),ye=this.createSVGElement(P,B),Re=this.createSvgPathPlaceholderElement(n,s);ye.appendChild(Re),this.containerElement.appendChild(ye);for(var Ve=0,Ne=ae;Ve<m;Ve++,Ne+=z)for(var Ye=0,at=K;Ye<g;Ye++,at+=z)if(1===l.get(Ye,Ve)){var Ft=this.createSvgRectElement(at,Ne,z,z);ye.appendChild(Ft)}return ye},i.QUIET_ZONE_SIZE=4,i.SVG_NS="http://www.w3.org/2000/svg"}(),"http://www.w3.org/2000/svg"),Fg=(function(){function i(){}i.prototype.write=function(e,n,s,c){if(0===e.length)throw new ln("Found empty contents");if(n<0||s<0)throw new ln("Requested dimensions are too small: "+n+"x"+s);var l=eu.L,g=i.QUIET_ZONE_SIZE;if(c){if(void 0!==c.get(br.ERROR_CORRECTION)){var m=c.get(br.ERROR_CORRECTION).toString();l=eu.fromString(m)}void 0!==c.get(br.MARGIN)&&(g=Number.parseInt(c.get(br.MARGIN).toString(),10))}var y=Qf.encode(e,l,c);return this.renderResult(y,n,s,g)},i.prototype.writeToDom=function(e,n,s,c,l){if("string"==typeof e){var g=document.querySelector(e);if(!g)throw new Error("Could no find the target HTML element.");e=g}var m=this.write(n,s,c,l);e instanceof HTMLElement&&e.appendChild(m)},i.prototype.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new gs;for(var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),ye=this.createSVGElement(P,B),Re=0,Ve=ae;Re<m;Re++,Ve+=z)for(var Ne=0,Ye=K;Ne<g;Ne++,Ye+=z)if(1===l.get(Ne,Re)){var at=this.createSvgRectElement(Ye,Ve,z,z);ye.appendChild(at)}return ye},i.prototype.createSVGElement=function(e,n){var s=document.createElementNS(fh,"svg"),c=e.toString(),l=n.toString();return s.setAttribute("height",l),s.setAttribute("width",c),s.setAttribute("viewBox","0 0 "+c+" "+l),s},i.prototype.createSvgRectElement=function(e,n,s,c){var l=document.createElementNS(fh,"rect");return l.setAttribute("x",e.toString()),l.setAttribute("y",n.toString()),l.setAttribute("height",s.toString()),l.setAttribute("width",c.toString()),l.setAttribute("fill","#000000"),l},i.QUIET_ZONE_SIZE=4}(),ie(4412));const yp=["preview"];class hh extends p_{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(e,n){var s=this;return(0,ve.A)(function*(){const c=new Fg.t({});let l;try{l=yield s.decodeFromVideoDevice(e,n,(g,m)=>{if(!m)return void c.next({result:g});const y=m.name;y===qe.name||y===ui.name||y===Yt.name||m.message.includes("No MultiFormat Readers were able to detect the code.")?c.next({error:m}):(c.error(m),s.scannerControls.stop(),s.scannerControls=void 0)}),s.scannerControls={...l,stop(){l.stop(),c.complete()}}}catch(g){c.error(g),s.scannerControls?.stop(),s.scannerControls=void 0}return c.asObservable()})()}}let g1=(()=>{class i{get codeReader(){return this._codeReader}set device(n){this._ready?this.isAutostarting?console.warn("Avoid setting a device during auto-start."):this.isCurrentDevice(n)?console.warn("Setting the same device is not allowed."):this.hasPermission?this.setDevice(n):console.warn("Permissions not set yet, waiting for them to be set to apply device change."):this._devicePreStart=n}get device(){return this._device}get formats(){return this.hints.get(Un.POSSIBLE_FORMATS)}set formats(n){if("string"==typeof n)throw new Error("Invalid formats, make sure the [formats] input is a binding.");const s=n.map(l=>this.getBarcodeFormatOrFail(l)),c=this.hints;c.set(Un.POSSIBLE_FORMATS,s),this.hints=c}get hints(){return this._hints}set hints(n){this._hints=n,this.codeReader?.setHints(this._hints)}set videoConstraints(n){const s=this.codeReader?.getScannerControls();s&&s?.streamVideoConstraintsApply(n)}set isAutostarting(n){this._isAutostarting=n,this.autostarting.next(n)}get isAutostarting(){return this._isAutostarting}set torch(n){try{this.getCodeReader().getScannerControls().switchTorch(n)}catch{}}set enable(n){this._enabled!==!!n&&(this._enabled=!!n,this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():(this.reset(),hh.releaseAllStreams()))}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(Un.TRY_HARDER)}set tryHarder(n){const s=this.hints;n?s.set(Un.TRY_HARDER,!0):s.delete(Un.TRY_HARDER),this.hints=s}constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this.poster="",this._ready=!1,this.autostarted=new L.bkB,this.autostarting=new L.bkB,this.torchCompatible=new L.bkB(!1),this.scanSuccess=new L.bkB,this.scanFailure=new L.bkB,this.scanError=new L.bkB,this.scanComplete=new L.bkB,this.camerasFound=new L.bkB,this.camerasNotFound=new L.bkB,this.permissionResponse=new L.bkB(!0),this.hasDevices=new L.bkB,this.deviceChange=new L.bkB,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[sn.QR_CODE],this.hasNavigator=typeof navigator<"u",this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}askForPermission(){var n=this;return(0,ve.A)(function*(){if(!n.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),n.setPermission(null),n.hasPermission;if(!n.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),n.setPermission(null),n.hasPermission;let s,c;try{s=yield n.getAnyVideoDevice(),c=!!s}catch(l){return n.handlePermissionException(l)}finally{n.terminateStream(s)}return n.setPermission(c),c})()}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(n){n&&n.getTracks().forEach(s=>s.stop()),n=void 0}init(){var n=this;return(0,ve.A)(function*(){if(!n.autostart)return console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),n.initAutostartOff(),void(n._ready=!0);yield n.initAutostartOn(),n._ready=!0})()}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){var n=this;return(0,ve.A)(function*(){let s;n.isAutostarting=!0;try{s=yield n.askForPermission()}catch(c){return void console.error("Exception occurred while asking for permission:",c)}if(s){const c=yield n.updateVideoInputDevices();yield n.autostartScanner([...c])}n.isAutostarting=!1,n.autostarted.next()})()}isCurrentDevice(n){return n?.deviceId===this._device?.deviceId}ngOnDestroy(){this.reset(),Zs.cleanVideoSource(this.previewElemRef.nativeElement),hh.releaseAllStreams()}ngOnInit(){this.init()}scanStop(){this._scanSubscription&&(this.codeReader?.getScannerControls().stop(),this._scanSubscription?.unsubscribe(),this._scanSubscription=void 0),this.torchCompatible.next(!1)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan process running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;const n=this._reset();n&&(this.device=n)}updateVideoInputDevices(){var n=this;return(0,ve.A)(function*(){const s=(yield Zs.listVideoInputDevices())||[],c=s&&s.length>0;return n.hasDevices.next(c),n.camerasFound.next([...s]),c||n.camerasNotFound.next(null),s})()}autostartScanner(n){var s=this;return(0,ve.A)(function*(){const l=n.find(({label:g})=>/back|tr\xe1s|rear|traseira|environment|ambiente/gi.test(g))||n.pop();if(!l)throw new Error("Impossible to autostart, no input devices available.");yield s.setDevice(l),s.deviceChange.next(l)})()}dispatchScanSuccess(n){this.scanSuccess.next(n.getText())}dispatchScanFailure(n){this.scanFailure.next(n)}dispatchScanError(n){this.scanError.observed||(console.error(`zxing scanner component: ${n.name}`,n),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(n)}dispatchScanComplete(n){this.scanComplete.next(n)}handlePermissionException(n){let s;switch(console.error("@zxing/ngx-scanner","Error when asking for permission.",n),n.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",n.message),s=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",n.message),s=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",n.message),s=null,this.hasDevices.next(!1),this.camerasNotFound.next(n);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),s=null,this.hasDevices.next(!1),this.camerasNotFound.next(n);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",n),s=null}return this.setPermission(s),this.permissionResponse.error(n),s}getBarcodeFormatOrFail(n){return"string"==typeof n?sn[n.trim().toUpperCase()]:n}getCodeReader(){return this._codeReader||(this._codeReader=new hh(this.hints,{delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess})),this._codeReader}scanFromDevice(n){var s=this;return(0,ve.A)(function*(){const c=s.previewElemRef.nativeElement,l=s.getCodeReader(),g=yield l.scanFromDeviceObservable(n,c);if(!g)throw new Error("Undefined decoding stream, aborting.");if(s._scanSubscription=g.subscribe(z=>s._onDecodeResult(z.result,z.error),z=>s._onDecodeError(z),()=>{}),s._scanSubscription.closed)return;const B=typeof l.getScannerControls().switchTorch<"u";s.torchCompatible.next(B)})()}_onDecodeError(n){this.dispatchScanError(n)}_onDecodeResult(n,s){n?this.dispatchScanSuccess(n):this.dispatchScanFailure(s),this.dispatchScanComplete(n)}_reset(){if(!this._codeReader)return;this.scanStop();try{Zs.cleanVideoSource(this.previewElemRef.nativeElement)}catch{}try{Zs.releaseAllStreams()}catch{}this._codeReader=void 0;const n=this._device;return this.device=void 0,n}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(n){var s=this;return(0,ve.A)(function*(){s.scanStop(),s._device=n||void 0,s._device||Zs.cleanVideoSource(s.previewElemRef.nativeElement),s._enabled&&n&&(yield s.scanFromDevice(n.deviceId))})()}setPermission(n){this.hasPermission=n,this.permissionResponse.next(n)}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["zxing-scanner"]],viewQuery:function(s,c){if(1&s&&L.GBs(yp,7),2&s){let l;L.mGM(l=L.lsd())&&(c.previewElemRef=l.first)}},inputs:{autofocusEnabled:"autofocusEnabled",timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",autostart:"autostart",previewFitMode:"previewFitMode",poster:"poster",device:"device",formats:"formats",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},decls:6,vars:3,consts:[["preview",""],[3,"poster"]],template:function(s,c){1&s&&(L.j41(0,"video",1,0)(2,"p"),L.EFF(3," Your browser does not support this feature, please try to upgrade it. "),L.k0s(),L.j41(4,"p"),L.EFF(5," Seu navegador n\xe3o suporta este recurso, por favor tente atualiz\xe1-lo. "),L.k0s()()),2&s&&(L.xc7("object-fit",c.previewFitMode),L.Y8G("poster",c.poster,L.B4B))},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}"],changeDetection:0})}return i})(),g_=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=L.$C({type:i});static#n=this.\u0275inj=L.G2t({imports:[Kt.MD,Ie.YN]})}return i})(),md=(()=>{class i{constructor(){this.qrDataSubject=new Fg.t(null),this.qrData$=this.qrDataSubject.asObservable()}setQRData(n){this.qrDataSubject.next(n)}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275prov=L.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ph(i,e){if(1&i){const n=L.RV6();L.nrm(0,"app-badge",8),L.j41(1,"app-button",9),L.bIt("clickEvent",function(){L.eBV(n);const c=L.XpG(2);return L.Njj(c.cancel())}),L.k0s()}2&i&&(L.R7$(),L.Y8G("severity","neutral")("variant","link")("icon","xmark")("direction","none")("type","button")("path","/"))}function m1(i,e){1&i&&L.nrm(0,"app-badge",10)}function m_(i,e){if(1&i&&(L.DNE(0,m1,1,0,"app-badge",10),L.j41(1,"span",3),L.nrm(2,"div",11)(3,"div",12),L.k0s()),2&i){const n=L.XpG(2);L.vxM(n.isMobile?0:-1)}}function __(i,e){1&i&&L.nrm(0,"app-badge",14)}function _1(i,e){1&i&&L.nrm(0,"app-badge",15)}function v_(i,e){if(1&i){const n=L.RV6();L.j41(0,"span",3)(1,"zxing-scanner",13),L.mxI("deviceChange",function(c){L.eBV(n);const l=L.XpG(2);return L.DH7(l.currentDevice,c)||(l.currentDevice=c),L.Njj(c)}),L.bIt("scanSuccess",function(c){L.eBV(n);const l=L.XpG(2);return L.Njj(l.onCodeResult(c))})("permissionResponse",function(c){L.eBV(n);const l=L.XpG(2);return L.Njj(l.onHasPermission(c))})("camerasFound",function(c){L.eBV(n);const l=L.XpG(2);return L.Njj(l.onCamerasFound(c))})("torchCompatible",function(c){L.eBV(n);const l=L.XpG(2);return L.Njj(l.onTorchCompatible(c))}),L.k0s(),L.nrm(2,"div",11)(3,"div",12),L.k0s(),L.DNE(4,__,1,0,"app-badge",14)(5,_1,1,0,"app-badge",15)}if(2&i){const n=L.XpG(2);L.R7$(),L.Y8G("torch",n.torchEnabled),L.R50("device",n.currentDevice),L.Y8G("formats",n.formatsEnabled)("tryHarder",n.tryHarder),L.R7$(3),L.vxM(n.qrResultString?4:5)}}function y_(i,e){1&i&&L.nrm(0,"app-label",4),2&i&&L.Y8G("label","Enfoca")("icon","info-circle")}function Y0(i,e){if(1&i&&(L.j41(0,"section",0)(1,"div",1),L.nrm(2,"app-label",2),L.DNE(3,ph,2,6),L.k0s(),L.DNE(4,m_,4,1,"span",3)(5,v_,6,5)(6,y_,1,2,"app-label",4),L.j41(7,"footer",5),L.nrm(8,"app-button",6)(9,"app-button",7),L.k0s()()),2&i){const n=L.XpG();L.R7$(2),L.Y8G("size",n.isMobile?"md":"lg")("prefix","Autoregistro")("label","Scan QR")("subtitle",n.isMobile?"Scanea el QR para obtener su contenido y autocompletar el formulario.":""),L.R7$(),L.vxM(n.isMobile?-1:3),L.R7$(),L.vxM(n.noPermissions?4:-1),L.R7$(),L.vxM(n.noPermissions?-1:5),L.R7$(),L.vxM(n.isMobile?6:-1),L.R7$(2),L.Y8G("variant","outline")("direction","row")("icon","close")("path","/")("label","Cancelar"),L.R7$(),L.Y8G("variant","fill")("direction","row")("icon","pencil")("path","/registrar")("label","Registro manual")}}let Ep=(()=>{class i{constructor(n,s){this.router=n,this.QrService=s,this.currentDevice=null,this.formatsEnabled=[sn.CODE_128,sn.DATA_MATRIX,sn.EAN_13,sn.QR_CODE],this.noPermissions=!1,this.torchEnabled=!1,this.torchAvailable$=new Fg.t(!1),this.tryHarder=!1,this.qrRegistro=!0,this._formBuilder=(0,L.WQX)(Ie.ok).nonNullable,this.form=this._formBuilder.group({paciente:this._formBuilder.control(""),titulo:this._formBuilder.control("",Ie.k0.required),descripcion:this._formBuilder.control("",Ie.k0.required),categoria:this._formBuilder.control("",Ie.k0.required),estado:this._formBuilder.control(""),validado:this._formBuilder.control(null),lugar:this._formBuilder.control("",Ie.k0.required),validador:this._formBuilder.control(""),fecha:this._formBuilder.control(new Date,Ie.k0.required),hora:this._formBuilder.control("",Ie.k0.required),adjuntos:this._formBuilder.control([])})}onResize(n){this.checkIfMobile(n.target.innerWidth)}ngOnInit(){this.checkCameraPermissions()}checkCameraPermissions(){navigator.mediaDevices.getUserMedia({video:!0}).then(()=>{this.noPermissions=!1}).catch(()=>{this.noPermissions=!0})}onCodeResult(n){this.qrResultString=n,this.QrService.setQRData(this.qrResultString);const s=this.parseQRData(this.qrResultString);setTimeout(()=>{this.populateFormFromQR(s)},100),this.router.navigate(["/registrar"])}parseQRData(n){console.log("Raw QR String:",n);const s=n.split("\n"),c={};return s.forEach(l=>{const[g,...m]=l.split(": "),y=m.join(": ").trim();switch(console.log("Key:",g,"Value:",y),g.toLowerCase()){case"t\xedtulo":c.titulo=y;break;case"descripci\xf3n":c.descripcion=y;break;case"fecha":c.fecha=new Date(y);break;case"hora":c.hora=y;break;case"categoria":c.categoria=y;break;case"validado":c.validado="true"===y.toLowerCase();break;case"estado":c.estado=y;break;case"emisor":c.validador=y;break;case"adjuntos":c.adjuntos=y.split(",").map(b=>b.trim())}}),c}populateFormFromQR(n){if(n)try{this.form.patchValue({paciente:n.paciente,titulo:n.titulo,descripcion:n.descripcion,fecha:n.fecha,hora:n.hora,categoria:n.categoria,validado:n.validado,estado:n.estado,validador:n.validador,adjuntos:n.adjuntos||[]})}catch(s){console.error("Error during patchValue:",s)}}onHasPermission(n){this.hasPermission=n}onCamerasFound(n){this.availableDevices=n,this.hasDevices=!(!n||!n.length)}onTorchCompatible(n){this.torchAvailable$.next(n||!1)}checkIfMobile(n){this.isMobile=n<768}cancel(){this.qrRegistro=!this.qrRegistro}static#e=this.\u0275fac=function(s){return new(s||i)(L.rXU(x.Ix),L.rXU(md))};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-scan"]],hostBindings:function(s,c){1&s&&L.bIt("resize",function(g){return c.onResize(g)},!1,L.tSv)},standalone:!0,features:[L.aNF],decls:1,vars:1,consts:[[1,"panel__main--center"],[1,"form__input-wrapper--row"],["severity","neutral","direction","column",3,"size","prefix","label","subtitle"],[1,"qr__wrapper"],["size","sm","subtitle","Si el c\xf3digo no es detectado, vuelve a intentarlo.","severity","warning","variant","link","direction","column",3,"label","icon"],[1,"panel__footer"],["size","xxs","severity","danger",3,"variant","direction","icon","path","label"],["size","xxs","severity","primary",3,"variant","direction","icon","path","label"],["severity","danger","label","C\xe1mara","size","xs"],["size","xs",3,"clickEvent","severity","variant","icon","direction","type","path"],["severity","danger","label","C\xe1mara no habilitada","size","xs"],[1,"qr__overlay"],[1,"qr__line"],[3,"deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible","torch","device","formats","tryHarder"],["severity","success","label","Scaneo exitoso","size","xs"],["severity","warning","label","No se pudo leer el c\xf3digo","size","xs"]],template:function(s,c){1&s&&L.DNE(0,Y0,10,18,"section",0),2&s&&L.vxM(c.qrRegistro?0:-1)},dependencies:[Ie.X1,g_,g1,Be.U,Ct.n,kt.Q],styles:[".panel__main--center[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;flex:1;padding:var(--card__padding) var(--card__padding) 24px var(--card__padding);box-sizing:border-box;row-gap:var(--wrapper__gap--row);background-color:#fff;border:solid 1px var(--neutral);border-radius:var(--card__border--radius);--qr__border: solid 1px var(--secondary);--qr__background: white;--qr__line-color: var(--secondary);--qr__glow-color: var(--secondaryLighter);--qr__animation-duration: 2.5s;--qr__line-height: 4px}.panel__main--center[_ngcontent-%COMP%]   .qr__wrapper[_ngcontent-%COMP%]{position:relative;width:100%;max-width:220px;height:160px;max-height:220px;background-color:var(--qr__background);overflow:hidden;outline:var(--qr__border);outline-offset:8px}.panel__main--center[_ngcontent-%COMP%]   .qr__wrapper[_ngcontent-%COMP%]   .qr__line[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:var(--qr__line-height);background-color:var(--qr__line-color);animation:_ngcontent-%COMP%_qr-scan var(--qr__animation-duration) infinite ease-in-out;box-shadow:0 0 10px var(--qr__glow-color),0 0 20px var(--qr__glow-color)}.panel__main--center[_ngcontent-%COMP%]   .qr__wrapper[_ngcontent-%COMP%]   .qr__overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:0;background-color:var(--qr__line-color);mix-blend-mode:multiply;animation:_ngcontent-%COMP%_qr-overlay-grow var(--qr__animation-duration) infinite ease-in-out}@keyframes _ngcontent-%COMP%_qr-scan{0%{top:0}to{top:100%}0%{top:0}}@keyframes _ngcontent-%COMP%_qr-overlay-grow{0%{height:0}to{height:100%}0%{height:0}}"]})}return i})();var E_=ie(5699),Cp=ie(6418);function C_(i,e){1&i&&L.nrm(0,"app-badge",2)}function Lg(i,e){1&i&&L.nrm(0,"app-badge",3)}function w_(i,e){1&i&&(L.j41(0,"small",28),L.EFF(1," T\xedtulo es obligatorio "),L.k0s())}function gh(i,e){if(1&i&&(L.j41(0,"div",5),L.nrm(1,"app-required",6)(2,"textarea",29),L.k0s()),2&i){const n=L.XpG();L.R7$(),L.Y8G("label","Descripci\xf3n")("control","descripcion"),L.R7$(),L.HbH(n.qrRegister?"disabled":"")}}function Z0(i,e){if(1&i){const n=L.RV6();L.j41(0,"div",5),L.nrm(1,"app-required",6),L.j41(2,"textarea",30),L.EFF(3),L.k0s(),L.j41(4,"button",31),L.bIt("click",function(){L.eBV(n);const c=L.XpG();return L.Njj(c.clearResult())}),L.EFF(5,"\xd7"),L.k0s()()}if(2&i){const n=L.XpG();L.R7$(),L.Y8G("label","Registro obtenido del QR")("control","paciente"),L.R7$(2),L.SpI("          ",n.qrResultString,"\n        ")}}function I_(i,e){if(1&i&&(L.j41(0,"option",11),L.EFF(1),L.k0s()),2&i){const n=e.$implicit;L.Y8G("value",n),L.R7$(),L.SpI(" ",n," ")}}function v1(i,e){1&i&&(L.j41(0,"small",28),L.EFF(1," La categor\xeda es obligatoria "),L.k0s())}function lf(i,e){1&i&&L.nrm(0,"app-label",32)(1,"hr"),2&i&&L.Y8G("size","sm")}function J0(i,e){if(1&i){const n=L.RV6();L.j41(0,"figure"),L.nrm(1,"img",33),L.j41(2,"figcaption"),L.EFF(3),L.k0s(),L.j41(4,"app-button",34),L.bIt("clickEvent",function(){const c=L.eBV(n).index,l=L.XpG();return L.Njj(l.removeFile(c))}),L.k0s()()}if(2&i){const n=e.$implicit;L.R7$(),L.Y8G("src",n,L.B4B),L.R7$(2),L.JRh(n),L.R7$(),L.Y8G("severity","danger")("variant","outline")("icon","trash-can")("direction","none")("label","")("type","button")}}function y1(i,e){1&i&&L.nrm(0,"app-scan")}function df(i,e){1&i&&(L.j41(0,"small",28),L.EFF(1," Debe seleccionar una fecha "),L.k0s())}function Vg(i,e){1&i&&(L.j41(0,"small",28),L.EFF(1," Debe seleccionar un horario "),L.k0s())}function ev(i,e){1&i&&(L.j41(0,"div",5),L.nrm(1,"app-required",6)(2,"input",35),L.k0s()),2&i&&(L.R7$(),L.Y8G("label","Miembro equipo de Salud")("control","validador"))}function E1(i,e){if(1&i&&L.nrm(0,"app-button",24),2&i){const n=L.XpG();L.Y8G("severity","warning")("variant","outline")("icon","arrows-rotate")("direction",n.isMobile?"none":"row")("label",n.isMobile?"":"Reset")("type","reset")}}function Bg(i,e){if(1&i){const n=L.RV6();L.j41(0,"app-button",36),L.bIt("clickEvent",function(){L.eBV(n);const c=L.XpG();return L.Njj(c.showQrRegister())}),L.k0s()}if(2&i){const n=L.XpG();L.Y8G("type","button")("severity","primary")("variant","link")("icon","mobile-screen-button")("direction",n.isMobile?"none":"row")("label",n.isMobile?"":"Registro QR")}}let A_=(()=>{class i{checkIfMobile(n){this.isMobile=n<768}constructor(n,s,c,l,g,m,y){this.QrService=n,this.storage=s,this.firestore=c,this._activatedRoute=l,this.router=g,this.location=m,this.notificationService=y,this.isMobile=!1,this.qrResultString=null,this.subscription=new Bt.yU,this.validado=!0,this.registroId=null,this.hasChange=!1,this.uploadedImages=[],this.uploadedFileNames=[],this.showConfirmMsg=!1,this.showErrorMsg=!1,this.hide=!0,this.categorias=["Medicina General","Pediatr\xeda","Ginecolog\xeda y Obstetricia","Cardiolog\xeda","Dermatolog\xeda","Neurolog\xeda","Psiquiatr\xeda","Endocrinolog\xeda","Gastroenterolog\xeda","Traumatolog\xeda y Ortopedia","Oftalmolog\xeda","Otorrinolaringolog\xeda","Urolog\xeda","Neumolog\xeda","Oncolog\xeda","Nutrici\xf3n y Diet\xe9tica","Fisiatr\xeda y Rehabilitaci\xf3n","Odontolog\xeda"],this.categoriaMap={"Medicina General":{icon:"user-md",color:"#007bff"},Pediatr\u00eda:{icon:"baby",color:"#28a745"},"Ginecolog\xeda y Obstetricia":{icon:"venus",color:"#e83e8c"},Cardiolog\u00eda:{icon:"heart",color:"#dc3545"},Dermatolog\u00eda:{icon:"spa",color:"#fd7e14"},Neurolog\u00eda:{icon:"brain",color:"#6f42c1"},Psiquiatr\u00eda:{icon:"comments",color:"#20c997"},Endocrinolog\u00eda:{icon:"balance-scale",color:"#ffc107"},Gastroenterolog\u00eda:{icon:"stethoscope",color:"#795548"},"Traumatolog\xeda y Ortopedia":{icon:"crutch",color:"#6c757d"},Oftalmolog\u00eda:{icon:"eye",color:"#17a2b8"},Otorrinolaringolog\u00eda:{icon:"head-side-cough",color:"#6610f2"},Urolog\u00eda:{icon:"x-ray",color:"#007bff"},Neumolog\u00eda:{icon:"lungs",color:"#87ceeb"},Oncolog\u00eda:{icon:"ribbon",color:"#6f42c1"},"Nutrici\xf3n y Diet\xe9tica":{icon:"utensils",color:"#a2d729"},"Fisiatr\xeda y Rehabilitaci\xf3n":{icon:"dumbbell",color:"#fd7e14"},Odontolog\u00eda:{icon:"tooth",color:"#ffffff"}},this.editableTitle="",this.editableCategory="",this.editableIcon="heart",this.editableColor="",this.categoriaOptions=Object.keys(this.categoriaMap).map(b=>({value:b,label:b.replace(/([A-Z])/g," $1").trim()})),this._formBuilder=(0,L.WQX)(Ie.ok).nonNullable,this._router=(0,L.WQX)(x.Ix),this._registrosService=(0,L.WQX)(Oe.m),this.auth=(0,L.WQX)(pt.Nj),this.form=this._formBuilder.group({paciente:this._formBuilder.control(""),titulo:this._formBuilder.control("",Ie.k0.required),descripcion:this._formBuilder.control(""),categoria:this._formBuilder.control("",Ie.k0.required),estado:this._formBuilder.control(""),validado:this._formBuilder.control(null),lugar:this._formBuilder.control("",Ie.k0.required),validador:this._formBuilder.control(""),fecha:this._formBuilder.control(new Date,Ie.k0.required),hora:this._formBuilder.control("",Ie.k0.required),adjuntos:this._formBuilder.control([])})}triggerSuccess(){this.notificationService.addNotification("Registro creado con \xe9xito!","success")}triggerError(){this.notificationService.addNotification("Error al generar el registro","error")}ngOnInit(){this.checkIfMobile(window.innerWidth),this.registroId=this._activatedRoute.snapshot.paramMap.get("id"),this.registroId&&this.loadRegistroData(this.registroId),this.setTitle(),this.onCategoryChange(),this.subscription=this.QrService.qrData$.subscribe(m=>{this.qrResultString=m,this.setPacienteValue(m??"")});const n=new Date,s=n.toISOString().split("T")[0];this.form.controls.fecha.setValue(s);const c=n.getHours().toString().padStart(2,"0"),l=n.getMinutes().toString().padStart(2,"0");this.form.controls.hora.setValue(`${c}:${l}`)}ngOnDestroy(){this.subscription.unsubscribe(),this.form.get("adjuntos")?.value.forEach(n=>URL.revokeObjectURL(n))}onTitleChange(){return this.hasChange=!0}setTitle(){return this.form.controls.titulo.value}validateRecord(){this.validado=!this.validado,this.form.controls.validado.setValue(this.validado)}onCategoryChange(){const n=this.form.controls.categoria.value;if(n){const{icon:s,color:c}=this.categoriaMap[n];this.editableIcon=s,this.editableColor=c,this.editableCategory=n}this.hasChange=!0}clearResult(){this.qrResultString=""}getPacienteControl(){return this.form.get("paciente")}getPacienteValue(){return this.getPacienteControl()?.value}setPacienteValue(n){this.getPacienteControl()?.setValue(n)}onCodeResult(n){this.qrResultString=n,this.setPacienteValue(n)}loadRegistroData(n){var s=this;return(0,ve.A)(function*(){try{const c=yield s._registrosService.getRegistro(n);c&&s.form.patchValue({paciente:c.paciente,titulo:c.titulo,descripcion:c.descripcion,categoria:c.categoria,estado:c.estado,validado:c.validado,lugar:c.lugar,validador:c.validador,fecha:c.fecha,hora:c.hora,adjuntos:c.adjuntos||[]})}catch(c){console.error("Error loading registro:",c)}})()}createRegistro(){var n=this;return(0,ve.A)(function*(){const s=yield n.auth.currentUser;if(!n.form.invalid)try{const c=n.form.value;c.adjuntos=c.adjuntos.filter(l=>n.isValidUrl(l)),s&&(c.userId=s.uid),n.registroId?yield n._registrosService.updateRegistro(n.registroId,c):yield n._registrosService.createRegistro(c),n._router.navigate(["/"]),n.triggerSuccess()}catch{n.triggerError()}})()}isValidUrl(n){try{return new URL(n),!0}catch{return!1}}setFormValues(n){var s=this;return(0,ve.A)(function*(){try{const c=yield s._registrosService.getRegistro(n);if(!c)return;s.form.setValue({paciente:c.paciente||"",titulo:c.titulo||"",descripcion:c.descripcion||"",categoria:c.categoria||"",estado:c.estado||"",validado:c.validado??!1,lugar:c.lugar||"",validador:c.validador||"",fecha:c.fecha||new Date,hora:c.hora||"",adjuntos:c.adjuntos||[]})}catch{}})()}showQrRegister(){this.qrRegister=!this.qrRegister}goBack(){window.history.length>1?this.location.back():this.router.navigate(["/"])}cancel(){this.form&&this.form.reset(),this.router.navigate(["/"])}uploadFiles(n){var s=this;const c=n.target.files;c.length&&Array.from(c).forEach(l=>{const g=`images/${Date.now()}_${l.name}`,m=Do(this.storage,g),y=Y(m,l);var b;this.uploadedFileNames.push(l.name),y.on("state_changed",{next:b=>{},error:b=>console.error("Upload error:",b),complete:(b=(0,ve.A)(function*(){try{const P=yield Xi(m);s.uploadedImages.push(P),s.form.get("adjuntos")?.setValue([...s.uploadedImages]),n.target.value=""}catch(P){console.error("Error getting download URL:",P)}}),function(){return b.apply(this,arguments)})})})}saveImageMetadata(n,s){var c=this;return(0,ve.A)(function*(){const l=(0,H.rJ)(c.firestore,"images");yield(0,H.gS)(l,{url:n,name:s,uploadedAt:new Date})})()}removeFile(n){const s=this.form.get("adjuntos")?.value||[];s.splice(n,1),this.form.get("adjuntos")?.setValue(s)}trackByFn(n,s){return s}get adjuntosControl(){return this.form.get("adjuntos")}static#e=this.\u0275fac=function(s){return new(s||i)(L.rXU(md),L.rXU(ra),L.rXU(H._7),L.rXU(x.nX),L.rXU(x.Ix),L.rXU(Kt.aZ),L.rXU(Cp.J))};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-crear-registro"]],standalone:!0,features:[L.aNF],decls:50,vars:46,consts:[[1,"panel__main",3,"ngSubmit","formGroup"],["subtitle","Completa los campos requeridos (*)","direction","row",3,"size","label","prefix","severity"],["severity","warning","label","Campos requeridos sin completar","size","md"],["severity","success","label","Campos requeridos completos","size","md"],[1,"panel__inner--main"],[1,"form__input-wrapper--col"],[3,"label","control"],["type","text","formControlName","titulo",3,"keyup"],["class","required",4,"ngIf"],["id","categoria","formControlName","categoria",1,"form__select--custom",3,"change"],["value","","disabled","","selected",""],[3,"value"],["for","adjuntos"],["type","file","id","adjuntos","formControlName","adjuntos","multiple","",3,"change"],[1,"img__wrapper--grid"],[4,"ngFor","ngForOf"],[1,"panel__inner--aside"],["type","date","formControlName","fecha"],["type","time","formControlName","hora"],["type","text","formControlName","lugar"],["size","md","offLabel","No validado por equipo de Salud","labelPosition","right",3,"toggle","on","onLabel"],[1,"panel__footer"],[1,"panel__footer--left"],["size","xs",3,"clickEvent","severity","variant","icon","direction","label","type"],["size","xs",3,"severity","variant","icon","direction","label","type"],[1,"panel__footer--right"],["size","xs",3,"type","severity","variant","icon","direction","label"],["type","submit","size","xs",3,"severity","variant","label","direction","icon","disabled","path"],[1,"required"],["rows","5","type","text","id","descripcion","placeholder","Describa su registro de Salud","formControlName","descripcion"],["id","paciente","formControlName","paciente"],[3,"click"],["prefix","Adjuntos","label","Mis archivos","direction","row",3,"size"],["alt","Uploaded Image",3,"src"],["size","xxs",3,"clickEvent","severity","variant","icon","direction","label","type"],["type","text","formControlName","validador"],["size","xs",3,"clickEvent","type","severity","variant","icon","direction","label"]],template:function(s,c){1&s&&(L.j41(0,"form",0),L.bIt("ngSubmit",function(){return c.createRegistro()}),L.j41(1,"header"),L.nrm(2,"app-label",1),L.DNE(3,C_,1,0,"app-badge",2)(4,Lg,1,0,"app-badge",3),L.k0s(),L.j41(5,"section",4)(6,"div",5),L.nrm(7,"app-required",6),L.j41(8,"input",7),L.bIt("keyup",function(){return c.onTitleChange()}),L.k0s(),L.DNE(9,w_,2,0,"small",8),L.k0s(),L.DNE(10,gh,3,4,"div",5)(11,Z0,6,3,"div",5),L.j41(12,"div",5),L.nrm(13,"app-required",6),L.j41(14,"select",9),L.bIt("change",function(){return c.onCategoryChange()}),L.j41(15,"option",10),L.EFF(16,"Seleccionar categor\xeda"),L.k0s(),L.Z7z(17,I_,2,2,"option",11,L.fX1),L.k0s(),L.DNE(19,v1,2,0,"small",8),L.k0s(),L.j41(20,"div",5)(21,"label",12),L.EFF(22,"Adjuntar archivos"),L.k0s(),L.j41(23,"input",13),L.bIt("change",function(g){return c.uploadFiles(g)}),L.k0s()(),L.j41(24,"div"),L.DNE(25,lf,2,1),L.j41(26,"div",14),L.DNE(27,J0,5,8,"figure",15),L.k0s()()(),L.j41(28,"section",16),L.DNE(29,y1,1,0,"app-scan"),L.j41(30,"div",5),L.nrm(31,"app-required",6)(32,"input",17),L.DNE(33,df,2,0,"small",8),L.k0s(),L.j41(34,"div",5),L.nrm(35,"app-required",6)(36,"input",18),L.DNE(37,Vg,2,0,"small",8),L.k0s(),L.j41(38,"div",5),L.nrm(39,"app-required",6)(40,"input",19),L.k0s(),L.j41(41,"app-switcher",20),L.bIt("toggle",function(){return c.validateRecord()}),L.k0s(),L.DNE(42,ev,3,2,"div",5),L.k0s(),L.j41(43,"footer",21)(44,"div",22)(45,"app-button",23),L.bIt("clickEvent",function(){return c.cancel()}),L.k0s(),L.DNE(46,E1,1,6,"app-button",24),L.k0s(),L.j41(47,"div",25),L.DNE(48,Bg,1,6,"app-button",26),L.nrm(49,"app-button",27),L.k0s()()()),2&s&&(L.Y8G("formGroup",c.form),L.R7$(),L.HbH(c.isMobile?"panel__header--col":"panel__header--row"),L.R7$(),L.Y8G("size",c.isMobile?"md":"lg")("label",c.registroId?c.setTitle():"Nuevo registro de Salud")("prefix","Autoregistro")("severity","info"),L.R7$(),L.vxM(c.form.invalid?3:c.form.invalid?-1:4),L.R7$(4),L.Y8G("label","T\xedtulo")("control","titulo"),L.R7$(2),L.Y8G("ngIf",(null==c.form.controls.titulo?null:c.form.controls.titulo.invalid)&&(null==c.form.controls.titulo?null:c.form.controls.titulo.touched)),L.R7$(),L.vxM(c.qrResultString?-1:10),L.R7$(),L.vxM(c.qrResultString?11:-1),L.R7$(2),L.Y8G("label","Categor\xeda")("control","categoria"),L.R7$(4),L.Dyx(c.categorias),L.R7$(2),L.Y8G("ngIf",(null==c.form.controls.categoria?null:c.form.controls.categoria.invalid)&&(null==c.form.controls.categoria?null:c.form.controls.categoria.touched)),L.R7$(6),L.vxM(c.uploadedImages.length>0?25:-1),L.R7$(2),L.Y8G("ngForOf",c.uploadedFileNames),L.R7$(2),L.vxM(c.qrRegister?29:-1),L.R7$(2),L.Y8G("label","Fecha")("control","fecha"),L.R7$(2),L.Y8G("ngIf",(null==c.form.controls.fecha?null:c.form.controls.fecha.invalid)&&(null==c.form.controls.fecha?null:c.form.controls.fecha.touched)),L.R7$(2),L.Y8G("label","Hora")("control","hora"),L.R7$(2),L.Y8G("ngIf",(null==c.form.controls.hora?null:c.form.controls.hora.invalid)&&(null==c.form.controls.hora?null:c.form.controls.hora.touched)),L.R7$(2),L.Y8G("label","Establecimiento")("control","lugar"),L.R7$(2),L.Y8G("on",c.validado)("onLabel","Validado por equipo de Salud"),L.R7$(),L.vxM(c.validado?42:-1),L.R7$(3),L.Y8G("severity","danger")("variant","outline")("icon","xmark")("direction",c.isMobile?"none":"row")("label",c.isMobile?"":"Cancelar")("type","button"),L.R7$(),L.vxM(c.registroId?-1:46),L.R7$(2),L.vxM(c.registroId?-1:48),L.R7$(),L.Y8G("severity","success")("variant","fill")("label",c.isMobile?"":"Guardar")("direction",c.isMobile?"none":"row")("icon","floppy-disk")("disabled",c.form.invalid)("path","item/"+c.registroId))},dependencies:[Ie.X1,Ie.qT,Ie.xH,Ie.y7,Ie.me,Ie.wz,Ie.BC,Ie.cb,Ie.j4,Ie.JD,Be.U,Ct.n,kt.Q,Jn,Ep,E_.d,Kt.MD,Kt.Sq,Kt.bT]})}return i})();var b_=ie(4908),C1=ie(5023),w1=ie(7587);function wp(i,e){if(1&i){const n=L.RV6();L.j41(0,"figure",24),L.bIt("click",function(){const c=L.eBV(n).$implicit,l=L.XpG(3);return L.Njj(l.openModal(c))}),L.nrm(1,"img",25),L.j41(2,"figcaption"),L.EFF(3),L.k0s()()}if(2&i){const n=e.$implicit;L.R7$(),L.Y8G("src",n,L.B4B),L.R7$(2),L.JRh(n)}}function tv(i,e){if(1&i){const n=L.RV6();L.j41(0,"app-modal",26),L.bIt("closeModal",function(){L.eBV(n);const c=L.XpG(3);return L.Njj(c.isModalOpen=!1)}),L.j41(1,"app-button",27),L.bIt("click",function(){L.eBV(n);const c=L.XpG(3);return L.Njj(c.isModalOpen=!1)}),L.k0s(),L.nrm(2,"app-button",28),L.k0s()}if(2&i){const n=L.XpG(3);L.Y8G("prefix","Previsualizar")("title",n.selectedFile)("subtitle","Modal Subtitle")("img",n.selectedFile)("closeable",!0)}}function I1(i,e){if(1&i&&(L.nrm(0,"app-label",20)(1,"hr"),L.j41(2,"section",21),L.DNE(3,wp,4,2,"figure",22),L.k0s(),L.DNE(4,tv,3,5,"app-modal",23)),2&i){const n=L.XpG(2);L.Y8G("size",n.isMobile?"sm":"md"),L.R7$(3),L.Y8G("ngForOf",n.registro.adjuntos)("ngForTrackBy",n.trackByFn),L.R7$(),L.vxM(n.isModalOpen?4:-1)}}function A1(i,e){1&i&&L.nrm(0,"hr")}function nv(i,e){if(1&i&&L.nrm(0,"img",10),2&i){const n=L.XpG(2);L.Y8G("src",n.qrCodeUrl,L.B4B)}}function b1(i,e){if(1&i&&L.nrm(0,"app-label",12),2&i){const n=L.XpG(2);L.Y8G("label",n.registro.lugar)("prefix","Establecimiento de Salud")("direction","row")}}function rv(i,e){if(1&i&&L.nrm(0,"app-label",12),2&i){const n=L.XpG(2);L.Y8G("label",n.registro.validador)("prefix","Miembro equipo de Salud")("direction","row")}}function T1(i,e){if(1&i){const n=L.RV6();L.j41(0,"app-modal",29),L.bIt("closeModal",function(){L.eBV(n);const c=L.XpG(2);return L.Njj(c.modalDelete=!1)}),L.j41(1,"app-button",27),L.bIt("click",function(){L.eBV(n);const c=L.XpG(2);return L.Njj(c.modalDelete=!1)}),L.k0s(),L.j41(2,"app-button",30),L.bIt("click",function(){L.eBV(n);const c=L.XpG(2);return L.Njj(c.onConfirm())}),L.k0s()()}if(2&i){const n=L.XpG(2);L.Y8G("prefix",n.registro.categoria)("title","\xbfDesea eliminar el registro"+n.registro.titulo+"?")("subtitle","Esta acci\xf3n es irreversible")("closeable",!0)}}function x1(i,e){if(1&i){const n=L.RV6();L.j41(0,"section",0)(1,"header",1)(2,"app-label",2),L.nrm(3,"app-badge",3)(4,"app-dropdown",4),L.k0s()(),L.j41(5,"div",5)(6,"article",6),L.EFF(7),L.k0s(),L.DNE(8,I1,5,4),L.k0s(),L.DNE(9,A1,1,0,"hr"),L.j41(10,"div",7)(11,"article",8)(12,"figure",9),L.DNE(13,nv,1,1,"img",10),L.nrm(14,"app-label",11),L.k0s(),L.nrm(15,"app-label",12),L.DNE(16,b1,1,3,"app-label",12),L.nrm(17,"app-switcher",13),L.DNE(18,rv,1,3,"app-label",12),L.k0s()(),L.j41(19,"footer",14)(20,"div",15)(21,"app-button",16),L.bIt("clickEvent",function(){L.eBV(n);const c=L.XpG();return L.Njj(c.goBack())}),L.k0s()(),L.j41(22,"div",17),L.nrm(23,"app-button",18),L.k0s()(),L.DNE(24,T1,3,4,"app-modal",19),L.k0s()}if(2&i){const n=L.XpG();L.R7$(2),L.Y8G("size",n.isMobile?"md":"lg")("label",n.registro.titulo)("prefix",n.registro.categoria)("icon",n.getIconForCategoria(n.registro.categoria))("severity","custom")("color",n.getColorForCategoria(n.registro.categoria)),L.R7$(),L.FS9("label",n.registro.validado?"validado":"auto-registro"),L.Y8G("severity",n.registro.validado?"success":"info"),L.R7$(),L.Y8G("items",n.getMenuItems(n.registro))("position",n.dropdownPosition),L.R7$(3),L.Lme(" ",n.registro.descripcion," ",n.registro.paciente," "),L.R7$(),L.vxM(n.registro.adjuntos.length>0?8:-1),L.R7$(),L.vxM(n.isMobile?9:-1),L.R7$(4),L.vxM(n.qrCodeUrl?13:-1),L.R7$(),L.Y8G("size","sm")("prefix","Para escanear el c\xf3digo, accede a tu cuenta experienciaPaciente.org.")("direction","row")("severity","neutral")("icon",n.isMobile?"":"info-circle"),L.R7$(),L.Y8G("label",n.registro.fecha)("prefix","Fecha del registro")("direction","row"),L.R7$(),L.vxM(n.registro.lugar?16:-1),L.R7$(),L.Y8G("on",n.registro.validado)("disabled",!0),L.R7$(),L.vxM(n.registro.validador?18:-1),L.R7$(3),L.Y8G("severity","primary")("variant","link")("icon","arrow-left")("direction","row")("label","volver")("disabled",!1),L.R7$(2),L.Y8G("severity","warning")("variant","fill")("icon","pencil")("direction","row")("label","Editar")("path","actualizar/"+n.id)("disabled",!1),L.R7$(),L.vxM(n.modalDelete?24:-1)}}function S1(i,e){1&i&&(L.j41(0,"p"),L.EFF(1,"Sin registros!"),L.k0s())}let D1=(()=>{class i{getMenuItems(n){return[{label:"Editar",icon:"user",disabled:!1,callback:()=>this.navigateToEdit(n)},{label:"Gestionar permisos",icon:"star",disabled:!0},{label:"Eliminar",icon:"trash",disabled:!1,callback:s=>{this.openDeleteModal(s)}}]}constructor(n,s,c,l,g){this.route=n,this.registroService=s,this.router=c,this.location=l,this.notificationService=g,this.disabled=!1,this.isModalOpen=!1,this.modalDelete=!1,this.selectedItemId=null,this.categoriaMap={"Medicina General":{icon:"user-md",color:"#007bff"},Pediatr\u00eda:{icon:"baby",color:"#28a745"},"Ginecolog\xeda y Obstetricia":{icon:"venus",color:"#e83e8c"},Cardiolog\u00eda:{icon:"heart",color:"#dc3545"},Dermatolog\u00eda:{icon:"spa",color:"#fd7e14"},Neurolog\u00eda:{icon:"brain",color:"#6f42c1"},Psiquiatr\u00eda:{icon:"comments",color:"#20c997"},Endocrinolog\u00eda:{icon:"balance-scale",color:"#ffc107"},Gastroenterolog\u00eda:{icon:"stethoscope",color:"#795548"},"Traumatolog\xeda y Ortopedia":{icon:"crutch",color:"#6c757d"},Oftalmolog\u00eda:{icon:"eye",color:"#17a2b8"},Otorrinolaringolog\u00eda:{icon:"head-side-cough",color:"#6610f2"},Urolog\u00eda:{icon:"x-ray",color:"#007bff"},Neumolog\u00eda:{icon:"lungs",color:"#87ceeb"},Oncolog\u00eda:{icon:"ribbon",color:"#6f42c1"},"Nutrici\xf3n y Diet\xe9tica":{icon:"utensils",color:"#a2d729"},"Fisiatr\xeda y Rehabilitaci\xf3n":{icon:"dumbbell",color:"#fd7e14"},Odontolog\u00eda:{icon:"tooth",color:"#5fc8db"}},this.dropdownPosition={top:"35px",left:"-190px"}}triggerSuccess(){this.notificationService.addNotification("Registro eliminado con \xe9xito!","danger")}triggerError(){this.notificationService.addNotification("Error al generar el registro","warning")}ngOnInit(){this.route.params.subscribe(n=>{this.id=n.id,this.id?(this.fetchDetails(this.id),console.log(`ID: ${this.id}`)):console.error("ID not found in route parameters")}),this.checkIfMobile(window.innerWidth)}onResize(n){this.checkIfMobile(n.target.innerWidth)}checkIfMobile(n){this.isMobile=n<768}generateQRCode(n){if(n){const c=encodeURIComponent(`T\xedtulo: ${n.titulo}\nDescripci\xf3n: ${n.descripcion}\nFecha: ${n.fecha}\nHora: ${n.hora}\nCategoria: ${n.categoria}\nValidado: ${n.validado}\nEstado: ${n.estado}\nEmisor: ${n.validador}\nAdjuntos: ${n.adjuntos}`);this.qrCodeUrl=`https://quickchart.io/qr?text=${c}`}}fetchDetails(n){var s=this;return(0,ve.A)(function*(){if(n)try{yield s.loadRegistro(n),s.registro&&s.generateQRCode(s.registro)}catch(c){console.error("Error loading registro:",c),s.registro=null}else s.registro=null})()}loadRegistro(n){var s=this;return(0,ve.A)(function*(){try{const c=yield s.registroService.getRegistro(n);s.registro=c||null,s.generateQRCode(c)}catch(c){s.registro=null,console.error("Error fetching registro:",c)}})()}getIconForCategoria(n){return this.categoriaMap[n]?.icon||"question-circle"}getColorForCategoria(n){return this.categoriaMap[n]?.color||"gray"}trackByFn(n){return n.id}goBack(){window.history.length>1?this.location.back():this.router.navigate(["/"])}navigateToEdit(n){this.router.navigate([`/actualizar/${n.id}`])}navigateToDelete(n){var s=this;return(0,ve.A)(function*(){try{yield s.registroService.deleteRegistro(n.id),s.router.navigate(["/"])}catch(c){console.error("Error deleting registro",c)}})()}openDeleteModal(n){n?.stopPropagation(),this.modalDelete=!0}openModal(n){this.selectedFile=n,this.isModalOpen=!this.isModalOpen}onConfirm(){var n=this;return(0,ve.A)(function*(){const s=n.id;if(s)try{n.modalDelete=!1,yield n.registroService.deleteRegistro(s),n.router.navigate(["/"]),n.triggerSuccess()}catch{n.triggerError()}})()}static#e=this.\u0275fac=function(s){return new(s||i)(L.rXU(x.nX),L.rXU(Oe.m),L.rXU(x.Ix),L.rXU(Kt.aZ),L.rXU(Cp.J))};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-detail"]],hostBindings:function(s,c){1&s&&L.bIt("resize",function(g){return c.onResize(g)},!1,L.tSv)},standalone:!0,features:[L.aNF],decls:2,vars:1,consts:[[1,"panel__main"],[1,"panel__header--row"],["direction","row",3,"size","label","prefix","icon","severity","color"],["size","xs",3,"severity","label"],["buttonLabel","","buttonIcon","ellipsis-vertical",3,"items","position"],[1,"panel__inner--main"],[1,"panel__text--article"],[1,"panel__inner--aside"],[1,"panel__inner--left"],[1,"panel__qr--wrapper"],["alt","QR Code","alt","",1,"panel__qr--aside",3,"src"],[3,"size","prefix","direction","severity","icon"],["size","md",3,"label","prefix","direction"],["size","lg","onLabel","Validado","offLabel","No validado","colorOn","green","colorOff","red","labelPosition","right",3,"on","disabled"],[1,"panel__footer"],[1,"panel__footer--left"],["size","xs",3,"clickEvent","severity","variant","icon","direction","label","disabled"],[1,"panel__footer--right"],["size","xs",3,"severity","variant","icon","direction","label","path","disabled"],["icon","info-alert",3,"prefix","title","subtitle","closeable"],["prefix","Adjuntos","label","Mis archivos","direction","row",3,"size"],["role","navigation",1,"img__wrapper--grid"],[3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["icon","info-circle",3,"prefix","title","subtitle","img","closeable"],[3,"click"],["alt","Uploaded Image",3,"src"],["icon","info-circle",3,"closeModal","prefix","title","subtitle","img","closeable"],["direction","none","size","sm","label","Eliminar","variant","outline","severity","danger",3,"click"],["direction","none","size","sm","label","Editar","variant","fill","severity","success"],["icon","info-alert",3,"closeModal","prefix","title","subtitle","closeable"],["direction","none","size","sm","label","Editar","variant","fill","severity","success",3,"click"]],template:function(s,c){1&s&&L.DNE(0,x1,25,41,"section",0)(1,S1,2,0,"p"),2&s&&L.vxM(null!=c.registro?0:1)},dependencies:[Ct.n,kt.Q,Be.U,Jn,C1.P,w1.z,Kt.MD,Kt.Sq]})}return i})();var T_=ie(903),_E=ie(6553);const R1=[{path:"",canActivate:[()=>{const i=Ee();return Xe().pipe((0,Ze.T)(e=>!!e||(i.navigateByUrl("ingresar"),!1)))}],loadComponent:()=>ie.e(556).then(ie.bind(ie,6556)),children:[{path:"item/:id",component:D1},{path:"registrar",component:A_},{path:"scan",component:Ep},{path:"registros",component:b_.s},{path:"actualizar/:id",component:A_}]},{path:"portal-paciente/registrarse",component:T_.default},{path:"portal-paciente/ingresar",component:_E.default},{path:"auth",canActivate:[()=>{const i=Ee();return Xe().pipe((0,Ze.T)(e=>!e||(i.navigateByUrl("/"),!1)))}],children:[{path:"sign-in",loadComponent:()=>Promise.resolve().then(ie.bind(ie,6553)).then(i=>i.default)},{path:"sign-up",loadComponent:()=>Promise.resolve().then(ie.bind(ie,903)).then(i=>i.default)}]},{path:"**",loadComponent:()=>Promise.resolve().then(ie.bind(ie,6553)).then(i=>i.default)}],vE_firebaseConfig={apiKey:"AIzaSyBpsJfN6s6cNBJhbOeI-uZMu_-3gM7Z8zc",authDomain:"experienciapaciente-2024.firebaseapp.com",databaseURL:"https://experienciapaciente-2024-default-rtdb.firebaseio.com",projectId:"experienciapaciente-2024",storageBucket:"experienciapaciente-2024.appspot.com",messagingSenderId:"893869065647",appId:"1:893869065647:web:346d367ab8f1e3556f9b5a"},yE=[(0,It.MW)(()=>(0,It.Wp)(vE_firebaseConfig)),(0,H.hV)(()=>(0,H.aU)()),(0,pt._q)(()=>(0,pt.xI)()),function Tr(i,...e){return(0,_t.KO)("angularfire",Dt.xv.full,"gcs"),(0,L.EmA)([Gr,xd,{provide:so,useFactory:_a(i),multi:!0,deps:[L.SKi,L.zZn,Dt.u0,It.gL,[new L.Xx1,pt.DF],[new L.Xx1,Dt.Jv],...e]}])}(()=>Go())],EE={providers:[(0,x.lh)(R1,(0,x.qQ)(),(0,x.lG)()),yE,g_]};var CE=ie(7533);function wE(i,e){if(1&i&&(L.j41(0,"app-card",1),L.nrm(1,"app-label",2),L.k0s()),2&i){const n=e.$implicit,s=L.XpG();L.Y8G("variant","fab")("severity","danger"===n.severity?"danger":"success")("closable",s.hide)("selectable",s.showErrorMsg),L.R7$(),L.FS9("label",n.message),L.FS9("severity",n.severity),L.Y8G("subtitle",s.showErrorMsg?"Vuelva a intentar luego":"Ser\xe1 redirigido a sus registros")("icon","danger"===n.severity?"circle-exclamation":"circle-check")}}let M1=(()=>{class i{constructor(n){this.notificationService=n,this.showConfirmMsg=!1,this.showErrorMsg=!1,this.hide=!0,this.notifications=[],this.notificationService.notifications$.subscribe(s=>{this.notifications=s})}dismissNotification(n){this.notificationService.removeNotification(n)}static#e=this.\u0275fac=function(s){return new(s||i)(L.rXU(Cp.J))};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-message"]],standalone:!0,features:[L.aNF],decls:1,vars:1,consts:[["size","lg","direction","row","bottom","20px","left","50vw",3,"variant","severity","closable","selectable",4,"ngFor","ngForOf"],["size","lg","direction","row","bottom","20px","left","50vw",3,"variant","severity","closable","selectable"],["size","xxs","variant","outline","direction","row",3,"label","subtitle","icon","severity"]],template:function(s,c){1&s&&L.DNE(0,wE,2,8,"app-card",0),2&s&&L.Y8G("ngForOf",c.notifications)},dependencies:[CE.i,Be.U,Kt.MD,Kt.Sq]})}return i})();(0,D.B8)((()=>{class i{constructor(n){this.route=n,this.router=(0,L.WQX)(x.Ix)}ngOnInit(){this.route.queryParams.subscribe(n=>{const s=n.destino;"registrarse"===s?this.router.navigate(["/portal-paciente/registrarse"]):"ingresar"===s&&this.router.navigate(["/portal-paciente/ingresar"])})}static#e=this.\u0275fac=function(s){return new(s||i)(L.rXU(x.nX))};static#t=this.\u0275cmp=L.VBU({type:i,selectors:[["app-root"]],standalone:!0,features:[L.aNF],decls:2,vars:0,template:function(s,c){1&s&&L.nrm(0,"router-outlet")(1,"app-message")},dependencies:[x.n3,M1]})}return i})(),EE).catch(i=>console.error(i))},4412:(yn,wt,ie)=>{ie.d(wt,{t:()=>x});var D=ie(1413);class x extends D.B{constructor(Ue){super(),this._value=Ue}get value(){return this.getValue()}_subscribe(Ue){const Ze=super._subscribe(Ue);return!Ze.closed&&Ue.next(this._value),Ze}getValue(){const{hasError:Ue,thrownError:Ze,_value:Ee}=this;if(Ue)throw Ze;return this._throwIfClosed(),Ee}next(Ue){super.next(this._value=Ue)}}},1985:(yn,wt,ie)=>{ie.d(wt,{c:()=>Et});var D=ie(7707),x=ie(8359),L=ie(3494),Ue=ie(1203),Ze=ie(1026),Ee=ie(8071),Xe=ie(9786);let Et=(()=>{class Oe{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const Ct=new Oe;return Ct.source=this,Ct.operator=Be,Ct}subscribe(Be,Ct,kt){const Bt=function Ie(Oe){return Oe&&Oe instanceof D.vU||function ve(Oe){return Oe&&(0,Ee.T)(Oe.next)&&(0,Ee.T)(Oe.error)&&(0,Ee.T)(Oe.complete)}(Oe)&&(0,x.Uv)(Oe)}(Be)?Be:new D.Ms(Be,Ct,kt);return(0,Xe.Y)(()=>{const{operator:Kt,source:An}=this;Bt.add(Kt?Kt.call(Bt,An):An?this._subscribe(Bt):this._trySubscribe(Bt))}),Bt}_trySubscribe(Be){try{return this._subscribe(Be)}catch(Ct){Be.error(Ct)}}forEach(Be,Ct){return new(Ct=it(Ct))((kt,Bt)=>{const Kt=new D.Ms({next:An=>{try{Be(An)}catch(Jn){Bt(Jn),Kt.unsubscribe()}},error:Bt,complete:kt});this.subscribe(Kt)})}_subscribe(Be){var Ct;return null===(Ct=this.source)||void 0===Ct?void 0:Ct.subscribe(Be)}[L.s](){return this}pipe(...Be){return(0,Ue.m)(Be)(this)}toPromise(Be){return new(Be=it(Be))((Ct,kt)=>{let Bt;this.subscribe(Kt=>Bt=Kt,Kt=>kt(Kt),()=>Ct(Bt))})}}return Oe.create=pt=>new Oe(pt),Oe})();function it(Oe){var pt;return null!==(pt=Oe??Ze.$.Promise)&&void 0!==pt?pt:Promise}},1413:(yn,wt,ie)=>{ie.d(wt,{B:()=>Xe});var D=ie(1985),x=ie(8359);const Ue=(0,ie(1853).L)(it=>function(){it(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ze=ie(7908),Ee=ie(9786);let Xe=(()=>{class it extends D.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ie){const Oe=new Et(this,this);return Oe.operator=Ie,Oe}_throwIfClosed(){if(this.closed)throw new Ue}next(Ie){(0,Ee.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Oe of this.currentObservers)Oe.next(Ie)}})}error(Ie){(0,Ee.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ie;const{observers:Oe}=this;for(;Oe.length;)Oe.shift().error(Ie)}})}complete(){(0,Ee.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ie}=this;for(;Ie.length;)Ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ie;return(null===(Ie=this.observers)||void 0===Ie?void 0:Ie.length)>0}_trySubscribe(Ie){return this._throwIfClosed(),super._trySubscribe(Ie)}_subscribe(Ie){return this._throwIfClosed(),this._checkFinalizedStatuses(Ie),this._innerSubscribe(Ie)}_innerSubscribe(Ie){const{hasError:Oe,isStopped:pt,observers:Be}=this;return Oe||pt?x.Kn:(this.currentObservers=null,Be.push(Ie),new x.yU(()=>{this.currentObservers=null,(0,Ze.o)(Be,Ie)}))}_checkFinalizedStatuses(Ie){const{hasError:Oe,thrownError:pt,isStopped:Be}=this;Oe?Ie.error(pt):Be&&Ie.complete()}asObservable(){const Ie=new D.c;return Ie.source=this,Ie}}return it.create=(ve,Ie)=>new Et(ve,Ie),it})();class Et extends Xe{constructor(ve,Ie){super(),this.destination=ve,this.source=Ie}next(ve){var Ie,Oe;null===(Oe=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.next)||void 0===Oe||Oe.call(Ie,ve)}error(ve){var Ie,Oe;null===(Oe=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.error)||void 0===Oe||Oe.call(Ie,ve)}complete(){var ve,Ie;null===(Ie=null===(ve=this.destination)||void 0===ve?void 0:ve.complete)||void 0===Ie||Ie.call(ve)}_subscribe(ve){var Ie,Oe;return null!==(Oe=null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(ve))&&void 0!==Oe?Oe:x.Kn}}},7707:(yn,wt,ie)=>{ie.d(wt,{Ms:()=>kt,vU:()=>Oe});var D=ie(8071),x=ie(8359),L=ie(1026),Ue=ie(5334),Ze=ie(5343);const Ee=it("C",void 0,void 0);function it(Dt,It,_t){return{kind:Dt,value:It,error:_t}}var ve=ie(9270),Ie=ie(9786);class Oe extends x.yU{constructor(It){super(),this.isStopped=!1,It?(this.destination=It,(0,x.Uv)(It)&&It.add(this)):this.destination=Jn}static create(It,_t,Lt){return new kt(It,_t,Lt)}next(It){this.isStopped?An(function Et(Dt){return it("N",Dt,void 0)}(It),this):this._next(It)}error(It){this.isStopped?An(function Xe(Dt){return it("E",void 0,Dt)}(It),this):(this.isStopped=!0,this._error(It))}complete(){this.isStopped?An(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(It){this.destination.next(It)}_error(It){try{this.destination.error(It)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const pt=Function.prototype.bind;function Be(Dt,It){return pt.call(Dt,It)}class Ct{constructor(It){this.partialObserver=It}next(It){const{partialObserver:_t}=this;if(_t.next)try{_t.next(It)}catch(Lt){Bt(Lt)}}error(It){const{partialObserver:_t}=this;if(_t.error)try{_t.error(It)}catch(Lt){Bt(Lt)}else Bt(It)}complete(){const{partialObserver:It}=this;if(It.complete)try{It.complete()}catch(_t){Bt(_t)}}}class kt extends Oe{constructor(It,_t,Lt){let At;if(super(),(0,D.T)(It)||!It)At={next:It??void 0,error:_t??void 0,complete:Lt??void 0};else{let Ht;this&&L.$.useDeprecatedNextContext?(Ht=Object.create(It),Ht.unsubscribe=()=>this.unsubscribe(),At={next:It.next&&Be(It.next,Ht),error:It.error&&Be(It.error,Ht),complete:It.complete&&Be(It.complete,Ht)}):At=It}this.destination=new Ct(At)}}function Bt(Dt){L.$.useDeprecatedSynchronousErrorHandling?(0,Ie.l)(Dt):(0,Ue.m)(Dt)}function An(Dt,It){const{onStoppedNotification:_t}=L.$;_t&&ve.f.setTimeout(()=>_t(Dt,It))}const Jn={closed:!0,next:Ze.l,error:function Kt(Dt){throw Dt},complete:Ze.l}},8359:(yn,wt,ie)=>{ie.d(wt,{Kn:()=>Ee,yU:()=>Ze,Uv:()=>Xe});var D=ie(8071);const L=(0,ie(1853).L)(it=>function(Ie){it(this),this.message=Ie?`${Ie.length} errors occurred during unsubscription:\n${Ie.map((Oe,pt)=>`${pt+1}) ${Oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ie});var Ue=ie(7908);class Ze{constructor(ve){this.initialTeardown=ve,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ve;if(!this.closed){this.closed=!0;const{_parentage:Ie}=this;if(Ie)if(this._parentage=null,Array.isArray(Ie))for(const Be of Ie)Be.remove(this);else Ie.remove(this);const{initialTeardown:Oe}=this;if((0,D.T)(Oe))try{Oe()}catch(Be){ve=Be instanceof L?Be.errors:[Be]}const{_finalizers:pt}=this;if(pt){this._finalizers=null;for(const Be of pt)try{Et(Be)}catch(Ct){ve=ve??[],Ct instanceof L?ve=[...ve,...Ct.errors]:ve.push(Ct)}}if(ve)throw new L(ve)}}add(ve){var Ie;if(ve&&ve!==this)if(this.closed)Et(ve);else{if(ve instanceof Ze){if(ve.closed||ve._hasParent(this))return;ve._addParent(this)}(this._finalizers=null!==(Ie=this._finalizers)&&void 0!==Ie?Ie:[]).push(ve)}}_hasParent(ve){const{_parentage:Ie}=this;return Ie===ve||Array.isArray(Ie)&&Ie.includes(ve)}_addParent(ve){const{_parentage:Ie}=this;this._parentage=Array.isArray(Ie)?(Ie.push(ve),Ie):Ie?[Ie,ve]:ve}_removeParent(ve){const{_parentage:Ie}=this;Ie===ve?this._parentage=null:Array.isArray(Ie)&&(0,Ue.o)(Ie,ve)}remove(ve){const{_finalizers:Ie}=this;Ie&&(0,Ue.o)(Ie,ve),ve instanceof Ze&&ve._removeParent(this)}}Ze.EMPTY=(()=>{const it=new Ze;return it.closed=!0,it})();const Ee=Ze.EMPTY;function Xe(it){return it instanceof Ze||it&&"closed"in it&&(0,D.T)(it.remove)&&(0,D.T)(it.add)&&(0,D.T)(it.unsubscribe)}function Et(it){(0,D.T)(it)?it():it.unsubscribe()}},1026:(yn,wt,ie)=>{ie.d(wt,{$:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4572:(yn,wt,ie)=>{ie.d(wt,{z:()=>ve});var D=ie(1985),x=ie(3073),L=ie(8455),Ue=ie(3669),Ze=ie(6450),Ee=ie(3794),Xe=ie(8496),Et=ie(4360),it=ie(5225);function ve(...pt){const Be=(0,Ee.lI)(pt),Ct=(0,Ee.ms)(pt),{args:kt,keys:Bt}=(0,x.D)(pt);if(0===kt.length)return(0,L.H)([],Be);const Kt=new D.c(function Ie(pt,Be,Ct=Ue.D){return kt=>{Oe(Be,()=>{const{length:Bt}=pt,Kt=new Array(Bt);let An=Bt,Jn=Bt;for(let Dt=0;Dt<Bt;Dt++)Oe(Be,()=>{const It=(0,L.H)(pt[Dt],Be);let _t=!1;It.subscribe((0,Et._)(kt,Lt=>{Kt[Dt]=Lt,_t||(_t=!0,Jn--),Jn||kt.next(Ct(Kt.slice()))},()=>{--An||kt.complete()}))},kt)},kt)}}(kt,Be,Bt?An=>(0,Xe.e)(Bt,An):Ue.D));return Ct?Kt.pipe((0,Ze.I)(Ct)):Kt}function Oe(pt,Be,Ct){pt?(0,it.N)(Ct,pt,Be):Be()}},8793:(yn,wt,ie)=>{ie.d(wt,{x:()=>Ze});var D=ie(6365),L=ie(3794),Ue=ie(8455);function Ze(...Ee){return function x(){return(0,D.U)(1)}()((0,Ue.H)(Ee,(0,L.lI)(Ee)))}},8455:(yn,wt,ie)=>{ie.d(wt,{H:()=>It});var D=ie(8750),x=ie(941),L=ie(6745),Ee=ie(1985),Et=ie(4761),it=ie(8071),ve=ie(5225);function Oe(_t,Lt){if(!_t)throw new Error("Iterable cannot be null");return new Ee.c(At=>{(0,ve.N)(At,Lt,()=>{const Ht=_t[Symbol.asyncIterator]();(0,ve.N)(At,Lt,()=>{Ht.next().then(ke=>{ke.done?At.complete():At.next(ke.value)})},0,!0)})})}var pt=ie(5055),Be=ie(9858),Ct=ie(7441),kt=ie(5397),Bt=ie(7953),Kt=ie(591),An=ie(5196);function It(_t,Lt){return Lt?function Dt(_t,Lt){if(null!=_t){if((0,pt.l)(_t))return function Ue(_t,Lt){return(0,D.Tg)(_t).pipe((0,L._)(Lt),(0,x.Q)(Lt))}(_t,Lt);if((0,Ct.X)(_t))return function Xe(_t,Lt){return new Ee.c(At=>{let Ht=0;return Lt.schedule(function(){Ht===_t.length?At.complete():(At.next(_t[Ht++]),At.closed||this.schedule())})})}(_t,Lt);if((0,Be.y)(_t))return function Ze(_t,Lt){return(0,D.Tg)(_t).pipe((0,L._)(Lt),(0,x.Q)(Lt))}(_t,Lt);if((0,Bt.T)(_t))return Oe(_t,Lt);if((0,kt.x)(_t))return function Ie(_t,Lt){return new Ee.c(At=>{let Ht;return(0,ve.N)(At,Lt,()=>{Ht=_t[Et.l](),(0,ve.N)(At,Lt,()=>{let ke,bn;try{({value:ke,done:bn}=Ht.next())}catch(_n){return void At.error(_n)}bn?At.complete():At.next(ke)},0,!0)}),()=>(0,it.T)(Ht?.return)&&Ht.return()})}(_t,Lt);if((0,An.U)(_t))return function Jn(_t,Lt){return Oe((0,An.C)(_t),Lt)}(_t,Lt)}throw(0,Kt.L)(_t)}(_t,Lt):(0,D.Tg)(_t)}},8750:(yn,wt,ie)=>{ie.d(wt,{Tg:()=>pt});var D=ie(1635),x=ie(7441),L=ie(9858),Ue=ie(1985),Ze=ie(5055),Ee=ie(7953),Xe=ie(591),Et=ie(5397),it=ie(5196),ve=ie(8071),Ie=ie(5334),Oe=ie(3494);function pt(Dt){if(Dt instanceof Ue.c)return Dt;if(null!=Dt){if((0,Ze.l)(Dt))return function Be(Dt){return new Ue.c(It=>{const _t=Dt[Oe.s]();if((0,ve.T)(_t.subscribe))return _t.subscribe(It);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Dt);if((0,x.X)(Dt))return function Ct(Dt){return new Ue.c(It=>{for(let _t=0;_t<Dt.length&&!It.closed;_t++)It.next(Dt[_t]);It.complete()})}(Dt);if((0,L.y)(Dt))return function kt(Dt){return new Ue.c(It=>{Dt.then(_t=>{It.closed||(It.next(_t),It.complete())},_t=>It.error(_t)).then(null,Ie.m)})}(Dt);if((0,Ee.T)(Dt))return Kt(Dt);if((0,Et.x)(Dt))return function Bt(Dt){return new Ue.c(It=>{for(const _t of Dt)if(It.next(_t),It.closed)return;It.complete()})}(Dt);if((0,it.U)(Dt))return function An(Dt){return Kt((0,it.C)(Dt))}(Dt)}throw(0,Xe.L)(Dt)}function Kt(Dt){return new Ue.c(It=>{(function Jn(Dt,It){var _t,Lt,At,Ht;return(0,D.sH)(this,void 0,void 0,function*(){try{for(_t=(0,D.xN)(Dt);!(Lt=yield _t.next()).done;)if(It.next(Lt.value),It.closed)return}catch(ke){At={error:ke}}finally{try{Lt&&!Lt.done&&(Ht=_t.return)&&(yield Ht.call(_t))}finally{if(At)throw At.error}}It.complete()})})(Dt,It).catch(_t=>It.error(_t))})}},7673:(yn,wt,ie)=>{ie.d(wt,{of:()=>L});var D=ie(3794),x=ie(8455);function L(...Ue){const Ze=(0,D.lI)(Ue);return(0,x.H)(Ue,Ze)}},4360:(yn,wt,ie)=>{ie.d(wt,{_:()=>x});var D=ie(7707);function x(Ue,Ze,Ee,Xe,Et){return new L(Ue,Ze,Ee,Xe,Et)}class L extends D.vU{constructor(Ze,Ee,Xe,Et,it,ve){super(Ze),this.onFinalize=it,this.shouldUnsubscribe=ve,this._next=Ee?function(Ie){try{Ee(Ie)}catch(Oe){Ze.error(Oe)}}:super._next,this._error=Et?function(Ie){try{Et(Ie)}catch(Oe){Ze.error(Oe)}finally{this.unsubscribe()}}:super._error,this._complete=Xe?function(){try{Xe()}catch(Ie){Ze.error(Ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ze;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(Ze=this.onFinalize)||void 0===Ze||Ze.call(this))}}}},6354:(yn,wt,ie)=>{ie.d(wt,{T:()=>L});var D=ie(9974),x=ie(4360);function L(Ue,Ze){return(0,D.N)((Ee,Xe)=>{let Et=0;Ee.subscribe((0,x._)(Xe,it=>{Xe.next(Ue.call(Ze,it,Et++))}))})}},6365:(yn,wt,ie)=>{ie.d(wt,{U:()=>L});var D=ie(1397),x=ie(3669);function L(Ue=1/0){return(0,D.Z)(x.D,Ue)}},1397:(yn,wt,ie)=>{ie.d(wt,{Z:()=>Et});var D=ie(6354),x=ie(8750),L=ie(9974),Ue=ie(5225),Ze=ie(4360),Xe=ie(8071);function Et(it,ve,Ie=1/0){return(0,Xe.T)(ve)?Et((Oe,pt)=>(0,D.T)((Be,Ct)=>ve(Oe,Be,pt,Ct))((0,x.Tg)(it(Oe,pt))),Ie):("number"==typeof ve&&(Ie=ve),(0,L.N)((Oe,pt)=>function Ee(it,ve,Ie,Oe,pt,Be,Ct,kt){const Bt=[];let Kt=0,An=0,Jn=!1;const Dt=()=>{Jn&&!Bt.length&&!Kt&&ve.complete()},It=Lt=>Kt<Oe?_t(Lt):Bt.push(Lt),_t=Lt=>{Be&&ve.next(Lt),Kt++;let At=!1;(0,x.Tg)(Ie(Lt,An++)).subscribe((0,Ze._)(ve,Ht=>{pt?.(Ht),Be?It(Ht):ve.next(Ht)},()=>{At=!0},void 0,()=>{if(At)try{for(Kt--;Bt.length&&Kt<Oe;){const Ht=Bt.shift();Ct?(0,Ue.N)(ve,Ct,()=>_t(Ht)):_t(Ht)}Dt()}catch(Ht){ve.error(Ht)}}))};return it.subscribe((0,Ze._)(ve,It,()=>{Jn=!0,Dt()})),()=>{kt?.()}}(Oe,pt,it,Ie)))}},941:(yn,wt,ie)=>{ie.d(wt,{Q:()=>Ue});var D=ie(5225),x=ie(9974),L=ie(4360);function Ue(Ze,Ee=0){return(0,x.N)((Xe,Et)=>{Xe.subscribe((0,L._)(Et,it=>(0,D.N)(Et,Ze,()=>Et.next(it),Ee),()=>(0,D.N)(Et,Ze,()=>Et.complete(),Ee),it=>(0,D.N)(Et,Ze,()=>Et.error(it),Ee)))})}},9172:(yn,wt,ie)=>{ie.d(wt,{Z:()=>Ue});var D=ie(8793),x=ie(3794),L=ie(9974);function Ue(...Ze){const Ee=(0,x.lI)(Ze);return(0,L.N)((Xe,Et)=>{(Ee?(0,D.x)(Ze,Xe,Ee):(0,D.x)(Ze,Xe)).subscribe(Et)})}},6745:(yn,wt,ie)=>{ie.d(wt,{_:()=>x});var D=ie(9974);function x(L,Ue=0){return(0,D.N)((Ze,Ee)=>{Ee.add(L.schedule(()=>Ze.subscribe(Ee),Ue))})}},5558:(yn,wt,ie)=>{ie.d(wt,{n:()=>Ue});var D=ie(8750),x=ie(9974),L=ie(4360);function Ue(Ze,Ee){return(0,x.N)((Xe,Et)=>{let it=null,ve=0,Ie=!1;const Oe=()=>Ie&&!it&&Et.complete();Xe.subscribe((0,L._)(Et,pt=>{it?.unsubscribe();let Be=0;const Ct=ve++;(0,D.Tg)(Ze(pt,Ct)).subscribe(it=(0,L._)(Et,kt=>Et.next(Ee?Ee(pt,kt,Ct,Be++):kt),()=>{it=null,Oe()}))},()=>{Ie=!0,Oe()}))})}},8141:(yn,wt,ie)=>{ie.d(wt,{M:()=>Ze});var D=ie(8071),x=ie(9974),L=ie(4360),Ue=ie(3669);function Ze(Ee,Xe,Et){const it=(0,D.T)(Ee)||Xe||Et?{next:Ee,error:Xe,complete:Et}:Ee;return it?(0,x.N)((ve,Ie)=>{var Oe;null===(Oe=it.subscribe)||void 0===Oe||Oe.call(it);let pt=!0;ve.subscribe((0,L._)(Ie,Be=>{var Ct;null===(Ct=it.next)||void 0===Ct||Ct.call(it,Be),Ie.next(Be)},()=>{var Be;pt=!1,null===(Be=it.complete)||void 0===Be||Be.call(it),Ie.complete()},Be=>{var Ct;pt=!1,null===(Ct=it.error)||void 0===Ct||Ct.call(it,Be),Ie.error(Be)},()=>{var Be,Ct;pt&&(null===(Be=it.unsubscribe)||void 0===Be||Be.call(it)),null===(Ct=it.finalize)||void 0===Ct||Ct.call(it)}))}):Ue.D}},9270:(yn,wt,ie)=>{ie.d(wt,{f:()=>D});const D={setTimeout(x,L,...Ue){const{delegate:Ze}=D;return Ze?.setTimeout?Ze.setTimeout(x,L,...Ue):setTimeout(x,L,...Ue)},clearTimeout(x){const{delegate:L}=D;return(L?.clearTimeout||clearTimeout)(x)},delegate:void 0}},4761:(yn,wt,ie)=>{ie.d(wt,{l:()=>x});const x=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(yn,wt,ie)=>{ie.d(wt,{s:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},3794:(yn,wt,ie)=>{ie.d(wt,{ms:()=>Ue,lI:()=>Ze});var D=ie(8071);function L(Xe){return Xe[Xe.length-1]}function Ue(Xe){return(0,D.T)(L(Xe))?Xe.pop():void 0}function Ze(Xe){return function x(Xe){return Xe&&(0,D.T)(Xe.schedule)}(L(Xe))?Xe.pop():void 0}},3073:(yn,wt,ie)=>{ie.d(wt,{D:()=>Ze});const{isArray:D}=Array,{getPrototypeOf:x,prototype:L,keys:Ue}=Object;function Ze(Xe){if(1===Xe.length){const Et=Xe[0];if(D(Et))return{args:Et,keys:null};if(function Ee(Xe){return Xe&&"object"==typeof Xe&&x(Xe)===L}(Et)){const it=Ue(Et);return{args:it.map(ve=>Et[ve]),keys:it}}}return{args:Xe,keys:null}}},7908:(yn,wt,ie)=>{function D(x,L){if(x){const Ue=x.indexOf(L);0<=Ue&&x.splice(Ue,1)}}ie.d(wt,{o:()=>D})},1853:(yn,wt,ie)=>{function D(x){const Ue=x(Ze=>{Error.call(Ze),Ze.stack=(new Error).stack});return Ue.prototype=Object.create(Error.prototype),Ue.prototype.constructor=Ue,Ue}ie.d(wt,{L:()=>D})},8496:(yn,wt,ie)=>{function D(x,L){return x.reduce((Ue,Ze,Ee)=>(Ue[Ze]=L[Ee],Ue),{})}ie.d(wt,{e:()=>D})},9786:(yn,wt,ie)=>{ie.d(wt,{Y:()=>L,l:()=>Ue});var D=ie(1026);let x=null;function L(Ze){if(D.$.useDeprecatedSynchronousErrorHandling){const Ee=!x;if(Ee&&(x={errorThrown:!1,error:null}),Ze(),Ee){const{errorThrown:Xe,error:Et}=x;if(x=null,Xe)throw Et}}else Ze()}function Ue(Ze){D.$.useDeprecatedSynchronousErrorHandling&&x&&(x.errorThrown=!0,x.error=Ze)}},5225:(yn,wt,ie)=>{function D(x,L,Ue,Ze=0,Ee=!1){const Xe=L.schedule(function(){Ue(),Ee?x.add(this.schedule(null,Ze)):this.unsubscribe()},Ze);if(x.add(Xe),!Ee)return Xe}ie.d(wt,{N:()=>D})},3669:(yn,wt,ie)=>{function D(x){return x}ie.d(wt,{D:()=>D})},7441:(yn,wt,ie)=>{ie.d(wt,{X:()=>D});const D=x=>x&&"number"==typeof x.length&&"function"!=typeof x},7953:(yn,wt,ie)=>{ie.d(wt,{T:()=>x});var D=ie(8071);function x(L){return Symbol.asyncIterator&&(0,D.T)(L?.[Symbol.asyncIterator])}},8071:(yn,wt,ie)=>{function D(x){return"function"==typeof x}ie.d(wt,{T:()=>D})},5055:(yn,wt,ie)=>{ie.d(wt,{l:()=>L});var D=ie(3494),x=ie(8071);function L(Ue){return(0,x.T)(Ue[D.s])}},5397:(yn,wt,ie)=>{ie.d(wt,{x:()=>L});var D=ie(4761),x=ie(8071);function L(Ue){return(0,x.T)(Ue?.[D.l])}},9858:(yn,wt,ie)=>{ie.d(wt,{y:()=>x});var D=ie(8071);function x(L){return(0,D.T)(L?.then)}},5196:(yn,wt,ie)=>{ie.d(wt,{C:()=>L,U:()=>Ue});var D=ie(1635),x=ie(8071);function L(Ze){return(0,D.AQ)(this,arguments,function*(){const Xe=Ze.getReader();try{for(;;){const{value:Et,done:it}=yield(0,D.N3)(Xe.read());if(it)return yield(0,D.N3)(void 0);yield yield(0,D.N3)(Et)}}finally{Xe.releaseLock()}})}function Ue(Ze){return(0,x.T)(Ze?.getReader)}},9974:(yn,wt,ie)=>{ie.d(wt,{N:()=>L,S:()=>x});var D=ie(8071);function x(Ue){return(0,D.T)(Ue?.lift)}function L(Ue){return Ze=>{if(x(Ze))return Ze.lift(function(Ee){try{return Ue(Ee,this)}catch(Xe){this.error(Xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(yn,wt,ie)=>{ie.d(wt,{I:()=>Ue});var D=ie(6354);const{isArray:x}=Array;function Ue(Ze){return(0,D.T)(Ee=>function L(Ze,Ee){return x(Ee)?Ze(...Ee):Ze(Ee)}(Ze,Ee))}},5343:(yn,wt,ie)=>{function D(){}ie.d(wt,{l:()=>D})},1203:(yn,wt,ie)=>{ie.d(wt,{F:()=>x,m:()=>L});var D=ie(3669);function x(...Ue){return L(Ue)}function L(Ue){return 0===Ue.length?D.D:1===Ue.length?Ue[0]:function(Ee){return Ue.reduce((Xe,Et)=>Et(Xe),Ee)}}},5334:(yn,wt,ie)=>{ie.d(wt,{m:()=>L});var D=ie(1026),x=ie(9270);function L(Ue){x.f.setTimeout(()=>{const{onUnhandledError:Ze}=D.$;if(!Ze)throw Ue;Ze(Ue)})}},591:(yn,wt,ie)=>{function D(x){return new TypeError(`You provided ${null!==x&&"object"==typeof x?"an invalid object":`'${x}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ie.d(wt,{L:()=>D})},177:(yn,wt,ie)=>{ie.d(wt,{AJ:()=>za,B3:()=>yi,Jj:()=>Bo,MD:()=>fo,N0:()=>Qr,QT:()=>L,Sm:()=>kt,Sq:()=>$a,VF:()=>Ze,Vy:()=>So,Xr:()=>Wa,YU:()=>Mr,ZD:()=>Ue,_b:()=>On,aZ:()=>Kt,bT:()=>ca,fw:()=>Bt,hb:()=>Be,hj:()=>it,qQ:()=>Xe});var D=ie(3953);let x=null;function L(){return x}function Ue(F){x??=F}class Ze{}const Xe=new D.nKC("");let Et=(()=>{class F{historyGo(W){throw new Error("")}static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275prov=D.jDH({token:F,factory:()=>(0,D.WQX)(ve),providedIn:"platform"})}return F})();const it=new D.nKC("");let ve=(()=>{class F extends Et{constructor(){super(),this._doc=(0,D.WQX)(Xe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(W){const ne=L().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",W,!1),()=>ne.removeEventListener("popstate",W)}onHashChange(W){const ne=L().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",W,!1),()=>ne.removeEventListener("hashchange",W)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(W){this._location.pathname=W}pushState(W,ne,Ce){this._history.pushState(W,ne,Ce)}replaceState(W,ne,Ce){this._history.replaceState(W,ne,Ce)}forward(){this._history.forward()}back(){this._history.back()}historyGo(W=0){this._history.go(W)}getState(){return this._history.state}static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275prov=D.jDH({token:F,factory:()=>new F,providedIn:"platform"})}return F})();function Ie(F,re){if(0==F.length)return re;if(0==re.length)return F;let W=0;return F.endsWith("/")&&W++,re.startsWith("/")&&W++,2==W?F+re.substring(1):1==W?F+re:F+"/"+re}function Oe(F){const re=F.match(/#|\?|$/),W=re&&re.index||F.length;return F.slice(0,W-("/"===F[W-1]?1:0))+F.slice(W)}function pt(F){return F&&"?"!==F[0]?"?"+F:F}let Be=(()=>{class F{historyGo(W){throw new Error("")}static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275prov=D.jDH({token:F,factory:()=>(0,D.WQX)(kt),providedIn:"root"})}return F})();const Ct=new D.nKC("");let kt=(()=>{class F extends Be{constructor(W,ne){super(),this._platformLocation=W,this._removeListenerFns=[],this._baseHref=ne??this._platformLocation.getBaseHrefFromDOM()??(0,D.WQX)(Xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}prepareExternalUrl(W){return Ie(this._baseHref,W)}path(W=!1){const ne=this._platformLocation.pathname+pt(this._platformLocation.search),Ce=this._platformLocation.hash;return Ce&&W?`${ne}${Ce}`:ne}pushState(W,ne,Ce,ut){const gt=this.prepareExternalUrl(Ce+pt(ut));this._platformLocation.pushState(W,ne,gt)}replaceState(W,ne,Ce,ut){const gt=this.prepareExternalUrl(Ce+pt(ut));this._platformLocation.replaceState(W,ne,gt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.KVO(Et),D.KVO(Ct,8))};static#t=this.\u0275prov=D.jDH({token:F,factory:F.\u0275fac,providedIn:"root"})}return F})(),Bt=(()=>{class F extends Be{constructor(W,ne){super(),this._platformLocation=W,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}path(W=!1){const ne=this._platformLocation.hash??"#";return ne.length>0?ne.substring(1):ne}prepareExternalUrl(W){const ne=Ie(this._baseHref,W);return ne.length>0?"#"+ne:ne}pushState(W,ne,Ce,ut){let gt=this.prepareExternalUrl(Ce+pt(ut));0==gt.length&&(gt=this._platformLocation.pathname),this._platformLocation.pushState(W,ne,gt)}replaceState(W,ne,Ce,ut){let gt=this.prepareExternalUrl(Ce+pt(ut));0==gt.length&&(gt=this._platformLocation.pathname),this._platformLocation.replaceState(W,ne,gt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.KVO(Et),D.KVO(Ct,8))};static#t=this.\u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})(),Kt=(()=>{class F{constructor(W){this._subject=new D.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=W;const ne=this._locationStrategy.getBaseHref();this._basePath=function It(F){if(new RegExp("^(https?:)?//").test(F)){const[,W]=F.split(/\/\/[^\/]+/);return W}return F}(Oe(Dt(ne))),this._locationStrategy.onPopState(Ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ce.state,type:Ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(W=!1){return this.normalize(this._locationStrategy.path(W))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(W,ne=""){return this.path()==this.normalize(W+pt(ne))}normalize(W){return F.stripTrailingSlash(function Jn(F,re){if(!F||!re.startsWith(F))return re;const W=re.substring(F.length);return""===W||["/",";","?","#"].includes(W[0])?W:re}(this._basePath,Dt(W)))}prepareExternalUrl(W){return W&&"/"!==W[0]&&(W="/"+W),this._locationStrategy.prepareExternalUrl(W)}go(W,ne="",Ce=null){this._locationStrategy.pushState(Ce,"",W,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+pt(ne)),Ce)}replaceState(W,ne="",Ce=null){this._locationStrategy.replaceState(Ce,"",W,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+pt(ne)),Ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(W=0){this._locationStrategy.historyGo?.(W)}onUrlChange(W){return this._urlChangeListeners.push(W),this._urlChangeSubscription??=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)}),()=>{const ne=this._urlChangeListeners.indexOf(W);this._urlChangeListeners.splice(ne,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(W="",ne){this._urlChangeListeners.forEach(Ce=>Ce(W,ne))}subscribe(W,ne,Ce){return this._subject.subscribe({next:W,error:ne,complete:Ce})}static#e=this.normalizeQueryParams=pt;static#t=this.joinWithSlash=Ie;static#n=this.stripTrailingSlash=Oe;static#r=this.\u0275fac=function(ne){return new(ne||F)(D.KVO(Be))};static#i=this.\u0275prov=D.jDH({token:F,factory:()=>function An(){return new Kt((0,D.KVO)(Be))}(),providedIn:"root"})}return F})();function Dt(F){return F.replace(/\/index.html$/,"")}function On(F,re){re=encodeURIComponent(re);for(const W of F.split(";")){const ne=W.indexOf("="),[Ce,ut]=-1==ne?[W,""]:[W.slice(0,ne),W.slice(ne+1)];if(Ce.trim()===re)return decodeURIComponent(ut)}return null}const Nn=/\s+/,Rr=[];let Mr=(()=>{class F{constructor(W,ne){this._ngEl=W,this._renderer=ne,this.initialClasses=Rr,this.stateMap=new Map}set klass(W){this.initialClasses=null!=W?W.trim().split(Nn):Rr}set ngClass(W){this.rawClass="string"==typeof W?W.trim().split(Nn):W}ngDoCheck(){for(const ne of this.initialClasses)this._updateState(ne,!0);const W=this.rawClass;if(Array.isArray(W)||W instanceof Set)for(const ne of W)this._updateState(ne,!0);else if(null!=W)for(const ne of Object.keys(W))this._updateState(ne,!!W[ne]);this._applyStateDiff()}_updateState(W,ne){const Ce=this.stateMap.get(W);void 0!==Ce?(Ce.enabled!==ne&&(Ce.changed=!0,Ce.enabled=ne),Ce.touched=!0):this.stateMap.set(W,{enabled:ne,changed:!0,touched:!0})}_applyStateDiff(){for(const W of this.stateMap){const ne=W[0],Ce=W[1];Ce.changed?(this._toggleClass(ne,Ce.enabled),Ce.changed=!1):Ce.touched||(Ce.enabled&&this._toggleClass(ne,!1),this.stateMap.delete(ne)),Ce.touched=!1}}_toggleClass(W,ne){(W=W.trim()).length>0&&W.split(Nn).forEach(Ce=>{ne?this._renderer.addClass(this._ngEl.nativeElement,Ce):this._renderer.removeClass(this._ngEl.nativeElement,Ce)})}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.aKT),D.rXU(D.sFG))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return F})();class Xr{constructor(re,W,ne,Ce){this.$implicit=re,this.ngForOf=W,this.index=ne,this.count=Ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $a=(()=>{class F{set ngForOf(W){this._ngForOf=W,this._ngForOfDirty=!0}set ngForTrackBy(W){this._trackByFn=W}get ngForTrackBy(){return this._trackByFn}constructor(W,ne,Ce){this._viewContainer=W,this._template=ne,this._differs=Ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(W){W&&(this._template=W)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const W=this._ngForOf;!this._differ&&W&&(this._differ=this._differs.find(W).create(this.ngForTrackBy))}if(this._differ){const W=this._differ.diff(this._ngForOf);W&&this._applyChanges(W)}}_applyChanges(W){const ne=this._viewContainer;W.forEachOperation((Ce,ut,gt)=>{if(null==Ce.previousIndex)ne.createEmbeddedView(this._template,new Xr(Ce.item,this._ngForOf,-1,-1),null===gt?void 0:gt);else if(null==gt)ne.remove(null===ut?void 0:ut);else if(null!==ut){const vn=ne.get(ut);ne.move(vn,gt),bs(vn,Ce)}});for(let Ce=0,ut=ne.length;Ce<ut;Ce++){const vn=ne.get(Ce).context;vn.index=Ce,vn.count=ut,vn.ngForOf=this._ngForOf}W.forEachIdentityChange(Ce=>{bs(ne.get(Ce.currentIndex),Ce)})}static ngTemplateContextGuard(W,ne){return!0}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.c1b),D.rXU(D.C4Q),D.rXU(D._q3))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return F})();function bs(F,re){F.context.$implicit=re.item}let ca=(()=>{class F{constructor(W,ne){this._viewContainer=W,this._context=new Fu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(W){this._context.$implicit=this._context.ngIf=W,this._updateView()}set ngIfThen(W){fc("ngIfThen",W),this._thenTemplateRef=W,this._thenViewRef=null,this._updateView()}set ngIfElse(W){fc("ngIfElse",W),this._elseTemplateRef=W,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(W,ne){return!0}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.c1b),D.rXU(D.C4Q))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return F})();class Fu{constructor(){this.$implicit=null,this.ngIf=null}}function fc(F,re){if(re&&!re.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,D.Tbb)(re)}'.`)}let yi=(()=>{class F{constructor(W,ne,Ce){this._ngEl=W,this._differs=ne,this._renderer=Ce,this._ngStyle=null,this._differ=null}set ngStyle(W){this._ngStyle=W,!this._differ&&W&&(this._differ=this._differs.find(W).create())}ngDoCheck(){if(this._differ){const W=this._differ.diff(this._ngStyle);W&&this._applyChanges(W)}}_setStyle(W,ne){const[Ce,ut]=W.split("."),gt=-1===Ce.indexOf("-")?void 0:D.czy.DashCase;null!=ne?this._renderer.setStyle(this._ngEl.nativeElement,Ce,ut?`${ne}${ut}`:ne,gt):this._renderer.removeStyle(this._ngEl.nativeElement,Ce,gt)}_applyChanges(W){W.forEachRemovedItem(ne=>this._setStyle(ne.key,null)),W.forEachAddedItem(ne=>this._setStyle(ne.key,ne.currentValue)),W.forEachChangedItem(ne=>this._setStyle(ne.key,ne.currentValue))}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.aKT),D.rXU(D.MKu),D.rXU(D.sFG))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return F})();class Ri{createSubscription(re,W){return(0,D.O8t)(()=>re.subscribe({next:W,error:ne=>{throw ne}}))}dispose(re){(0,D.O8t)(()=>re.unsubscribe())}}class js{createSubscription(re,W){return re.then(W,ne=>{throw ne})}dispose(re){}}const Vl=new js,Vi=new Ri;let Bo=(()=>{class F{constructor(W){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=W}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(W){if(!this._obj){if(W)try{this.markForCheckOnValueUpdate=!1,this._subscribe(W)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return W!==this._obj?(this._dispose(),this.transform(W)):this._latestValue}_subscribe(W){this._obj=W,this._strategy=this._selectStrategy(W),this._subscription=this._strategy.createSubscription(W,ne=>this._updateLatestValue(W,ne))}_selectStrategy(W){if((0,D.jNT)(W))return Vl;if((0,D.zjR)(W))return Vi;throw function qi(F,re){return new D.wOt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(W,ne){W===this._obj&&(this._latestValue=ne,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.gRc,16))};static#t=this.\u0275pipe=D.EJ8({name:"async",type:F,pure:!1,standalone:!0})}return F})(),fo=(()=>{class F{static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275mod=D.$C({type:F});static#n=this.\u0275inj=D.G2t({})}return F})();const za="browser",es="server";function So(F){return F===es}let Wa=(()=>{class F{static#e=this.\u0275prov=(0,D.jDH)({token:F,providedIn:"root",factory:()=>function ha(F){return F===za}((0,D.WQX)(D.Agw))?new Uo((0,D.WQX)(Xe),window):new Lc})}return F})();class Uo{constructor(re,W){this.document=re,this.window=W,this.offset=()=>[0,0]}setOffset(re){this.offset=Array.isArray(re)?()=>re:re}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(re){this.window.scrollTo(re[0],re[1])}scrollToAnchor(re){const W=function ho(F,re){const W=F.getElementById(re)||F.getElementsByName(re)[0];if(W)return W;if("function"==typeof F.createTreeWalker&&F.body&&"function"==typeof F.body.attachShadow){const ne=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Ce=ne.currentNode;for(;Ce;){const ut=Ce.shadowRoot;if(ut){const gt=ut.getElementById(re)||ut.querySelector(`[name="${re}"]`);if(gt)return gt}Ce=ne.nextNode()}}return null}(this.document,re);W&&(this.scrollToElement(W),W.focus())}setHistoryScrollRestoration(re){this.window.history.scrollRestoration=re}scrollToElement(re){const W=re.getBoundingClientRect(),ne=W.left+this.window.pageXOffset,Ce=W.top+this.window.pageYOffset,ut=this.offset();this.window.scrollTo(ne-ut[0],Ce-ut[1])}}class Lc{setOffset(re){}getScrollPosition(){return[0,0]}scrollToPosition(re){}scrollToAnchor(re){}setHistoryScrollRestoration(re){}}class Qr{}},3953:(yn,wt,ie)=>{ie.d(wt,{iLQ:()=>Yy,sZ2:()=>ni,hnV:()=>vT,o8S:()=>Td,BIS:()=>th,gRc:()=>MT,Ql9:()=>hM,Ocv:()=>CM,Z63:()=>qs,aKT:()=>Jd,uvJ:()=>qo,zcH:()=>Su,bkB:()=>Ti,$GK:()=>re,nKC:()=>cr,zZn:()=>Ls,_q3:()=>pw,MKu:()=>gw,xe9:()=>eE,Co$:()=>pI,Vns:()=>vm,SKi:()=>Yo,Xx1:()=>li,Agw:()=>sf,PLl:()=>t_,sFG:()=>co,_9s:()=>an,czy:()=>Ne,kdw:()=>oa,C4Q:()=>Rp,NYb:()=>aM,giA:()=>mT,xvI:()=>kR,RxE:()=>cT,c1b:()=>by,gXe:()=>Fa,mal:()=>Rw,L39:()=>EO,Ol2:()=>fC,w6W:()=>dS,Rfq:()=>Ho,WQX:()=>mn,QuC:()=>xr,EmA:()=>is,HJs:()=>SO,N4e:()=>bc,O8t:()=>wO,H3F:()=>uT,H8p:()=>zl,KH2:()=>p0,TgB:()=>ym,wOt:()=>nn,WHO:()=>pT,e01:()=>gT,H5H:()=>LC,Zy3:()=>Xn,mq5:()=>bA,JZv:()=>Ei,TL3:()=>JM,LfX:()=>fs,plB:()=>Fp,jNT:()=>rw,zjR:()=>_T,TL$:()=>cp,Tbb:()=>Tr,Vt3:()=>uC,GFd:()=>hI,OA$:()=>ot,Jv_:()=>Pb,aNF:()=>Nb,R7$:()=>ce,BMQ:()=>AC,HbH:()=>nA,ZvI:()=>uA,STu:()=>lA,ZWY:()=>dA,AVh:()=>MC,vxM:()=>gA,wni:()=>cb,VBU:()=>M,FsC:()=>dt,jDH:()=>Dn,G2t:()=>Ms,$C:()=>oe,EJ8:()=>Je,rXU:()=>Le,nrm:()=>FC,bVm:()=>Hy,qex:()=>jy,k0s:()=>Uy,j41:()=>By,RV6:()=>wA,xGo:()=>jm,KVO:()=>Oi,kS0:()=>di,QTQ:()=>ht,bIt:()=>UC,lsd:()=>db,XpG:()=>YA,nI1:()=>$b,bMT:()=>zb,SdG:()=>JA,NAR:()=>ZA,Y8G:()=>SC,FS9:()=>HC,Mz_:()=>Wy,eq3:()=>Fb,l_i:()=>Lb,sMw:()=>Vb,mGM:()=>lb,sdS:()=>fb,Dyx:()=>vA,Z7z:()=>_A,fX1:()=>mA,Njj:()=>Lh,EBC:()=>l,tSv:()=>c,eBV:()=>ft,B4B:()=>df,n$t:()=>b_,xc7:()=>RC,DNE:()=>pC,C5r:()=>Wb,EFF:()=>wb,JRh:()=>GC,SpI:()=>qy,Lme:()=>$C,DH7:()=>Mb,mxI:()=>WC,R50:()=>zC,GBs:()=>ub});let x=null,Ue=1;const Ze=Symbol("SIGNAL");function Ee(t){const r=x;return x=t,r}function pt(t){if((!_t(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Ue)){if(!t.producerMustRecompute(t)&&!An(t))return t.dirty=!1,void(t.lastCleanEpoch=Ue);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ue}}function An(t){Lt(t);for(let r=0;r<t.producerNode.length;r++){const a=t.producerNode[r],d=t.producerLastReadVersion[r];if(d!==a.version||(pt(a),d!==a.version))return!0}return!1}function It(t,r){if(function At(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),1===t.liveConsumerNode.length&&function Ht(t){return void 0!==t.producerNode}(t))for(let d=0;d<t.producerNode.length;d++)It(t.producerNode[d],t.producerIndexOfThis[d]);const a=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[a],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[a],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const d=t.liveConsumerIndexOfThis[r],h=t.liveConsumerNode[r];Lt(h),h.producerIndexOfThis[d]=r}}function _t(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Lt(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let bt=null;var to=ie(1413),lr=ie(8359),qr=ie(4412),Tn=ie(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const qa="https://g.co/ng/security#xss";class nn extends Error{constructor(r,a){super(Xn(r,a)),this.code=r}}function Xn(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}function oo(t){return{toString:t}.toString()}const ds="__parameters__";function ma(t,r,a){return oo(()=>{const d=function mc(t){return function(...a){if(t){const d=t(...a);for(const h in d)this[h]=d[h]}}}(r);function h(...v){if(this instanceof h)return d.apply(this,v),this;const w=new h(...v);return S.annotation=w,S;function S(N,q,J){const de=N.hasOwnProperty(ds)?N[ds]:Object.defineProperty(N,ds,{value:[]})[ds];for(;de.length<=J;)de.push(null);return(de[J]=de[J]||[]).push(w),N}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=t,h.annotationCls=h,h})}const Ei=globalThis;function Gr(t){for(let r in t)if(t[r]===Gr)return r;throw Error("Could not find renamed property on target object.")}function Bc(t,r){for(const a in r)r.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(t[a]=r[a])}function Tr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Tr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const a=r.indexOf("\n");return-1===a?r:r.substring(0,a)}function jo(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const Uc=Gr({__forward_ref__:Gr});function Ho(t){return t.__forward_ref__=Ho,t.toString=function(){return Tr(this())},t}function kn(t){return Oa(t)?t():t}function Oa(t){return"function"==typeof t&&t.hasOwnProperty(Uc)&&t.__forward_ref__===Ho}function Dn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ms(t){return{providers:t.providers||[],imports:t.imports||[]}}function Zr(t){return Ka(t,jc)||Ka(t,Sd)}function fs(t){return null!==Zr(t)}function Ka(t,r){return t.hasOwnProperty(r)?t[r]:null}function vc(t){return t&&(t.hasOwnProperty(Zn)||t.hasOwnProperty(ui))?t[Zn]:null}const jc=Gr({\u0275prov:Gr}),Zn=Gr({\u0275inj:Gr}),Sd=Gr({ngInjectableDef:Gr}),ui=Gr({ngInjectorDef:Gr});class cr{constructor(r,a){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Dn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ec(t){return t&&!!t.\u0275providers}const Jr=Gr({\u0275cmp:Gr}),Hc=Gr({\u0275dir:Gr}),ur=Gr({\u0275pipe:Gr}),Qa=Gr({\u0275mod:Gr}),Ci=Gr({\u0275fac:Gr}),Na=Gr({__NG_ELEMENT_ID__:Gr}),Un=Gr({__NG_ENV_ID__:Gr});function zn(t){return"string"==typeof t?t:null==t?"":String(t)}function F(t,r){throw new nn(-201,!1)}var re=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(re||{});let W;function ne(){return W}function Ce(t){const r=W;return W=t,r}function ut(t,r,a){const d=Zr(t);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:a&re.Optional?null:void 0!==r?r:void F()}const dn={},$r="__NG_DI_FLAG__",tr="ngTempTokenPath",dr=/\n/gm,Qi="__source";let ts;function Mo(t){const r=ts;return ts=t,r}function Ya(t,r=re.Default){if(void 0===ts)throw new nn(-203,!1);return null===ts?ut(t,void 0,r):ts.get(t,r&re.Optional?null:void 0,r)}function Oi(t,r=re.Default){return(ne()||Ya)(kn(t),r)}function mn(t,r=re.Default){return Oi(t,hs(r))}function hs(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ws(t){const r=[];for(let a=0;a<t.length;a++){const d=kn(t[a]);if(Array.isArray(d)){if(0===d.length)throw new nn(900,!1);let h,v=re.Default;for(let w=0;w<d.length;w++){const S=d[w],N=dl(S);"number"==typeof N?-1===N?h=S.token:v|=N:h=S}r.push(Oi(h,v))}else r.push(Oi(d))}return r}function Oo(t,r){return t[$r]=r,t.prototype[$r]=r,t}function dl(t){return t[$r]}const li=Oo(ma("Optional"),8),oa=Oo(ma("SkipSelf"),4);function ao(t,r){return t.hasOwnProperty(Ci)?t[Ci]:null}function Cc(t,r){t.forEach(a=>Array.isArray(a)?Cc(a,r):r(a))}function Yi(t,r,a){r>=t.length?t.push(a):t.splice(r,0,a)}function Hu(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Wo(t,r,a){let d=Gc(t,r);return d>=0?t[1|d]=a:(d=~d,function vu(t,r,a,d){let h=t.length;if(h==r)t.push(a,d);else if(1===h)t.push(d,t[0]),t[0]=a;else{for(h--,t.push(t[h-1],t[h]);h>r;)t[h]=t[h-2],h--;t[r]=a,t[r+1]=d}}(t,d,r,a)),d}function Os(t,r){const a=Gc(t,r);if(a>=0)return t[1|a]}function Gc(t,r){return function $u(t,r,a){let d=0,h=t.length>>a;for(;h!==d;){const v=d+(h-d>>1),w=t[v<<a];if(r===w)return v<<a;w>r?h=v:d=v+1}return~(h<<a)}(t,r,1)}const pi={},Pr=[],qs=new cr(""),zu=new cr("",-1),Pd=new cr("");class ka{get(r,a=dn){if(a===dn){const d=new Error(`NullInjectorError: No provider for ${Tr(r)}!`);throw d.name="NullInjectorError",d}return a}}var gs=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(gs||{}),Fa=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Fa||{}),La=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(La||{});function Zi(t,r,a){let d=t.length;for(;;){const h=t.indexOf(r,a);if(-1===h)return h;if(0===h||t.charCodeAt(h-1)<=32){const v=r.length;if(h+v===d||t.charCodeAt(h+v)<=32)return h}a=h+1}}function Ic(t,r,a){let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const v=a[d++],w=a[d++],S=a[d++];t.setAttribute(r,w,S,v)}else{const v=h,w=a[++d];Ul(v)?t.setProperty(r,v,w):t.setAttribute(r,v,w),d++}}return d}function Wu(t){return 3===t||4===t||6===t}function Ul(t){return 64===t.charCodeAt(0)}function Ir(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let a=-1;for(let d=0;d<r.length;d++){const h=r[d];"number"==typeof h?a=h:0===a||fl(t,a,h,null,-1===a||2===a?r[++d]:null)}}return t}function fl(t,r,a,d,h){let v=0,w=t.length;if(-1===r)w=-1;else for(;v<t.length;){const S=t[v++];if("number"==typeof S){if(S===r){w=-1;break}if(S>r){w=v-1;break}}}for(;v<t.length;){const S=t[v];if("number"==typeof S)break;if(S===a){if(null===d)return void(null!==h&&(t[v+1]=h));if(d===t[v+1])return void(t[v+2]=h)}v++,null!==d&&v++,null!==h&&v++}-1!==w&&(t.splice(w,0,r),v=w+1),t.splice(v++,0,a),null!==d&&t.splice(v++,0,d),null!==h&&t.splice(v++,0,h)}const hl="ng-template";function jl(t,r,a,d){let h=0;if(d){for(;h<r.length&&"string"==typeof r[h];h+=2)if("class"===r[h]&&-1!==Zi(r[h+1].toLowerCase(),a,0))return!0}else if(hn(t))return!1;if(h=r.indexOf(1,h),h>-1){let v;for(;++h<r.length&&"string"==typeof(v=r[h]);)if(v.toLowerCase()===a)return!0}return!1}function hn(t){return 4===t.type&&t.value!==hl}function yu(t,r,a){return r===(4!==t.type||a?t.value:hl)}function pl(t,r,a){let d=4;const h=t.attrs,v=null!==h?function Nd(t){for(let r=0;r<t.length;r++)if(Wu(t[r]))return r;return t.length}(h):0;let w=!1;for(let S=0;S<r.length;S++){const N=r[S];if("number"!=typeof N){if(!w)if(4&d){if(d=2|1&d,""!==N&&!yu(t,N,a)||""===N&&1===r.length){if(Va(d))return!1;w=!0}}else if(8&d){if(null===h||!jl(t,h,N,a)){if(Va(d))return!1;w=!0}}else{const q=r[++S],J=Hl(N,h,hn(t),a);if(-1===J){if(Va(d))return!1;w=!0;continue}if(""!==q){let de;if(de=J>v?"":h[J+1].toLowerCase(),2&d&&q!==de){if(Va(d))return!1;w=!0}}}}else{if(!w&&!Va(d)&&!Va(N))return!1;if(w&&Va(N))continue;w=!1,d=N|1&d}}return Va(d)||w}function Va(t){return!(1&t)}function Hl(t,r,a,d){if(null===r)return-1;let h=0;if(d||!a){let v=!1;for(;h<r.length;){const w=r[h];if(w===t)return h;if(3===w||6===w)v=!0;else{if(1===w||2===w){let S=r[++h];for(;"string"==typeof S;)S=r[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=v?1:2}return-1}return function Af(t,r){let a=t.indexOf(4);if(a>-1)for(a++;a<t.length;){const d=t[a];if("number"==typeof d)return-1;if(d===r)return a;a++}return-1}(r,t)}function Ba(t,r,a=!1){for(let d=0;d<r.length;d++)if(pl(t,r[d],a))return!0;return!1}function gl(t,r){e:for(let a=0;a<r.length;a++){const d=r[a];if(t.length===d.length){for(let h=0;h<t.length;h++)if(t[h]!==d[h])continue e;return!0}}return!1}function Ua(t,r){return t?":not("+r.trim()+")":r}function $c(t){let r=t[0],a=1,d=2,h="",v=!1;for(;a<t.length;){let w=t[a];if("string"==typeof w)if(2&d){const S=t[++a];h+="["+w+(S.length>0?'="'+S+'"':"")+"]"}else 8&d?h+="."+w:4&d&&(h+=" "+w);else""!==h&&!Va(w)&&(r+=Ua(v,h),h=""),d=w,v=v||!Va(d);a++}return""!==h&&(r+=Ua(v,h)),r}function M(t){return oo(()=>{const r=rs(t),a={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Fa.Emulated,styles:t.styles||Pr,_:null,schemas:t.schemas||null,tView:null,id:""};Ea(a);const d=t.dependencies;return a.directiveDefs=Ps(d,!1),a.pipeDefs=Ps(d,!0),a.id=function Za(t){let r=0;const a=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const h of a)r=Math.imul(31,r)+h.charCodeAt(0)|0;return r+=2147483648,"c"+r}(a),a})}function j(t){return Pt(t)||fn(t)}function Q(t){return null!==t}function oe(t){return oo(()=>({type:t.type,bootstrap:t.bootstrap||Pr,declarations:t.declarations||Pr,imports:t.imports||Pr,exports:t.exports||Pr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ae(t,r){if(null==t)return pi;const a={};for(const d in t)if(t.hasOwnProperty(d)){const h=t[d];let v,w,S=La.None;Array.isArray(h)?(S=h[0],v=h[1],w=h[2]??v):(v=h,w=h),r?(a[v]=S!==La.None?[d,S]:d,r[v]=w):a[v]=d}return a}function dt(t){return oo(()=>{const r=rs(t);return Ea(r),r})}function Je(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Pt(t){return t[Jr]||null}function fn(t){return t[Hc]||null}function En(t){return t[ur]||null}function xr(t){const r=Pt(t)||fn(t)||En(t);return null!==r&&r.standalone}function ar(t,r){const a=t[Qa]||null;if(!a&&!0===r)throw new Error(`Type ${Tr(t)} does not have '\u0275mod' property.`);return a}function rs(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||pi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Pr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ae(t.inputs,r),outputs:Ae(t.outputs),debugInfo:null}}function Ea(t){t.features?.forEach(r=>r(t))}function Ps(t,r){if(!t)return null;const a=r?En:j;return()=>("function"==typeof t?t():t).map(d=>a(d)).filter(Q)}function is(t){return{\u0275providers:t}}function Eu(...t){return{\u0275providers:ml(0,t),\u0275fromNgModule:!0}}function ml(t,...r){const a=[],d=new Set;let h;const v=w=>{a.push(w)};return Cc(r,w=>{const S=w;Ja(S,v,[],d)&&(h||=[],h.push(S))}),void 0!==h&&kd(h,v),a}function kd(t,r){for(let a=0;a<t.length;a++){const{ngModule:d,providers:h}=t[a];Gl(h,v=>{r(v,d)})}}function Ja(t,r,a,d){if(!(t=kn(t)))return!1;let h=null,v=vc(t);const w=!v&&Pt(t);if(v||w){if(w&&!w.standalone)return!1;h=t}else{const N=t.ngModule;if(v=vc(N),!v)return!1;h=N}const S=d.has(h);if(w){if(S)return!1;if(d.add(h),w.dependencies){const N="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const q of N)Ja(q,r,a,d)}}else{if(!v)return!1;{if(null!=v.imports&&!S){let q;d.add(h);try{Cc(v.imports,J=>{Ja(J,r,a,d)&&(q||=[],q.push(J))})}finally{}void 0!==q&&kd(q,r)}if(!S){const q=ao(h)||(()=>new h);r({provide:h,useFactory:q,deps:Pr},h),r({provide:Pd,useValue:h,multi:!0},h),r({provide:qs,useValue:()=>Oi(h),multi:!0},h)}const N=v.providers;if(null!=N&&!S){const q=t;Gl(N,J=>{r(J,q)})}}}return h!==t&&void 0!==t.providers}function Gl(t,r){for(let a of t)Ec(a)&&(a=a.\u0275providers),Array.isArray(a)?Gl(a,r):r(a)}const Tf=Gr({provide:String,useValue:Gr});function Fd(t){return null!==t&&"object"==typeof t&&Tf in t}function Cu(t){return"function"==typeof t}const zl=new cr(""),Wl={},_l={};let Ah;function Ku(){return void 0===Ah&&(Ah=new ka),Ah}class qo{}class Ac extends qo{get destroyed(){return this._destroyed}constructor(r,a,d,h){super(),this.parent=a,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ec(r,w=>this.processProvider(w)),this.records.set(zu,qc(void 0,this)),h.has("environment")&&this.records.set(qo,qc(void 0,this));const v=this.records.get(zl);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Pd,Pr,re.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const r=Ee(null);try{for(const d of this._ngOnDestroyHooks)d.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const d of a)d()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(r)}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const a=Mo(this),d=Ce(void 0);try{return r()}finally{Mo(a),Ce(d)}}get(r,a=dn,d=re.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Un))return r[Un](this);d=hs(d);const v=Mo(this),w=Ce(void 0);try{if(!(d&re.SkipSelf)){let N=this.records.get(r);if(void 0===N){const q=function Ld(t){return"function"==typeof t||"object"==typeof t&&t instanceof cr}(r)&&Zr(r);N=q&&this.injectableDefInScope(q)?qc(ja(r),Wl):null,this.records.set(r,N)}if(null!=N)return this.hydrate(r,N)}return(d&re.Self?Ku():this.parent).get(r,a=d&re.Optional&&a===dn?null:a)}catch(S){if("NullInjectorError"===S.name){if((S[tr]=S[tr]||[]).unshift(Tr(r)),v)throw S;return function Rd(t,r,a,d){const h=t[tr];throw r[Qi]&&h.unshift(r[Qi]),t.message=function Md(t,r,a,d=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let h=Tr(r);if(Array.isArray(r))h=r.map(Tr).join(" -> ");else if("object"==typeof r){let v=[];for(let w in r)if(r.hasOwnProperty(w)){let S=r[w];v.push(w+":"+("string"==typeof S?JSON.stringify(S):Tr(S)))}h=`{${v.join(", ")}}`}return`${a}${d?"("+d+")":""}[${h}]: ${t.replace(dr,"\n  ")}`}("\n"+t.message,h,a,d),t.ngTokenPath=h,t[tr]=null,t}(S,r,"R3InjectorError",this.source)}throw S}finally{Ce(w),Mo(v)}}resolveInjectorInitializers(){const r=Ee(null),a=Mo(this),d=Ce(void 0);try{const v=this.get(qs,Pr,re.Self);for(const w of v)w()}finally{Mo(a),Ce(d),Ee(r)}}toString(){const r=[],a=this.records;for(const d of a.keys())r.push(Tr(d));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new nn(205,!1)}processProvider(r){let a=Cu(r=kn(r))?r:kn(r&&r.provide);const d=function Th(t){return Fd(t)?qc(void 0,t.useValue):qc(Lr(t),Wl)}(r);if(!Cu(r)&&!0===r.multi){let h=this.records.get(a);h||(h=qc(void 0,Wl,!0),h.factory=()=>Ws(h.multi),this.records.set(a,h)),a=r,h.multi.push(r)}this.records.set(a,d)}hydrate(r,a){const d=Ee(null);try{return a.value===Wl&&(a.value=_l,a.value=a.factory()),"object"==typeof a.value&&a.value&&function xf(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}finally{Ee(d)}}injectableDefInScope(r){if(!r.providedIn)return!1;const a=kn(r.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(r){const a=this._onDestroyHooks.indexOf(r);-1!==a&&this._onDestroyHooks.splice(a,1)}}function ja(t){const r=Zr(t),a=null!==r?r.factory:ao(t);if(null!==a)return a;if(t instanceof cr)throw new nn(204,!1);if(t instanceof Function)return function bh(t){if(t.length>0)throw new nn(204,!1);const a=function ln(t){return t&&(t[jc]||t[Sd])||null}(t);return null!==a?()=>a.factory(t):()=>new t}(t);throw new nn(204,!1)}function Lr(t,r,a){let d;if(Cu(t)){const h=kn(t);return ao(h)||ja(h)}if(Fd(t))d=()=>kn(t.useValue);else if(function $l(t){return!(!t||!t.useFactory)}(t))d=()=>t.useFactory(...Ws(t.deps||[]));else if(function qu(t){return!(!t||!t.useExisting)}(t))d=()=>Oi(kn(t.useExisting));else{const h=kn(t&&(t.useClass||t.provide));if(!function Xu(t){return!!t.deps}(t))return ao(h)||ja(h);d=()=>new h(...Ws(t.deps))}return d}function qc(t,r,a=!1){return{factory:t,value:r,multi:a?[]:void 0}}function ec(t,r){for(const a of t)Array.isArray(a)?ec(a,r):a&&Ec(a)?ec(a.\u0275providers,r):r(a)}function bc(t,r){t instanceof Ac&&t.assertNotDestroyed();const d=Mo(t),h=Ce(void 0);try{return r()}finally{Mo(d),Ce(h)}}function xh(){return void 0!==ne()||null!=function ns(){return ts}()}const Ui=0,qt=1,Rn=2,wo=3,ms=4,_s=5,vs=6,vl=7,Ii=8,Pi=9,Ni=10,nr=11,Xl=12,nc=13,yl=14,Ai=15,Qu=16,Xc=17,go=18,El=19,Mf=20,Ns=21,Au=22,rc=23,Pn=25,bu=1,Tc=7,Qc=9,mo=10;var wl=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(wl||{});function Po(t){return Array.isArray(t)&&"object"==typeof t[bu]}function ks(t){return Array.isArray(t)&&!0===t[bu]}function Ks(t){return!!(4&t.flags)}function Yc(t){return t.componentOffset>-1}function Ql(t){return!(1&~t.flags)}function Ca(t){return!!t.template}function xc(t){return!!(512&t[Rn])}class ue{constructor(r,a,d){this.previousValue=r,this.currentValue=a,this.firstChange=d}isFirstChange(){return this.firstChange}}function $e(t,r,a,d){null!==r?r.applyValueToInputSignal(r,d):t[a]=d}function ot(){return jt}function jt(t){return t.type.prototype.ngOnChanges&&(t.setInput=In),Cn}function Cn(){const t=ys(this),r=t?.current;if(r){const a=t.previous;if(a===pi)t.previous=r;else for(let d in r)a[d]=r[d];t.current=null,this.ngOnChanges(r)}}function In(t,r,a,d,h){const v=this.declaredInputs[d],w=ys(t)||function Zc(t,r){return t[vr]=r}(t,{previous:pi,current:null}),S=w.current||(w.current={}),N=w.previous,q=N[v];S[v]=new ue(q&&q.currentValue,a,N===pi),$e(t,r,h,a)}ot.ngInherit=!0;const vr="__ngSimpleChanges__";function ys(t){return t[vr]||null}const Ha=function(t,r,a){};function Nr(t){for(;Array.isArray(t);)t=t[Ui];return t}function ic(t,r){return Nr(r[t])}function Ji(t,r){return Nr(r[t.index])}function Jc(t,r){return t.data[r]}function oc(t,r){return t[r]}function gr(t,r){const a=r[t];return Po(a)?a:a[Ui]}function kf(t){return!(128&~t[Rn])}function sc(t,r){return null==r?null:t[r]}function Tm(t){t[Xc]=0}function kh(t){1024&t[Rn]||(t[Rn]|=1024,kf(t)&&ed(t))}function Jl(t){return!!(9216&t[Rn]||t[rc]?.dirty)}function Wp(t){t[Ni].changeDetectionScheduler?.notify(7),64&t[Rn]&&(t[Rn]|=1024),Jl(t)&&ed(t)}function ed(t){t[Ni].changeDetectionScheduler?.notify(0);let r=Tu(t);for(;null!==r&&!(8192&r[Rn])&&(r[Rn]|=8192,kf(r));)r=Tu(r)}function Ko(t,r){if(!(256&~t[Rn]))throw new nn(911,!1);null===t[Ns]&&(t[Ns]=[]),t[Ns].push(r)}function Tu(t){const r=t[wo];return ks(r)?r[wo]:r}const or={lFrame:Om(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Fh=!1;function E0(){return or.bindingsEnabled}function ac(){return null!==or.skipHydrationRootTNode}function Rt(){return or.lFrame.lView}function Vr(){return or.lFrame.tView}function ft(t){return or.lFrame.contextLView=t,t[Ii]}function Lh(t){return or.lFrame.contextLView=null,t}function me(){let t=td();for(;null!==t&&64===t.type;)t=t.parent;return t}function td(){return or.lFrame.currentTNode}function Fs(t,r){const a=or.lFrame;a.currentTNode=t,a.isParent=r}function _o(){return or.lFrame.isParent}function Rl(){or.lFrame.isParent=!1}function Vh(){return Fh}function Bh(t){Fh=t}function Gi(){const t=or.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function tu(){return or.lFrame.bindingIndex}function nu(){return or.lFrame.bindingIndex++}function ru(t){const r=or.lFrame,a=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,a}function jh(t,r){const a=or.lFrame;a.bindingIndex=a.bindingRootIndex=t,Hh(r)}function Hh(t){or.lFrame.currentDirectiveIndex=t}function Gh(){return or.lFrame.currentQueryIndex}function Uf(t){or.lFrame.currentQueryIndex=t}function Rm(t){const r=t[qt];return 2===r.type?r.declTNode:1===r.type?t[_s]:null}function Zp(t,r,a){if(a&re.SkipSelf){let h=r,v=t;for(;!(h=h.parent,null!==h||a&re.Host||(h=Rm(v),null===h||(v=v[yl],10&h.type))););if(null===h)return!1;r=h,t=v}const d=or.lFrame=Mm();return d.currentTNode=r,d.lView=t,!0}function Jp(t){const r=Mm(),a=t[qt];or.lFrame=r,r.currentTNode=a.firstChild,r.lView=t,r.tView=a,r.contextLView=t,r.bindingIndex=a.bindingStartIndex,r.inI18n=!1}function Mm(){const t=or.lFrame,r=null===t?null:t.child;return null===r?Om(t):r}function Om(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Pm(){const t=or.lFrame;return or.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const $h=Pm;function eg(){const t=Pm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Xs(){return or.lFrame.selectedIndex}function Ju(t){or.lFrame.selectedIndex=t}function ji(){const t=or.lFrame;return Jc(t.tView,t.selectedIndex)}let ti=!0;function rd(){return ti}function iu(t){ti=t}function jf(t,r){for(let a=r.directiveStart,d=r.directiveEnd;a<d;a++){const v=t.data[a].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:S,ngAfterViewInit:N,ngAfterViewChecked:q,ngOnDestroy:J}=v;w&&(t.contentHooks??=[]).push(-a,w),S&&((t.contentHooks??=[]).push(a,S),(t.contentCheckHooks??=[]).push(a,S)),N&&(t.viewHooks??=[]).push(-a,N),q&&((t.viewHooks??=[]).push(a,q),(t.viewCheckHooks??=[]).push(a,q)),null!=J&&(t.destroyHooks??=[]).push(a,J)}}function Wh(t,r,a){xu(t,r,3,a)}function Wd(t,r,a,d){(3&t[Rn])===a&&xu(t,r,a,d)}function rg(t,r){let a=t[Rn];(3&a)===r&&(a&=16383,a+=1,t[Rn]=a)}function xu(t,r,a,d){const v=d??-1,w=r.length-1;let S=0;for(let N=void 0!==d?65535&t[Xc]:0;N<w;N++)if("number"==typeof r[N+1]){if(S=r[N],null!=d&&S>=d)break}else r[N]<0&&(t[Xc]+=65536),(S<v||-1==v)&&(ig(t,a,r,N),t[Xc]=(4294901760&t[Xc])+N+2),N++}function Nm(t,r){Ha(4,t,r);const a=Ee(null);try{r.call(t)}finally{Ee(a),Ha(5,t,r)}}function ig(t,r,a,d){const h=a[d]<0,v=a[d+1],S=t[h?-a[d]:a[d]];h?t[Rn]>>14<t[Xc]>>16&&(3&t[Rn])===r&&(t[Rn]+=16384,Nm(S,v)):Nm(S,v)}const qd=-1;class id{constructor(r,a,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=d}}function ou(t){return t!==qd}function od(t){return 32767&t}function sd(t,r){let a=function ag(t){return t>>16}(t),d=r;for(;a>0;)d=d[yl],a--;return d}let cg=!0;function Gf(t){const r=cg;return cg=t,r}const Bm=255,qh=5;let $f=0;const Dc={};function Xd(t,r){const a=Kh(t,r);if(-1!==a)return a;const d=r[qt];d.firstCreatePass&&(t.injectorIndex=r.length,zf(d.data,t),zf(r,null),zf(d.blueprint,null));const h=Wf(t,r),v=t.injectorIndex;if(ou(h)){const w=od(h),S=sd(h,r),N=S[qt].data;for(let q=0;q<8;q++)r[v+q]=S[w+q]|N[w+q]}return r[v+8]=h,v}function zf(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Kh(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Wf(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let a=0,d=null,h=r;for(;null!==h;){if(d=Kf(h),null===d)return qd;if(a++,h=h[yl],-1!==d.injectorIndex)return d.injectorIndex|a<<16}return qd}function lg(t,r,a){!function ug(t,r,a){let d;"string"==typeof a?d=a.charCodeAt(0)||0:a.hasOwnProperty(Na)&&(d=a[Na]),null==d&&(d=a[Na]=$f++);const h=d&Bm;r.data[t+(h>>qh)]|=1<<h}(t,r,a)}function Xh(t,r,a){if(a&re.Optional||void 0!==t)return t;F()}function Um(t,r,a,d){if(a&re.Optional&&void 0===d&&(d=null),!(a&(re.Self|re.Host))){const h=t[Pi],v=Ce(void 0);try{return h?h.get(r,d,a&re.Optional):ut(r,d,a&re.Optional)}finally{Ce(v)}}return Xh(d,0,a)}function Qh(t,r,a,d=re.Default,h){if(null!==t){if(2048&r[Rn]&&!(d&re.Self)){const w=function D0(t,r,a,d,h){let v=t,w=r;for(;null!==v&&null!==w&&2048&w[Rn]&&!(512&w[Rn]);){const S=qf(v,w,a,d|re.Self,Dc);if(S!==Dc)return S;let N=v.parent;if(!N){const q=w[Mf];if(q){const J=q.get(a,Dc,d);if(J!==Dc)return J}N=Kf(w),w=w[yl]}v=N}return h}(t,r,a,d,Dc);if(w!==Dc)return w}const v=qf(t,r,a,d,Dc);if(v!==Dc)return v}return Um(r,a,d,h)}function qf(t,r,a,d,h){const v=function x0(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Na)?t[Na]:void 0;return"number"==typeof r?r>=0?r&Bm:S0:r}(a);if("function"==typeof v){if(!Zp(r,t,d))return d&re.Host?Xh(h,0,d):Um(r,a,d,h);try{let w;if(w=v(d),null!=w||d&re.Optional)return w;F()}finally{$h()}}else if("number"==typeof v){let w=null,S=Kh(t,r),N=qd,q=d&re.Host?r[Ai][_s]:null;for((-1===S||d&re.SkipSelf)&&(N=-1===S?Wf(t,r):r[S+8],N!==qd&&fg(d,!1)?(w=r[qt],S=od(N),r=sd(N,r)):S=-1);-1!==S;){const J=r[qt];if(Zh(v,S,J.data)){const de=dg(S,r,a,w,d,q);if(de!==Dc)return de}N=r[S+8],N!==qd&&fg(d,r[qt].data[S+8]===q)&&Zh(v,S,r)?(w=J,S=od(N),r=sd(N,r)):S=-1}}return h}function dg(t,r,a,d,h,v){const w=r[qt],S=w.data[t+8],J=Yh(S,w,a,null==d?Yc(S)&&cg:d!=w&&!!(3&S.type),h&re.Host&&v===S);return null!==J?cc(r,w,J,S):Dc}function Yh(t,r,a,d,h){const v=t.providerIndexes,w=r.data,S=1048575&v,N=t.directiveStart,J=v>>20,xe=h?S+J:t.directiveEnd;for(let Ge=d?S:S+J;Ge<xe;Ge++){const rt=w[Ge];if(Ge<N&&a===rt||Ge>=N&&rt.type===a)return Ge}if(h){const Ge=w[N];if(Ge&&Ca(Ge)&&Ge.type===a)return N}return null}function cc(t,r,a,d){let h=t[a];const v=r.data;if(function og(t){return t instanceof id}(h)){const w=h;w.resolving&&function _r(t,r){throw r&&r.join(" > "),new nn(-200,t)}(function Or(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():zn(t)}(v[a]));const S=Gf(w.canSeeViewProviders);w.resolving=!0;const q=w.injectImpl?Ce(w.injectImpl):null;Zp(t,d,re.Default);try{h=t[a]=w.factory(void 0,v,t,d),r.firstCreatePass&&a>=d.directiveStart&&function ng(t,r,a){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:v}=r.type.prototype;if(d){const w=jt(r);(a.preOrderHooks??=[]).push(t,w),(a.preOrderCheckHooks??=[]).push(t,w)}h&&(a.preOrderHooks??=[]).push(0-t,h),v&&((a.preOrderHooks??=[]).push(t,v),(a.preOrderCheckHooks??=[]).push(t,v))}(a,v[a],r)}finally{null!==q&&Ce(q),Gf(S),w.resolving=!1,$h()}}return h}function Zh(t,r,a){return!!(a[r+(t>>qh)]&1<<t)}function fg(t,r){return!(t&re.Self||t&re.Host&&r)}class No{constructor(r,a){this._tNode=r,this._lView=a}get(r,a,d){return Qh(this._tNode,this._lView,r,hs(d),a)}}function S0(){return new No(me(),Rt())}function jm(t){return oo(()=>{const r=t.prototype.constructor,a=r[Ci]||hg(r),d=Object.prototype;let h=Object.getPrototypeOf(t.prototype).constructor;for(;h&&h!==d;){const v=h[Ci]||hg(h);if(v&&v!==a)return v;h=Object.getPrototypeOf(h)}return v=>new v})}function hg(t){return Oa(t)?()=>{const r=hg(kn(t));return r&&r()}:ao(t)}function Kf(t){const r=t[qt],a=r.type;return 2===a?r.declTNode:1===a?t[_s]:null}function di(t){return function T0(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const a=t.attrs;if(a){const d=a.length;let h=0;for(;h<d;){const v=a[h];if(Wu(v))break;if(0===v)h+=2;else if("number"==typeof v)for(h++;h<d&&"string"==typeof a[h];)h++;else{if(v===r)return a[h+1];h+=2}}}return null}(me(),t)}function pg(t,r=null,a=null,d){const h=gg(t,r,a,d);return h.resolveInjectorInitializers(),h}function gg(t,r=null,a=null,d,h=new Set){const v=[a||Pr,Eu(t)];return d=d||("object"==typeof t?void 0:Tr(t)),new Ac(v,r||Ku(),d||null,h)}class Ls{static#e=this.THROW_IF_NOT_FOUND=dn;static#t=this.NULL=new ka;static create(r,a){if(Array.isArray(r))return pg({name:""},a,r,"");{const d=r.name??"";return pg({name:d},r.parent,r.providers,d)}}static#n=this.\u0275prov=Dn({token:Ls,providedIn:"any",factory:()=>Oi(zu)});static#r=this.__NG_ELEMENT_ID__=-1}new cr("").__NG_ELEMENT_ID__=t=>{const r=me();if(null===r)throw new nn(204,!1);if(2&r.type)return r.value;if(t&re.Optional)return null;throw new nn(204,!1)};function mg(t){return t.ngOriginalError}class Su{constructor(){this._console=console}handleError(r){const a=this._findOriginalError(r);this._console.error("ERROR",r),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(r){let a=r&&mg(r);for(;a&&mg(a);)a=mg(a);return a||null}}const _g=new cr("",{providedIn:"root",factory:()=>mn(Su).handleError.bind(void 0)});let br=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=vg;static#t=this.__NG_ENV_ID__=a=>a}return t})();class M0 extends br{constructor(r){super(),this._lView=r}onDestroy(r){return Ko(this._lView,r),()=>function Ff(t,r){if(null===t[Ns])return;const a=t[Ns].indexOf(r);-1!==a&&t[Ns].splice(a,1)}(this._lView,r)}}function vg(){return new M0(Rt())}function kr(){return dd(me(),Rt())}function dd(t,r){return new Jd(Ji(t,r))}let Jd=(()=>{class t{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=kr}return t})();function bi(t){return t instanceof Jd?t.nativeElement:t}function os(t){return r=>{setTimeout(t,void 0,r)}}const Ti=class P0 extends to.B{constructor(r=!1){super(),this.destroyRef=void 0,this.__isAsync=r,xh()&&(this.destroyRef=mn(br,{optional:!0})??void 0)}emit(r){const a=Ee(null);try{super.next(r)}finally{Ee(a)}}subscribe(r,a,d){let h=r,v=a||(()=>null),w=d;if(r&&"object"==typeof r){const N=r;h=N.next?.bind(N),v=N.error?.bind(N),w=N.complete?.bind(N)}this.__isAsync&&(v=os(v),h&&(h=os(h)),w&&(w=os(w)));const S=super.subscribe({next:h,error:v,complete:w});return r instanceof lr.yU&&r.add(S),S}};function Du(){return this._results[Symbol.iterator]()}class rp{static#e=Symbol.iterator;get changes(){return this._changes??=new Ti}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const a=rp.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Du)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,a){return this._results.reduce(r,a)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,a){this.dirty=!1;const d=function sn(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function ju(t,r,a){if(t.length!==r.length)return!1;for(let d=0;d<t.length;d++){let h=t[d],v=r[d];if(a&&(h=a(h),v=a(v)),v!==h)return!1}return!0}(this._results,d,a))&&(this._results=d,this.length=d.length,this.last=d[this.length-1],this.first=d[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(r){this._onDirty=r}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function op(t){return!(128&~t.flags)}const Km=new Map;let s1=0;const wg="__ngContext__";function wa(t,r){Po(r)?(t[wg]=r[El],function lE(t){Km.set(t[El],t)}(r)):t[wg]=r}function Ag(t){return Jf(t[Xl])}function bg(t){return Jf(t[ms])}function Jf(t){for(;null!==t&&!ks(t);)t=t[ms];return t}let xg;function cp(t){xg=t}const ni=new cr("",{providedIn:"root",factory:()=>rf}),rf="ng",t_=new cr(""),sf=new cr("",{providedIn:"platform",factory:()=>"unknown"}),th=new cr("",{providedIn:"root",factory:()=>function cu(){if(void 0!==xg)return xg;if(typeof document<"u")return document;throw new nn(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Rg=()=>null;function Mg(t,r,a=!1){return Rg(t,r,a)}const q0=new cr("",{providedIn:"root",factory:()=>!1});let l_;function h_(t){return function d_(){if(void 0===l_&&(l_=null,Ei.trustedTypes))try{l_=Ei.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return l_}()?.createScriptURL(t)||t}class X0{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qa})`}}function Zs(t){return t instanceof X0?t.changingThisBreaksApplicationSecurity:t}function vp(t,r){const a=function fE(t){return t instanceof X0&&t.getTypeName()||null}(t);if(null!=a&&a!==r){if("ResourceURL"===a&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${a} (see ${qa})`)}return a===r}const mE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var lf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(lf||{});function df(t){const r=wp();return r?r.sanitize(lf.URL,t)||"":vp(t,"URL")?Zs(t):function Pc(t){return(t=String(t)).match(mE)?t:"unsafe:"+t}(zn(t))}function Vg(t){const r=wp();if(r)return h_(r.sanitize(lf.RESOURCE_URL,t)||"");if(vp(t,"ResourceURL"))return h_(Zs(t));throw new nn(904,!1)}function b_(t,r,a){return function A_(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Vg:df}(r,a)(t)}function wp(){const t=Rt();return t&&t[Ni].sanitizer}const tv=/^>|^->|<!--|-->|--!>|<!-$/g,I1=/(<|>)/g,A1="\u200b$1\u200b";function c(t){return t.ownerDocument.defaultView}function l(t){return t.ownerDocument}function y(t){return t instanceof Function?t():t}var Ne=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ne||{});let Ye;function at(t,r){return Ye(t,r)}function $t(t,r,a,d,h){if(null!=d){let v,w=!1;ks(d)?v=d:Po(d)&&(w=!0,d=d[Ui]);const S=Nr(d);0===t&&null!==a?null==h?N1(r,a,S):bp(r,a,S,h||null,!0):1===t&&null!==a?bp(r,a,S,h||null,!0):2===t?function jg(t,r,a){const d=sv(t,r);d&&function Iw(t,r,a,d){t.removeChild(r,a,d)}(t,d,r,a)}(r,S,w):3===t&&r.destroyNode(S),null!=v&&function _(t,r,a,d,h){const v=a[Tc];v!==Nr(a)&&$t(r,t,d,v,h);for(let S=mo;S<a.length;S++){const N=a[S];o(N[qt],N,t,r,d,v)}}(r,t,v,a,h)}}function rr(t,r){return t.createComment(function nv(t){return t.replace(tv,r=>r.replace(I1,A1))}(r))}function ir(t,r,a){return t.createElement(r,a)}function Ao(t,r){r[Ni].changeDetectionScheduler?.notify(8),o(t,r,r[nr],2,null,null)}function Ug(t,r){const a=t[Qc],d=r[wo];(Po(d)||r[Ai]!==d[wo][Ai])&&(t[Rn]|=wl.HasTransplantedViews),null===a?t[Qc]=[r]:a.push(r)}function Ap(t,r){const a=t[Qc],d=a.indexOf(r);a.splice(d,1)}function ff(t,r){if(t.length<=mo)return;const a=mo+r,d=t[a];if(d){const h=d[Qu];null!==h&&h!==t&&Ap(h,d),r>0&&(t[a-1][ms]=d[ms]);const v=Hu(t,mo+r);!function ss(t,r){Ao(t,r),r[Ui]=null,r[_s]=null}(d[qt],d);const w=v[go];null!==w&&w.detachView(v[qt]),d[wo]=null,d[ms]=null,d[Rn]&=-129}return d}function ov(t,r){if(!(256&r[Rn])){const a=r[nr];a.destroyNode&&o(t,r,a,3,null,null),function uu(t){let r=t[Xl];if(!r)return O1(t[qt],t);for(;r;){let a=null;if(Po(r))a=r[Xl];else{const d=r[mo];d&&(a=d)}if(!a){for(;r&&!r[ms]&&r!==t;)Po(r)&&O1(r[qt],r),r=r[wo];null===r&&(r=t),Po(r)&&O1(r[qt],r),a=r&&r[ms]}r=a}}(r)}}function O1(t,r){if(256&r[Rn])return;const a=Ee(null);try{r[Rn]&=-129,r[Rn]|=256,r[rc]&&function Jn(t){if(Lt(t),_t(t))for(let r=0;r<t.producerNode.length;r++)It(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(r[rc]),function ww(t,r){let a;if(null!=t&&null!=(a=t.destroyHooks))for(let d=0;d<a.length;d+=2){const h=r[a[d]];if(!(h instanceof id)){const v=a[d+1];if(Array.isArray(v))for(let w=0;w<v.length;w+=2){const S=h[v[w]],N=v[w+1];Ha(4,S,N);try{N.call(S)}finally{Ha(5,S,N)}}else{Ha(4,h,v);try{v.call(h)}finally{Ha(5,h,v)}}}}}(t,r),function Cw(t,r){const a=t.cleanup,d=r[vl];if(null!==a)for(let v=0;v<a.length-1;v+=2)if("string"==typeof a[v]){const w=a[v+3];w>=0?d[w]():d[-w].unsubscribe(),v+=2}else a[v].call(d[a[v+1]]);null!==d&&(r[vl]=null);const h=r[Ns];if(null!==h){r[Ns]=null;for(let v=0;v<h.length;v++)(0,h[v])()}}(t,r),1===r[qt].type&&r[nr].destroy();const d=r[Qu];if(null!==d&&ks(r[wo])){d!==r[wo]&&Ap(d,r);const h=r[go];null!==h&&h.detachView(t)}!function ko(t){Km.delete(t[El])}(r)}finally{Ee(a)}}function P1(t,r,a){return function IE(t,r,a){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return a[Ui];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:v}=t.data[d.directiveStart+h];if(v===Fa.None||v===Fa.Emulated)return null}return Ji(d,a)}}(t,r.parent,a)}function bp(t,r,a,d,h){t.insertBefore(r,a,d,h)}function N1(t,r,a){t.appendChild(r,a)}function AE(t,r,a,d,h){null!==d?bp(t,r,a,d,h):N1(t,r,a)}function sv(t,r){return t.parentNode(r)}function TE(t,r,a){return SE(t,r,a)}let k1,SE=function xE(t,r,a){return 40&t.type?Ji(t,a):null};function av(t,r,a,d){const h=P1(t,d,r),v=r[nr],S=TE(d.parent||r[_s],d,r);if(null!=h)if(Array.isArray(a))for(let N=0;N<a.length;N++)AE(v,h,a[N],S,!1);else AE(v,h,a,S,!1);void 0!==k1&&k1(v,d,r,a,h)}function x_(t,r){if(null!==r){const a=r.type;if(3&a)return Ji(r,t);if(4&a)return L1(-1,t[r.index]);if(8&a){const d=r.child;if(null!==d)return x_(t,d);{const h=t[r.index];return ks(h)?L1(-1,h):Nr(h)}}if(32&a)return at(r,t)()||Nr(t[r.index]);{const d=F1(t,r);return null!==d?Array.isArray(d)?d[0]:x_(Tu(t[Ai]),d):x_(t,r.next)}}return null}function F1(t,r){return null!==r?t[Ai][_s].projection[r.projection]:null}function L1(t,r){const a=mo+t+1;if(a<r.length){const d=r[a],h=d[qt].firstChild;if(null!==h)return x_(d,h)}return r[Tc]}function p(t,r,a,d,h,v,w){for(;null!=a;){const S=d[a.index],N=a.type;if(w&&0===r&&(S&&wa(Nr(S),d),a.flags|=2),32&~a.flags)if(8&N)p(t,r,a.child,d,h,v,!1),$t(r,t,h,S,v);else if(32&N){const q=at(a,d);let J;for(;J=q();)$t(r,t,h,J,v);$t(r,t,h,S,v)}else 16&N?f(t,r,d,a,h,v):$t(r,t,h,S,v);a=w?a.projectionNext:a.next}}function o(t,r,a,d,h,v){p(a,d,t.firstChild,r,h,v,!1)}function f(t,r,a,d,h,v){const w=a[Ai],N=w[_s].projection[d.projection];if(Array.isArray(N))for(let q=0;q<N.length;q++)$t(r,t,h,N[q],v);else{let q=N;const J=w[wo];op(d)&&(q.flags|=128),p(t,r,q,J,h,v,!0)}}function V(t,r,a){""===a?t.removeAttribute(r,"class"):t.setAttribute(r,"class",a)}function G(t,r,a){const{mergedAttrs:d,classes:h,styles:v}=a;null!==d&&Ic(t,r,d),null!==h&&V(t,r,h),null!==v&&function T(t,r,a){t.setAttribute(r,"style",a)}(t,r,v)}const X={};function ce(t=1){we(Vr(),Rt(),Xs()+t,!1)}function we(t,r,a,d){if(!d)if(3&~r[Rn]){const v=t.preOrderHooks;null!==v&&Wd(r,v,0,a)}else{const v=t.preOrderCheckHooks;null!==v&&Wh(r,v,a)}Ju(a)}function Le(t,r=re.Default){const a=Rt();return null===a?Oi(t,r):Qh(me(),a,kn(t),r)}function ht(){throw new Error("invalid")}function Ut(t,r,a,d,h,v){const w=Ee(null);try{let S=null;h&La.SignalBased&&(S=r[d][Ze]),null!==S&&void 0!==S.transformFn&&(v=S.transformFn(v)),h&La.HasDecoratorInputTransform&&(v=t.inputTransforms[d].call(r,v)),null!==t.setInput?t.setInput(r,S,v,a,d):$e(r,S,d,v)}finally{Ee(w)}}function Gt(t,r,a,d,h,v,w,S,N,q,J){const de=r.blueprint.slice();return de[Ui]=h,de[Rn]=204|d,(null!==q||t&&2048&t[Rn])&&(de[Rn]|=2048),Tm(de),de[wo]=de[yl]=t,de[Ii]=a,de[Ni]=w||t&&t[Ni],de[nr]=S||t&&t[nr],de[Pi]=N||t&&t[Pi]||null,de[_s]=v,de[El]=function $i(){return s1++}(),de[vs]=J,de[Mf]=q,de[Ai]=2==r.type?t[Ai]:de,de}function Mn(t,r,a,d,h){let v=t.data[r];if(null===v)v=function Wn(t,r,a,d,h){const v=td(),w=_o(),N=t.data[r]=function Gg(t,r,a,d,h,v){let w=r?r.injectorIndex:-1,S=0;return ac()&&(S|=128),{type:a,index:d,insertBeforeIndex:null,injectorIndex:w,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:S,providerIndexes:0,value:h,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?v:v&&v.parent,a,r,d,h);return null===t.firstChild&&(t.firstChild=N),null!==v&&(w?null==v.child&&null!==N.parent&&(v.child=N):null===v.next&&(v.next=N,N.prev=v)),N}(t,r,a,d,h),function Qp(){return or.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=a,v.value=d,v.attrs=h;const w=function Sc(){const t=or.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();v.injectorIndex=null===w?-1:w.injectorIndex}return Fs(v,!0),v}function Fn(t,r,a,d){if(0===a)return-1;const h=r.length;for(let v=0;v<a;v++)r.push(d),t.blueprint.push(d),t.data.push(null);return h}function yr(t,r,a,d,h){const v=Xs(),w=2&d;try{Ju(-1),w&&r.length>Pn&&we(t,r,Pn,!1),Ha(w?2:0,h),a(d,h)}finally{Ju(v),Ha(w?3:1,h)}}function hi(t,r,a){if(Ks(r)){const d=Ee(null);try{const v=r.directiveEnd;for(let w=r.directiveStart;w<v;w++){const S=t.data[w];S.contentQueries&&S.contentQueries(1,a[w],w)}}finally{Ee(d)}}}function Fr(t,r,a){E0()&&(function R_(t,r,a,d){const h=a.directiveStart,v=a.directiveEnd;Yc(a)&&function j1(t,r,a){const d=Ji(r,t),h=Me(a);let w=16;a.signals?w=4096:a.onPush&&(w=64);const S=Sp(t,Gt(t,h,null,w,d,r,null,t[Ni].rendererFactory.createRenderer(d,a),null,null,null));t[r.index]=S}(r,a,t.data[h+a.componentOffset]),t.firstCreatePass||Xd(a,r),wa(d,r);const w=a.initialInputs;for(let S=h;S<v;S++){const N=t.data[S],q=cc(r,t,S,a);wa(q,r),null!==w&&H1(0,S-h,q,N,0,w),Ca(N)&&(gr(a.index,r)[Ii]=cc(r,t,S,a))}}(t,r,a,Ji(a,r)),!(64&~a.flags)&&$g(t,r,a))}function et(t,r,a=Ji){const d=r.localNames;if(null!==d){let h=r.index+1;for(let v=0;v<d.length;v+=2){const w=d[v+1],S=-1===w?a(r,t):t[w];t[h++]=S}}}function Me(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=ze(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function ze(t,r,a,d,h,v,w,S,N,q,J){const de=Pn+d,xe=de+h,Ge=function nt(t,r){const a=[];for(let d=0;d<r;d++)a.push(d<t?null:X);return a}(de,xe),rt="function"==typeof q?q():q;return Ge[qt]={type:t,blueprint:Ge,template:a,queries:null,viewQuery:S,declTNode:r,data:Ge.slice().fill(null,de),bindingStartIndex:de,expandoStartIndex:xe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:N,consts:rt,incompleteFirstPass:!1,ssrId:J}}let He=()=>null;function Tp(t,r,a,d,h){for(let v in r){if(!r.hasOwnProperty(v))continue;const w=r[v];if(void 0===w)continue;d??={};let S,N=La.None;Array.isArray(w)?(S=w[0],N=w[1]):S=w;let q=v;if(null!==h){if(!h.hasOwnProperty(v))continue;q=h[v]}0===t?S_(d,a,q,S,N):S_(d,a,q,S)}return d}function S_(t,r,a,d,h){let v;t.hasOwnProperty(a)?(v=t[a]).push(r,d):v=t[a]=[r,d],void 0!==h&&v.push(h)}function ws(t,r,a,d,h,v,w,S){const N=Ji(r,a);let J,q=r.inputs;!S&&null!=q&&(J=q[d])?(mh(t,a,J,d,h),Yc(r)&&function Ga(t,r){const a=gr(r,t);16&a[Rn]||(a[Rn]|=64)}(a,r.index)):3&r.type&&(d=function OE(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(d),h=null!=w?w(h,r.value||"",d):h,v.setProperty(N,d,h))}function cv(t,r,a,d){if(E0()){const h=null===d?null:{"":-1},v=function lv(t,r){const a=t.directiveRegistry;let d=null,h=null;if(a)for(let v=0;v<a.length;v++){const w=a[v];if(Ba(r,w.selectors,!1))if(d||(d=[]),Ca(w))if(null!==w.findHostDirectiveDefs){const S=[];h=h||new Map,w.findHostDirectiveDefs(w,S,h),d.unshift(...S,w),zg(t,r,S.length)}else d.unshift(w),zg(t,r,0);else h=h||new Map,w.findHostDirectiveDefs?.(w,d,h),d.push(w)}return null===d?null:[d,h]}(t,a);let w,S;null===v?w=S=null:[w,S]=v,null!==w&&xp(t,r,a,w,h,S),h&&function dv(t,r,a){if(r){const d=t.localNames=[];for(let h=0;h<r.length;h+=2){const v=a[r[h+1]];if(null==v)throw new nn(-301,!1);d.push(r[h],v)}}}(a,d,h)}a.mergedAttrs=Ir(a.mergedAttrs,a.attrs)}function xp(t,r,a,d,h,v){for(let q=0;q<d.length;q++)lg(Xd(a,r),t,d[q].type);!function U1(t,r,a){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+a,t.providerIndexes=r}(a,t.data.length,d.length);for(let q=0;q<d.length;q++){const J=d[q];J.providersResolver&&J.providersResolver(J)}let w=!1,S=!1,N=Fn(t,r,d.length,null);for(let q=0;q<d.length;q++){const J=d[q];a.mergedAttrs=Ir(a.mergedAttrs,J.hostAttrs),FE(t,a,r,N,J),B1(N,J,h),null!==J.contentQueries&&(a.flags|=4),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(a.flags|=64);const de=J.type.prototype;!w&&(de.ngOnChanges||de.ngOnInit||de.ngDoCheck)&&((t.preOrderHooks??=[]).push(a.index),w=!0),!S&&(de.ngOnChanges||de.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(a.index),S=!0),N++}!function V1(t,r,a){const h=r.directiveEnd,v=t.data,w=r.attrs,S=[];let N=null,q=null;for(let J=r.directiveStart;J<h;J++){const de=v[J],xe=a?a.get(de):null,rt=xe?xe.outputs:null;N=Tp(0,de.inputs,J,N,xe?xe.inputs:null),q=Tp(1,de.outputs,J,q,rt);const Mt=null===N||null===w||hn(r)?null:LE(N,J,w);S.push(Mt)}null!==N&&(N.hasOwnProperty("class")&&(r.flags|=8),N.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=S,r.inputs=N,r.outputs=q}(t,a,v)}function $g(t,r,a){const d=a.directiveStart,h=a.directiveEnd,v=a.index,w=function I0(){return or.lFrame.currentDirectiveIndex}();try{Ju(v);for(let S=d;S<h;S++){const N=t.data[S],q=r[S];Hh(S),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&uv(N,q)}}finally{Ju(-1),Hh(w)}}function uv(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function zg(t,r,a){r.componentOffset=a,(t.components??=[]).push(r.index)}function B1(t,r,a){if(a){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)a[r.exportAs[d]]=t;Ca(r)&&(a[""]=t)}}function FE(t,r,a,d,h){t.data[d]=h;const v=h.factory||(h.factory=ao(h.type)),w=new id(v,Ca(h),Le);t.blueprint[d]=w,a[d]=w,function NE(t,r,a,d,h){const v=h.hostBindings;if(v){let w=t.hostBindingOpCodes;null===w&&(w=t.hostBindingOpCodes=[]);const S=~r.index;(function kE(t){let r=t.length;for(;r>0;){const a=t[--r];if("number"==typeof a&&a<0)return a}return 0})(w)!=S&&w.push(S),w.push(a,d,v)}}(t,r,d,Fn(t,a,h.hostVars,X),h)}function il(t,r,a,d,h,v){const w=Ji(t,r);!function Wg(t,r,a,d,h,v,w){if(null==v)t.removeAttribute(r,h,a);else{const S=null==w?zn(v):w(v,d||"",h);t.setAttribute(r,h,S,a)}}(r[nr],w,v,t.value,a,d,h)}function H1(t,r,a,d,h,v){const w=v[r];if(null!==w)for(let S=0;S<w.length;)Ut(d,a,w[S++],w[S++],w[S++],w[S++])}function LE(t,r,a){let d=null,h=0;for(;h<a.length;){const v=a[h];if(0!==v)if(5!==v){if("number"==typeof v)break;if(t.hasOwnProperty(v)){null===d&&(d=[]);const w=t[v];for(let S=0;S<w.length;S+=3)if(w[S]===r){d.push(v,w[S+1],w[S+2],a[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function M_(t,r,a,d){return[t,!0,0,r,null,d,null,a,null,null]}function O_(t,r){const a=t.contentQueries;if(null!==a){const d=Ee(null);try{for(let h=0;h<a.length;h+=2){const w=a[h+1];if(-1!==w){const S=t.data[w];Uf(a[h]),S.contentQueries(2,r[w],w)}}}finally{Ee(d)}}}function Sp(t,r){return t[Xl]?t[nc][ms]=r:t[Xl]=r,t[nc]=r,r}function sa(t,r,a){Uf(0);const d=Ee(null);try{r(t,a)}finally{Ee(d)}}function qg(t){return t[vl]??=[]}function fv(t){return t.cleanup??=[]}function P_(t,r){const a=t[Pi],d=a?a.get(Su,null):null;d&&d.handleError(r)}function mh(t,r,a,d,h){for(let v=0;v<a.length;){const w=a[v++],S=a[v++],N=a[v++];Ut(t.data[w],r[w],d,S,N,h)}}function Nl(t,r,a){const d=ic(r,t);!function pn(t,r,a){t.setValue(r,a)}(t[nr],d,a)}function G1(t,r){const a=gr(r,t),d=a[qt];!function pv(t,r){for(let a=r.length;a<t.blueprint.length;a++)r.push(t.blueprint[a])}(d,a);const h=a[Ui];null!==h&&null===a[vs]&&(a[vs]=Mg(h,a[Pi])),gv(d,a,a[Ii])}function gv(t,r,a){Jp(r);try{const d=t.viewQuery;null!==d&&sa(1,d,a);const h=t.template;null!==h&&yr(t,r,h,1,a),t.firstCreatePass&&(t.firstCreatePass=!1),r[go]?.finishViewCreation(t),t.staticContentQueries&&O_(t,r),t.staticViewQueries&&sa(2,t.viewQuery,a);const v=t.components;null!==v&&function VE(t,r){for(let a=0;a<r.length;a++)G1(t,r[a])}(r,v)}catch(d){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),d}finally{r[Rn]&=-5,eg()}}function hf(t,r,a,d){const h=Ee(null);try{const v=r.tView,N=Gt(t,v,a,4096&t[Rn]?4096:16,null,r,null,null,d?.injector??null,d?.embeddedViewInjector??null,d?.dehydratedView??null);N[Qu]=t[r.index];const J=t[go];return null!==J&&(N[go]=J.createEmbeddedView(v)),gv(v,N,a),N}finally{Ee(h)}}function mv(t,r){const a=mo+r;if(a<t.length)return t[a]}function pf(t,r){return!r||null===r.firstChild||op(t)}function kl(t,r,a,d=!0){const h=r[qt];if(function _d(t,r,a,d){const h=mo+d,v=a.length;d>0&&(a[h-1][ms]=r),d<v-mo?(r[ms]=a[h],Yi(a,mo+d,r)):(a.push(r),r[ms]=null),r[wo]=a;const w=r[Qu];null!==w&&a!==w&&Ug(w,r);const S=r[go];null!==S&&S.insertView(t),Wp(r),r[Rn]|=128}(h,r,t,a),d){const w=L1(a,t),S=r[nr],N=sv(S,t[Tc]);null!==N&&function fi(t,r,a,d,h,v){d[Ui]=h,d[_s]=r,o(t,d,a,1,h,v)}(h,t[_s],S,r,N,w)}const v=r[vs];null!==v&&null!==v.firstChild&&(v.firstChild=null)}function Kg(t,r){const a=ff(t,r);return void 0!==a&&ov(a[qt],a),a}function _h(t,r,a,d,h=!1){for(;null!==a;){const v=r[a.index];null!==v&&d.push(Nr(v)),ks(v)&&gf(v,d);const w=a.type;if(8&w)_h(t,r,a.child,d);else if(32&w){const S=at(a,r);let N;for(;N=S();)d.push(N)}else if(16&w){const S=F1(r,a);if(Array.isArray(S))d.push(...S);else{const N=Tu(r[Ai]);_h(N[qt],N,S,d,!0)}}a=h?a.projectionNext:a.next}return d}function gf(t,r){for(let a=mo;a<t.length;a++){const d=t[a],h=d[qt].firstChild;null!==h&&_h(d[qt],d,h,r)}t[Tc]!==t[Ui]&&r.push(t[Tc])}let _v=[];const z1={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ed(t.lView)},consumerOnSignalRead(){this.lView[rc]=this}},lc=100;function Qg(t,r=!0,a=0){const d=t[Ni],h=d.rendererFactory;h.begin?.();try{!function Yg(t,r){const a=Vh();try{Bh(!0),k_(t,r);let d=0;for(;Jl(t);){if(d===lc)throw new nn(103,!1);d++,k_(t,1)}}finally{Bh(a)}}(t,a)}catch(w){throw r&&P_(t,w),w}finally{h.end?.(),d.inlineEffectRunner?.flush()}}function BE(t,r,a,d){const h=r[Rn];if(!(256&~h))return;r[Ni].inlineEffectRunner?.flush(),Jp(r);let S=null,N=null;(function UE(t){return 2!==t.type})(t)&&(N=function N_(t){return t[rc]??function $1(t){const r=_v.pop()??Object.create(z1);return r.lView=t,r}(t)}(r),S=function Bt(t){return t&&(t.nextProducerIndex=0),Ee(t)}(N));try{Tm(r),function eo(t){return or.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==a&&yr(t,r,a,2,d);const q=!(3&~h);if(q){const xe=t.preOrderCheckHooks;null!==xe&&Wh(r,xe,null)}else{const xe=t.preOrderHooks;null!==xe&&Wd(r,xe,0,null),rg(r,0)}if(function jE(t){for(let r=Ag(t);null!==r;r=bg(r)){if(!(r[Rn]&wl.HasTransplantedViews))continue;const a=r[Qc];for(let d=0;d<a.length;d++)kh(a[d])}}(r),vh(r,0),null!==t.contentQueries&&O_(t,r),q){const xe=t.contentCheckHooks;null!==xe&&Wh(r,xe)}else{const xe=t.contentHooks;null!==xe&&Wd(r,xe,1),rg(r,1)}!function Jt(t,r){const a=t.hostBindingOpCodes;if(null!==a)try{for(let d=0;d<a.length;d++){const h=a[d];if(h<0)Ju(~h);else{const v=h,w=a[++d],S=a[++d];jh(w,v),S(2,r[v])}}}finally{Ju(-1)}}(t,r);const J=t.components;null!==J&&F_(r,J,0);const de=t.viewQuery;if(null!==de&&sa(2,de,d),q){const xe=t.viewCheckHooks;null!==xe&&Wh(r,xe)}else{const xe=t.viewHooks;null!==xe&&Wd(r,xe,2),rg(r,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[Au]){for(const xe of r[Au])xe();r[Au]=null}r[Rn]&=-73}catch(q){throw ed(r),q}finally{null!==N&&(function Kt(t,r){if(Ee(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(_t(t))for(let a=t.nextProducerIndex;a<t.producerNode.length;a++)It(t.producerNode[a],t.producerIndexOfThis[a]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(N,S),function Xg(t){t.lView[rc]!==t&&(t.lView=null,_v.push(t))}(N)),eg()}}function vh(t,r){for(let a=Ag(t);null!==a;a=bg(a))for(let d=mo;d<a.length;d++)Zg(a[d],r)}function HE(t,r,a){Zg(gr(r,t),a)}function Zg(t,r){kf(t)&&k_(t,r)}function k_(t,r){const d=t[qt],h=t[Rn],v=t[rc];let w=!!(0===r&&16&h);if(w||=!!(64&h&&0===r),w||=!!(1024&h),w||=!(!v?.dirty||!An(v)),w||=!1,v&&(v.dirty=!1),t[Rn]&=-9217,w)BE(d,t,d.template,t[Ii]);else if(8192&h){vh(t,1);const S=d.components;null!==S&&F_(t,S,1)}}function F_(t,r,a){for(let d=0;d<r.length;d++)HE(t,r[d],a)}function mf(t,r){const a=Vh()?64:1088;for(t[Ni].changeDetectionScheduler?.notify(r);t;){t[Rn]|=a;const d=Tu(t);if(xc(t)&&!d)return t;t=d}return null}class Pu{get rootNodes(){const r=this._lView,a=r[qt];return _h(a,r,a.firstChild,[])}constructor(r,a,d=!0){this._lView=r,this._cdRefInjectingView=a,this.notifyErrorHandler=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ii]}set context(r){this._lView[Ii]=r}get destroyed(){return!(256&~this._lView[Rn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[wo];if(ks(r)){const a=r[8],d=a?a.indexOf(this):-1;d>-1&&(ff(r,d),Hu(a,d))}this._attachedToViewContainer=!1}ov(this._lView[qt],this._lView)}onDestroy(r){Ko(this._lView,r)}markForCheck(){mf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Rn]&=-129}reattach(){Wp(this._lView),this._lView[Rn]|=128}detectChanges(){this._lView[Rn]|=1024,Qg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new nn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const r=xc(this._lView),a=this._lView[Qu];null!==a&&!r&&Ap(a,this._lView),Ao(this._lView[qt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new nn(902,!1);this._appRef=r;const a=xc(this._lView),d=this._lView[Qu];null!==d&&!a&&Ug(d,this._lView),Wp(this._lView)}}let Rp=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yv}return t})();const W1=Rp,vv=class extends W1{constructor(r,a,d){super(),this._declarationLView=r,this._declarationTContainer=a,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,a){return this.createEmbeddedViewImpl(r,a)}createEmbeddedViewImpl(r,a,d){const h=hf(this._declarationLView,this._declarationTContainer,r,{embeddedViewInjector:a,dehydratedView:d});return new Pu(h)}};function yv(){return Jg(me(),Rt())}function Jg(t,r){return 4&t.type?new vv(r,t,dd(t,r)):null}let Rv=()=>null;function yf(t,r){return Rv(t,r)}class Id{}const Ia=new cr("",{providedIn:"root",factory:()=>!1}),Mv=new cr("");class kp{}class I{}class ct{resolveComponentFactory(r){throw function $(t){const r=Error(`No component factory found for ${Tr(t)}.`);return r.ngComponent=t,r}(r)}}class Tt{static#e=this.NULL=new ct}class an{}let co=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Aa(){const t=Rt(),a=gr(me().index,t);return(Po(a)?a:t)[nr]}()}return t})(),Si=(()=>{class t{static#e=this.\u0275prov=Dn({token:t,providedIn:"root",factory:()=>null})}return t})();const aa={},wh=new Set;function Qo(t){wh.has(t)||(wh.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function mm(t){let r=!0;return setTimeout(()=>{r&&(r=!1,t())}),"function"==typeof Ei.requestAnimationFrame&&Ei.requestAnimationFrame(()=>{r&&(r=!1,t())}),()=>{r=!1}}function q_(t){let r=!0;return queueMicrotask(()=>{r&&t()}),()=>{r=!1}}function bw(...t){}class Yo{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ti(!1),this.onMicrotaskEmpty=new Ti(!1),this.onStable=new Ti(!1),this.onError=new Ti(!1),typeof Zone>"u")throw new nn(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&a,h.shouldCoalesceRunChangeDetection=d,h.callbackScheduled=!1,function _x(t){const r=()=>{!function mx(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{mm(()=>{t.callbackScheduled=!1,KE(t),t.isCheckStableRunning=!0,qE(t),t.isCheckStableRunning=!1})}),KE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,d,h,v,w,S)=>{if(function vx(t){return Sw(t,"__ignore_ng_zone__")}(S))return a.invokeTask(h,v,w,S);try{return Tw(t),a.invokeTask(h,v,w,S)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||t.shouldCoalesceRunChangeDetection)&&r(),xw(t)}},onInvoke:(a,d,h,v,w,S,N)=>{try{return Tw(t),a.invoke(h,v,w,S,N)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function yx(t){return Sw(t,"__scheduler_tick__")}(S)&&r(),xw(t)}},onHasTask:(a,d,h,v)=>{a.hasTask(h,v),d===h&&("microTask"==v.change?(t._hasPendingMicrotasks=v.microTask,KE(t),qE(t)):"macroTask"==v.change&&(t.hasPendingMacrotasks=v.macroTask))},onHandleError:(a,d,h,v)=>(a.handleError(h,v),t.runOutsideAngular(()=>t.onError.emit(v)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yo.isInAngularZone())throw new nn(909,!1)}static assertNotInAngularZone(){if(Yo.isInAngularZone())throw new nn(909,!1)}run(r,a,d){return this._inner.run(r,a,d)}runTask(r,a,d,h){const v=this._inner,w=v.scheduleEventTask("NgZoneEvent: "+h,r,gx,bw,bw);try{return v.runTask(w,a,d)}finally{v.cancelTask(w)}}runGuarded(r,a,d){return this._inner.runGuarded(r,a,d)}runOutsideAngular(r){return this._outer.run(r)}}const gx={};function qE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function KE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function Tw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xw(t){t._nesting--,qE(t)}class XE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ti,this.onMicrotaskEmpty=new Ti,this.onStable=new Ti,this.onError=new Ti}run(r,a,d){return r.apply(a,d)}runGuarded(r,a,d){return r.apply(a,d)}runOutsideAngular(r){return r()}runTask(r,a,d,h){return r.apply(a,d)}}function Sw(t,r){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[r]}var _m=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(_m||{});const Dw={destroy(){}};function Rw(t,r){!r&&function tc(t){if(!xh())throw new nn(-203,!1)}();const a=r?.injector??mn(Ls);if(!function b(t){return"browser"===(t??mn(Ls)).get(sf)}(a))return Dw;Qo("NgAfterNextRender");const d=a.get(Ov),h=d.handler??=new Ow,v=r?.phase??_m.MixedReadWrite,w=()=>{h.unregister(N),S()},S=a.get(br).onDestroy(w),N=bc(a,()=>new Mw(v,()=>{w(),t()}));return h.register(N),{destroy:w}}class Mw{constructor(r,a){this.phase=r,this.callbackFn=a,this.zone=mn(Yo),this.errorHandler=mn(Su,{optional:!0}),mn(Id,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(r){this.errorHandler?.handleError(r)}}}class Ow{constructor(){this.executingCallbacks=!1,this.buckets={[_m.EarlyRead]:new Set,[_m.Write]:new Set,[_m.MixedReadWrite]:new Set,[_m.Read]:new Set},this.deferredCallbacks=new Set}register(r){(this.executingCallbacks?this.deferredCallbacks:this.buckets[r.phase]).add(r)}unregister(r){this.buckets[r.phase].delete(r),this.deferredCallbacks.delete(r)}execute(){this.executingCallbacks=!0;for(const r of Object.values(this.buckets))for(const a of r)a.invoke();this.executingCallbacks=!1;for(const r of this.deferredCallbacks)this.buckets[r.phase].add(r);this.deferredCallbacks.clear()}destroy(){for(const r of Object.values(this.buckets))r.clear();this.deferredCallbacks.clear()}}let Ov=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const a=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const d of a)d()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Dn({token:t,providedIn:"root",factory:()=>new t})}return t})();function Fp(t){return!!ar(t)}function Iy(t,r,a){let d=a?t.styles:null,h=a?t.classes:null,v=0;if(null!==r)for(let w=0;w<r.length;w++){const S=r[w];"number"==typeof S?v=S:1==v?h=jo(h,S):2==v&&(d=jo(d,S+": "+r[++w]+";"))}a?t.styles=d:t.stylesWithoutHost=d,a?t.classes=h:t.classesWithoutHost=h}class kw extends Tt{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const a=Pt(r);return new kv(a,this.ngModule)}}function Fw(t){const r=[];for(const a in t){if(!t.hasOwnProperty(a))continue;const d=t[a];void 0!==d&&r.push({propName:Array.isArray(d)?d[0]:d,templateName:a})}return r}class Ay{constructor(r,a){this.injector=r,this.parentInjector=a}get(r,a,d){d=hs(d);const h=this.injector.get(r,aa,d);return h!==aa||a===aa?h:this.parentInjector.get(r,a,d)}}class kv extends I{get inputs(){const r=this.componentDef,a=r.inputTransforms,d=Fw(r.inputs);if(null!==a)for(const h of d)a.hasOwnProperty(h.propName)&&(h.transform=a[h.propName]);return d}get outputs(){return Fw(this.componentDef.outputs)}constructor(r,a){super(),this.componentDef=r,this.ngModule=a,this.componentType=r.type,this.selector=function R(t){return t.map($c).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!a}create(r,a,d,h){const v=Ee(null);try{let w=(h=h||this.ngModule)instanceof qo?h:h?.injector;w&&null!==this.componentDef.getStandaloneInjector&&(w=this.componentDef.getStandaloneInjector(w)||w);const S=w?new Ay(r,w):r,N=S.get(an,null);if(null===N)throw new nn(407,!1);const q=S.get(Si,null),xe={rendererFactory:N,sanitizer:q,inlineEffectRunner:null,afterRenderEventManager:S.get(Ov,null),changeDetectionScheduler:S.get(Id,null)},Ge=N.createRenderer(null,this.componentDef),rt=this.componentDef.selectors[0][0]||"div",Mt=d?function st(t,r,a,d){const v=d.get(q0,!1)||a===Fa.ShadowDom,w=t.selectRootElement(r,v);return function yt(t){He(t)}(w),w}(Ge,d,this.componentDef.encapsulation,S):ir(Ge,rt,function Ax(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(rt));let Qt=512;this.componentDef.signals?Qt|=4096:this.componentDef.onPush||(Qt|=16);let rn=null;null!==Mt&&(rn=Mg(Mt,S,!0));const Vt=ze(0,null,null,1,0,null,null,null,null,null,null),fr=Gt(null,Vt,null,Qt,null,null,xe,Ge,S,null,rn);let Di,vo;Jp(fr);try{const xa=this.componentDef;let ku,v0=null;xa.findHostDirectiveDefs?(ku=[],v0=new Map,xa.findHostDirectiveDefs(xa,ku,v0),ku.push(xa)):ku=[xa];const hx=function Tx(t,r){const a=t[qt],d=Pn;return t[d]=r,Mn(a,d,2,"#host",null)}(fr,Mt),DO=function xx(t,r,a,d,h,v,w){const S=h[qt];!function Sx(t,r,a,d){for(const h of t)r.mergedAttrs=Ir(r.mergedAttrs,h.hostAttrs);null!==r.mergedAttrs&&(Iy(r,r.mergedAttrs,!0),null!==a&&G(d,a,r))}(d,t,r,w);let N=null;null!==r&&(N=Mg(r,h[Pi]));const q=v.rendererFactory.createRenderer(r,a);let J=16;a.signals?J=4096:a.onPush&&(J=64);const de=Gt(h,Me(a),null,J,h[t.index],t,v,q,null,null,N);return S.firstCreatePass&&zg(S,t,d.length-1),Sp(h,de),h[t.index]=de}(hx,Mt,xa,ku,fr,xe,Ge);vo=Jc(Vt,Pn),Mt&&function Rx(t,r,a,d){if(d)Ic(t,a,["ng-version","18.0.2"]);else{const{attrs:h,classes:v}=function U(t){const r=[],a=[];let d=1,h=2;for(;d<t.length;){let v=t[d];if("string"==typeof v)2===h?""!==v&&r.push(v,t[++d]):8===h&&a.push(v);else{if(!Va(h))break;h=v}d++}return{attrs:r,classes:a}}(r.selectors[0]);h&&Ic(t,a,h),v&&v.length>0&&V(t,a,v.join(" "))}}(Ge,xa,Mt,d),void 0!==a&&function Mx(t,r,a){const d=t.projection=[];for(let h=0;h<r.length;h++){const v=a[h];d.push(null!=v?Array.from(v):null)}}(vo,this.ngContentSelectors,a),Di=function Dx(t,r,a,d,h,v){const w=me(),S=h[qt],N=Ji(w,h);xp(S,h,w,a,null,d);for(let J=0;J<a.length;J++)wa(cc(h,S,w.directiveStart+J,w),h);$g(S,h,w),N&&wa(N,h);const q=cc(h,S,w.directiveStart+w.componentOffset,w);if(t[Ii]=h[Ii]=q,null!==v)for(const J of v)J(q,r);return hi(S,w,h),q}(DO,xa,ku,v0,fr,[Ox]),gv(Vt,fr,null)}finally{eg()}return new bx(this.componentType,Di,dd(vo,fr),fr,vo)}finally{Ee(v)}}}class bx extends kp{constructor(r,a,d,h,v){super(),this.location=d,this._rootLView=h,this._tNode=v,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new Pu(h,void 0,!1),this.componentType=r}setInput(r,a){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),a))return;const v=this._rootLView;mh(v[qt],v,h,r,a),this.previousInputValues.set(r,a),mf(gr(this._tNode.index,v),1)}}get injector(){return new No(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Ox(){const t=me();jf(Rt()[qt],t)}let by=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Px}return t})();function Px(){return Bw(me(),Rt())}const Nx=by,Lw=class extends Nx{constructor(r,a,d){super(),this._lContainer=r,this._hostTNode=a,this._hostLView=d}get element(){return dd(this._hostTNode,this._hostLView)}get injector(){return new No(this._hostTNode,this._hostLView)}get parentInjector(){const r=Wf(this._hostTNode,this._hostLView);if(ou(r)){const a=sd(r,this._hostLView),d=od(r);return new No(a[qt].data[d+8],a)}return new No(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const a=Vw(this._lContainer);return null!==a&&a[r]||null}get length(){return this._lContainer.length-mo}createEmbeddedView(r,a,d){let h,v;"number"==typeof d?h=d:null!=d&&(h=d.index,v=d.injector);const w=yf(this._lContainer,r.ssrId),S=r.createEmbeddedViewImpl(a||{},v,w);return this.insertImpl(S,h,pf(this._hostTNode,w)),S}createComponent(r,a,d,h,v){const w=r&&!function Kc(t){return"function"==typeof t}(r);let S;if(w)S=a;else{const rt=a||{};S=rt.index,d=rt.injector,h=rt.projectableNodes,v=rt.environmentInjector||rt.ngModuleRef}const N=w?r:new kv(Pt(r)),q=d||this.parentInjector;if(!v&&null==N.ngModule){const Mt=(w?q:this.parentInjector).get(qo,null);Mt&&(v=Mt)}const J=Pt(N.componentType??{}),de=yf(this._lContainer,J?.id??null),Ge=N.create(q,h,de?.firstChild??null,v);return this.insertImpl(Ge.hostView,S,pf(this._hostTNode,de)),Ge}insert(r,a){return this.insertImpl(r,a,!0)}insertImpl(r,a,d){const h=r._lView;if(function Sl(t){return ks(t[wo])}(h)){const S=this.indexOf(r);if(-1!==S)this.detach(S);else{const N=h[wo],q=new Lw(N,N[_s],N[wo]);q.detach(q.indexOf(r))}}const v=this._adjustIndex(a),w=this._lContainer;return kl(w,h,v,d),r.attachToViewContainerRef(),Yi(JE(w),v,r),r}move(r,a){return this.insert(r,a)}indexOf(r){const a=Vw(this._lContainer);return null!==a?a.indexOf(r):-1}remove(r){const a=this._adjustIndex(r,-1),d=ff(this._lContainer,a);d&&(Hu(JE(this._lContainer),a),ov(d[qt],d))}detach(r){const a=this._adjustIndex(r,-1),d=ff(this._lContainer,a);return d&&null!=Hu(JE(this._lContainer),a)?new Pu(d):null}_adjustIndex(r,a=0){return r??this.length+a}};function Vw(t){return t[8]}function JE(t){return t[8]||(t[8]=[])}function Bw(t,r){let a;const d=r[t.index];return ks(d)?a=d:(a=M_(d,r,null,t),r[t.index]=a,Sp(r,a)),Uw(a,r,t,d),new Lw(a,t,r)}let Uw=function Hw(t,r,a,d){if(t[Tc])return;let h;h=8&a.type?Nr(d):function kx(t,r){const a=t[nr],d=a.createComment(""),h=Ji(r,t);return bp(a,sv(a,h),d,function bE(t,r){return t.nextSibling(r)}(a,h),!1),d}(r,a),t[Tc]=h},eC=()=>!1;class tC{constructor(r){this.queryList=r,this.matches=null}clone(){return new tC(this.queryList)}setDirty(){this.queryList.setDirty()}}class nC{constructor(r=[]){this.queries=r}createEmbeddedView(r){const a=r.queries;if(null!==a){const d=null!==r.contentQueries?r.contentQueries[0]:a.length,h=[];for(let v=0;v<d;v++){const w=a.getByIndex(v);h.push(this.queries[w.indexInDeclarationView].clone())}return new nC(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}finishViewCreation(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let a=0;a<this.queries.length;a++)null!==aC(r,a).matches&&this.queries[a].setDirty()}}class Gw{constructor(r,a,d=null){this.flags=a,this.read=d,this.predicate="string"==typeof r?function Gx(t){return t.split(",").map(r=>r.trim())}(r):r}}class rC{constructor(r=[]){this.queries=r}elementStart(r,a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,a)}elementEnd(r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(r)}embeddedTView(r){let a=null;for(let d=0;d<this.length;d++){const h=null!==a?a.length:0,v=this.getByIndex(d).embeddedTView(r,h);v&&(v.indexInDeclarationView=d,null!==a?a.push(v):a=[v])}return null!==a?new rC(a):null}template(r,a){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,a)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class iC{constructor(r,a=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(r,a){this.isApplyingToNode(a)&&this.matchTNode(r,a)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,a){this.elementStart(r,a)}embeddedTView(r,a){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,a),new iC(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1&~this.metadata.flags){const a=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==a;)d=d.parent;return a===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,a){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const v=d[h];this.matchTNodeWithReadOption(r,a,Bx(a,v)),this.matchTNodeWithReadOption(r,a,Yh(a,r,v,!1,!1))}else d===Rp?4&a.type&&this.matchTNodeWithReadOption(r,a,-1):this.matchTNodeWithReadOption(r,a,Yh(a,r,d,!1,!1))}matchTNodeWithReadOption(r,a,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Jd||h===by||h===Rp&&4&a.type)this.addMatch(a.index,-2);else{const v=Yh(a,r,h,!1,!1);null!==v&&this.addMatch(a.index,v)}else this.addMatch(a.index,d)}}addMatch(r,a){null===this.matches?this.matches=[r,a]:this.matches.push(r,a)}}function Bx(t,r){const a=t.localNames;if(null!==a)for(let d=0;d<a.length;d+=2)if(a[d]===r)return a[d+1];return null}function jx(t,r,a,d){return-1===a?function Ux(t,r){return 11&t.type?dd(t,r):4&t.type?Jg(t,r):null}(r,t):-2===a?function Hx(t,r,a){return a===Jd?dd(r,t):a===Rp?Jg(r,t):a===by?Bw(r,t):void 0}(t,r,d):cc(t,t[qt],a,r)}function $w(t,r,a,d){const h=r[go].queries[d];if(null===h.matches){const v=t.data,w=a.matches,S=[];for(let N=0;null!==w&&N<w.length;N+=2){const q=w[N];S.push(q<0?null:jx(r,v[q],w[N+1],a.metadata.read))}h.matches=S}return h.matches}function oC(t,r,a,d){const h=t.queries.getByIndex(a),v=h.matches;if(null!==v){const w=$w(t,r,h,a);for(let S=0;S<v.length;S+=2){const N=v[S];if(N>0)d.push(w[S/2]);else{const q=v[S+1],J=r[-N];for(let de=mo;de<J.length;de++){const xe=J[de];xe[Qu]===xe[wo]&&oC(xe[qt],xe,q,d)}if(null!==J[Qc]){const de=J[Qc];for(let xe=0;xe<de.length;xe++){const Ge=de[xe];oC(Ge[qt],Ge,q,d)}}}}}return d}function zw(t,r,a){const d=new rp(!(4&~a));return function ME(t,r,a,d){const h=qg(r);h.push(a),t.firstCreatePass&&fv(t).push(d,h.length-1)}(t,r,d,d.destroy),(r[go]??=new nC).queries.push(new tC(d))-1}function Kw(t,r,a){null===t.queries&&(t.queries=new rC),t.queries.track(new iC(r,a))}function aC(t,r){return t.queries.getByIndex(r)}function Xw(t,r){const a=t[qt],d=aC(a,r);return d.crossesNgTemplate?oC(a,t,r,[]):$w(a,t,d,r)}function Zw(t){return function Qw(t){return"function"==typeof t&&void 0!==t[Ze]}(t)&&"function"==typeof t.set}function uC(t){let r=function uI(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),a=!0;const d=[t];for(;r;){let h;if(Ca(t))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new nn(903,!1);h=r.\u0275dir}if(h){if(a){d.push(h);const w=t;w.inputs=xy(t.inputs),w.inputTransforms=xy(t.inputTransforms),w.declaredInputs=xy(t.declaredInputs),w.outputs=xy(t.outputs);const S=h.hostBindings;S&&oS(t,S);const N=h.viewQuery,q=h.contentQueries;if(N&&rS(t,N),q&&iS(t,q),tS(t,h),Bc(t.outputs,h.outputs),Ca(h)&&h.data.animation){const J=t.data;J.animation=(J.animation||[]).concat(h.data.animation)}}const v=h.features;if(v)for(let w=0;w<v.length;w++){const S=v[w];S&&S.ngInherit&&S(t),S===uC&&(a=!1)}}r=Object.getPrototypeOf(r)}!function nS(t){let r=0,a=null;for(let d=t.length-1;d>=0;d--){const h=t[d];h.hostVars=r+=h.hostVars,h.hostAttrs=Ir(h.hostAttrs,a=Ir(a,h.hostAttrs))}}(d)}function tS(t,r){for(const a in r.inputs){if(!r.inputs.hasOwnProperty(a)||t.inputs.hasOwnProperty(a))continue;const d=r.inputs[a];if(void 0!==d&&(t.inputs[a]=d,t.declaredInputs[a]=r.declaredInputs[a],null!==r.inputTransforms)){const h=Array.isArray(d)?d[0]:d;if(!r.inputTransforms.hasOwnProperty(h))continue;t.inputTransforms??={},t.inputTransforms[h]=r.inputTransforms[h]}}}function xy(t){return t===pi?{}:t===Pr?[]:t}function rS(t,r){const a=t.viewQuery;t.viewQuery=a?(d,h)=>{r(d,h),a(d,h)}:r}function iS(t,r){const a=t.contentQueries;t.contentQueries=a?(d,h,v)=>{r(d,h,v),a(d,h,v)}:r}function oS(t,r){const a=t.hostBindings;t.hostBindings=a?(d,h)=>{r(d,h),a(d,h)}:r}function hI(t){const r=t.inputConfig,a={};for(const d in r)if(r.hasOwnProperty(d)){const h=r[d];Array.isArray(h)&&h[3]&&(a[d]=h[3])}t.inputTransforms=a}class vm{}class pI{}function dS(t,r){return new lC(t,r??null,[])}class lC extends vm{constructor(r,a,d){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kw(this);const h=ar(r);this._bootstrapComponents=y(h.bootstrap),this._r3Injector=gg(r,a,[{provide:vm,useValue:this},{provide:Tt,useValue:this.componentFactoryResolver},...d],Tr(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class dC extends pI{constructor(r){super(),this.moduleType=r}create(r){return new lC(this.moduleType,r,[])}}class gI extends vm{constructor(r){super(),this.componentFactoryResolver=new kw(this),this.instance=null;const a=new Ac([...r.providers,{provide:vm,useValue:this},{provide:Tt,useValue:this.componentFactoryResolver}],r.parent||Ku(),r.debugName,new Set(["environment"]));this.injector=a,r.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function fC(t,r,a=null){return new gI({providers:t,parent:r,debugName:a,runEnvironmentInitializers:!0}).injector}let ym=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qr.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Dn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Dy(t){return!!hC(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function hC(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ef(t,r,a){return t[r]=a}function Js(t,r,a){return!Object.is(t[r],a)&&(t[r]=a,!0)}function Em(t,r,a,d){const h=Js(t,r,a);return Js(t,r+1,d)||h}function Ry(t,r,a,d,h){const v=Em(t,r,a,d);return Js(t,r+2,h)||v}function Vv(t,r,a,d,h,v,w,S,N,q){const J=a+Pn,de=r.firstCreatePass?function vS(t,r,a,d,h,v,w,S,N){const q=r.consts,J=Mn(r,t,4,w||null,S||null);cv(r,a,J,sc(q,N)),jf(r,J);const de=J.tView=ze(2,J,d,h,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,q,null);return null!==r.queries&&(r.queries.template(r,J),de.queries=r.queries.embeddedTView(J)),J}(J,r,t,d,h,v,w,S,N):r.data[J];Fs(de,!1);const xe=_I(r,t,de,a);rd()&&av(r,t,xe,de),wa(xe,t);const Ge=M_(xe,t,xe,de);return t[J]=Ge,Sp(t,Ge),function jw(t,r,a){return eC(t,r,a)}(Ge,de,t),Ql(de)&&Fr(r,t,de),null!=N&&et(t,de,q),de}function pC(t,r,a,d,h,v,w,S){const N=Rt(),q=Vr();return Vv(N,q,t,r,a,d,h,sc(q.consts,v),w,S),pC}let _I=function vI(t,r,a,d){return iu(!0),r[nr].createComment("")};function AC(t,r,a,d){const h=Rt();return Js(h,nu(),r)&&(Vr(),il(ji(),h,t,r,a,d)),AC}function r0(t,r,a,d){return Js(t,nu(),a)?r+zn(a)+d:X}function o0(t,r,a,d,h,v){const S=Em(t,tu(),a,h);return ru(2),S?r+zn(a)+d+zn(h)+v:X}function Fy(t,r){return t<<17|r<<2}function Bp(t){return t>>17&32767}function bC(t){return 2|t}function wm(t){return(131068&t)>>2}function TC(t,r){return-131069&t|r<<2}function xC(t){return 1|t}function XI(t,r,a,d){const h=t[a+1],v=null===r;let w=d?Bp(h):wm(h),S=!1;for(;0!==w&&(!1===S||v);){const q=t[w+1];iD(t[w],r)&&(S=!0,t[w+1]=d?xC(q):bC(q)),w=d?Bp(q):wm(q)}S&&(t[a+1]=d?bC(h):xC(h))}function iD(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Gc(t,r)>=0}const ba={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function QI(t){return t.substring(ba.key,ba.keyEnd)}function YI(t,r){const a=ba.textEnd;return a===r?-1:(r=ba.keyEnd=function cD(t,r,a){for(;r<a&&t.charCodeAt(r)>32;)r++;return r}(t,ba.key=r,a),f0(t,r,a))}function f0(t,r,a){for(;r<a&&t.charCodeAt(r)<=32;)r++;return r}function SC(t,r,a){const d=Rt();return Js(d,nu(),r)&&ws(Vr(),ji(),d,t,r,d[nr],a,!1),SC}function DC(t,r,a,d,h){const w=h?"class":"style";mh(t,a,r.inputs[w],w,d)}function RC(t,r,a){return Ad(t,r,a,!1),RC}function MC(t,r){return Ad(t,r,null,!0),MC}function nA(t){bd(_D,wf,t,!0)}function wf(t,r){for(let a=function sD(t){return function JI(t){ba.key=0,ba.keyEnd=0,ba.value=0,ba.valueEnd=0,ba.textEnd=t.length}(t),YI(t,f0(t,0,ba.textEnd))}(r);a>=0;a=YI(r,a))Wo(t,QI(r),!0)}function Ad(t,r,a,d){const h=Rt(),v=Vr(),w=ru(2);v.firstUpdatePass&&iA(v,t,w,d),r!==X&&Js(h,w,r)&&sA(v,v.data[Xs()],h,h[nr],t,h[w+1]=function yD(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Tr(Zs(t)))),t}(r,a),d,w)}function bd(t,r,a,d){const h=Vr(),v=ru(2);h.firstUpdatePass&&iA(h,null,v,d);const w=Rt();if(a!==X&&Js(w,v,a)){const S=h.data[Xs()];if(cA(S,d)&&!rA(h,v)){let N=d?S.classesWithoutHost:S.stylesWithoutHost;null!==N&&(a=jo(N,a||"")),DC(h,S,w,a,d)}else!function vD(t,r,a,d,h,v,w,S){h===X&&(h=Pr);let N=0,q=0,J=0<h.length?h[0]:null,de=0<v.length?v[0]:null;for(;null!==J||null!==de;){const xe=N<h.length?h[N+1]:void 0,Ge=q<v.length?v[q+1]:void 0;let Mt,rt=null;J===de?(N+=2,q+=2,xe!==Ge&&(rt=de,Mt=Ge)):null===de||null!==J&&J<de?(N+=2,rt=J):(q+=2,rt=de,Mt=Ge),null!==rt&&sA(t,r,a,d,rt,Mt,w,S),J=N<h.length?h[N]:null,de=q<v.length?v[q]:null}}(h,S,w,w[nr],w[v+1],w[v+1]=function mD(t,r,a){if(null==a||""===a)return Pr;const d=[],h=Zs(a);if(Array.isArray(h))for(let v=0;v<h.length;v++)t(d,h[v],!0);else if("object"==typeof h)for(const v in h)h.hasOwnProperty(v)&&t(d,v,h[v]);else"string"==typeof h&&r(d,h);return d}(t,r,a),d,v)}}function rA(t,r){return r>=t.expandoStartIndex}function iA(t,r,a,d){const h=t.data;if(null===h[a+1]){const v=h[Xs()],w=rA(t,a);cA(v,d)&&null===r&&!w&&(r=!1),r=function fD(t,r,a,d){const h=function Yp(t){const r=or.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let v=d?r.residualClasses:r.residualStyles;if(null===h)0===(d?r.classBindings:r.styleBindings)&&(a=Hv(a=OC(null,t,r,a,d),r.attrs,d),v=null);else{const w=r.directiveStylingLast;if(-1===w||t[w]!==h)if(a=OC(h,t,r,a,d),null===v){let N=function hD(t,r,a){const d=a?r.classBindings:r.styleBindings;if(0!==wm(d))return t[Bp(d)]}(t,r,d);void 0!==N&&Array.isArray(N)&&(N=OC(null,t,r,N[1],d),N=Hv(N,r.attrs,d),function pD(t,r,a,d){t[Bp(a?r.classBindings:r.styleBindings)]=d}(t,r,d,N))}else v=function gD(t,r,a){let d;const h=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<h;v++)d=Hv(d,t[v].hostAttrs,a);return Hv(d,r.attrs,a)}(t,r,d)}return void 0!==v&&(d?r.residualClasses=v:r.residualStyles=v),a}(h,v,r,d),function nD(t,r,a,d,h,v){let w=v?r.classBindings:r.styleBindings,S=Bp(w),N=wm(w);t[d]=a;let J,q=!1;if(Array.isArray(a)?(J=a[1],(null===J||Gc(a,J)>0)&&(q=!0)):J=a,h)if(0!==N){const xe=Bp(t[S+1]);t[d+1]=Fy(xe,S),0!==xe&&(t[xe+1]=TC(t[xe+1],d)),t[S+1]=function eD(t,r){return 131071&t|r<<17}(t[S+1],d)}else t[d+1]=Fy(S,0),0!==S&&(t[S+1]=TC(t[S+1],d)),S=d;else t[d+1]=Fy(N,0),0===S?S=d:t[N+1]=TC(t[N+1],d),N=d;q&&(t[d+1]=bC(t[d+1])),XI(t,J,d,!0),XI(t,J,d,!1),function rD(t,r,a,d,h){const v=h?t.residualClasses:t.residualStyles;null!=v&&"string"==typeof r&&Gc(v,r)>=0&&(a[d+1]=xC(a[d+1]))}(r,J,t,d,v),w=Fy(S,N),v?r.classBindings=w:r.styleBindings=w}(h,v,r,a,w,d)}}function OC(t,r,a,d,h){let v=null;const w=a.directiveEnd;let S=a.directiveStylingLast;for(-1===S?S=a.directiveStart:S++;S<w&&(v=r[S],d=Hv(d,v.hostAttrs,h),v!==t);)S++;return null!==t&&(a.directiveStylingLast=S),d}function Hv(t,r,a){const d=a?1:2;let h=-1;if(null!==r)for(let v=0;v<r.length;v++){const w=r[v];"number"==typeof w?h=w:h===d&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Wo(t,w,!!a||r[++v]))}return void 0===t?null:t}function _D(t,r,a){const d=String(r);""!==d&&!d.includes(" ")&&Wo(t,d,a)}function sA(t,r,a,d,h,v,w,S){if(!(3&r.type))return;const N=t.data,q=N[S+1],J=function tD(t){return!(1&~t)}(q)?aA(N,r,a,h,wm(q),w):void 0;Ly(J)||(Ly(v)||function JS(t){return!(2&~t)}(q)&&(v=aA(N,null,a,h,S,w)),function C(t,r,a,d,h){if(r)h?t.addClass(a,d):t.removeClass(a,d);else{let v=-1===d.indexOf("-")?void 0:Ne.DashCase;null==h?t.removeStyle(a,d,v):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),v|=Ne.Important),t.setStyle(a,d,h,v))}}(d,w,ic(Xs(),a),h,v))}function aA(t,r,a,d,h,v){const w=null===r;let S;for(;h>0;){const N=t[h],q=Array.isArray(N),J=q?N[1]:N,de=null===J;let xe=a[h+1];xe===X&&(xe=de?Pr:void 0);let Ge=de?Os(xe,d):J===d?xe:void 0;if(q&&!Ly(Ge)&&(Ge=Os(N,d)),Ly(Ge)&&(S=Ge,w))return S;const rt=t[h+1];h=w?Bp(rt):wm(rt)}if(null!==r){let N=v?r.residualClasses:r.residualStyles;null!=N&&(S=Os(N,d))}return S}function Ly(t){return void 0!==t}function cA(t,r){return!!(t.flags&(r?8:16))}function uA(t,r,a){bd(Wo,wf,r0(Rt(),t,r,a),!0)}function lA(t,r,a,d,h){bd(Wo,wf,o0(Rt(),t,r,a,d,h),!0)}function dA(t,r,a,d,h,v,w){bd(Wo,wf,function s0(t,r,a,d,h,v,w,S){const q=Ry(t,tu(),a,h,w);return ru(3),q?r+zn(a)+d+zn(h)+v+zn(w)+S:X}(Rt(),t,r,a,d,h,v,w),!0)}class xD{destroy(r){}updateValue(r,a){}swap(r,a){const d=Math.min(r,a),h=Math.max(r,a),v=this.detach(h);if(h-d>1){const w=this.detach(d);this.attach(d,v),this.attach(h,w)}else this.attach(d,v)}move(r,a){this.attach(a,this.detach(r))}}function PC(t,r,a,d,h){return t===a&&Object.is(r,d)?1:Object.is(h(t,r),h(a,d))?-1:0}function NC(t,r,a,d){return!(void 0===r||!r.has(d)||(t.attach(a,r.get(d)),r.delete(d),0))}function fA(t,r,a,d,h){if(NC(t,r,d,a(d,h)))t.updateValue(d,h);else{const v=t.create(d,h);t.attach(d,v)}}function hA(t,r,a,d){const h=new Set;for(let v=r;v<=a;v++)h.add(d(v,t.at(v)));return h}class pA{constructor(){this.kvMap=new Map,this._vMap=void 0}has(r){return this.kvMap.has(r)}delete(r){if(!this.has(r))return!1;const a=this.kvMap.get(r);return void 0!==this._vMap&&this._vMap.has(a)?(this.kvMap.set(r,this._vMap.get(a)),this._vMap.delete(a)):this.kvMap.delete(r),!0}get(r){return this.kvMap.get(r)}set(r,a){if(this.kvMap.has(r)){let d=this.kvMap.get(r);void 0===this._vMap&&(this._vMap=new Map);const h=this._vMap;for(;h.has(d);)d=h.get(d);h.set(d,a)}else this.kvMap.set(r,a)}forEach(r){for(let[a,d]of this.kvMap)if(r(d,a),void 0!==this._vMap){const h=this._vMap;for(;h.has(d);)d=h.get(d),r(d,a)}}}function gA(t,r){Qo("NgControlFlow");const a=Rt(),d=nu(),h=a[d]!==X?a[d]:-1,v=-1!==h?Vy(a,Pn+h):void 0;if(Js(a,d,t)){const S=Ee(null);try{if(void 0!==v&&Kg(v,0),-1!==t){const N=Pn+t,q=Vy(a,N),J=kC(a[qt],N),de=yf(q,J.tView.ssrId);kl(q,hf(a,J,r,{dehydratedView:de}),0,pf(J,de))}}finally{Ee(S)}}else if(void 0!==v){const S=mv(v,0);void 0!==S&&(S[Ii]=r)}}class DD{constructor(r,a,d){this.lContainer=r,this.$implicit=a,this.$index=d}get $count(){return this.lContainer.length-mo}}function mA(t,r){return r}class MD{constructor(r,a,d){this.hasEmptyBlock=r,this.trackByFn=a,this.liveCollection=d}}function _A(t,r,a,d,h,v,w,S,N,q,J,de,xe){Qo("NgControlFlow");const Ge=Rt(),rt=Vr(),Mt=void 0!==N,Qt=Rt(),rn=S?w.bind(Qt[Ai][Ii]):w,Vt=new MD(Mt,rn);Qt[Pn+t]=Vt,Vv(Ge,rt,t+1,r,a,d,h,sc(rt.consts,v)),Mt&&Vv(Ge,rt,t+2,N,q,J,de,sc(rt.consts,xe))}class OD extends xD{constructor(r,a,d){super(),this.lContainer=r,this.hostLView=a,this.templateTNode=d,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-mo}at(r){return this.getLView(r)[Ii].$implicit}attach(r,a){const d=a[vs];this.needsIndexUpdate||=r!==this.length,kl(this.lContainer,a,r,pf(this.templateTNode,d))}detach(r){return this.needsIndexUpdate||=r!==this.length-1,function PD(t,r){return ff(t,r)}(this.lContainer,r)}create(r,a){const d=yf(this.lContainer,this.templateTNode.tView.ssrId),h=hf(this.hostLView,this.templateTNode,new DD(this.lContainer,a,r),{dehydratedView:d});return this.operationsCounter?.recordCreate(),h}destroy(r){ov(r[qt],r),this.operationsCounter?.recordDestroy()}updateValue(r,a){this.getLView(r)[Ii].$implicit=a}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let r=0;r<this.length;r++)this.getLView(r)[Ii].$index=r}getLView(r){return function ND(t,r){return mv(t,r)}(this.lContainer,r)}}function vA(t){const r=Ee(null),a=Xs();try{const d=Rt(),h=d[qt],v=d[a],w=a+1,S=Vy(d,w);if(void 0===v.liveCollection){const q=kC(h,w);v.liveCollection=new OD(S,d,q)}else v.liveCollection.reset();const N=v.liveCollection;if(function SD(t,r,a){let d,h,v=0,w=t.length-1;if(Array.isArray(r)){let N=r.length-1;for(;v<=w&&v<=N;){const q=t.at(v),J=r[v],de=PC(v,q,v,J,a);if(0!==de){de<0&&t.updateValue(v,J),v++;continue}const xe=t.at(w),Ge=r[N],rt=PC(w,xe,N,Ge,a);if(0!==rt){rt<0&&t.updateValue(w,Ge),w--,N--;continue}const Mt=a(v,q),Qt=a(w,xe),rn=a(v,J);if(Object.is(rn,Qt)){const Vt=a(N,Ge);Object.is(Vt,Mt)?(t.swap(v,w),t.updateValue(w,Ge),N--,w--):t.move(w,v),t.updateValue(v,J),v++}else if(d??=new pA,h??=hA(t,v,w,a),NC(t,d,v,rn))t.updateValue(v,J),v++,w++;else if(h.has(rn))d.set(Mt,t.detach(v)),w--;else{const Vt=t.create(v,r[v]);t.attach(v,Vt),v++,w++}}for(;v<=N;)fA(t,d,a,v,r[v]),v++}else if(null!=r){const N=r[Symbol.iterator]();let q=N.next();for(;!q.done&&v<=w;){const J=t.at(v),de=q.value,xe=PC(v,J,v,de,a);if(0!==xe)xe<0&&t.updateValue(v,de),v++,q=N.next();else{d??=new pA,h??=hA(t,v,w,a);const Ge=a(v,de);if(NC(t,d,v,Ge))t.updateValue(v,de),v++,w++,q=N.next();else if(h.has(Ge)){const rt=a(v,J);d.set(rt,t.detach(v)),w--}else t.attach(v,t.create(v,de)),v++,w++,q=N.next()}}for(;!q.done;)fA(t,d,a,t.length,q.value),q=N.next()}for(;v<=w;)t.destroy(t.detach(w--));d?.forEach(N=>{t.destroy(N)})}(N,t,v.trackByFn),N.updateIndexes(),v.hasEmptyBlock){const q=nu(),J=0===N.length;if(Js(d,q,J)){const de=a+2,xe=Vy(d,de);if(J){const Ge=kC(h,de),rt=yf(xe,Ge.tView.ssrId);kl(xe,hf(d,Ge,void 0,{dehydratedView:rt}),0,pf(Ge,rt))}else Kg(xe,0)}}}finally{Ee(r)}}function Vy(t,r){return t[r]}function kC(t,r){return Jc(t,r)}function By(t,r,a,d){const h=Rt(),v=Vr(),w=Pn+t,S=h[nr],N=v.firstCreatePass?function kD(t,r,a,d,h,v){const w=r.consts,N=Mn(r,t,2,d,sc(w,h));return cv(r,a,N,sc(w,v)),null!==N.attrs&&Iy(N,N.attrs,!1),null!==N.mergedAttrs&&Iy(N,N.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,N),N}(w,v,h,r,a,d):v.data[w],q=yA(v,h,N,S,r,t);h[w]=q;const J=Ql(N);return Fs(N,!0),G(S,q,N),!function X_(t){return!(32&~t.flags)}(N)&&rd()&&av(v,h,q,N),0===function y0(){return or.lFrame.elementDepthCount}()&&wa(q,h),function Vf(){or.lFrame.elementDepthCount++}(),J&&(Fr(v,h,N),hi(v,N,h)),null!==d&&et(h,N),By}function Uy(){let t=me();_o()?Rl():(t=t.parent,Fs(t,!1));const r=t;(function C0(t){return or.skipHydrationRootTNode===t})(r)&&function Dm(){or.skipHydrationRootTNode=null}(),function Sm(){or.lFrame.elementDepthCount--}();const a=Vr();return a.firstCreatePass&&(jf(a,t),Ks(t)&&a.queries.elementEnd(t)),null!=r.classesWithoutHost&&function km(t){return!!(8&t.flags)}(r)&&DC(a,r,Rt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function sg(t){return!!(16&t.flags)}(r)&&DC(a,r,Rt(),r.stylesWithoutHost,!1),Uy}function FC(t,r,a,d){return By(t,r,a,d),Uy(),FC}let yA=(t,r,a,d,h,v)=>(iu(!0),ir(d,h,function zh(){return or.lFrame.currentNamespace}()));function jy(t,r,a){const d=Rt(),h=Vr(),v=t+Pn,w=h.firstCreatePass?function VD(t,r,a,d,h){const v=r.consts,w=sc(v,d),S=Mn(r,t,8,"ng-container",w);return null!==w&&Iy(S,w,!0),cv(r,a,S,sc(v,h)),null!==r.queries&&r.queries.elementStart(r,S),S}(v,h,d,r,a):h.data[v];Fs(w,!0);const S=CA(h,d,w,t);return d[v]=S,rd()&&av(h,d,S,w),wa(S,d),Ql(w)&&(Fr(h,d,w),hi(h,w,d)),null!=a&&et(d,w),jy}function Hy(){let t=me();const r=Vr();return _o()?Rl():(t=t.parent,Fs(t,!1)),r.firstCreatePass&&(jf(r,t),Ks(t)&&r.queries.elementEnd(t)),Hy}let CA=(t,r,a,d)=>(iu(!0),rr(r[nr],""));function wA(){return Rt()}const Im=void 0;var HD=["en",[["a","p"],["AM","PM"],Im],[["AM","PM"],Im,Im],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Im,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Im,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Im,"{1} 'at' {0}",Im],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jD(t){const a=Math.floor(Math.abs(t)),d=t.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===d?1:5}];let h0={};function LC(t){const r=function GD(t){return t.toLowerCase().replace(/_/g,"-")}(t);let a=TA(r);if(a)return a;const d=r.split("-")[0];if(a=TA(d),a)return a;if("en"===d)return HD;throw new nn(701,!1)}function bA(t){return LC(t)[p0.PluralCase]}function TA(t){return t in h0||(h0[t]=Ei.ng&&Ei.ng.common&&Ei.ng.common.locales&&Ei.ng.common.locales[t]),h0[t]}var p0=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(p0||{});const g0="en-US";let xA=g0;let WA=(t,r,a)=>{};function UC(t,r,a,d){const h=Rt(),v=Vr(),w=me();return jC(v,h,h[nr],w,t,r,d),UC}function jC(t,r,a,d,h,v,w){const S=Ql(d),q=t.firstCreatePass&&fv(t),J=r[Ii],de=qg(r);let xe=!0;if(3&d.type||w){const Mt=Ji(d,r),Qt=w?w(Mt):Mt,rn=de.length,Vt=w?Di=>w(Nr(Di[d.index])):d.index;let fr=null;if(!w&&S&&(fr=function M2(t,r,a,d){const h=t.cleanup;if(null!=h)for(let v=0;v<h.length-1;v+=2){const w=h[v];if(w===a&&h[v+1]===d){const S=r[vl],N=h[v+2];return S.length>N?S[N]:null}"string"==typeof w&&(v+=2)}return null}(t,r,h,d.index)),null!==fr)(fr.__ngLastListenerFn__||fr).__ngNextListenerFn__=v,fr.__ngLastListenerFn__=v,xe=!1;else{v=QA(d,r,J,v),WA(Mt,h,v);const Di=a.listen(Qt,h,v);de.push(v,Di),q&&q.push(h,Vt,rn,rn+1)}}else v=QA(d,r,J,v);const Ge=d.outputs;let rt;if(xe&&null!==Ge&&(rt=Ge[h])){const Mt=rt.length;if(Mt)for(let Qt=0;Qt<Mt;Qt+=2){const vo=r[rt[Qt]][rt[Qt+1]].subscribe(v),xa=de.length;de.push(v,vo),q&&q.push(h,d.index,xa,-(xa+1))}}}function XA(t,r,a,d){const h=Ee(null);try{return Ha(6,r,a),!1!==a(d)}catch(v){return P_(t,v),!1}finally{Ha(7,r,a),Ee(h)}}function QA(t,r,a,d){return function h(v){if(v===Function)return d;mf(t.componentOffset>-1?gr(t.index,r):r,5);let S=XA(r,a,d,v),N=h.__ngNextListenerFn__;for(;N;)S=XA(r,a,N,v)&&S,N=N.__ngNextListenerFn__;return S}}function YA(t=1){return function nd(t){return(or.lFrame.contextLView=function xm(t,r){for(;t>0;)r=r[yl],t--;return r}(t,or.lFrame.contextLView))[Ii]}(t)}function O2(t,r){let a=null;const d=function If(t){const r=t.attrs;if(null!=r){const a=r.indexOf(5);if(!(1&a))return r[a+1]}return null}(t);for(let h=0;h<r.length;h++){const v=r[h];if("*"!==v){if(null===d?Ba(t,v,!0):gl(d,v))return h}else a=h}return a}function ZA(t){const r=Rt()[Ai][_s];if(!r.projection){const d=r.projection=function wc(t,r){const a=[];for(let d=0;d<t;d++)a.push(r);return a}(t?t.length:1,null),h=d.slice();let v=r.child;for(;null!==v;){const w=t?O2(v,t):0;null!==w&&(h[w]?h[w].projectionNext=v:d[w]=v,h[w]=v),v=v.next}}}function JA(t,r=0,a,d,h,v){const w=Rt(),S=Vr(),N=d?t+1:null;null!==N&&Vv(w,S,N,d,h,v,null,a);const q=Mn(S,Pn+t,16,null,a||null);null===q.projection&&(q.projection=r),Rl();const de=!w[vs]||ac();null===w[Ai][_s].projection[q.projection]&&null!==N?function P2(t,r,a){const d=Pn+a,h=r.data[d],v=t[d],w=yf(v,h.tView.ssrId);kl(v,hf(t,h,void 0,{dehydratedView:w}),0,pf(h,w))}(w,S,N):de&&32&~q.flags&&function u(t,r,a){f(r[nr],0,r,a,P1(t,a,r),TE(a.parent||r[_s],a,r))}(S,w,q)}function HC(t,r,a){return Wy(t,"",r,"",a),HC}function Wy(t,r,a,d,h){const v=Rt(),w=r0(v,r,a,d);return w!==X&&ws(Vr(),ji(),v,t,w,v[nr],h,!1),Wy}function cb(t,r,a,d){!function qw(t,r,a,d){const h=Vr();if(h.firstCreatePass){const v=me();Kw(h,new Gw(r,a,d),v.index),function $x(t,r){const a=t.contentQueries||(t.contentQueries=[]);r!==(a.length?a[a.length-1]:-1)&&a.push(t.queries.length-1,r)}(h,t),!(2&~a)&&(h.staticContentQueries=!0)}return zw(h,Rt(),a)}(t,r,a,d)}function ub(t,r,a){!function Ww(t,r,a){const d=Vr();return d.firstCreatePass&&(Kw(d,new Gw(t,r,a),-1),!(2&~r)&&(d.staticViewQueries=!0)),zw(d,Rt(),r)}(t,r,a)}function lb(t){const r=Rt(),a=Vr(),d=Gh();Uf(d+1);const h=aC(a,d);if(t.dirty&&function ii(t){return!(4&~t[Rn])}(r)===!(2&~h.metadata.flags)){if(null===h.matches)t.reset([]);else{const v=Xw(r,d);t.reset(v,bi),t.notifyOnChanges()}return!0}return!1}function db(){return function sC(t,r){return t[go].queries[r].queryList}(Rt(),Gh())}function fb(t){return oc(function Kp(){return or.lFrame.contextLView}(),Pn+t)}function wb(t,r=""){const a=Rt(),d=Vr(),h=t+Pn,v=d.firstCreatePass?Mn(d,h,1,r,null):d.data[h],w=Ib(d,a,v,r,t);a[h]=w,rd()&&av(d,a,w,v),Fs(v,!1)}let Ib=(t,r,a,d,h)=>(iu(!0),function Zt(t,r){return t.createText(r)}(r[nr],d));function GC(t){return qy("",t,""),GC}function qy(t,r,a){const d=Rt(),h=r0(d,t,r,a);return h!==X&&Nl(d,Xs(),h),qy}function $C(t,r,a,d,h){const v=Rt(),w=o0(v,t,r,a,d,h);return w!==X&&Nl(v,Xs(),w),$C}function zC(t,r,a){Zw(r)&&(r=r());const d=Rt();return Js(d,nu(),r)&&ws(Vr(),ji(),d,t,r,d[nr],a,!1),zC}function Mb(t,r){const a=Zw(t);return a&&t.set(r),a}function WC(t,r){const a=Rt(),d=Vr(),h=me();return jC(d,a,a[nr],h,t,r),WC}function qC(t,r,a,d,h){if(t=kn(t),Array.isArray(t))for(let v=0;v<t.length;v++)qC(t[v],r,a,d,h);else{const v=Vr(),w=Rt(),S=me();let N=Cu(t)?t:kn(t.provide);const q=Lr(t),J=1048575&S.providerIndexes,de=S.directiveStart,xe=S.providerIndexes>>20;if(Cu(t)||!t.multi){const Ge=new id(q,h,Le),rt=XC(N,r,h?J:J+xe,de);-1===rt?(lg(Xd(S,w),v,N),KC(v,t,r.length),r.push(N),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(Ge),w.push(Ge)):(a[rt]=Ge,w[rt]=Ge)}else{const Ge=XC(N,r,J+xe,de),rt=XC(N,r,J,J+xe),Qt=rt>=0&&a[rt];if(h&&!Qt||!h&&!(Ge>=0&&a[Ge])){lg(Xd(S,w),v,N);const rn=function Z2(t,r,a,d,h){const v=new id(t,a,Le);return v.multi=[],v.index=r,v.componentProviders=0,Ob(v,h,d&&!a),v}(h?Y2:Q2,a.length,h,d,q);!h&&Qt&&(a[rt].providerFactory=rn),KC(v,t,r.length,0),r.push(N),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(rn),w.push(rn)}else KC(v,t,Ge>-1?Ge:rt,Ob(a[h?rt:Ge],q,!h&&d));!h&&d&&Qt&&a[rt].componentProviders++}}}function KC(t,r,a,d){const h=Cu(r),v=function Wc(t){return!!t.useClass}(r);if(h||v){const N=(v?kn(r.useClass):r).prototype.ngOnDestroy;if(N){const q=t.destroyHooks||(t.destroyHooks=[]);if(!h&&r.multi){const J=q.indexOf(a);-1===J?q.push(a,[d,N]):q[J+1].push(d,N)}else q.push(a,N)}}}function Ob(t,r,a){return a&&t.componentProviders++,t.multi.push(r)-1}function XC(t,r,a,d){for(let h=a;h<d;h++)if(r[h]===t)return h;return-1}function Q2(t,r,a,d){return QC(this.multi,[])}function Y2(t,r,a,d){const h=this.multi;let v;if(this.providerFactory){const w=this.providerFactory.componentProviders,S=cc(a,a[qt],this.providerFactory.index,d);v=S.slice(0,w),QC(h,v);for(let N=w;N<S.length;N++)v.push(S[N])}else v=[],QC(h,v);return v}function QC(t,r){for(let a=0;a<t.length;a++)r.push((0,t[a])());return r}function Pb(t,r=[]){return a=>{a.providersResolver=(d,h)=>function X2(t,r,a){const d=Vr();if(d.firstCreatePass){const h=Ca(t);qC(a,d.data,d.blueprint,h,!0),qC(r,d.data,d.blueprint,h,!1)}}(d,h?h(t):t,r)}}let J2=(()=>{class t{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const d=ml(0,a.type),h=d.length>0?fC([d],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,h)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Dn({token:t,providedIn:"environment",factory:()=>new t(Oi(qo))})}return t})();function Nb(t){Qo("NgStandalone"),t.getStandaloneInjector=r=>r.get(J2).getOrCreateStandaloneInjector(t)}function Fb(t,r,a,d){return Bb(Rt(),Gi(),t,r,a,d)}function Lb(t,r,a,d,h){return function Ub(t,r,a,d,h,v,w){const S=r+a;return Em(t,S,h,v)?Ef(t,S+2,w?d.call(w,h,v):d(h,v)):Kv(t,S+2)}(Rt(),Gi(),t,r,a,d,h)}function Vb(t,r,a,d,h,v){return function jb(t,r,a,d,h,v,w,S){const N=r+a;return Ry(t,N,h,v,w)?Ef(t,N+3,S?d.call(S,h,v,w):d(h,v,w)):Kv(t,N+3)}(Rt(),Gi(),t,r,a,d,h,v)}function Kv(t,r){const a=t[r];return a===X?void 0:a}function Bb(t,r,a,d,h,v){const w=r+a;return Js(t,w,h)?Ef(t,w+1,v?d.call(v,h):d(h)):Kv(t,w+1)}function $b(t,r){const a=Vr();let d;const h=t+Pn;a.firstCreatePass?(d=function uR(t,r){if(r)for(let a=r.length-1;a>=0;a--){const d=r[a];if(t===d.name)return d}}(r,a.pipeRegistry),a.data[h]=d,d.onDestroy&&(a.destroyHooks??=[]).push(h,d.onDestroy)):d=a.data[h];const v=d.factory||(d.factory=ao(d.type)),S=Ce(Le);try{const N=Gf(!1),q=v();return Gf(N),function L2(t,r,a,d){a>=t.data.length&&(t.data[a]=null,t.blueprint[a]=null),r[a]=d}(a,Rt(),h,q),q}finally{Ce(S)}}function zb(t,r,a){const d=t+Pn,h=Rt(),v=oc(h,d);return function Xv(t,r){return t[qt].data[r].pure}(h,d)?Bb(h,Gi(),r,v.transform,a,v):v.transform(a)}function Wb(t,r){return Jg(t,r)}class cT{constructor(r){this.full=r;const a=r.split(".");this.major=a[0],this.minor=a[1],this.patch=a.slice(2).join(".")}}const kR=new cT("18.0.2");let uT=(()=>{class t{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Dn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const pT=new cr(""),gT=new cr("");let nw,aM=(()=>{class t{constructor(a,d,h){this._ngZone=a,this.registry=d,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,nw||(function cM(t){nw=t}(h),h.addToWindow(d)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb()}});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(a)||(clearTimeout(d.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,d,h){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==v),a()},d)),this._callbacks.push({doneCb:a,timeoutId:v,updateCb:h})}whenStable(a,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,d,h),this._runCallbacksIfReady()}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,d,h){return[]}static#e=this.\u0275fac=function(d){return new(d||t)(Oi(Yo),Oi(mT),Oi(gT))};static#t=this.\u0275prov=Dn({token:t,factory:t.\u0275fac})}return t})(),mT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(a,d){this._applications.set(a,d)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,d=!0){return nw?.findTestabilityInTree(this,a,d)??null}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Dn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function rw(t){return!!t&&"function"==typeof t.then}function _T(t){return!!t&&"function"==typeof t.subscribe}const vT=new cr("");let iw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d}),this.appInits=mn(vT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const h of this.appInits){const v=h();if(rw(v))a.push(v);else if(_T(v)){const w=new Promise((S,N)=>{v.subscribe({complete:S,error:N})});a.push(w)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{d()}).catch(h=>{this.reject(h)}),0===a.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Dn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Yy=new cr("");let Td=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=mn(_g),this.afterRenderEffectManager=mn(Ov),this.zonelessEnabled=mn(Ia),this.externalTestViews=new Set,this.beforeRender=new to.B,this.afterTick=new to.B,this.componentTypes=[],this.components=[],this.isStable=mn(ym).hasPendingTasks.pipe((0,Tn.T)(a=>!a)),this._injector=mn(qo)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,d){const h=a instanceof I;if(!this._injector.get(iw).done)throw!h&&xr(a),new nn(405,!1);let w;w=h?a:this._injector.get(Tt).resolveComponentFactory(a),this.componentTypes.push(w.componentType);const S=function uM(t){return t.isBoundToModule}(w)?void 0:this._injector.get(vm),q=w.create(Ls.NULL,[],d||w.selector,S),J=q.location.nativeElement,de=q.injector.get(pT,null);return de?.registerApplication(J),q.onDestroy(()=>{this.detachView(q.hostView),Zy(this.components,q),de?.unregisterApplication(J)}),this._loadComponent(q),q}tick(){this._tick(!0)}_tick(a){if(this._runningTick)throw new nn(101,!1);const d=Ee(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(a)}catch(h){this.internalErrorHandler(h)}finally{this._runningTick=!1,Ee(d),this.afterTick.next()}}detectChangesInAttachedViews(a){let d=null;this._injector.destroyed||(d=this._injector.get(an,null,{optional:!0}));let h=0;const v=this.afterRenderEffectManager;for(;h<10;){const w=0===h;if(a||!w){this.beforeRender.next(w);for(let{_lView:S,notifyErrorHandler:N}of this._views)dM(S,N,w,this.zonelessEnabled)}else d?.begin?.(),d?.end?.();if(h++,v.executeInternalCallbacks(),!this.allViews.some(({_lView:S})=>Jl(S))&&(v.execute(),!this.allViews.some(({_lView:S})=>Jl(S))))break}}attachView(a){const d=a;this._views.push(d),d.attachToAppRef(this)}detachView(a){const d=a;Zy(this._views,d),d.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const d=this._injector.get(Yy,[]);[...this._bootstrapListeners,...d].forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Zy(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new nn(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Dn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zy(t,r){const a=t.indexOf(r);a>-1&&t.splice(a,1)}function dM(t,r,a,d){(a||Jl(t))&&Qg(t,r,a&&!d?0:1)}class fM{constructor(r,a){this.ngModuleFactory=r,this.componentFactories=a}}let hM=(()=>{class t{compileModuleSync(a){return new dC(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const d=this.compileModuleSync(a),v=y(ar(a).declarations).reduce((w,S)=>{const N=Pt(S);return N&&w.push(new kv(N)),w},[]);return new fM(d,v)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Dn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mM=(()=>{class t{constructor(){this.zone=mn(Yo),this.changeDetectionScheduler=mn(Id),this.applicationRef=mn(Td)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Dn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ow({ngZoneFactory:t,ignoreChangesOutsideZone:r}){return t??=()=>new Yo(function sw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}()),[{provide:Yo,useFactory:t},{provide:qs,multi:!0,useFactory:()=>{const a=mn(mM,{optional:!0});return()=>a.initialize()}},{provide:qs,multi:!0,useFactory:()=>{const a=mn(yM);return()=>{a.initialize()}}},{provide:_g,useFactory:vM},!0===r?{provide:Mv,useValue:!0}:[]]}function vM(){const t=mn(Yo),r=mn(Su);return a=>t.runOutsideAngular(()=>r.handleError(a))}let yM=(()=>{class t{constructor(){this.subscription=new lr.yU,this.initialized=!1,this.zone=mn(Yo),this.pendingTasks=mn(ym)}initialize(){if(this.initialized)return;this.initialized=!0;let a=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(a=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Yo.assertNotInAngularZone(),queueMicrotask(()=>{null!==a&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(a),a=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Yo.assertInAngularZone(),a??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Dn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Zv=(()=>{class t{constructor(){this.appRef=mn(Td),this.taskService=mn(ym),this.ngZone=mn(Yo),this.zonelessEnabled=mn(Ia),this.disableScheduling=mn(Mv,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new lr.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof XE||!this.zoneIsDefined)}notify(a){if(!this.zonelessEnabled&&5===a)return;switch(a){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const d=this.useMicrotaskScheduler?q_:mm;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=d(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=d(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Yo.isInAngularZone())}tick(a){if(this.runningTick||this.appRef.destroyed)return;const d=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(a)},void 0,this.schedulerTickApplyArgs)}catch(h){throw this.taskService.remove(d),h}finally{this.cleanup()}this.useMicrotaskScheduler=!0,q_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(d)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const a=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(a)}}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Dn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const eE=new cr("",{providedIn:"root",factory:()=>mn(eE,re.Optional|re.SkipSelf)||function EM(){return typeof $localize<"u"&&$localize.locale||g0}()}),CM=new cr("",{providedIn:"root",factory:()=>"USD"}),cw=new cr("");let Up=null;let MT=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=TM}return t})();function TM(t){return function xM(t,r,a){if(Yc(t)&&!a){const d=gr(t.index,r);return new Pu(d,d)}return 47&t.type?new Pu(r[Ai],r):null}(me(),Rt(),!(16&~t))}class kT{constructor(){}supports(r){return Dy(r)}create(r){return new OM(r)}}const MM=(t,r)=>r;class OM{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||MM}forEachItem(r){let a;for(a=this._itHead;null!==a;a=a._next)r(a)}forEachOperation(r){let a=this._itHead,d=this._removalsHead,h=0,v=null;for(;a||d;){const w=!d||a&&a.currentIndex<LT(d,h,v)?a:d,S=LT(w,h,v),N=w.currentIndex;if(w===d)h--,d=d._nextRemoved;else if(a=a._next,null==w.previousIndex)h++;else{v||(v=[]);const q=S-h,J=N-h;if(q!=J){for(let xe=0;xe<q;xe++){const Ge=xe<v.length?v[xe]:v[xe]=0,rt=Ge+xe;J<=rt&&rt<q&&(v[xe]=Ge+1)}v[w.previousIndex]=J-q}}S!==N&&r(w,S,N)}}forEachPreviousItem(r){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachMovedItem(r){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}forEachIdentityChange(r){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)r(a)}diff(r){if(null==r&&(r=[]),!Dy(r))throw new nn(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,v,w,a=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let S=0;S<this.length;S++)v=r[S],w=this._trackByFn(S,v),null!==a&&Object.is(a.trackById,w)?(d&&(a=this._verifyReinsertion(a,v,w,S)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,w,S),d=!0),a=a._next}else h=0,function mS(t,r){if(Array.isArray(t))for(let a=0;a<t.length;a++)r(t[a]);else{const a=t[Symbol.iterator]();let d;for(;!(d=a.next()).done;)r(d.value)}}(r,S=>{w=this._trackByFn(h,S),null!==a&&Object.is(a.trackById,w)?(d&&(a=this._verifyReinsertion(a,S,w,h)),Object.is(a.item,S)||this._addIdentityChange(a,S)):(a=this._mismatch(a,S,w,h),d=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,a,d,h){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._reinsertAfter(r,v,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._moveAfter(r,v,h)):r=this._addAfter(new PM(a,d),v,h),r}_verifyReinsertion(r,a,d,h){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?r=this._reinsertAfter(v,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const a=r._next;this._addToRemovals(this._unlink(r)),r=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,a,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,v=r._nextRemoved;return null===h?this._removalsHead=v:h._nextRemoved=v,null===v?this._removalsTail=h:v._prevRemoved=h,this._insertAfter(r,a,d),this._addToMoves(r,d),r}_moveAfter(r,a,d){return this._unlink(r),this._insertAfter(r,a,d),this._addToMoves(r,d),r}_addAfter(r,a,d){return this._insertAfter(r,a,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,a,d){const h=null===a?this._itHead:a._next;return r._next=h,r._prev=a,null===h?this._itTail=r:h._prev=r,null===a?this._itHead=r:a._next=r,null===this._linkedRecords&&(this._linkedRecords=new FT),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const a=r._prev,d=r._next;return null===a?this._itHead=d:a._next=d,null===d?this._itTail=a:d._prev=a,r}_addToMoves(r,a){return r.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FT),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,a){return r.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class PM{constructor(r,a){this.item=r,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class NM{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,a){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===a||a<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const a=r._prevDup,d=r._nextDup;return null===a?this._head=d:a._nextDup=d,null===d?this._tail=a:d._prevDup=a,null===this._head}}class FT{constructor(){this.map=new Map}put(r){const a=r.trackById;let d=this.map.get(a);d||(d=new NM,this.map.set(a,d)),d.add(r)}get(r,a){const h=this.map.get(r);return h?h.get(r,a):null}remove(r){const a=r.trackById;return this.map.get(a).remove(r)&&this.map.delete(a),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LT(t,r,a){const d=t.previousIndex;if(null===d)return d;let h=0;return a&&d<a.length&&(h=a[d]),d+r+h}class VT{constructor(){}supports(r){return r instanceof Map||hC(r)}create(){return new kM}}class kM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let a;for(a=this._mapHead;null!==a;a=a._next)r(a)}forEachPreviousItem(r){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)r(a)}forEachChangedItem(r){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}diff(r){if(r){if(!(r instanceof Map||hC(r)))throw new nn(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,d),this._appendAfter=a,a=a._next;else{const v=this._getOrCreateRecordForKey(h,d);a=this._insertBeforeOrAppend(a,v)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let d=a;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,a){if(r){const d=r._prev;return a._next=r,a._prev=d,r._prev=a,d&&(d._next=a),r===this._mapHead&&(this._mapHead=a),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(r,a){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,a);const v=h._prev,w=h._next;return v&&(v._next=w),w&&(w._prev=v),h._next=null,h._prev=null,h}const d=new FM(r);return this._records.set(r,d),d.currentValue=a,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,a){Object.is(a,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=a,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,a){r instanceof Map?r.forEach(a):Object.keys(r).forEach(d=>a(r[d],d))}}class FM{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function BT(){return new pw([new kT])}let pw=(()=>{class t{static#e=this.\u0275prov=Dn({token:t,providedIn:"root",factory:BT});constructor(a){this.factories=a}static create(a,d){if(null!=d){const h=d.factories.slice();a=a.concat(h)}return new t(a)}static extend(a){return{provide:t,useFactory:d=>t.create(a,d||BT()),deps:[[t,new oa,new li]]}}find(a){const d=this.factories.find(h=>h.supports(a));if(null!=d)return d;throw new nn(901,!1)}}return t})();function UT(){return new gw([new VT])}let gw=(()=>{class t{static#e=this.\u0275prov=Dn({token:t,providedIn:"root",factory:UT});constructor(a){this.factories=a}static create(a,d){if(d){const h=d.factories.slice();a=a.concat(h)}return new t(a)}static extend(a){return{provide:t,useFactory:d=>t.create(a,d||UT()),deps:[[t,new oa,new li]]}}find(a){const d=this.factories.find(h=>h.supports(a));if(d)return d;throw new nn(901,!1)}}return t})();function JM(t){try{const{rootComponent:r,appProviders:a,platformProviders:d}=t,h=function bM(t=[]){if(Up)return Up;const r=function ST(t=[],r){return Ls.create({name:r,providers:[{provide:zl,useValue:"platform"},{provide:cw,useValue:new Set([()=>Up=null])},...t]})}(t);return Up=r,function yT(){!function er(t){bt=t}(()=>{throw new nn(600,!1)})}(),function DT(t){t.get(t_,null)?.forEach(a=>a())}(r),r}(d),v=[ow({}),{provide:Id,useExisting:Zv},...a||[]],S=new gI({providers:v,parent:h,debugName:"",runEnvironmentInitializers:!1}).injector,N=S.get(Yo);return N.run(()=>{S.resolveInjectorInitializers();const q=S.get(Su,null);let J;N.runOutsideAngular(()=>{J=N.onError.subscribe({next:Ge=>{q.handleError(Ge)}})});const de=()=>S.destroy(),xe=h.get(cw);return xe.add(de),S.onDestroy(()=>{J.unsubscribe(),xe.delete(de)}),function ET(t,r,a){try{const d=a();return rw(d)?d.catch(h=>{throw r.runOutsideAngular(()=>t.handleError(h)),h}):d}catch(d){throw r.runOutsideAngular(()=>t.handleError(d)),d}}(q,N,()=>{const Ge=S.get(iw);return Ge.runInitializers(),Ge.donePromise.then(()=>{!function SA(t){"string"==typeof t&&(xA=t.toLowerCase().replace(/_/g,"-"))}(S.get(eE,g0)||g0);const Mt=S.get(Td);return void 0!==r&&Mt.bootstrap(r),Mt})})})}catch(r){return Promise.reject(r)}}function EO(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function wO(t){const r=Ee(null);try{return t()}finally{Ee(r)}}function SO(t){const r=Pt(t);if(!r)return null;const a=new kv(r);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7440:(yn,wt,ie)=>{ie.d(wt,{MW:()=>pt,Wp:()=>Bt,XU:()=>Ue,gL:()=>Ze});var D=ie(2214),x=ie(3953),L=ie(3586);class Ue{constructor(_t){return _t}}class Ze{constructor(){return(0,D.Dk)()}}const Et=new x.nKC("angularfire2._apps"),it={provide:Ue,useFactory:function Xe(It){return It&&1===It.length?It[0]:new Ue((0,D.Sx)())},deps:[[new x.Xx1,Et]]},ve={provide:Ze,deps:[[new x.Xx1,Et]]};function Ie(It){return(_t,Lt)=>{const At=Lt.get(x.Agw);(0,D.KO)("angularfire",L.xv.full,"core"),(0,D.KO)("angularfire",L.xv.full,"app"),(0,D.KO)("angular",x.xvI.full,At.toString());const Ht=_t.runOutsideAngular(()=>It(Lt));return new Ue(Ht)}}function pt(It,..._t){return(0,x.EmA)([it,ve,{provide:Et,useFactory:Ie(It),multi:!0,deps:[x.SKi,x.zZn,L.u0,..._t]}])}const Bt=(0,L.S3)(D.Wp,!0)},6335:(yn,wt,ie)=>{ie.d(wt,{Nj:()=>Ie,DF:()=>Oe,wh:()=>Dt,eJ:()=>_n,xI:()=>bt,_q:()=>Jn,x9:()=>un,df:()=>ki,r7:()=>ri});var D=ie(3586),x=ie(3953),L=ie(7440),Ue=ie(2214),Ze=ie(6114),Ee=ie(1985);function Xe(Cr){return new Ee.c(function(fe){return{unsubscribe:(0,Ze.hg)(Cr,fe.next.bind(fe),fe.error.bind(fe),fe.complete.bind(fe))}})}class Ie{constructor(fe){return fe}}class Oe{constructor(){return(0,D.CA)("auth")}}const Be=new x.nKC("angularfire2.auth-instances");function kt(Cr){return(fe,tt)=>{const be=fe.runOutsideAngular(()=>Cr(tt));return new Ie(be)}}const Bt={provide:Oe,deps:[[new x.Xx1,Be]]},Kt={provide:Ie,useFactory:function Ct(Cr,fe){const tt=(0,D.lR)("auth",Cr,fe);return tt&&new Ie(tt)},deps:[[new x.Xx1,Be],L.XU]};function Jn(Cr,...fe){return(0,Ue.KO)("angularfire",D.xv.full,"auth"),(0,x.EmA)([Kt,Bt,{provide:Be,useFactory:kt(Cr),multi:!0,deps:[x.SKi,x.zZn,D.u0,L.gL,[new x.Xx1,D.Jv],...fe]}])}const Dt=(0,D.S3)(Xe,!0),_n=(0,D.S3)(Ze.eJ,!0),bt=(0,D.S3)(Ze.xI,!0),un=(0,D.S3)(Ze.x9,!0),ki=(0,D.S3)(Ze.df,!0),ri=(0,D.S3)(Ze.r7,!0)},2418:(yn,wt,ie)=>{ie.d(wt,{_7:()=>df,gS:()=>R1,rJ:()=>Ip,xs:()=>rv,kd:()=>c,H9:()=>y,x7:()=>Ne,GG:()=>Ft,aU:()=>pn,hV:()=>tv,P:()=>N1,BN:()=>bE,mZ:()=>F1,_M:()=>jg});var pt,Be,D=ie(3586),x=ie(3953),L=ie(7440),Ue=ie(6335),Ze=ie(2214),Ee=ie(467),Xe=ie(7852),Et=ie(1362),it=ie(8041),ve=ie(1076),Ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oe={};(function(){var p;function f(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function _(et,Me,ze){ze||(ze=0);var nt=Array(16);if("string"==typeof Me)for(var st=0;16>st;++st)nt[st]=Me.charCodeAt(ze++)|Me.charCodeAt(ze++)<<8|Me.charCodeAt(ze++)<<16|Me.charCodeAt(ze++)<<24;else for(st=0;16>st;++st)nt[st]=Me[ze++]|Me[ze++]<<8|Me[ze++]<<16|Me[ze++]<<24;var yt=et.g[3],He=(Me=et.g[0])+(yt^(ze=et.g[1])&((st=et.g[2])^yt))+nt[0]+3614090360&4294967295;He=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=(ze=(st=(yt=(Me=ze+(He<<7&4294967295|He>>>25))+((He=yt+(st^Me&(ze^st))+nt[1]+3905402710&4294967295)<<12&4294967295|He>>>20))+((He=st+(ze^yt&(Me^ze))+nt[2]+606105819&4294967295)<<17&4294967295|He>>>15))+((He=ze+(Me^st&(yt^Me))+nt[3]+3250441966&4294967295)<<22&4294967295|He>>>10))+((He=Me+(yt^ze&(st^yt))+nt[4]+4118548399&4294967295)<<7&4294967295|He>>>25))+((He=yt+(st^Me&(ze^st))+nt[5]+1200080426&4294967295)<<12&4294967295|He>>>20))+((He=st+(ze^yt&(Me^ze))+nt[6]+2821735955&4294967295)<<17&4294967295|He>>>15))+((He=ze+(Me^st&(yt^Me))+nt[7]+4249261313&4294967295)<<22&4294967295|He>>>10))+((He=Me+(yt^ze&(st^yt))+nt[8]+1770035416&4294967295)<<7&4294967295|He>>>25))+((He=yt+(st^Me&(ze^st))+nt[9]+2336552879&4294967295)<<12&4294967295|He>>>20))+((He=st+(ze^yt&(Me^ze))+nt[10]+4294925233&4294967295)<<17&4294967295|He>>>15))+((He=ze+(Me^st&(yt^Me))+nt[11]+2304563134&4294967295)<<22&4294967295|He>>>10))+((He=Me+(yt^ze&(st^yt))+nt[12]+1804603682&4294967295)<<7&4294967295|He>>>25))+((He=yt+(st^Me&(ze^st))+nt[13]+4254626195&4294967295)<<12&4294967295|He>>>20))+((He=st+(ze^yt&(Me^ze))+nt[14]+2792965006&4294967295)<<17&4294967295|He>>>15))+((He=ze+(Me^st&(yt^Me))+nt[15]+1236535329&4294967295)<<22&4294967295|He>>>10))+((He=Me+(st^yt&(ze^st))+nt[1]+4129170786&4294967295)<<5&4294967295|He>>>27))+((He=yt+(ze^st&(Me^ze))+nt[6]+3225465664&4294967295)<<9&4294967295|He>>>23))+((He=st+(Me^ze&(yt^Me))+nt[11]+643717713&4294967295)<<14&4294967295|He>>>18))+((He=ze+(yt^Me&(st^yt))+nt[0]+3921069994&4294967295)<<20&4294967295|He>>>12))+((He=Me+(st^yt&(ze^st))+nt[5]+3593408605&4294967295)<<5&4294967295|He>>>27))+((He=yt+(ze^st&(Me^ze))+nt[10]+38016083&4294967295)<<9&4294967295|He>>>23))+((He=st+(Me^ze&(yt^Me))+nt[15]+3634488961&4294967295)<<14&4294967295|He>>>18))+((He=ze+(yt^Me&(st^yt))+nt[4]+3889429448&4294967295)<<20&4294967295|He>>>12))+((He=Me+(st^yt&(ze^st))+nt[9]+568446438&4294967295)<<5&4294967295|He>>>27))+((He=yt+(ze^st&(Me^ze))+nt[14]+3275163606&4294967295)<<9&4294967295|He>>>23))+((He=st+(Me^ze&(yt^Me))+nt[3]+4107603335&4294967295)<<14&4294967295|He>>>18))+((He=ze+(yt^Me&(st^yt))+nt[8]+1163531501&4294967295)<<20&4294967295|He>>>12))+((He=Me+(st^yt&(ze^st))+nt[13]+2850285829&4294967295)<<5&4294967295|He>>>27))+((He=yt+(ze^st&(Me^ze))+nt[2]+4243563512&4294967295)<<9&4294967295|He>>>23))+((He=st+(Me^ze&(yt^Me))+nt[7]+1735328473&4294967295)<<14&4294967295|He>>>18))+((He=ze+(yt^Me&(st^yt))+nt[12]+2368359562&4294967295)<<20&4294967295|He>>>12))+((He=Me+(ze^st^yt)+nt[5]+4294588738&4294967295)<<4&4294967295|He>>>28))+((He=yt+(Me^ze^st)+nt[8]+2272392833&4294967295)<<11&4294967295|He>>>21))+((He=st+(yt^Me^ze)+nt[11]+1839030562&4294967295)<<16&4294967295|He>>>16))+((He=ze+(st^yt^Me)+nt[14]+4259657740&4294967295)<<23&4294967295|He>>>9))+((He=Me+(ze^st^yt)+nt[1]+2763975236&4294967295)<<4&4294967295|He>>>28))+((He=yt+(Me^ze^st)+nt[4]+1272893353&4294967295)<<11&4294967295|He>>>21))+((He=st+(yt^Me^ze)+nt[7]+4139469664&4294967295)<<16&4294967295|He>>>16))+((He=ze+(st^yt^Me)+nt[10]+3200236656&4294967295)<<23&4294967295|He>>>9))+((He=Me+(ze^st^yt)+nt[13]+681279174&4294967295)<<4&4294967295|He>>>28))+((He=yt+(Me^ze^st)+nt[0]+3936430074&4294967295)<<11&4294967295|He>>>21))+((He=st+(yt^Me^ze)+nt[3]+3572445317&4294967295)<<16&4294967295|He>>>16))+((He=ze+(st^yt^Me)+nt[6]+76029189&4294967295)<<23&4294967295|He>>>9))+((He=Me+(ze^st^yt)+nt[9]+3654602809&4294967295)<<4&4294967295|He>>>28))+((He=yt+(Me^ze^st)+nt[12]+3873151461&4294967295)<<11&4294967295|He>>>21))+((He=st+(yt^Me^ze)+nt[15]+530742520&4294967295)<<16&4294967295|He>>>16))+((He=ze+(st^yt^Me)+nt[2]+3299628645&4294967295)<<23&4294967295|He>>>9))+((He=Me+(st^(ze|~yt))+nt[0]+4096336452&4294967295)<<6&4294967295|He>>>26))+((He=yt+(ze^(Me|~st))+nt[7]+1126891415&4294967295)<<10&4294967295|He>>>22))+((He=st+(Me^(yt|~ze))+nt[14]+2878612391&4294967295)<<15&4294967295|He>>>17))+((He=ze+(yt^(st|~Me))+nt[5]+4237533241&4294967295)<<21&4294967295|He>>>11))+((He=Me+(st^(ze|~yt))+nt[12]+1700485571&4294967295)<<6&4294967295|He>>>26))+((He=yt+(ze^(Me|~st))+nt[3]+2399980690&4294967295)<<10&4294967295|He>>>22))+((He=st+(Me^(yt|~ze))+nt[10]+4293915773&4294967295)<<15&4294967295|He>>>17))+((He=ze+(yt^(st|~Me))+nt[1]+2240044497&4294967295)<<21&4294967295|He>>>11))+((He=Me+(st^(ze|~yt))+nt[8]+1873313359&4294967295)<<6&4294967295|He>>>26))+((He=yt+(ze^(Me|~st))+nt[15]+4264355552&4294967295)<<10&4294967295|He>>>22))+((He=st+(Me^(yt|~ze))+nt[6]+2734768916&4294967295)<<15&4294967295|He>>>17))+((He=ze+(yt^(st|~Me))+nt[13]+1309151649&4294967295)<<21&4294967295|He>>>11))+((yt=(Me=ze+((He=Me+(st^(ze|~yt))+nt[4]+4149444226&4294967295)<<6&4294967295|He>>>26))+((He=yt+(ze^(Me|~st))+nt[11]+3174756917&4294967295)<<10&4294967295|He>>>22))^((st=yt+((He=st+(Me^(yt|~ze))+nt[2]+718787259&4294967295)<<15&4294967295|He>>>17))|~Me))+nt[9]+3951481745&4294967295,et.g[0]=et.g[0]+Me&4294967295,et.g[1]=et.g[1]+(st+(He<<21&4294967295|He>>>11))&4294967295,et.g[2]=et.g[2]+st&4294967295,et.g[3]=et.g[3]+yt&4294967295}function T(et,Me){this.h=Me;for(var ze=[],nt=!0,st=et.length-1;0<=st;st--){var yt=0|et[st];nt&&yt==Me||(ze[st]=yt,nt=!1)}this.g=ze}(function o(et,Me){function ze(){}ze.prototype=Me.prototype,et.D=Me.prototype,et.prototype=new ze,et.prototype.constructor=et,et.C=function(nt,st,yt){for(var He=Array(arguments.length-2),vd=2;vd<arguments.length;vd++)He[vd-2]=arguments[vd];return Me.prototype[st].apply(nt,He)}})(f,function u(){this.blockSize=-1}),f.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},f.prototype.u=function(et,Me){void 0===Me&&(Me=et.length);for(var ze=Me-this.blockSize,nt=this.B,st=this.h,yt=0;yt<Me;){if(0==st)for(;yt<=ze;)_(this,et,yt),yt+=this.blockSize;if("string"==typeof et){for(;yt<Me;)if(nt[st++]=et.charCodeAt(yt++),st==this.blockSize){_(this,nt),st=0;break}}else for(;yt<Me;)if(nt[st++]=et[yt++],st==this.blockSize){_(this,nt),st=0;break}}this.h=st,this.o+=Me},f.prototype.v=function(){var et=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);et[0]=128;for(var Me=1;Me<et.length-8;++Me)et[Me]=0;var ze=8*this.o;for(Me=et.length-8;Me<et.length;++Me)et[Me]=255&ze,ze/=256;for(this.u(et),et=Array(16),Me=ze=0;4>Me;++Me)for(var nt=0;32>nt;nt+=8)et[ze++]=this.g[Me]>>>nt&255;return et};var V={};function G(et){return-128<=et&&128>et?function C(et,Me){var ze=V;return Object.prototype.hasOwnProperty.call(ze,et)?ze[et]:ze[et]=Me(et)}(et,function(Me){return new T([0|Me],0>Me?-1:0)}):new T([0|et],0>et?-1:0)}function X(et){if(isNaN(et)||!isFinite(et))return we;if(0>et)return Gt(X(-et));for(var Me=[],ze=1,nt=0;et>=ze;nt++)Me[nt]=et/ze|0,ze*=4294967296;return new T(Me,0)}var we=G(0),Le=G(1),ht=G(16777216);function Ut(et){if(0!=et.h)return!1;for(var Me=0;Me<et.g.length;Me++)if(0!=et.g[Me])return!1;return!0}function Jt(et){return-1==et.h}function Gt(et){for(var Me=et.g.length,ze=[],nt=0;nt<Me;nt++)ze[nt]=~et.g[nt];return new T(ze,~et.h).add(Le)}function Mn(et,Me){return et.add(Gt(Me))}function Wn(et,Me){for(;(65535&et[Me])!=et[Me];)et[Me+1]+=et[Me]>>>16,et[Me]&=65535,Me++}function Fn(et,Me){this.g=et,this.h=Me}function yr(et,Me){if(Ut(Me))throw Error("division by zero");if(Ut(et))return new Fn(we,we);if(Jt(et))return Me=yr(Gt(et),Me),new Fn(Gt(Me.g),Gt(Me.h));if(Jt(Me))return Me=yr(et,Gt(Me)),new Fn(Gt(Me.g),Me.h);if(30<et.g.length){if(Jt(et)||Jt(Me))throw Error("slowDivide_ only works with positive integers.");for(var ze=Le,nt=Me;0>=nt.l(et);)ze=hi(ze),nt=hi(nt);var st=Fr(ze,1),yt=Fr(nt,1);for(nt=Fr(nt,2),ze=Fr(ze,2);!Ut(nt);){var He=yt.add(nt);0>=He.l(et)&&(st=st.add(ze),yt=He),nt=Fr(nt,1),ze=Fr(ze,1)}return Me=Mn(et,st.j(Me)),new Fn(st,Me)}for(st=we;0<=et.l(Me);){for(ze=Math.max(1,Math.floor(et.m()/Me.m())),nt=48>=(nt=Math.ceil(Math.log(ze)/Math.LN2))?1:Math.pow(2,nt-48),He=(yt=X(ze)).j(Me);Jt(He)||0<He.l(et);)He=(yt=X(ze-=nt)).j(Me);Ut(yt)&&(yt=Le),st=st.add(yt),et=Mn(et,He)}return new Fn(st,et)}function hi(et){for(var Me=et.g.length+1,ze=[],nt=0;nt<Me;nt++)ze[nt]=et.i(nt)<<1|et.i(nt-1)>>>31;return new T(ze,et.h)}function Fr(et,Me){var ze=Me>>5;Me%=32;for(var nt=et.g.length-ze,st=[],yt=0;yt<nt;yt++)st[yt]=0<Me?et.i(yt+ze)>>>Me|et.i(yt+ze+1)<<32-Me:et.i(yt+ze);return new T(st,et.h)}(p=T.prototype).m=function(){if(Jt(this))return-Gt(this).m();for(var et=0,Me=1,ze=0;ze<this.g.length;ze++){var nt=this.i(ze);et+=(0<=nt?nt:4294967296+nt)*Me,Me*=4294967296}return et},p.toString=function(et){if(2>(et=et||10)||36<et)throw Error("radix out of range: "+et);if(Ut(this))return"0";if(Jt(this))return"-"+Gt(this).toString(et);for(var Me=X(Math.pow(et,6)),ze=this,nt="";;){var st=yr(ze,Me).g,yt=((0<(ze=Mn(ze,st.j(Me))).g.length?ze.g[0]:ze.h)>>>0).toString(et);if(Ut(ze=st))return yt+nt;for(;6>yt.length;)yt="0"+yt;nt=yt+nt}},p.i=function(et){return 0>et?0:et<this.g.length?this.g[et]:this.h},p.l=function(et){return Jt(et=Mn(this,et))?-1:Ut(et)?0:1},p.abs=function(){return Jt(this)?Gt(this):this},p.add=function(et){for(var Me=Math.max(this.g.length,et.g.length),ze=[],nt=0,st=0;st<=Me;st++){var yt=nt+(65535&this.i(st))+(65535&et.i(st)),He=(yt>>>16)+(this.i(st)>>>16)+(et.i(st)>>>16);nt=He>>>16,ze[st]=(He&=65535)<<16|(yt&=65535)}return new T(ze,-2147483648&ze[ze.length-1]?-1:0)},p.j=function(et){if(Ut(this)||Ut(et))return we;if(Jt(this))return Jt(et)?Gt(this).j(Gt(et)):Gt(Gt(this).j(et));if(Jt(et))return Gt(this.j(Gt(et)));if(0>this.l(ht)&&0>et.l(ht))return X(this.m()*et.m());for(var Me=this.g.length+et.g.length,ze=[],nt=0;nt<2*Me;nt++)ze[nt]=0;for(nt=0;nt<this.g.length;nt++)for(var st=0;st<et.g.length;st++){var yt=this.i(nt)>>>16,He=65535&this.i(nt),vd=et.i(st)>>>16,Hg=65535&et.i(st);ze[2*nt+2*st]+=He*Hg,Wn(ze,2*nt+2*st),ze[2*nt+2*st+1]+=yt*Hg,Wn(ze,2*nt+2*st+1),ze[2*nt+2*st+1]+=He*vd,Wn(ze,2*nt+2*st+1),ze[2*nt+2*st+2]+=yt*vd,Wn(ze,2*nt+2*st+2)}for(nt=0;nt<Me;nt++)ze[nt]=ze[2*nt+1]<<16|ze[2*nt];for(nt=Me;nt<2*Me;nt++)ze[nt]=0;return new T(ze,0)},p.A=function(et){return yr(this,et).h},p.and=function(et){for(var Me=Math.max(this.g.length,et.g.length),ze=[],nt=0;nt<Me;nt++)ze[nt]=this.i(nt)&et.i(nt);return new T(ze,this.h&et.h)},p.or=function(et){for(var Me=Math.max(this.g.length,et.g.length),ze=[],nt=0;nt<Me;nt++)ze[nt]=this.i(nt)|et.i(nt);return new T(ze,this.h|et.h)},p.xor=function(et){for(var Me=Math.max(this.g.length,et.g.length),ze=[],nt=0;nt<Me;nt++)ze[nt]=this.i(nt)^et.i(nt);return new T(ze,this.h^et.h)},f.prototype.digest=f.prototype.v,f.prototype.reset=f.prototype.s,f.prototype.update=f.prototype.u,Be=Oe.Md5=f,T.prototype.add=T.prototype.add,T.prototype.multiply=T.prototype.j,T.prototype.modulo=T.prototype.A,T.prototype.compare=T.prototype.l,T.prototype.toNumber=T.prototype.m,T.prototype.toString=T.prototype.toString,T.prototype.getBits=T.prototype.i,T.fromNumber=X,T.fromString=function ce(et,Me){if(0==et.length)throw Error("number format error: empty string");if(2>(Me=Me||10)||36<Me)throw Error("radix out of range: "+Me);if("-"==et.charAt(0))return Gt(ce(et.substring(1),Me));if(0<=et.indexOf("-"))throw Error('number format error: interior "-" character');for(var ze=X(Math.pow(Me,8)),nt=we,st=0;st<et.length;st+=8){var yt=Math.min(8,et.length-st),He=parseInt(et.substring(st,st+yt),Me);8>yt?(yt=X(Math.pow(Me,yt)),nt=nt.j(yt).add(X(He))):nt=(nt=nt.j(ze)).add(X(He))}return nt},pt=Oe.Integer=T}).apply(typeof Ie<"u"?Ie:typeof self<"u"?self:typeof window<"u"?window:{});var Bt,Kt,An,Jn,Dt,It,_t,Lt,At,Ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kt={};(function(){var p,o="function"==typeof Object.defineProperties?Object.defineProperty:function(I,$,ee){return I==Array.prototype||I==Object.prototype||(I[$]=ee.value),I},f=function u(I){I=["object"==typeof globalThis&&globalThis,I,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ct&&Ct];for(var $=0;$<I.length;++$){var ee=I[$];if(ee&&ee.Math==Math)return ee}throw Error("Cannot find global object")}(this);!function _(I,$){if($)e:{var ee=f;I=I.split(".");for(var pe=0;pe<I.length-1;pe++){var ct=I[pe];if(!(ct in ee))break e;ee=ee[ct]}($=$(pe=ee[I=I[I.length-1]]))!=pe&&null!=$&&o(ee,I,{configurable:!0,writable:!0,value:$})}}("Array.prototype.values",function(I){return I||function(){return function C(I,$){I instanceof String&&(I+="");var ee=0,pe=!1,ct={next:function(){if(!pe&&ee<I.length){var Tt=ee++;return{value:$(Tt,I[Tt]),done:!1}}return pe=!0,{done:!0,value:void 0}}};return ct[Symbol.iterator]=function(){return ct},ct}(this,function($,ee){return ee})}});var T=T||{},V=this||self;function G(I){var $=typeof I;return"array"==($="object"!=$?$:I?Array.isArray(I)?"array":$:"null")||"object"==$&&"number"==typeof I.length}function X(I){var $=typeof I;return"object"==$&&null!=I||"function"==$}function ce(I,$,ee){return I.call.apply(I.bind,arguments)}function we(I,$,ee){if(!I)throw Error();if(2<arguments.length){var pe=Array.prototype.slice.call(arguments,2);return function(){var ct=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ct,pe),I.apply($,ct)}}return function(){return I.apply($,arguments)}}function Le(I,$,ee){return(Le=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ce:we).apply(null,arguments)}function ht(I,$){var ee=Array.prototype.slice.call(arguments,1);return function(){var pe=ee.slice();return pe.push.apply(pe,arguments),I.apply(this,pe)}}function Ut(I,$){function ee(){}ee.prototype=$.prototype,I.aa=$.prototype,I.prototype=new ee,I.prototype.constructor=I,I.Qb=function(pe,ct,Tt){for(var an=Array(arguments.length-2),co=2;co<arguments.length;co++)an[co-2]=arguments[co];return $.prototype[ct].apply(pe,an)}}function Jt(I){const $=I.length;if(0<$){const ee=Array($);for(let pe=0;pe<$;pe++)ee[pe]=I[pe];return ee}return[]}function Gt(I,$){for(let ee=1;ee<arguments.length;ee++){const pe=arguments[ee];if(G(pe)){const ct=I.length||0,Tt=pe.length||0;I.length=ct+Tt;for(let an=0;an<Tt;an++)I[ct+an]=pe[an]}else I.push(pe)}}function Wn(I){return/^[\s\xa0]*$/.test(I)}function Fn(){var I=V.navigator;return I&&(I=I.userAgent)?I:""}function yr(I){return yr[" "](I),I}yr[" "]=function(){};var hi=!(-1==Fn().indexOf("Gecko")||-1!=Fn().toLowerCase().indexOf("webkit")&&-1==Fn().indexOf("Edge")||-1!=Fn().indexOf("Trident")||-1!=Fn().indexOf("MSIE")||-1!=Fn().indexOf("Edge"));function Fr(I,$,ee){for(const pe in I)$.call(ee,I[pe],pe,I)}function Me(I){const $={};for(const ee in I)$[ee]=I[ee];return $}const ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nt(I,$){let ee,pe;for(let ct=1;ct<arguments.length;ct++){for(ee in pe=arguments[ct],pe)I[ee]=pe[ee];for(let Tt=0;Tt<ze.length;Tt++)ee=ze[Tt],Object.prototype.hasOwnProperty.call(pe,ee)&&(I[ee]=pe[ee])}}function st(I){var $=1;I=I.split(":");const ee=[];for(;0<$&&I.length;)ee.push(I.shift()),$--;return I.length&&ee.push(I.join(":")),ee}function yt(I){V.setTimeout(()=>{throw I},0)}function He(){var I=S_;let $=null;return I.g&&($=I.g,I.g=I.g.next,I.g||(I.h=null),$.next=null),$}var Hg=new class Mn{constructor($,ee){this.i=$,this.j=ee,this.h=0,this.g=null}get(){let $;return 0<this.h?(this.h--,$=this.g,this.g=$.next,$.next=null):$=this.i(),$}}(()=>new ME,I=>I.reset());class ME{constructor(){this.next=this.g=this.h=null}set($,ee){this.h=$,this.g=ee,this.next=null}reset(){this.next=this.g=this.h=null}}let Gg,Tp=!1,S_=new class vd{constructor(){this.h=this.g=null}add($,ee){const pe=Hg.get();pe.set($,ee),this.h?this.h.next=pe:this.g=pe,this.h=pe}},V1=()=>{const I=V.Promise.resolve(void 0);Gg=()=>{I.then(OE)}};var OE=()=>{for(var I;I=He();){try{I.h.call(I.g)}catch(ee){yt(ee)}var $=Hg;$.j(I),100>$.h&&($.h++,I.next=$.g,$.g=I)}Tp=!1};function ws(){this.s=this.s,this.C=this.C}function Ga(I,$){this.type=I,this.g=this.target=$,this.defaultPrevented=!1}ws.prototype.s=!1,ws.prototype.ma=function(){this.s||(this.s=!0,this.N())},ws.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Ga.prototype.h=function(){this.defaultPrevented=!0};var PE=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var I=!1,$=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const ee=()=>{};V.addEventListener("test",ee,$),V.removeEventListener("test",ee,$)}catch{}return I}();function D_(I,$){if(Ga.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var ee=this.type=I.type,pe=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=$,$=I.relatedTarget){if(hi){e:{try{yr($.nodeName);var ct=!0;break e}catch{}ct=!1}ct||($=null)}}else"mouseover"==ee?$=I.fromElement:"mouseout"==ee&&($=I.toElement);this.relatedTarget=$,pe?(this.clientX=void 0!==pe.clientX?pe.clientX:pe.pageX,this.clientY=void 0!==pe.clientY?pe.clientY:pe.pageY,this.screenX=pe.screenX||0,this.screenY=pe.screenY||0):(this.clientX=void 0!==I.clientX?I.clientX:I.pageX,this.clientY=void 0!==I.clientY?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType="string"==typeof I.pointerType?I.pointerType:cv[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&D_.aa.h.call(this)}}Ut(D_,Ga);var cv={2:"touch",3:"pen",4:"mouse"};D_.prototype.h=function(){D_.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var xp="closure_listenable_"+(1e6*Math.random()|0),NE=0;function kE(I,$,ee,pe,ct){this.listener=I,this.proxy=null,this.src=$,this.type=ee,this.capture=!!pe,this.ha=ct,this.key=++NE,this.da=this.fa=!1}function R_(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function $g(I){this.src=I,this.g={},this.h=0}function uv(I,$){var ee=$.type;if(ee in I.g){var Tt,pe=I.g[ee],ct=Array.prototype.indexOf.call(pe,$,void 0);(Tt=0<=ct)&&Array.prototype.splice.call(pe,ct,1),Tt&&(R_($),0==I.g[ee].length&&(delete I.g[ee],I.h--))}}function lv(I,$,ee,pe){for(var ct=0;ct<I.length;++ct){var Tt=I[ct];if(!Tt.da&&Tt.listener==$&&Tt.capture==!!ee&&Tt.ha==pe)return ct}return-1}$g.prototype.add=function(I,$,ee,pe,ct){var Tt=I.toString();(I=this.g[Tt])||(I=this.g[Tt]=[],this.h++);var an=lv(I,$,pe,ct);return-1<an?($=I[an],ee||($.fa=!1)):(($=new kE($,this.src,Tt,!!pe,ct)).fa=ee,I.push($)),$};var zg="closure_lm_"+(1e6*Math.random()|0),dv={};function B1(I,$,ee,pe,ct){if(pe&&pe.once)return j1(I,$,ee,pe,ct);if(Array.isArray($)){for(var Tt=0;Tt<$.length;Tt++)B1(I,$[Tt],ee,pe,ct);return null}return ee=Sp(ee),I&&I[xp]?I.K($,ee,X(pe)?!!pe.capture:!!pe,ct):U1(I,$,ee,!1,pe,ct)}function U1(I,$,ee,pe,ct,Tt){if(!$)throw Error("Invalid event type");var an=X(ct)?!!ct.capture:!!ct,co=M_(I);if(co||(I[zg]=co=new $g(I)),(ee=co.add($,ee,pe,an,Tt)).proxy)return ee;if(pe=function FE(){const $=LE;return function I(ee){return $.call(I.src,I.listener,ee)}}(),ee.proxy=pe,pe.src=I,pe.listener=ee,I.addEventListener)PE||(ct=an),void 0===ct&&(ct=!1),I.addEventListener($.toString(),pe,ct);else if(I.attachEvent)I.attachEvent(H1($.toString()),pe);else{if(!I.addListener||!I.removeListener)throw Error("addEventListener and attachEvent are unavailable.");I.addListener(pe)}return ee}function j1(I,$,ee,pe,ct){if(Array.isArray($)){for(var Tt=0;Tt<$.length;Tt++)j1(I,$[Tt],ee,pe,ct);return null}return ee=Sp(ee),I&&I[xp]?I.L($,ee,X(pe)?!!pe.capture:!!pe,ct):U1(I,$,ee,!0,pe,ct)}function il(I,$,ee,pe,ct){if(Array.isArray($))for(var Tt=0;Tt<$.length;Tt++)il(I,$[Tt],ee,pe,ct);else pe=X(pe)?!!pe.capture:!!pe,ee=Sp(ee),I&&I[xp]?(I=I.i,($=String($).toString())in I.g&&-1<(ee=lv(Tt=I.g[$],ee,pe,ct))&&(R_(Tt[ee]),Array.prototype.splice.call(Tt,ee,1),0==Tt.length&&(delete I.g[$],I.h--))):I&&(I=M_(I))&&($=I.g[$.toString()],I=-1,$&&(I=lv($,ee,pe,ct)),(ee=-1<I?$[I]:null)&&Wg(ee))}function Wg(I){if("number"!=typeof I&&I&&!I.da){var $=I.src;if($&&$[xp])uv($.i,I);else{var ee=I.type,pe=I.proxy;$.removeEventListener?$.removeEventListener(ee,pe,I.capture):$.detachEvent?$.detachEvent(H1(ee),pe):$.addListener&&$.removeListener&&$.removeListener(pe),(ee=M_($))?(uv(ee,I),0==ee.h&&(ee.src=null,$[zg]=null)):R_(I)}}}function H1(I){return I in dv?dv[I]:dv[I]="on"+I}function LE(I,$){if(I.da)I=!0;else{$=new D_($,this);var ee=I.listener,pe=I.ha||I.src;I.fa&&Wg(I),I=ee.call(pe,$)}return I}function M_(I){return(I=I[zg])instanceof $g?I:null}var O_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sp(I){return"function"==typeof I?I:(I[O_]||(I[O_]=function($){return I.handleEvent($)}),I[O_])}function sa(){ws.call(this),this.i=new $g(this),this.M=this,this.F=null}function Nc(I,$){var ee,pe=I.F;if(pe)for(ee=[];pe;pe=pe.F)ee.push(pe);if(I=I.M,pe=$.type||$,"string"==typeof $)$=new Ga($,I);else if($ instanceof Ga)$.target=$.target||I;else{var ct=$;nt($=new Ga(pe,I),ct)}if(ct=!0,ee)for(var Tt=ee.length-1;0<=Tt;Tt--){var an=$.g=ee[Tt];ct=qg(an,pe,!0,$)&&ct}if(ct=qg(an=$.g=I,pe,!0,$)&&ct,ct=qg(an,pe,!1,$)&&ct,ee)for(Tt=0;Tt<ee.length;Tt++)ct=qg(an=$.g=ee[Tt],pe,!1,$)&&ct}function qg(I,$,ee,pe){if(!($=I.i.g[String($)]))return!0;$=$.concat();for(var ct=!0,Tt=0;Tt<$.length;++Tt){var an=$[Tt];if(an&&!an.da&&an.capture==ee){var co=an.listener,Aa=an.ha||an.src;an.fa&&uv(I.i,an),ct=!1!==co.call(Aa,pe)&&ct}}return ct&&!pe.defaultPrevented}function fv(I,$,ee){if("function"==typeof I)ee&&(I=Le(I,ee));else{if(!I||"function"!=typeof I.handleEvent)throw Error("Invalid listener argument");I=Le(I.handleEvent,I)}return 2147483647<Number($)?-1:V.setTimeout(I,$||0)}function hv(I){I.g=fv(()=>{I.g=null,I.i&&(I.i=!1,hv(I))},I.l);const $=I.h;I.h=null,I.m.apply(null,$)}Ut(sa,ws),sa.prototype[xp]=!0,sa.prototype.removeEventListener=function(I,$,ee,pe){il(this,I,$,ee,pe)},sa.prototype.N=function(){if(sa.aa.N.call(this),this.i){var $,I=this.i;for($ in I.g){for(var ee=I.g[$],pe=0;pe<ee.length;pe++)R_(ee[pe]);delete I.g[$],I.h--}}this.F=null},sa.prototype.K=function(I,$,ee,pe){return this.i.add(String(I),$,!1,ee,pe)},sa.prototype.L=function(I,$,ee,pe){return this.i.add(String(I),$,!0,ee,pe)};class P_ extends ws{constructor($,ee){super(),this.m=$,this.l=ee,this.h=null,this.i=!1,this.g=null}j($){this.h=arguments,this.g?this.i=!0:hv(this)}N(){super.N(),this.g&&(V.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mh(I){ws.call(this),this.h=I,this.g={}}Ut(mh,ws);var Nl=[];function G1(I){Fr(I.g,function($,ee){this.g.hasOwnProperty(ee)&&Wg($)},I),I.g={}}mh.prototype.N=function(){mh.aa.N.call(this),G1(this)},mh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pv=V.JSON.stringify,gv=V.JSON.parse,VE=class{stringify(I){return V.JSON.stringify(I,void 0)}parse(I){return V.JSON.parse(I,void 0)}};function hf(){}function pf(){}hf.prototype.h=null;var kl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kg(){Ga.call(this,"d")}function _h(){Ga.call(this,"c")}Ut(Kg,Ga),Ut(_h,Ga);var gf={},_v=null;function N_(){return _v=_v||new sa}function $1(I){Ga.call(this,gf.La,I)}function Xg(I){const $=N_();Nc($,new $1($))}function z1(I,$){Ga.call(this,gf.STAT_EVENT,I),this.stat=$}function lc(I){const $=N_();Nc($,new z1($,I))}function Qg(I,$){Ga.call(this,gf.Ma,I),this.size=$}function Yg(I,$){if("function"!=typeof I)throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){I()},$)}function Dp(){this.g=!0}function vh(I,$,ee,pe){I.info(function(){return"XMLHTTP TEXT ("+$+"): "+function HE(I,$){if(!I.g)return $;if(!$)return null;try{var ee=JSON.parse($);if(ee)for(I=0;I<ee.length;I++)if(Array.isArray(ee[I])){var pe=ee[I];if(!(2>pe.length)){var ct=pe[1];if(Array.isArray(ct)&&!(1>ct.length)){var Tt=ct[0];if("noop"!=Tt&&"stop"!=Tt&&"close"!=Tt)for(var an=1;an<ct.length;an++)ct[an]=""}}}return pv(ee)}catch{return $}}(I,ee)+(pe?" "+pe:"")})}gf.La="serverreachability",Ut($1,Ga),gf.STAT_EVENT="statevent",Ut(z1,Ga),gf.Ma="timingevent",Ut(Qg,Ga),Dp.prototype.xa=function(){this.g=!1},Dp.prototype.info=function(){};var F_,Zg={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},k_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function mf(){}function Pu(I,$,ee,pe){this.j=I,this.i=$,this.l=ee,this.R=pe||1,this.U=new mh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rp}function Rp(){this.i=null,this.g="",this.h=!1}Ut(mf,hf),mf.prototype.g=function(){return new XMLHttpRequest},mf.prototype.i=function(){return{}},F_=new mf;var W1={},vv={};function yv(I,$,ee){I.L=1,I.v=B_(Fl($)),I.m=ee,I.P=!0,Jg(I,null)}function Jg(I,$){I.F=Date.now(),Ev(I),I.A=Fl(I.v);var ee=I.A,pe=I.R;Array.isArray(pe)||(pe=[String(pe)]),oy(ee.i,"t",pe),I.C=0,ee=I.j.J,I.h=new Rp,I.g=Cy(I.j,ee?$:null,!I.m),0<I.O&&(I.M=new P_(Le(I.Y,I,I.g),I.O)),$=I.U,ee=I.g,pe=I.ca;var ct="readystatechange";Array.isArray(ct)||(ct&&(Nl[0]=ct.toString()),ct=Nl);for(var Tt=0;Tt<ct.length;Tt++){var an=B1(ee,ct[Tt],pe||$.handleEvent,!1,$.h||$);if(!an)break;$.g[an.key]=an}$=I.H?Me(I.H):{},I.m?(I.u||(I.u="POST"),$["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,$)):(I.u="GET",I.g.ea(I.A,I.u,null,$)),Xg(),function BE(I,$,ee,pe,ct,Tt){I.info(function(){if(I.g)if(Tt)for(var an="",co=Tt.split("&"),Aa=0;Aa<co.length;Aa++){var Si=co[Aa].split("=");if(1<Si.length){var aa=Si[0];Si=Si[1];var dc=aa.split("_");an=2<=dc.length&&"type"==dc[1]?an+(aa+"=")+Si+"&":an+(aa+"=redacted&")}}else an=null;else an=Tt;return"XMLHTTP REQ ("+pe+") [attempt "+ct+"]: "+$+"\n"+ee+"\n"+an})}(I.i,I.u,I.A,I.l,I.R,I.m)}function L_(I){return!!I.g&&"GET"==I.u&&2!=I.L&&I.j.Ca}function GE(I,$){var ee=I.C,pe=$.indexOf("\n",ee);return-1==pe?vv:(ee=Number($.substring(ee,pe)),isNaN(ee)?W1:(pe+=1)+ee>$.length?vv:($=$.slice(pe,pe+ee),I.C=pe+ee,$))}function Ev(I){I.S=Date.now()+I.I,$E(I,I.I)}function $E(I,$){if(null!=I.B)throw Error("WatchDog timer not null");I.B=Yg(Le(I.ba,I),$)}function Cv(I){I.B&&(V.clearTimeout(I.B),I.B=null)}function em(I){0==I.j.G||I.J||gm(I.j,I)}function Mp(I){Cv(I);var $=I.M;$&&"function"==typeof $.ma&&$.ma(),I.M=null,G1(I.U),I.g&&($=I.g,I.g=null,$.abort(),$.ma())}function wv(I,$){try{var ee=I.j;if(0!=ee.G&&(ee.g==I||tm(ee.h,I)))if(!I.K&&tm(ee.h,I)&&3==ee.G){try{var pe=ee.Da.g.parse($)}catch{pe=null}if(Array.isArray(pe)&&3==pe.length){var ct=pe;if(0==ct[0]){e:if(!ee.u){if(ee.g){if(!(ee.g.F+3e3<I.F))break e;pm(ee),Np(ee)}Dv(ee),lc(18)}}else ee.za=ct[1],0<ee.za-ee.T&&37500>ct[2]&&ee.F&&0==ee.v&&!ee.C&&(ee.C=Yg(Le(ee.Za,ee),6e3));if(1>=X1(ee.h)&&ee.ca){try{ee.ca()}catch{}ee.ca=void 0}}else Ch(ee,11)}else if((I.K||ee.g==I)&&pm(ee),!Wn($))for(ct=ee.Da.g.parse($),$=0;$<ct.length;$++){let Si=ct[$];if(ee.T=Si[0],Si=Si[1],2==ee.G)if("c"==Si[0]){ee.K=Si[1],ee.ia=Si[2];const aa=Si[3];null!=aa&&(ee.la=aa,ee.j.info("VER="+ee.la));const dc=Si[4];null!=dc&&(ee.Aa=dc,ee.j.info("SVER="+ee.Aa));const wh=Si[5];null!=wh&&"number"==typeof wh&&0<wh&&(ee.L=pe=1.5*wh,ee.j.info("backChannelRequestTimeoutMs_="+pe)),pe=ee;const Qo=I.g;if(Qo){const mm=Qo.g?Qo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mm){var Tt=pe.h;Tt.g||-1==mm.indexOf("spdy")&&-1==mm.indexOf("quic")&&-1==mm.indexOf("h2")||(Tt.j=Tt.l,Tt.g=new Set,Tt.h&&(yh(Tt,Tt.h),Tt.h=null))}if(pe.D){const q_=Qo.g?Qo.g.getResponseHeader("X-HTTP-Session-Id"):null;q_&&(pe.ya=q_,bo(pe.I,pe.D,q_))}}ee.G=3,ee.l&&ee.l.ua(),ee.ba&&(ee.R=Date.now()-I.F,ee.j.info("Handshake RTT: "+ee.R+"ms"));var an=I;if((pe=ee).qa=Ey(pe,pe.J?pe.ia:null,pe.W),an.K){V_(pe.h,an);var co=an,Aa=pe.L;Aa&&(co.I=Aa),co.B&&(Cv(co),Ev(co)),pe.g=an}else _y(pe);0<ee.i.length&&wd(ee)}else"stop"!=Si[0]&&"close"!=Si[0]||Ch(ee,7);else 3==ee.G&&("stop"==Si[0]||"close"==Si[0]?"stop"==Si[0]?Ch(ee,7):fm(ee):"noop"!=Si[0]&&ee.l&&ee.l.ta(Si),ee.v=0)}Xg()}catch{}}Pu.prototype.ca=function(I){I=I.target;const $=this.M;$&&3==Cd(I)?$.j():this.Y(I)},Pu.prototype.Y=function(I){try{if(I==this.g)e:{const dc=Cd(this.g);var $=this.g.Ba();if(this.g.Z(),!(3>dc)&&(3!=dc||this.g&&(this.h.h||this.g.oa()||fy(this.g)))){this.J||4!=dc||7==$||Xg(),Cv(this);var ee=this.g.Z();this.X=ee;t:if(L_(this)){var pe=fy(this.g);I="";var ct=pe.length,Tt=4==Cd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Mp(this),em(this);var an="";break t}this.h.i=new V.TextDecoder}for($=0;$<ct;$++)this.h.h=!0,I+=this.h.i.decode(pe[$],{stream:!(Tt&&$==ct-1)});pe.length=0,this.h.g+=I,this.C=0,an=this.h.g}else an=this.g.oa();if(this.o=200==ee,function UE(I,$,ee,pe,ct,Tt,an){I.info(function(){return"XMLHTTP RESP ("+pe+") [ attempt "+ct+"]: "+$+"\n"+ee+"\n"+Tt+" "+an})}(this.i,this.u,this.A,this.l,this.R,dc,ee),this.o){if(this.T&&!this.K){t:{if(this.g){var co,Aa=this.g;if((co=Aa.g?Aa.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wn(co)){var Si=co;break t}}Si=null}if(!(ee=Si)){this.o=!1,this.s=3,lc(12),Mp(this),em(this);break e}vh(this.i,this.l,ee,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wv(this,ee)}if(this.P){let Qo;for(ee=!0;!this.J&&this.C<an.length;){if(Qo=GE(this,an),Qo==vv){4==dc&&(this.s=4,lc(14),ee=!1),vh(this.i,this.l,null,"[Incomplete Response]");break}if(Qo==W1){this.s=4,lc(15),vh(this.i,this.l,an,"[Invalid Chunk]"),ee=!1;break}vh(this.i,this.l,Qo,null),wv(this,Qo)}if(L_(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=dc||0!=an.length||this.h.h||(this.s=1,lc(16),ee=!1),this.o=this.o&&ee,ee){if(0<an.length&&!this.W){this.W=!0;var aa=this.j;aa.g==this&&aa.ba&&!aa.M&&(aa.j.info("Great, no buffering proxy detected. Bytes received: "+an.length),W_(aa),aa.M=!0,lc(11))}}else vh(this.i,this.l,an,"[Invalid Chunked Response]"),Mp(this),em(this)}else vh(this.i,this.l,an,null),wv(this,an);4==dc&&Mp(this),this.o&&!this.J&&(4==dc?gm(this.j,this):(this.o=!1,Ev(this)))}else(function Sv(I){const $={};I=(I.g&&2<=Cd(I)&&I.g.getAllResponseHeaders()||"").split("\r\n");for(let pe=0;pe<I.length;pe++){if(Wn(I[pe]))continue;var ee=st(I[pe]);const ct=ee[0];if("string"!=typeof(ee=ee[1]))continue;ee=ee.trim();const Tt=$[ct]||[];$[ct]=Tt,Tt.push(ee)}!function et(I,$){for(const ee in I)$.call(void 0,I[ee],ee,I)}($,function(pe){return pe.join(", ")})})(this.g),400==ee&&0<an.indexOf("Unknown SID")?(this.s=3,lc(12)):(this.s=0,lc(13)),Mp(this),em(this)}}}catch{}},Pu.prototype.cancel=function(){this.J=!0,Mp(this)},Pu.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(function jE(I,$){I.info(function(){return"TIMEOUT: "+$})}(this.i,this.A),2!=this.L&&(Xg(),lc(17)),Mp(this),this.s=2,em(this)):$E(this,this.S-I)};var Aw=class{constructor(I,$){this.g=I,this.map=$}};function q1(I){this.l=I||10,I=V.PerformanceNavigationTiming?0<(I=V.performance.getEntriesByType("navigation")).length&&("hq"==I[0].nextHopProtocol||"h2"==I[0].nextHopProtocol):!!(V.chrome&&V.chrome.loadTimes&&V.chrome.loadTimes()&&V.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function K1(I){return!!I.h||!!I.g&&I.g.size>=I.j}function X1(I){return I.h?1:I.g?I.g.size:0}function tm(I,$){return I.h?I.h==$:!!I.g&&I.g.has($)}function yh(I,$){I.g?I.g.add($):I.h=$}function V_(I,$){I.h&&I.h==$?I.h=null:I.g&&I.g.has($)&&I.g.delete($)}function nm(I){if(null!=I.h)return I.i.concat(I.h.D);if(null!=I.g&&0!==I.g.size){let $=I.i;for(const ee of I.g.values())$=$.concat(ee.D);return $}return Jt(I.i)}function Iv(I,$){if(I.forEach&&"function"==typeof I.forEach)I.forEach($,void 0);else if(G(I)||"string"==typeof I)Array.prototype.forEach.call(I,$,void 0);else for(var ee=function rm(I){if(I.na&&"function"==typeof I.na)return I.na();if(!I.V||"function"!=typeof I.V){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(G(I)||"string"==typeof I){var $=[];I=I.length;for(var ee=0;ee<I;ee++)$.push(ee);return $}$=[],ee=0;for(const pe in I)$[ee++]=pe;return $}}}(I),pe=function Q1(I){if(I.V&&"function"==typeof I.V)return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if("string"==typeof I)return I.split("");if(G(I)){for(var $=[],ee=I.length,pe=0;pe<ee;pe++)$.push(I[pe]);return $}for(pe in $=[],ee=0,I)$[ee++]=I[pe];return $}(I),ct=pe.length,Tt=0;Tt<ct;Tt++)$.call(void 0,pe[Tt],ee&&ee[Tt],I)}q1.prototype.cancel=function(){if(this.i=nm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const I of this.g.values())I.cancel();this.g.clear()}};var Y1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _f(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof _f){this.h=I.h,om(this,I.j),this.o=I.o,this.g=I.g,sm(this,I.s),this.l=I.l;var $=I.i,ee=new cm;ee.i=$.i,$.g&&(ee.g=new Map($.g),ee.h=$.h),Z1(this,ee),this.m=I.m}else I&&($=String(I).match(Y1))?(this.h=!1,om(this,$[1]||"",!0),this.o=yd($[2]||""),this.g=yd($[3]||"",!0),sm(this,$[4]),this.l=yd($[5]||"",!0),Z1(this,$[6]||"",!0),this.m=yd($[7]||"")):(this.h=!1,this.i=new cm(null,this.h))}function Fl(I){return new _f(I)}function om(I,$,ee){I.j=ee?yd($,!0):$,I.j&&(I.j=I.j.replace(/:$/,""))}function sm(I,$){if($){if($=Number($),isNaN($)||0>$)throw Error("Bad port number "+$);I.s=$}else I.s=null}function Z1(I,$,ee){$ instanceof cm?(I.i=$,function Av(I,$){$&&!I.j&&(Ed(I),I.i=null,I.g.forEach(function(ee,pe){var ct=pe.toLowerCase();pe!=ct&&(ry(this,pe),oy(this,ct,ee))},I)),I.j=$}(I.i,I.h)):(ee||($=am($,ty)),I.i=new cm($,I.h))}function bo(I,$,ee){I.i.set($,ee)}function B_(I){return bo(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function yd(I,$){return I?$?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function am(I,$,ee){return"string"==typeof I?(I=encodeURI(I).replace($,zE),ee&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function zE(I){return"%"+((I=I.charCodeAt(0))>>4&15).toString(16)+(15&I).toString(16)}_f.prototype.toString=function(){var I=[],$=this.j;$&&I.push(am($,J1,!0),":");var ee=this.g;return(ee||"file"==$)&&(I.push("//"),($=this.o)&&I.push(am($,J1,!0),"@"),I.push(encodeURIComponent(String(ee)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(ee=this.s)&&I.push(":",String(ee))),(ee=this.l)&&(this.g&&"/"!=ee.charAt(0)&&I.push("/"),I.push(am(ee,"/"==ee.charAt(0)?ey:U_,!0))),(ee=this.i.toString())&&I.push("?",ee),(ee=this.m)&&I.push("#",am(ee,ny)),I.join("")};var J1=/[#\/\?@]/g,U_=/[#\?:]/g,ey=/[#\?]/g,ty=/[#\?@]/g,ny=/#/g;function cm(I,$){this.h=this.g=null,this.i=I||null,this.j=!!$}function Ed(I){I.g||(I.g=new Map,I.h=0,I.i&&function im(I,$){if(I){I=I.split("&");for(var ee=0;ee<I.length;ee++){var pe=I[ee].indexOf("="),ct=null;if(0<=pe){var Tt=I[ee].substring(0,pe);ct=I[ee].substring(pe+1)}else Tt=I[ee];$(Tt,ct?decodeURIComponent(ct.replace(/\+/g," ")):"")}}}(I.i,function($,ee){I.add(decodeURIComponent($.replace(/\+/g," ")),ee)}))}function ry(I,$){Ed(I),$=Op(I,$),I.g.has($)&&(I.i=null,I.h-=I.g.get($).length,I.g.delete($))}function iy(I,$){return Ed(I),$=Op(I,$),I.g.has($)}function oy(I,$,ee){ry(I,$),0<ee.length&&(I.i=null,I.g.set(Op(I,$),Jt(ee)),I.h+=ee.length)}function Op(I,$){return $=String($),I.j&&($=$.toLowerCase()),$}function vf(I,$,ee,pe,ct){try{ct&&(ct.onload=null,ct.onerror=null,ct.onabort=null,ct.ontimeout=null),pe(ee)}catch{}}function lm(){this.g=new VE}function j_(I,$,ee){const pe=ee||"";try{Iv(I,function(ct,Tt){let an=ct;X(ct)&&(an=pv(ct)),$.push(pe+Tt+"="+encodeURIComponent(an))})}catch(ct){throw $.push(pe+"type="+encodeURIComponent("_badmap")),ct}}function H_(I){this.l=I.Ub||null,this.j=I.eb||!1}function G_(I,$){sa.call(this),this.D=I,this.o=$,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function bv(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}function Eh(I){I.readyState=4,I.l=null,I.j=null,I.v=null,dm(I)}function dm(I){I.onreadystatechange&&I.onreadystatechange.call(I)}function Tv(I){let $="";return Fr(I,function(ee,pe){$+=pe,$+=":",$+=ee,$+="\r\n"}),$}function xv(I,$,ee){e:{for(pe in ee){var pe=!1;break e}pe=!0}pe||(ee=Tv(ee),"string"==typeof I?null!=ee&&encodeURIComponent(String(ee)):bo(I,$,ee))}function Xo(I){sa.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(p=cm.prototype).add=function(I,$){Ed(this),this.i=null,I=Op(this,I);var ee=this.g.get(I);return ee||this.g.set(I,ee=[]),ee.push($),this.h+=1,this},p.forEach=function(I,$){Ed(this),this.g.forEach(function(ee,pe){ee.forEach(function(ct){I.call($,ct,pe,this)},this)},this)},p.na=function(){Ed(this);const I=Array.from(this.g.values()),$=Array.from(this.g.keys()),ee=[];for(let pe=0;pe<$.length;pe++){const ct=I[pe];for(let Tt=0;Tt<ct.length;Tt++)ee.push($[pe])}return ee},p.V=function(I){Ed(this);let $=[];if("string"==typeof I)iy(this,I)&&($=$.concat(this.g.get(Op(this,I))));else{I=Array.from(this.g.values());for(let ee=0;ee<I.length;ee++)$=$.concat(I[ee])}return $},p.set=function(I,$){return Ed(this),this.i=null,iy(this,I=Op(this,I))&&(this.h-=this.g.get(I).length),this.g.set(I,[$]),this.h+=1,this},p.get=function(I,$){return I&&0<(I=this.V(I)).length?String(I[0]):$},p.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],$=Array.from(this.g.keys());for(var ee=0;ee<$.length;ee++){var pe=$[ee];const Tt=encodeURIComponent(String(pe)),an=this.V(pe);for(pe=0;pe<an.length;pe++){var ct=Tt;""!==an[pe]&&(ct+="="+encodeURIComponent(String(an[pe]))),I.push(ct)}}return this.i=I.join("&")},Ut(H_,hf),H_.prototype.g=function(){return new G_(this.l,this.j)},H_.prototype.i=function(I){return function(){return I}}({}),Ut(G_,sa),(p=G_.prototype).open=function(I,$){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=$,this.readyState=1,dm(this)},p.send=function(I){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const $={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&($.body=I),(this.D||V).fetch(new Request(this.A,$)).then(this.Sa.bind(this),this.ga.bind(this))},p.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Eh(this)),this.readyState=0},p.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,dm(this)),this.g&&(this.readyState=3,dm(this),this.g)))if("arraybuffer"===this.responseType)I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof V.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bv(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))},p.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var $=I.value?I.value:new Uint8Array(0);($=this.v.decode($,{stream:!I.done}))&&(this.response=this.responseText+=$)}I.done?Eh(this):dm(this),3==this.readyState&&bv(this)}},p.Ra=function(I){this.g&&(this.response=this.responseText=I,Eh(this))},p.Qa=function(I){this.g&&(this.response=I,Eh(this))},p.ga=function(){this.g&&Eh(this)},p.setRequestHeader=function(I,$){this.u.append(I,$)},p.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},p.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],$=this.h.entries();for(var ee=$.next();!ee.done;)I.push((ee=ee.value)[0]+": "+ee[1]),ee=$.next();return I.join("\r\n")},Object.defineProperty(G_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(I){this.m=I?"include":"same-origin"}}),Ut(Xo,sa);var ay=/^https?$/i,cy=["POST","PUT"];function $_(I,$){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=$,I.m=5,uy(I),z_(I)}function uy(I){I.A||(I.A=!0,Nc(I,"complete"),Nc(I,"error"))}function ly(I){if(I.h&&typeof T<"u"&&(!I.v[1]||4!=Cd(I)||2!=I.Z()))if(I.u&&4==Cd(I))fv(I.Ea,0,I);else if(Nc(I,"readystatechange"),4==Cd(I)){I.h=!1;try{const an=I.Z();e:switch(an){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var $=!0;break e;default:$=!1}var ee;if(!(ee=$)){var pe;if(pe=0===an){var ct=String(I.D).match(Y1)[1]||null;!ct&&V.self&&V.self.location&&(ct=V.self.location.protocol.slice(0,-1)),pe=!ay.test(ct?ct.toLowerCase():"")}ee=pe}if(ee)Nc(I,"complete"),Nc(I,"success");else{I.m=6;try{var Tt=2<Cd(I)?I.g.statusText:""}catch{Tt=""}I.l=Tt+" ["+I.Z()+"]",uy(I)}}finally{z_(I)}}}function z_(I,$){if(I.g){dy(I);const ee=I.g,pe=I.v[0]?()=>{}:null;I.g=null,I.v=null,$||Nc(I,"ready");try{ee.onreadystatechange=pe}catch{}}}function dy(I){I.I&&(V.clearTimeout(I.I),I.I=null)}function Cd(I){return I.g?I.g.readyState:0}function fy(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function ol(I,$,ee){return ee&&ee.internalChannelParams&&ee.internalChannelParams[I]||$}function Pp(I){this.Aa=0,this.i=[],this.j=new Dp,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ol("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ol("baseRetryDelayMs",5e3,I),this.cb=ol("retryDelaySeedMs",1e4,I),this.Wa=ol("forwardChannelMaxRetries",2,I),this.wa=ol("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new q1(I&&I.concurrentRequestLimit),this.Da=new lm,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function fm(I){if(hy(I),3==I.G){var $=I.U++,ee=Fl(I.I);if(bo(ee,"SID",I.K),bo(ee,"RID",$),bo(ee,"TYPE","terminate"),hm(I,ee),($=new Pu(I,I.j,$)).L=2,$.v=B_(Fl(ee)),ee=!1,V.navigator&&V.navigator.sendBeacon)try{ee=V.navigator.sendBeacon($.v.toString(),"")}catch{}!ee&&V.Image&&((new Image).src=$.v,ee=!0),ee||($.g=Cy($.j,null),$.g.ea($.v)),$.F=Date.now(),Ev($)}Rv(I)}function Np(I){I.g&&(W_(I),I.g.cancel(),I.g=null)}function hy(I){Np(I),I.u&&(V.clearTimeout(I.u),I.u=null),pm(I),I.h.cancel(),I.s&&("number"==typeof I.s&&V.clearTimeout(I.s),I.s=null)}function wd(I){if(!K1(I.h)&&!I.s){I.s=!0;var $=I.Ga;Gg||V1(),Tp||(Gg(),Tp=!0),S_.add($,I),I.B=0}}function gy(I,$){var ee;ee=$?$.l:I.U++;const pe=Fl(I.I);bo(pe,"SID",I.K),bo(pe,"RID",ee),bo(pe,"AID",I.T),hm(I,pe),I.m&&I.o&&xv(pe,I.m,I.o),ee=new Pu(I,I.j,ee,I.B+1),null===I.m&&(ee.H=I.o),$&&(I.i=$.D.concat(I.i)),$=my(I,ee,1e3),ee.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),yh(I.h,ee),yv(ee,pe,$)}function hm(I,$){I.H&&Fr(I.H,function(ee,pe){bo($,pe,ee)}),I.l&&Iv({},function(ee,pe){bo($,pe,ee)})}function my(I,$,ee){ee=Math.min(I.i.length,ee);var pe=I.l?Le(I.l.Na,I.l,I):null;e:{var ct=I.i;let Tt=-1;for(;;){const an=["count="+ee];-1==Tt?0<ee?(Tt=ct[0].g,an.push("ofs="+Tt)):Tt=0:an.push("ofs="+Tt);let co=!0;for(let Aa=0;Aa<ee;Aa++){let Si=ct[Aa].g;const aa=ct[Aa].map;if(Si-=Tt,0>Si)Tt=Math.max(0,ct[Aa].g-100),co=!1;else try{j_(aa,an,"req"+Si+"_")}catch{pe&&pe(aa)}}if(co){pe=an.join("&");break e}}}return I=I.i.splice(0,ee),$.D=I,pe}function _y(I){if(!I.g&&!I.u){I.Y=1;var $=I.Fa;Gg||V1(),Tp||(Gg(),Tp=!0),S_.add($,I),I.v=0}}function Dv(I){return!(I.g||I.u||3<=I.v||(I.Y++,I.u=Yg(Le(I.Fa,I),yy(I,I.v)),I.v++,0))}function W_(I){null!=I.A&&(V.clearTimeout(I.A),I.A=null)}function vy(I){I.g=new Pu(I,I.j,"rpc",I.Y),null===I.m&&(I.g.H=I.o),I.g.O=0;var $=Fl(I.qa);bo($,"RID","rpc"),bo($,"SID",I.K),bo($,"AID",I.T),bo($,"CI",I.F?"0":"1"),!I.F&&I.ja&&bo($,"TO",I.ja),bo($,"TYPE","xmlhttp"),hm(I,$),I.m&&I.o&&xv($,I.m,I.o),I.L&&(I.g.I=I.L);var ee=I.g;I=I.ia,ee.L=1,ee.v=B_(Fl($)),ee.m=null,ee.P=!0,Jg(ee,I)}function pm(I){null!=I.C&&(V.clearTimeout(I.C),I.C=null)}function gm(I,$){var ee=null;if(I.g==$){pm(I),W_(I),I.g=null;var pe=2}else{if(!tm(I.h,$))return;ee=$.D,V_(I.h,$),pe=1}if(0!=I.G)if($.o)if(1==pe){ee=$.m?$.m.length:0,$=Date.now()-$.F;var ct=I.B;Nc(pe=N_(),new Qg(pe,ee)),wd(I)}else _y(I);else if(3==(ct=$.s)||0==ct&&0<$.X||!(1==pe&&function py(I,$){return!(X1(I.h)>=I.h.j-(I.s?1:0)||(I.s?(I.i=$.D.concat(I.i),0):1==I.G||2==I.G||I.B>=(I.Va?0:I.Wa)||(I.s=Yg(Le(I.Ga,I,$),yy(I,I.B)),I.B++,0)))}(I,$)||2==pe&&Dv(I)))switch(ee&&0<ee.length&&($=I.h,$.i=$.i.concat(ee)),ct){case 1:Ch(I,5);break;case 4:Ch(I,10);break;case 3:Ch(I,6);break;default:Ch(I,2)}}function yy(I,$){let ee=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(ee*=2),ee*$}function Ch(I,$){if(I.j.info("Error code "+$),2==$){var ee=Le(I.fb,I),pe=I.Xa;const ct=!pe;pe=new _f(pe||"//www.google.com/images/cleardot.gif"),V.location&&"http"==V.location.protocol||om(pe,"https"),B_(pe),ct?function um(I,$){const ee=new Dp;if(V.Image){const pe=new Image;pe.onload=ht(vf,ee,"TestLoadImage: loaded",!0,$,pe),pe.onerror=ht(vf,ee,"TestLoadImage: error",!1,$,pe),pe.onabort=ht(vf,ee,"TestLoadImage: abort",!1,$,pe),pe.ontimeout=ht(vf,ee,"TestLoadImage: timeout",!1,$,pe),V.setTimeout(function(){pe.ontimeout&&pe.ontimeout()},1e4),pe.src=I}else $(!1)}(pe.toString(),ee):function sy(I,$){new Dp;const pe=new AbortController,ct=setTimeout(()=>{pe.abort(),vf(0,0,!1,$)},1e4);fetch(I,{signal:pe.signal}).then(Tt=>{clearTimeout(ct),vf(0,0,!!Tt.ok,$)}).catch(()=>{clearTimeout(ct),vf(0,0,!1,$)})}(pe.toString(),ee)}else lc(2);I.G=0,I.l&&I.l.sa($),Rv(I),hy(I)}function Rv(I){if(I.G=0,I.ka=[],I.l){const $=nm(I.h);(0!=$.length||0!=I.i.length)&&(Gt(I.ka,$),Gt(I.ka,I.i),I.h.i.length=0,Jt(I.i),I.i.length=0),I.l.ra()}}function Ey(I,$,ee){var pe=ee instanceof _f?Fl(ee):new _f(ee);if(""!=pe.g)$&&(pe.g=$+"."+pe.g),sm(pe,pe.s);else{var ct=V.location;pe=ct.protocol,$=$?$+"."+ct.hostname:ct.hostname,ct=+ct.port;var Tt=new _f(null);pe&&om(Tt,pe),$&&(Tt.g=$),ct&&sm(Tt,ct),ee&&(Tt.l=ee),pe=Tt}return $=I.ya,(ee=I.D)&&$&&bo(pe,ee,$),bo(pe,"VER",I.la),hm(I,pe),pe}function Cy(I,$,ee){if($&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return($=new Xo(I.Ca&&!I.pa?new H_({eb:ee}):I.pa)).Ha(I.J),$}function yf(){}function Id(){}function Ia(I,$){sa.call(this),this.g=new Pp($),this.l=I,this.h=$&&$.messageUrlParams||null,I=$&&$.messageHeaders||null,$&&$.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=$&&$.initMessageHeaders||null,$&&$.messageContentType&&(I?I["X-WebChannel-Content-Type"]=$.messageContentType:I={"X-WebChannel-Content-Type":$.messageContentType}),$&&$.va&&(I?I["X-WebChannel-Client-Profile"]=$.va:I={"X-WebChannel-Client-Profile":$.va}),this.g.S=I,(I=$&&$.Sb)&&!Wn(I)&&(this.g.m=I),this.v=$&&$.supportsCrossDomainXhr||!1,this.u=$&&$.sendRawJson||!1,($=$&&$.httpSessionIdParam)&&!Wn($)&&(this.g.D=$,null!==(I=this.h)&&$ in I&&$ in(I=this.h)&&delete I[$]),this.j=new kp(this)}function WE(I){Kg.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var $=I.__sm__;if($){e:{for(const ee in $){I=ee;break e}I=void 0}(this.i=I)&&(I=this.i,$=null!==$&&I in $?$[I]:void 0),this.data=$}else this.data=I}function Mv(){_h.call(this),this.status=1}function kp(I){this.g=I}(p=Xo.prototype).Ha=function(I){this.J=I},p.ea=function(I,$,ee,pe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);$=$?$.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():F_.g(),this.v=function mv(I){return I.h||(I.h=I.i())}(this.o?this.o:F_),this.g.onreadystatechange=Le(this.Ea,this);try{this.B=!0,this.g.open($,String(I),!0),this.B=!1}catch(Tt){return void $_(this,Tt)}if(I=ee||"",ee=new Map(this.headers),pe)if(Object.getPrototypeOf(pe)===Object.prototype)for(var ct in pe)ee.set(ct,pe[ct]);else{if("function"!=typeof pe.keys||"function"!=typeof pe.get)throw Error("Unknown input type for opt_headers: "+String(pe));for(const Tt of pe.keys())ee.set(Tt,pe.get(Tt))}pe=Array.from(ee.keys()).find(Tt=>"content-type"==Tt.toLowerCase()),ct=V.FormData&&I instanceof V.FormData,!(0<=Array.prototype.indexOf.call(cy,$,void 0))||pe||ct||ee.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Tt,an]of ee)this.g.setRequestHeader(Tt,an);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dy(this),this.u=!0,this.g.send(I),this.u=!1}catch(Tt){$_(this,Tt)}},p.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,Nc(this,"complete"),Nc(this,"abort"),z_(this))},p.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),z_(this,!0)),Xo.aa.N.call(this)},p.Ea=function(){this.s||(this.B||this.u||this.j?ly(this):this.bb())},p.bb=function(){ly(this)},p.isActive=function(){return!!this.g},p.Z=function(){try{return 2<Cd(this)?this.g.status:-1}catch{return-1}},p.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},p.Oa=function(I){if(this.g){var $=this.g.responseText;return I&&0==$.indexOf(I)&&($=$.substring(I.length)),gv($)}},p.Ba=function(){return this.m},p.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(p=Pp.prototype).la=8,p.G=1,p.connect=function(I,$,ee,pe){lc(0),this.W=I,this.H=$||{},ee&&void 0!==pe&&(this.H.OSID=ee,this.H.OAID=pe),this.F=this.X,this.I=Ey(this,null,this.W),wd(this)},p.Ga=function(I){if(this.s)if(this.s=null,1==this.G){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const ct=new Pu(this,this.j,I);let Tt=this.o;if(this.S&&(Tt?(Tt=Me(Tt),nt(Tt,this.S)):Tt=this.S),null!==this.m||this.O||(ct.H=Tt,Tt=null),this.P)e:{for(var $=0,ee=0;ee<this.i.length;ee++){var pe=this.i[ee];if(void 0===(pe="__data__"in pe.map&&"string"==typeof(pe=pe.map.__data__)?pe.length:void 0))break;if(4096<($+=pe)){$=ee;break e}if(4096===$||ee===this.i.length-1){$=ee+1;break e}}$=1e3}else $=1e3;$=my(this,ct,$),bo(ee=Fl(this.I),"RID",I),bo(ee,"CVER",22),this.D&&bo(ee,"X-HTTP-Session-Id",this.D),hm(this,ee),Tt&&(this.O?$="headers="+encodeURIComponent(String(Tv(Tt)))+"&"+$:this.m&&xv(ee,this.m,Tt)),yh(this.h,ct),this.Ua&&bo(ee,"TYPE","init"),this.P?(bo(ee,"$req",$),bo(ee,"SID","null"),ct.T=!0,yv(ct,ee,null)):yv(ct,ee,$),this.G=2}}else 3==this.G&&(I?gy(this,I):0==this.i.length||K1(this.h)||gy(this))},p.Fa=function(){if(this.u=null,vy(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=Yg(Le(this.ab,this),I)}},p.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lc(10),Np(this),vy(this))},p.Za=function(){null!=this.C&&(this.C=null,Np(this),Dv(this),lc(19))},p.fb=function(I){I?(this.j.info("Successfully pinged google.com"),lc(2)):(this.j.info("Failed to ping google.com"),lc(1))},p.isActive=function(){return!!this.l&&this.l.isActive(this)},(p=yf.prototype).ua=function(){},p.ta=function(){},p.sa=function(){},p.ra=function(){},p.isActive=function(){return!0},p.Na=function(){},Id.prototype.g=function(I,$){return new Ia(I,$)},Ut(Ia,sa),Ia.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ia.prototype.close=function(){fm(this.g)},Ia.prototype.o=function(I){var $=this.g;if("string"==typeof I){var ee={};ee.__data__=I,I=ee}else this.u&&((ee={}).__data__=pv(I),I=ee);$.i.push(new Aw($.Ya++,I)),3==$.G&&wd($)},Ia.prototype.N=function(){this.g.l=null,delete this.j,fm(this.g),delete this.g,Ia.aa.N.call(this)},Ut(WE,Kg),Ut(Mv,_h),Ut(kp,yf),kp.prototype.ua=function(){Nc(this.g,"a")},kp.prototype.ta=function(I){Nc(this.g,new WE(I))},kp.prototype.sa=function(I){Nc(this.g,new Mv)},kp.prototype.ra=function(){Nc(this.g,"b")},Id.prototype.createWebChannel=Id.prototype.g,Ia.prototype.send=Ia.prototype.o,Ia.prototype.open=Ia.prototype.m,Ia.prototype.close=Ia.prototype.close,At=kt.createWebChannelTransport=function(){return new Id},Lt=kt.getStatEventTarget=function(){return N_()},_t=kt.Event=gf,It=kt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zg.NO_ERROR=0,Zg.TIMEOUT=8,Zg.HTTP_ERROR=6,Dt=kt.ErrorCode=Zg,k_.COMPLETE="complete",Jn=kt.EventType=k_,pf.EventType=kl,kl.OPEN="a",kl.CLOSE="b",kl.ERROR="c",kl.MESSAGE="d",sa.prototype.listen=sa.prototype.K,An=kt.WebChannel=pf,Kt=kt.FetchXmlHttpFactory=H_,Xo.prototype.listenOnce=Xo.prototype.L,Xo.prototype.getLastError=Xo.prototype.Ka,Xo.prototype.getLastErrorCode=Xo.prototype.Ba,Xo.prototype.getStatus=Xo.prototype.Z,Xo.prototype.getResponseJson=Xo.prototype.Oa,Xo.prototype.getResponseText=Xo.prototype.oa,Xo.prototype.send=Xo.prototype.ea,Xo.prototype.setWithCredentials=Xo.prototype.Ha,Bt=kt.XhrIo=Xo}).apply(typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{});const Ht="@firebase/firestore";class ke{constructor(o){this.uid=o}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(o){return o.uid===this.uid}}ke.UNAUTHENTICATED=new ke(null),ke.GOOGLE_CREDENTIALS=new ke("google-credentials-uid"),ke.FIRST_PARTY=new ke("first-party-uid"),ke.MOCK_USER=new ke("mock-user");let bn="10.12.1";const _n=new it.Vy("@firebase/firestore");function Sn(){return _n.logLevel}function Se(p,...o){if(_n.logLevel<=it.$b.DEBUG){const u=o.map(er);_n.debug(`Firestore (${bn}): ${p}`,...u)}}function bt(p,...o){if(_n.logLevel<=it.$b.ERROR){const u=o.map(er);_n.error(`Firestore (${bn}): ${p}`,...u)}}function gn(p,...o){if(_n.logLevel<=it.$b.WARN){const u=o.map(er);_n.warn(`Firestore (${bn}): ${p}`,...u)}}function er(p){if("string"==typeof p)return p;try{return JSON.stringify(p)}catch{return p}}function Pe(p="Unexpected state"){const o=`FIRESTORE (${bn}) INTERNAL ASSERTION FAILED: `+p;throw bt(o),new Error(o)}function je(p,o){p||Pe()}function Fe(p,o){return p}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ve.g{constructor(o,u){super(o,u),this.code=o,this.message=u,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mt{constructor(){this.promise=new Promise((o,u)=>{this.resolve=o,this.reject=u})}}class zt{constructor(o,u){this.user=u,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${o}`)}}class jn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(o,u){o.enqueueRetryable(()=>u(ke.UNAUTHENTICATED))}shutdown(){}}class en{constructor(o){this.token=o,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(o,u){this.changeListener=u,o.enqueueRetryable(()=>u(this.token.user))}shutdown(){this.changeListener=null}}class qn{constructor(o){this.t=o,this.currentUser=ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(o,u){var f=this;let _=this.i;const C=X=>this.i!==_?(_=this.i,u(X)):Promise.resolve();let T=new mt;this.o=()=>{this.i++,this.currentUser=this.u(),T.resolve(),T=new mt,o.enqueueRetryable(()=>C(this.currentUser))};const V=()=>{const X=T;o.enqueueRetryable((0,Ee.A)(function*(){yield X.promise,yield C(f.currentUser)}))},G=X=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=X,this.auth.addAuthTokenListener(this.o),V()};this.t.onInit(X=>G(X)),setTimeout(()=>{if(!this.auth){const X=this.t.getImmediate({optional:!0});X?G(X):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),T.resolve(),T=new mt)}},0),V()}getToken(){const o=this.i,u=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(u).then(f=>this.i!==o?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):f?(je("string"==typeof f.accessToken),new zt(f.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const o=this.auth&&this.auth.getUid();return je(null===o||"string"==typeof o),new ke(o)}}class jr{constructor(o,u,f){this.l=o,this.h=u,this.P=f,this.type="FirstParty",this.user=ke.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const o=this.T();return o&&this.I.set("Authorization",o),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class to{constructor(o,u,f){this.l=o,this.h=u,this.P=f}getToken(){return Promise.resolve(new jr(this.l,this.h,this.P))}start(o,u){o.enqueueRetryable(()=>u(ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lr{constructor(o){this.value=o,this.type="AppCheck",this.headers=new Map,o&&o.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qr{constructor(o){this.A=o,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(o,u){const f=C=>{null!=C.error&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${C.error.message}`);const T=C.token!==this.R;return this.R=C.token,Se("FirebaseAppCheckTokenProvider",`Received ${T?"new":"existing"} token.`),T?u(C.token):Promise.resolve()};this.o=C=>{o.enqueueRetryable(()=>f(C))};const _=C=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=C,this.appCheck.addTokenListener(this.o)};this.A.onInit(C=>_(C)),setTimeout(()=>{if(!this.appCheck){const C=this.A.getImmediate({optional:!0});C?_(C):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const o=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(o).then(u=>u?(je("string"==typeof u.token),this.R=u.token,new lr(u.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function pr(p){const o=typeof self<"u"&&(self.crypto||self.msCrypto),u=new Uint8Array(p);if(o&&"function"==typeof o.getRandomValues)o.getRandomValues(u);else for(let f=0;f<p;f++)u[f]=Math.floor(256*Math.random());return u}class oi{static newId(){const u=62*Math.floor(256/62);let f="";for(;f.length<20;){const _=pr(40);for(let C=0;C<_.length;++C)f.length<20&&_[C]<u&&(f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(_[C]%62))}return f}}function wn(p,o){return p<o?-1:p>o?1:0}function Br(p,o,u){return p.length===o.length&&p.every((f,_)=>u(f,o[_]))}class Kn{constructor(o,u){if(this.seconds=o,this.nanoseconds=u,u<0)throw new _e(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+u);if(u>=1e9)throw new _e(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+u);if(o<-62135596800)throw new _e(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+o);if(o>=253402300800)throw new _e(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+o)}static now(){return Kn.fromMillis(Date.now())}static fromDate(o){return Kn.fromMillis(o.getTime())}static fromMillis(o){const u=Math.floor(o/1e3),f=Math.floor(1e6*(o-1e3*u));return new Kn(u,f)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(o){return this.seconds===o.seconds?wn(this.nanoseconds,o.nanoseconds):wn(this.seconds,o.seconds)}isEqual(o){return o.seconds===this.seconds&&o.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class cn{constructor(o){this.timestamp=o}static fromTimestamp(o){return new cn(o)}static min(){return new cn(new Kn(0,0))}static max(){return new cn(new Kn(253402300799,999999999))}compareTo(o){return this.timestamp._compareTo(o.timestamp)}isEqual(o){return this.timestamp.isEqual(o.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Lo{constructor(o,u,f){void 0===u?u=0:u>o.length&&Pe(),void 0===f?f=o.length-u:f>o.length-u&&Pe(),this.segments=o,this.offset=u,this.len=f}get length(){return this.len}isEqual(o){return 0===Lo.comparator(this,o)}child(o){const u=this.segments.slice(this.offset,this.limit());return o instanceof Lo?o.forEach(f=>{u.push(f)}):u.push(o),this.construct(u)}limit(){return this.offset+this.length}popFirst(o){return this.construct(this.segments,this.offset+(o=void 0===o?1:o),this.length-o)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(o){return this.segments[this.offset+o]}isEmpty(){return 0===this.length}isPrefixOf(o){if(o.length<this.length)return!1;for(let u=0;u<this.length;u++)if(this.get(u)!==o.get(u))return!1;return!0}isImmediateParentOf(o){if(this.length+1!==o.length)return!1;for(let u=0;u<this.length;u++)if(this.get(u)!==o.get(u))return!1;return!0}forEach(o){for(let u=this.offset,f=this.limit();u<f;u++)o(this.segments[u])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(o,u){const f=Math.min(o.length,u.length);for(let _=0;_<f;_++){const C=o.get(_),T=u.get(_);if(C<T)return-1;if(C>T)return 1}return o.length<u.length?-1:o.length>u.length?1:0}}class Nt extends Lo{construct(o,u,f){return new Nt(o,u,f)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...o){const u=[];for(const f of o){if(f.indexOf("//")>=0)throw new _e(he.INVALID_ARGUMENT,`Invalid segment (${f}). Paths must not contain // in them.`);u.push(...f.split("/").filter(_=>_.length>0))}return new Nt(u)}static emptyPath(){return new Nt([])}}const Qn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Lo{construct(o,u,f){return new un(o,u,f)}static isValidIdentifier(o){return Qn.test(o)}canonicalString(){return this.toArray().map(o=>(o=o.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(o)||(o="`"+o+"`"),o)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new un(["__name__"])}static fromServerFormat(o){const u=[];let f="",_=0;const C=()=>{if(0===f.length)throw new _e(he.INVALID_ARGUMENT,`Invalid field path (${o}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);u.push(f),f=""};let T=!1;for(;_<o.length;){const V=o[_];if("\\"===V){if(_+1===o.length)throw new _e(he.INVALID_ARGUMENT,"Path has trailing escape character: "+o);const G=o[_+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new _e(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+o);f+=G,_+=2}else"`"===V?(T=!T,_++):"."!==V||T?(f+=V,_++):(C(),_++)}if(C(),T)throw new _e(he.INVALID_ARGUMENT,"Unterminated ` in path: "+o);return new un(u)}static emptyPath(){return new un([])}}class Wt{constructor(o){this.path=o}static fromPath(o){return new Wt(Nt.fromString(o))}static fromName(o){return new Wt(Nt.fromString(o).popFirst(5))}static empty(){return new Wt(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(o){return this.path.length>=2&&this.path.get(this.path.length-2)===o}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(o){return null!==o&&0===Nt.comparator(this.path,o.path)}toString(){return this.path.toString()}static comparator(o,u){return Nt.comparator(o.path,u.path)}static isDocumentKey(o){return o.length%2==0}static fromSegments(o){return new Wt(new Nt(o.slice()))}}class ri{constructor(o,u,f){this.readTime=o,this.documentKey=u,this.largestBatchId=f}static min(){return new ri(cn.min(),Wt.empty(),-1)}static max(){return new ri(cn.max(),Wt.empty(),-1)}}function zi(p,o){let u=p.readTime.compareTo(o.readTime);return 0!==u?u:(u=Wt.comparator(p.documentKey,o.documentKey),0!==u?u:wn(p.largestBatchId,o.largestBatchId))}const Wi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(o){this.onCommittedListeners.push(o)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(o=>o())}}function ei(p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,Ee.A)(function*(p){if(p.code!==he.FAILED_PRECONDITION||p.message!==Wi)throw p;Se("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class fe{constructor(o){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,o(u=>{this.isDone=!0,this.result=u,this.nextCallback&&this.nextCallback(u)},u=>{this.isDone=!0,this.error=u,this.catchCallback&&this.catchCallback(u)})}catch(o){return this.next(void 0,o)}next(o,u){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(u,this.error):this.wrapSuccess(o,this.result):new fe((f,_)=>{this.nextCallback=C=>{this.wrapSuccess(o,C).next(f,_)},this.catchCallback=C=>{this.wrapFailure(u,C).next(f,_)}})}toPromise(){return new Promise((o,u)=>{this.next(o,u)})}wrapUserFunction(o){try{const u=o();return u instanceof fe?u:fe.resolve(u)}catch(u){return fe.reject(u)}}wrapSuccess(o,u){return o?this.wrapUserFunction(()=>o(u)):fe.resolve(u)}wrapFailure(o,u){return o?this.wrapUserFunction(()=>o(u)):fe.reject(u)}static resolve(o){return new fe((u,f)=>{u(o)})}static reject(o){return new fe((u,f)=>{f(o)})}static waitFor(o){return new fe((u,f)=>{let _=0,C=0,T=!1;o.forEach(V=>{++_,V.next(()=>{++C,T&&C===_&&u()},G=>f(G))}),T=!0,C===_&&u()})}static or(o){let u=fe.resolve(!1);for(const f of o)u=u.next(_=>_?fe.resolve(_):f());return u}static forEach(o,u){const f=[];return o.forEach((_,C)=>{f.push(u.call(this,_,C))}),this.waitFor(f)}static mapArray(o,u){return new fe((f,_)=>{const C=o.length,T=new Array(C);let V=0;for(let G=0;G<C;G++){const X=G;u(o[X]).next(ce=>{T[X]=ce,++V,V===C&&f(T)},ce=>_(ce))}})}static doWhile(o,u){return new fe((f,_)=>{const C=()=>{!0===o()?u().next(()=>{C()},_):f()};C()})}}function De(p){return"IndexedDbTransactionError"===p.name}let mr=(()=>{class p{constructor(u,f){this.previousValue=u,f&&(f.sequenceNumberHandler=_=>this.ie(_),this.se=_=>f.writeSequenceNumber(_))}ie(u){return this.previousValue=Math.max(u,this.previousValue),this.previousValue}next(){const u=++this.previousValue;return this.se&&this.se(u),u}}return p.oe=-1,p})();function vi(p){return null==p}function Yn(p){return 0===p&&1/p==-1/0}function lo(p){let o=0;for(const u in p)Object.prototype.hasOwnProperty.call(p,u)&&o++;return o}function To(p,o){for(const u in p)Object.prototype.hasOwnProperty.call(p,u)&&o(u,p[u])}function ro(p){for(const o in p)if(Object.prototype.hasOwnProperty.call(p,o))return!1;return!0}class Ar{constructor(o,u){this.comparator=o,this.root=u||yi.EMPTY}insert(o,u){return new Ar(this.comparator,this.root.insert(o,u,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(o){return new Ar(this.comparator,this.root.remove(o,this.comparator).copy(null,null,yi.BLACK,null,null))}get(o){let u=this.root;for(;!u.isEmpty();){const f=this.comparator(o,u.key);if(0===f)return u.value;f<0?u=u.left:f>0&&(u=u.right)}return null}indexOf(o){let u=0,f=this.root;for(;!f.isEmpty();){const _=this.comparator(o,f.key);if(0===_)return u+f.left.size;_<0?f=f.left:(u+=f.left.size+1,f=f.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(o){return this.root.inorderTraversal(o)}forEach(o){this.inorderTraversal((u,f)=>(o(u,f),!1))}toString(){const o=[];return this.inorderTraversal((u,f)=>(o.push(`${u}:${f}`),!1)),`{${o.join(", ")}}`}reverseTraversal(o){return this.root.reverseTraversal(o)}getIterator(){return new as(this.root,null,this.comparator,!1)}getIteratorFrom(o){return new as(this.root,o,this.comparator,!1)}getReverseIterator(){return new as(this.root,null,this.comparator,!0)}getReverseIteratorFrom(o){return new as(this.root,o,this.comparator,!0)}}class as{constructor(o,u,f,_){this.isReverse=_,this.nodeStack=[];let C=1;for(;!o.isEmpty();)if(C=u?f(o.key,u):1,u&&_&&(C*=-1),C<0)o=this.isReverse?o.left:o.right;else{if(0===C){this.nodeStack.push(o);break}this.nodeStack.push(o),o=this.isReverse?o.right:o.left}}getNext(){let o=this.nodeStack.pop();const u={key:o.key,value:o.value};if(this.isReverse)for(o=o.left;!o.isEmpty();)this.nodeStack.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack.push(o),o=o.left;return u}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const o=this.nodeStack[this.nodeStack.length-1];return{key:o.key,value:o.value}}}class yi{constructor(o,u,f,_,C){this.key=o,this.value=u,this.color=f??yi.RED,this.left=_??yi.EMPTY,this.right=C??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(o,u,f,_,C){return new yi(o??this.key,u??this.value,f??this.color,_??this.left,C??this.right)}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,u,f){let _=this;const C=f(o,_.key);return _=C<0?_.copy(null,null,null,_.left.insert(o,u,f),null):0===C?_.copy(null,u,null,null,null):_.copy(null,null,null,null,_.right.insert(o,u,f)),_.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let o=this;return o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.removeMin(),null),o.fixUp()}remove(o,u){let f,_=this;if(u(o,_.key)<0)_.left.isEmpty()||_.left.isRed()||_.left.left.isRed()||(_=_.moveRedLeft()),_=_.copy(null,null,null,_.left.remove(o,u),null);else{if(_.left.isRed()&&(_=_.rotateRight()),_.right.isEmpty()||_.right.isRed()||_.right.left.isRed()||(_=_.moveRedRight()),0===u(o,_.key)){if(_.right.isEmpty())return yi.EMPTY;f=_.right.min(),_=_.copy(f.key,f.value,null,null,_.right.removeMin())}_=_.copy(null,null,null,null,_.right.remove(o,u))}return _.fixUp()}isRed(){return this.color}fixUp(){let o=this;return o.right.isRed()&&!o.left.isRed()&&(o=o.rotateLeft()),o.left.isRed()&&o.left.left.isRed()&&(o=o.rotateRight()),o.left.isRed()&&o.right.isRed()&&(o=o.colorFlip()),o}moveRedLeft(){let o=this.colorFlip();return o.right.left.isRed()&&(o=o.copy(null,null,null,null,o.right.rotateRight()),o=o.rotateLeft(),o=o.colorFlip()),o}moveRedRight(){let o=this.colorFlip();return o.left.left.isRed()&&(o=o.rotateRight(),o=o.colorFlip()),o}rotateLeft(){const o=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight(){const o=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip(){const o=this.left.copy(null,null,!this.left.color,null,null),u=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,u)}checkMaxDepth(){const o=this.check();return Math.pow(2,o)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const o=this.left.check();if(o!==this.right.check())throw Pe();return o+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1,yi.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(o,u,f,_,C){return this}insert(o,u,f){return new yi(o,u)}remove(o,u){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(o){this.comparator=o,this.data=new Ar(this.comparator)}has(o){return null!==this.data.get(o)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(o){return this.data.indexOf(o)}forEach(o){this.data.inorderTraversal((u,f)=>(o(u),!1))}forEachInRange(o,u){const f=this.data.getIteratorFrom(o[0]);for(;f.hasNext();){const _=f.getNext();if(this.comparator(_.key,o[1])>=0)return;u(_.key)}}forEachWhile(o,u){let f;for(f=void 0!==u?this.data.getIteratorFrom(u):this.data.getIterator();f.hasNext();)if(!o(f.getNext().key))return}firstAfterOrEqual(o){const u=this.data.getIteratorFrom(o);return u.hasNext()?u.getNext().key:null}getIterator(){return new ua(this.data.getIterator())}getIteratorFrom(o){return new ua(this.data.getIteratorFrom(o))}add(o){return this.copy(this.data.remove(o).insert(o,!0))}delete(o){return this.has(o)?this.copy(this.data.remove(o)):this}isEmpty(){return this.data.isEmpty()}unionWith(o){let u=this;return u.size<o.size&&(u=o,o=this),o.forEach(f=>{u=u.add(f)}),u}isEqual(o){if(!(o instanceof Gn)||this.size!==o.size)return!1;const u=this.data.getIterator(),f=o.data.getIterator();for(;u.hasNext();){const _=u.getNext().key,C=f.getNext().key;if(0!==this.comparator(_,C))return!1}return!0}toArray(){const o=[];return this.forEach(u=>{o.push(u)}),o}toString(){const o=[];return this.forEach(u=>o.push(u)),"SortedSet("+o.toString()+")"}copy(o){const u=new Gn(this.comparator);return u.data=o,u}}class ua{constructor(o){this.iter=o}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ri{constructor(o){this.fields=o,o.sort(un.comparator)}static empty(){return new Ri([])}unionWith(o){let u=new Gn(un.comparator);for(const f of this.fields)u=u.add(f);for(const f of o)u=u.add(f);return new Ri(u.toArray())}covers(o){for(const u of this.fields)if(u.isPrefixOf(o))return!0;return!1}isEqual(o){return Br(this.fields,o.fields,(u,f)=>u.isEqual(f))}}class js extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vi{constructor(o){this.binaryString=o}static fromBase64String(o){const u=function(_){try{return atob(_)}catch(C){throw typeof DOMException<"u"&&C instanceof DOMException?new js("Invalid base64 string: "+C):C}}(o);return new Vi(u)}static fromUint8Array(o){const u=function(_){let C="";for(let T=0;T<_.length;++T)C+=String.fromCharCode(_[T]);return C}(o);return new Vi(u)}[Symbol.iterator](){let o=0;return{next:()=>o<this.binaryString.length?{value:this.binaryString.charCodeAt(o++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(u){const f=new Uint8Array(u.length);for(let _=0;_<u.length;_++)f[_]=u.charCodeAt(_);return f}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(o){return wn(this.binaryString,o.binaryString)}isEqual(o){return this.binaryString===o.binaryString}}Vi.EMPTY_BYTE_STRING=new Vi("");const Bo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(p){if(je(!!p),"string"==typeof p){let o=0;const u=Bo.exec(p);if(je(!!u),u[1]){let _=u[1];_=(_+"000000000").substr(0,9),o=Number(_)}const f=new Date(p);return{seconds:Math.floor(f.getTime()/1e3),nanos:o}}return{seconds:Mi(p.seconds),nanos:Mi(p.nanos)}}function Mi(p){return"number"==typeof p?p:"string"==typeof p?Number(p):0}function xs(p){return"string"==typeof p?Vi.fromBase64String(p):Vi.fromUint8Array(p)}function Fc(p){var o,u;return"server_timestamp"===(null===(u=((null===(o=p?.mapValue)||void 0===o?void 0:o.fields)||{}).__type__)||void 0===u?void 0:u.stringValue)}function la(p){const o=p.mapValue.fields.__previous_value__;return Fc(o)?la(o):o}function xo(p){const o=Jo(p.mapValue.fields.__local_write_time__.timestampValue);return new Kn(o.seconds,o.nanos)}class na{constructor(o,u,f,_,C,T,V,G,X){this.databaseId=o,this.appId=u,this.persistenceKey=f,this.host=_,this.ssl=C,this.forceLongPolling=T,this.autoDetectLongPolling=V,this.longPollingOptions=G,this.useFetchStreams=X}}class da{constructor(o,u){this.projectId=o,this.database=u||"(default)"}static empty(){return new da("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(o){return o instanceof da&&o.projectId===this.projectId&&o.database===this.database}}const cs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ss(p){return"nullValue"in p?0:"booleanValue"in p?1:"integerValue"in p||"doubleValue"in p?2:"timestampValue"in p?3:"stringValue"in p?5:"bytesValue"in p?6:"referenceValue"in p?7:"geoPointValue"in p?8:"arrayValue"in p?9:"mapValue"in p?Fc(p)?4:ha(p)?9007199254740991:10:Pe()}function io(p,o){if(p===o)return!0;const u=Ss(p);if(u!==Ss(o))return!1;switch(u){case 0:case 9007199254740991:return!0;case 1:return p.booleanValue===o.booleanValue;case 4:return xo(p).isEqual(xo(o));case 3:return function(_,C){if("string"==typeof _.timestampValue&&"string"==typeof C.timestampValue&&_.timestampValue.length===C.timestampValue.length)return _.timestampValue===C.timestampValue;const T=Jo(_.timestampValue),V=Jo(C.timestampValue);return T.seconds===V.seconds&&T.nanos===V.nanos}(p,o);case 5:return p.stringValue===o.stringValue;case 6:return C=o,xs(p.bytesValue).isEqual(xs(C.bytesValue));case 7:return p.referenceValue===o.referenceValue;case 8:return function(_,C){return Mi(_.geoPointValue.latitude)===Mi(C.geoPointValue.latitude)&&Mi(_.geoPointValue.longitude)===Mi(C.geoPointValue.longitude)}(p,o);case 2:return function(_,C){if("integerValue"in _&&"integerValue"in C)return Mi(_.integerValue)===Mi(C.integerValue);if("doubleValue"in _&&"doubleValue"in C){const T=Mi(_.doubleValue),V=Mi(C.doubleValue);return T===V?Yn(T)===Yn(V):isNaN(T)&&isNaN(V)}return!1}(p,o);case 9:return Br(p.arrayValue.values||[],o.arrayValue.values||[],io);case 10:return function(_,C){const T=_.mapValue.fields||{},V=C.mapValue.fields||{};if(lo(T)!==lo(V))return!1;for(const G in T)if(T.hasOwnProperty(G)&&(void 0===V[G]||!io(T[G],V[G])))return!1;return!0}(p,o);default:return Pe()}var C}function Ds(p,o){return void 0!==(p.values||[]).find(u=>io(u,o))}function Ki(p,o){if(p===o)return 0;const u=Ss(p),f=Ss(o);if(u!==f)return wn(u,f);switch(u){case 0:case 9007199254740991:return 0;case 1:return wn(p.booleanValue,o.booleanValue);case 2:return function(C,T){const V=Mi(C.integerValue||C.doubleValue),G=Mi(T.integerValue||T.doubleValue);return V<G?-1:V>G?1:V===G?0:isNaN(V)?isNaN(G)?0:-1:1}(p,o);case 3:return us(p.timestampValue,o.timestampValue);case 4:return us(xo(p),xo(o));case 5:return wn(p.stringValue,o.stringValue);case 6:return function(C,T){const V=xs(C),G=xs(T);return V.compareTo(G)}(p.bytesValue,o.bytesValue);case 7:return function(C,T){const V=C.split("/"),G=T.split("/");for(let X=0;X<V.length&&X<G.length;X++){const ce=wn(V[X],G[X]);if(0!==ce)return ce}return wn(V.length,G.length)}(p.referenceValue,o.referenceValue);case 8:return function(C,T){const V=wn(Mi(C.latitude),Mi(T.latitude));return 0!==V?V:wn(Mi(C.longitude),Mi(T.longitude))}(p.geoPointValue,o.geoPointValue);case 9:return function(C,T){const V=C.values||[],G=T.values||[];for(let X=0;X<V.length&&X<G.length;++X){const ce=Ki(V[X],G[X]);if(ce)return ce}return wn(V.length,G.length)}(p.arrayValue,o.arrayValue);case 10:return function(C,T){if(C===cs.mapValue&&T===cs.mapValue)return 0;if(C===cs.mapValue)return 1;if(T===cs.mapValue)return-1;const V=C.fields||{},G=Object.keys(V),X=T.fields||{},ce=Object.keys(X);G.sort(),ce.sort();for(let we=0;we<G.length&&we<ce.length;++we){const Le=wn(G[we],ce[we]);if(0!==Le)return Le;const ht=Ki(V[G[we]],X[ce[we]]);if(0!==ht)return ht}return wn(G.length,ce.length)}(p.mapValue,o.mapValue);default:throw Pe()}}function us(p,o){if("string"==typeof p&&"string"==typeof o&&p.length===o.length)return wn(p,o);const u=Jo(p),f=Jo(o),_=wn(u.seconds,f.seconds);return 0!==_?_:wn(u.nanos,f.nanos)}function fa(p){return Sa(p)}function Sa(p){return"nullValue"in p?"null":"booleanValue"in p?""+p.booleanValue:"integerValue"in p?""+p.integerValue:"doubleValue"in p?""+p.doubleValue:"timestampValue"in p?function(u){const f=Jo(u);return`time(${f.seconds},${f.nanos})`}(p.timestampValue):"stringValue"in p?p.stringValue:"bytesValue"in p?xs(p.bytesValue).toBase64():"referenceValue"in p?Wt.fromName(p.referenceValue).toString():"geoPointValue"in p?function(u){return`geo(${u.latitude},${u.longitude})`}(p.geoPointValue):"arrayValue"in p?function(u){let f="[",_=!0;for(const C of u.values||[])_?_=!1:f+=",",f+=Sa(C);return f+"]"}(p.arrayValue):"mapValue"in p?function(u){const f=Object.keys(u.fields||{}).sort();let _="{",C=!0;for(const T of f)C?C=!1:_+=",",_+=`${T}:${Sa(u.fields[T])}`;return _+"}"}(p.mapValue):Pe()}function Hi(p,o){return{referenceValue:`projects/${p.projectId}/databases/${p.database}/documents/${o.path.canonicalString()}`}}function Gs(p){return!!p&&"integerValue"in p}function ls(p){return!!p&&"arrayValue"in p}function hu(p){return!!p&&"nullValue"in p}function fo(p){return!!p&&"doubleValue"in p&&isNaN(Number(p.doubleValue))}function za(p){return!!p&&"mapValue"in p}function es(p){if(p.geoPointValue)return{geoPointValue:Object.assign({},p.geoPointValue)};if(p.timestampValue&&"object"==typeof p.timestampValue)return{timestampValue:Object.assign({},p.timestampValue)};if(p.mapValue){const o={mapValue:{fields:{}}};return To(p.mapValue.fields,(u,f)=>o.mapValue.fields[u]=es(f)),o}if(p.arrayValue){const o={arrayValue:{values:[]}};for(let u=0;u<(p.arrayValue.values||[]).length;++u)o.arrayValue.values[u]=es(p.arrayValue.values[u]);return o}return Object.assign({},p)}function ha(p){return"__max__"===(((p.mapValue||{}).fields||{}).__type__||{}).stringValue}class ho{constructor(o){this.value=o}static empty(){return new ho({mapValue:{}})}field(o){if(o.isEmpty())return this.value;{let u=this.value;for(let f=0;f<o.length-1;++f)if(u=(u.mapValue.fields||{})[o.get(f)],!za(u))return null;return u=(u.mapValue.fields||{})[o.lastSegment()],u||null}}set(o,u){this.getFieldsMap(o.popLast())[o.lastSegment()]=es(u)}setAll(o){let u=un.emptyPath(),f={},_=[];o.forEach((T,V)=>{if(!u.isImmediateParentOf(V)){const G=this.getFieldsMap(u);this.applyChanges(G,f,_),f={},_=[],u=V.popLast()}T?f[V.lastSegment()]=es(T):_.push(V.lastSegment())});const C=this.getFieldsMap(u);this.applyChanges(C,f,_)}delete(o){const u=this.field(o.popLast());za(u)&&u.mapValue.fields&&delete u.mapValue.fields[o.lastSegment()]}isEqual(o){return io(this.value,o.value)}getFieldsMap(o){let u=this.value;u.mapValue.fields||(u.mapValue={fields:{}});for(let f=0;f<o.length;++f){let _=u.mapValue.fields[o.get(f)];za(_)&&_.mapValue.fields||(_={mapValue:{fields:{}}},u.mapValue.fields[o.get(f)]=_),u=_}return u.mapValue.fields}applyChanges(o,u,f){To(u,(_,C)=>o[_]=C);for(const _ of f)delete o[_]}clone(){return new ho(es(this.value))}}function Lc(p){const o=[];return To(p.fields,(u,f)=>{const _=new un([u]);if(za(f)){const C=Lc(f.mapValue).fields;if(0===C.length)o.push(_);else for(const T of C)o.push(_.child(T))}else o.push(_)}),new Ri(o)}class Qr{constructor(o,u,f,_,C,T,V){this.key=o,this.documentType=u,this.version=f,this.readTime=_,this.createTime=C,this.data=T,this.documentState=V}static newInvalidDocument(o){return new Qr(o,0,cn.min(),cn.min(),cn.min(),ho.empty(),0)}static newFoundDocument(o,u,f,_){return new Qr(o,1,u,cn.min(),f,_,0)}static newNoDocument(o,u){return new Qr(o,2,u,cn.min(),cn.min(),ho.empty(),0)}static newUnknownDocument(o,u){return new Qr(o,3,u,cn.min(),cn.min(),ho.empty(),2)}convertToFoundDocument(o,u){return!this.createTime.isEqual(cn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=o),this.version=o,this.documentType=1,this.data=u,this.documentState=0,this}convertToNoDocument(o){return this.version=o,this.documentType=2,this.data=ho.empty(),this.documentState=0,this}convertToUnknownDocument(o){return this.version=o,this.documentType=3,this.data=ho.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cn.min(),this}setReadTime(o){return this.readTime=o,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(o){return o instanceof Qr&&this.key.isEqual(o.key)&&this.version.isEqual(o.version)&&this.documentType===o.documentType&&this.documentState===o.documentState&&this.data.isEqual(o.data)}mutableCopy(){return new Qr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Eo{constructor(o,u){this.position=o,this.inclusive=u}}function Lu(p,o,u){let f=0;for(let _=0;_<p.position.length;_++){const C=o[_],T=p.position[_];if(f=C.field.isKeyField()?Wt.comparator(Wt.fromName(T.referenceValue),u.key):Ki(T,u.data.field(C.field)),"desc"===C.dir&&(f*=-1),0!==f)break}return f}function pa(p,o){if(null===p)return null===o;if(null===o||p.inclusive!==o.inclusive||p.position.length!==o.position.length)return!1;for(let u=0;u<p.position.length;u++)if(!io(p.position[u],o.position[u]))return!1;return!0}class gc{constructor(o,u="asc"){this.field=o,this.dir=u}}function qa(p,o){return p.dir===o.dir&&p.field.isEqual(o.field)}class nn{}class Xn extends nn{constructor(o,u,f){super(),this.field=o,this.op=u,this.value=f}static create(o,u,f){return o.isKeyField()?"in"===u||"not-in"===u?this.createKeyFieldInFilter(o,u,f):new Vc(o,u,f):"array-contains"===u?new Ei(o,f):"in"===u?new _a(o,f):"not-in"===u?new xd(o,f):"array-contains-any"===u?new Gr(o,f):new Xn(o,u,f)}static createKeyFieldInFilter(o,u,f){return"in"===u?new mc(o,f):new ma(o,f)}matches(o){const u=o.data.field(this.field);return"!="===this.op?null!==u&&this.matchesComparison(Ki(u,this.value)):null!==u&&Ss(this.value)===Ss(u)&&this.matchesComparison(Ki(u,this.value))}matchesComparison(o){switch(this.op){case"<":return o<0;case"<=":return o<=0;case"==":return 0===o;case"!=":return 0!==o;case">":return o>0;case">=":return o>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends nn{constructor(o,u){super(),this.filters=o,this.op=u,this.ae=null}static create(o,u){return new hr(o,u)}matches(o){return $s(this)?void 0===this.filters.find(u=>!u.matches(o)):void 0!==this.filters.find(u=>u.matches(o))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((o,u)=>o.concat(u.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $s(p){return"and"===p.op}function Ma(p){return function pu(p){for(const o of p.filters)if(o instanceof hr)return!1;return!0}(p)&&$s(p)}function oo(p){if(p instanceof Xn)return p.field.canonicalString()+p.op.toString()+fa(p.value);if(Ma(p))return p.filters.map(o=>oo(o)).join(",");{const o=p.filters.map(u=>oo(u)).join(",");return`${p.op}(${o})`}}function ga(p,o){return p instanceof Xn?(f=p,(_=o)instanceof Xn&&f.op===_.op&&f.field.isEqual(_.field)&&io(f.value,_.value)):p instanceof hr?function(f,_){return _ instanceof hr&&f.op===_.op&&f.filters.length===_.filters.length&&f.filters.reduce((C,T,V)=>C&&ga(T,_.filters[V]),!0)}(p,o):void Pe();var f,_}function ra(p){return p instanceof Xn?`${(u=p).field.canonicalString()} ${u.op} ${fa(u.value)}`:p instanceof hr?function(u){return u.op.toString()+" {"+u.getFilters().map(ra).join(" ,")+"}"}(p):"Filter";var u}class Vc extends Xn{constructor(o,u,f){super(o,u,f),this.key=Wt.fromName(f.referenceValue)}matches(o){const u=Wt.comparator(o.key,this.key);return this.matchesComparison(u)}}class mc extends Xn{constructor(o,u){super(o,"in",u),this.keys=so(0,u)}matches(o){return this.keys.some(u=>u.isEqual(o.key))}}class ma extends Xn{constructor(o,u){super(o,"not-in",u),this.keys=so(0,u)}matches(o){return!this.keys.some(u=>u.isEqual(o.key))}}function so(p,o){var u;return((null===(u=o.arrayValue)||void 0===u?void 0:u.values)||[]).map(f=>Wt.fromName(f.referenceValue))}class Ei extends Xn{constructor(o,u){super(o,"array-contains",u)}matches(o){const u=o.data.field(this.field);return ls(u)&&Ds(u.arrayValue,this.value)}}class _a extends Xn{constructor(o,u){super(o,"in",u)}matches(o){const u=o.data.field(this.field);return null!==u&&Ds(this.value.arrayValue,u)}}class xd extends Xn{constructor(o,u){super(o,"not-in",u)}matches(o){if(Ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const u=o.data.field(this.field);return null!==u&&!Ds(this.value.arrayValue,u)}}class Gr extends Xn{constructor(o,u){super(o,"array-contains-any",u)}matches(o){const u=o.data.field(this.field);return!(!ls(u)||!u.arrayValue.values)&&u.arrayValue.values.some(f=>Ds(this.value.arrayValue,f))}}class Bc{constructor(o,u=null,f=[],_=[],C=null,T=null,V=null){this.path=o,this.collectionGroup=u,this.orderBy=f,this.filters=_,this.limit=C,this.startAt=T,this.endAt=V,this.ue=null}}function Tr(p,o=null,u=[],f=[],_=null,C=null,T=null){return new Bc(p,o,u,f,_,C,T)}function jo(p){const o=Fe(p);if(null===o.ue){let u=o.path.canonicalString();null!==o.collectionGroup&&(u+="|cg:"+o.collectionGroup),u+="|f:",u+=o.filters.map(f=>oo(f)).join(","),u+="|ob:",u+=o.orderBy.map(f=>{return(C=f).field.canonicalString()+C.dir;var C}).join(","),vi(o.limit)||(u+="|l:",u+=o.limit),o.startAt&&(u+="|lb:",u+=o.startAt.inclusive?"b:":"a:",u+=o.startAt.position.map(f=>fa(f)).join(",")),o.endAt&&(u+="|ub:",u+=o.endAt.inclusive?"a:":"b:",u+=o.endAt.position.map(f=>fa(f)).join(",")),o.ue=u}return o.ue}function al(p,o){if(p.limit!==o.limit||p.orderBy.length!==o.orderBy.length)return!1;for(let u=0;u<p.orderBy.length;u++)if(!qa(p.orderBy[u],o.orderBy[u]))return!1;if(p.filters.length!==o.filters.length)return!1;for(let u=0;u<p.filters.length;u++)if(!ga(p.filters[u],o.filters[u]))return!1;return p.collectionGroup===o.collectionGroup&&!!p.path.isEqual(o.path)&&!!pa(p.startAt,o.startAt)&&pa(p.endAt,o.endAt)}function Uc(p){return Wt.isDocumentKey(p.path)&&null===p.collectionGroup&&0===p.filters.length}class Xi{constructor(o,u=null,f=[],_=[],C=null,T="F",V=null,G=null){this.path=o,this.collectionGroup=u,this.explicitOrderBy=f,this.filters=_,this.limit=C,this.limitType=T,this.startAt=V,this.endAt=G,this.ce=null,this.le=null,this.he=null}}function Go(p){return new Xi(p)}function Yr(p){return 0===p.filters.length&&null===p.limit&&null==p.startAt&&null==p.endAt&&(0===p.explicitOrderBy.length||1===p.explicitOrderBy.length&&p.explicitOrderBy[0].field.isKeyField())}function Rs(p){return null!==p.collectionGroup}function _c(p){const o=Fe(p);if(null===o.ce){o.ce=[];const u=new Set;for(const C of o.explicitOrderBy)o.ce.push(C),u.add(C.field.canonicalString());const f=o.explicitOrderBy.length>0?o.explicitOrderBy[o.explicitOrderBy.length-1].dir:"asc";(function(T){let V=new Gn(un.comparator);return T.filters.forEach(G=>{G.getFlattenedFilters().forEach(X=>{X.isInequality()&&(V=V.add(X.field))})}),V})(o).forEach(C=>{u.has(C.canonicalString())||C.isKeyField()||o.ce.push(new gc(C,f))}),u.has(un.keyField().canonicalString())||o.ce.push(new gc(un.keyField(),f))}return o.ce}function Do(p){const o=Fe(p);return o.le||(o.le=function cl(p,o){if("F"===p.limitType)return Tr(p.path,p.collectionGroup,o,p.filters,p.limit,p.startAt,p.endAt);{o=o.map(_=>new gc(_.field,"desc"===_.dir?"asc":"desc"));const u=p.endAt?new Eo(p.endAt.position,p.endAt.inclusive):null,f=p.startAt?new Eo(p.startAt.position,p.startAt.inclusive):null;return Tr(p.path,p.collectionGroup,o,p.filters,p.limit,u,f)}}(o,_c(p))),o.le}function Y(p,o){const u=p.filters.concat([o]);return new Xi(p.path,p.collectionGroup,p.explicitOrderBy.slice(),u,p.limit,p.limitType,p.startAt,p.endAt)}function Z(p,o,u){return new Xi(p.path,p.collectionGroup,p.explicitOrderBy.slice(),p.filters.slice(),o,u,p.startAt,p.endAt)}function H(p,o){return al(Do(p),Do(o))&&p.limitType===o.limitType}function se(p){return`${jo(Do(p))}|lt:${p.limitType}`}function Te(p){return`Query(target=${function(u){let f=u.path.canonicalString();return null!==u.collectionGroup&&(f+=" collectionGroup="+u.collectionGroup),u.filters.length>0&&(f+=`, filters: [${u.filters.map(_=>ra(_)).join(", ")}]`),vi(u.limit)||(f+=", limit: "+u.limit),u.orderBy.length>0&&(f+=`, orderBy: [${u.orderBy.map(_=>{return`${(T=_).field.canonicalString()} (${T.dir})`;var T}).join(", ")}]`),u.startAt&&(f+=", startAt: ",f+=u.startAt.inclusive?"b:":"a:",f+=u.startAt.position.map(_=>fa(_)).join(",")),u.endAt&&(f+=", endAt: ",f+=u.endAt.inclusive?"a:":"b:",f+=u.endAt.position.map(_=>fa(_)).join(",")),`Target(${f})`}(Do(p))}; limitType=${p.limitType})`}function Ot(p,o){return o.isFoundDocument()&&function(f,_){const C=_.key.path;return null!==f.collectionGroup?_.key.hasCollectionId(f.collectionGroup)&&f.path.isPrefixOf(C):Wt.isDocumentKey(f.path)?f.path.isEqual(C):f.path.isImmediateParentOf(C)}(p,o)&&function(f,_){for(const C of _c(f))if(!C.field.isKeyField()&&null===_.data.field(C.field))return!1;return!0}(p,o)&&function(f,_){for(const C of f.filters)if(!C.matches(_))return!1;return!0}(p,o)&&(_=o,!((f=p).startAt&&!function(T,V,G){const X=Lu(T,V,G);return T.inclusive?X<=0:X<0}(f.startAt,_c(f),_)||f.endAt&&!function(T,V,G){const X=Lu(T,V,G);return T.inclusive?X>=0:X>0}(f.endAt,_c(f),_)));var f,_}function $o(p){return(o,u)=>{let f=!1;for(const _ of _c(p)){const C=va(_,o,u);if(0!==C)return C;f=f||_.field.isKeyField()}return 0}}function va(p,o,u){const f=p.field.isKeyField()?Wt.comparator(o.key,u.key):function(C,T,V){const G=T.data.field(C),X=V.data.field(C);return null!==G&&null!==X?Ki(G,X):Pe()}(p.field,o,u);switch(p.dir){case"asc":return f;case"desc":return-1*f;default:return Pe()}}class Ro{constructor(o,u){this.mapKeyFn=o,this.equalsFn=u,this.inner={},this.innerSize=0}get(o){const u=this.mapKeyFn(o),f=this.inner[u];if(void 0!==f)for(const[_,C]of f)if(this.equalsFn(_,o))return C}has(o){return void 0!==this.get(o)}set(o,u){const f=this.mapKeyFn(o),_=this.inner[f];if(void 0===_)return this.inner[f]=[[o,u]],void this.innerSize++;for(let C=0;C<_.length;C++)if(this.equalsFn(_[C][0],o))return void(_[C]=[o,u]);_.push([o,u]),this.innerSize++}delete(o){const u=this.mapKeyFn(o),f=this.inner[u];if(void 0===f)return!1;for(let _=0;_<f.length;_++)if(this.equalsFn(f[_][0],o))return 1===f.length?delete this.inner[u]:f.splice(_,1),this.innerSize--,!0;return!1}forEach(o){To(this.inner,(u,f)=>{for(const[_,C]of f)o(_,C)})}isEmpty(){return ro(this.inner)}size(){return this.innerSize}}const zs=new Ar(Wt.comparator);function Dn(){return zs}const gu=new Ar(Wt.comparator);function Ms(...p){let o=gu;for(const u of p)o=o.insert(u.key,u);return o}function Zr(p){let o=gu;return p.forEach((u,f)=>o=o.insert(u,f.overlayedDocument)),o}function fs(){return ln()}function Ka(){return ln()}function ln(){return new Ro(p=>p.toString(),(p,o)=>p.isEqual(o))}const vc=new Ar(Wt.comparator),jc=new Gn(Wt.comparator);function Zn(...p){let o=jc;for(const u of p)o=o.add(u);return o}const Sd=new Gn(wn);function cr(p,o){if(p.useProto3Json){if(isNaN(o))return{doubleValue:"NaN"};if(o===1/0)return{doubleValue:"Infinity"};if(o===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yn(o)?"-0":o}}function Xa(p){return{integerValue:""+p}}function ul(p,o){return function Li(p){return"number"==typeof p&&Number.isInteger(p)&&!Yn(p)&&p<=Number.MAX_SAFE_INTEGER&&p>=Number.MIN_SAFE_INTEGER}(o)?Xa(o):cr(p,o)}class Ur{constructor(){this._=void 0}}function ll(p,o,u){return p instanceof mu?function(_,C){const T={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:_.seconds,nanos:_.nanoseconds}}}};return C&&Fc(C)&&(C=la(C)),C&&(T.fields.__previous_value__=C),{mapValue:T}}(u,o):p instanceof ia?Bl(p,o):p instanceof _u?Ec(p,o):function(_,C){const T=yc(_,C),V=Hc(T)+Hc(_.Pe);return Gs(T)&&Gs(_.Pe)?Xa(V):cr(_.serializer,V)}(p,o)}function Bu(p,o,u){return p instanceof ia?Bl(p,o):p instanceof _u?Ec(p,o):u}function yc(p,o){return p instanceof Jr?Gs(f=o)||(C=f)&&"doubleValue"in C?o:{integerValue:0}:null;var f,C}class mu extends Ur{}class ia extends Ur{constructor(o){super(),this.elements=o}}function Bl(p,o){const u=ur(o);for(const f of p.elements)u.some(_=>io(_,f))||u.push(f);return{arrayValue:{values:u}}}class _u extends Ur{constructor(o){super(),this.elements=o}}function Ec(p,o){let u=ur(o);for(const f of p.elements)u=u.filter(_=>!io(_,f));return{arrayValue:{values:u}}}class Jr extends Ur{constructor(o,u){super(),this.serializer=o,this.Pe=u}}function Hc(p){return Mi(p.integerValue||p.doubleValue)}function ur(p){return ls(p)&&p.arrayValue.values?p.arrayValue.values.slice():[]}class Na{constructor(o,u){this.version=o,this.transformResults=u}}class Un{constructor(o,u){this.updateTime=o,this.exists=u}static none(){return new Un}static exists(o){return new Un(void 0,o)}static updateTime(o){return new Un(o)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(o){return this.exists===o.exists&&(this.updateTime?!!o.updateTime&&this.updateTime.isEqual(o.updateTime):!o.updateTime)}}function zn(p,o){return void 0!==p.updateTime?o.isFoundDocument()&&o.version.isEqual(p.updateTime):void 0===p.exists||p.exists===o.isFoundDocument()}class Or{}function Yt(p,o){if(!p.hasLocalMutations||o&&0===o.fields.length)return null;if(null===o)return p.isNoDocument()?new ut(p.key,Un.none()):new F(p.key,p.data,Un.none());{const u=p.data,f=ho.empty();let _=new Gn(un.comparator);for(let C of o.fields)if(!_.has(C)){let T=u.field(C);null===T&&C.length>1&&(C=C.popLast(),T=u.field(C)),null===T?f.delete(C):f.set(C,T),_=_.add(C)}return new re(p.key,f,new Ri(_.toArray()),Un.none())}}function Dd(p,o,u){p instanceof F?function(_,C,T){const V=_.value.clone(),G=ne(_.fieldTransforms,C,T.transformResults);V.setAll(G),C.convertToFoundDocument(T.version,V).setHasCommittedMutations()}(p,o,u):p instanceof re?function(_,C,T){if(!zn(_.precondition,C))return void C.convertToUnknownDocument(T.version);const V=ne(_.fieldTransforms,C,T.transformResults),G=C.data;G.setAll(W(_)),G.setAll(V),C.convertToFoundDocument(T.version,G).setHasCommittedMutations()}(p,o,u):o.convertToNoDocument(u.version).setHasCommittedMutations()}function _r(p,o,u,f){return p instanceof F?function(C,T,V,G){if(!zn(C.precondition,T))return V;const X=C.value.clone(),ce=Ce(C.fieldTransforms,G,T);return X.setAll(ce),T.convertToFoundDocument(T.version,X).setHasLocalMutations(),null}(p,o,u,f):p instanceof re?function(C,T,V,G){if(!zn(C.precondition,T))return V;const X=Ce(C.fieldTransforms,G,T),ce=T.data;return ce.setAll(W(C)),ce.setAll(X),T.convertToFoundDocument(T.version,ce).setHasLocalMutations(),null===V?null:V.unionWith(C.fieldMask.fields).unionWith(C.fieldTransforms.map(we=>we.field))}(p,o,u,f):(V=u,zn(p.precondition,T=o)?(T.convertToNoDocument(T.version).setHasLocalMutations(),null):V);var T,V}function Ih(p,o){let u=null;for(const f of p.fieldTransforms){const _=o.data.field(f.field),C=yc(f.transform,_||null);null!=C&&(null===u&&(u=ho.empty()),u.set(f.field,C))}return u||null}function po(p,o){return p.type===o.type&&!!p.key.isEqual(o.key)&&!!p.precondition.isEqual(o.precondition)&&(_=o.fieldTransforms,!!(void 0===(f=p.fieldTransforms)&&void 0===_||f&&_&&Br(f,_,(C,T)=>function Ci(p,o){return p.field.isEqual(o.field)&&(_=o.transform,(f=p.transform)instanceof ia&&_ instanceof ia||f instanceof _u&&_ instanceof _u?Br(f.elements,_.elements,io):f instanceof Jr&&_ instanceof Jr?io(f.Pe,_.Pe):f instanceof mu&&_ instanceof mu);var f,_}(C,T))))&&(0===p.type?p.value.isEqual(o.value):1!==p.type||p.data.isEqual(o.data)&&p.fieldMask.isEqual(o.fieldMask));var f,_}class F extends Or{constructor(o,u,f,_=[]){super(),this.key=o,this.value=u,this.precondition=f,this.fieldTransforms=_,this.type=0}getFieldMask(){return null}}class re extends Or{constructor(o,u,f,_,C=[]){super(),this.key=o,this.data=u,this.fieldMask=f,this.precondition=_,this.fieldTransforms=C,this.type=1}getFieldMask(){return this.fieldMask}}function W(p){const o=new Map;return p.fieldMask.fields.forEach(u=>{if(!u.isEmpty()){const f=p.data.field(u);o.set(u,f)}}),o}function ne(p,o,u){const f=new Map;je(p.length===u.length);for(let _=0;_<u.length;_++){const C=p[_],T=C.transform,V=o.data.field(C.field);f.set(C.field,Bu(T,V,u[_]))}return f}function Ce(p,o,u){const f=new Map;for(const _ of p){const C=_.transform,T=u.data.field(_.field);f.set(_.field,ll(C,T,o))}return f}class ut extends Or{constructor(o,u){super(),this.key=o,this.precondition=u,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gt extends Or{constructor(o,u){super(),this.key=o,this.precondition=u,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vn{constructor(o,u,f,_){this.batchId=o,this.localWriteTime=u,this.baseMutations=f,this.mutations=_}applyToRemoteDocument(o,u){const f=u.mutationResults;for(let _=0;_<this.mutations.length;_++){const C=this.mutations[_];C.key.isEqual(o.key)&&Dd(C,o,f[_])}}applyToLocalView(o,u){for(const f of this.baseMutations)f.key.isEqual(o.key)&&(u=_r(f,o,u,this.localWriteTime));for(const f of this.mutations)f.key.isEqual(o.key)&&(u=_r(f,o,u,this.localWriteTime));return u}applyToLocalDocumentSet(o,u){const f=Ka();return this.mutations.forEach(_=>{const C=o.get(_.key),T=C.overlayedDocument;let V=this.applyToLocalView(T,C.mutatedFields);V=u.has(_.key)?null:V;const G=Yt(T,V);null!==G&&f.set(_.key,G),T.isValidDocument()||T.convertToNoDocument(cn.min())}),f}keys(){return this.mutations.reduce((o,u)=>o.add(u.key),Zn())}isEqual(o){return this.batchId===o.batchId&&Br(this.mutations,o.mutations,(u,f)=>po(u,f))&&Br(this.baseMutations,o.baseMutations,(u,f)=>po(u,f))}}class dn{constructor(o,u,f,_){this.batch=o,this.commitVersion=u,this.mutationResults=f,this.docVersions=_}static from(o,u,f){je(o.mutations.length===f.length);let _=function(){return vc}();const C=o.mutations;for(let T=0;T<C.length;T++)_=_.insert(C[T].key,f[T].version);return new dn(o,u,f,_)}}class $r{constructor(o,u){this.largestBatchId=o,this.mutation=u}getKey(){return this.mutation.key}isEqual(o){return null!==o&&this.mutation===o.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class wr{constructor(o,u){this.count=o,this.unchangedNames=u}}var dr,qe;function ts(p){if(void 0===p)return bt("GRPC error has no .code"),he.UNKNOWN;switch(p){case dr.OK:return he.OK;case dr.CANCELLED:return he.CANCELLED;case dr.UNKNOWN:return he.UNKNOWN;case dr.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case dr.INTERNAL:return he.INTERNAL;case dr.UNAVAILABLE:return he.UNAVAILABLE;case dr.UNAUTHENTICATED:return he.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case dr.NOT_FOUND:return he.NOT_FOUND;case dr.ALREADY_EXISTS:return he.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return he.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case dr.ABORTED:return he.ABORTED;case dr.OUT_OF_RANGE:return he.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return he.UNIMPLEMENTED;case dr.DATA_LOSS:return he.DATA_LOSS;default:return Pe()}}(qe=dr||(dr={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";const Ya=new pt([4294967295,4294967295],0);function Oi(p){const o=function Mo(){return new TextEncoder}().encode(p),u=new Be;return u.update(o),new Uint8Array(u.digest())}function ya(p){const o=new DataView(p.buffer),u=o.getUint32(0,!0),f=o.getUint32(4,!0),_=o.getUint32(8,!0),C=o.getUint32(12,!0);return[new pt([u,f],0),new pt([_,C],0)]}class mn{constructor(o,u,f){if(this.bitmap=o,this.padding=u,this.hashCount=f,u<0||u>=8)throw new hs(`Invalid padding: ${u}`);if(f<0)throw new hs(`Invalid hash count: ${f}`);if(o.length>0&&0===this.hashCount)throw new hs(`Invalid hash count: ${f}`);if(0===o.length&&0!==u)throw new hs(`Invalid padding when bitmap length is 0: ${u}`);this.Ie=8*o.length-u,this.Te=pt.fromNumber(this.Ie)}Ee(o,u,f){let _=o.add(u.multiply(pt.fromNumber(f)));return 1===_.compare(Ya)&&(_=new pt([_.getBits(0),_.getBits(1)],0)),_.modulo(this.Te).toNumber()}de(o){return!!(this.bitmap[Math.floor(o/8)]&1<<o%8)}mightContain(o){if(0===this.Ie)return!1;const u=Oi(o),[f,_]=ya(u);for(let C=0;C<this.hashCount;C++){const T=this.Ee(f,_,C);if(!this.de(T))return!1}return!0}static create(o,u,f){const _=o%8==0?0:8-o%8,C=new Uint8Array(Math.ceil(o/8)),T=new mn(C,_,u);return f.forEach(V=>T.insert(V)),T}insert(o){if(0===this.Ie)return;const u=Oi(o),[f,_]=ya(u);for(let C=0;C<this.hashCount;C++){const T=this.Ee(f,_,C);this.Ae(T)}}Ae(o){const u=Math.floor(o/8);this.bitmap[u]|=1<<o%8}}class hs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ws{constructor(o,u,f,_,C){this.snapshotVersion=o,this.targetChanges=u,this.targetMismatches=f,this.documentUpdates=_,this.resolvedLimboDocuments=C}static createSynthesizedRemoteEventForCurrentChange(o,u,f){const _=new Map;return _.set(o,Oo.createSynthesizedTargetChangeForCurrentChange(o,u,f)),new Ws(cn.min(),_,new Ar(wn),Dn(),Zn())}}class Oo{constructor(o,u,f,_,C){this.resumeToken=o,this.current=u,this.addedDocuments=f,this.modifiedDocuments=_,this.removedDocuments=C}static createSynthesizedTargetChangeForCurrentChange(o,u,f){return new Oo(f,u,Zn(),Zn(),Zn())}}class dl{constructor(o,u,f,_){this.Re=o,this.removedTargetIds=u,this.key=f,this.Ve=_}}class Rd{constructor(o,u){this.targetId=o,this.me=u}}class Md{constructor(o,u,f=Vi.EMPTY_BYTE_STRING,_=null){this.state=o,this.targetIds=u,this.resumeToken=f,this.cause=_}}class ps{constructor(){this.fe=0,this.ge=oa(),this.pe=Vi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(o){o.approximateByteSize()>0&&(this.we=!0,this.pe=o)}Ce(){let o=Zn(),u=Zn(),f=Zn();return this.ge.forEach((_,C)=>{switch(C){case 0:o=o.add(_);break;case 2:u=u.add(_);break;case 1:f=f.add(_);break;default:Pe()}}),new Oo(this.pe,this.ye,o,u,f)}ve(){this.we=!1,this.ge=oa()}Fe(o,u){this.we=!0,this.ge=this.ge.insert(o,u)}Me(o){this.we=!0,this.ge=this.ge.remove(o)}xe(){this.fe+=1}Oe(){this.fe-=1,je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class li{constructor(o){this.Le=o,this.Be=new Map,this.ke=Dn(),this.qe=Od(),this.Qe=new Ar(wn)}Ke(o){for(const u of o.Re)o.Ve&&o.Ve.isFoundDocument()?this.$e(u,o.Ve):this.Ue(u,o.key,o.Ve);for(const u of o.removedTargetIds)this.Ue(u,o.key,o.Ve)}We(o){this.forEachTarget(o,u=>{const f=this.Ge(u);switch(o.state){case 0:this.ze(u)&&f.De(o.resumeToken);break;case 1:f.Oe(),f.Se||f.ve(),f.De(o.resumeToken);break;case 2:f.Oe(),f.Se||this.removeTarget(u);break;case 3:this.ze(u)&&(f.Ne(),f.De(o.resumeToken));break;case 4:this.ze(u)&&(this.je(u),f.De(o.resumeToken));break;default:Pe()}})}forEachTarget(o,u){o.targetIds.length>0?o.targetIds.forEach(u):this.Be.forEach((f,_)=>{this.ze(_)&&u(_)})}He(o){const u=o.targetId,f=o.me.count,_=this.Je(u);if(_){const C=_.target;if(Uc(C))if(0===f){const T=new Wt(C.path);this.Ue(u,T,Qr.newNoDocument(T,cn.min()))}else je(1===f);else{const T=this.Ye(u);if(T!==f){const V=this.Ze(o),G=V?this.Xe(V,o,T):1;0!==G&&(this.je(u),this.Qe=this.Qe.insert(u,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(o){const u=o.me.unchangedNames;if(!u||!u.bits)return null;const{bits:{bitmap:f="",padding:_=0},hashCount:C=0}=u;let T,V;try{T=xs(f).toUint8Array()}catch(G){if(G instanceof js)return gn("Decoding the base64 bloom filter in existence filter failed ("+G.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw G}try{V=new mn(T,_,C)}catch(G){return gn(G instanceof hs?"BloomFilter error: ":"Applying bloom filter failed: ",G),null}return 0===V.Ie?null:V}Xe(o,u,f){return u.me.count===f-this.nt(o,u.targetId)?0:2}nt(o,u){const f=this.Le.getRemoteKeysForTarget(u);let _=0;return f.forEach(C=>{const T=this.Le.tt(),V=`projects/${T.projectId}/databases/${T.database}/documents/${C.path.canonicalString()}`;o.mightContain(V)||(this.Ue(u,C,null),_++)}),_}rt(o){const u=new Map;this.Be.forEach((C,T)=>{const V=this.Je(T);if(V){if(C.current&&Uc(V.target)){const G=new Wt(V.target.path);null!==this.ke.get(G)||this.it(T,G)||this.Ue(T,G,Qr.newNoDocument(G,o))}C.be&&(u.set(T,C.Ce()),C.ve())}});let f=Zn();this.qe.forEach((C,T)=>{let V=!0;T.forEachWhile(G=>{const X=this.Je(G);return!X||"TargetPurposeLimboResolution"===X.purpose||(V=!1,!1)}),V&&(f=f.add(C))}),this.ke.forEach((C,T)=>T.setReadTime(o));const _=new Ws(o,u,this.Qe,this.ke,f);return this.ke=Dn(),this.qe=Od(),this.Qe=new Ar(wn),_}$e(o,u){if(!this.ze(o))return;const f=this.it(o,u.key)?2:0;this.Ge(o).Fe(u.key,f),this.ke=this.ke.insert(u.key,u),this.qe=this.qe.insert(u.key,this.st(u.key).add(o))}Ue(o,u,f){if(!this.ze(o))return;const _=this.Ge(o);this.it(o,u)?_.Fe(u,1):_.Me(u),this.qe=this.qe.insert(u,this.st(u).delete(o)),f&&(this.ke=this.ke.insert(u,f))}removeTarget(o){this.Be.delete(o)}Ye(o){const u=this.Ge(o).Ce();return this.Le.getRemoteKeysForTarget(o).size+u.addedDocuments.size-u.removedDocuments.size}xe(o){this.Ge(o).xe()}Ge(o){let u=this.Be.get(o);return u||(u=new ps,this.Be.set(o,u)),u}st(o){let u=this.qe.get(o);return u||(u=new Gn(wn),this.qe=this.qe.insert(o,u)),u}ze(o){const u=null!==this.Je(o);return u||Se("WatchChangeAggregator","Detected inactive target",o),u}Je(o){const u=this.Be.get(o);return u&&u.Se?null:this.Le.ot(o)}je(o){this.Be.set(o,new ps),this.Le.getRemoteKeysForTarget(o).forEach(u=>{this.Ue(o,u,null)})}it(o,u){return this.Le.getRemoteKeysForTarget(o).has(u)}}function Od(){return new Ar(Wt.comparator)}function oa(){return new Ar(Wt.comparator)}const Uu={asc:"ASCENDING",desc:"DESCENDING"},ao={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ju={and:"AND",or:"OR"};class sn{constructor(o,u){this.databaseId=o,this.useProto3Json=u}}function Cc(p,o){return p.useProto3Json||vi(o)?o:{value:o}}function Yi(p,o){return p.useProto3Json?`${new Date(1e3*o.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+o.nanoseconds).slice(-9)}Z`:{seconds:""+o.seconds,nanos:o.nanoseconds}}function Hu(p,o){return p.useProto3Json?o.toBase64():o.toUint8Array()}function wc(p,o){return Yi(p,o.toTimestamp())}function Bi(p){return je(!!p),cn.fromTimestamp(function(u){const f=Jo(u);return new Kn(f.seconds,f.nanos)}(p))}function Gu(p,o){return vu(p,o).canonicalString()}function vu(p,o){const u=(_=p,new Nt(["projects",_.projectId,"databases",_.database])).child("documents");var _;return void 0===o?u:u.child(o)}function zo(p){const o=Nt.fromString(p);return je(Hl(o)),o}function Wo(p,o){return Gu(p.databaseId,o.path)}function Os(p,o){const u=zo(o);if(u.get(1)!==p.databaseId.projectId)throw new _e(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+u.get(1)+" vs "+p.databaseId.projectId);if(u.get(3)!==p.databaseId.database)throw new _e(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+u.get(3)+" vs "+p.databaseId.database);return new Wt(pi(u))}function Gc(p,o){return Gu(p.databaseId,o)}function $u(p){return new Nt(["projects",p.databaseId.projectId,"databases",p.databaseId.database]).canonicalString()}function pi(p){return je(p.length>4&&"documents"===p.get(4)),p.popFirst(5)}function Pr(p,o,u){return{name:Wo(p,o),fields:u.value.mapValue.fields}}function La(p,o){return{documents:[Gc(p,o.path)]}}function Zi(p,o){const u={structuredQuery:{}},f=o.path;let _;null!==o.collectionGroup?(_=f,u.structuredQuery.from=[{collectionId:o.collectionGroup,allDescendants:!0}]):(_=f.popLast(),u.structuredQuery.from=[{collectionId:f.lastSegment()}]),u.parent=Gc(p,_);const C=function(X){if(0!==X.length)return pl(hr.create(X,"and"))}(o.filters);C&&(u.structuredQuery.where=C);const T=function(X){if(0!==X.length)return X.map(ce=>{return{field:hn((Le=ce).field),direction:fl(Le.dir)};var Le})}(o.orderBy);T&&(u.structuredQuery.orderBy=T);const V=Cc(p,o.limit);return null!==V&&(u.structuredQuery.limit=V),o.startAt&&(u.structuredQuery.startAt={before:(X=o.startAt).inclusive,values:X.position}),o.endAt&&(u.structuredQuery.endAt=function(X){return{before:!X.inclusive,values:X.position}}(o.endAt)),{_t:u,parent:_};var X}function Wu(p){let o=function Co(p){const o=zo(p);return 4===o.length?Nt.emptyPath():pi(o)}(p.parent);const u=p.structuredQuery,f=u.from?u.from.length:0;let _=null;if(f>0){je(1===f);const ce=u.from[0];ce.allDescendants?_=ce.collectionId:o=o.child(ce.collectionId)}let C=[];u.where&&(C=function(we){const Le=Ir(we);return Le instanceof hr&&Ma(Le)?Le.getFilters():[Le]}(u.where));let T=[];u.orderBy&&(T=u.orderBy.map(Le=>{return new gc(yu((Ut=Le).field),function(Gt){switch(Gt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ut.direction));var Ut}));let V=null;u.limit&&(V=function(we){let Le;return Le="object"==typeof we?we.value:we,vi(Le)?null:Le}(u.limit));let G=null;var we;u.startAt&&(G=new Eo((we=u.startAt).values||[],!!we.before));let X=null;return u.endAt&&(X=function(we){return new Eo(we.values||[],!we.before)}(u.endAt)),function Pa(p,o,u,f,_,C,T,V){return new Xi(p,o,u,f,_,C,T,V)}(o,_,T,C,V,"F",G,X)}function Ir(p){return void 0!==p.unaryFilter?function(u){switch(u.unaryFilter.op){case"IS_NAN":const f=yu(u.unaryFilter.field);return Xn.create(f,"==",{doubleValue:NaN});case"IS_NULL":const _=yu(u.unaryFilter.field);return Xn.create(_,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const C=yu(u.unaryFilter.field);return Xn.create(C,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const T=yu(u.unaryFilter.field);return Xn.create(T,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(p):void 0!==p.fieldFilter?Xn.create(yu((u=p).fieldFilter.field),function(_){switch(_){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(u.fieldFilter.op),u.fieldFilter.value):void 0!==p.compositeFilter?function(u){return hr.create(u.compositeFilter.filters.map(f=>Ir(f)),function(_){switch(_){case"AND":return"and";case"OR":return"or";default:return Pe()}}(u.compositeFilter.op))}(p):Pe();var u}function fl(p){return Uu[p]}function hl(p){return ao[p]}function jl(p){return ju[p]}function hn(p){return{fieldPath:p.canonicalString()}}function yu(p){return un.fromServerFormat(p.fieldPath)}function pl(p){return p instanceof Xn?function(u){if("=="===u.op){if(fo(u.value))return{unaryFilter:{field:hn(u.field),op:"IS_NAN"}};if(hu(u.value))return{unaryFilter:{field:hn(u.field),op:"IS_NULL"}}}else if("!="===u.op){if(fo(u.value))return{unaryFilter:{field:hn(u.field),op:"IS_NOT_NAN"}};if(hu(u.value))return{unaryFilter:{field:hn(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hn(u.field),op:hl(u.op),value:u.value}}}(p):p instanceof hr?function(u){const f=u.getFilters().map(_=>pl(_));return 1===f.length?f[0]:{compositeFilter:{op:jl(u.op),filters:f}}}(p):Pe()}function Va(p){const o=[];return p.fields.forEach(u=>o.push(u.canonicalString())),{fieldPaths:o}}function Hl(p){return p.length>=4&&"projects"===p.get(0)&&"databases"===p.get(2)}class Ba{constructor(o,u,f,_,C=cn.min(),T=cn.min(),V=Vi.EMPTY_BYTE_STRING,G=null){this.target=o,this.targetId=u,this.purpose=f,this.sequenceNumber=_,this.snapshotVersion=C,this.lastLimboFreeSnapshotVersion=T,this.resumeToken=V,this.expectedCount=G}withSequenceNumber(o){return new Ba(this.target,this.targetId,this.purpose,o,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(o,u){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,u,this.lastLimboFreeSnapshotVersion,o,null)}withExpectedCount(o){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,o)}withLastLimboFreeSnapshotVersion(o){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,o,this.resumeToken,this.expectedCount)}}class If{constructor(o){this.ct=o}}function j(p){const o=Wu({parent:p.parent,structuredQuery:p.structuredQuery});return"LAST"===p.limitType?Z(o,o.limit,"L"):o}class xr{constructor(){}Pt(o,u){this.It(o,u),u.Tt()}It(o,u){if("nullValue"in o)this.Et(u,5);else if("booleanValue"in o)this.Et(u,10),u.dt(o.booleanValue?1:0);else if("integerValue"in o)this.Et(u,15),u.dt(Mi(o.integerValue));else if("doubleValue"in o){const f=Mi(o.doubleValue);isNaN(f)?this.Et(u,13):(this.Et(u,15),Yn(f)?u.dt(0):u.dt(f))}else if("timestampValue"in o){let f=o.timestampValue;this.Et(u,20),"string"==typeof f&&(f=Jo(f)),u.At(`${f.seconds||""}`),u.dt(f.nanos||0)}else if("stringValue"in o)this.Rt(o.stringValue,u),this.Vt(u);else if("bytesValue"in o)this.Et(u,30),u.ft(xs(o.bytesValue)),this.Vt(u);else if("referenceValue"in o)this.gt(o.referenceValue,u);else if("geoPointValue"in o){const f=o.geoPointValue;this.Et(u,45),u.dt(f.latitude||0),u.dt(f.longitude||0)}else"mapValue"in o?ha(o)?this.Et(u,Number.MAX_SAFE_INTEGER):(this.yt(o.mapValue,u),this.Vt(u)):"arrayValue"in o?(this.wt(o.arrayValue,u),this.Vt(u)):Pe()}Rt(o,u){this.Et(u,25),this.St(o,u)}St(o,u){u.At(o)}yt(o,u){const f=o.fields||{};this.Et(u,55);for(const _ of Object.keys(f))this.Rt(_,u),this.It(f[_],u)}wt(o,u){const f=o.values||[];this.Et(u,50);for(const _ of f)this.It(_,u)}gt(o,u){this.Et(u,37),Wt.fromName(o).path.forEach(f=>{this.Et(u,60),this.St(f,u)})}Et(o,u){o.dt(u)}Vt(o){o.dt(2)}}xr.bt=new xr;class zl{constructor(){this._n=new Wl}addToCollectionParentIndex(o,u){return this._n.add(u),fe.resolve()}getCollectionParents(o,u){return fe.resolve(this._n.getEntries(u))}addFieldIndex(o,u){return fe.resolve()}deleteFieldIndex(o,u){return fe.resolve()}deleteAllFieldIndexes(o){return fe.resolve()}createTargetIndexes(o,u){return fe.resolve()}getDocumentsMatchingTarget(o,u){return fe.resolve(null)}getIndexType(o,u){return fe.resolve(0)}getFieldIndexes(o,u){return fe.resolve([])}getNextCollectionGroupToUpdate(o){return fe.resolve(null)}getMinOffset(o,u){return fe.resolve(ri.min())}getMinOffsetFromCollectionGroup(o,u){return fe.resolve(ri.min())}updateCollectionGroup(o,u,f){return fe.resolve()}updateIndexEntries(o,u){return fe.resolve()}}class Wl{constructor(){this.index={}}add(o){const u=o.lastSegment(),f=o.popLast(),_=this.index[u]||new Gn(Nt.comparator),C=!_.has(f);return this.index[u]=_.add(f),C}has(o){const u=o.lastSegment(),f=o.popLast(),_=this.index[u];return _&&_.has(f)}getEntries(o){return(this.index[o]||new Gn(Nt.comparator)).toArray()}}new Uint8Array(0);class Lr{constructor(o,u,f){this.cacheSizeCollectionThreshold=o,this.percentileToCollect=u,this.maximumSequenceNumbersToCollect=f}static withCacheSize(o){return new Lr(o,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(41943040,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);class tc{constructor(o){this.On=o}next(){return this.On+=2,this.On}static Nn(){return new tc(0)}static Ln(){return new tc(-1)}}class Df{constructor(){this.changes=new Ro(o=>o.toString(),(o,u)=>o.isEqual(u)),this.changesApplied=!1}addEntry(o){this.assertNotApplied(),this.changes.set(o.key,o)}removeEntry(o,u){this.assertNotApplied(),this.changes.set(o,Qr.newInvalidDocument(o).setReadTime(u))}getEntry(o,u){this.assertNotApplied();const f=this.changes.get(u);return void 0!==f?fe.resolve(f):this.getFromCache(o,u)}getEntries(o,u){return this.getAllFromCache(o,u)}apply(o){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(o)}assertNotApplied(){}}class _s{constructor(o,u){this.overlayedDocument=o,this.mutatedFields=u}}class vs{constructor(o,u,f,_){this.remoteDocumentCache=o,this.mutationQueue=u,this.documentOverlayCache=f,this.indexManager=_}getDocument(o,u){let f=null;return this.documentOverlayCache.getOverlay(o,u).next(_=>(f=_,this.remoteDocumentCache.getEntry(o,u))).next(_=>(null!==f&&_r(f.mutation,_,Ri.empty(),Kn.now()),_))}getDocuments(o,u){return this.remoteDocumentCache.getEntries(o,u).next(f=>this.getLocalViewOfDocuments(o,f,Zn()).next(()=>f))}getLocalViewOfDocuments(o,u,f=Zn()){const _=fs();return this.populateOverlays(o,_,u).next(()=>this.computeViews(o,u,_,f).next(C=>{let T=Ms();return C.forEach((V,G)=>{T=T.insert(V,G.overlayedDocument)}),T}))}getOverlayedDocuments(o,u){const f=fs();return this.populateOverlays(o,f,u).next(()=>this.computeViews(o,u,f,Zn()))}populateOverlays(o,u,f){const _=[];return f.forEach(C=>{u.has(C)||_.push(C)}),this.documentOverlayCache.getOverlays(o,_).next(C=>{C.forEach((T,V)=>{u.set(T,V)})})}computeViews(o,u,f,_){let C=Dn();const T=ln(),V=ln();return u.forEach((G,X)=>{const ce=f.get(X.key);_.has(X.key)&&(void 0===ce||ce.mutation instanceof re)?C=C.insert(X.key,X):void 0!==ce?(T.set(X.key,ce.mutation.getFieldMask()),_r(ce.mutation,X,ce.mutation.getFieldMask(),Kn.now())):T.set(X.key,Ri.empty())}),this.recalculateAndSaveOverlays(o,C).next(G=>(G.forEach((X,ce)=>T.set(X,ce)),u.forEach((X,ce)=>{var we;return V.set(X,new _s(ce,null!==(we=T.get(X))&&void 0!==we?we:null))}),V))}recalculateAndSaveOverlays(o,u){const f=ln();let _=new Ar((T,V)=>T-V),C=Zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(o,u).next(T=>{for(const V of T)V.keys().forEach(G=>{const X=u.get(G);if(null===X)return;let ce=f.get(G)||Ri.empty();ce=V.applyToLocalView(X,ce),f.set(G,ce);const we=(_.get(V.batchId)||Zn()).add(G);_=_.insert(V.batchId,we)})}).next(()=>{const T=[],V=_.getReverseIterator();for(;V.hasNext();){const G=V.getNext(),X=G.key,ce=G.value,we=Ka();ce.forEach(Le=>{if(!C.has(Le)){const ht=Yt(u.get(Le),f.get(Le));null!==ht&&we.set(Le,ht),C=C.add(Le)}}),T.push(this.documentOverlayCache.saveOverlays(o,X,we))}return fe.waitFor(T)}).next(()=>f)}recalculateAndSaveOverlaysForDocumentKeys(o,u){return this.remoteDocumentCache.getEntries(o,u).next(f=>this.recalculateAndSaveOverlays(o,f))}getDocumentsMatchingQuery(o,u,f,_){return Wt.isDocumentKey((T=u).path)&&null===T.collectionGroup&&0===T.filters.length?this.getDocumentsMatchingDocumentQuery(o,u.path):Rs(u)?this.getDocumentsMatchingCollectionGroupQuery(o,u,f,_):this.getDocumentsMatchingCollectionQuery(o,u,f,_);var T}getNextDocuments(o,u,f,_){return this.remoteDocumentCache.getAllFromCollectionGroup(o,u,f,_).next(C=>{const T=_-C.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(o,u,f.largestBatchId,_-C.size):fe.resolve(fs());let V=-1,G=C;return T.next(X=>fe.forEach(X,(ce,we)=>(V<we.largestBatchId&&(V=we.largestBatchId),C.get(ce)?fe.resolve():this.remoteDocumentCache.getEntry(o,ce).next(Le=>{G=G.insert(ce,Le)}))).next(()=>this.populateOverlays(o,X,C)).next(()=>this.computeViews(o,G,X,Zn())).next(ce=>({batchId:V,changes:Zr(ce)})))})}getDocumentsMatchingDocumentQuery(o,u){return this.getDocument(o,new Wt(u)).next(f=>{let _=Ms();return f.isFoundDocument()&&(_=_.insert(f.key,f)),_})}getDocumentsMatchingCollectionGroupQuery(o,u,f,_){const C=u.collectionGroup;let T=Ms();return this.indexManager.getCollectionParents(o,C).next(V=>fe.forEach(V,G=>{const X=(we=u,Le=G.child(C),new Xi(Le,null,we.explicitOrderBy.slice(),we.filters.slice(),we.limit,we.limitType,we.startAt,we.endAt));var we,Le;return this.getDocumentsMatchingCollectionQuery(o,X,f,_).next(ce=>{ce.forEach((we,Le)=>{T=T.insert(we,Le)})})}).next(()=>T))}getDocumentsMatchingCollectionQuery(o,u,f,_){let C;return this.documentOverlayCache.getOverlaysForCollection(o,u.path,f.largestBatchId).next(T=>(C=T,this.remoteDocumentCache.getDocumentsMatchingQuery(o,u,f,C,_))).next(T=>{C.forEach((G,X)=>{const ce=X.getKey();null===T.get(ce)&&(T=T.insert(ce,Qr.newInvalidDocument(ce)))});let V=Ms();return T.forEach((G,X)=>{const ce=C.get(G);void 0!==ce&&_r(ce.mutation,X,Ri.empty(),Kn.now()),Ot(u,X)&&(V=V.insert(G,X))}),V})}}class vl{constructor(o){this.serializer=o,this.cr=new Map,this.lr=new Map}getBundleMetadata(o,u){return fe.resolve(this.cr.get(u))}saveBundleMetadata(o,u){return this.cr.set(u.id,{id:(_=u).id,version:_.version,createTime:Bi(_.createTime)}),fe.resolve();var _}getNamedQuery(o,u){return fe.resolve(this.lr.get(u))}saveNamedQuery(o,u){return this.lr.set(u.name,{name:(_=u).name,query:j(_.bundledQuery),readTime:Bi(_.readTime)}),fe.resolve();var _}}class Ii{constructor(){this.overlays=new Ar(Wt.comparator),this.hr=new Map}getOverlay(o,u){return fe.resolve(this.overlays.get(u))}getOverlays(o,u){const f=fs();return fe.forEach(u,_=>this.getOverlay(o,_).next(C=>{null!==C&&f.set(_,C)})).next(()=>f)}saveOverlays(o,u,f){return f.forEach((_,C)=>{this.ht(o,u,C)}),fe.resolve()}removeOverlaysForBatchId(o,u,f){const _=this.hr.get(f);return void 0!==_&&(_.forEach(C=>this.overlays=this.overlays.remove(C)),this.hr.delete(f)),fe.resolve()}getOverlaysForCollection(o,u,f){const _=fs(),C=u.length+1,T=new Wt(u.child("")),V=this.overlays.getIteratorFrom(T);for(;V.hasNext();){const G=V.getNext().value,X=G.getKey();if(!u.isPrefixOf(X.path))break;X.path.length===C&&G.largestBatchId>f&&_.set(G.getKey(),G)}return fe.resolve(_)}getOverlaysForCollectionGroup(o,u,f,_){let C=new Ar((X,ce)=>X-ce);const T=this.overlays.getIterator();for(;T.hasNext();){const X=T.getNext().value;if(X.getKey().getCollectionGroup()===u&&X.largestBatchId>f){let ce=C.get(X.largestBatchId);null===ce&&(ce=fs(),C=C.insert(X.largestBatchId,ce)),ce.set(X.getKey(),X)}}const V=fs(),G=C.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((X,ce)=>V.set(X,ce)),!(V.size()>=_)););return fe.resolve(V)}ht(o,u,f){const _=this.overlays.get(f.key);if(null!==_){const T=this.hr.get(_.largestBatchId).delete(f.key);this.hr.set(_.largestBatchId,T)}this.overlays=this.overlays.insert(f.key,new $r(u,f));let C=this.hr.get(u);void 0===C&&(C=Zn(),this.hr.set(u,C)),this.hr.set(u,C.add(f.key))}}class Pi{constructor(){this.Pr=new Gn(Ni.Ir),this.Tr=new Gn(Ni.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(o,u){const f=new Ni(o,u);this.Pr=this.Pr.add(f),this.Tr=this.Tr.add(f)}dr(o,u){o.forEach(f=>this.addReference(f,u))}removeReference(o,u){this.Ar(new Ni(o,u))}Rr(o,u){o.forEach(f=>this.removeReference(f,u))}Vr(o){const u=new Wt(new Nt([])),f=new Ni(u,o),_=new Ni(u,o+1),C=[];return this.Tr.forEachInRange([f,_],T=>{this.Ar(T),C.push(T.key)}),C}mr(){this.Pr.forEach(o=>this.Ar(o))}Ar(o){this.Pr=this.Pr.delete(o),this.Tr=this.Tr.delete(o)}gr(o){const u=new Wt(new Nt([])),f=new Ni(u,o),_=new Ni(u,o+1);let C=Zn();return this.Tr.forEachInRange([f,_],T=>{C=C.add(T.key)}),C}containsKey(o){const u=new Ni(o,0),f=this.Pr.firstAfterOrEqual(u);return null!==f&&o.isEqual(f.key)}}class Ni{constructor(o,u){this.key=o,this.pr=u}static Ir(o,u){return Wt.comparator(o.key,u.key)||wn(o.pr,u.pr)}static Er(o,u){return wn(o.pr,u.pr)||Wt.comparator(o.key,u.key)}}class nr{constructor(o,u){this.indexManager=o,this.referenceDelegate=u,this.mutationQueue=[],this.yr=1,this.wr=new Gn(Ni.Ir)}checkEmpty(o){return fe.resolve(0===this.mutationQueue.length)}addMutationBatch(o,u,f,_){const C=this.yr;this.yr++;const T=new vn(C,u,f,_);this.mutationQueue.push(T);for(const V of _)this.wr=this.wr.add(new Ni(V.key,C)),this.indexManager.addToCollectionParentIndex(o,V.key.path.popLast());return fe.resolve(T)}lookupMutationBatch(o,u){return fe.resolve(this.Sr(u))}getNextMutationBatchAfterBatchId(o,u){const _=this.br(u+1),C=_<0?0:_;return fe.resolve(this.mutationQueue.length>C?this.mutationQueue[C]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(o){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(o,u){const f=new Ni(u,0),_=new Ni(u,Number.POSITIVE_INFINITY),C=[];return this.wr.forEachInRange([f,_],T=>{const V=this.Sr(T.pr);C.push(V)}),fe.resolve(C)}getAllMutationBatchesAffectingDocumentKeys(o,u){let f=new Gn(wn);return u.forEach(_=>{const C=new Ni(_,0),T=new Ni(_,Number.POSITIVE_INFINITY);this.wr.forEachInRange([C,T],V=>{f=f.add(V.pr)})}),fe.resolve(this.Dr(f))}getAllMutationBatchesAffectingQuery(o,u){const f=u.path,_=f.length+1;let C=f;Wt.isDocumentKey(C)||(C=C.child(""));const T=new Ni(new Wt(C),0);let V=new Gn(wn);return this.wr.forEachWhile(G=>{const X=G.key.path;return!!f.isPrefixOf(X)&&(X.length===_&&(V=V.add(G.pr)),!0)},T),fe.resolve(this.Dr(V))}Dr(o){const u=[];return o.forEach(f=>{const _=this.Sr(f);null!==_&&u.push(_)}),u}removeMutationBatch(o,u){je(0===this.Cr(u.batchId,"removed")),this.mutationQueue.shift();let f=this.wr;return fe.forEach(u.mutations,_=>{const C=new Ni(_.key,u.batchId);return f=f.delete(C),this.referenceDelegate.markPotentiallyOrphaned(o,_.key)}).next(()=>{this.wr=f})}Mn(o){}containsKey(o,u){const f=new Ni(u,0),_=this.wr.firstAfterOrEqual(f);return fe.resolve(u.isEqual(_&&_.key))}performConsistencyCheck(o){return fe.resolve()}Cr(o,u){return this.br(o)}br(o){return 0===this.mutationQueue.length?0:o-this.mutationQueue[0].batchId}Sr(o){const u=this.br(o);return u<0||u>=this.mutationQueue.length?null:this.mutationQueue[u]}}class Xl{constructor(o){this.vr=o,this.docs=new Ar(Wt.comparator),this.size=0}setIndexManager(o){this.indexManager=o}addEntry(o,u){const f=u.key,_=this.docs.get(f),C=_?_.size:0,T=this.vr(u);return this.docs=this.docs.insert(f,{document:u.mutableCopy(),size:T}),this.size+=T-C,this.indexManager.addToCollectionParentIndex(o,f.path.popLast())}removeEntry(o){const u=this.docs.get(o);u&&(this.docs=this.docs.remove(o),this.size-=u.size)}getEntry(o,u){const f=this.docs.get(u);return fe.resolve(f?f.document.mutableCopy():Qr.newInvalidDocument(u))}getEntries(o,u){let f=Dn();return u.forEach(_=>{const C=this.docs.get(_);f=f.insert(_,C?C.document.mutableCopy():Qr.newInvalidDocument(_))}),fe.resolve(f)}getDocumentsMatchingQuery(o,u,f,_){let C=Dn();const T=u.path,V=new Wt(T.child("")),G=this.docs.getIteratorFrom(V);for(;G.hasNext();){const{key:X,value:{document:ce}}=G.getNext();if(!T.isPrefixOf(X.path))break;X.path.length>T.length+1||zi(new ri((p=ce).readTime,p.key,-1),f)<=0||(_.has(ce.key)||Ot(u,ce))&&(C=C.insert(ce.key,ce.mutableCopy()))}var p;return fe.resolve(C)}getAllFromCollectionGroup(o,u,f,_){Pe()}Fr(o,u){return fe.forEach(this.docs,f=>u(f))}newChangeBuffer(o){return new nc(this)}getSize(o){return fe.resolve(this.size)}}class nc extends Df{constructor(o){super(),this.ar=o}applyChanges(o){const u=[];return this.changes.forEach((f,_)=>{_.isValidDocument()?u.push(this.ar.addEntry(o,_)):this.ar.removeEntry(f)}),fe.waitFor(u)}getFromCache(o,u){return this.ar.getEntry(o,u)}getAllFromCache(o,u){return this.ar.getEntries(o,u)}}class yl{constructor(o){this.persistence=o,this.Mr=new Ro(u=>jo(u),al),this.lastRemoteSnapshotVersion=cn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Pi,this.targetCount=0,this.Lr=tc.Nn()}forEachTarget(o,u){return this.Mr.forEach((f,_)=>u(_)),fe.resolve()}getLastRemoteSnapshotVersion(o){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(o){return fe.resolve(this.Or)}allocateTargetId(o){return this.highestTargetId=this.Lr.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(o,u,f){return f&&(this.lastRemoteSnapshotVersion=f),u>this.Or&&(this.Or=u),fe.resolve()}qn(o){this.Mr.set(o.target,o);const u=o.targetId;u>this.highestTargetId&&(this.Lr=new tc(u),this.highestTargetId=u),o.sequenceNumber>this.Or&&(this.Or=o.sequenceNumber)}addTargetData(o,u){return this.qn(u),this.targetCount+=1,fe.resolve()}updateTargetData(o,u){return this.qn(u),fe.resolve()}removeTargetData(o,u){return this.Mr.delete(u.target),this.Nr.Vr(u.targetId),this.targetCount-=1,fe.resolve()}removeTargets(o,u,f){let _=0;const C=[];return this.Mr.forEach((T,V)=>{V.sequenceNumber<=u&&null===f.get(V.targetId)&&(this.Mr.delete(T),C.push(this.removeMatchingKeysForTargetId(o,V.targetId)),_++)}),fe.waitFor(C).next(()=>_)}getTargetCount(o){return fe.resolve(this.targetCount)}getTargetData(o,u){const f=this.Mr.get(u)||null;return fe.resolve(f)}addMatchingKeys(o,u,f){return this.Nr.dr(u,f),fe.resolve()}removeMatchingKeys(o,u,f){this.Nr.Rr(u,f);const _=this.persistence.referenceDelegate,C=[];return _&&u.forEach(T=>{C.push(_.markPotentiallyOrphaned(o,T))}),fe.waitFor(C)}removeMatchingKeysForTargetId(o,u){return this.Nr.Vr(u),fe.resolve()}getMatchingKeysForTargetId(o,u){const f=this.Nr.gr(u);return fe.resolve(f)}containsKey(o,u){return fe.resolve(this.Nr.containsKey(u))}}class Ai{constructor(o,u){this.Br={},this.overlays={},this.kr=new mr(0),this.qr=!1,this.qr=!0,this.referenceDelegate=o(this),this.Qr=new yl(this),this.indexManager=new zl,this.remoteDocumentCache=new Xl(f=>this.referenceDelegate.Kr(f)),this.serializer=new If(u),this.$r=new vl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(o){return this.indexManager}getDocumentOverlayCache(o){let u=this.overlays[o.toKey()];return u||(u=new Ii,this.overlays[o.toKey()]=u),u}getMutationQueue(o,u){let f=this.Br[o.toKey()];return f||(f=new nr(u,this.referenceDelegate),this.Br[o.toKey()]=f),f}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(o,u,f){Se("MemoryPersistence","Starting transaction:",o);const _=new Qu(this.kr.next());return this.referenceDelegate.Ur(),f(_).next(C=>this.referenceDelegate.Wr(_).next(()=>C)).toPromise().then(C=>(_.raiseOnCommittedEvent(),C))}Gr(o,u){return fe.or(Object.values(this.Br).map(f=>()=>f.containsKey(o,u)))}}class Qu extends Fi{constructor(o){super(),this.currentSequenceNumber=o}}class Xc{constructor(o){this.persistence=o,this.zr=new Pi,this.jr=null}static Hr(o){return new Xc(o)}get Jr(){if(this.jr)return this.jr;throw Pe()}addReference(o,u,f){return this.zr.addReference(f,u),this.Jr.delete(f.toString()),fe.resolve()}removeReference(o,u,f){return this.zr.removeReference(f,u),this.Jr.add(f.toString()),fe.resolve()}markPotentiallyOrphaned(o,u){return this.Jr.add(u.toString()),fe.resolve()}removeTarget(o,u){this.zr.Vr(u.targetId).forEach(_=>this.Jr.add(_.toString()));const f=this.persistence.getTargetCache();return f.getMatchingKeysForTargetId(o,u.targetId).next(_=>{_.forEach(C=>this.Jr.add(C.toString()))}).next(()=>f.removeTargetData(o,u))}Ur(){this.jr=new Set}Wr(o){const u=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Jr,f=>{const _=Wt.fromPath(f);return this.Yr(o,_).next(C=>{C||u.removeEntry(_,cn.min())})}).next(()=>(this.jr=null,u.apply(o)))}updateLimboDocument(o,u){return this.Yr(o,u).next(f=>{f?this.Jr.delete(u.toString()):this.Jr.add(u.toString())})}Kr(o){return 0}Yr(o,u){return fe.or([()=>fe.resolve(this.zr.containsKey(u)),()=>this.persistence.getTargetCache().containsKey(o,u),()=>this.persistence.Gr(o,u)])}}class Yu{constructor(o,u,f,_){this.targetId=o,this.fromCache=u,this.qi=f,this.Qi=_}static Ki(o,u){let f=Zn(),_=Zn();for(const C of u.docChanges)switch(C.type){case 0:f=f.add(C.doc.key);break;case 1:_=_.add(C.doc.key)}return new Yu(o,u.fromCache,f,_)}}class Tc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(o){this._documentReadCount+=o}}class Cl{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,ve.nr)()?8:function Qe(p){const o=p.match(/Android ([\d.]+)/i),u=o?o[1].split(".").slice(0,2).join("."):"-1";return Number(u)}((0,ve.ZQ)())>0?6:4}initialize(o,u){this.zi=o,this.indexManager=u,this.$i=!0}getDocumentsMatchingQuery(o,u,f,_){const C={result:null};return this.ji(o,u).next(T=>{C.result=T}).next(()=>{if(!C.result)return this.Hi(o,u,_,f).next(T=>{C.result=T})}).next(()=>{if(C.result)return;const T=new Tc;return this.Ji(o,u,T).next(V=>{if(C.result=V,this.Ui)return this.Yi(o,u,T,V.size)})}).next(()=>C.result)}Yi(o,u,f,_){return f.documentReadCount<this.Wi?(Sn()<=it.$b.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Te(u),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),fe.resolve()):(Sn()<=it.$b.DEBUG&&Se("QueryEngine","Query:",Te(u),"scans",f.documentReadCount,"local documents and returns",_,"documents as results."),f.documentReadCount>this.Gi*_?(Sn()<=it.$b.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Te(u),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(o,Do(u))):fe.resolve())}ji(o,u){if(Yr(u))return fe.resolve(null);let f=Do(u);return this.indexManager.getIndexType(o,f).next(_=>0===_?null:(null!==u.limit&&1===_&&(u=Z(u,null,"F"),f=Do(u)),this.indexManager.getDocumentsMatchingTarget(o,f).next(C=>{const T=Zn(...C);return this.zi.getDocuments(o,T).next(V=>this.indexManager.getMinOffset(o,f).next(G=>{const X=this.Zi(u,V);return this.Xi(u,X,T,G.readTime)?this.ji(o,Z(u,null,"F")):this.es(o,X,u,G)}))})))}Hi(o,u,f,_){return Yr(u)||_.isEqual(cn.min())?fe.resolve(null):this.zi.getDocuments(o,f).next(C=>{const T=this.Zi(u,C);return this.Xi(u,T,f,_)?fe.resolve(null):(Sn()<=it.$b.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",_.toString(),Te(u)),this.es(o,T,u,function Vn(p,o){const u=p.toTimestamp().seconds,f=p.toTimestamp().nanoseconds+1,_=cn.fromTimestamp(1e9===f?new Kn(u+1,0):new Kn(u,f));return new ri(_,Wt.empty(),o)}(_,-1)).next(V=>V))})}Zi(o,u){let f=new Gn($o(o));return u.forEach((_,C)=>{Ot(o,C)&&(f=f.add(C))}),f}Xi(o,u,f,_){if(null===o.limit)return!1;if(f.size!==u.size)return!0;const C="F"===o.limitType?u.last():u.first();return!!C&&(C.hasPendingWrites||C.version.compareTo(_)>0)}Ji(o,u,f){return Sn()<=it.$b.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Te(u)),this.zi.getDocumentsMatchingQuery(o,u,ri.min(),f)}es(o,u,f,_){return this.zi.getDocumentsMatchingQuery(o,f,_).next(C=>(u.forEach(T=>{C=C.insert(T.key,T)}),C))}}class Qc{constructor(o,u,f,_){this.persistence=o,this.ts=u,this.serializer=_,this.ns=new Ar(wn),this.rs=new Ro(C=>jo(C),al),this.ss=new Map,this.os=o.getRemoteDocumentCache(),this.Qr=o.getTargetCache(),this.$r=o.getBundleCache(),this._s(f)}_s(o){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(o),this.indexManager=this.persistence.getIndexManager(o),this.mutationQueue=this.persistence.getMutationQueue(o,this.indexManager),this.localDocuments=new vs(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(o){return this.persistence.runTransaction("Collect garbage","readwrite-primary",u=>o.collect(u,this.ns))}}function wl(p,o){return Po.apply(this,arguments)}function Po(){return(Po=(0,Ee.A)(function*(p,o){const u=Fe(p);return yield u.persistence.runTransaction("Handle user change","readonly",f=>{let _;return u.mutationQueue.getAllMutationBatches(f).next(C=>(_=C,u._s(o),u.mutationQueue.getAllMutationBatches(f))).next(C=>{const T=[],V=[];let G=Zn();for(const X of _){T.push(X.batchId);for(const ce of X.mutations)G=G.add(ce.key)}for(const X of C){V.push(X.batchId);for(const ce of X.mutations)G=G.add(ce.key)}return u.localDocuments.getDocuments(f,G).next(X=>({us:X,removedBatchIds:T,addedBatchIds:V}))})})})).apply(this,arguments)}function Ks(p){const o=Fe(p);return o.persistence.runTransaction("Get last remote snapshot version","readonly",u=>o.Qr.getLastRemoteSnapshotVersion(u))}function Ca(p,o){const u=Fe(p);return u.persistence.runTransaction("Get next mutation batch","readonly",f=>(void 0===o&&(o=-1),u.mutationQueue.getNextMutationBatchAfterBatchId(f,o)))}function Il(p,o,u){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,Ee.A)(function*(p,o,u){const f=Fe(p),_=f.ns.get(o),C=u?"readwrite":"readwrite-primary";try{u||(yield f.persistence.runTransaction("Release target",C,T=>f.persistence.referenceDelegate.removeTarget(T,_)))}catch(T){if(!De(T))throw T;Se("LocalStore",`Failed to update sequence numbers for target ${o}: ${T}`)}f.ns=f.ns.remove(o),f.rs.delete(_.target)})).apply(this,arguments)}function Zu(p,o,u){const f=Fe(p);let _=cn.min(),C=Zn();return f.persistence.runTransaction("Execute query","readwrite",T=>function(G,X,ce){const we=Fe(G),Le=we.rs.get(ce);return void 0!==Le?fe.resolve(we.ns.get(Le)):we.Qr.getTargetData(X,ce)}(f,T,Do(o)).next(V=>{if(V)return _=V.lastLimboFreeSnapshotVersion,f.Qr.getMatchingKeysForTargetId(T,V.targetId).next(G=>{C=G})}).next(()=>f.ts.getDocumentsMatchingQuery(T,o,u?_:cn.min(),u?C:Zn())).next(V=>(function Al(p,o,u){let f=p.ss.get(o)||cn.min();u.forEach((_,C)=>{C.readTime.compareTo(f)>0&&(f=C.readTime)}),p.ss.set(o,f)}(f,function $n(p){return p.collectionGroup||(p.path.length%2==1?p.path.lastSegment():p.path.get(p.path.length-2))}(o),V),{documents:V,hs:C})))}class Ph{constructor(){this.activeTargetIds=function ui(){return Sd}()}As(o){this.activeTargetIds=this.activeTargetIds.add(o)}Rs(o){this.activeTargetIds=this.activeTargetIds.delete(o)}ds(){const o={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(o)}}class O{constructor(){this.no=new Ph,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(o){}updateMutationState(o,u,f){}addLocalQueryTarget(o){return this.no.As(o),this.ro[o]||"not-current"}updateQueryState(o,u,f){this.ro[o]=u}removeLocalQueryTarget(o){this.no.Rs(o)}isLocalQueryTarget(o){return this.no.activeTargetIds.has(o)}clearQueryState(o){delete this.ro[o]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(o){return this.no.activeTargetIds.has(o)}start(){return this.no=new Ph,Promise.resolve()}handleUserChange(o,u,f){}setOnlineState(o){}shutdown(){}writeSequenceNumber(o){}notifyBundleLoaded(o){}}class E{io(o){}shutdown(){}}class A{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(o){this.uo.push(o)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const o of this.uo)o(0)}ao(){Se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const o of this.uo)o(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let k=null;function te(){return null===k?k=268435456+Math.round(2147483648*Math.random()):k++,"0x"+k.toString(16)}const ue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $e{constructor(o){this.lo=o.lo,this.ho=o.ho}Po(o){this.Io=o}To(o){this.Eo=o}Ao(o){this.Ro=o}onMessage(o){this.Vo=o}close(){this.ho()}send(o){this.lo(o)}mo(){this.Io()}fo(){this.Eo()}po(o){this.Ro(o)}yo(o){this.Vo(o)}}const ot="WebChannelConnection";class jt extends class{constructor(u){this.databaseInfo=u,this.databaseId=u.databaseId;const f=u.ssl?"https":"http",_=encodeURIComponent(this.databaseId.projectId),C=encodeURIComponent(this.databaseId.database);this.wo=f+"://"+u.host,this.So=`projects/${_}/databases/${C}`,this.bo="(default)"===this.databaseId.database?`project_id=${_}`:`project_id=${_}&database_id=${C}`}get Do(){return!1}Co(u,f,_,C,T){const V=te(),G=this.vo(u,f.toUriEncodedString());Se("RestConnection",`Sending RPC '${u}' ${V}:`,G,_);const X={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(X,C,T),this.Mo(u,G,X,_).then(ce=>(Se("RestConnection",`Received RPC '${u}' ${V}: `,ce),ce),ce=>{throw gn("RestConnection",`RPC '${u}' ${V} failed with error: `,ce,"url: ",G,"request:",_),ce})}xo(u,f,_,C,T,V){return this.Co(u,f,_,C,T)}Fo(u,f,_){u["X-Goog-Api-Client"]="gl-js/ fire/"+bn,u["Content-Type"]="text/plain",this.databaseInfo.appId&&(u["X-Firebase-GMPID"]=this.databaseInfo.appId),f&&f.headers.forEach((C,T)=>u[T]=C),_&&_.headers.forEach((C,T)=>u[T]=C)}vo(u,f){return`${this.wo}/v1/${f}:${ue[u]}`}terminate(){}}{constructor(o){super(o),this.forceLongPolling=o.forceLongPolling,this.autoDetectLongPolling=o.autoDetectLongPolling,this.useFetchStreams=o.useFetchStreams,this.longPollingOptions=o.longPollingOptions}Mo(o,u,f,_){const C=te();return new Promise((T,V)=>{const G=new Bt;G.setWithCredentials(!0),G.listenOnce(Jn.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Dt.NO_ERROR:const ce=G.getResponseJson();Se(ot,`XHR for RPC '${o}' ${C} received:`,JSON.stringify(ce)),T(ce);break;case Dt.TIMEOUT:Se(ot,`RPC '${o}' ${C} timed out`),V(new _e(he.DEADLINE_EXCEEDED,"Request time out"));break;case Dt.HTTP_ERROR:const we=G.getStatus();if(Se(ot,`RPC '${o}' ${C} failed with status:`,we,"response text:",G.getResponseText()),we>0){let Le=G.getResponseJson();Array.isArray(Le)&&(Le=Le[0]);const ht=Le?.error;if(ht&&ht.status&&ht.message){const Ut=function(Gt){const Mn=Gt.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(Mn)>=0?Mn:he.UNKNOWN}(ht.status);V(new _e(Ut,ht.message))}else V(new _e(he.UNKNOWN,"Server responded with status "+G.getStatus()))}else V(new _e(he.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{Se(ot,`RPC '${o}' ${C} completed.`)}});const X=JSON.stringify(_);Se(ot,`RPC '${o}' ${C} sending request:`,_),G.send(u,"POST",X,f,15)})}Oo(o,u,f){const _=te(),C=[this.wo,"/","google.firestore.v1.Firestore","/",o,"/channel"],T=At(),V=Lt(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},X=this.longPollingOptions.timeoutSeconds;void 0!==X&&(G.longPollingTimeout=Math.round(1e3*X)),this.useFetchStreams&&(G.xmlHttpFactory=new Kt({})),this.Fo(G.initMessageHeaders,u,f),G.encodeInitMessageHeaders=!0;const ce=C.join("");Se(ot,`Creating RPC '${o}' stream ${_}: ${ce}`,G);const we=T.createWebChannel(ce,G);let Le=!1,ht=!1;const Ut=new $e({lo:Gt=>{ht?Se(ot,`Not sending because RPC '${o}' stream ${_} is closed:`,Gt):(Le||(Se(ot,`Opening RPC '${o}' stream ${_} transport.`),we.open(),Le=!0),Se(ot,`RPC '${o}' stream ${_} sending:`,Gt),we.send(Gt))},ho:()=>we.close()}),Jt=(Gt,Mn,Wn)=>{Gt.listen(Mn,Fn=>{try{Wn(Fn)}catch(yr){setTimeout(()=>{throw yr},0)}})};return Jt(we,An.EventType.OPEN,()=>{ht||(Se(ot,`RPC '${o}' stream ${_} transport opened.`),Ut.mo())}),Jt(we,An.EventType.CLOSE,()=>{ht||(ht=!0,Se(ot,`RPC '${o}' stream ${_} transport closed`),Ut.po())}),Jt(we,An.EventType.ERROR,Gt=>{ht||(ht=!0,gn(ot,`RPC '${o}' stream ${_} transport errored:`,Gt),Ut.po(new _e(he.UNAVAILABLE,"The operation could not be completed")))}),Jt(we,An.EventType.MESSAGE,Gt=>{var Mn;if(!ht){const Wn=Gt.data[0];je(!!Wn);const yr=Wn.error||(null===(Mn=Wn[0])||void 0===Mn?void 0:Mn.error);if(yr){Se(ot,`RPC '${o}' stream ${_} received error:`,yr);const hi=yr.status;let Fr=function(ze){const nt=dr[ze];if(void 0!==nt)return ts(nt)}(hi),et=yr.message;void 0===Fr&&(Fr=he.INTERNAL,et="Unknown error status: "+hi+" with message "+yr.message),ht=!0,Ut.po(new _e(Fr,et)),we.close()}else Se(ot,`RPC '${o}' stream ${_} received:`,Wn),Ut.yo(Wn)}}),Jt(V,_t.STAT_EVENT,Gt=>{Gt.stat===It.PROXY?Se(ot,`RPC '${o}' stream ${_} detected buffering proxy`):Gt.stat===It.NOPROXY&&Se(ot,`RPC '${o}' stream ${_} detected no buffering proxy`)}),setTimeout(()=>{Ut.fo()},0),Ut}}function In(){return typeof document<"u"?document:null}function vr(p){return new sn(p,!0)}class ys{constructor(o,u,f=1e3,_=1.5,C=6e4){this.oi=o,this.timerId=u,this.No=f,this.Lo=_,this.Bo=C,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(o){this.cancel();const u=Math.floor(this.ko+this.Uo()),f=Math.max(0,Date.now()-this.Qo),_=Math.max(0,u-f);_>0&&Se("ExponentialBackoff",`Backing off for ${_} ms (base delay: ${this.ko} ms, delay with jitter: ${u} ms, last attempt: ${f} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,_,()=>(this.Qo=Date.now(),o())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Zc{constructor(o,u,f,_,C,T,V,G){this.oi=o,this.Go=f,this.zo=_,this.connection=C,this.authCredentialsProvider=T,this.appCheckCredentialsProvider=V,this.listener=G,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ys(o,u)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var o=this;return(0,Ee.A)(function*(){o.Zo()&&(yield o.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(o){this.s_(),this.stream.send(o)}r_(){var o=this;return(0,Ee.A)(function*(){if(o.Xo())return o.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(o,u){var f=this;return(0,Ee.A)(function*(){f.s_(),f.o_(),f.Yo.cancel(),f.jo++,4!==o?f.Yo.reset():u&&u.code===he.RESOURCE_EXHAUSTED?(bt(u.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),f.Yo.Ko()):u&&u.code===he.UNAUTHENTICATED&&3!==f.state&&(f.authCredentialsProvider.invalidateToken(),f.appCheckCredentialsProvider.invalidateToken()),null!==f.stream&&(f.__(),f.stream.close(),f.stream=null),f.state=o,yield f.listener.Ao(u)})()}__(){}auth(){this.state=1;const o=this.a_(this.jo),u=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([f,_])=>{this.jo===u&&this.u_(f,_)},f=>{o(()=>{const _=new _e(he.UNKNOWN,"Fetching auth token failed: "+f.message);return this.c_(_)})})}u_(o,u){const f=this.a_(this.jo);this.stream=this.l_(o,u),this.stream.Po(()=>{f(()=>this.listener.Po())}),this.stream.To(()=>{f(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(_=>{f(()=>this.c_(_))}),this.stream.onMessage(_=>{f(()=>this.onMessage(_))})}e_(){var o=this;this.state=5,this.Yo.$o((0,Ee.A)(function*(){o.state=0,o.start()}))}c_(o){return Se("PersistentStream",`close with error: ${o}`),this.stream=null,this.close(4,o)}a_(o){return u=>{this.oi.enqueueAndForget(()=>this.jo===o?u():(Se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Tl extends Zc{constructor(o,u,f,_,C,T){super(o,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",u,f,_,T),this.serializer=C}l_(o,u){return this.connection.Oo("Listen",o,u)}onMessage(o){this.Yo.reset();const u=function Pd(p,o){let u;if("targetChange"in o){const f="NO_CHANGE"===(X=o.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===X?1:"REMOVE"===X?2:"CURRENT"===X?3:"RESET"===X?4:Pe(),_=o.targetChange.targetIds||[],C=function(X,ce){return X.useProto3Json?(je(void 0===ce||"string"==typeof ce),Vi.fromBase64String(ce||"")):(je(void 0===ce||ce instanceof Buffer||ce instanceof Uint8Array),Vi.fromUint8Array(ce||new Uint8Array))}(p,o.targetChange.resumeToken),T=o.targetChange.cause,V=T&&function(X){const ce=void 0===X.code?he.UNKNOWN:ts(X.code);return new _e(ce,X.message||"")}(T);u=new Md(f,_,C,V||null)}else if("documentChange"in o){const f=o.documentChange,_=Os(p,f.document.name),C=Bi(f.document.updateTime),T=f.document.createTime?Bi(f.document.createTime):cn.min(),V=new ho({mapValue:{fields:f.document.fields}}),G=Qr.newFoundDocument(_,C,T,V);u=new dl(f.targetIds||[],f.removedTargetIds||[],G.key,G)}else if("documentDelete"in o){const f=o.documentDelete,_=Os(p,f.document),C=f.readTime?Bi(f.readTime):cn.min(),T=Qr.newNoDocument(_,C);u=new dl([],f.removedTargetIds||[],T.key,T)}else if("documentRemove"in o){const f=o.documentRemove,_=Os(p,f.document);u=new dl([],f.removedTargetIds||[],_,null)}else{if(!("filter"in o))return Pe();{const f=o.filter,{count:_=0,unchangedNames:C}=f,T=new wr(_,C);u=new Rd(f.targetId,T)}}var X;return u}(this.serializer,o),f=function(C){if(!("targetChange"in C))return cn.min();const T=C.targetChange;return T.targetIds&&T.targetIds.length?cn.min():T.readTime?Bi(T.readTime):cn.min()}(o);return this.listener.h_(u,f)}P_(o){const u={};u.database=$u(this.serializer),u.addTarget=function(C,T){let V;const G=T.target;if(V=Uc(G)?{documents:La(C,G)}:{query:Zi(C,G)._t},V.targetId=T.targetId,T.resumeToken.approximateByteSize()>0){V.resumeToken=Hu(C,T.resumeToken);const X=Cc(C,T.expectedCount);null!==X&&(V.expectedCount=X)}else if(T.snapshotVersion.compareTo(cn.min())>0){V.readTime=Yi(C,T.snapshotVersion.toTimestamp());const X=Cc(C,T.expectedCount);null!==X&&(V.expectedCount=X)}return V}(this.serializer,o);const f=function Ul(p,o){const u=function(_){switch(_){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(o.purpose);return null==u?null:{"goog-listen-tags":u}}(0,o);f&&(u.labels=f),this.i_(u)}I_(o){const u={};u.database=$u(this.serializer),u.removeTarget=o,this.i_(u)}}class Nh extends Zc{constructor(o,u,f,_,C,T){super(o,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",u,f,_,T),this.serializer=C,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(o,u){return this.connection.Oo("Write",o,u)}onMessage(o){if(je(!!o.streamToken),this.lastStreamToken=o.streamToken,this.T_){this.Yo.reset();const u=function Fa(p,o){return p&&p.length>0?(je(void 0!==o),p.map(u=>function(_,C){let T=Bi(_.updateTime?_.updateTime:C);return T.isEqual(cn.min())&&(T=Bi(C)),new Na(T,_.transformResults||[])}(u,o))):[]}(o.writeResults,o.commitTime),f=Bi(o.commitTime);return this.listener.A_(f,u)}return je(!o.writeResults||0===o.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const o={};o.database=$u(this.serializer),this.i_(o)}d_(o){const u={streamToken:this.lastStreamToken,writes:o.map(f=>function ka(p,o){let u;if(o instanceof F)u={update:Pr(p,o.key,o.value)};else if(o instanceof ut)u={delete:Wo(p,o.key)};else if(o instanceof re)u={update:Pr(p,o.key,o.data),updateMask:Va(o.fieldMask)};else{if(!(o instanceof gt))return Pe();u={verify:Wo(p,o.key)}}return o.fieldTransforms.length>0&&(u.updateTransforms=o.fieldTransforms.map(f=>function(C,T){const V=T.transform;if(V instanceof mu)return{fieldPath:T.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(V instanceof ia)return{fieldPath:T.field.canonicalString(),appendMissingElements:{values:V.elements}};if(V instanceof _u)return{fieldPath:T.field.canonicalString(),removeAllFromArray:{values:V.elements}};if(V instanceof Jr)return{fieldPath:T.field.canonicalString(),increment:V.Pe};throw Pe()}(0,f))),o.precondition.isNone||(u.currentDocument=void 0!==(C=o.precondition).updateTime?{updateTime:wc(p,C.updateTime)}:void 0!==C.exists?{exists:C.exists}:Pe()),u;var C}(this.serializer,f))};this.i_(u)}}class Ha extends class{}{constructor(o,u,f,_){super(),this.authCredentials=o,this.appCheckCredentials=u,this.connection=f,this.serializer=_,this.m_=!1}f_(){if(this.m_)throw new _e(he.FAILED_PRECONDITION,"The client has already been terminated.")}Co(o,u,f,_){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([C,T])=>this.connection.Co(o,vu(u,f),_,C,T)).catch(C=>{throw"FirebaseError"===C.name?(C.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),C):new _e(he.UNKNOWN,C.toString())})}xo(o,u,f,_,C){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([T,V])=>this.connection.xo(o,vu(u,f),_,T,V,C)).catch(T=>{throw"FirebaseError"===T.name?(T.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),T):new _e(he.UNKNOWN,T.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Yl{constructor(o,u){this.asyncQueue=o,this.onlineStateHandler=u,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(o){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${o.toString()}`),this.S_("Offline")))}set(o){this.C_(),this.g_=0,"Online"===o&&(this.y_=!1),this.S_(o)}S_(o){o!==this.state&&(this.state=o,this.onlineStateHandler(o))}b_(o){const u=`Could not reach Cloud Firestore backend. ${o}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(bt(u),this.y_=!1):Se("OnlineStateTracker",u)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Nf{constructor(o,u,f,_,C){var T=this;this.localStore=o,this.datastore=u,this.asyncQueue=f,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=C,this.O_.io(V=>{f.enqueueAndForget((0,Ee.A)(function*(){var G;Sl(T)&&(Se("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,Ee.A)(function*(ce){const we=Fe(ce);we.M_.add(4),yield ic(we),we.N_.set("Unknown"),we.M_.delete(4),yield Nr(we)}),function X(ce){return G.apply(this,arguments)})(T))}))}),this.N_=new Yl(f,_)}}function Nr(p){return xl.apply(this,arguments)}function xl(){return(xl=(0,Ee.A)(function*(p){if(Sl(p))for(const o of p.x_)yield o(!0)})).apply(this,arguments)}function ic(p){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,Ee.A)(function*(p){for(const o of p.x_)yield o(!1)})).apply(this,arguments)}function Zl(p,o){const u=Fe(p);u.F_.has(o.targetId)||(u.F_.set(o.targetId,o),kf(u)?ii(u):td(u).Xo()&&oc(u,o))}function Jc(p,o){const u=Fe(p),f=td(u);u.F_.delete(o),f.Xo()&&gr(u,o),0===u.F_.size&&(f.Xo()?f.n_():Sl(u)&&u.N_.set("Unknown"))}function oc(p,o){if(p.L_.xe(o.targetId),o.resumeToken.approximateByteSize()>0||o.snapshotVersion.compareTo(cn.min())>0){const u=p.remoteSyncer.getRemoteKeysForTarget(o.targetId).size;o=o.withExpectedCount(u)}td(p).P_(o)}function gr(p,o){p.L_.xe(o),td(p).I_(o)}function ii(p){p.L_=new li({getRemoteKeysForTarget:o=>p.remoteSyncer.getRemoteKeysForTarget(o),ot:o=>p.F_.get(o)||null,tt:()=>p.datastore.serializer.databaseId}),td(p).start(),p.N_.w_()}function kf(p){return Sl(p)&&!td(p).Zo()&&p.F_.size>0}function Sl(p){return 0===Fe(p).M_.size}function sc(p){p.L_=void 0}function Tm(p){return kh.apply(this,arguments)}function kh(){return(kh=(0,Ee.A)(function*(p){p.N_.set("Online")})).apply(this,arguments)}function xm(p){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,Ee.A)(function*(p){p.F_.forEach((o,u)=>{oc(p,o)})})).apply(this,arguments)}function Wp(p,o){return ed.apply(this,arguments)}function ed(){return(ed=(0,Ee.A)(function*(p,o){sc(p),kf(p)?(p.N_.D_(o),ii(p)):p.N_.set("Unknown")})).apply(this,arguments)}function Ko(p,o,u){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,Ee.A)(function*(p,o,u){if(p.N_.set("Online"),o instanceof Md&&2===o.state&&o.cause)try{yield(f=(0,Ee.A)(function*(C,T){const V=T.cause;for(const G of T.targetIds)C.F_.has(G)&&(yield C.remoteSyncer.rejectListen(G,V),C.F_.delete(G),C.L_.removeTarget(G))}),function _(C,T){return f.apply(this,arguments)})(p,o)}catch(f){Se("RemoteStore","Failed to remove targets %s: %s ",o.targetIds.join(","),f),yield Tu(p,f)}else if(o instanceof dl?p.L_.Ke(o):o instanceof Rd?p.L_.He(o):p.L_.We(o),!u.isEqual(cn.min()))try{const f=yield Ks(p.localStore);u.compareTo(f)>=0&&(yield function(C,T){const V=C.L_.rt(T);return V.targetChanges.forEach((G,X)=>{if(G.resumeToken.approximateByteSize()>0){const ce=C.F_.get(X);ce&&C.F_.set(X,ce.withResumeToken(G.resumeToken,T))}}),V.targetMismatches.forEach((G,X)=>{const ce=C.F_.get(G);if(!ce)return;C.F_.set(G,ce.withResumeToken(Vi.EMPTY_BYTE_STRING,ce.snapshotVersion)),gr(C,G);const we=new Ba(ce.target,G,X,ce.sequenceNumber);oc(C,we)}),C.remoteSyncer.applyRemoteEvent(V)}(p,u))}catch(f){Se("RemoteStore","Failed to raise snapshot:",f),yield Tu(p,f)}var f}),Ff.apply(this,arguments)}function Tu(p,o,u){return or.apply(this,arguments)}function or(){return(or=(0,Ee.A)(function*(p,o,u){if(!De(o))throw o;p.M_.add(1),yield ic(p),p.N_.set("Offline"),u||(u=()=>Ks(p.localStore)),p.asyncQueue.enqueueRetryable((0,Ee.A)(function*(){Se("RemoteStore","Retrying IndexedDB access"),yield u(),p.M_.delete(1),yield Nr(p)}))})).apply(this,arguments)}function Lf(p,o){return o().catch(u=>Tu(p,u,o))}function Dl(p){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,Ee.A)(function*(p){const o=Fe(p),u=Sc(o);let f=o.v_.length>0?o.v_[o.v_.length-1].batchId:-1;for(;t1(o);)try{const _=yield Ca(o.localStore,f);if(null===_){0===o.v_.length&&u.n_();break}f=_.batchId,y0(o,_)}catch(_){yield Tu(o,_)}Vf(o)&&Sm(o)})).apply(this,arguments)}function t1(p){return Sl(p)&&p.v_.length<10}function y0(p,o){p.v_.push(o);const u=Sc(p);u.Xo()&&u.E_&&u.d_(o.mutations)}function Vf(p){return Sl(p)&&!Sc(p).Zo()&&p.v_.length>0}function Sm(p){Sc(p).start()}function E0(p){return ac.apply(this,arguments)}function ac(){return(ac=(0,Ee.A)(function*(p){Sc(p).V_()})).apply(this,arguments)}function C0(p){return eu.apply(this,arguments)}function eu(){return(eu=(0,Ee.A)(function*(p){const o=Sc(p);for(const u of p.v_)o.d_(u.mutations)})).apply(this,arguments)}function w0(p,o,u){return qp.apply(this,arguments)}function qp(){return(qp=(0,Ee.A)(function*(p,o,u){const f=p.v_.shift(),_=dn.from(f,o,u);yield Lf(p,()=>p.remoteSyncer.applySuccessfulWrite(_)),yield Dl(p)})).apply(this,arguments)}function Dm(p,o){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,Ee.A)(function*(p,o){var u;o&&Sc(p).E_&&(yield(u=(0,Ee.A)(function*(_,C){if(function Qi(p){switch(p){default:return Pe();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}(V=C.code)&&V!==he.ABORTED){const T=_.v_.shift();Sc(_).t_(),yield Lf(_,()=>_.remoteSyncer.rejectFailedWrite(T.batchId,C)),yield Dl(_)}var V}),function f(_,C){return u.apply(this,arguments)})(p,o)),Vf(p)&&Sm(p)}),Rt.apply(this,arguments)}function Vr(p,o){return ft.apply(this,arguments)}function ft(){return(ft=(0,Ee.A)(function*(p,o){const u=Fe(p);u.asyncQueue.verifyOperationInProgress(),Se("RemoteStore","RemoteStore received new credentials");const f=Sl(u);u.M_.add(3),yield ic(u),f&&u.N_.set("Unknown"),yield u.remoteSyncer.handleCredentialChange(o),u.M_.delete(3),yield Nr(u)})).apply(this,arguments)}function Lh(p,o){return me.apply(this,arguments)}function me(){return(me=(0,Ee.A)(function*(p,o){const u=Fe(p);o?(u.M_.delete(2),yield Nr(u)):o||(u.M_.add(2),yield ic(u),u.N_.set("Unknown"))})).apply(this,arguments)}function td(p){return p.B_||(p.B_=function(u,f,_){const C=Fe(u);return C.f_(),new Tl(f,C.connection,C.authCredentials,C.appCheckCredentials,C.serializer,_)}(p.datastore,p.asyncQueue,{Po:Tm.bind(null,p),To:xm.bind(null,p),Ao:Wp.bind(null,p),h_:Ko.bind(null,p)}),p.x_.push(function(){var o=(0,Ee.A)(function*(u){u?(p.B_.t_(),kf(p)?ii(p):p.N_.set("Unknown")):(yield p.B_.stop(),sc(p))});return function(u){return o.apply(this,arguments)}}())),p.B_}function Sc(p){return p.k_||(p.k_=function(u,f,_){const C=Fe(u);return C.f_(),new Nh(f,C.connection,C.authCredentials,C.appCheckCredentials,C.serializer,_)}(p.datastore,p.asyncQueue,{Po:()=>Promise.resolve(),To:E0.bind(null,p),Ao:Dm.bind(null,p),R_:C0.bind(null,p),A_:w0.bind(null,p)}),p.x_.push(function(){var o=(0,Ee.A)(function*(u){u?(p.k_.t_(),yield Dl(p)):(yield p.k_.stop(),p.v_.length>0&&(Se("RemoteStore",`Stopping write stream with ${p.v_.length} pending writes`),p.v_=[]))});return function(u){return o.apply(this,arguments)}}())),p.k_}class Fs{constructor(o,u,f,_,C){this.asyncQueue=o,this.timerId=u,this.targetTimeMs=f,this.op=_,this.removalCallback=C,this.deferred=new mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(T=>{})}get promise(){return this.deferred.promise}static createAndSchedule(o,u,f,_,C){const T=Date.now()+f,V=new Fs(o,u,T,_,C);return V.start(f),V}start(o){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),o)}skipDelay(){return this.handleDelayElapsed()}cancel(o){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _e(he.CANCELLED,"Operation cancelled"+(o?": "+o:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(o=>this.deferred.resolve(o))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _o(p,o){if(bt("AsyncQueue",`${o}: ${p}`),De(p))return new _e(he.UNAVAILABLE,`${o}: ${p}`);throw p}class Rl{constructor(o){this.comparator=o?(u,f)=>o(u,f)||Wt.comparator(u.key,f.key):(u,f)=>Wt.comparator(u.key,f.key),this.keyedMap=Ms(),this.sortedSet=new Ar(this.comparator)}static emptySet(o){return new Rl(o.comparator)}has(o){return null!=this.keyedMap.get(o)}get(o){return this.keyedMap.get(o)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(o){const u=this.keyedMap.get(o);return u?this.sortedSet.indexOf(u):-1}get size(){return this.sortedSet.size}forEach(o){this.sortedSet.inorderTraversal((u,f)=>(o(u),!1))}add(o){const u=this.delete(o.key);return u.copy(u.keyedMap.insert(o.key,o),u.sortedSet.insert(o,null))}delete(o){const u=this.get(o);return u?this.copy(this.keyedMap.remove(o),this.sortedSet.remove(u)):this}isEqual(o){if(!(o instanceof Rl)||this.size!==o.size)return!1;const u=this.sortedSet.getIterator(),f=o.sortedSet.getIterator();for(;u.hasNext();){const _=u.getNext().key,C=f.getNext().key;if(!_.isEqual(C))return!1}return!0}toString(){const o=[];return this.forEach(u=>{o.push(u.toString())}),0===o.length?"DocumentSet ()":"DocumentSet (\n  "+o.join("  \n")+"\n)"}copy(o,u){const f=new Rl;return f.comparator=this.comparator,f.keyedMap=o,f.sortedSet=u,f}}class Kp{constructor(){this.q_=new Ar(Wt.comparator)}track(o){const u=o.doc.key,f=this.q_.get(u);f?0!==o.type&&3===f.type?this.q_=this.q_.insert(u,o):3===o.type&&1!==f.type?this.q_=this.q_.insert(u,{type:f.type,doc:o.doc}):2===o.type&&2===f.type?this.q_=this.q_.insert(u,{type:2,doc:o.doc}):2===o.type&&0===f.type?this.q_=this.q_.insert(u,{type:0,doc:o.doc}):1===o.type&&0===f.type?this.q_=this.q_.remove(u):1===o.type&&2===f.type?this.q_=this.q_.insert(u,{type:1,doc:f.doc}):0===o.type&&1===f.type?this.q_=this.q_.insert(u,{type:2,doc:o.doc}):Pe():this.q_=this.q_.insert(u,o)}Q_(){const o=[];return this.q_.inorderTraversal((u,f)=>{o.push(f)}),o}}class Bf{constructor(o,u,f,_,C,T,V,G,X){this.query=o,this.docs=u,this.oldDocs=f,this.docChanges=_,this.mutatedKeys=C,this.fromCache=T,this.syncStateChanged=V,this.excludesMetadataChanges=G,this.hasCachedResults=X}static fromInitialDocuments(o,u,f,_,C){const T=[];return u.forEach(V=>{T.push({type:0,doc:V})}),new Bf(o,u,Rl.emptySet(u),T,f,_,!0,!1,C)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(o){if(!(this.fromCache===o.fromCache&&this.hasCachedResults===o.hasCachedResults&&this.syncStateChanged===o.syncStateChanged&&this.mutatedKeys.isEqual(o.mutatedKeys)&&H(this.query,o.query)&&this.docs.isEqual(o.docs)&&this.oldDocs.isEqual(o.oldDocs)))return!1;const u=this.docChanges,f=o.docChanges;if(u.length!==f.length)return!1;for(let _=0;_<u.length;_++)if(u[_].type!==f[_].type||!u[_].doc.isEqual(f[_].doc))return!1;return!0}}class n1{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(o=>o.G_())}}class Xp{constructor(){this.queries=new Ro(o=>se(o),H),this.onlineState="Unknown",this.z_=new Set}}function Vh(p,o){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,Ee.A)(function*(p,o){const u=Fe(p);let f=3;const _=o.query;let C=u.queries.get(_);C?!C.W_()&&o.G_()&&(f=2):(C=new n1,f=o.G_()?0:1);try{switch(f){case 0:C.K_=yield u.onListen(_,!0);break;case 1:C.K_=yield u.onListen(_,!1);break;case 2:yield u.onFirstRemoteStoreListen(_)}}catch(T){const V=_o(T,`Initialization of query '${Te(o.query)}' failed`);return void o.onError(V)}u.queries.set(_,C),C.U_.push(o),o.j_(u.onlineState),C.K_&&o.H_(C.K_)&&ru(u)})).apply(this,arguments)}function Gi(p,o){return tu.apply(this,arguments)}function tu(){return(tu=(0,Ee.A)(function*(p,o){const u=Fe(p),f=o.query;let _=3;const C=u.queries.get(f);if(C){const T=C.U_.indexOf(o);T>=0&&(C.U_.splice(T,1),0===C.U_.length?_=o.G_()?0:1:!C.W_()&&o.G_()&&(_=2))}switch(_){case 0:return u.queries.delete(f),u.onUnlisten(f,!0);case 1:return u.queries.delete(f),u.onUnlisten(f,!1);case 2:return u.onLastRemoteStoreUnlisten(f);default:return}})).apply(this,arguments)}function eo(p,o){const u=Fe(p);let f=!1;for(const _ of o){const T=u.queries.get(_.query);if(T){for(const V of T.U_)V.H_(_)&&(f=!0);T.K_=_}}f&&ru(u)}function nu(p,o,u){const f=Fe(p),_=f.queries.get(o);if(_)for(const C of _.U_)C.onError(u);f.queries.delete(o)}function ru(p){p.z_.forEach(o=>{o.next()})}var Qp,Uh;(Uh=Qp||(Qp={})).J_="default",Uh.Cache="cache";class jh{constructor(o,u,f){this.query=o,this.Y_=u,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=f||{}}H_(o){if(!this.options.includeMetadataChanges){const f=[];for(const _ of o.docChanges)3!==_.type&&f.push(_);o=new Bf(o.query,o.docs,o.oldDocs,f,o.mutatedKeys,o.fromCache,o.syncStateChanged,!0,o.hasCachedResults)}let u=!1;return this.Z_?this.ea(o)&&(this.Y_.next(o),u=!0):this.ta(o,this.onlineState)&&(this.na(o),u=!0),this.X_=o,u}onError(o){this.Y_.error(o)}j_(o){this.onlineState=o;let u=!1;return this.X_&&!this.Z_&&this.ta(this.X_,o)&&(this.na(this.X_),u=!0),u}ta(o,u){return!o.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==u))&&(!o.docs.isEmpty()||o.hasCachedResults||"Offline"===u)}ea(o){return o.docChanges.length>0||!!(o.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==o.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(o){o=Bf.fromInitialDocuments(o.query,o.docs,o.mutatedKeys,o.fromCache,o.hasCachedResults),this.Z_=!0,this.Y_.next(o)}G_(){return this.options.source!==Qp.Cache}}class Uf{constructor(o){this.key=o}}class Rm{constructor(o){this.key=o}}class Zp{constructor(o,u){this.query=o,this.la=u,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Zn(),this.mutatedKeys=Zn(),this.Ia=$o(o),this.Ta=new Rl(this.Ia)}get Ea(){return this.la}da(o,u){const f=u?u.Aa:new Kp,_=u?u.Ta:this.Ta;let C=u?u.mutatedKeys:this.mutatedKeys,T=_,V=!1;const G="F"===this.query.limitType&&_.size===this.query.limit?_.last():null,X="L"===this.query.limitType&&_.size===this.query.limit?_.first():null;if(o.inorderTraversal((ce,we)=>{const Le=_.get(ce),ht=Ot(this.query,we)?we:null,Ut=!!Le&&this.mutatedKeys.has(Le.key),Jt=!!ht&&(ht.hasLocalMutations||this.mutatedKeys.has(ht.key)&&ht.hasCommittedMutations);let Gt=!1;Le&&ht?Le.data.isEqual(ht.data)?Ut!==Jt&&(f.track({type:3,doc:ht}),Gt=!0):this.Ra(Le,ht)||(f.track({type:2,doc:ht}),Gt=!0,(G&&this.Ia(ht,G)>0||X&&this.Ia(ht,X)<0)&&(V=!0)):!Le&&ht?(f.track({type:0,doc:ht}),Gt=!0):Le&&!ht&&(f.track({type:1,doc:Le}),Gt=!0,(G||X)&&(V=!0)),Gt&&(ht?(T=T.add(ht),C=Jt?C.add(ce):C.delete(ce)):(T=T.delete(ce),C=C.delete(ce)))}),null!==this.query.limit)for(;T.size>this.query.limit;){const ce="F"===this.query.limitType?T.last():T.first();T=T.delete(ce.key),C=C.delete(ce.key),f.track({type:1,doc:ce})}return{Ta:T,Aa:f,Xi:V,mutatedKeys:C}}Ra(o,u){return o.hasLocalMutations&&u.hasCommittedMutations&&!u.hasLocalMutations}applyChanges(o,u,f,_){const C=this.Ta;this.Ta=o.Ta,this.mutatedKeys=o.mutatedKeys;const T=o.Aa.Q_();T.sort((ce,we)=>function(ht,Ut){const Jt=Gt=>{switch(Gt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return Jt(ht)-Jt(Ut)}(ce.type,we.type)||this.Ia(ce.doc,we.doc)),this.Va(f),_=null!=_&&_;const V=u&&!_?this.ma():[],G=0===this.Pa.size&&this.current&&!_?1:0,X=G!==this.ha;return this.ha=G,0!==T.length||X?{snapshot:new Bf(this.query,o.Ta,C,T,o.mutatedKeys,0===G,X,!1,!!f&&f.resumeToken.approximateByteSize()>0),fa:V}:{fa:V}}j_(o){return this.current&&"Offline"===o?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Kp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(o){return!this.la.has(o)&&!!this.Ta.has(o)&&!this.Ta.get(o).hasLocalMutations}Va(o){o&&(o.addedDocuments.forEach(u=>this.la=this.la.add(u)),o.modifiedDocuments.forEach(u=>{}),o.removedDocuments.forEach(u=>this.la=this.la.delete(u)),this.current=o.current)}ma(){if(!this.current)return[];const o=this.Pa;this.Pa=Zn(),this.Ta.forEach(f=>{this.ga(f.key)&&(this.Pa=this.Pa.add(f.key))});const u=[];return o.forEach(f=>{this.Pa.has(f)||u.push(new Rm(f))}),this.Pa.forEach(f=>{o.has(f)||u.push(new Uf(f))}),u}pa(o){this.la=o.hs,this.Pa=Zn();const u=this.da(o.documents);return this.applyChanges(u,!0)}ya(){return Bf.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Jp{constructor(o,u,f){this.query=o,this.targetId=u,this.view=f}}class Mm{constructor(o){this.key=o,this.wa=!1}}class Om{constructor(o,u,f,_,C,T){this.localStore=o,this.remoteStore=u,this.eventManager=f,this.sharedClientState=_,this.currentUser=C,this.maxConcurrentLimboResolutions=T,this.Sa={},this.ba=new Ro(V=>se(V),H),this.Da=new Map,this.Ca=new Set,this.va=new Ar(Wt.comparator),this.Fa=new Map,this.Ma=new Pi,this.xa={},this.Oa=new Map,this.Na=tc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Pm(p,o){return $h.apply(this,arguments)}function $h(){return($h=(0,Ee.A)(function*(p,o,u=!0){const f=qf(p);let _;const C=f.ba.get(o);return C?(f.sharedClientState.addLocalQueryTarget(C.targetId),_=C.view.ya()):_=yield Xs(f,o,u,!0),_})).apply(this,arguments)}function eg(p,o){return nd.apply(this,arguments)}function nd(){return(nd=(0,Ee.A)(function*(p,o){const u=qf(p);yield Xs(u,o,!0,!1)})).apply(this,arguments)}function Xs(p,o,u,f){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,Ee.A)(function*(p,o,u,f){const _=yield function xc(p,o){const u=Fe(p);return u.persistence.runTransaction("Allocate target","readwrite",f=>{let _;return u.Qr.getTargetData(f,o).next(C=>C?(_=C,fe.resolve(_)):u.Qr.allocateTargetId(f).next(T=>(_=new Ba(o,T,"TargetPurposeListen",f.currentSequenceNumber),u.Qr.addTargetData(f,_).next(()=>_))))}).then(f=>{const _=u.ns.get(f.targetId);return(null===_||f.snapshotVersion.compareTo(_.snapshotVersion)>0)&&(u.ns=u.ns.insert(f.targetId,f),u.rs.set(o,f.targetId)),f})}(p.localStore,Do(o)),C=_.targetId,T=u?p.sharedClientState.addLocalQueryTarget(C):"not-current";let V;return f&&(V=yield function ji(p,o,u,f,_){return tg.apply(this,arguments)}(p,o,C,"current"===T,_.resumeToken)),p.isPrimaryClient&&u&&Zl(p.remoteStore,_),V})).apply(this,arguments)}function tg(){return tg=(0,Ee.A)(function*(p,o,u,f,_){p.Ba=(we,Le,ht)=>{return(Ut=(0,Ee.A)(function*(Gt,Mn,Wn,Fn){let yr=Mn.view.da(Wn);yr.Xi&&(yr=yield Zu(Gt.localStore,Mn.query,!1).then(({documents:Me})=>Mn.view.da(Me,yr)));const hi=Fn&&Fn.targetChanges.get(Mn.targetId),Fr=Fn&&null!=Fn.targetMismatches.get(Mn.targetId),et=Mn.view.applyChanges(yr,Gt.isPrimaryClient,hi,Fr);return sg(Gt,Mn.targetId,et.fa),et.snapshot}),function Jt(Gt,Mn,Wn,Fn){return Ut.apply(this,arguments)})(p,we,Le,ht);var Ut};const C=yield Zu(p.localStore,o,!0),T=new Zp(o,C.hs),V=T.da(C.documents),G=Oo.createSynthesizedTargetChangeForCurrentChange(u,f&&"Offline"!==p.onlineState,_),X=T.applyChanges(V,p.isPrimaryClient,G);sg(p,u,X.fa);const ce=new Jp(o,u,T);return p.ba.set(o,ce),p.Da.has(u)?p.Da.get(u).push(o):p.Da.set(u,[o]),X.snapshot}),tg.apply(this,arguments)}function A0(p,o,u){return zd.apply(this,arguments)}function zd(){return(zd=(0,Ee.A)(function*(p,o,u){const f=Fe(p),_=f.ba.get(o),C=f.Da.get(_.targetId);if(C.length>1)return f.Da.set(_.targetId,C.filter(T=>!H(T,o))),void f.ba.delete(o);f.isPrimaryClient?(f.sharedClientState.removeLocalQueryTarget(_.targetId),f.sharedClientState.isActiveQueryTarget(_.targetId)||(yield Il(f.localStore,_.targetId,!1).then(()=>{f.sharedClientState.clearQueryState(_.targetId),u&&Jc(f.remoteStore,_.targetId),Kd(f,_.targetId)}).catch(ei))):(Kd(f,_.targetId),yield Il(f.localStore,_.targetId,!0))})).apply(this,arguments)}function b0(p,o){return zh.apply(this,arguments)}function zh(){return(zh=(0,Ee.A)(function*(p,o){const u=Fe(p),f=u.ba.get(o),_=u.Da.get(f.targetId);u.isPrimaryClient&&1===_.length&&(u.sharedClientState.removeLocalQueryTarget(f.targetId),Jc(u.remoteStore,f.targetId))})).apply(this,arguments)}function rd(){return(rd=(0,Ee.A)(function*(p,o,u){const f=function dg(p){const o=Fe(p);return o.remoteStore.remoteSyncer.applySuccessfulWrite=rg.bind(null,o),o.remoteStore.remoteSyncer.rejectFailedWrite=Nm.bind(null,o),o}(p);try{const _=yield function(T,V){const G=Fe(T),X=Kn.now(),ce=V.reduce((ht,Ut)=>ht.add(Ut.key),Zn());let we,Le;return G.persistence.runTransaction("Locally write mutations","readwrite",ht=>{let Ut=Dn(),Jt=Zn();return G.os.getEntries(ht,ce).next(Gt=>{Ut=Gt,Ut.forEach((Mn,Wn)=>{Wn.isValidDocument()||(Jt=Jt.add(Mn))})}).next(()=>G.localDocuments.getOverlayedDocuments(ht,Ut)).next(Gt=>{we=Gt;const Mn=[];for(const Wn of V){const Fn=Ih(Wn,we.get(Wn.key).overlayedDocument);null!=Fn&&Mn.push(new re(Wn.key,Fn,Lc(Fn.value.mapValue),Un.exists(!0)))}return G.mutationQueue.addMutationBatch(ht,X,Mn,V)}).next(Gt=>{Le=Gt;const Mn=Gt.applyToLocalDocumentSet(we,Jt);return G.documentOverlayCache.saveOverlays(ht,Gt.batchId,Mn)})}).then(()=>({batchId:Le.batchId,changes:Zr(we)}))}(f.localStore,o);f.sharedClientState.addPendingMutation(_.batchId),function(T,V,G){let X=T.xa[T.currentUser.toKey()];X||(X=new Ar(wn)),X=X.insert(V,G),T.xa[T.currentUser.toKey()]=X}(f,_.batchId,u),yield ou(f,_.changes),yield Dl(f.remoteStore)}catch(_){const C=_o(_,"Failed to persist write");u.reject(C)}})).apply(this,arguments)}function iu(p,o){return ng.apply(this,arguments)}function ng(){return(ng=(0,Ee.A)(function*(p,o){const u=Fe(p);try{const f=yield function Yc(p,o){const u=Fe(p),f=o.snapshotVersion;let _=u.ns;return u.persistence.runTransaction("Apply remote event","readwrite-primary",C=>{const T=u.os.newChangeBuffer({trackRemovals:!0});_=u.ns;const V=[];o.targetChanges.forEach((ce,we)=>{const Le=_.get(we);if(!Le)return;V.push(u.Qr.removeMatchingKeys(C,ce.removedDocuments,we).next(()=>u.Qr.addMatchingKeys(C,ce.addedDocuments,we)));let ht=Le.withSequenceNumber(C.currentSequenceNumber);var Jt,Gt,Mn;null!==o.targetMismatches.get(we)?ht=ht.withResumeToken(Vi.EMPTY_BYTE_STRING,cn.min()).withLastLimboFreeSnapshotVersion(cn.min()):ce.resumeToken.approximateByteSize()>0&&(ht=ht.withResumeToken(ce.resumeToken,f)),_=_.insert(we,ht),Gt=ht,Mn=ce,(0===(Jt=Le).resumeToken.approximateByteSize()||Gt.snapshotVersion.toMicroseconds()-Jt.snapshotVersion.toMicroseconds()>=3e8||Mn.addedDocuments.size+Mn.modifiedDocuments.size+Mn.removedDocuments.size>0)&&V.push(u.Qr.updateTargetData(C,ht))});let G=Dn(),X=Zn();if(o.documentUpdates.forEach(ce=>{o.resolvedLimboDocuments.has(ce)&&V.push(u.persistence.referenceDelegate.updateLimboDocument(C,ce))}),V.push(function Ql(p,o,u){let f=Zn(),_=Zn();return u.forEach(C=>f=f.add(C)),o.getEntries(p,f).next(C=>{let T=Dn();return u.forEach((V,G)=>{const X=C.get(V);G.isFoundDocument()!==X.isFoundDocument()&&(_=_.add(V)),G.isNoDocument()&&G.version.isEqual(cn.min())?(o.removeEntry(V,G.readTime),T=T.insert(V,G)):!X.isValidDocument()||G.version.compareTo(X.version)>0||0===G.version.compareTo(X.version)&&X.hasPendingWrites?(o.addEntry(G),T=T.insert(V,G)):Se("LocalStore","Ignoring outdated watch update for ",V,". Current version:",X.version," Watch version:",G.version)}),{cs:T,ls:_}})}(C,T,o.documentUpdates).next(ce=>{G=ce.cs,X=ce.ls})),!f.isEqual(cn.min())){const ce=u.Qr.getLastRemoteSnapshotVersion(C).next(we=>u.Qr.setTargetsMetadata(C,C.currentSequenceNumber,f));V.push(ce)}return fe.waitFor(V).next(()=>T.apply(C)).next(()=>u.localDocuments.getLocalViewOfDocuments(C,G,X)).next(()=>G)}).then(C=>(u.ns=_,C))}(u.localStore,o);o.targetChanges.forEach((_,C)=>{const T=u.Fa.get(C);T&&(je(_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size<=1),_.addedDocuments.size>0?T.wa=!0:_.modifiedDocuments.size>0?je(T.wa):_.removedDocuments.size>0&&(je(T.wa),T.wa=!1))}),yield ou(u,f,o)}catch(f){yield ei(f)}})).apply(this,arguments)}function jf(p,o,u){const f=Fe(p);if(f.isPrimaryClient&&0===u||!f.isPrimaryClient&&1===u){const _=[];f.ba.forEach((C,T)=>{const V=T.view.j_(o);V.snapshot&&_.push(V.snapshot)}),function(T,V){const G=Fe(T);G.onlineState=V;let X=!1;G.queries.forEach((ce,we)=>{for(const Le of we.U_)Le.j_(V)&&(X=!0)}),X&&ru(G)}(f.eventManager,o),_.length&&f.Sa.h_(_),f.onlineState=o,f.isPrimaryClient&&f.sharedClientState.setOnlineState(o)}}function Wh(p,o,u){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,Ee.A)(function*(p,o,u){const f=Fe(p);f.sharedClientState.updateQueryState(o,"rejected",u);const _=f.Fa.get(o),C=_&&_.key;if(C){let T=new Ar(Wt.comparator);T=T.insert(C,Qr.newNoDocument(C,cn.min()));const V=Zn().add(C),G=new Ws(cn.min(),new Map,new Ar(wn),T,V);yield iu(f,G),f.va=f.va.remove(C),f.Fa.delete(o),Lm(f)}else yield Il(f.localStore,o,!1).then(()=>Kd(f,o,u)).catch(ei)})).apply(this,arguments)}function rg(p,o){return xu.apply(this,arguments)}function xu(){return(xu=(0,Ee.A)(function*(p,o){const u=Fe(p),f=o.batch.batchId;try{const _=yield function ks(p,o){const u=Fe(p);return u.persistence.runTransaction("Acknowledge batch","readwrite-primary",f=>{const _=o.batch.keys(),C=u.os.newChangeBuffer({trackRemovals:!0});return function(V,G,X,ce){const we=X.batch,Le=we.keys();let ht=fe.resolve();return Le.forEach(Ut=>{ht=ht.next(()=>ce.getEntry(G,Ut)).next(Jt=>{const Gt=X.docVersions.get(Ut);je(null!==Gt),Jt.version.compareTo(Gt)<0&&(we.applyToRemoteDocument(Jt,X),Jt.isValidDocument()&&(Jt.setReadTime(X.commitVersion),ce.addEntry(Jt)))})}),ht.next(()=>V.mutationQueue.removeMutationBatch(G,we))}(u,f,o,C).next(()=>C.apply(f)).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,_,o.batch.batchId)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,function(V){let G=Zn();for(let X=0;X<V.mutationResults.length;++X)V.mutationResults[X].transformResults.length>0&&(G=G.add(V.batch.mutations[X].key));return G}(o))).next(()=>u.localDocuments.getDocuments(f,_))})}(u.localStore,o);Hf(u,f,null),og(u,f),u.sharedClientState.updateMutationState(f,"acknowledged"),yield ou(u,_)}catch(_){yield ei(_)}})).apply(this,arguments)}function Nm(p,o,u){return ig.apply(this,arguments)}function ig(){return(ig=(0,Ee.A)(function*(p,o,u){const f=Fe(p);try{const _=yield function(T,V){const G=Fe(T);return G.persistence.runTransaction("Reject batch","readwrite-primary",X=>{let ce;return G.mutationQueue.lookupMutationBatch(X,V).next(we=>(je(null!==we),ce=we.keys(),G.mutationQueue.removeMutationBatch(X,we))).next(()=>G.mutationQueue.performConsistencyCheck(X)).next(()=>G.documentOverlayCache.removeOverlaysForBatchId(X,ce,V)).next(()=>G.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(X,ce)).next(()=>G.localDocuments.getDocuments(X,ce))})}(f.localStore,o);Hf(f,o,u),og(f,o),f.sharedClientState.updateMutationState(o,"rejected",u),yield ou(f,_)}catch(_){yield ei(_)}})).apply(this,arguments)}function og(p,o){(p.Oa.get(o)||[]).forEach(u=>{u.resolve()}),p.Oa.delete(o)}function Hf(p,o,u){const f=Fe(p);let _=f.xa[f.currentUser.toKey()];if(_){const C=_.get(o);C&&(u?C.reject(u):C.resolve(),_=_.remove(o)),f.xa[f.currentUser.toKey()]=_}}function Kd(p,o,u=null){p.sharedClientState.removeLocalQueryTarget(o);for(const f of p.Da.get(o))p.ba.delete(f),u&&p.Sa.ka(f,u);p.Da.delete(o),p.isPrimaryClient&&p.Ma.Vr(o).forEach(f=>{p.Ma.containsKey(f)||km(p,f)})}function km(p,o){p.Ca.delete(o.path.canonicalString());const u=p.va.get(o);null!==u&&(Jc(p.remoteStore,u),p.va=p.va.remove(o),p.Fa.delete(u),Lm(p))}function sg(p,o,u){for(const f of u)f instanceof Uf?(p.Ma.addReference(f.key,o),Fm(p,f)):f instanceof Rm?(Se("SyncEngine","Document no longer in limbo: "+f.key),p.Ma.removeReference(f.key,o),p.Ma.containsKey(f.key)||km(p,f.key)):Pe()}function Fm(p,o){const u=o.key,f=u.path.canonicalString();p.va.get(u)||p.Ca.has(f)||(Se("SyncEngine","New document in limbo: "+u),p.Ca.add(f),Lm(p))}function Lm(p){for(;p.Ca.size>0&&p.va.size<p.maxConcurrentLimboResolutions;){const o=p.Ca.values().next().value;p.Ca.delete(o);const u=new Wt(Nt.fromString(o)),f=p.Na.next();p.Fa.set(f,new Mm(u)),p.va=p.va.insert(u,f),Zl(p.remoteStore,new Ba(Do(Go(u.path)),f,"TargetPurposeLimboResolution",mr.oe))}}function ou(p,o,u){return od.apply(this,arguments)}function od(){return od=(0,Ee.A)(function*(p,o,u){const f=Fe(p),_=[],C=[],T=[];var V;f.ba.isEmpty()||(f.ba.forEach((V,G)=>{T.push(f.Ba(G,o,u).then(X=>{if((X||u)&&f.isPrimaryClient&&f.sharedClientState.updateQueryState(G.targetId,X&&!X.fromCache?"current":"not-current"),X){_.push(X);const ce=Yu.Ki(G.targetId,X);C.push(ce)}}))}),yield Promise.all(T),f.Sa.h_(_),yield(V=(0,Ee.A)(function*(X,ce){const we=Fe(X);try{yield we.persistence.runTransaction("notifyLocalViewChanges","readwrite",Le=>fe.forEach(ce,ht=>fe.forEach(ht.qi,Ut=>we.persistence.referenceDelegate.addReference(Le,ht.targetId,Ut)).next(()=>fe.forEach(ht.Qi,Ut=>we.persistence.referenceDelegate.removeReference(Le,ht.targetId,Ut)))))}catch(Le){if(!De(Le))throw Le;Se("LocalStore","Failed to update sequence numbers: "+Le)}for(const Le of ce){const ht=Le.targetId;if(!Le.fromCache){const Ut=we.ns.get(ht),Gt=Ut.withLastLimboFreeSnapshotVersion(Ut.snapshotVersion);we.ns=we.ns.insert(ht,Gt)}}}),function G(X,ce){return V.apply(this,arguments)})(f.localStore,C))}),od.apply(this,arguments)}function ag(p,o){return sd.apply(this,arguments)}function sd(){return(sd=(0,Ee.A)(function*(p,o){const u=Fe(p);if(!u.currentUser.isEqual(o)){Se("SyncEngine","User change. New user:",o.toKey());const f=yield wl(u.localStore,o);u.currentUser=o,(C=u).Oa.forEach(V=>{V.forEach(G=>{G.reject(new _e(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),C.Oa.clear(),u.sharedClientState.handleUserChange(o,f.removedBatchIds,f.addedBatchIds),yield ou(u,f.us)}var C})).apply(this,arguments)}function cg(p,o){const u=Fe(p),f=u.Fa.get(o);if(f&&f.wa)return Zn().add(f.key);{let _=Zn();const C=u.Da.get(o);if(!C)return _;for(const T of C){const V=u.ba.get(T);_=_.unionWith(V.view.Ea)}return _}}function qf(p){const o=Fe(p);return o.remoteStore.remoteSyncer.applyRemoteEvent=iu.bind(null,o),o.remoteStore.remoteSyncer.getRemoteKeysForTarget=cg.bind(null,o),o.remoteStore.remoteSyncer.rejectListen=Wh.bind(null,o),o.Sa.h_=eo.bind(null,o.eventManager),o.Sa.ka=nu.bind(null,o.eventManager),o}class cc{constructor(){this.synchronizeTabs=!1}initialize(o){var u=this;return(0,Ee.A)(function*(){u.serializer=vr(o.databaseInfo.databaseId),u.sharedClientState=u.createSharedClientState(o),u.persistence=u.createPersistence(o),yield u.persistence.start(),u.localStore=u.createLocalStore(o),u.gcScheduler=u.createGarbageCollectionScheduler(o,u.localStore),u.indexBackfillerScheduler=u.createIndexBackfillerScheduler(o,u.localStore)})()}createGarbageCollectionScheduler(o,u){return null}createIndexBackfillerScheduler(o,u){return null}createLocalStore(o){return function mo(p,o,u,f){return new Qc(p,o,u,f)}(this.persistence,new Cl,o.initialUser,this.serializer)}createPersistence(o){return new Ai(Xc.Hr,this.serializer)}createSharedClientState(o){return new O}terminate(){var o=this;return(0,Ee.A)(function*(){var u,f;null===(u=o.gcScheduler)||void 0===u||u.stop(),null===(f=o.indexBackfillerScheduler)||void 0===f||f.stop(),o.sharedClientState.shutdown(),yield o.persistence.shutdown()})()}}class su{initialize(o,u){var f=this;return(0,Ee.A)(function*(){f.localStore||(f.localStore=o.localStore,f.sharedClientState=o.sharedClientState,f.datastore=f.createDatastore(u),f.remoteStore=f.createRemoteStore(u),f.eventManager=f.createEventManager(u),f.syncEngine=f.createSyncEngine(u,!o.synchronizeTabs),f.sharedClientState.onlineStateHandler=_=>jf(f.syncEngine,_,1),f.remoteStore.remoteSyncer.handleCredentialChange=ag.bind(null,f.syncEngine),yield Lh(f.remoteStore,f.syncEngine.isPrimaryClient))})()}createEventManager(o){return new Xp}createDatastore(o){const u=vr(o.databaseInfo.databaseId),f=new jt(o.databaseInfo);return new Ha(o.authCredentials,o.appCheckCredentials,f,u)}createRemoteStore(o){return f=this.localStore,_=this.datastore,C=o.asyncQueue,T=u=>jf(this.syncEngine,u,0),V=A.D()?new A:new E,new Nf(f,_,C,T,V);var f,_,C,T,V}createSyncEngine(o,u){return function(_,C,T,V,G,X,ce){const we=new Om(_,C,T,V,G,X);return ce&&(we.La=!0),we}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,o.initialUser,o.maxConcurrentLimboResolutions,u)}terminate(){var o=this;return(0,Ee.A)(function*(){var u,f;yield(f=(0,Ee.A)(function*(C){const T=Fe(C);Se("RemoteStore","RemoteStore shutting down."),T.M_.add(5),yield ic(T),T.O_.shutdown(),T.N_.set("Unknown")}),function _(C){return f.apply(this,arguments)})(o.remoteStore),null===(u=o.datastore)||void 0===u||u.terminate()})()}}class No{constructor(o){this.observer=o,this.muted=!1}next(o){this.observer.next&&this.Ka(this.observer.next,o)}error(o){this.observer.error?this.Ka(this.observer.error,o):bt("Uncaught Error in snapshot listener:",o.toString())}$a(){this.muted=!0}Ka(o,u){this.muted||setTimeout(()=>{this.muted||o(u)},0)}}class D0{constructor(o,u,f,_){var C=this;this.authCredentials=o,this.appCheckCredentials=u,this.asyncQueue=f,this.databaseInfo=_,this.user=ke.UNAUTHENTICATED,this.clientId=oi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(f,function(){var T=(0,Ee.A)(function*(V){Se("FirestoreClient","Received user=",V.uid),yield C.authCredentialListener(V),C.user=V});return function(V){return T.apply(this,arguments)}}()),this.appCheckCredentials.start(f,T=>(Se("FirestoreClient","Received new app check token=",T),this.appCheckCredentialListener(T,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(o){this.authCredentialListener=o}setAppCheckTokenChangeListener(o){this.appCheckCredentialListener=o}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _e(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var o=this;this.asyncQueue.enterRestrictedMode();const u=new mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.A)(function*(){try{o._onlineComponents&&(yield o._onlineComponents.terminate()),o._offlineComponents&&(yield o._offlineComponents.terminate()),o.authCredentials.shutdown(),o.appCheckCredentials.shutdown(),u.resolve()}catch(f){const _=_o(f,"Failed to shutdown persistence");u.reject(_)}})),u.promise}}function Kf(p,o){return di.apply(this,arguments)}function di(){return di=(0,Ee.A)(function*(p,o){p.asyncQueue.verifyOperationInProgress(),Se("FirestoreClient","Initializing OfflineComponentProvider");const u=p.configuration;yield o.initialize(u);let f=u.initialUser;p.setCredentialChangeListener(function(){var _=(0,Ee.A)(function*(C){f.isEqual(C)||(yield wl(o.localStore,C),f=C)});return function(C){return _.apply(this,arguments)}}()),o.persistence.setDatabaseDeletedListener(()=>p.terminate()),p._offlineComponents=o}),di.apply(this,arguments)}function Jh(p,o){return cd.apply(this,arguments)}function cd(){return(cd=(0,Ee.A)(function*(p,o){p.asyncQueue.verifyOperationInProgress();const u=yield function Qd(p){return ep.apply(this,arguments)}(p);Se("FirestoreClient","Initializing OnlineComponentProvider"),yield o.initialize(u,p.configuration),p.setCredentialChangeListener(f=>Vr(o.remoteStore,f)),p.setAppCheckTokenChangeListener((f,_)=>Vr(o.remoteStore,_)),p._onlineComponents=o})).apply(this,arguments)}function ep(){return(ep=(0,Ee.A)(function*(p){if(!p._offlineComponents)if(p._uninitializedComponentsProvider){Se("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kf(p,p._uninitializedComponentsProvider._offline)}catch(o){const u=o;if(!function au(p){return"FirebaseError"===p.name?p.code===he.FAILED_PRECONDITION||p.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code}(u))throw u;gn("Error using user provided cache. Falling back to memory cache: "+u),yield Kf(p,new cc)}}else Se("FirestoreClient","Using default OfflineComponentProvider"),yield Kf(p,new cc);return p._offlineComponents})).apply(this,arguments)}function tp(p){return ud.apply(this,arguments)}function ud(){return(ud=(0,Ee.A)(function*(p){return p._onlineComponents||(p._uninitializedComponentsProvider?(Se("FirestoreClient","Using user provided OnlineComponentProvider"),yield Jh(p,p._uninitializedComponentsProvider._online)):(Se("FirestoreClient","Using default OnlineComponentProvider"),yield Jh(p,new su))),p._onlineComponents})).apply(this,arguments)}function Yd(p){return $m.apply(this,arguments)}function $m(){return($m=(0,Ee.A)(function*(p){const o=yield tp(p),u=o.eventManager;return u.onListen=Pm.bind(null,o.syncEngine),u.onUnlisten=A0.bind(null,o.syncEngine),u.onFirstRemoteStoreListen=eg.bind(null,o.syncEngine),u.onLastRemoteStoreUnlisten=b0.bind(null,o.syncEngine),u})).apply(this,arguments)}function vg(p){const o={};return void 0!==p.timeoutSeconds&&(o.timeoutSeconds=p.timeoutSeconds),o}const yg=new Map;function Zd(p,o,u){if(!u)throw new _e(he.INVALID_ARGUMENT,`Function ${p}() cannot be called with an empty ${o}.`)}function O0(p){if(!Wt.isDocumentKey(p))throw new _e(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${p} has ${p.length}.`)}function qm(p){if(Wt.isDocumentKey(p))throw new _e(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${p} has ${p.length}.`)}function Eg(p){if(void 0===p)return"undefined";if(null===p)return"null";if("string"==typeof p)return p.length>20&&(p=`${p.substring(0,20)}...`),JSON.stringify(p);if("number"==typeof p||"boolean"==typeof p)return""+p;if("object"==typeof p){if(p instanceof Array)return"an array";{const o=(f=p).constructor?f.constructor.name:null;return o?`a custom ${o} object`:"an object"}}var f;return"function"==typeof p?"a function":Pe()}function kr(p,o){if("_delegate"in p&&(p=p._delegate),!(p instanceof o)){if(o.name===p.constructor.name)throw new _e(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const u=Eg(p);throw new _e(he.INVALID_ARGUMENT,`Expected type '${o.name}', but it was: ${u}`)}}return p}class Jd{constructor(o){var u,f;if(void 0===o.host){if(void 0!==o.ssl)throw new _e(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=o.host,this.ssl=null===(u=o.ssl)||void 0===u||u;if(this.credentials=o.credentials,this.ignoreUndefinedProperties=!!o.ignoreUndefinedProperties,this.localCache=o.localCache,void 0===o.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==o.cacheSizeBytes&&o.cacheSizeBytes<1048576)throw new _e(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=o.cacheSizeBytes}(function i1(p,o,u,f){if(!0===o&&!0===f)throw new _e(he.INVALID_ARGUMENT,`${p} and ${u} cannot be used together.`)})("experimentalForceLongPolling",o.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",o.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!o.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==o.experimentalAutoDetectLongPolling&&!o.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=vg(null!==(f=o.experimentalLongPollingOptions)&&void 0!==f?f:{}),function(C){if(void 0!==C.timeoutSeconds){if(isNaN(C.timeoutSeconds))throw new _e(he.INVALID_ARGUMENT,`invalid long polling timeout: ${C.timeoutSeconds} (must not be NaN)`);if(C.timeoutSeconds<5)throw new _e(he.INVALID_ARGUMENT,`invalid long polling timeout: ${C.timeoutSeconds} (minimum allowed value is 5)`);if(C.timeoutSeconds>30)throw new _e(he.INVALID_ARGUMENT,`invalid long polling timeout: ${C.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!o.useFetchStreams}isEqual(o){return this.host===o.host&&this.ssl===o.ssl&&this.credentials===o.credentials&&this.cacheSizeBytes===o.cacheSizeBytes&&this.experimentalForceLongPolling===o.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===o.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===o.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===o.ignoreUndefinedProperties&&this.useFetchStreams===o.useFetchStreams}}class bi{constructor(o,u,f,_){this._authCredentials=o,this._appCheckCredentials=u,this._databaseId=f,this._app=_,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _e(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(o){if(this._settingsFrozen)throw new _e(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jd(o),void 0!==o.credentials&&(this._authCredentials=function(f){if(!f)return new jn;switch(f.type){case"firstParty":return new to(f.sessionIndex||"0",f.iamToken||null,f.authTokenFactory||null);case"provider":return f.client;default:throw new _e(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(o.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(u){const f=yg.get(u);f&&(Se("ComponentProvider","Removing Datastore"),yg.delete(u),f.terminate())}(this),Promise.resolve()}}class os{constructor(o,u,f){this.converter=u,this._query=f,this.type="query",this.firestore=o}withConverter(o){return new os(this.firestore,o,this._query)}}class Ti{constructor(o,u,f){this.converter=u,this._key=f,this.type="document",this.firestore=o}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Du(this.firestore,this.converter,this._key.path.popLast())}withConverter(o){return new Ti(this.firestore,o,this._key)}}class Du extends os{constructor(o,u,f){super(o,u,Go(f)),this._path=f,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const o=this._path.popLast();return o.isEmpty()?null:new Ti(this.firestore,null,new Wt(o))}withConverter(o){return new Du(this.firestore,o,this._path)}}function rp(p,o,...u){if(p=(0,ve.Ku)(p),Zd("collection","path",o),p instanceof bi){const f=Nt.fromString(o,...u);return qm(f),new Du(p,null,f)}{if(!(p instanceof Ti||p instanceof Du))throw new _e(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=p._path.child(Nt.fromString(o,...u));return qm(f),new Du(p.firestore,null,f)}}function Qf(p,o,...u){if(p=(0,ve.Ku)(p),1===arguments.length&&(o=oi.newId()),Zd("doc","path",o),p instanceof bi){const f=Nt.fromString(o,...u);return O0(f),new Ti(p,null,new Wt(f))}{if(!(p instanceof Ti||p instanceof Du))throw new _e(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=p._path.child(Nt.fromString(o,...u));return O0(f),new Ti(p.firestore,p instanceof Du?p.converter:null,new Wt(f))}}class op{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ys(this,"async_queue_retry"),this.hu=()=>{const u=In();u&&Se("AsyncQueue","Visibility state changed to "+u.visibilityState),this.Yo.Wo()};const o=In();o&&"function"==typeof o.addEventListener&&o.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(o){this.enqueue(o)}enqueueAndForgetEvenWhileRestricted(o){this.Pu(),this.Iu(o)}enterRestrictedMode(o){if(!this.ou){this.ou=!0,this.cu=o||!1;const u=In();u&&"function"==typeof u.removeEventListener&&u.removeEventListener("visibilitychange",this.hu)}}enqueue(o){if(this.Pu(),this.ou)return new Promise(()=>{});const u=new mt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(o().then(u.resolve,u.reject),u.promise)).then(()=>u.promise)}enqueueRetryable(o){this.enqueueAndForget(()=>(this.su.push(o),this.Tu()))}Tu(){var o=this;return(0,Ee.A)(function*(){if(0!==o.su.length){try{yield o.su[0](),o.su.shift(),o.Yo.reset()}catch(u){if(!De(u))throw u;Se("AsyncQueue","Operation failed with retryable error: "+u)}o.su.length>0&&o.Yo.$o(()=>o.Tu())}})()}Iu(o){const u=this.iu.then(()=>(this.uu=!0,o().catch(f=>{throw this.au=f,this.uu=!1,bt("INTERNAL UNHANDLED ERROR: ",function(T){let V=T.message||"";return T.stack&&(V=T.stack.includes(T.message)?T.stack:T.message+"\n"+T.stack),V}(f)),f}).then(f=>(this.uu=!1,f))));return this.iu=u,u}enqueueAfterDelay(o,u,f){this.Pu(),this.lu.indexOf(o)>-1&&(u=0);const _=Fs.createAndSchedule(this,o,u,f,C=>this.Eu(C));return this._u.push(_),_}Pu(){this.au&&Pe()}verifyOperationInProgress(){}du(){var o=this;return(0,Ee.A)(function*(){let u;do{u=o.iu,yield u}while(u!==o.iu)})()}Au(o){for(const u of this._u)if(u.timerId===o)return!0;return!1}Ru(o){return this.du().then(()=>{this._u.sort((u,f)=>u.targetTimeMs-f.targetTimeMs);for(const u of this._u)if(u.skipDelay(),"all"!==o&&u.timerId===o)break;return this.du()})}Vu(o){this.lu.push(o)}Eu(o){const u=this._u.indexOf(o);this._u.splice(u,1)}}function Yf(p){return function(u,f){if("object"!=typeof u||null===u)return!1;const _=u;for(const C of["next","error","complete"])if(C in _&&"function"==typeof _[C])return!0;return!1}(p)}class $i extends bi{constructor(o,u,f,_){super(o,u,f,_),this.type="firestore",this._queue=new op,this._persistenceKey=_?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||N0(this),this._firestoreClient.terminate()}}function Xm(p,o){const u="object"==typeof p?p:(0,Xe.Sx)(),f="string"==typeof p?p:o||"(default)",_=(0,Xe.j6)(u,"firestore").getImmediate({identifier:f});if(!_._initialized){const C=(0,ve.yU)("firestore");C&&function P0(p,o,u,f={}){var _;const C=(p=kr(p,bi))._getSettings(),T=`${o}:${u}`;if("firestore.googleapis.com"!==C.host&&C.host!==T&&gn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),p._setSettings(Object.assign(Object.assign({},C),{host:T,ssl:!1})),f.mockUserToken){let V,G;if("string"==typeof f.mockUserToken)V=f.mockUserToken,G=ke.MOCK_USER;else{V=(0,ve.Fy)(f.mockUserToken,null===(_=p._app)||void 0===_?void 0:_.options.projectId);const X=f.mockUserToken.sub||f.mockUserToken.user_id;if(!X)throw new _e(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");G=new ke(X)}p._authCredentials=new en(new zt(V,G))}}(_,...C)}return _}function ko(p){return p._firestoreClient||N0(p),p._firestoreClient.verifyNotTerminated(),p._firestoreClient}function N0(p){var o,u,f;const _=p._freezeSettings(),C=(G=(null===(o=p._app)||void 0===o?void 0:o.options.appId)||"",new na(p._databaseId,G,p._persistenceKey,(ce=_).host,ce.ssl,ce.experimentalForceLongPolling,ce.experimentalAutoDetectLongPolling,vg(ce.experimentalLongPollingOptions),ce.useFetchStreams));var G,ce;p._firestoreClient=new D0(p._authCredentials,p._appCheckCredentials,p._queue,C),null!==(u=_.localCache)&&void 0!==u&&u._offlineComponentProvider&&null!==(f=_.localCache)&&void 0!==f&&f._onlineComponentProvider&&(p._firestoreClient._uninitializedComponentsProvider={_offlineKind:_.localCache.kind,_offline:_.localCache._offlineComponentProvider,_online:_.localCache._onlineComponentProvider})}class el{constructor(o){this._byteString=o}static fromBase64String(o){try{return new el(Vi.fromBase64String(o))}catch(u){throw new _e(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+u)}}static fromUint8Array(o){return new el(Vi.fromUint8Array(o))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(o){return this._byteString.isEqual(o._byteString)}}class hd{constructor(...o){for(let u=0;u<o.length;++u)if(0===o[u].length)throw new _e(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(o)}isEqual(o){return this._internalPath.isEqual(o._internalPath)}}class pd{constructor(o){this._methodName=o}}class Ig{constructor(o,u){if(!isFinite(o)||o<-90||o>90)throw new _e(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+o);if(!isFinite(u)||u<-180||u>180)throw new _e(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+u);this._lat=o,this._long=u}get latitude(){return this._lat}get longitude(){return this._long}isEqual(o){return this._lat===o._lat&&this._long===o._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(o){return wn(this._lat,o._lat)||wn(this._long,o._long)}}const F0=/^__.*__$/;class L0{constructor(o,u,f){this.data=o,this.fieldMask=u,this.fieldTransforms=f}toMutation(o,u){return null!==this.fieldMask?new re(o,this.data,this.fieldMask,u,this.fieldTransforms):new F(o,this.data,u,this.fieldTransforms)}}class Ag{constructor(o,u,f){this.data=o,this.fieldMask=u,this.fieldTransforms=f}toMutation(o,u){return new re(o,this.data,this.fieldMask,u,this.fieldTransforms)}}function bg(p){switch(p){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Jf{constructor(o,u,f,_,C,T){this.settings=o,this.databaseId=u,this.serializer=f,this.ignoreUndefinedProperties=_,void 0===C&&this.mu(),this.fieldTransforms=C||[],this.fieldMask=T||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(o){return new Jf(Object.assign(Object.assign({},this.settings),o),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(o){var u;const f=null===(u=this.path)||void 0===u?void 0:u.child(o),_=this.gu({path:f,yu:!1});return _.wu(o),_}Su(o){var u;const f=null===(u=this.path)||void 0===u?void 0:u.child(o),_=this.gu({path:f,yu:!1});return _.mu(),_}bu(o){return this.gu({path:void 0,yu:!0})}Du(o){return cu(o,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(o){return void 0!==this.fieldMask.find(u=>o.isPrefixOf(u))||void 0!==this.fieldTransforms.find(u=>o.isPrefixOf(u.field))}mu(){if(this.path)for(let o=0;o<this.path.length;o++)this.wu(this.path.get(o))}wu(o){if(0===o.length)throw this.Du("Document fields must not be empty");if(bg(this.fu)&&F0.test(o))throw this.Du('Document fields cannot begin and end with "__"')}}class ap{constructor(o,u,f){this.databaseId=o,this.ignoreUndefinedProperties=u,this.serializer=f||vr(o)}Fu(o,u,f,_=!1){return new Jf({fu:o,methodName:u,vu:f,path:un.emptyPath(),yu:!1,Cu:_},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(p){const o=p._freezeSettings(),u=vr(p._databaseId);return new ap(p._databaseId,!!o.ignoreUndefinedProperties,u)}function eh(p,o,u,f,_,C={}){const T=p.Fu(C.merge||C.mergeFields?2:0,o,u,_);Tg("Data must be an object, but it was:",T,f);const V=e_(f,T);let G,X;if(C.merge)G=new Ri(T.fieldMask),X=T.fieldTransforms;else if(C.mergeFields){const ce=[];for(const we of C.mergeFields){const Le=Ml(o,we,u);if(!T.contains(Le))throw new _e(he.INVALID_ARGUMENT,`Field '${Le}' is specified in your field mask but missing from your input data.`);ni(ce,Le)||ce.push(Le)}G=new Ri(ce),X=T.fieldTransforms.filter(we=>G.covers(we.field))}else G=null,X=T.fieldTransforms;return new L0(new ho(V),G,X)}class tl extends pd{_toFieldTransform(o){if(2!==o.fu)throw o.Du(1===o.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return o.fieldMask.push(o.path),null}isEqual(o){return o instanceof tl}}function gd(p,o){if(V0(p=(0,ve.Ku)(p)))return Tg("Unsupported field value:",o,p),e_(p,o);if(p instanceof pd)return function(f,_){if(!bg(_.fu))throw _.Du(`${f._methodName}() can only be used with update() and set()`);if(!_.path)throw _.Du(`${f._methodName}() is not currently supported inside arrays`);const C=f._toFieldTransform(_);C&&_.fieldTransforms.push(C)}(p,o),null;if(void 0===p&&o.ignoreUndefinedProperties)return null;if(o.path&&o.fieldMask.push(o.path),p instanceof Array){if(o.settings.yu&&4!==o.fu)throw o.Du("Nested arrays are not supported");return function(f,_){const C=[];let T=0;for(const V of f){let G=gd(V,_.bu(T));null==G&&(G={nullValue:"NULL_VALUE"}),C.push(G),T++}return{arrayValue:{values:C}}}(p,o)}return function(f,_){if(null===(f=(0,ve.Ku)(f)))return{nullValue:"NULL_VALUE"};if("number"==typeof f)return ul(_.serializer,f);if("boolean"==typeof f)return{booleanValue:f};if("string"==typeof f)return{stringValue:f};if(f instanceof Date){const C=Kn.fromDate(f);return{timestampValue:Yi(_.serializer,C)}}if(f instanceof Kn){const C=new Kn(f.seconds,1e3*Math.floor(f.nanoseconds/1e3));return{timestampValue:Yi(_.serializer,C)}}if(f instanceof Ig)return{geoPointValue:{latitude:f.latitude,longitude:f.longitude}};if(f instanceof el)return{bytesValue:Hu(_.serializer,f._byteString)};if(f instanceof Ti){const C=_.databaseId,T=f.firestore._databaseId;if(!T.isEqual(C))throw _.Du(`Document reference is for database ${T.projectId}/${T.database} but should be for database ${C.projectId}/${C.database}`);return{referenceValue:Gu(f.firestore._databaseId||_.databaseId,f._key.path)}}throw _.Du(`Unsupported field value: ${Eg(f)}`)}(p,o)}function e_(p,o){const u={};return ro(p)?o.path&&o.path.length>0&&o.fieldMask.push(o.path):To(p,(f,_)=>{const C=gd(_,o.pu(f));null!=C&&(u[f]=C)}),{mapValue:{fields:u}}}function V0(p){return!("object"!=typeof p||null===p||p instanceof Array||p instanceof Date||p instanceof Kn||p instanceof Ig||p instanceof el||p instanceof Ti||p instanceof pd)}function Tg(p,o,u){if(!V0(u)||"object"!=typeof(_=u)||null===_||Object.getPrototypeOf(_)!==Object.prototype&&null!==Object.getPrototypeOf(_)){const f=Eg(u);throw o.Du("an object"===f?p+" a custom object":p+" "+f)}var _}function Ml(p,o,u){if((o=(0,ve.Ku)(o))instanceof hd)return o._internalPath;if("string"==typeof o)return cp(p,o);throw cu("Field path arguments must be of type string or ",p,!1,void 0,u)}const xg=new RegExp("[~\\*/\\[\\]]");function cp(p,o,u){if(o.search(xg)>=0)throw cu(`Invalid field path (${o}). Paths must not contain '~', '*', '/', '[', or ']'`,p,!1,void 0,u);try{return new hd(...o.split("."))._internalPath}catch{throw cu(`Invalid field path (${o}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,p,!1,void 0,u)}}function cu(p,o,u,f,_){const C=f&&!f.isEmpty(),T=void 0!==_;let V=`Function ${o}() called with invalid data`;u&&(V+=" (via `toFirestore()`)"),V+=". ";let G="";return(C||T)&&(G+=" (found",C&&(G+=` in field ${f}`),T&&(G+=` in document ${_}`),G+=")"),new _e(he.INVALID_ARGUMENT,V+p+G)}function ni(p,o){return p.some(u=>u.isEqual(o))}class rf{constructor(o,u,f,_,C){this._firestore=o,this._userDataWriter=u,this._key=f,this._document=_,this._converter=C}get id(){return this._key.path.lastSegment()}get ref(){return new Ti(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const o=new t_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(o)}return this._userDataWriter.convertValue(this._document.data.value)}}get(o){if(this._document){const u=this._document.data.field(sf("DocumentSnapshot.get",o));if(null!==u)return this._userDataWriter.convertValue(u)}}}class t_ extends rf{data(){return super.data()}}function sf(p,o){return"string"==typeof o?cp(p,o):o instanceof hd?o._internalPath:o._delegate._internalPath}function B0(p){if("L"===p.limitType&&0===p.explicitOrderBy.length)throw new _e(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n_{}class th extends n_{}function U0(p,o,...u){let f=[];o instanceof n_&&f.push(o),f=f.concat(u),function(C){const T=C.filter(G=>G instanceof Sr).length,V=C.filter(G=>G instanceof nh).length;if(T>1||T>0&&V>0)throw new _e(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(f);for(const _ of f)p=_._apply(p);return p}class nh extends th{constructor(o,u,f){super(),this._field=o,this._op=u,this._value=f,this.type="where"}static _create(o,u,f){return new nh(o,u,f)}_apply(o){const u=this._parse(o);return sh(o._query,u),new os(o.firestore,o.converter,Y(o._query,u))}_parse(o){const u=Ru(o.firestore);return function(C,T,V,G,X,ce,we){let Le;if(X.isKeyField()){if("array-contains"===ce||"array-contains-any"===ce)throw new _e(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ce}' queries on documentId().`);if("in"===ce||"not-in"===ce){dp(we,ce);const ht=[];for(const Ut of we)ht.push(Mc(G,C,Ut));Le={arrayValue:{values:ht}}}else Le=Mc(G,C,we)}else"in"!==ce&&"not-in"!==ce&&"array-contains-any"!==ce||dp(we,ce),Le=function Vs(p,o,u,f=!1){return gd(u,p.Fu(f?4:3,o))}(V,"where",we,"in"===ce||"not-in"===ce);return Xn.create(X,ce,Le)}(o._query,0,u,o.firestore._databaseId,this._field,this._op,this._value)}}function c1(p,o,u){const f=o,_=sf("where",p);return nh._create(_,f,u)}class Sr extends n_{constructor(o,u){super(),this.type=o,this._queryConstraints=u}static _create(o,u){return new Sr(o,u)}_parse(o){const u=this._queryConstraints.map(f=>f._parse(o)).filter(f=>f.getFilters().length>0);return 1===u.length?u[0]:hr.create(u,this._getOperator())}_apply(o){const u=this._parse(o);return 0===u.getFilters().length?o:(function(_,C){let T=_;const V=C.getFlattenedFilters();for(const G of V)sh(T,G),T=Y(T,G)}(o._query,u),new os(o.firestore,o.converter,Y(o._query,u)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Mc(p,o,u){if("string"==typeof(u=(0,ve.Ku)(u))){if(""===u)throw new _e(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rs(o)&&-1!==u.indexOf("/"))throw new _e(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${u}' contains a '/' character.`);const f=o.path.child(Nt.fromString(u));if(!Wt.isDocumentKey(f))throw new _e(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${f}' is not because it has an odd number of segments (${f.length}).`);return Hi(p,new Wt(f))}if(u instanceof Ti)return Hi(p,u._key);throw new _e(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eg(u)}.`)}function dp(p,o){if(!Array.isArray(p)||0===p.length)throw new _e(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${o.toString()}' filters.`)}function sh(p,o){const u=function(_,C){for(const T of _)for(const V of T.getFlattenedFilters())if(C.indexOf(V.op)>=0)return V.op;return null}(p.filters,function(_){switch(_){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(o.op));if(null!==u)throw new _e(he.INVALID_ARGUMENT,u===o.op?`Invalid query. You cannot use more than one '${o.op.toString()}' filter.`:`Invalid query. You cannot use '${o.op.toString()}' filters with '${u.toString()}' filters.`)}class Rg{convertValue(o,u="none"){switch(Ss(o)){case 0:return null;case 1:return o.booleanValue;case 2:return Mi(o.integerValue||o.doubleValue);case 3:return this.convertTimestamp(o.timestampValue);case 4:return this.convertServerTimestamp(o,u);case 5:return o.stringValue;case 6:return this.convertBytes(xs(o.bytesValue));case 7:return this.convertReference(o.referenceValue);case 8:return this.convertGeoPoint(o.geoPointValue);case 9:return this.convertArray(o.arrayValue,u);case 10:return this.convertObject(o.mapValue,u);default:throw Pe()}}convertObject(o,u){return this.convertObjectMap(o.fields,u)}convertObjectMap(o,u="none"){const f={};return To(o,(_,C)=>{f[_]=this.convertValue(C,u)}),f}convertGeoPoint(o){return new Ig(Mi(o.latitude),Mi(o.longitude))}convertArray(o,u){return(o.values||[]).map(f=>this.convertValue(f,u))}convertServerTimestamp(o,u){switch(u){case"previous":const f=la(o);return null==f?null:this.convertValue(f,u);case"estimate":return this.convertTimestamp(xo(o));default:return null}}convertTimestamp(o){const u=Jo(o);return new Kn(u.seconds,u.nanos)}convertDocumentKey(o,u){const f=Nt.fromString(o);je(Hl(f));const _=new da(f.get(1),f.get(3)),C=new Wt(f.popFirst(5));return _.isEqual(u)||bt(`Document ${C} contains a document reference within a different database (${_.projectId}/${_.database}) which is not supported. It will be treated as a reference in the current database (${u.projectId}/${u.database}) instead.`),C}}function fp(p,o,u){let f;return f=p?u&&(u.merge||u.mergeFields)?p.toFirestore(o,u):p.toFirestore(o):o,f}class Mu{constructor(o,u){this.hasPendingWrites=o,this.fromCache=u}isEqual(o){return this.hasPendingWrites===o.hasPendingWrites&&this.fromCache===o.fromCache}}class Ol extends rf{constructor(o,u,f,_,C,T){super(o,u,f,_,T),this._firestore=o,this._firestoreImpl=o,this.metadata=C}exists(){return super.exists()}data(o={}){if(this._document){if(this._converter){const u=new pp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(u,o)}return this._userDataWriter.convertValue(this._document.data.value,o.serverTimestamps)}}get(o,u={}){if(this._document){const f=this._document.data.field(sf("DocumentSnapshot.get",o));if(null!==f)return this._userDataWriter.convertValue(f,u.serverTimestamps)}}}class pp extends Ol{data(o={}){return super.data(o)}}class ah{constructor(o,u,f,_){this._firestore=o,this._userDataWriter=u,this._snapshot=_,this.metadata=new Mu(_.hasPendingWrites,_.fromCache),this.query=f}get docs(){const o=[];return this.forEach(u=>o.push(u)),o}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(o,u){this._snapshot.docs.forEach(f=>{o.call(u,new pp(this._firestore,this._userDataWriter,f.key,f,new Mu(this._snapshot.mutatedKeys.has(f.key),this._snapshot.fromCache),this.query.converter))})}docChanges(o={}){const u=!!o.includeMetadataChanges;if(u&&this._snapshot.excludesMetadataChanges)throw new _e(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===u||(this._cachedChanges=function(_,C){if(_._snapshot.oldDocs.isEmpty()){let T=0;return _._snapshot.docChanges.map(V=>({type:"added",doc:new pp(_._firestore,_._userDataWriter,V.doc.key,V.doc,new Mu(_._snapshot.mutatedKeys.has(V.doc.key),_._snapshot.fromCache),_.query.converter),oldIndex:-1,newIndex:T++}))}{let T=_._snapshot.oldDocs;return _._snapshot.docChanges.filter(V=>C||3!==V.type).map(V=>{const G=new pp(_._firestore,_._userDataWriter,V.doc.key,V.doc,new Mu(_._snapshot.mutatedKeys.has(V.doc.key),_._snapshot.fromCache),_.query.converter);let X=-1,ce=-1;return 0!==V.type&&(X=T.indexOf(V.doc.key),T=T.delete(V.doc.key)),1!==V.type&&(T=T.add(V.doc),ce=T.indexOf(V.doc.key)),{type:l1(V.type),doc:G,oldIndex:X,newIndex:ce}})}}(this,u),this._cachedChangesIncludeMetadataChanges=u),this._cachedChanges}}function l1(p){switch(p){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}function W0(p){p=kr(p,Ti);const o=kr(p.firestore,$i);return function zm(p,o,u={}){const f=new mt;return p.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function(C,T,V,G,X){const ce=new No({next:Le=>{T.enqueueAndForget(()=>Gi(C,we));const ht=Le.docs.has(V);!ht&&Le.fromCache?X.reject(new _e(he.UNAVAILABLE,"Failed to get document because the client is offline.")):ht&&Le.fromCache&&G&&"server"===G.source?X.reject(new _e(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):X.resolve(Le)},error:Le=>X.reject(Le)}),we=new jh(Go(V.path),ce,{includeMetadataChanges:!0,ra:!0});return Vh(C,we)}(yield Yd(p),p.asyncQueue,o,u,f)})),f.promise}(ko(o),p._key).then(u=>dh(o,p,u))}class Bs extends Rg{constructor(o){super(),this.firestore=o}convertBytes(o){return new el(o)}convertReference(o){const u=this.convertDocumentKey(o,this.firestore._databaseId);return new Ti(this.firestore,null,u)}}function o_(p){p=kr(p,os);const o=kr(p.firestore,$i),u=ko(o),f=new Bs(o);return B0(p._query),function r1(p,o,u={}){const f=new mt;return p.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function(C,T,V,G,X){const ce=new No({next:Le=>{T.enqueueAndForget(()=>Gi(C,we)),Le.fromCache&&"server"===G.source?X.reject(new _e(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):X.resolve(Le)},error:Le=>X.reject(Le)}),we=new jh(V,ce,{includeMetadataChanges:!0,ra:!0});return Vh(C,we)}(yield Yd(p),p.asyncQueue,o,u,f)})),f.promise}(u,p._query).then(_=>new ah(o,f,p,_))}function gp(p,o,u){p=kr(p,Ti);const f=kr(p.firestore,$i),_=fp(p.converter,o,u);return af(f,[eh(Ru(f),"setDoc",p._key,_,null!==p.converter,u).toMutation(p._key,Un.none())])}function uh(p,o,u,...f){p=kr(p,Ti);const _=kr(p.firestore,$i),C=Ru(_);let T;return T="string"==typeof(o=(0,ve.Ku)(o))||o instanceof hd?function Cs(p,o,u,f,_,C){const T=p.Fu(1,o,u),V=[Ml(o,f,u)],G=[_];if(C.length%2!=0)throw new _e(he.INVALID_ARGUMENT,`Function ${o}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Le=0;Le<C.length;Le+=2)V.push(Ml(o,C[Le])),G.push(C[Le+1]);const X=[],ce=ho.empty();for(let Le=V.length-1;Le>=0;--Le)if(!ni(X,V[Le])){const ht=V[Le];let Ut=G[Le];Ut=(0,ve.Ku)(Ut);const Jt=T.Su(ht);if(Ut instanceof tl)X.push(ht);else{const Gt=gd(Ut,Jt);null!=Gt&&(X.push(ht),ce.set(ht,Gt))}}const we=new Ri(X);return new Ag(ce,we,T.fieldTransforms)}(C,"updateDoc",p._key,o,u,f):function Fo(p,o,u,f){const _=p.Fu(1,o,u);Tg("Data must be an object, but it was:",_,f);const C=[],T=ho.empty();To(f,(G,X)=>{const ce=cp(o,G,u);X=(0,ve.Ku)(X);const we=_.Su(ce);if(X instanceof tl)C.push(ce);else{const Le=gd(X,we);null!=Le&&(C.push(ce),T.set(ce,Le))}});const V=new Ri(C);return new Ag(T,V,_.fieldTransforms)}(C,"updateDoc",p._key,o),af(_,[T.toMutation(p._key,Un.exists(!0))])}function a_(p){return af(kr(p.firestore,$i),[new ut(p._key,Un.none())])}function lh(p,o){const u=kr(p.firestore,$i),f=Qf(p),_=fp(p.converter,o);return af(u,[eh(Ru(p.firestore),"addDoc",f._key,_,null!==p.converter,{}).toMutation(f._key,Un.exists(!1))]).then(()=>f)}function af(p,o){return function(f,_){const C=new mt;return f.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return function ti(p,o,u){return rd.apply(this,arguments)}(yield function np(p){return tp(p).then(o=>o.syncEngine)}(f),_,C)})),C.promise}(ko(p),o)}function dh(p,o,u){const f=u.docs.get(o._key),_=new Bs(p);return new Ol(p,_,o._key,f,new Mu(u.hasPendingWrites,u.fromCache),o.converter)}!function(o,u=!0){bn=Xe.MF,(0,Xe.om)(new Et.uA("firestore",(f,{instanceIdentifier:_,options:C})=>{const T=f.getProvider("app").getImmediate(),V=new $i(new qn(f.getProvider("auth-internal")),new qr(f.getProvider("app-check-internal")),function(X,ce){if(!Object.prototype.hasOwnProperty.apply(X.options,["projectId"]))throw new _e(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new da(X.options.projectId,ce)}(T,_),T);return C=Object.assign({useFetchStreams:u},C),V._setSettings(C),V},"PUBLIC").setMultipleInstances(!0)),(0,Xe.KO)(Ht,"4.6.3",o),(0,Xe.KO)(Ht,"4.6.3","esm2017")}();var g1=ie(1985),g_=ie(6354),md=function(){return md=Object.assign||function(o){for(var u,f=1,_=arguments.length;f<_;f++)for(var C in u=arguments[f])Object.prototype.hasOwnProperty.call(u,C)&&(o[C]=u[C]);return o},md.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var m1={includeMetadataChanges:!1};function lf(p,o){return void 0===o&&(o={}),function Z0(p){return function m_(p,o){return void 0===o&&(o=m1),new g1.c(function(u){var f=function c_(p,...o){var u,f,_;p=(0,ve.Ku)(p);let C={includeMetadataChanges:!1,source:"default"},T=0;"object"!=typeof o[T]||Yf(o[T])||(C=o[T],T++);const V={includeMetadataChanges:C.includeMetadataChanges,source:C.source};if(Yf(o[T])){const we=o[T];o[T]=null===(u=we.next)||void 0===u?void 0:u.bind(we),o[T+1]=null===(f=we.error)||void 0===f?void 0:f.bind(we),o[T+2]=null===(_=we.complete)||void 0===_?void 0:_.bind(we)}let G,X,ce;if(p instanceof Ti)X=kr(p.firestore,$i),ce=Go(p._key.path),G={next:we=>{o[T]&&o[T](dh(X,p,we))},error:o[T+1],complete:o[T+2]};else{const we=kr(p,os);X=kr(we.firestore,$i),ce=we._query;const Le=new Bs(X);G={next:ht=>{o[T]&&o[T](new ah(X,Le,we,ht))},error:o[T+1],complete:o[T+2]},B0(p._query)}return function(Le,ht,Ut,Jt){const Gt=new No(Jt),Mn=new jh(ht,Gt,Ut);return Le.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return Vh(yield Yd(Le),Mn)})),()=>{Gt.$a(),Le.asyncQueue.enqueueAndForget((0,Ee.A)(function*(){return Gi(yield Yd(Le),Mn)}))}}(ko(X),ce,V,G)}(p,o,{next:u.next.bind(u),error:u.error.bind(u),complete:u.complete.bind(u)});return{unsubscribe:f}})}(p,{includeMetadataChanges:!0}).pipe((0,g_.T)(function(o){return o.docs}))}(p).pipe((0,g_.T)(function(u){return u.map(function(f){return function v_(p,o){var u;void 0===o&&(o={});var f=p.data(o);return p.exists()&&"object"==typeof f&&null!==f&&o.idField?md(md({},f),((u={})[o.idField]=p.id,u)):f}(f,o)})}))}class df{constructor(o){return o}}const Vg="firestore",Bg=new x.nKC("angularfire2.firestore-instances");function b_(p){return(o,u)=>{const f=o.runOutsideAngular(()=>p(u));return new df(f)}}const C1={provide:class ev{constructor(){return(0,D.CA)(Vg)}},deps:[[new x.Xx1,Bg]]},w1={provide:df,useFactory:function A_(p,o){const u=(0,D.lR)(Vg,p,o);return u&&new df(u)},deps:[[new x.Xx1,Bg],L.XU]};function tv(p,...o){return(0,Ze.KO)("angularfire",D.xv.full,"fst"),(0,x.EmA)([w1,C1,{provide:Bg,useFactory:b_(p),multi:!0,deps:[x.SKi,x.zZn,D.u0,L.gL,[new x.Xx1,Ue.DF],[new x.Xx1,D.Jv],...o]}])}const rv=(0,D.S3)(lf,!0),R1=(0,D.S3)(lh,!0),Ip=(0,D.S3)(rp,!0),c=(0,D.S3)(a_,!0),y=(0,D.S3)(Qf,!0),Ne=(0,D.S3)(W0,!0),Ft=(0,D.S3)(o_,!0),pn=(0,D.S3)(Xm,!0),N1=(0,D.S3)(U0,!0),bE=(0,D.S3)(gp,!0),F1=(0,D.S3)(uh,!0),jg=(0,D.S3)(c1,!0)},3586:(yn,wt,ie)=>{ie.d(wt,{xv:()=>Dt,u0:()=>Sn,Jv:()=>At,CA:()=>Lt,lR:()=>_t,S3:()=>Fe});var D=ie(3953),x=ie(2214),L=ie(8359);class Ue extends L.yU{constructor(_e,mt){super()}schedule(_e,mt=0){return this}}const Ze={setInterval(he,_e,...mt){const{delegate:zt}=Ze;return zt?.setInterval?zt.setInterval(he,_e,...mt):setInterval(he,_e,...mt)},clearInterval(he){const{delegate:_e}=Ze;return(_e?.clearInterval||clearInterval)(he)},delegate:void 0};var Ee=ie(7908);class Xe extends Ue{constructor(_e,mt){super(_e,mt),this.scheduler=_e,this.work=mt,this.pending=!1}schedule(_e,mt=0){var zt;if(this.closed)return this;this.state=_e;const jn=this.id,en=this.scheduler;return null!=jn&&(this.id=this.recycleAsyncId(en,jn,mt)),this.pending=!0,this.delay=mt,this.id=null!==(zt=this.id)&&void 0!==zt?zt:this.requestAsyncId(en,this.id,mt),this}requestAsyncId(_e,mt,zt=0){return Ze.setInterval(_e.flush.bind(_e,this),zt)}recycleAsyncId(_e,mt,zt=0){if(null!=zt&&this.delay===zt&&!1===this.pending)return mt;null!=mt&&Ze.clearInterval(mt)}execute(_e,mt){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const zt=this._execute(_e,mt);if(zt)return zt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,mt){let jn,zt=!1;try{this.work(_e)}catch(en){zt=!0,jn=en||new Error("Scheduled action threw falsy error")}if(zt)return this.unsubscribe(),jn}unsubscribe(){if(!this.closed){const{id:_e,scheduler:mt}=this,{actions:zt}=mt;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ee.o)(zt,this),null!=_e&&(this.id=this.recycleAsyncId(mt,_e,null)),this.delay=null,super.unsubscribe()}}}const it={now:()=>(it.delegate||Date).now(),delegate:void 0};class ve{constructor(_e,mt=ve.now){this.schedulerActionCtor=_e,this.now=mt}schedule(_e,mt=0,zt){return new this.schedulerActionCtor(this,_e).schedule(zt,mt)}}ve.now=it.now;class Ie extends ve{constructor(_e,mt=ve.now){super(_e,mt),this.actions=[],this._active=!1}flush(_e){const{actions:mt}=this;if(this._active)return void mt.push(_e);let zt;this._active=!0;do{if(zt=_e.execute(_e.state,_e.delay))break}while(_e=mt.shift());if(this._active=!1,zt){for(;_e=mt.shift();)_e.unsubscribe();throw zt}}}const pt=new class Oe extends Ie{}(class Et extends Xe{constructor(_e,mt){super(_e,mt),this.scheduler=_e,this.work=mt}schedule(_e,mt=0){return mt>0?super.schedule(_e,mt):(this.delay=mt,this.state=_e,this.scheduler.flush(this),this)}execute(_e,mt){return mt>0||this.closed?super.execute(_e,mt):this._execute(_e,mt)}requestAsyncId(_e,mt,zt=0){return null!=zt&&zt>0||null==zt&&this.delay>0?super.requestAsyncId(_e,mt,zt):(_e.flush(this),0)}}),Ct=new Ie(Xe);var Bt=ie(1985),Kt=ie(8141),An=ie(6745),Jn=ie(941);const Dt=new D.RxE("ANGULARFIRE2_VERSION");function _t(he,_e,mt){if(_e){if(1===_e.length)return _e[0];const en=_e.filter(qn=>qn.app===mt);if(1===en.length)return en[0]}return mt.container.getProvider(he).getImmediate({optional:!0})}const Lt=(he,_e)=>{const mt=_e?[_e]:(0,x.Dk)(),zt=[];return mt.forEach(jn=>{jn.container.getProvider(he).instances.forEach(qn=>{zt.includes(qn)||zt.push(qn)})}),zt};class At{constructor(){return Lt(Ht)}}const Ht="app-check";function ke(){}class bn{zone;delegate;constructor(_e,mt=pt){this.zone=_e,this.delegate=mt}now(){return this.delegate.now()}schedule(_e,mt,zt){const jn=this.zone;return this.delegate.schedule(function(qn){jn.runGuarded(()=>{_e.apply(this,[qn])})},mt,zt)}}class _n{zone;task=null;constructor(_e){this.zone=_e}call(_e,mt){const zt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ke,{},ke,ke)),mt.pipe((0,Kt.M)({next:zt,complete:zt,error:zt})).subscribe(_e).add(zt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Sn=(()=>{class he{ngZone;outsideAngular;insideAngular;constructor(mt){this.ngZone=mt,this.outsideAngular=mt.runOutsideAngular(()=>new bn(Zone.current)),this.insideAngular=mt.run(()=>new bn(Zone.current,Ct)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(zt){return new(zt||he)(D.KVO(D.SKi))};static \u0275prov=D.jDH({token:he,factory:he.\u0275fac,providedIn:"root"})}return he})();function sr(){const he=globalThis.\u0275AngularFireScheduler;if(!he)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return he}function bt(he){return sr().ngZone.run(()=>he())}function Pe(he){return function je(he){return function(mt){return(mt=mt.lift(new _n(he.ngZone))).pipe((0,An._)(he.outsideAngular),(0,Jn.Q)(he.insideAngular))}}(sr())(he)}const xt=(he,_e)=>function(){const zt=arguments;return _e&&setTimeout(()=>{"scheduled"===_e.state&&_e.invoke()},10),bt(()=>he.apply(void 0,zt))},Fe=(he,_e)=>function(){let mt;const zt=arguments;for(let en=0;en<arguments.length;en++)"function"==typeof zt[en]&&(_e&&(mt||=bt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ke,{},ke,ke))),zt[en]=xt(zt[en],mt));const jn=function Se(he){return sr().ngZone.runOutsideAngular(()=>he())}(()=>he.apply(this,zt));if(!_e){if(jn instanceof Bt.c){const en=sr();return jn.pipe((0,An._)(en.outsideAngular),(0,Jn.Q)(en.insideAngular))}return bt(()=>jn)}return jn instanceof Bt.c?jn.pipe(Pe):jn instanceof Promise?bt(()=>new Promise((en,qn)=>jn.then(jr=>bt(()=>en(jr)),jr=>bt(()=>qn(jr))))):"function"==typeof jn&&mt?function(){return setTimeout(()=>{mt&&"scheduled"===mt.state&&mt.invoke()},10),jn.apply(this,arguments)}:bt(()=>jn)}},4341:(yn,wt,ie)=>{ie.d(wt,{me:()=>It,ok:()=>Yr,MJ:()=>js,l_:()=>ls,JD:()=>Uo,j4:()=>fo,YN:()=>Vu,BC:()=>Qn,cb:()=>un,xH:()=>Lu,X1:()=>cl,wz:()=>Eo,k0:()=>bn,qT:()=>Hs,y7:()=>hr});var D=ie(3953),x=ie(177),L=ie(8455),Ue=ie(1985),Ze=ie(3073),Ee=ie(8750),Xe=ie(3794),Et=ie(4360),it=ie(6450),ve=ie(8496),Oe=ie(1413),pt=ie(6354);let Be=(()=>{class Y{constructor(H,se){this._renderer=H,this._elementRef=se,this.onChange=Te=>{},this.onTouched=()=>{}}setProperty(H,se){this._renderer.setProperty(this._elementRef.nativeElement,H,se)}registerOnTouched(H){this.onTouched=H}registerOnChange(H){this.onChange=H}setDisabledState(H){this.setProperty("disabled",H)}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(D.sFG),D.rXU(D.aKT))};static#t=this.\u0275dir=D.FsC({type:Y})}return Y})(),Ct=(()=>{class Y extends Be{static#e=this.\u0275fac=(()=>{let H;return function(Te){return(H||(H=D.xGo(Y)))(Te||Y)}})();static#t=this.\u0275dir=D.FsC({type:Y,features:[D.Vt3]})}return Y})();const kt=new D.nKC(""),An={provide:kt,useExisting:(0,D.Rfq)(()=>It),multi:!0},Dt=new D.nKC("");let It=(()=>{class Y extends Be{constructor(H,se,Te){super(H,se),this._compositionMode=Te,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Jn(){const Y=(0,x.QT)()?(0,x.QT)().getUserAgent():"";return/android (\d+)/.test(Y.toLowerCase())}())}writeValue(H){this.setProperty("value",H??"")}_handleInput(H){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(H)}_compositionStart(){this._composing=!0}_compositionEnd(H){this._composing=!1,this._compositionMode&&this.onChange(H)}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(D.sFG),D.rXU(D.aKT),D.rXU(Dt,8))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(se,Te){1&se&&D.bIt("input",function($n){return Te._handleInput($n.target.value)})("blur",function(){return Te.onTouched()})("compositionstart",function(){return Te._compositionStart()})("compositionend",function($n){return Te._compositionEnd($n.target.value)})},features:[D.Jv_([An]),D.Vt3]})}return Y})();function _t(Y){return null==Y||("string"==typeof Y||Array.isArray(Y))&&0===Y.length}function Lt(Y){return null!=Y&&"number"==typeof Y.length}const At=new D.nKC(""),Ht=new D.nKC(""),ke=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bn{static min(Z){return function _n(Y){return Z=>{if(_t(Z.value)||_t(Y))return null;const H=parseFloat(Z.value);return!isNaN(H)&&H<Y?{min:{min:Y,actual:Z.value}}:null}}(Z)}static max(Z){return function Sn(Y){return Z=>{if(_t(Z.value)||_t(Y))return null;const H=parseFloat(Z.value);return!isNaN(H)&&H>Y?{max:{max:Y,actual:Z.value}}:null}}(Z)}static required(Z){return function sr(Y){return _t(Y.value)?{required:!0}:null}(Z)}static requiredTrue(Z){return function Se(Y){return!0===Y.value?null:{required:!0}}(Z)}static email(Z){return function bt(Y){return _t(Y.value)||ke.test(Y.value)?null:{email:!0}}(Z)}static minLength(Z){return function gn(Y){return Z=>_t(Z.value)||!Lt(Z.value)?null:Z.value.length<Y?{minlength:{requiredLength:Y,actualLength:Z.value.length}}:null}(Z)}static maxLength(Z){return function er(Y){return Z=>Lt(Z.value)&&Z.value.length>Y?{maxlength:{requiredLength:Y,actualLength:Z.value.length}}:null}(Z)}static pattern(Z){return function Pe(Y){if(!Y)return je;let Z,H;return"string"==typeof Y?(H="","^"!==Y.charAt(0)&&(H+="^"),H+=Y,"$"!==Y.charAt(Y.length-1)&&(H+="$"),Z=new RegExp(H)):(H=Y.toString(),Z=Y),se=>{if(_t(se.value))return null;const Te=se.value;return Z.test(Te)?null:{pattern:{requiredPattern:H,actualValue:Te}}}}(Z)}static nullValidator(Z){return null}static compose(Z){return jn(Z)}static composeAsync(Z){return qn(Z)}}function je(Y){return null}function xt(Y){return null!=Y}function Fe(Y){return(0,D.jNT)(Y)?(0,L.H)(Y):Y}function he(Y){let Z={};return Y.forEach(H=>{Z=null!=H?{...Z,...H}:Z}),0===Object.keys(Z).length?null:Z}function _e(Y,Z){return Z.map(H=>H(Y))}function zt(Y){return Y.map(Z=>function mt(Y){return!Y.validate}(Z)?Z:H=>Z.validate(H))}function jn(Y){if(!Y)return null;const Z=Y.filter(xt);return 0==Z.length?null:function(H){return he(_e(H,Z))}}function en(Y){return null!=Y?jn(zt(Y)):null}function qn(Y){if(!Y)return null;const Z=Y.filter(xt);return 0==Z.length?null:function(H){return function Ie(...Y){const Z=(0,Xe.ms)(Y),{args:H,keys:se}=(0,Ze.D)(Y),Te=new Ue.c(Ot=>{const{length:$n}=H;if(!$n)return void Ot.complete();const $o=new Array($n);let va=$n,Ro=$n;for(let zs=0;zs<$n;zs++){let Dn=!1;(0,Ee.Tg)(H[zs]).subscribe((0,Et._)(Ot,gu=>{Dn||(Dn=!0,Ro--),$o[zs]=gu},()=>va--,void 0,()=>{(!va||!Dn)&&(Ro||Ot.next(se?(0,ve.e)(se,$o):$o),Ot.complete())}))}});return Z?Te.pipe((0,it.I)(Z)):Te}(_e(H,Z).map(Fe)).pipe((0,pt.T)(he))}}function jr(Y){return null!=Y?qn(zt(Y)):null}function to(Y,Z){return null===Y?[Z]:Array.isArray(Y)?[...Y,Z]:[Y,Z]}function lr(Y){return Y._rawValidators}function qr(Y){return Y._rawAsyncValidators}function Tn(Y){return Y?Array.isArray(Y)?Y:[Y]:[]}function pr(Y,Z){return Array.isArray(Y)?Y.includes(Z):Y===Z}function oi(Y,Z){const H=Tn(Z);return Tn(Y).forEach(Te=>{pr(H,Te)||H.push(Te)}),H}function wn(Y,Z){return Tn(Z).filter(H=>!pr(Y,H))}class Br{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Z){this._rawValidators=Z||[],this._composedValidatorFn=en(this._rawValidators)}_setAsyncValidators(Z){this._rawAsyncValidators=Z||[],this._composedAsyncValidatorFn=jr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Z){this._onDestroyCallbacks.push(Z)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Z=>Z()),this._onDestroyCallbacks=[]}reset(Z=void 0){this.control&&this.control.reset(Z)}hasError(Z,H){return!!this.control&&this.control.hasError(Z,H)}getError(Z,H){return this.control?this.control.getError(Z,H):null}}class si extends Br{get formDirective(){return null}get path(){return null}}class Kn extends Br{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cn{constructor(Z){this._cd=Z}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Qn=(()=>{class Y extends cn{constructor(H){super(H)}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(Kn,2))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(se,Te){2&se&&D.AVh("ng-untouched",Te.isUntouched)("ng-touched",Te.isTouched)("ng-pristine",Te.isPristine)("ng-dirty",Te.isDirty)("ng-valid",Te.isValid)("ng-invalid",Te.isInvalid)("ng-pending",Te.isPending)},features:[D.Vt3]})}return Y})(),un=(()=>{class Y extends cn{constructor(H){super(H)}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(si,10))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(se,Te){2&se&&D.AVh("ng-untouched",Te.isUntouched)("ng-touched",Te.isTouched)("ng-pristine",Te.isPristine)("ng-dirty",Te.isDirty)("ng-valid",Te.isValid)("ng-invalid",Te.isInvalid)("ng-pending",Te.isPending)("ng-submitted",Te.isSubmitted)},features:[D.Vt3]})}return Y})();const be="VALID",Qe="INVALID",le="PENDING",ge="DISABLED";class De{}class lt extends De{constructor(Z,H){super(),this.value=Z,this.source=H}}class Ke extends De{constructor(Z,H){super(),this.pristine=Z,this.source=H}}class Xt extends De{constructor(Z,H){super(),this.touched=Z,this.source=H}}class xn extends De{constructor(Z,H){super(),this.status=Z,this.source=H}}class Hn extends De{constructor(Z){super(),this.source=Z}}class Kr extends De{constructor(Z){super(),this.source=Z}}function mr(Y){return(Hr(Y)?Y.validators:Y)||null}function Yn(Y,Z){return(Hr(Z)?Z.asyncValidators:Y)||null}function Hr(Y){return null!=Y&&!Array.isArray(Y)&&"object"==typeof Y}function ci(Y,Z,H){const se=Y.controls;if(!(Z?Object.keys(se):se).length)throw new D.wOt(1e3,"");if(!se[H])throw new D.wOt(1001,"")}function Us(Y,Z,H){Y._forEachChild((se,Te)=>{if(void 0===H[Te])throw new D.wOt(1002,"")})}class yo{constructor(Z,H){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new Oe.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(Z),this._assignAsyncValidators(H)}get validator(){return this._composedValidatorFn}set validator(Z){this._rawValidators=this._composedValidatorFn=Z}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Z){this._rawAsyncValidators=this._composedAsyncValidatorFn=Z}get parent(){return this._parent}get valid(){return this.status===be}get invalid(){return this.status===Qe}get pending(){return this.status==le}get disabled(){return this.status===ge}get enabled(){return this.status!==ge}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Z){this._assignValidators(Z)}setAsyncValidators(Z){this._assignAsyncValidators(Z)}addValidators(Z){this.setValidators(oi(Z,this._rawValidators))}addAsyncValidators(Z){this.setAsyncValidators(oi(Z,this._rawAsyncValidators))}removeValidators(Z){this.setValidators(wn(Z,this._rawValidators))}removeAsyncValidators(Z){this.setAsyncValidators(wn(Z,this._rawAsyncValidators))}hasValidator(Z){return pr(this._rawValidators,Z)}hasAsyncValidator(Z){return pr(this._rawAsyncValidators,Z)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Z={}){const H=!1===this.touched;this.touched=!0;const se=Z.sourceControl??this;this._parent&&!Z.onlySelf&&this._parent.markAsTouched({...Z,sourceControl:se}),H&&!1!==Z.emitEvent&&this._events.next(new Xt(!0,se))}markAllAsTouched(Z={}){this.markAsTouched({onlySelf:!0,emitEvent:Z.emitEvent,sourceControl:this}),this._forEachChild(H=>H.markAllAsTouched(Z))}markAsUntouched(Z={}){const H=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const se=Z.sourceControl??this;this._forEachChild(Te=>{Te.markAsUntouched({onlySelf:!0,emitEvent:Z.emitEvent,sourceControl:se})}),this._parent&&!Z.onlySelf&&this._parent._updateTouched(Z,se),H&&!1!==Z.emitEvent&&this._events.next(new Xt(!1,se))}markAsDirty(Z={}){const H=!0===this.pristine;this.pristine=!1;const se=Z.sourceControl??this;this._parent&&!Z.onlySelf&&this._parent.markAsDirty({...Z,sourceControl:se}),H&&!1!==Z.emitEvent&&this._events.next(new Ke(!1,se))}markAsPristine(Z={}){const H=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const se=Z.sourceControl??this;this._forEachChild(Te=>{Te.markAsPristine({onlySelf:!0,emitEvent:Z.emitEvent})}),this._parent&&!Z.onlySelf&&this._parent._updatePristine(Z,se),H&&!1!==Z.emitEvent&&this._events.next(new Ke(!0,se))}markAsPending(Z={}){this.status=le;const H=Z.sourceControl??this;!1!==Z.emitEvent&&(this._events.next(new xn(this.status,H)),this.statusChanges.emit(this.status)),this._parent&&!Z.onlySelf&&this._parent.markAsPending({...Z,sourceControl:H})}disable(Z={}){const H=this._parentMarkedDirty(Z.onlySelf);this.status=ge,this.errors=null,this._forEachChild(Te=>{Te.disable({...Z,onlySelf:!0})}),this._updateValue();const se=Z.sourceControl??this;!1!==Z.emitEvent&&(this._events.next(new lt(this.value,se)),this._events.next(new xn(this.status,se)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Z,skipPristineCheck:H},this),this._onDisabledChange.forEach(Te=>Te(!0))}enable(Z={}){const H=this._parentMarkedDirty(Z.onlySelf);this.status=be,this._forEachChild(se=>{se.enable({...Z,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Z.emitEvent}),this._updateAncestors({...Z,skipPristineCheck:H},this),this._onDisabledChange.forEach(se=>se(!1))}_updateAncestors(Z,H){this._parent&&!Z.onlySelf&&(this._parent.updateValueAndValidity(Z),Z.skipPristineCheck||this._parent._updatePristine({},H),this._parent._updateTouched({},H))}setParent(Z){this._parent=Z}getRawValue(){return this.value}updateValueAndValidity(Z={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const se=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===be||this.status===le)&&this._runAsyncValidator(se,Z.emitEvent)}const H=Z.sourceControl??this;!1!==Z.emitEvent&&(this._events.next(new lt(this.value,H)),this._events.next(new xn(this.status,H)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Z.onlySelf&&this._parent.updateValueAndValidity({...Z,sourceControl:H})}_updateTreeValidity(Z={emitEvent:!0}){this._forEachChild(H=>H._updateTreeValidity(Z)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Z.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ge:be}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Z,H){if(this.asyncValidator){this.status=le,this._hasOwnPendingAsyncValidator={emitEvent:!1!==H};const se=Fe(this.asyncValidator(this));this._asyncValidationSubscription=se.subscribe(Te=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(Te,{emitEvent:H,shouldHaveEmitted:Z})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const Z=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,Z}return!1}setErrors(Z,H={}){this.errors=Z,this._updateControlsErrors(!1!==H.emitEvent,this,H.shouldHaveEmitted)}get(Z){let H=Z;return null==H||(Array.isArray(H)||(H=H.split(".")),0===H.length)?null:H.reduce((se,Te)=>se&&se._find(Te),this)}getError(Z,H){const se=H?this.get(H):this;return se&&se.errors?se.errors[Z]:null}hasError(Z,H){return!!this.getError(Z,H)}get root(){let Z=this;for(;Z._parent;)Z=Z._parent;return Z}_updateControlsErrors(Z,H,se){this.status=this._calculateStatus(),Z&&this.statusChanges.emit(this.status),(Z||se)&&this._events.next(new xn(this.status,H)),this._parent&&this._parent._updateControlsErrors(Z,H,se)}_initObservables(){this.valueChanges=new D.bkB,this.statusChanges=new D.bkB}_calculateStatus(){return this._allControlsDisabled()?ge:this.errors?Qe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(le)?le:this._anyControlsHaveStatus(Qe)?Qe:be}_anyControlsHaveStatus(Z){return this._anyControls(H=>H.status===Z)}_anyControlsDirty(){return this._anyControls(Z=>Z.dirty)}_anyControlsTouched(){return this._anyControls(Z=>Z.touched)}_updatePristine(Z,H){const se=!this._anyControlsDirty(),Te=this.pristine!==se;this.pristine=se,this._parent&&!Z.onlySelf&&this._parent._updatePristine(Z,H),Te&&this._events.next(new Ke(this.pristine,H))}_updateTouched(Z={},H){this.touched=this._anyControlsTouched(),this._events.next(new Xt(this.touched,H)),this._parent&&!Z.onlySelf&&this._parent._updateTouched(Z,H)}_registerOnCollectionChange(Z){this._onCollectionChange=Z}_setUpdateStrategy(Z){Hr(Z)&&null!=Z.updateOn&&(this._updateOn=Z.updateOn)}_parentMarkedDirty(Z){return!Z&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Z){return null}_assignValidators(Z){this._rawValidators=Array.isArray(Z)?Z.slice():Z,this._composedValidatorFn=function vi(Y){return Array.isArray(Y)?en(Y):Y||null}(this._rawValidators)}_assignAsyncValidators(Z){this._rawAsyncValidators=Array.isArray(Z)?Z.slice():Z,this._composedAsyncValidatorFn=function Li(Y){return Array.isArray(Y)?jr(Y):Y||null}(this._rawAsyncValidators)}}class no extends yo{constructor(Z,H,se){super(mr(H),Yn(se,H)),this.controls=Z,this._initObservables(),this._setUpdateStrategy(H),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Z,H){return this.controls[Z]?this.controls[Z]:(this.controls[Z]=H,H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange),H)}addControl(Z,H,se={}){this.registerControl(Z,H),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}removeControl(Z,H={}){this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),delete this.controls[Z],this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}setControl(Z,H,se={}){this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),delete this.controls[Z],H&&this.registerControl(Z,H),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}contains(Z){return this.controls.hasOwnProperty(Z)&&this.controls[Z].enabled}setValue(Z,H={}){Us(this,0,Z),Object.keys(Z).forEach(se=>{ci(this,!0,se),this.controls[se].setValue(Z[se],{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H)}patchValue(Z,H={}){null!=Z&&(Object.keys(Z).forEach(se=>{const Te=this.controls[se];Te&&Te.patchValue(Z[se],{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H))}reset(Z={},H={}){this._forEachChild((se,Te)=>{se.reset(Z?Z[Te]:null,{onlySelf:!0,emitEvent:H.emitEvent})}),this._updatePristine(H,this),this._updateTouched(H,this),this.updateValueAndValidity(H)}getRawValue(){return this._reduceChildren({},(Z,H,se)=>(Z[se]=H.getRawValue(),Z))}_syncPendingControls(){let Z=this._reduceChildren(!1,(H,se)=>!!se._syncPendingControls()||H);return Z&&this.updateValueAndValidity({onlySelf:!0}),Z}_forEachChild(Z){Object.keys(this.controls).forEach(H=>{const se=this.controls[H];se&&Z(se,H)})}_setUpControls(){this._forEachChild(Z=>{Z.setParent(this),Z._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Z){for(const[H,se]of Object.entries(this.controls))if(this.contains(H)&&Z(se))return!0;return!1}_reduceValue(){return this._reduceChildren({},(H,se,Te)=>((se.enabled||this.disabled)&&(H[Te]=se.value),H))}_reduceChildren(Z,H){let se=Z;return this._forEachChild((Te,Ot)=>{se=H(se,Te,Ot)}),se}_allControlsDisabled(){for(const Z of Object.keys(this.controls))if(this.controls[Z].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Z){return this.controls.hasOwnProperty(Z)?this.controls[Z]:null}}class du extends no{}const We=new D.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>St}),St="always";function Bn(Y,Z,H=St){Mr(Y,Z),Z.valueAccessor.writeValue(Y.value),(Y.disabled||"always"===H)&&Z.valueAccessor.setDisabledState?.(Y.disabled),function Vo(Y,Z){Z.valueAccessor.registerOnChange(H=>{Y._pendingValue=H,Y._pendingChange=!0,Y._pendingDirty=!0,"change"===Y.updateOn&&$a(Y,Z)})}(Y,Z),function bs(Y,Z){const H=(se,Te)=>{Z.valueAccessor.writeValue(se),Te&&Z.viewToModelUpdate(se)};Y.registerOnChange(H),Z._registerOnDestroy(()=>{Y._unregisterOnChange(H)})}(Y,Z),function Xr(Y,Z){Z.valueAccessor.registerOnTouched(()=>{Y._pendingTouched=!0,"blur"===Y.updateOn&&Y._pendingChange&&$a(Y,Z),"submit"!==Y.updateOn&&Y.markAsTouched()})}(Y,Z),function Rr(Y,Z){if(Z.valueAccessor.setDisabledState){const H=se=>{Z.valueAccessor.setDisabledState(se)};Y.registerOnDisabledChange(H),Z._registerOnDestroy(()=>{Y._unregisterOnDisabledChange(H)})}}(Y,Z)}function On(Y,Z,H=!0){const se=()=>{};Z.valueAccessor&&(Z.valueAccessor.registerOnChange(se),Z.valueAccessor.registerOnTouched(se)),uo(Y,Z),Y&&(Z._invokeOnDestroyCallbacks(),Y._registerOnCollectionChange(()=>{}))}function Nn(Y,Z){Y.forEach(H=>{H.registerOnValidatorChange&&H.registerOnValidatorChange(Z)})}function Mr(Y,Z){const H=lr(Y);null!==Z.validator?Y.setValidators(to(H,Z.validator)):"function"==typeof H&&Y.setValidators([H]);const se=qr(Y);null!==Z.asyncValidator?Y.setAsyncValidators(to(se,Z.asyncValidator)):"function"==typeof se&&Y.setAsyncValidators([se]);const Te=()=>Y.updateValueAndValidity();Nn(Z._rawValidators,Te),Nn(Z._rawAsyncValidators,Te)}function uo(Y,Z){let H=!1;if(null!==Y){if(null!==Z.validator){const Te=lr(Y);if(Array.isArray(Te)&&Te.length>0){const Ot=Te.filter($n=>$n!==Z.validator);Ot.length!==Te.length&&(H=!0,Y.setValidators(Ot))}}if(null!==Z.asyncValidator){const Te=qr(Y);if(Array.isArray(Te)&&Te.length>0){const Ot=Te.filter($n=>$n!==Z.asyncValidator);Ot.length!==Te.length&&(H=!0,Y.setAsyncValidators(Ot))}}}const se=()=>{};return Nn(Z._rawValidators,se),Nn(Z._rawAsyncValidators,se),H}function $a(Y,Z){Y._pendingDirty&&Y.markAsDirty(),Y.setValue(Y._pendingValue,{emitModelToViewChange:!1}),Z.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1}function lo(Y,Z){if(!Y.hasOwnProperty("model"))return!1;const H=Y.model;return!!H.isFirstChange()||!Object.is(Z,H.currentValue)}function ro(Y,Z){if(!Z)return null;let H,se,Te;return Array.isArray(Z),Z.forEach(Ot=>{Ot.constructor===It?H=Ot:function To(Y){return Object.getPrototypeOf(Y.constructor)===Ct}(Ot)?se=Ot:Te=Ot}),Te||se||H||null}function qi(Y,Z){const H=Y.indexOf(Z);H>-1&&Y.splice(H,1)}function Ri(Y){return"object"==typeof Y&&null!==Y&&2===Object.keys(Y).length&&"value"in Y&&"disabled"in Y}Promise.resolve();const js=class extends yo{constructor(Z=null,H,se){super(mr(H),Yn(se,H)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Z),this._setUpdateStrategy(H),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hr(H)&&(H.nonNullable||H.initialValueIsDefault)&&(this.defaultValue=Ri(Z)?Z.value:Z)}setValue(Z,H={}){this.value=this._pendingValue=Z,this._onChange.length&&!1!==H.emitModelToViewChange&&this._onChange.forEach(se=>se(this.value,!1!==H.emitViewToModelChange)),this.updateValueAndValidity(H)}patchValue(Z,H={}){this.setValue(Z,H)}reset(Z=this.defaultValue,H={}){this._applyFormState(Z),this.markAsPristine(H),this.markAsUntouched(H),this.setValue(this.value,H),this._pendingChange=!1}_updateValue(){}_anyControls(Z){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Z){this._onChange.push(Z)}_unregisterOnChange(Z){qi(this._onChange,Z)}registerOnDisabledChange(Z){this._onDisabledChange.push(Z)}_unregisterOnDisabledChange(Z){qi(this._onDisabledChange,Z)}_forEachChild(Z){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Z){Ri(Z)?(this.value=this._pendingValue=Z.value,Z.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Z}};Promise.resolve();let Hs=(()=>{class Y{static#e=this.\u0275fac=function(se){return new(se||Y)};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return Y})();const Hi=new D.nKC(""),Gs={provide:Kn,useExisting:(0,D.Rfq)(()=>ls)};let ls=(()=>{class Y extends Kn{set isDisabled(H){}static#e=this._ngModelWarningSentOnce=!1;constructor(H,se,Te,Ot,$n){super(),this._ngModelWarningConfig=Ot,this.callSetDisabledState=$n,this.update=new D.bkB,this._ngModelWarningSent=!1,this._setValidators(H),this._setAsyncValidators(se),this.valueAccessor=ro(0,Te)}ngOnChanges(H){if(this._isControlChanged(H)){const se=H.form.previousValue;se&&On(se,this,!1),Bn(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}lo(H,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&On(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}_isControlChanged(H){return H.hasOwnProperty("form")}static#t=this.\u0275fac=function(se){return new(se||Y)(D.rXU(At,10),D.rXU(Ht,10),D.rXU(kt,10),D.rXU(Hi,8),D.rXU(We,8))};static#n=this.\u0275dir=D.FsC({type:Y,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[D.Jv_([Gs]),D.Vt3,D.OA$]})}return Y})();const hu={provide:si,useExisting:(0,D.Rfq)(()=>fo)};let fo=(()=>{class Y extends si{constructor(H,se,Te){super(),this.callSetDisabledState=Te,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new D.bkB,this._setValidators(H),this._setAsyncValidators(se)}ngOnChanges(H){this._checkFormPresent(),H.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(uo(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(H){const se=this.form.get(H.path);return Bn(se,H,this.callSetDisabledState),se.updateValueAndValidity({emitEvent:!1}),this.directives.push(H),se}getControl(H){return this.form.get(H.path)}removeControl(H){On(H.control||null,H,!1),function Ar(Y,Z){const H=Y.indexOf(Z);H>-1&&Y.splice(H,1)}(this.directives,H)}addFormGroup(H){this._setUpFormContainer(H)}removeFormGroup(H){this._cleanUpFormContainer(H)}getFormGroup(H){return this.form.get(H.path)}addFormArray(H){this._setUpFormContainer(H)}removeFormArray(H){this._cleanUpFormContainer(H)}getFormArray(H){return this.form.get(H.path)}updateModel(H,se){this.form.get(H.path).setValue(se)}onSubmit(H){return this.submitted=!0,function Zo(Y,Z){Y._syncPendingControls(),Z.forEach(H=>{const se=H.control;"submit"===se.updateOn&&se._pendingChange&&(H.viewToModelUpdate(se._pendingValue),se._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(H),this.form._events.next(new Hn(this.control)),"dialog"===H?.target?.method}onReset(){this.resetForm()}resetForm(H=void 0){this.form.reset(H),this.submitted=!1,this.form._events.next(new Kr(this.form))}_updateDomValue(){this.directives.forEach(H=>{const se=H.control,Te=this.form.get(H.path);se!==Te&&(On(se||null,H),(Y=>Y instanceof js)(Te)&&(Bn(Te,H,this.callSetDisabledState),H.control=Te))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(H){const se=this.form.get(H.path);(function fu(Y,Z){Mr(Y,Z)})(se,H),se.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(H){if(this.form){const se=this.form.get(H.path);se&&function ca(Y,Z){return uo(Y,Z)}(se,H)&&se.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mr(this.form,this),this._oldForm&&uo(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(At,10),D.rXU(Ht,10),D.rXU(We,8))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["","formGroup",""]],hostBindings:function(se,Te){1&se&&D.bIt("submit",function($n){return Te.onSubmit($n)})("reset",function(){return Te.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D.Jv_([hu]),D.Vt3,D.OA$]})}return Y})();const Wa={provide:Kn,useExisting:(0,D.Rfq)(()=>Uo)};let Uo=(()=>{class Y extends Kn{set isDisabled(H){}static#e=this._ngModelWarningSentOnce=!1;constructor(H,se,Te,Ot,$n){super(),this._ngModelWarningConfig=$n,this._added=!1,this.name=null,this.update=new D.bkB,this._ngModelWarningSent=!1,this._parent=H,this._setValidators(se),this._setAsyncValidators(Te),this.valueAccessor=ro(0,Ot)}ngOnChanges(H){this._added||this._setUpControl(),lo(H,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}get path(){return function tn(Y,Z){return[...Z.path,Y]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(se){return new(se||Y)(D.rXU(si,13),D.rXU(At,10),D.rXU(Ht,10),D.rXU(kt,10),D.rXU(Hi,8))};static#n=this.\u0275dir=D.FsC({type:Y,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[D.Jv_([Wa]),D.Vt3,D.OA$]})}return Y})();const ho={provide:kt,useExisting:(0,D.Rfq)(()=>Eo),multi:!0};function Lc(Y,Z){return null==Y?`${Z}`:(Z&&"object"==typeof Z&&(Z="Object"),`${Y}: ${Z}`.slice(0,50))}let Eo=(()=>{class Y extends Ct{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(H){this._compareWith=H}writeValue(H){this.value=H;const Te=Lc(this._getOptionId(H),H);this.setProperty("value",Te)}registerOnChange(H){this.onChange=se=>{this.value=this._getOptionValue(se),H(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(H){for(const se of this._optionMap.keys())if(this._compareWith(this._optionMap.get(se),H))return se;return null}_getOptionValue(H){const se=function Qr(Y){return Y.split(":")[0]}(H);return this._optionMap.has(se)?this._optionMap.get(se):H}static#e=this.\u0275fac=(()=>{let H;return function(Te){return(H||(H=D.xGo(Y)))(Te||Y)}})();static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(se,Te){1&se&&D.bIt("change",function($n){return Te.onChange($n.target.value)})("blur",function(){return Te.onTouched()})},inputs:{compareWith:"compareWith"},features:[D.Jv_([ho]),D.Vt3]})}return Y})(),Lu=(()=>{class Y{constructor(H,se,Te){this._element=H,this._renderer=se,this._select=Te,this._select&&(this.id=this._select._registerOption())}set ngValue(H){null!=this._select&&(this._select._optionMap.set(this.id,H),this._setElementValue(Lc(this.id,H)),this._select.writeValue(this._select.value))}set value(H){this._setElementValue(H),this._select&&this._select.writeValue(this._select.value)}_setElementValue(H){this._renderer.setProperty(this._element.nativeElement,"value",H)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(D.aKT),D.rXU(D.sFG),D.rXU(Eo,9))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return Y})();const pa={provide:kt,useExisting:(0,D.Rfq)(()=>Xn),multi:!0};function gc(Y,Z){return null==Y?`${Z}`:("string"==typeof Z&&(Z=`'${Z}'`),Z&&"object"==typeof Z&&(Z="Object"),`${Y}: ${Z}`.slice(0,50))}let Xn=(()=>{class Y extends Ct{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(H){this._compareWith=H}writeValue(H){let se;if(this.value=H,Array.isArray(H)){const Te=H.map(Ot=>this._getOptionId(Ot));se=(Ot,$n)=>{Ot._setSelected(Te.indexOf($n.toString())>-1)}}else se=(Te,Ot)=>{Te._setSelected(!1)};this._optionMap.forEach(se)}registerOnChange(H){this.onChange=se=>{const Te=[],Ot=se.selectedOptions;if(void 0!==Ot){const $n=Ot;for(let $o=0;$o<$n.length;$o++){const Ro=this._getOptionValue($n[$o].value);Te.push(Ro)}}else{const $n=se.options;for(let $o=0;$o<$n.length;$o++){const va=$n[$o];if(va.selected){const Ro=this._getOptionValue(va.value);Te.push(Ro)}}}this.value=Te,H(Te)}}_registerOption(H){const se=(this._idCounter++).toString();return this._optionMap.set(se,H),se}_getOptionId(H){for(const se of this._optionMap.keys())if(this._compareWith(this._optionMap.get(se)._value,H))return se;return null}_getOptionValue(H){const se=function qa(Y){return Y.split(":")[0]}(H);return this._optionMap.has(se)?this._optionMap.get(se)._value:H}static#e=this.\u0275fac=(()=>{let H;return function(Te){return(H||(H=D.xGo(Y)))(Te||Y)}})();static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(se,Te){1&se&&D.bIt("change",function($n){return Te.onChange($n.target)})("blur",function(){return Te.onTouched()})},inputs:{compareWith:"compareWith"},features:[D.Jv_([pa]),D.Vt3]})}return Y})(),hr=(()=>{class Y{constructor(H,se,Te){this._element=H,this._renderer=se,this._select=Te,this._select&&(this.id=this._select._registerOption(this))}set ngValue(H){null!=this._select&&(this._value=H,this._setElementValue(gc(this.id,H)),this._select.writeValue(this._select.value))}set value(H){this._select?(this._value=H,this._setElementValue(gc(this.id,H)),this._select.writeValue(this._select.value)):this._setElementValue(H)}_setElementValue(H){this._renderer.setProperty(this._element.nativeElement,"value",H)}_setSelected(H){this._renderer.setProperty(this._element.nativeElement,"selected",H)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(se){return new(se||Y)(D.rXU(D.aKT),D.rXU(D.sFG),D.rXU(Xn,9))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return Y})(),kn=(()=>{class Y{static#e=this.\u0275fac=function(se){return new(se||Y)};static#t=this.\u0275mod=D.$C({type:Y});static#n=this.\u0275inj=D.G2t({})}return Y})();class Oa extends yo{constructor(Z,H,se){super(mr(H),Yn(se,H)),this.controls=Z,this._initObservables(),this._setUpdateStrategy(H),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Z){return this.controls[this._adjustIndex(Z)]}push(Z,H={}){this.controls.push(Z),this._registerControl(Z),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}insert(Z,H,se={}){this.controls.splice(Z,0,H),this._registerControl(H),this.updateValueAndValidity({emitEvent:se.emitEvent})}removeAt(Z,H={}){let se=this._adjustIndex(Z);se<0&&(se=0),this.controls[se]&&this.controls[se]._registerOnCollectionChange(()=>{}),this.controls.splice(se,1),this.updateValueAndValidity({emitEvent:H.emitEvent})}setControl(Z,H,se={}){let Te=this._adjustIndex(Z);Te<0&&(Te=0),this.controls[Te]&&this.controls[Te]._registerOnCollectionChange(()=>{}),this.controls.splice(Te,1),H&&(this.controls.splice(Te,0,H),this._registerControl(H)),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Z,H={}){Us(this,0,Z),Z.forEach((se,Te)=>{ci(this,!1,Te),this.at(Te).setValue(se,{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H)}patchValue(Z,H={}){null!=Z&&(Z.forEach((se,Te)=>{this.at(Te)&&this.at(Te).patchValue(se,{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H))}reset(Z=[],H={}){this._forEachChild((se,Te)=>{se.reset(Z[Te],{onlySelf:!0,emitEvent:H.emitEvent})}),this._updatePristine(H,this),this._updateTouched(H,this),this.updateValueAndValidity(H)}getRawValue(){return this.controls.map(Z=>Z.getRawValue())}clear(Z={}){this.controls.length<1||(this._forEachChild(H=>H._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Z.emitEvent}))}_adjustIndex(Z){return Z<0?Z+this.length:Z}_syncPendingControls(){let Z=this.controls.reduce((H,se)=>!!se._syncPendingControls()||H,!1);return Z&&this.updateValueAndValidity({onlySelf:!0}),Z}_forEachChild(Z){this.controls.forEach((H,se)=>{Z(H,se)})}_updateValue(){this.value=this.controls.filter(Z=>Z.enabled||this.disabled).map(Z=>Z.value)}_anyControls(Z){return this.controls.some(H=>H.enabled&&Z(H))}_setUpControls(){this._forEachChild(Z=>this._registerControl(Z))}_allControlsDisabled(){for(const Z of this.controls)if(Z.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Z){Z.setParent(this),Z._registerOnCollectionChange(this._onCollectionChange)}_find(Z){return this.at(Z)??null}}function Go(Y){return!!Y&&(void 0!==Y.asyncValidators||void 0!==Y.validators||void 0!==Y.updateOn)}let Yr=(()=>{class Y{constructor(){this.useNonNullable=!1}get nonNullable(){const H=new Y;return H.useNonNullable=!0,H}group(H,se=null){const Te=this._reduceControls(H);let Ot={};return Go(se)?Ot=se:null!==se&&(Ot.validators=se.validator,Ot.asyncValidators=se.asyncValidator),new no(Te,Ot)}record(H,se=null){const Te=this._reduceControls(H);return new du(Te,se)}control(H,se,Te){let Ot={};return this.useNonNullable?(Go(se)?Ot=se:(Ot.validators=se,Ot.asyncValidators=Te),new js(H,{...Ot,nonNullable:!0})):new js(H,se,Te)}array(H,se,Te){const Ot=H.map($n=>this._createControl($n));return new Oa(Ot,se,Te)}_reduceControls(H){const se={};return Object.keys(H).forEach(Te=>{se[Te]=this._createControl(H[Te])}),se}_createControl(H){return H instanceof js||H instanceof yo?H:Array.isArray(H)?this.control(H[0],H.length>1?H[1]:null,H.length>2?H[2]:null):this.control(H)}static#e=this.\u0275fac=function(se){return new(se||Y)};static#t=this.\u0275prov=D.jDH({token:Y,factory:Y.\u0275fac,providedIn:"root"})}return Y})(),Vu=(()=>{class Y{static withConfig(H){return{ngModule:Y,providers:[{provide:We,useValue:H.callSetDisabledState??St}]}}static#e=this.\u0275fac=function(se){return new(se||Y)};static#t=this.\u0275mod=D.$C({type:Y});static#n=this.\u0275inj=D.G2t({imports:[kn]})}return Y})(),cl=(()=>{class Y{static withConfig(H){return{ngModule:Y,providers:[{provide:Hi,useValue:H.warnOnNgModelWithFormControl??"always"},{provide:We,useValue:H.callSetDisabledState??St}]}}static#e=this.\u0275fac=function(se){return new(se||Y)};static#t=this.\u0275mod=D.$C({type:Y});static#n=this.\u0275inj=D.G2t({imports:[kn]})}return Y})()},345:(yn,wt,ie)=>{ie.d(wt,{B8:()=>xt,hE:()=>oi});var D=ie(177),x=ie(3953);class L extends D.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ue extends L{static makeCurrent(){(0,D.ZD)(new Ue)}onAndCancel(tt,be,Qe){return tt.addEventListener(be,Qe),()=>{tt.removeEventListener(be,Qe)}}dispatchEvent(tt,be){tt.dispatchEvent(be)}remove(tt){tt.parentNode&&tt.parentNode.removeChild(tt)}createElement(tt,be){return(be=be||this.getDefaultDocument()).createElement(tt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(tt){return tt.nodeType===Node.ELEMENT_NODE}isShadowRoot(tt){return tt instanceof DocumentFragment}getGlobalEventTarget(tt,be){return"window"===be?window:"document"===be?tt:"body"===be?tt.body:null}getBaseHref(tt){const be=function Ee(){return Ze=Ze||document.querySelector("base"),Ze?Ze.getAttribute("href"):null}();return null==be?null:function Xe(fe){return new URL(fe,document.baseURI).pathname}(be)}resetBaseElement(){Ze=null}getUserAgent(){return window.navigator.userAgent}getCookie(tt){return(0,D._b)(document.cookie,tt)}}let Ze=null,it=(()=>{class fe{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Qe){return new(Qe||fe)};static#t=this.\u0275prov=x.jDH({token:fe,factory:fe.\u0275fac})}return fe})();const ve=new x.nKC("");let Ie=(()=>{class fe{constructor(be,Qe){this._zone=Qe,this._eventNameToPlugin=new Map,be.forEach(le=>{le.manager=this}),this._plugins=be.slice().reverse()}addEventListener(be,Qe,le){return this._findPluginFor(Qe).addEventListener(be,Qe,le)}getZone(){return this._zone}_findPluginFor(be){let Qe=this._eventNameToPlugin.get(be);if(Qe)return Qe;if(Qe=this._plugins.find(ge=>ge.supports(be)),!Qe)throw new x.wOt(5101,!1);return this._eventNameToPlugin.set(be,Qe),Qe}static#e=this.\u0275fac=function(Qe){return new(Qe||fe)(x.KVO(ve),x.KVO(x.SKi))};static#t=this.\u0275prov=x.jDH({token:fe,factory:fe.\u0275fac})}return fe})();class Oe{constructor(tt){this._doc=tt}}const pt="ng-app-id";let Be=(()=>{class fe{constructor(be,Qe,le,ge={}){this.doc=be,this.appId=Qe,this.nonce=le,this.platformId=ge,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,D.Vy)(ge),this.resetHostNodes()}addStyles(be){for(const Qe of be)1===this.changeUsageCount(Qe,1)&&this.onStyleAdded(Qe)}removeStyles(be){for(const Qe of be)this.changeUsageCount(Qe,-1)<=0&&this.onStyleRemoved(Qe)}ngOnDestroy(){const be=this.styleNodesInDOM;be&&(be.forEach(Qe=>Qe.remove()),be.clear());for(const Qe of this.getAllStyles())this.onStyleRemoved(Qe);this.resetHostNodes()}addHost(be){this.hostNodes.add(be);for(const Qe of this.getAllStyles())this.addStyleToHost(be,Qe)}removeHost(be){this.hostNodes.delete(be)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(be){for(const Qe of this.hostNodes)this.addStyleToHost(Qe,be)}onStyleRemoved(be){const Qe=this.styleRef;Qe.get(be)?.elements?.forEach(le=>le.remove()),Qe.delete(be)}collectServerRenderedStyles(){const be=this.doc.head?.querySelectorAll(`style[${pt}="${this.appId}"]`);if(be?.length){const Qe=new Map;return be.forEach(le=>{null!=le.textContent&&Qe.set(le.textContent,le)}),Qe}return null}changeUsageCount(be,Qe){const le=this.styleRef;if(le.has(be)){const ge=le.get(be);return ge.usage+=Qe,ge.usage}return le.set(be,{usage:Qe,elements:[]}),Qe}getStyleElement(be,Qe){const le=this.styleNodesInDOM,ge=le?.get(Qe);if(ge?.parentNode===be)return le.delete(Qe),ge.removeAttribute(pt),ge;{const De=this.doc.createElement("style");return this.nonce&&De.setAttribute("nonce",this.nonce),De.textContent=Qe,this.platformIsServer&&De.setAttribute(pt,this.appId),be.appendChild(De),De}}addStyleToHost(be,Qe){const le=this.getStyleElement(be,Qe),ge=this.styleRef,De=ge.get(Qe)?.elements;De?De.push(le):ge.set(Qe,{elements:[le],usage:1})}resetHostNodes(){const be=this.hostNodes;be.clear(),be.add(this.doc.head)}static#e=this.\u0275fac=function(Qe){return new(Qe||fe)(x.KVO(D.qQ),x.KVO(x.sZ2),x.KVO(x.BIS,8),x.KVO(x.Agw))};static#t=this.\u0275prov=x.jDH({token:fe,factory:fe.\u0275fac})}return fe})();const Ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},kt=/%COMP%/g,Dt=new x.nKC("",{providedIn:"root",factory:()=>!0});function Lt(fe,tt){return tt.map(be=>be.replace(kt,fe))}let At=(()=>{class fe{constructor(be,Qe,le,ge,De,lt,Ke,Xt=null){this.eventManager=be,this.sharedStylesHost=Qe,this.appId=le,this.removeStylesOnCompDestroy=ge,this.doc=De,this.platformId=lt,this.ngZone=Ke,this.nonce=Xt,this.rendererByCompId=new Map,this.platformIsServer=(0,D.Vy)(lt),this.defaultRenderer=new Ht(be,De,Ke,this.platformIsServer)}createRenderer(be,Qe){if(!be||!Qe)return this.defaultRenderer;this.platformIsServer&&Qe.encapsulation===x.gXe.ShadowDom&&(Qe={...Qe,encapsulation:x.gXe.Emulated});const le=this.getOrCreateRenderer(be,Qe);return le instanceof Se?le.applyToHost(be):le instanceof sr&&le.applyStyles(),le}getOrCreateRenderer(be,Qe){const le=this.rendererByCompId;let ge=le.get(Qe.id);if(!ge){const De=this.doc,lt=this.ngZone,Ke=this.eventManager,Xt=this.sharedStylesHost,xn=this.removeStylesOnCompDestroy,Hn=this.platformIsServer;switch(Qe.encapsulation){case x.gXe.Emulated:ge=new Se(Ke,Xt,Qe,this.appId,xn,De,lt,Hn);break;case x.gXe.ShadowDom:return new Sn(Ke,Xt,be,Qe,De,lt,this.nonce,Hn);default:ge=new sr(Ke,Xt,Qe,xn,De,lt,Hn)}le.set(Qe.id,ge)}return ge}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Qe){return new(Qe||fe)(x.KVO(Ie),x.KVO(Be),x.KVO(x.sZ2),x.KVO(Dt),x.KVO(D.qQ),x.KVO(x.Agw),x.KVO(x.SKi),x.KVO(x.BIS))};static#t=this.\u0275prov=x.jDH({token:fe,factory:fe.\u0275fac})}return fe})();class Ht{constructor(tt,be,Qe,le){this.eventManager=tt,this.doc=be,this.ngZone=Qe,this.platformIsServer=le,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(tt,be){return be?this.doc.createElementNS(Ct[be]||be,tt):this.doc.createElement(tt)}createComment(tt){return this.doc.createComment(tt)}createText(tt){return this.doc.createTextNode(tt)}appendChild(tt,be){(_n(tt)?tt.content:tt).appendChild(be)}insertBefore(tt,be,Qe){tt&&(_n(tt)?tt.content:tt).insertBefore(be,Qe)}removeChild(tt,be){tt&&tt.removeChild(be)}selectRootElement(tt,be){let Qe="string"==typeof tt?this.doc.querySelector(tt):tt;if(!Qe)throw new x.wOt(-5104,!1);return be||(Qe.textContent=""),Qe}parentNode(tt){return tt.parentNode}nextSibling(tt){return tt.nextSibling}setAttribute(tt,be,Qe,le){if(le){be=le+":"+be;const ge=Ct[le];ge?tt.setAttributeNS(ge,be,Qe):tt.setAttribute(be,Qe)}else tt.setAttribute(be,Qe)}removeAttribute(tt,be,Qe){if(Qe){const le=Ct[Qe];le?tt.removeAttributeNS(le,be):tt.removeAttribute(`${Qe}:${be}`)}else tt.removeAttribute(be)}addClass(tt,be){tt.classList.add(be)}removeClass(tt,be){tt.classList.remove(be)}setStyle(tt,be,Qe,le){le&(x.czy.DashCase|x.czy.Important)?tt.style.setProperty(be,Qe,le&x.czy.Important?"important":""):tt.style[be]=Qe}removeStyle(tt,be,Qe){Qe&x.czy.DashCase?tt.style.removeProperty(be):tt.style[be]=""}setProperty(tt,be,Qe){null!=tt&&(tt[be]=Qe)}setValue(tt,be){tt.nodeValue=be}listen(tt,be,Qe){if("string"==typeof tt&&!(tt=(0,D.QT)().getGlobalEventTarget(this.doc,tt)))throw new Error(`Unsupported event target ${tt} for event ${be}`);return this.eventManager.addEventListener(tt,be,this.decoratePreventDefault(Qe))}decoratePreventDefault(tt){return be=>{if("__ngUnwrap__"===be)return tt;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>tt(be)):tt(be))&&be.preventDefault()}}}function _n(fe){return"TEMPLATE"===fe.tagName&&void 0!==fe.content}class Sn extends Ht{constructor(tt,be,Qe,le,ge,De,lt,Ke){super(tt,ge,De,Ke),this.sharedStylesHost=be,this.hostEl=Qe,this.shadowRoot=Qe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Xt=Lt(le.id,le.styles);for(const xn of Xt){const Hn=document.createElement("style");lt&&Hn.setAttribute("nonce",lt),Hn.textContent=xn,this.shadowRoot.appendChild(Hn)}}nodeOrShadowRoot(tt){return tt===this.hostEl?this.shadowRoot:tt}appendChild(tt,be){return super.appendChild(this.nodeOrShadowRoot(tt),be)}insertBefore(tt,be,Qe){return super.insertBefore(this.nodeOrShadowRoot(tt),be,Qe)}removeChild(tt,be){return super.removeChild(this.nodeOrShadowRoot(tt),be)}parentNode(tt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(tt)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class sr extends Ht{constructor(tt,be,Qe,le,ge,De,lt,Ke){super(tt,ge,De,lt),this.sharedStylesHost=be,this.removeStylesOnCompDestroy=le,this.styles=Ke?Lt(Ke,Qe.styles):Qe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Se extends sr{constructor(tt,be,Qe,le,ge,De,lt,Ke){const Xt=le+"-"+Qe.id;super(tt,be,Qe,ge,De,lt,Ke,Xt),this.contentAttr=function It(fe){return"_ngcontent-%COMP%".replace(kt,fe)}(Xt),this.hostAttr=function _t(fe){return"_nghost-%COMP%".replace(kt,fe)}(Xt)}applyToHost(tt){this.applyStyles(),this.setAttribute(tt,this.hostAttr,"")}createElement(tt,be){const Qe=super.createElement(tt,be);return super.setAttribute(Qe,this.contentAttr,""),Qe}}let bt=(()=>{class fe extends Oe{constructor(be){super(be)}supports(be){return!0}addEventListener(be,Qe,le){return be.addEventListener(Qe,le,!1),()=>this.removeEventListener(be,Qe,le)}removeEventListener(be,Qe,le){return be.removeEventListener(Qe,le)}static#e=this.\u0275fac=function(Qe){return new(Qe||fe)(x.KVO(D.qQ))};static#t=this.\u0275prov=x.jDH({token:fe,factory:fe.\u0275fac})}return fe})();const gn=["alt","control","meta","shift"],er={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pe={alt:fe=>fe.altKey,control:fe=>fe.ctrlKey,meta:fe=>fe.metaKey,shift:fe=>fe.shiftKey};let je=(()=>{class fe extends Oe{constructor(be){super(be)}supports(be){return null!=fe.parseEventName(be)}addEventListener(be,Qe,le){const ge=fe.parseEventName(Qe),De=fe.eventCallback(ge.fullKey,le,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,D.QT)().onAndCancel(be,ge.domEventName,De))}static parseEventName(be){const Qe=be.toLowerCase().split("."),le=Qe.shift();if(0===Qe.length||"keydown"!==le&&"keyup"!==le)return null;const ge=fe._normalizeKey(Qe.pop());let De="",lt=Qe.indexOf("code");if(lt>-1&&(Qe.splice(lt,1),De="code."),gn.forEach(Xt=>{const xn=Qe.indexOf(Xt);xn>-1&&(Qe.splice(xn,1),De+=Xt+".")}),De+=ge,0!=Qe.length||0===ge.length)return null;const Ke={};return Ke.domEventName=le,Ke.fullKey=De,Ke}static matchEventFullKeyCode(be,Qe){let le=er[be.key]||be.key,ge="";return Qe.indexOf("code.")>-1&&(le=be.code,ge="code."),!(null==le||!le)&&(le=le.toLowerCase()," "===le?le="space":"."===le&&(le="dot"),gn.forEach(De=>{De!==le&&(0,Pe[De])(be)&&(ge+=De+".")}),ge+=le,ge===Qe)}static eventCallback(be,Qe,le){return ge=>{fe.matchEventFullKeyCode(ge,be)&&le.runGuarded(()=>Qe(ge))}}static _normalizeKey(be){return"esc"===be?"escape":be}static#e=this.\u0275fac=function(Qe){return new(Qe||fe)(x.KVO(D.qQ))};static#t=this.\u0275prov=x.jDH({token:fe,factory:fe.\u0275fac})}return fe})();function xt(fe,tt){return(0,x.TL3)({rootComponent:fe,...he(tt)})}function he(fe){return{appProviders:[...lr,...fe?.providers??[]],platformProviders:en}}const en=[{provide:x.Agw,useValue:D.AJ},{provide:x.PLl,useValue:function mt(){Ue.makeCurrent()},multi:!0},{provide:D.qQ,useFactory:function jn(){return(0,x.TL$)(document),document},deps:[]}],lr=[{provide:x.H8p,useValue:"root"},{provide:x.zcH,useFactory:function zt(){return new x.zcH},deps:[]},{provide:ve,useClass:bt,multi:!0,deps:[D.qQ,x.SKi,x.Agw]},{provide:ve,useClass:je,multi:!0,deps:[D.qQ]},At,Be,Ie,{provide:x._9s,useExisting:At},{provide:D.N0,useClass:it,deps:[]},[]];let oi=(()=>{class fe{constructor(be){this._doc=be}getTitle(){return this._doc.title}setTitle(be){this._doc.title=be||""}static#e=this.\u0275fac=function(Qe){return new(Qe||fe)(x.KVO(D.qQ))};static#t=this.\u0275prov=x.jDH({token:fe,factory:fe.\u0275fac,providedIn:"root"})}return fe})()},7407:(yn,wt,ie)=>{ie.d(wt,{nX:()=>Hi,wF:()=>Zo,Ix:()=>li,iI:()=>hl,n3:()=>Da,lh:()=>Gu,lG:()=>Ic,qQ:()=>Wu});var D=ie(467),x=ie(3953),L=ie(1985),Ue=ie(8071),Ee=ie(8455),Xe=ie(7673),Et=ie(4412),it=ie(4572);const Ie=(0,ie(1853).L)(R=>function(){R(this),this.name="EmptyError",this.message="no elements in sequence"});var Oe=ie(8793),pt=ie(8750);function Be(R){return new L.c(U=>{(0,pt.Tg)(R()).subscribe(U)})}var Ct=ie(1203);function kt(R,U){const M=(0,Ue.T)(R)?R:()=>R,j=Q=>Q.error(M());return new L.c(U?Q=>U.schedule(j,0,Q):j)}const Bt=new L.c(R=>R.complete());var Jn=ie(8359),Dt=ie(9974),It=ie(4360);function _t(){return(0,Dt.N)((R,U)=>{let M=null;R._refCount++;const j=(0,It._)(U,void 0,void 0,void 0,()=>{if(!R||R._refCount<=0||0<--R._refCount)return void(M=null);const Q=R._connection,oe=M;M=null,Q&&(!oe||Q===oe)&&Q.unsubscribe(),U.unsubscribe()});R.subscribe(j),j.closed||(M=R.connect())})}class Lt extends L.c{constructor(U,M){super(),this.source=U,this.subjectFactory=M,this._subject=null,this._refCount=0,this._connection=null,(0,Dt.S)(U)&&(this.lift=U.lift)}_subscribe(U){return this.getSubject().subscribe(U)}getSubject(){const U=this._subject;return(!U||U.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:U}=this;this._subject=this._connection=null,U?.unsubscribe()}connect(){let U=this._connection;if(!U){U=this._connection=new Jn.yU;const M=this.getSubject();U.add(this.source.subscribe((0,It._)(M,void 0,()=>{this._teardown(),M.complete()},j=>{this._teardown(),M.error(j)},()=>this._teardown()))),U.closed&&(this._connection=null,U=Jn.yU.EMPTY)}return U}refCount(){return _t()(this)}}var At=ie(1413),Ht=ie(177),ke=ie(6354),bn=ie(5558);function _n(R){return R<=0?()=>Bt:(0,Dt.N)((U,M)=>{let j=0;U.subscribe((0,It._)(M,Q=>{++j<=R&&(M.next(Q),R<=j&&M.complete())}))})}var Sn=ie(9172);function sr(R,U){return(0,Dt.N)((M,j)=>{let Q=0;M.subscribe((0,It._)(j,oe=>R.call(U,oe,Q++)&&j.next(oe)))})}var Se=ie(1397);function bt(R){return(0,Dt.N)((U,M)=>{let j=!1;U.subscribe((0,It._)(M,Q=>{j=!0,M.next(Q)},()=>{j||M.next(R),M.complete()}))})}function gn(R=er){return(0,Dt.N)((U,M)=>{let j=!1;U.subscribe((0,It._)(M,Q=>{j=!0,M.next(Q)},()=>j?M.complete():M.error(R())))})}function er(){return new Ie}var Pe=ie(3669);function je(R,U){const M=arguments.length>=2;return j=>j.pipe(R?sr((Q,oe)=>R(Q,oe,j)):Pe.D,_n(1),M?bt(U):gn(()=>new Ie))}function xt(R,U){return(0,Ue.T)(U)?(0,Se.Z)(R,U,1):(0,Se.Z)(R,1)}var Fe=ie(8141);function he(R){return(0,Dt.N)((U,M)=>{let oe,j=null,Q=!1;j=U.subscribe((0,It._)(M,void 0,void 0,Ae=>{oe=(0,pt.Tg)(R(Ae,he(R)(U))),j?(j.unsubscribe(),j=null,oe.subscribe(M)):Q=!0})),Q&&(j.unsubscribe(),j=null,oe.subscribe(M))})}function zt(R){return R<=0?()=>Bt:(0,Dt.N)((U,M)=>{let j=[];U.subscribe((0,It._)(M,Q=>{j.push(Q),R<j.length&&j.shift()},()=>{for(const Q of j)M.next(Q);M.complete()},void 0,()=>{j=null}))})}function qn(R){return(0,Dt.N)((U,M)=>{try{U.subscribe(M)}finally{M.add(R)}})}var jr=ie(5343),lr=ie(6365),qr=ie(345);const Tn="primary",pr=Symbol("RouteTitle");class oi{constructor(U){this.params=U||{}}has(U){return Object.prototype.hasOwnProperty.call(this.params,U)}get(U){if(this.has(U)){const M=this.params[U];return Array.isArray(M)?M[0]:M}return null}getAll(U){if(this.has(U)){const M=this.params[U];return Array.isArray(M)?M:[M]}return[]}get keys(){return Object.keys(this.params)}}function wn(R){return new oi(R)}function Br(R,U,M){const j=M.path.split("/");if(j.length>R.length||"full"===M.pathMatch&&(U.hasChildren()||j.length<R.length))return null;const Q={};for(let oe=0;oe<j.length;oe++){const Ae=j[oe],dt=R[oe];if(":"===Ae[0])Q[Ae.substring(1)]=dt;else if(Ae!==dt.path)return null}return{consumed:R.slice(0,j.length),posParams:Q}}function Kn(R,U){const M=R?cn(R):void 0,j=U?cn(U):void 0;if(!M||!j||M.length!=j.length)return!1;let Q;for(let oe=0;oe<M.length;oe++)if(Q=M[oe],!Lo(R[Q],U[Q]))return!1;return!0}function cn(R){return[...Object.keys(R),...Object.getOwnPropertySymbols(R)]}function Lo(R,U){if(Array.isArray(R)&&Array.isArray(U)){if(R.length!==U.length)return!1;const M=[...R].sort(),j=[...U].sort();return M.every((Q,oe)=>j[oe]===Q)}return R===U}function Nt(R){return R.length>0?R[R.length-1]:null}function Qn(R){return function Ze(R){return!!R&&(R instanceof L.c||(0,Ue.T)(R.lift)&&(0,Ue.T)(R.subscribe))}(R)?R:(0,x.jNT)(R)?(0,Ee.H)(Promise.resolve(R)):(0,Xe.of)(R)}const un={exact:function Dr(R,U,M){if(!Wi(R.segments,U.segments)||!_i(R.segments,U.segments,M)||R.numberOfChildren!==U.numberOfChildren)return!1;for(const j in U.children)if(!R.children[j]||!Dr(R.children[j],U.children[j],M))return!1;return!0},subset:ai},Wt={exact:function ki(R,U){return Kn(R,U)},subset:function mi(R,U){return Object.keys(U).length<=Object.keys(R).length&&Object.keys(U).every(M=>Lo(R[M],U[M]))},ignored:()=>!0};function zr(R,U,M){return un[M.paths](R.root,U.root,M.matrixParams)&&Wt[M.queryParams](R.queryParams,U.queryParams)&&!("exact"===M.fragment&&R.fragment!==U.fragment)}function ai(R,U,M){return Wr(R,U,U.segments,M)}function Wr(R,U,M,j){if(R.segments.length>M.length){const Q=R.segments.slice(0,M.length);return!(!Wi(Q,M)||U.hasChildren()||!_i(Q,M,j))}if(R.segments.length===M.length){if(!Wi(R.segments,M)||!_i(R.segments,M,j))return!1;for(const Q in U.children)if(!R.children[Q]||!ai(R.children[Q],U.children[Q],j))return!1;return!0}{const Q=M.slice(0,R.segments.length),oe=M.slice(R.segments.length);return!!(Wi(R.segments,Q)&&_i(R.segments,Q,j)&&R.children[Tn])&&Wr(R.children[Tn],U,oe,j)}}function _i(R,U,M){return U.every((j,Q)=>Wt[M](R[Q].parameters,j.parameters))}class Vn{constructor(U=new Er([],{}),M={},j=null){this.root=U,this.queryParams=M,this.fragment=j}get queryParamMap(){return this._queryParamMap??=wn(this.queryParams),this._queryParamMap}toString(){return fe.serialize(this)}}class Er{constructor(U,M){this.segments=U,this.children=M,this.parent=null,Object.values(M).forEach(j=>j.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tt(this)}}class ri{constructor(U,M){this.path=U,this.parameters=M}get parameterMap(){return this._parameterMap??=wn(this.parameters),this._parameterMap}toString(){return Xt(this)}}function Wi(R,U){return R.length===U.length&&R.every((M,j)=>M.path===U[j].path)}let ei=(()=>{class R{static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=x.jDH({token:R,factory:()=>new Cr,providedIn:"root"})}return R})();class Cr{parse(U){const M=new yo(U);return new Vn(M.parseRootSegment(),M.parseQueryParams(),M.parseFragment())}serialize(U){const M=`/${be(U.root,!0)}`,j=function Hn(R){const U=Object.entries(R).map(([M,j])=>Array.isArray(j)?j.map(Q=>`${le(M)}=${le(Q)}`).join("&"):`${le(M)}=${le(j)}`).filter(M=>M);return U.length?`?${U.join("&")}`:""}(U.queryParams);return`${M}${j}${"string"==typeof U.fragment?`#${function ge(R){return encodeURI(R)}(U.fragment)}`:""}`}}const fe=new Cr;function tt(R){return R.segments.map(U=>Xt(U)).join("/")}function be(R,U){if(!R.hasChildren())return tt(R);if(U){const M=R.children[Tn]?be(R.children[Tn],!1):"",j=[];return Object.entries(R.children).forEach(([Q,oe])=>{Q!==Tn&&j.push(`${Q}:${be(oe,!1)}`)}),j.length>0?`${M}(${j.join("//")})`:M}{const M=function Fi(R,U){let M=[];return Object.entries(R.children).forEach(([j,Q])=>{j===Tn&&(M=M.concat(U(Q,j)))}),Object.entries(R.children).forEach(([j,Q])=>{j!==Tn&&(M=M.concat(U(Q,j)))}),M}(R,(j,Q)=>Q===Tn?[be(R.children[Tn],!1)]:[`${Q}:${be(j,!1)}`]);return 1===Object.keys(R.children).length&&null!=R.children[Tn]?`${tt(R)}/${M[0]}`:`${tt(R)}/(${M.join("//")})`}}function Qe(R){return encodeURIComponent(R).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function le(R){return Qe(R).replace(/%3B/gi,";")}function De(R){return Qe(R).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lt(R){return decodeURIComponent(R)}function Ke(R){return lt(R.replace(/\+/g,"%20"))}function Xt(R){return`${De(R.path)}${function xn(R){return Object.entries(R).map(([U,M])=>`;${De(U)}=${De(M)}`).join("")}(R.parameters)}`}const Kr=/^[^\/()?;#]+/;function mr(R){const U=R.match(Kr);return U?U[0]:""}const vi=/^[^\/()?;=#]+/,Li=/^[^=?&#]+/,ci=/^[^&#]+/;class yo{constructor(U){this.url=U,this.remaining=U}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Er([],{}):new Er([],this.parseChildren())}parseQueryParams(){const U={};if(this.consumeOptional("?"))do{this.parseQueryParam(U)}while(this.consumeOptional("&"));return U}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const U=[];for(this.peekStartsWith("(")||U.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),U.push(this.parseSegment());let M={};this.peekStartsWith("/(")&&(this.capture("/"),M=this.parseParens(!0));let j={};return this.peekStartsWith("(")&&(j=this.parseParens(!1)),(U.length>0||Object.keys(M).length>0)&&(j[Tn]=new Er(U,M)),j}parseSegment(){const U=mr(this.remaining);if(""===U&&this.peekStartsWith(";"))throw new x.wOt(4009,!1);return this.capture(U),new ri(lt(U),this.parseMatrixParams())}parseMatrixParams(){const U={};for(;this.consumeOptional(";");)this.parseParam(U);return U}parseParam(U){const M=function Yn(R){const U=R.match(vi);return U?U[0]:""}(this.remaining);if(!M)return;this.capture(M);let j="";if(this.consumeOptional("=")){const Q=mr(this.remaining);Q&&(j=Q,this.capture(j))}U[lt(M)]=lt(j)}parseQueryParam(U){const M=function Hr(R){const U=R.match(Li);return U?U[0]:""}(this.remaining);if(!M)return;this.capture(M);let j="";if(this.consumeOptional("=")){const Ae=function Us(R){const U=R.match(ci);return U?U[0]:""}(this.remaining);Ae&&(j=Ae,this.capture(j))}const Q=Ke(M),oe=Ke(j);if(U.hasOwnProperty(Q)){let Ae=U[Q];Array.isArray(Ae)||(Ae=[Ae],U[Q]=Ae),Ae.push(oe)}else U[Q]=oe}parseParens(U){const M={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const j=mr(this.remaining),Q=this.remaining[j.length];if("/"!==Q&&")"!==Q&&";"!==Q)throw new x.wOt(4010,!1);let oe;j.indexOf(":")>-1?(oe=j.slice(0,j.indexOf(":")),this.capture(oe),this.capture(":")):U&&(oe=Tn);const Ae=this.parseChildren();M[oe]=1===Object.keys(Ae).length?Ae[Tn]:new Er([],Ae),this.consumeOptional("//")}return M}peekStartsWith(U){return this.remaining.startsWith(U)}consumeOptional(U){return!!this.peekStartsWith(U)&&(this.remaining=this.remaining.substring(U.length),!0)}capture(U){if(!this.consumeOptional(U))throw new x.wOt(4011,!1)}}function no(R){return R.segments.length>0?new Er([],{[Tn]:R}):R}function Is(R){const U={};for(const[j,Q]of Object.entries(R.children)){const oe=Is(Q);if(j===Tn&&0===oe.segments.length&&oe.hasChildren())for(const[Ae,dt]of Object.entries(oe.children))U[Ae]=dt;else(oe.segments.length>0||oe.hasChildren())&&(U[j]=oe)}return function kc(R){if(1===R.numberOfChildren&&R.children[Tn]){const U=R.children[Tn];return new Er(R.segments.concat(U.segments),U.children)}return R}(new Er(R.segments,U))}function As(R){return R instanceof Vn}function vt(R){let U;const Q=no(function M(oe){const Ae={};for(const Je of oe.children){const Pt=M(Je);Ae[Je.outlet]=Pt}const dt=new Er(oe.url,Ae);return oe===R&&(U=dt),dt}(R.root));return U??Q}function We(R,U,M,j){let Q=R;for(;Q.parent;)Q=Q.parent;if(0===U.length)return Bn(Q,Q,Q,M,j);const oe=function Rr(R){if("string"==typeof R[0]&&1===R.length&&"/"===R[0])return new Nn(!0,0,R);let U=0,M=!1;const j=R.reduce((Q,oe,Ae)=>{if("object"==typeof oe&&null!=oe){if(oe.outlets){const dt={};return Object.entries(oe.outlets).forEach(([Je,Pt])=>{dt[Je]="string"==typeof Pt?Pt.split("/"):Pt}),[...Q,{outlets:dt}]}if(oe.segmentPath)return[...Q,oe.segmentPath]}return"string"!=typeof oe?[...Q,oe]:0===Ae?(oe.split("/").forEach((dt,Je)=>{0==Je&&"."===dt||(0==Je&&""===dt?M=!0:".."===dt?U++:""!=dt&&Q.push(dt))}),Q):[...Q,oe]},[]);return new Nn(M,U,j)}(U);if(oe.toRoot())return Bn(Q,Q,new Er([],{}),M,j);const Ae=function uo(R,U,M){if(R.isAbsolute)return new Mr(U,!0,0);if(!M)return new Mr(U,!1,NaN);if(null===M.parent)return new Mr(M,!0,0);const j=St(R.commands[0])?0:1;return function Vo(R,U,M){let j=R,Q=U,oe=M;for(;oe>Q;){if(oe-=Q,j=j.parent,!j)throw new x.wOt(4005,!1);Q=j.segments.length}return new Mr(j,!1,Q-oe)}(M,M.segments.length-1+j,R.numberOfDoubleDots)}(oe,Q,R),dt=Ae.processChildren?bs(Ae.segmentGroup,Ae.index,oe.commands):$a(Ae.segmentGroup,Ae.index,oe.commands);return Bn(Q,Ae.segmentGroup,dt,M,j)}function St(R){return"object"==typeof R&&null!=R&&!R.outlets&&!R.segmentPath}function tn(R){return"object"==typeof R&&null!=R&&R.outlets}function Bn(R,U,M,j,Q){let Ae,oe={};j&&Object.entries(j).forEach(([Je,Pt])=>{oe[Je]=Array.isArray(Pt)?Pt.map(fn=>`${fn}`):`${Pt}`}),Ae=R===U?M:On(R,U,M);const dt=no(Is(Ae));return new Vn(dt,oe,Q)}function On(R,U,M){const j={};return Object.entries(R.children).forEach(([Q,oe])=>{j[Q]=oe===U?M:On(oe,U,M)}),new Er(R.segments,j)}class Nn{constructor(U,M,j){if(this.isAbsolute=U,this.numberOfDoubleDots=M,this.commands=j,U&&j.length>0&&St(j[0]))throw new x.wOt(4003,!1);const Q=j.find(tn);if(Q&&Q!==Nt(j))throw new x.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mr{constructor(U,M,j){this.segmentGroup=U,this.processChildren=M,this.index=j}}function $a(R,U,M){if(R??=new Er([],{}),0===R.segments.length&&R.hasChildren())return bs(R,U,M);const j=function fu(R,U,M){let j=0,Q=U;const oe={match:!1,pathIndex:0,commandIndex:0};for(;Q<R.segments.length;){if(j>=M.length)return oe;const Ae=R.segments[Q],dt=M[j];if(tn(dt))break;const Je=`${dt}`,Pt=j<M.length-1?M[j+1]:null;if(Q>0&&void 0===Je)break;if(Je&&Pt&&"object"==typeof Pt&&void 0===Pt.outlets){if(!hc(Je,Pt,Ae))return oe;j+=2}else{if(!hc(Je,{},Ae))return oe;j++}Q++}return{match:!0,pathIndex:Q,commandIndex:j}}(R,U,M),Q=M.slice(j.commandIndex);if(j.match&&j.pathIndex<R.segments.length){const oe=new Er(R.segments.slice(0,j.pathIndex),{});return oe.children[Tn]=new Er(R.segments.slice(j.pathIndex),R.children),bs(oe,0,Q)}return j.match&&0===Q.length?new Er(R.segments,{}):j.match&&!R.hasChildren()?ca(R,U,M):j.match?bs(R,0,Q):ca(R,U,M)}function bs(R,U,M){if(0===M.length)return new Er(R.segments,{});{const j=function Xr(R){return tn(R[0])?R[0].outlets:{[Tn]:R}}(M),Q={};if(Object.keys(j).some(oe=>oe!==Tn)&&R.children[Tn]&&1===R.numberOfChildren&&0===R.children[Tn].segments.length){const oe=bs(R.children[Tn],U,M);return new Er(R.segments,oe.children)}return Object.entries(j).forEach(([oe,Ae])=>{"string"==typeof Ae&&(Ae=[Ae]),null!==Ae&&(Q[oe]=$a(R.children[oe],U,Ae))}),Object.entries(R.children).forEach(([oe,Ae])=>{void 0===j[oe]&&(Q[oe]=Ae)}),new Er(R.segments,Q)}}function ca(R,U,M){const j=R.segments.slice(0,U);let Q=0;for(;Q<M.length;){const oe=M[Q];if(tn(oe)){const Je=Fu(oe.outlets);return new Er(j,Je)}if(0===Q&&St(M[0])){j.push(new ri(R.segments[U].path,fc(M[0]))),Q++;continue}const Ae=tn(oe)?oe.outlets[Tn]:`${oe}`,dt=Q<M.length-1?M[Q+1]:null;Ae&&dt&&St(dt)?(j.push(new ri(Ae,fc(dt))),Q+=2):(j.push(new ri(Ae,{})),Q++)}return new Er(j,{})}function Fu(R){const U={};return Object.entries(R).forEach(([M,j])=>{"string"==typeof j&&(j=[j]),null!==j&&(U[M]=ca(new Er([],{}),0,j))}),U}function fc(R){const U={};return Object.entries(R).forEach(([M,j])=>U[M]=`${j}`),U}function hc(R,U,M){return R==M.path&&Kn(U,M.parameters)}const Ts="imperative";var Ln=function(R){return R[R.NavigationStart=0]="NavigationStart",R[R.NavigationEnd=1]="NavigationEnd",R[R.NavigationCancel=2]="NavigationCancel",R[R.NavigationError=3]="NavigationError",R[R.RoutesRecognized=4]="RoutesRecognized",R[R.ResolveStart=5]="ResolveStart",R[R.ResolveEnd=6]="ResolveEnd",R[R.GuardsCheckStart=7]="GuardsCheckStart",R[R.GuardsCheckEnd=8]="GuardsCheckEnd",R[R.RouteConfigLoadStart=9]="RouteConfigLoadStart",R[R.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",R[R.ChildActivationStart=11]="ChildActivationStart",R[R.ChildActivationEnd=12]="ChildActivationEnd",R[R.ActivationStart=13]="ActivationStart",R[R.ActivationEnd=14]="ActivationEnd",R[R.Scroll=15]="Scroll",R[R.NavigationSkipped=16]="NavigationSkipped",R}(Ln||{});class lo{constructor(U,M){this.id=U,this.url=M}}class To extends lo{constructor(U,M,j="imperative",Q=null){super(U,M),this.type=Ln.NavigationStart,this.navigationTrigger=j,this.restoredState=Q}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zo extends lo{constructor(U,M,j){super(U,M),this.urlAfterRedirects=j,this.type=Ln.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ro=function(R){return R[R.Redirect=0]="Redirect",R[R.SupersededByNewNavigation=1]="SupersededByNewNavigation",R[R.NoDataFromResolver=2]="NoDataFromResolver",R[R.GuardRejected=3]="GuardRejected",R}(ro||{}),Ar=function(R){return R[R.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",R[R.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",R}(Ar||{});class as extends lo{constructor(U,M,j,Q){super(U,M),this.reason=j,this.code=Q,this.type=Ln.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yi extends lo{constructor(U,M,j,Q){super(U,M),this.reason=j,this.code=Q,this.type=Ln.NavigationSkipped}}class Gn extends lo{constructor(U,M,j,Q){super(U,M),this.error=j,this.target=Q,this.type=Ln.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ua extends lo{constructor(U,M,j,Q){super(U,M),this.urlAfterRedirects=j,this.state=Q,this.type=Ln.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qi extends lo{constructor(U,M,j,Q){super(U,M),this.urlAfterRedirects=j,this.state=Q,this.type=Ln.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ri extends lo{constructor(U,M,j,Q,oe){super(U,M),this.urlAfterRedirects=j,this.state=Q,this.shouldActivate=oe,this.type=Ln.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class js extends lo{constructor(U,M,j,Q){super(U,M),this.urlAfterRedirects=j,this.state=Q,this.type=Ln.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vl extends lo{constructor(U,M,j,Q){super(U,M),this.urlAfterRedirects=j,this.state=Q,this.type=Ln.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vi{constructor(U){this.route=U,this.type=Ln.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bo{constructor(U){this.route=U,this.type=Ln.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jo{constructor(U){this.snapshot=U,this.type=Ln.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mi{constructor(U){this.snapshot=U,this.type=Ln.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(U){this.snapshot=U,this.type=Ln.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fc{constructor(U){this.snapshot=U,this.type=Ln.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class la{constructor(U,M,j){this.routerEvent=U,this.position=M,this.anchor=j,this.type=Ln.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xo{}class na{constructor(U,M){this.url=U,this.navigationBehaviorOptions=M}}class cs{constructor(U){this.injector=U,this.outlet=null,this.route=null,this.children=new Hs(this.injector),this.attachRef=null}}let Hs=(()=>{class R{constructor(M){this.parentInjector=M,this.contexts=new Map}onChildOutletCreated(M,j){const Q=this.getOrCreateContext(M);Q.outlet=j,this.contexts.set(M,Q)}onChildOutletDestroyed(M){const j=this.getContext(M);j&&(j.outlet=null,j.attachRef=null)}onOutletDeactivated(){const M=this.contexts;return this.contexts=new Map,M}onOutletReAttached(M){this.contexts=M}getOrCreateContext(M){let j=this.getContext(M);return j||(j=new cs(this.parentInjector),this.contexts.set(M,j)),j}getContext(M){return this.contexts.get(M)||null}static#e=this.\u0275fac=function(j){return new(j||R)(x.KVO(x.uvJ))};static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();class Ss{constructor(U){this._root=U}get root(){return this._root.value}parent(U){const M=this.pathFromRoot(U);return M.length>1?M[M.length-2]:null}children(U){const M=io(U,this._root);return M?M.children.map(j=>j.value):[]}firstChild(U){const M=io(U,this._root);return M&&M.children.length>0?M.children[0].value:null}siblings(U){const M=Ds(U,this._root);return M.length<2?[]:M[M.length-2].children.map(Q=>Q.value).filter(Q=>Q!==U)}pathFromRoot(U){return Ds(U,this._root).map(M=>M.value)}}function io(R,U){if(R===U.value)return U;for(const M of U.children){const j=io(R,M);if(j)return j}return null}function Ds(R,U){if(R===U.value)return[U];for(const M of U.children){const j=Ds(R,M);if(j.length)return j.unshift(U),j}return[]}class Ki{constructor(U,M){this.value=U,this.children=M}toString(){return`TreeNode(${this.value})`}}function us(R){const U={};return R&&R.children.forEach(M=>U[M.value.outlet]=M),U}class fa extends Ss{constructor(U,M){super(U),this.snapshot=M,fo(this,U)}toString(){return this.snapshot.toString()}}function Sa(R){const U=function pc(R){const oe=new ls([],{},{},"",{},Tn,R,null,{});return new hu("",new Ki(oe,[]))}(R),M=new Et.t([new ri("",{})]),j=new Et.t({}),Q=new Et.t({}),oe=new Et.t({}),Ae=new Et.t(""),dt=new Hi(M,j,oe,Ae,Q,Tn,R,U.root);return dt.snapshot=U.root,new fa(new Ki(dt,[]),U)}class Hi{constructor(U,M,j,Q,oe,Ae,dt,Je){this.urlSubject=U,this.paramsSubject=M,this.queryParamsSubject=j,this.fragmentSubject=Q,this.dataSubject=oe,this.outlet=Ae,this.component=dt,this._futureSnapshot=Je,this.title=this.dataSubject?.pipe((0,ke.T)(Pt=>Pt[pr]))??(0,Xe.of)(void 0),this.url=U,this.params=M,this.queryParams=j,this.fragment=Q,this.data=oe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,ke.T)(U=>wn(U))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,ke.T)(U=>wn(U))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gs(R,U,M="emptyOnly"){let j;const{routeConfig:Q}=R;return j=null===U||"always"!==M&&""!==Q?.path&&(U.component||U.routeConfig?.loadComponent)?{params:{...R.params},data:{...R.data},resolve:{...R.data,...R._resolvedData??{}}}:{params:{...U.params,...R.params},data:{...U.data,...R.data},resolve:{...R.data,...U.data,...Q?.data,...R._resolvedData}},Q&&So(Q)&&(j.resolve[pr]=Q.title),j}class ls{get title(){return this.data?.[pr]}constructor(U,M,j,Q,oe,Ae,dt,Je,Pt){this.url=U,this.params=M,this.queryParams=j,this.fragment=Q,this.data=oe,this.outlet=Ae,this.component=dt,this.routeConfig=Je,this._resolve=Pt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wn(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(j=>j.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hu extends Ss{constructor(U,M){super(M),this.url=U,fo(this,M)}toString(){return za(this._root)}}function fo(R,U){U.value._routerState=R,U.children.forEach(M=>fo(R,M))}function za(R){const U=R.children.length>0?` { ${R.children.map(za).join(", ")} } `:"";return`${R.value}${U}`}function es(R){if(R.snapshot){const U=R.snapshot,M=R._futureSnapshot;R.snapshot=M,Kn(U.queryParams,M.queryParams)||R.queryParamsSubject.next(M.queryParams),U.fragment!==M.fragment&&R.fragmentSubject.next(M.fragment),Kn(U.params,M.params)||R.paramsSubject.next(M.params),function si(R,U){if(R.length!==U.length)return!1;for(let M=0;M<R.length;++M)if(!Kn(R[M],U[M]))return!1;return!0}(U.url,M.url)||R.urlSubject.next(M.url),Kn(U.data,M.data)||R.dataSubject.next(M.data)}else R.snapshot=R._futureSnapshot,R.dataSubject.next(R._futureSnapshot.data)}function ha(R,U){const M=Kn(R.params,U.params)&&function zi(R,U){return Wi(R,U)&&R.every((M,j)=>Kn(M.parameters,U[j].parameters))}(R.url,U.url);return M&&!(!R.parent!=!U.parent)&&(!R.parent||ha(R.parent,U.parent))}function So(R){return"string"==typeof R.title||null===R.title}let Da=(()=>{class R{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tn,this.activateEvents=new x.bkB,this.deactivateEvents=new x.bkB,this.attachEvents=new x.bkB,this.detachEvents=new x.bkB,this.parentContexts=(0,x.WQX)(Hs),this.location=(0,x.WQX)(x.c1b),this.changeDetector=(0,x.WQX)(x.gRc),this.inputBinder=(0,x.WQX)(Uo,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(M){if(M.name){const{firstChange:j,previousValue:Q}=M.name;if(j)return;this.isTrackedInParentContexts(Q)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(Q)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(M){return this.parentContexts.getContext(M)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const M=this.parentContexts.getContext(this.name);M?.route&&(M.attachRef?this.attach(M.attachRef,M.route):this.activateWith(M.route,M.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x.wOt(4012,!1);this.location.detach();const M=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(M.instance),M}attach(M,j){this.activated=M,this._activatedRoute=j,this.location.insert(M.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(M.instance)}deactivate(){if(this.activated){const M=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(M)}}activateWith(M,j){if(this.isActivated)throw new x.wOt(4013,!1);this._activatedRoute=M;const Q=this.location,Ae=M.snapshot.component,dt=this.parentContexts.getOrCreateContext(this.name).children,Je=new Wa(M,dt,Q.injector);this.activated=Q.createComponent(Ae,{index:Q.length,injector:Je,environmentInjector:j}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275dir=x.FsC({type:R,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[x.OA$]})}return R})();class Wa{__ngOutletInjector(U){return new Wa(this.route,this.childContexts,U)}constructor(U,M,j){this.route=U,this.childContexts=M,this.parent=j}get(U,M){return U===Hi?this.route:U===Hs?this.childContexts:this.parent.get(U,M)}}const Uo=new x.nKC("");let ho=(()=>{class R{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(M){this.unsubscribeFromRouteData(M),this.subscribeToRouteData(M)}unsubscribeFromRouteData(M){this.outletDataSubscriptions.get(M)?.unsubscribe(),this.outletDataSubscriptions.delete(M)}subscribeToRouteData(M){const{activatedRoute:j}=M,Q=(0,it.z)([j.queryParams,j.params,j.data]).pipe((0,bn.n)(([oe,Ae,dt],Je)=>(dt={...oe,...Ae,...dt},0===Je?(0,Xe.of)(dt):Promise.resolve(dt)))).subscribe(oe=>{if(!M.isActivated||!M.activatedComponentRef||M.activatedRoute!==j||null===j.component)return void this.unsubscribeFromRouteData(M);const Ae=(0,x.HJs)(j.component);if(Ae)for(const{templateName:dt}of Ae.inputs)M.activatedComponentRef.setInput(dt,oe[dt]);else this.unsubscribeFromRouteData(M)});this.outletDataSubscriptions.set(M,Q)}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac})}return R})();function Qr(R,U,M){if(M&&R.shouldReuseRoute(U.value,M.value.snapshot)){const j=M.value;j._futureSnapshot=U.value;const Q=function Eo(R,U,M){return U.children.map(j=>{for(const Q of M.children)if(R.shouldReuseRoute(j.value,Q.value.snapshot))return Qr(R,j,Q);return Qr(R,j)})}(R,U,M);return new Ki(j,Q)}{if(R.shouldAttach(U.value)){const oe=R.retrieve(U.value);if(null!==oe){const Ae=oe.route;return Ae.value._futureSnapshot=U.value,Ae.children=U.children.map(dt=>Qr(R,dt)),Ae}}const j=function Lu(R){return new Hi(new Et.t(R.url),new Et.t(R.params),new Et.t(R.queryParams),new Et.t(R.fragment),new Et.t(R.data),R.outlet,R.component,R)}(U.value),Q=U.children.map(oe=>Qr(R,oe));return new Ki(j,Q)}}class pa{constructor(U,M){this.redirectTo=U,this.navigationBehaviorOptions=M}}const gc="ngNavigationCancelingError";function qa(R,U){const{redirectTo:M,navigationBehaviorOptions:j}=As(U)?{redirectTo:U,navigationBehaviorOptions:void 0}:U,Q=nn(!1,ro.Redirect);return Q.url=M,Q.navigationBehaviorOptions=j,Q}function nn(R,U){const M=new Error(`NavigationCancelingError: ${R||""}`);return M[gc]=!0,M.cancellationCode=U,M}function hr(R){return!!R&&R[gc]}let $s=(()=>{class R{static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275cmp=x.VBU({type:R,selectors:[["ng-component"]],standalone:!0,features:[x.aNF],decls:1,vars:0,template:function(j,Q){1&j&&x.nrm(0,"router-outlet")},dependencies:[Da],encapsulation:2})}return R})();function ma(R){const U=R.children&&R.children.map(ma),M=U?{...R,children:U}:{...R};return!M.component&&!M.loadComponent&&(U||M.loadChildren)&&M.outlet&&M.outlet!==Tn&&(M.component=$s),M}function so(R){return R.outlet||Tn}function _a(R){if(!R)return null;if(R.routeConfig?._injector)return R.routeConfig._injector;for(let U=R.parent;U;U=U.parent){const M=U.routeConfig;if(M?._loadedInjector)return M._loadedInjector;if(M?._injector)return M._injector}return null}class Bc{constructor(U,M,j,Q,oe){this.routeReuseStrategy=U,this.futureState=M,this.currState=j,this.forwardEvent=Q,this.inputBindingEnabled=oe}activate(U){const M=this.futureState._root,j=this.currState?this.currState._root:null;this.deactivateChildRoutes(M,j,U),es(this.futureState.root),this.activateChildRoutes(M,j,U)}deactivateChildRoutes(U,M,j){const Q=us(M);U.children.forEach(oe=>{const Ae=oe.value.outlet;this.deactivateRoutes(oe,Q[Ae],j),delete Q[Ae]}),Object.values(Q).forEach(oe=>{this.deactivateRouteAndItsChildren(oe,j)})}deactivateRoutes(U,M,j){const Q=U.value,oe=M?M.value:null;if(Q===oe)if(Q.component){const Ae=j.getContext(Q.outlet);Ae&&this.deactivateChildRoutes(U,M,Ae.children)}else this.deactivateChildRoutes(U,M,j);else oe&&this.deactivateRouteAndItsChildren(M,j)}deactivateRouteAndItsChildren(U,M){U.value.component&&this.routeReuseStrategy.shouldDetach(U.value.snapshot)?this.detachAndStoreRouteSubtree(U,M):this.deactivateRouteAndOutlet(U,M)}detachAndStoreRouteSubtree(U,M){const j=M.getContext(U.value.outlet),Q=j&&U.value.component?j.children:M,oe=us(U);for(const Ae of Object.values(oe))this.deactivateRouteAndItsChildren(Ae,Q);if(j&&j.outlet){const Ae=j.outlet.detach(),dt=j.children.onOutletDeactivated();this.routeReuseStrategy.store(U.value.snapshot,{componentRef:Ae,route:U,contexts:dt})}}deactivateRouteAndOutlet(U,M){const j=M.getContext(U.value.outlet),Q=j&&U.value.component?j.children:M,oe=us(U);for(const Ae of Object.values(oe))this.deactivateRouteAndItsChildren(Ae,Q);j&&(j.outlet&&(j.outlet.deactivate(),j.children.onOutletDeactivated()),j.attachRef=null,j.route=null)}activateChildRoutes(U,M,j){const Q=us(M);U.children.forEach(oe=>{this.activateRoutes(oe,Q[oe.value.outlet],j),this.forwardEvent(new Fc(oe.value.snapshot))}),U.children.length&&this.forwardEvent(new Mi(U.value.snapshot))}activateRoutes(U,M,j){const Q=U.value,oe=M?M.value:null;if(es(Q),Q===oe)if(Q.component){const Ae=j.getOrCreateContext(Q.outlet);this.activateChildRoutes(U,M,Ae.children)}else this.activateChildRoutes(U,M,j);else if(Q.component){const Ae=j.getOrCreateContext(Q.outlet);if(this.routeReuseStrategy.shouldAttach(Q.snapshot)){const dt=this.routeReuseStrategy.retrieve(Q.snapshot);this.routeReuseStrategy.store(Q.snapshot,null),Ae.children.onOutletReAttached(dt.contexts),Ae.attachRef=dt.componentRef,Ae.route=dt.route.value,Ae.outlet&&Ae.outlet.attach(dt.componentRef,dt.route.value),es(dt.route.value),this.activateChildRoutes(U,null,Ae.children)}else{const dt=_a(Q.snapshot);Ae.attachRef=null,Ae.route=Q,Ae.injector=dt??Ae.injector,Ae.outlet&&Ae.outlet.activateWith(Q,Ae.injector),this.activateChildRoutes(U,null,Ae.children)}}else this.activateChildRoutes(U,null,j)}}class Tr{constructor(U){this.path=U,this.route=this.path[this.path.length-1]}}class jo{constructor(U,M){this.component=U,this.route=M}}function al(R,U,M){const j=R._root;return kn(j,U?U._root:null,M,[j.value])}function Ho(R,U){const M=Symbol(),j=U.get(R,M);return j===M?"function"!=typeof R||(0,x.LfX)(R)?U.get(R):R:j}function kn(R,U,M,j,Q={canDeactivateChecks:[],canActivateChecks:[]}){const oe=us(U);return R.children.forEach(Ae=>{(function Oa(R,U,M,j,Q={canDeactivateChecks:[],canActivateChecks:[]}){const oe=R.value,Ae=U?U.value:null,dt=M?M.getContext(R.value.outlet):null;if(Ae&&oe.routeConfig===Ae.routeConfig){const Je=function Xi(R,U,M){if("function"==typeof M)return M(R,U);switch(M){case"pathParamsChange":return!Wi(R.url,U.url);case"pathParamsOrQueryParamsChange":return!Wi(R.url,U.url)||!Kn(R.queryParams,U.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ha(R,U)||!Kn(R.queryParams,U.queryParams);default:return!ha(R,U)}}(Ae,oe,oe.routeConfig.runGuardsAndResolvers);Je?Q.canActivateChecks.push(new Tr(j)):(oe.data=Ae.data,oe._resolvedData=Ae._resolvedData),kn(R,U,oe.component?dt?dt.children:null:M,j,Q),Je&&dt&&dt.outlet&&dt.outlet.isActivated&&Q.canDeactivateChecks.push(new jo(dt.outlet.component,Ae))}else Ae&&Pa(U,dt,Q),Q.canActivateChecks.push(new Tr(j)),kn(R,null,oe.component?dt?dt.children:null:M,j,Q)})(Ae,oe[Ae.value.outlet],M,j.concat([Ae.value]),Q),delete oe[Ae.value.outlet]}),Object.entries(oe).forEach(([Ae,dt])=>Pa(dt,M.getContext(Ae),Q)),Q}function Pa(R,U,M){const j=us(R),Q=R.value;Object.entries(j).forEach(([oe,Ae])=>{Pa(Ae,Q.component?U?U.children.getContext(oe):null:U,M)}),M.canDeactivateChecks.push(new jo(Q.component&&U&&U.outlet&&U.outlet.isActivated?U.outlet.component:null,Q))}function Go(R){return"function"==typeof R}function Y(R){return R instanceof Ie||"EmptyError"===R?.name}const Z=Symbol("INITIAL_VALUE");function H(){return(0,bn.n)(R=>(0,it.z)(R.map(U=>U.pipe(_n(1),(0,Sn.Z)(Z)))).pipe((0,ke.T)(U=>{for(const M of U)if(!0!==M){if(M===Z)return Z;if(!1===M||se(M))return M}return!0}),sr(U=>U!==Z),_n(1)))}function se(R){return As(R)||R instanceof pa}function Ms(R){return(0,Ct.F)((0,Fe.M)(U=>{if("boolean"!=typeof U)throw qa(0,U)}),(0,ke.T)(U=>!0===U))}class fs{constructor(U){this.segmentGroup=U||null}}class Ka extends Error{constructor(U){super(),this.urlTree=U}}function ln(R){return kt(new fs(R))}class Sd{constructor(U,M){this.urlSerializer=U,this.urlTree=M}lineralizeSegments(U,M){let j=[],Q=M.root;for(;;){if(j=j.concat(Q.segments),0===Q.numberOfChildren)return(0,Xe.of)(j);if(Q.numberOfChildren>1||!Q.children[Tn])return kt(new x.wOt(4e3,!1));Q=Q.children[Tn]}}applyRedirectCommands(U,M,j,Q,oe){if("string"!=typeof M){const dt=M,{queryParams:Je,fragment:Pt,routeConfig:fn,url:En,outlet:xr,params:ar,data:rs,title:Ea}=Q,Ps=(0,x.N4e)(oe,()=>dt({params:ar,data:rs,queryParams:Je,fragment:Pt,routeConfig:fn,url:En,outlet:xr,title:Ea}));if(Ps instanceof Vn)throw new Ka(Ps);M=Ps}const Ae=this.applyRedirectCreateUrlTree(M,this.urlSerializer.parse(M),U,j);if("/"===M[0])throw new Ka(Ae);return Ae}applyRedirectCreateUrlTree(U,M,j,Q){const oe=this.createSegmentGroup(U,M.root,j,Q);return new Vn(oe,this.createQueryParams(M.queryParams,this.urlTree.queryParams),M.fragment)}createQueryParams(U,M){const j={};return Object.entries(U).forEach(([Q,oe])=>{if("string"==typeof oe&&":"===oe[0]){const dt=oe.substring(1);j[Q]=M[dt]}else j[Q]=oe}),j}createSegmentGroup(U,M,j,Q){const oe=this.createSegments(U,M.segments,j,Q);let Ae={};return Object.entries(M.children).forEach(([dt,Je])=>{Ae[dt]=this.createSegmentGroup(U,Je,j,Q)}),new Er(oe,Ae)}createSegments(U,M,j,Q){return M.map(oe=>":"===oe.path[0]?this.findPosParam(U,oe,Q):this.findOrReturn(oe,j))}findPosParam(U,M,j){const Q=j[M.path.substring(1)];if(!Q)throw new x.wOt(4001,!1);return Q}findOrReturn(U,M){let j=0;for(const Q of M){if(Q.path===U.path)return M.splice(j),Q;j++}return U}}const ui={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cr(R,U,M,j,Q){const oe=Xa(R,U,M);return oe.matched?(j=function Ra(R,U){return R.providers&&!R._injector&&(R._injector=(0,x.Ol2)(R.providers,U,`Route: ${R.path}`)),R._injector??U}(U,j),function Zr(R,U,M,j){const Q=U.canMatch;if(!Q||0===Q.length)return(0,Xe.of)(!0);const oe=Q.map(Ae=>{const dt=Ho(Ae,R);return Qn(function cl(R){return R&&Go(R.canMatch)}(dt)?dt.canMatch(U,M):(0,x.N4e)(R,()=>dt(U,M)))});return(0,Xe.of)(oe).pipe(H(),Ms())}(j,U,M).pipe((0,ke.T)(Ae=>!0===Ae?oe:{...ui}))):(0,Xe.of)(oe)}function Xa(R,U,M){if("**"===U.path)return function ul(R){return{matched:!0,parameters:R.length>0?Nt(R).parameters:{},consumedSegments:R,remainingSegments:[],positionalParamSegments:{}}}(M);if(""===U.path)return"full"===U.pathMatch&&(R.hasChildren()||M.length>0)?{...ui}:{matched:!0,consumedSegments:[],remainingSegments:M,parameters:{},positionalParamSegments:{}};const Q=(U.matcher||Br)(M,R,U);if(!Q)return{...ui};const oe={};Object.entries(Q.posParams??{}).forEach(([dt,Je])=>{oe[dt]=Je.path});const Ae=Q.consumed.length>0?{...oe,...Q.consumed[Q.consumed.length-1].parameters}:oe;return{matched:!0,consumedSegments:Q.consumed,remainingSegments:M.slice(Q.consumed.length),parameters:Ae,positionalParamSegments:Q.posParams??{}}}function Ur(R,U,M,j){return M.length>0&&function yc(R,U,M){return M.some(j=>ia(R,U,j)&&so(j)!==Tn)}(R,M,j)?{segmentGroup:new Er(U,Bu(j,new Er(M,R.children))),slicedSegments:[]}:0===M.length&&function mu(R,U,M){return M.some(j=>ia(R,U,j))}(R,M,j)?{segmentGroup:new Er(R.segments,ll(R,M,j,R.children)),slicedSegments:M}:{segmentGroup:new Er(R.segments,R.children),slicedSegments:M}}function ll(R,U,M,j){const Q={};for(const oe of M)if(ia(R,U,oe)&&!j[so(oe)]){const Ae=new Er([],{});Q[so(oe)]=Ae}return{...j,...Q}}function Bu(R,U){const M={};M[Tn]=U;for(const j of R)if(""===j.path&&so(j)!==Tn){const Q=new Er([],{});M[so(j)]=Q}return M}function ia(R,U,M){return(!(R.hasChildren()||U.length>0)||"full"!==M.pathMatch)&&""===M.path}class Ec{}class ur{constructor(U,M,j,Q,oe,Ae,dt){this.injector=U,this.configLoader=M,this.rootComponentType=j,this.config=Q,this.urlTree=oe,this.paramsInheritanceStrategy=Ae,this.urlSerializer=dt,this.applyRedirects=new Sd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(U){return new x.wOt(4002,`'${U.segmentGroup}'`)}recognize(){const U=Ur(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(U).pipe((0,ke.T)(({children:M,rootSnapshot:j})=>{const Q=new Ki(j,M),oe=new hu("",Q),Ae=function du(R,U,M=null,j=null){return We(vt(R),U,M,j)}(j,[],this.urlTree.queryParams,this.urlTree.fragment);return Ae.queryParams=this.urlTree.queryParams,oe.url=this.urlSerializer.serialize(Ae),{state:oe,tree:Ae}}))}match(U){const M=new ls([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Tn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,U,Tn,M).pipe((0,ke.T)(j=>({children:j,rootSnapshot:M})),he(j=>{if(j instanceof Ka)return this.urlTree=j.urlTree,this.match(j.urlTree.root);throw j instanceof fs?this.noMatchError(j):j}))}processSegmentGroup(U,M,j,Q,oe){return 0===j.segments.length&&j.hasChildren()?this.processChildren(U,M,j,oe):this.processSegment(U,M,j,j.segments,Q,!0,oe).pipe((0,ke.T)(Ae=>Ae instanceof Ki?[Ae]:[]))}processChildren(U,M,j,Q){const oe=[];for(const Ae of Object.keys(j.children))"primary"===Ae?oe.unshift(Ae):oe.push(Ae);return(0,Ee.H)(oe).pipe(xt(Ae=>{const dt=j.children[Ae],Je=function Ei(R,U){const M=R.filter(j=>so(j)===U);return M.push(...R.filter(j=>so(j)!==U)),M}(M,Ae);return this.processSegmentGroup(U,Je,dt,Ae,Q)}),function mt(R,U){return(0,Dt.N)(function _e(R,U,M,j,Q){return(oe,Ae)=>{let dt=M,Je=U,Pt=0;oe.subscribe((0,It._)(Ae,fn=>{const En=Pt++;Je=dt?R(Je,fn,En):(dt=!0,fn),j&&Ae.next(Je)},Q&&(()=>{dt&&Ae.next(Je),Ae.complete()})))}}(R,U,arguments.length>=2,!0))}((Ae,dt)=>(Ae.push(...dt),Ae)),bt(null),function jn(R,U){const M=arguments.length>=2;return j=>j.pipe(R?sr((Q,oe)=>R(Q,oe,j)):Pe.D,zt(1),M?bt(U):gn(()=>new Ie))}(),(0,Se.Z)(Ae=>{if(null===Ae)return ln(j);const dt=Na(Ae);return function Qa(R){R.sort((U,M)=>U.value.outlet===Tn?-1:M.value.outlet===Tn?1:U.value.outlet.localeCompare(M.value.outlet))}(dt),(0,Xe.of)(dt)}))}processSegment(U,M,j,Q,oe,Ae,dt){return(0,Ee.H)(M).pipe(xt(Je=>this.processSegmentAgainstRoute(Je._injector??U,M,Je,j,Q,oe,Ae,dt).pipe(he(Pt=>{if(Pt instanceof fs)return(0,Xe.of)(null);throw Pt}))),je(Je=>!!Je),he(Je=>{if(Y(Je))return function _u(R,U,M){return 0===U.length&&!R.children[M]}(j,Q,oe)?(0,Xe.of)(new Ec):ln(j);throw Je}))}processSegmentAgainstRoute(U,M,j,Q,oe,Ae,dt,Je){return function Bl(R,U,M,j){return!!(so(R)===j||j!==Tn&&ia(U,M,R))&&Xa(U,R,M).matched}(j,Q,oe,Ae)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(U,Q,j,oe,Ae,Je):this.allowRedirects&&dt?this.expandSegmentAgainstRouteUsingRedirect(U,Q,M,j,oe,Ae,Je):ln(Q):ln(Q)}expandSegmentAgainstRouteUsingRedirect(U,M,j,Q,oe,Ae,dt){const{matched:Je,parameters:Pt,consumedSegments:fn,positionalParamSegments:En,remainingSegments:xr}=Xa(M,Q,oe);if(!Je)return ln(M);"string"==typeof Q.redirectTo&&"/"===Q.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const ar=new ls(oe,Pt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zn(Q),so(Q),Q.component??Q._loadedComponent??null,Q,Or(Q)),rs=Gs(ar,dt,this.paramsInheritanceStrategy);ar.params=Object.freeze(rs.params),ar.data=Object.freeze(rs.data);const Ea=this.applyRedirects.applyRedirectCommands(fn,Q.redirectTo,En,ar,U);return this.applyRedirects.lineralizeSegments(Q,Ea).pipe((0,Se.Z)(Ps=>this.processSegment(U,j,M,Ps.concat(xr),Ae,!1,dt)))}matchSegmentAgainstRoute(U,M,j,Q,oe,Ae){const dt=cr(M,j,Q,U);return"**"===j.path&&(M.children={}),dt.pipe((0,bn.n)(Je=>Je.matched?this.getChildConfig(U=j._injector??U,j,Q).pipe((0,bn.n)(({routes:Pt})=>{const fn=j._loadedInjector??U,{parameters:En,consumedSegments:xr,remainingSegments:ar}=Je,rs=new ls(xr,En,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zn(j),so(j),j.component??j._loadedComponent??null,j,Or(j)),Ea=Gs(rs,Ae,this.paramsInheritanceStrategy);rs.params=Object.freeze(Ea.params),rs.data=Object.freeze(Ea.data);const{segmentGroup:Ps,slicedSegments:zc}=Ur(M,xr,ar,Pt);if(0===zc.length&&Ps.hasChildren())return this.processChildren(fn,Pt,Ps,rs).pipe((0,ke.T)(is=>new Ki(rs,is)));if(0===Pt.length&&0===zc.length)return(0,Xe.of)(new Ki(rs,[]));const Za=so(j)===oe;return this.processSegment(fn,Pt,Ps,zc,Za?Tn:oe,!0,rs).pipe((0,ke.T)(is=>new Ki(rs,is instanceof Ki?[is]:[])))})):ln(M)))}getChildConfig(U,M,j){return M.children?(0,Xe.of)({routes:M.children,injector:U}):M.loadChildren?void 0!==M._loadedRoutes?(0,Xe.of)({routes:M._loadedRoutes,injector:M._loadedInjector}):function gu(R,U,M,j){const Q=U.canLoad;if(void 0===Q||0===Q.length)return(0,Xe.of)(!0);const oe=Q.map(Ae=>{const dt=Ho(Ae,R);return Qn(function Rs(R){return R&&Go(R.canLoad)}(dt)?dt.canLoad(U,M):(0,x.N4e)(R,()=>dt(U,M)))});return(0,Xe.of)(oe).pipe(H(),Ms())}(U,M,j).pipe((0,Se.Z)(Q=>Q?this.configLoader.loadChildren(U,M).pipe((0,Fe.M)(oe=>{M._loadedRoutes=oe.routes,M._loadedInjector=oe.injector})):function Zn(R){return kt(nn(!1,ro.GuardRejected))}())):(0,Xe.of)({routes:[],injector:U})}}function Ci(R){const U=R.value.routeConfig;return U&&""===U.path}function Na(R){const U=[],M=new Set;for(const j of R){if(!Ci(j)){U.push(j);continue}const Q=U.find(oe=>j.value.routeConfig===oe.value.routeConfig);void 0!==Q?(Q.children.push(...j.children),M.add(Q)):U.push(j)}for(const j of M){const Q=Na(j.children);U.push(new Ki(j.value,Q))}return U.filter(j=>!M.has(j))}function zn(R){return R.data||{}}function Or(R){return R.resolve||{}}function _r(R){const U=R.children.map(M=>_r(M)).flat();return[R,...U]}function re(R){return(0,bn.n)(U=>{const M=R(U);return M?(0,Ee.H)(M).pipe((0,ke.T)(()=>U)):(0,Xe.of)(U)})}let W=(()=>{class R{buildTitle(M){let j,Q=M.root;for(;void 0!==Q;)j=this.getResolvedTitleForRoute(Q)??j,Q=Q.children.find(oe=>oe.outlet===Tn);return j}getResolvedTitleForRoute(M){return M.data[pr]}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=x.jDH({token:R,factory:()=>(0,x.WQX)(ne),providedIn:"root"})}return R})(),ne=(()=>{class R extends W{constructor(M){super(),this.title=M}updateTitle(M){const j=this.buildTitle(M);void 0!==j&&this.title.setTitle(j)}static#e=this.\u0275fac=function(j){return new(j||R)(x.KVO(qr.hE))};static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const Ce=new x.nKC("",{providedIn:"root",factory:()=>({})}),ut=new x.nKC("");let gt=(()=>{class R{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,x.WQX)(x.Ql9)}loadComponent(M){if(this.componentLoaders.get(M))return this.componentLoaders.get(M);if(M._loadedComponent)return(0,Xe.of)(M._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(M);const j=Qn(M.loadComponent()).pipe((0,ke.T)($r),(0,Fe.M)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(M),M._loadedComponent=oe}),qn(()=>{this.componentLoaders.delete(M)})),Q=new Lt(j,()=>new At.B).pipe(_t());return this.componentLoaders.set(M,Q),Q}loadChildren(M,j){if(this.childrenLoaders.get(j))return this.childrenLoaders.get(j);if(j._loadedRoutes)return(0,Xe.of)({routes:j._loadedRoutes,injector:j._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(j);const oe=function vn(R,U,M,j){return Qn(R.loadChildren()).pipe((0,ke.T)($r),(0,Se.Z)(Q=>Q instanceof x.Co$||Array.isArray(Q)?(0,Xe.of)(Q):(0,Ee.H)(U.compileModuleAsync(Q))),(0,ke.T)(Q=>{j&&j(R);let oe,Ae,dt=!1;return Array.isArray(Q)?(Ae=Q,!0):(oe=Q.create(M).injector,Ae=oe.get(ut,[],{optional:!0,self:!0}).flat()),{routes:Ae.map(ma),injector:oe}}))}(j,this.compiler,M,this.onLoadEndListener).pipe(qn(()=>{this.childrenLoaders.delete(j)})),Ae=new Lt(oe,()=>new At.B).pipe(_t());return this.childrenLoaders.set(j,Ae),Ae}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function $r(R){return function dn(R){return R&&"object"==typeof R&&"default"in R}(R)?R.default:R}let tr=(()=>{class R{static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=x.jDH({token:R,factory:()=>(0,x.WQX)(wr),providedIn:"root"})}return R})(),wr=(()=>{class R{shouldProcessUrl(M){return!0}extract(M){return M}merge(M,j){return M}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const dr=new x.nKC(""),qe=new x.nKC("");function Qi(R,U,M){const j=R.get(qe),Q=R.get(Ht.qQ);return R.get(x.SKi).runOutsideAngular(()=>{if(!Q.startViewTransition||j.skipNextTransition)return j.skipNextTransition=!1,new Promise(Pt=>setTimeout(Pt));let oe;const Ae=new Promise(Pt=>{oe=Pt}),dt=Q.startViewTransition(()=>(oe(),function ts(R){return new Promise(U=>{(0,x.mal)(U,{injector:R})})}(R))),{onViewTransitionCreated:Je}=j;return Je&&(0,x.N4e)(R,()=>Je({transition:dt,from:U,to:M})),Ae})}const ns=new x.nKC("");let Mo=(()=>{class R{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new At.B,this.transitionAbortSubject=new At.B,this.configLoader=(0,x.WQX)(gt),this.environmentInjector=(0,x.WQX)(x.uvJ),this.urlSerializer=(0,x.WQX)(ei),this.rootContexts=(0,x.WQX)(Hs),this.location=(0,x.WQX)(Ht.aZ),this.inputBindingEnabled=null!==(0,x.WQX)(Uo,{optional:!0}),this.titleStrategy=(0,x.WQX)(W),this.options=(0,x.WQX)(Ce,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,x.WQX)(tr),this.createViewTransition=(0,x.WQX)(dr,{optional:!0}),this.navigationErrorHandler=(0,x.WQX)(ns,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Xe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=Q=>this.events.next(new Bo(Q)),this.configLoader.onLoadStartListener=Q=>this.events.next(new Vi(Q))}complete(){this.transitions?.complete()}handleNavigationRequest(M){const j=++this.navigationId;this.transitions?.next({...this.transitions.value,...M,id:j})}setupNavigations(M,j,Q){return this.transitions=new Et.t({id:0,currentUrlTree:j,currentRawUrl:j,extractedUrl:this.urlHandlingStrategy.extract(j),urlAfterRedirects:this.urlHandlingStrategy.extract(j),rawUrl:j,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ts,restoredState:null,currentSnapshot:Q.snapshot,targetSnapshot:null,currentRouterState:Q,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(sr(oe=>0!==oe.id),(0,ke.T)(oe=>({...oe,extractedUrl:this.urlHandlingStrategy.extract(oe.rawUrl)})),(0,bn.n)(oe=>{let Ae=!1,dt=!1;return(0,Xe.of)(oe).pipe((0,bn.n)(Je=>{if(this.navigationId>oe.id)return this.cancelNavigationTransition(oe,"",ro.SupersededByNewNavigation),Bt;this.currentTransition=oe,this.currentNavigation={id:Je.id,initialUrl:Je.rawUrl,extractedUrl:Je.extractedUrl,trigger:Je.source,extras:Je.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Pt=!M.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!Pt&&"reload"!==(Je.extras.onSameUrlNavigation??M.onSameUrlNavigation)){const En="";return this.events.next(new yi(Je.id,this.urlSerializer.serialize(Je.rawUrl),En,Ar.IgnoredSameUrlNavigation)),Je.resolve(!1),Bt}if(this.urlHandlingStrategy.shouldProcessUrl(Je.rawUrl))return(0,Xe.of)(Je).pipe((0,bn.n)(En=>{const xr=this.transitions?.getValue();return this.events.next(new To(En.id,this.urlSerializer.serialize(En.extractedUrl),En.source,En.restoredState)),xr!==this.transitions?.getValue()?Bt:Promise.resolve(En)}),function Yt(R,U,M,j,Q,oe){return(0,Se.Z)(Ae=>function Jr(R,U,M,j,Q,oe,Ae="emptyOnly"){return new ur(R,U,M,j,Q,Ae,oe).recognize()}(R,U,M,j,Ae.extractedUrl,Q,oe).pipe((0,ke.T)(({state:dt,tree:Je})=>({...Ae,targetSnapshot:dt,urlAfterRedirects:Je}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,M.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Fe.M)(En=>{oe.targetSnapshot=En.targetSnapshot,oe.urlAfterRedirects=En.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:En.urlAfterRedirects};const xr=new ua(En.id,this.urlSerializer.serialize(En.extractedUrl),this.urlSerializer.serialize(En.urlAfterRedirects),En.targetSnapshot);this.events.next(xr)}));if(Pt&&this.urlHandlingStrategy.shouldProcessUrl(Je.currentRawUrl)){const{id:En,extractedUrl:xr,source:ar,restoredState:rs,extras:Ea}=Je,Ps=new To(En,this.urlSerializer.serialize(xr),ar,rs);this.events.next(Ps);const zc=Sa(this.rootComponentType).snapshot;return this.currentTransition=oe={...Je,targetSnapshot:zc,urlAfterRedirects:xr,extras:{...Ea,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=xr,(0,Xe.of)(oe)}{const En="";return this.events.next(new yi(Je.id,this.urlSerializer.serialize(Je.extractedUrl),En,Ar.IgnoredByUrlHandlingStrategy)),Je.resolve(!1),Bt}}),(0,Fe.M)(Je=>{const Pt=new qi(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects),Je.targetSnapshot);this.events.next(Pt)}),(0,ke.T)(Je=>(this.currentTransition=oe={...Je,guards:al(Je.targetSnapshot,Je.currentSnapshot,this.rootContexts)},oe)),function Te(R,U){return(0,Se.Z)(M=>{const{targetSnapshot:j,currentSnapshot:Q,guards:{canActivateChecks:oe,canDeactivateChecks:Ae}}=M;return 0===Ae.length&&0===oe.length?(0,Xe.of)({...M,guardsResult:!0}):function Ot(R,U,M,j){return(0,Ee.H)(R).pipe((0,Se.Z)(Q=>function Dn(R,U,M,j,Q){const oe=U&&U.routeConfig?U.routeConfig.canDeactivate:null;if(!oe||0===oe.length)return(0,Xe.of)(!0);const Ae=oe.map(dt=>{const Je=_a(U)??Q,Pt=Ho(dt,Je);return Qn(function Vu(R){return R&&Go(R.canDeactivate)}(Pt)?Pt.canDeactivate(R,U,M,j):(0,x.N4e)(Je,()=>Pt(R,U,M,j))).pipe(je())});return(0,Xe.of)(Ae).pipe(H())}(Q.component,Q.route,M,U,j)),je(Q=>!0!==Q,!0))}(Ae,j,Q,R).pipe((0,Se.Z)(dt=>dt&&function Yr(R){return"boolean"==typeof R}(dt)?function $n(R,U,M,j){return(0,Ee.H)(U).pipe(xt(Q=>(0,Oe.x)(function va(R,U){return null!==R&&U&&U(new Jo(R)),(0,Xe.of)(!0)}(Q.route.parent,j),function $o(R,U){return null!==R&&U&&U(new xs(R)),(0,Xe.of)(!0)}(Q.route,j),function zs(R,U,M){const j=U[U.length-1],oe=U.slice(0,U.length-1).reverse().map(Ae=>function Uc(R){const U=R.routeConfig?R.routeConfig.canActivateChild:null;return U&&0!==U.length?{node:R,guards:U}:null}(Ae)).filter(Ae=>null!==Ae).map(Ae=>Be(()=>{const dt=Ae.guards.map(Je=>{const Pt=_a(Ae.node)??M,fn=Ho(Je,Pt);return Qn(function Do(R){return R&&Go(R.canActivateChild)}(fn)?fn.canActivateChild(j,R):(0,x.N4e)(Pt,()=>fn(j,R))).pipe(je())});return(0,Xe.of)(dt).pipe(H())}));return(0,Xe.of)(oe).pipe(H())}(R,Q.path,M),function Ro(R,U,M){const j=U.routeConfig?U.routeConfig.canActivate:null;if(!j||0===j.length)return(0,Xe.of)(!0);const Q=j.map(oe=>Be(()=>{const Ae=_a(U)??M,dt=Ho(oe,Ae);return Qn(function _c(R){return R&&Go(R.canActivate)}(dt)?dt.canActivate(U,R):(0,x.N4e)(Ae,()=>dt(U,R))).pipe(je())}));return(0,Xe.of)(Q).pipe(H())}(R,Q.route,M))),je(Q=>!0!==Q,!0))}(j,oe,R,U):(0,Xe.of)(dt)),(0,ke.T)(dt=>({...M,guardsResult:dt})))})}(this.environmentInjector,Je=>this.events.next(Je)),(0,Fe.M)(Je=>{if(oe.guardsResult=Je.guardsResult,Je.guardsResult&&"boolean"!=typeof Je.guardsResult)throw qa(0,Je.guardsResult);const Pt=new Ri(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects),Je.targetSnapshot,!!Je.guardsResult);this.events.next(Pt)}),sr(Je=>!!Je.guardsResult||(this.cancelNavigationTransition(Je,"",ro.GuardRejected),!1)),re(Je=>{if(Je.guards.canActivateChecks.length)return(0,Xe.of)(Je).pipe((0,Fe.M)(Pt=>{const fn=new js(Pt.id,this.urlSerializer.serialize(Pt.extractedUrl),this.urlSerializer.serialize(Pt.urlAfterRedirects),Pt.targetSnapshot);this.events.next(fn)}),(0,bn.n)(Pt=>{let fn=!1;return(0,Xe.of)(Pt).pipe(function Dd(R,U){return(0,Se.Z)(M=>{const{targetSnapshot:j,guards:{canActivateChecks:Q}}=M;if(!Q.length)return(0,Xe.of)(M);const oe=new Set(Q.map(Je=>Je.route)),Ae=new Set;for(const Je of oe)if(!Ae.has(Je))for(const Pt of _r(Je))Ae.add(Pt);let dt=0;return(0,Ee.H)(Ae).pipe(xt(Je=>oe.has(Je)?function Ih(R,U,M,j){const Q=R.routeConfig,oe=R._resolve;return void 0!==Q?.title&&!So(Q)&&(oe[pr]=Q.title),function po(R,U,M,j){const Q=cn(R);if(0===Q.length)return(0,Xe.of)({});const oe={};return(0,Ee.H)(Q).pipe((0,Se.Z)(Ae=>function F(R,U,M,j){const Q=_a(U)??j,oe=Ho(R,Q);return Qn(oe.resolve?oe.resolve(U,M):(0,x.N4e)(Q,()=>oe(U,M)))}(R[Ae],U,M,j).pipe(je(),(0,Fe.M)(dt=>{if(dt instanceof pa)throw qa(new Cr,dt);oe[Ae]=dt}))),zt(1),function en(R){return(0,ke.T)(()=>R)}(oe),he(Ae=>Y(Ae)?Bt:kt(Ae)))}(oe,R,U,j).pipe((0,ke.T)(Ae=>(R._resolvedData=Ae,R.data=Gs(R,R.parent,M).resolve,null)))}(Je,j,R,U):(Je.data=Gs(Je,Je.parent,R).resolve,(0,Xe.of)(void 0))),(0,Fe.M)(()=>dt++),zt(1),(0,Se.Z)(Je=>dt===Ae.size?(0,Xe.of)(M):Bt))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Fe.M)({next:()=>fn=!0,complete:()=>{fn||this.cancelNavigationTransition(Pt,"",ro.NoDataFromResolver)}}))}),(0,Fe.M)(Pt=>{const fn=new Vl(Pt.id,this.urlSerializer.serialize(Pt.extractedUrl),this.urlSerializer.serialize(Pt.urlAfterRedirects),Pt.targetSnapshot);this.events.next(fn)}))}),re(Je=>{const Pt=fn=>{const En=[];fn.routeConfig?.loadComponent&&!fn.routeConfig._loadedComponent&&En.push(this.configLoader.loadComponent(fn.routeConfig).pipe((0,Fe.M)(xr=>{fn.component=xr}),(0,ke.T)(()=>{})));for(const xr of fn.children)En.push(...Pt(xr));return En};return(0,it.z)(Pt(Je.targetSnapshot.root)).pipe(bt(null),_n(1))}),re(()=>this.afterPreactivation()),(0,bn.n)(()=>{const{currentSnapshot:Je,targetSnapshot:Pt}=oe,fn=this.createViewTransition?.(this.environmentInjector,Je.root,Pt.root);return fn?(0,Ee.H)(fn).pipe((0,ke.T)(()=>oe)):(0,Xe.of)(oe)}),(0,ke.T)(Je=>{const Pt=function Lc(R,U,M){const j=Qr(R,U._root,M?M._root:void 0);return new fa(j,U)}(M.routeReuseStrategy,Je.targetSnapshot,Je.currentRouterState);return this.currentTransition=oe={...Je,targetRouterState:Pt},this.currentNavigation.targetRouterState=Pt,oe}),(0,Fe.M)(()=>{this.events.next(new xo)}),((R,U,M,j)=>(0,ke.T)(Q=>(new Bc(U,Q.targetRouterState,Q.currentRouterState,M,j).activate(R),Q)))(this.rootContexts,M.routeReuseStrategy,Je=>this.events.next(Je),this.inputBindingEnabled),_n(1),(0,Fe.M)({next:Je=>{Ae=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zo(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects))),this.titleStrategy?.updateTitle(Je.targetRouterState.snapshot),Je.resolve(!0)},complete:()=>{Ae=!0}}),function to(R){return(0,Dt.N)((U,M)=>{(0,pt.Tg)(R).subscribe((0,It._)(M,()=>M.complete(),jr.l)),!M.closed&&U.subscribe(M)})}(this.transitionAbortSubject.pipe((0,Fe.M)(Je=>{throw Je}))),qn(()=>{!Ae&&!dt&&this.cancelNavigationTransition(oe,"",ro.SupersededByNewNavigation),this.currentTransition?.id===oe.id&&(this.currentNavigation=null,this.currentTransition=null)}),he(Je=>{if(dt=!0,hr(Je))this.events.next(new as(oe.id,this.urlSerializer.serialize(oe.extractedUrl),Je.message,Je.cancellationCode)),function Xn(R){return hr(R)&&As(R.url)}(Je)?this.events.next(new na(Je.url,Je.navigationBehaviorOptions)):oe.resolve(!1);else{const Pt=new Gn(oe.id,this.urlSerializer.serialize(oe.extractedUrl),Je,oe.targetSnapshot??void 0);try{const fn=(0,x.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(Pt));if(fn instanceof pa){const{message:En,cancellationCode:xr}=qa(0,fn);this.events.next(new as(oe.id,this.urlSerializer.serialize(oe.extractedUrl),En,xr)),this.events.next(new na(fn.redirectTo,fn.navigationBehaviorOptions))}else{this.events.next(Pt);const En=M.errorHandler(Je);oe.resolve(!!En)}}catch(fn){this.options.resolveNavigationPromiseOnError?oe.resolve(!1):oe.reject(fn)}}return Bt}))}))}cancelNavigationTransition(M,j,Q){const oe=new as(M.id,this.urlSerializer.serialize(M.extractedUrl),j,Q);this.events.next(oe),M.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function Ya(R){return R!==Ts}let Oi=(()=>{class R{static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=x.jDH({token:R,factory:()=>(0,x.WQX)(mn),providedIn:"root"})}return R})();class ya{shouldDetach(U){return!1}store(U,M){}shouldAttach(U){return!1}retrieve(U){return null}shouldReuseRoute(U,M){return U.routeConfig===M.routeConfig}}let mn=(()=>{class R extends ya{static#e=this.\u0275fac=(()=>{let M;return function(Q){return(M||(M=x.xGo(R)))(Q||R)}})();static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})(),hs=(()=>{class R{static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=x.jDH({token:R,factory:()=>(0,x.WQX)(Ws),providedIn:"root"})}return R})(),Ws=(()=>{class R extends hs{constructor(){super(...arguments),this.location=(0,x.WQX)(Ht.aZ),this.urlSerializer=(0,x.WQX)(ei),this.options=(0,x.WQX)(Ce,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,x.WQX)(tr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Vn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Sa(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(M){return this.location.subscribe(j=>{"popstate"===j.type&&M(j.url,j.state)})}handleRouterEvent(M,j){if(M instanceof To)this.stateMemento=this.createStateMemento();else if(M instanceof yi)this.rawUrlTree=j.initialUrl;else if(M instanceof ua){if("eager"===this.urlUpdateStrategy&&!j.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(j.finalUrl,j.initialUrl);this.setBrowserUrl(Q,j)}}else M instanceof xo?(this.currentUrlTree=j.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(j.finalUrl,j.initialUrl),this.routerState=j.targetRouterState,"deferred"===this.urlUpdateStrategy&&(j.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,j))):M instanceof as&&(M.code===ro.GuardRejected||M.code===ro.NoDataFromResolver)?this.restoreHistory(j):M instanceof Gn?this.restoreHistory(j,!0):M instanceof Zo&&(this.lastSuccessfulId=M.id,this.currentPageId=this.browserPageId)}setBrowserUrl(M,j){const Q=this.urlSerializer.serialize(M);if(this.location.isCurrentPathEqualTo(Q)||j.extras.replaceUrl){const Ae={...j.extras.state,...this.generateNgRouterState(j.id,this.browserPageId)};this.location.replaceState(Q,"",Ae)}else{const oe={...j.extras.state,...this.generateNgRouterState(j.id,this.browserPageId+1)};this.location.go(Q,"",oe)}}restoreHistory(M,j=!1){if("computed"===this.canceledNavigationResolution){const oe=this.currentPageId-this.browserPageId;0!==oe?this.location.historyGo(oe):this.currentUrlTree===M.finalUrl&&0===oe&&(this.resetState(M),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(j&&this.resetState(M),this.resetUrlToCurrentUrlTree())}resetState(M){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,M.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(M,j){return"computed"===this.canceledNavigationResolution?{navigationId:M,\u0275routerPageId:j}:{navigationId:M}}static#e=this.\u0275fac=(()=>{let M;return function(Q){return(M||(M=x.xGo(R)))(Q||R)}})();static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();var Oo=function(R){return R[R.COMPLETE=0]="COMPLETE",R[R.FAILED=1]="FAILED",R[R.REDIRECTING=2]="REDIRECTING",R}(Oo||{});function dl(R,U){R.events.pipe(sr(M=>M instanceof Zo||M instanceof as||M instanceof Gn||M instanceof yi),(0,ke.T)(M=>M instanceof Zo||M instanceof yi?Oo.COMPLETE:M instanceof as&&(M.code===ro.Redirect||M.code===ro.SupersededByNewNavigation)?Oo.REDIRECTING:Oo.FAILED),sr(M=>M!==Oo.REDIRECTING),_n(1)).subscribe(()=>{U()})}function Rd(R){throw R}const Md={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ps={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let li=(()=>{class R{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,x.WQX)(x.H3F),this.stateManager=(0,x.WQX)(hs),this.options=(0,x.WQX)(Ce,{optional:!0})||{},this.pendingTasks=(0,x.WQX)(x.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,x.WQX)(Mo),this.urlSerializer=(0,x.WQX)(ei),this.location=(0,x.WQX)(Ht.aZ),this.urlHandlingStrategy=(0,x.WQX)(tr),this._events=new At.B,this.errorHandler=this.options.errorHandler||Rd,this.navigated=!1,this.routeReuseStrategy=(0,x.WQX)(Oi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,x.WQX)(ut,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,x.WQX)(Uo,{optional:!0}),this.eventsSubscription=new Jn.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:M=>{this.console.warn(M)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const M=this.navigationTransitions.events.subscribe(j=>{try{const Q=this.navigationTransitions.currentTransition,oe=this.navigationTransitions.currentNavigation;if(null!==Q&&null!==oe)if(this.stateManager.handleRouterEvent(j,oe),j instanceof as&&j.code!==ro.Redirect&&j.code!==ro.SupersededByNewNavigation)this.navigated=!0;else if(j instanceof Zo)this.navigated=!0;else if(j instanceof na){const Ae=j.navigationBehaviorOptions,dt=this.urlHandlingStrategy.merge(j.url,Q.currentRawUrl),Je={info:Q.extras.info,skipLocationChange:Q.extras.skipLocationChange,replaceUrl:Q.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Ya(Q.source),...Ae};this.scheduleNavigation(dt,Ts,null,Je,{resolve:Q.resolve,reject:Q.reject,promise:Q.promise})}(function oa(R){return!(R instanceof xo||R instanceof na)})(j)&&this._events.next(j)}catch(Q){this.navigationTransitions.transitionAbortSubject.next(Q)}});this.eventsSubscription.add(M)}resetRootComponentType(M){this.routerState.root.component=M,this.navigationTransitions.rootComponentType=M}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ts,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((M,j)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(M,"popstate",j)},0)})}navigateToSyncWithBrowser(M,j,Q){const oe={replaceUrl:!0},Ae=Q?.navigationId?Q:null;if(Q){const Je={...Q};delete Je.navigationId,delete Je.\u0275routerPageId,0!==Object.keys(Je).length&&(oe.state=Je)}const dt=this.parseUrl(M);this.scheduleNavigation(dt,j,Ae,oe)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(M){this.config=M.map(ma),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(M,j={}){const{relativeTo:Q,queryParams:oe,fragment:Ae,queryParamsHandling:dt,preserveFragment:Je}=j,Pt=Je?this.currentUrlTree.fragment:Ae;let En,fn=null;switch(dt){case"merge":fn={...this.currentUrlTree.queryParams,...oe};break;case"preserve":fn=this.currentUrlTree.queryParams;break;default:fn=oe||null}null!==fn&&(fn=this.removeEmptyProps(fn));try{En=vt(Q?Q.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof M[0]||"/"!==M[0][0])&&(M=[]),En=this.currentUrlTree.root}return We(En,M,fn,Pt??null)}navigateByUrl(M,j={skipLocationChange:!1}){const Q=As(M)?M:this.parseUrl(M),oe=this.urlHandlingStrategy.merge(Q,this.rawUrlTree);return this.scheduleNavigation(oe,Ts,null,j)}navigate(M,j={skipLocationChange:!1}){return function Od(R){for(let U=0;U<R.length;U++)if(null==R[U])throw new x.wOt(4008,!1)}(M),this.navigateByUrl(this.createUrlTree(M,j),j)}serializeUrl(M){return this.urlSerializer.serialize(M)}parseUrl(M){try{return this.urlSerializer.parse(M)}catch{return this.urlSerializer.parse("/")}}isActive(M,j){let Q;if(Q=!0===j?{...Md}:!1===j?{...ps}:j,As(M))return zr(this.currentUrlTree,M,Q);const oe=this.parseUrl(M);return zr(this.currentUrlTree,oe,Q)}removeEmptyProps(M){return Object.entries(M).reduce((j,[Q,oe])=>(null!=oe&&(j[Q]=oe),j),{})}scheduleNavigation(M,j,Q,oe,Ae){if(this.disposed)return Promise.resolve(!1);let dt,Je,Pt;Ae?(dt=Ae.resolve,Je=Ae.reject,Pt=Ae.promise):Pt=new Promise((En,xr)=>{dt=En,Je=xr});const fn=this.pendingTasks.add();return dl(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(fn))}),this.navigationTransitions.handleNavigationRequest({source:j,restoredState:Q,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:M,extras:oe,resolve:dt,reject:Je,promise:Pt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Pt.catch(En=>Promise.reject(En))}static#e=this.\u0275fac=function(j){return new(j||R)};static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();class sn{}let Hu=(()=>{class R{constructor(M,j,Q,oe,Ae){this.router=M,this.injector=Q,this.preloadingStrategy=oe,this.loader=Ae}setUpPreloading(){this.subscription=this.router.events.pipe(sr(M=>M instanceof Zo),xt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(M,j){const Q=[];for(const oe of j){oe.providers&&!oe._injector&&(oe._injector=(0,x.Ol2)(oe.providers,M,`Route: ${oe.path}`));const Ae=oe._injector??M,dt=oe._loadedInjector??Ae;(oe.loadChildren&&!oe._loadedRoutes&&void 0===oe.canLoad||oe.loadComponent&&!oe._loadedComponent)&&Q.push(this.preloadConfig(Ae,oe)),(oe.children||oe._loadedRoutes)&&Q.push(this.processRoutes(dt,oe.children??oe._loadedRoutes))}return(0,Ee.H)(Q).pipe((0,lr.U)())}preloadConfig(M,j){return this.preloadingStrategy.preload(j,()=>{let Q;Q=j.loadChildren&&void 0===j.canLoad?this.loader.loadChildren(M,j):(0,Xe.of)(null);const oe=Q.pipe((0,Se.Z)(Ae=>null===Ae?(0,Xe.of)(void 0):(j._loadedRoutes=Ae.routes,j._loadedInjector=Ae.injector,this.processRoutes(Ae.injector??M,Ae.routes))));if(j.loadComponent&&!j._loadedComponent){const Ae=this.loader.loadComponent(j);return(0,Ee.H)([oe,Ae]).pipe((0,lr.U)())}return oe})}static#e=this.\u0275fac=function(j){return new(j||R)(x.KVO(li),x.KVO(x.Ql9),x.KVO(x.uvJ),x.KVO(sn),x.KVO(gt))};static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const wc=new x.nKC("");let Bi=(()=>{class R{constructor(M,j,Q,oe,Ae={}){this.urlSerializer=M,this.transitions=j,this.viewportScroller=Q,this.zone=oe,this.options=Ae,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,x.WQX)(x.uvJ),Ae.scrollPositionRestoration||="disabled",Ae.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(M=>{M instanceof To?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=M.navigationTrigger,this.restoredId=M.restoredState?M.restoredState.navigationId:0):M instanceof Zo?(this.lastId=M.id,this.scheduleScrollEvent(M,this.urlSerializer.parse(M.urlAfterRedirects).fragment)):M instanceof yi&&M.code===Ar.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(M,this.urlSerializer.parse(M.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(M=>{M instanceof la&&(M.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(M.position):M.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(M.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(M,j){var Q=this;this.zone.runOutsideAngular((0,D.A)(function*(){yield new Promise(oe=>{setTimeout(()=>{oe()}),(0,x.mal)(()=>{oe()},{injector:Q.environmentInjector})}),Q.zone.run(()=>{Q.transitions.events.next(new la(M,"popstate"===Q.lastSource?Q.store[Q.restoredId]:null,j))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(j){x.QTQ()};static#t=this.\u0275prov=x.jDH({token:R,factory:R.\u0275fac})}return R})();function Gu(R,...U){return(0,x.EmA)([{provide:ut,multi:!0,useValue:R},[],{provide:Hi,useFactory:vu,deps:[li]},{provide:x.iLQ,multi:!0,useFactory:$u},U.map(M=>M.\u0275providers)])}function vu(R){return R.routerState.root}function zo(R,U){return{\u0275kind:R,\u0275providers:U}}function $u(){const R=(0,x.WQX)(x.zZn);return U=>{const M=R.get(x.o8S);if(U!==M.components[0])return;const j=R.get(li),Q=R.get(pi);1===R.get(Pr)&&j.initialNavigation(),R.get(ka,null,x.$GK.Optional)?.setUpPreloading(),R.get(wc,null,x.$GK.Optional)?.init(),j.resetRootComponentType(M.componentTypes[0]),Q.closed||(Q.next(),Q.complete(),Q.unsubscribe())}}const pi=new x.nKC("",{factory:()=>new At.B}),Pr=new x.nKC("",{providedIn:"root",factory:()=>1}),ka=new x.nKC("");function gs(R){return zo(0,[{provide:ka,useExisting:Hu},{provide:sn,useExisting:R}])}function Ic(){return zo(8,[ho,{provide:Uo,useExisting:ho}])}function Wu(R){return zo(9,[{provide:dr,useValue:Qi},{provide:qe,useValue:{skipNextTransition:!!R?.skipInitialTransition,...R}}])}const Ir=new x.nKC("ROUTER_FORROOT_GUARD"),fl=[Ht.aZ,{provide:ei,useClass:Cr},li,Hs,{provide:Hi,useFactory:vu,deps:[li]},gt,[]];let hl=(()=>{class R{constructor(M){}static forRoot(M,j){return{ngModule:R,providers:[fl,[],{provide:ut,multi:!0,useValue:M},{provide:Ir,useFactory:pl,deps:[[li,new x.Xx1,new x.kdw]]},{provide:Ce,useValue:j||{}},j?.useHash?{provide:Ht.hb,useClass:Ht.fw}:{provide:Ht.hb,useClass:Ht.Sm},{provide:wc,useFactory:()=>{const R=(0,x.WQX)(Ht.Xr),U=(0,x.WQX)(x.SKi),M=(0,x.WQX)(Ce),j=(0,x.WQX)(Mo),Q=(0,x.WQX)(ei);return M.scrollOffset&&R.setOffset(M.scrollOffset),new Bi(Q,j,R,U,M)}},j?.preloadingStrategy?gs(j.preloadingStrategy).\u0275providers:[],j?.initialNavigation?Va(j):[],j?.bindToComponentInputs?Ic().\u0275providers:[],j?.enableViewTransitions?Wu().\u0275providers:[],[{provide:Hl,useFactory:$u},{provide:x.iLQ,multi:!0,useExisting:Hl}]]}}static forChild(M){return{ngModule:R,providers:[{provide:ut,multi:!0,useValue:M}]}}static#e=this.\u0275fac=function(j){return new(j||R)(x.KVO(Ir,8))};static#t=this.\u0275mod=x.$C({type:R});static#n=this.\u0275inj=x.G2t({})}return R})();function pl(R){return"guarded"}function Va(R){return["disabled"===R.initialNavigation?zo(3,[{provide:x.hnV,multi:!0,useFactory:()=>{const U=(0,x.WQX)(li);return()=>{U.setUpLocationChangeListener()}}},{provide:Pr,useValue:2}]).\u0275providers:[],"enabledBlocking"===R.initialNavigation?zo(2,[{provide:Pr,useValue:0},{provide:x.hnV,multi:!0,deps:[x.zZn],useFactory:U=>{const M=U.get(Ht.hj,Promise.resolve());return()=>M.then(()=>new Promise(j=>{const Q=U.get(li),oe=U.get(pi);dl(Q,()=>{j(!0)}),U.get(Mo).afterPreactivation=()=>(j(!0),oe.closed?(0,Xe.of)(void 0):oe),Q.initialNavigation()}))}}]).\u0275providers:[]]}const Hl=new x.nKC("")},7852:(yn,wt,ie)=>{ie.d(wt,{MF:()=>ei,j6:()=>ai,xZ:()=>Vn,om:()=>mi,Sx:()=>tt,Dk:()=>be,Wp:()=>Cr,KO:()=>ge});var D=ie(467),x=ie(1362),L=ie(8041),Ue=ie(1076);const Ze=(vt,We)=>We.some(St=>vt instanceof St);let Ee,Xe;const ve=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,pt=new WeakMap,Be=new WeakMap;let Bt={get(vt,We,St){if(vt instanceof IDBTransaction){if("done"===We)return Ie.get(vt);if("objectStoreNames"===We)return vt.objectStoreNames||Oe.get(vt);if("store"===We)return St.objectStoreNames[1]?void 0:St.objectStore(St.objectStoreNames[0])}return Dt(vt[We])},set:(vt,We,St)=>(vt[We]=St,!0),has:(vt,We)=>vt instanceof IDBTransaction&&("done"===We||"store"===We)||We in vt};function Jn(vt){return"function"==typeof vt?function An(vt){return vt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function it(){return Xe||(Xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(vt)?function(...We){return vt.apply(It(this),We),Dt(ve.get(this))}:function(...We){return Dt(vt.apply(It(this),We))}:function(We,...St){const tn=vt.call(It(this),We,...St);return Oe.set(tn,We.sort?We.sort():[We]),Dt(tn)}}(vt):(vt instanceof IDBTransaction&&function kt(vt){if(Ie.has(vt))return;const We=new Promise((St,tn)=>{const Bn=()=>{vt.removeEventListener("complete",On),vt.removeEventListener("error",Nn),vt.removeEventListener("abort",Nn)},On=()=>{St(),Bn()},Nn=()=>{tn(vt.error||new DOMException("AbortError","AbortError")),Bn()};vt.addEventListener("complete",On),vt.addEventListener("error",Nn),vt.addEventListener("abort",Nn)});Ie.set(vt,We)}(vt),Ze(vt,function Et(){return Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(vt,Bt):vt)}function Dt(vt){if(vt instanceof IDBRequest)return function Ct(vt){const We=new Promise((St,tn)=>{const Bn=()=>{vt.removeEventListener("success",On),vt.removeEventListener("error",Nn)},On=()=>{St(Dt(vt.result)),Bn()},Nn=()=>{tn(vt.error),Bn()};vt.addEventListener("success",On),vt.addEventListener("error",Nn)});return We.then(St=>{St instanceof IDBCursor&&ve.set(St,vt)}).catch(()=>{}),Be.set(We,vt),We}(vt);if(pt.has(vt))return pt.get(vt);const We=Jn(vt);return We!==vt&&(pt.set(vt,We),Be.set(We,vt)),We}const It=vt=>Be.get(vt),At=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],ke=new Map;function bn(vt,We){if(!(vt instanceof IDBDatabase)||We in vt||"string"!=typeof We)return;if(ke.get(We))return ke.get(We);const St=We.replace(/FromIndex$/,""),tn=We!==St,Bn=Ht.includes(St);if(!(St in(tn?IDBIndex:IDBObjectStore).prototype)||!Bn&&!At.includes(St))return;const On=function(){var Nn=(0,D.A)(function*(Rr,...Mr){const uo=this.transaction(Rr,Bn?"readwrite":"readonly");let Vo=uo.store;return tn&&(Vo=Vo.index(Mr.shift())),(yield Promise.all([Vo[St](...Mr),Bn&&uo.done]))[0]});return function(Mr){return Nn.apply(this,arguments)}}();return ke.set(We,On),On}!function Kt(vt){Bt=vt(Bt)}(vt=>({...vt,get:(We,St,tn)=>bn(We,St)||vt.get(We,St,tn),has:(We,St)=>!!bn(We,St)||vt.has(We,St)}));class _n{constructor(We){this.container=We}getPlatformInfoString(){return this.container.getProviders().map(St=>{if(function Sn(vt){const We=vt.getComponent();return"VERSION"===We?.type}(St)){const tn=St.getImmediate();return`${tn.library}/${tn.version}`}return null}).filter(St=>St).join(" ")}}const sr="@firebase/app",bt=new L.Vy("@firebase/app"),gn="@firebase/app-compat",er="@firebase/analytics-compat",Pe="@firebase/analytics",je="@firebase/app-check-compat",xt="@firebase/app-check",Fe="@firebase/auth",he="@firebase/auth-compat",_e="@firebase/database",mt="@firebase/database-compat",zt="@firebase/functions",jn="@firebase/functions-compat",en="@firebase/installations",qn="@firebase/installations-compat",jr="@firebase/messaging",to="@firebase/messaging-compat",lr="@firebase/performance",qr="@firebase/performance-compat",Tn="@firebase/remote-config",pr="@firebase/remote-config-compat",oi="@firebase/storage",wn="@firebase/storage-compat",Br="@firebase/firestore",si="@firebase/vertexai-preview",Kn="@firebase/firestore-compat",cn="firebase",Nt="[DEFAULT]",Qn={[sr]:"fire-core",[gn]:"fire-core-compat",[Pe]:"fire-analytics",[er]:"fire-analytics-compat",[xt]:"fire-app-check",[je]:"fire-app-check-compat",[Fe]:"fire-auth",[he]:"fire-auth-compat",[_e]:"fire-rtdb",[mt]:"fire-rtdb-compat",[zt]:"fire-fn",[jn]:"fire-fn-compat",[en]:"fire-iid",[qn]:"fire-iid-compat",[jr]:"fire-fcm",[to]:"fire-fcm-compat",[lr]:"fire-perf",[qr]:"fire-perf-compat",[Tn]:"fire-rc",[pr]:"fire-rc-compat",[oi]:"fire-gcs",[wn]:"fire-gcs-compat",[Br]:"fire-fst",[Kn]:"fire-fst-compat",[si]:"fire-vertex","fire-js":"fire-js",[cn]:"fire-js-all"},un=new Map,Wt=new Map,zr=new Map;function ki(vt,We){try{vt.container.addComponent(We)}catch(St){bt.debug(`Component ${We.name} failed to register with FirebaseApp ${vt.name}`,St)}}function mi(vt){const We=vt.name;if(zr.has(We))return bt.debug(`There were multiple attempts to register component ${We}.`),!1;zr.set(We,vt);for(const St of un.values())ki(St,vt);for(const St of Wt.values())ki(St,vt);return!0}function ai(vt,We){const St=vt.container.getProvider("heartbeat").getImmediate({optional:!0});return St&&St.triggerHeartbeat(),vt.container.getProvider(We)}function Vn(vt){return void 0!==vt.settings}const zi=new Ue.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Wi{constructor(We,St,tn){this._isDeleted=!1,this._options=Object.assign({},We),this._config=Object.assign({},St),this._name=St.name,this._automaticDataCollectionEnabled=St.automaticDataCollectionEnabled,this._container=tn,this.container.addComponent(new x.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this.checkDestroyed(),this._automaticDataCollectionEnabled=We}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(We){this._isDeleted=We}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}const ei="10.12.2";function Cr(vt,We={}){let St=vt;"object"!=typeof We&&(We={name:We});const tn=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},We),Bn=tn.name;if("string"!=typeof Bn||!Bn)throw zi.create("bad-app-name",{appName:String(Bn)});if(St||(St=(0,Ue.T9)()),!St)throw zi.create("no-options");const On=un.get(Bn);if(On){if((0,Ue.bD)(St,On.options)&&(0,Ue.bD)(tn,On.config))return On;throw zi.create("duplicate-app",{appName:Bn})}const Nn=new x.h1(Bn);for(const Mr of zr.values())Nn.addComponent(Mr);const Rr=new Wi(St,tn,Nn);return un.set(Bn,Rr),Rr}function tt(vt=Nt){const We=un.get(vt);if(!We&&vt===Nt&&(0,Ue.T9)())return Cr();if(!We)throw zi.create("no-app",{appName:vt});return We}function be(){return Array.from(un.values())}function ge(vt,We,St){var tn;let Bn=null!==(tn=Qn[vt])&&void 0!==tn?tn:vt;St&&(Bn+=`-${St}`);const On=Bn.match(/\s|\//),Nn=We.match(/\s|\//);if(On||Nn){const Rr=[`Unable to register library "${Bn}" with version "${We}":`];return On&&Rr.push(`library name "${Bn}" contains illegal characters (whitespace or "/")`),On&&Nn&&Rr.push("and"),Nn&&Rr.push(`version name "${We}" contains illegal characters (whitespace or "/")`),void bt.warn(Rr.join(" "))}mi(new x.uA(`${Bn}-version`,()=>({library:Bn,version:We}),"VERSION"))}const Ke="firebase-heartbeat-database",Xt=1,xn="firebase-heartbeat-store";let Hn=null;function Kr(){return Hn||(Hn=function _t(vt,We,{blocked:St,upgrade:tn,blocking:Bn,terminated:On}={}){const Nn=indexedDB.open(vt,We),Rr=Dt(Nn);return tn&&Nn.addEventListener("upgradeneeded",Mr=>{tn(Dt(Nn.result),Mr.oldVersion,Mr.newVersion,Dt(Nn.transaction),Mr)}),St&&Nn.addEventListener("blocked",Mr=>St(Mr.oldVersion,Mr.newVersion,Mr)),Rr.then(Mr=>{On&&Mr.addEventListener("close",()=>On()),Bn&&Mr.addEventListener("versionchange",uo=>Bn(uo.oldVersion,uo.newVersion,uo))}).catch(()=>{}),Rr}(Ke,Xt,{upgrade:(vt,We)=>{if(0===We)try{vt.createObjectStore(xn)}catch(St){console.warn(St)}}}).catch(vt=>{throw zi.create("idb-open",{originalErrorMessage:vt.message})})),Hn}function vi(){return(vi=(0,D.A)(function*(vt){try{const St=(yield Kr()).transaction(xn),tn=yield St.objectStore(xn).get(Hr(vt));return yield St.done,tn}catch(We){if(We instanceof Ue.g)bt.warn(We.message);else{const St=zi.create("idb-get",{originalErrorMessage:We?.message});bt.warn(St.message)}}})).apply(this,arguments)}function Yn(vt,We){return Li.apply(this,arguments)}function Li(){return(Li=(0,D.A)(function*(vt,We){try{const tn=(yield Kr()).transaction(xn,"readwrite");yield tn.objectStore(xn).put(We,Hr(vt)),yield tn.done}catch(St){if(St instanceof Ue.g)bt.warn(St.message);else{const tn=zi.create("idb-set",{originalErrorMessage:St?.message});bt.warn(tn.message)}}})).apply(this,arguments)}function Hr(vt){return`${vt.name}!${vt.options.appId}`}class yo{constructor(We){this.container=We,this._heartbeatsCache=null;const St=this.container.getProvider("app").getImmediate();this._storage=new kc(St),this._heartbeatsCachePromise=this._storage.read().then(tn=>(this._heartbeatsCache=tn,tn))}triggerHeartbeat(){var We=this;return(0,D.A)(function*(){var St,tn;const On=We.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nn=no();if((null!=(null===(St=We._heartbeatsCache)||void 0===St?void 0:St.heartbeats)||(We._heartbeatsCache=yield We._heartbeatsCachePromise,null!=(null===(tn=We._heartbeatsCache)||void 0===tn?void 0:tn.heartbeats)))&&We._heartbeatsCache.lastSentHeartbeatDate!==Nn&&!We._heartbeatsCache.heartbeats.some(Rr=>Rr.date===Nn))return We._heartbeatsCache.heartbeats.push({date:Nn,agent:On}),We._heartbeatsCache.heartbeats=We._heartbeatsCache.heartbeats.filter(Rr=>{const Mr=new Date(Rr.date).valueOf();return Date.now()-Mr<=2592e6}),We._storage.overwrite(We._heartbeatsCache)})()}getHeartbeatsHeader(){var We=this;return(0,D.A)(function*(){var St;if(null===We._heartbeatsCache&&(yield We._heartbeatsCachePromise),null==(null===(St=We._heartbeatsCache)||void 0===St?void 0:St.heartbeats)||0===We._heartbeatsCache.heartbeats.length)return"";const tn=no(),{heartbeatsToSend:Bn,unsentEntries:On}=function Is(vt,We=1024){const St=[];let tn=vt.slice();for(const Bn of vt){const On=St.find(Nn=>Nn.agent===Bn.agent);if(On){if(On.dates.push(Bn.date),As(St)>We){On.dates.pop();break}}else if(St.push({agent:Bn.agent,dates:[Bn.date]}),As(St)>We){St.pop();break}tn=tn.slice(1)}return{heartbeatsToSend:St,unsentEntries:tn}}(We._heartbeatsCache.heartbeats),Nn=(0,Ue.Uj)(JSON.stringify({version:2,heartbeats:Bn}));return We._heartbeatsCache.lastSentHeartbeatDate=tn,On.length>0?(We._heartbeatsCache.heartbeats=On,yield We._storage.overwrite(We._heartbeatsCache)):(We._heartbeatsCache.heartbeats=[],We._storage.overwrite(We._heartbeatsCache)),Nn})()}}function no(){return(new Date).toISOString().substring(0,10)}class kc{constructor(We){this.app=We,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!(0,Ue.zW)()&&(0,Ue.eX)().then(()=>!0).catch(()=>!1)})()}read(){var We=this;return(0,D.A)(function*(){if(yield We._canUseIndexedDBPromise){const tn=yield function mr(vt){return vi.apply(this,arguments)}(We.app);return tn?.heartbeats?tn:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(We){var St=this;return(0,D.A)(function*(){var tn;if(yield St._canUseIndexedDBPromise){const On=yield St.read();return Yn(St.app,{lastSentHeartbeatDate:null!==(tn=We.lastSentHeartbeatDate)&&void 0!==tn?tn:On.lastSentHeartbeatDate,heartbeats:We.heartbeats})}})()}add(We){var St=this;return(0,D.A)(function*(){var tn;if(yield St._canUseIndexedDBPromise){const On=yield St.read();return Yn(St.app,{lastSentHeartbeatDate:null!==(tn=We.lastSentHeartbeatDate)&&void 0!==tn?tn:On.lastSentHeartbeatDate,heartbeats:[...On.heartbeats,...We.heartbeats]})}})()}}function As(vt){return(0,Ue.Uj)(JSON.stringify({version:2,heartbeats:vt})).length}!function du(vt){mi(new x.uA("platform-logger",We=>new _n(We),"PRIVATE")),mi(new x.uA("heartbeat",We=>new yo(We),"PRIVATE")),ge(sr,"0.10.5",vt),ge(sr,"0.10.5","esm2017"),ge("fire-js","")}("")},1362:(yn,wt,ie)=>{ie.d(wt,{h1:()=>Et,uA:()=>L});var D=ie(467),x=ie(1076);class L{constructor(ve,Ie,Oe){this.name=ve,this.instanceFactory=Ie,this.type=Oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ve){return this.instantiationMode=ve,this}setMultipleInstances(ve){return this.multipleInstances=ve,this}setServiceProps(ve){return this.serviceProps=ve,this}setInstanceCreatedCallback(ve){return this.onInstanceCreated=ve,this}}const Ue="[DEFAULT]";class Ze{constructor(ve,Ie){this.name=ve,this.container=Ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ve){const Ie=this.normalizeInstanceIdentifier(ve);if(!this.instancesDeferred.has(Ie)){const Oe=new x.cY;if(this.instancesDeferred.set(Ie,Oe),this.isInitialized(Ie)||this.shouldAutoInitialize())try{const pt=this.getOrInitializeService({instanceIdentifier:Ie});pt&&Oe.resolve(pt)}catch{}}return this.instancesDeferred.get(Ie).promise}getImmediate(ve){var Ie;const Oe=this.normalizeInstanceIdentifier(ve?.identifier),pt=null!==(Ie=ve?.optional)&&void 0!==Ie&&Ie;if(!this.isInitialized(Oe)&&!this.shouldAutoInitialize()){if(pt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Oe})}catch(Be){if(pt)return null;throw Be}}getComponent(){return this.component}setComponent(ve){if(ve.name!==this.name)throw Error(`Mismatching Component ${ve.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ve,this.shouldAutoInitialize()){if(function Xe(it){return"EAGER"===it.instantiationMode}(ve))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(const[Ie,Oe]of this.instancesDeferred.entries()){const pt=this.normalizeInstanceIdentifier(Ie);try{const Be=this.getOrInitializeService({instanceIdentifier:pt});Oe.resolve(Be)}catch{}}}}clearInstance(ve=Ue){this.instancesDeferred.delete(ve),this.instancesOptions.delete(ve),this.instances.delete(ve)}delete(){var ve=this;return(0,D.A)(function*(){const Ie=Array.from(ve.instances.values());yield Promise.all([...Ie.filter(Oe=>"INTERNAL"in Oe).map(Oe=>Oe.INTERNAL.delete()),...Ie.filter(Oe=>"_delete"in Oe).map(Oe=>Oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ve=Ue){return this.instances.has(ve)}getOptions(ve=Ue){return this.instancesOptions.get(ve)||{}}initialize(ve={}){const{options:Ie={}}=ve,Oe=this.normalizeInstanceIdentifier(ve.instanceIdentifier);if(this.isInitialized(Oe))throw Error(`${this.name}(${Oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const pt=this.getOrInitializeService({instanceIdentifier:Oe,options:Ie});for(const[Be,Ct]of this.instancesDeferred.entries())Oe===this.normalizeInstanceIdentifier(Be)&&Ct.resolve(pt);return pt}onInit(ve,Ie){var Oe;const pt=this.normalizeInstanceIdentifier(Ie),Be=null!==(Oe=this.onInitCallbacks.get(pt))&&void 0!==Oe?Oe:new Set;Be.add(ve),this.onInitCallbacks.set(pt,Be);const Ct=this.instances.get(pt);return Ct&&ve(Ct,pt),()=>{Be.delete(ve)}}invokeOnInitCallbacks(ve,Ie){const Oe=this.onInitCallbacks.get(Ie);if(Oe)for(const pt of Oe)try{pt(ve,Ie)}catch{}}getOrInitializeService({instanceIdentifier:ve,options:Ie={}}){let Oe=this.instances.get(ve);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:(it=ve,it===Ue?void 0:it),options:Ie}),this.instances.set(ve,Oe),this.instancesOptions.set(ve,Ie),this.invokeOnInitCallbacks(Oe,ve),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ve,Oe)}catch{}var it;return Oe||null}normalizeInstanceIdentifier(ve=Ue){return this.component?this.component.multipleInstances?ve:Ue:ve}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Et{constructor(ve){this.name=ve,this.providers=new Map}addComponent(ve){const Ie=this.getProvider(ve.name);if(Ie.isComponentSet())throw new Error(`Component ${ve.name} has already been registered with ${this.name}`);Ie.setComponent(ve)}addOrOverwriteComponent(ve){this.getProvider(ve.name).isComponentSet()&&this.providers.delete(ve.name),this.addComponent(ve)}getProvider(ve){if(this.providers.has(ve))return this.providers.get(ve);const Ie=new Ze(ve,this);return this.providers.set(ve,Ie),Ie}getProviders(){return Array.from(this.providers.values())}}},8041:(yn,wt,ie)=>{ie.d(wt,{$b:()=>x,Vy:()=>Xe});const D=[];var x=function(ve){return ve[ve.DEBUG=0]="DEBUG",ve[ve.VERBOSE=1]="VERBOSE",ve[ve.INFO=2]="INFO",ve[ve.WARN=3]="WARN",ve[ve.ERROR=4]="ERROR",ve[ve.SILENT=5]="SILENT",ve}(x||{});const L={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},Ue=x.INFO,Ze={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},Ee=(ve,Ie,...Oe)=>{if(Ie<ve.logLevel)return;const pt=(new Date).toISOString(),Be=Ze[Ie];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ie})`);console[Be](`[${pt}]  ${ve.name}:`,...Oe)};class Xe{constructor(Ie){this.name=Ie,this._logLevel=Ue,this._logHandler=Ee,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(Ie){if(!(Ie in x))throw new TypeError(`Invalid value "${Ie}" assigned to \`logLevel\``);this._logLevel=Ie}setLogLevel(Ie){this._logLevel="string"==typeof Ie?L[Ie]:Ie}get logHandler(){return this._logHandler}set logHandler(Ie){if("function"!=typeof Ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ie){this._userLogHandler=Ie}debug(...Ie){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...Ie),this._logHandler(this,x.DEBUG,...Ie)}log(...Ie){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...Ie),this._logHandler(this,x.VERBOSE,...Ie)}info(...Ie){this._userLogHandler&&this._userLogHandler(this,x.INFO,...Ie),this._logHandler(this,x.INFO,...Ie)}warn(...Ie){this._userLogHandler&&this._userLogHandler(this,x.WARN,...Ie),this._logHandler(this,x.WARN,...Ie)}error(...Ie){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...Ie),this._logHandler(this,x.ERROR,...Ie)}}},2214:(yn,wt,ie)=>{ie.d(wt,{Dk:()=>D.Dk,KO:()=>D.KO,Sx:()=>D.Sx,Wp:()=>D.Wp});var D=ie(7852);(0,D.KO)("firebase","10.12.2","app")},6114:(yn,wt,ie)=>{ie.d(wt,{Dt:()=>mc,HF:()=>Vc,eJ:()=>ll,xI:()=>Ph,hg:()=>ns,x9:()=>yc,df:()=>Wc,r7:()=>Dd});var D=ie(467),x=ie(7852),L=ie(1076),Ue=ie(8041),Ze=ie(1635),Ee=ie(1362);const Ct=function pt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},kt=new L.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Kt=new Ue.Vy("@firebase/auth");function Jn(O,...E){Kt.logLevel<=Ue.$b.ERROR&&Kt.error(`Auth (${x.MF}): ${O}`,...E)}function Dt(O,...E){throw Ht(O,...E)}function It(O,...E){return Ht(O,...E)}function _t(O,E,A){const k=Object.assign(Object.assign({},Ct()),{[E]:A});return new L.FA("auth","Firebase",k).create(E,{appName:O.name})}function Lt(O){return _t(O,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ht(O,...E){if("string"!=typeof O){const A=E[0],k=[...E.slice(1)];return k[0]&&(k[0].appName=O.name),O._errorFactory.create(A,...k)}return kt.create(O,...E)}function ke(O,E,...A){if(!O)throw Ht(E,...A)}function bn(O){const E="INTERNAL ASSERTION FAILED: "+O;throw Jn(E),new Error(E)}function _n(O,E){O||bn(E)}function Sn(){var O;return typeof self<"u"&&(null===(O=self.location)||void 0===O?void 0:O.href)||""}function Se(){var O;return typeof self<"u"&&(null===(O=self.location)||void 0===O?void 0:O.protocol)||null}class er{constructor(E,A){this.shortDelay=E,this.longDelay=A,_n(A>E,"Short delay should be less than long delay!"),this.isMobile=(0,L.jZ)()||(0,L.lV)()}get(){return function bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function sr(){return"http:"===Se()||"https:"===Se()}()||(0,L.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pe(O,E){_n(O.emulator,"Emulator should always be set here");const{url:A}=O.emulator;return E?`${A}${E.startsWith("/")?E.slice(1):E}`:A}class je{static initialize(E,A,k){this.fetchImpl=E,A&&(this.headersImpl=A),k&&(this.responseImpl=k)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fe=new er(3e4,6e4);function he(O,E){return O.tenantId&&!E.tenantId?Object.assign(Object.assign({},E),{tenantId:O.tenantId}):E}function _e(O,E,A,k){return mt.apply(this,arguments)}function mt(){return(mt=(0,D.A)(function*(O,E,A,k,te={}){return zt(O,te,(0,D.A)(function*(){let ue={},$e={};k&&("GET"===E?$e=k:ue={body:JSON.stringify(k)});const ot=(0,L.Am)(Object.assign({key:O.config.apiKey},$e)).slice(1),jt=yield O._getAdditionalHeaders();return jt["Content-Type"]="application/json",O.languageCode&&(jt["X-Firebase-Locale"]=O.languageCode),je.fetch()(jr(O,O.config.apiHost,A,ot),Object.assign({method:E,headers:jt,referrerPolicy:"no-referrer"},ue))}))})).apply(this,arguments)}function zt(O,E,A){return jn.apply(this,arguments)}function jn(){return(jn=(0,D.A)(function*(O,E,A){O._canInitEmulator=!1;const k=Object.assign(Object.assign({},xt),E);try{const te=new lr(O),ue=yield Promise.race([A(),te.promise]);te.clearNetworkTimeout();const $e=yield ue.json();if("needConfirmation"in $e)throw qr(O,"account-exists-with-different-credential",$e);if(ue.ok&&!("errorMessage"in $e))return $e;{const ot=ue.ok?$e.errorMessage:$e.error.message,[jt,Cn]=ot.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===jt)throw qr(O,"credential-already-in-use",$e);if("EMAIL_EXISTS"===jt)throw qr(O,"email-already-in-use",$e);if("USER_DISABLED"===jt)throw qr(O,"user-disabled",$e);const In=k[jt]||jt.toLowerCase().replace(/[_\s]+/g,"-");if(Cn)throw _t(O,In,Cn);Dt(O,In)}}catch(te){if(te instanceof L.g)throw te;Dt(O,"network-request-failed",{message:String(te)})}})).apply(this,arguments)}function en(O,E,A,k){return qn.apply(this,arguments)}function qn(){return(qn=(0,D.A)(function*(O,E,A,k,te={}){const ue=yield _e(O,E,A,k,te);return"mfaPendingCredential"in ue&&Dt(O,"multi-factor-auth-required",{_serverResponse:ue}),ue})).apply(this,arguments)}function jr(O,E,A,k){const te=`${E}${A}?${k}`;return O.config.emulator?Pe(O.config,te):`${O.config.apiScheme}://${te}`}function to(O){switch(O){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lr{constructor(E){this.auth=E,this.timer=null,this.promise=new Promise((A,k)=>{this.timer=setTimeout(()=>k(It(this.auth,"network-request-failed")),Fe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qr(O,E,A){const k={appName:O.name};A.email&&(k.email=A.email),A.phoneNumber&&(k.phoneNumber=A.phoneNumber);const te=It(O,E,k);return te.customData._tokenResponse=A,te}function pr(O){return void 0!==O&&void 0!==O.enterprise}class oi{constructor(E){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===E.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=E.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=E.recaptchaEnforcementState}getProviderEnforcementState(E){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const A of this.recaptchaEnforcementState)if(A.provider&&A.provider===E)return to(A.enforcementState);return null}isProviderEnabled(E){return"ENFORCE"===this.getProviderEnforcementState(E)||"AUDIT"===this.getProviderEnforcementState(E)}}function si(O,E){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,D.A)(function*(O,E){return _e(O,"GET","/v2/recaptchaConfig",he(O,E))})).apply(this,arguments)}function Lo(){return(Lo=(0,D.A)(function*(O,E){return _e(O,"POST","/v1/accounts:delete",E)})).apply(this,arguments)}function un(O,E){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,D.A)(function*(O,E){return _e(O,"POST","/v1/accounts:lookup",E)})).apply(this,arguments)}function zr(O){if(O)try{const E=new Date(Number(O));if(!isNaN(E.getTime()))return E.toUTCString()}catch{}}function mi(){return(mi=(0,D.A)(function*(O,E=!1){const A=(0,L.Ku)(O),k=yield A.getIdToken(E),te=Wr(k);ke(te&&te.exp&&te.auth_time&&te.iat,A.auth,"internal-error");const ue="object"==typeof te.firebase?te.firebase:void 0,$e=ue?.sign_in_provider;return{claims:te,token:k,authTime:zr(ai(te.auth_time)),issuedAtTime:zr(ai(te.iat)),expirationTime:zr(ai(te.exp)),signInProvider:$e||null,signInSecondFactor:ue?.sign_in_second_factor||null}})).apply(this,arguments)}function ai(O){return 1e3*Number(O)}function Wr(O){const[E,A,k]=O.split(".");if(void 0===E||void 0===A||void 0===k)return Jn("JWT malformed, contained fewer than 3 sections"),null;try{const te=(0,L.u)(A);return te?JSON.parse(te):(Jn("Failed to decode base64 JWT payload"),null)}catch(te){return Jn("Caught error parsing JWT payload as JSON",te?.toString()),null}}function _i(O){const E=Wr(O);return ke(E,"internal-error"),ke(typeof E.exp<"u","internal-error"),ke(typeof E.iat<"u","internal-error"),Number(E.exp)-Number(E.iat)}function Vn(O,E){return Er.apply(this,arguments)}function Er(){return(Er=(0,D.A)(function*(O,E,A=!1){if(A)return E;try{return yield E}catch(k){throw k instanceof L.g&&function ri({code:O}){return"auth/user-disabled"===O||"auth/user-token-expired"===O}(k)&&O.auth.currentUser===O&&(yield O.auth.signOut()),k}})).apply(this,arguments)}class zi{constructor(E){this.user=E,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(E){var A;if(E){const k=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),k}{this.errorBackoff=3e4;const te=(null!==(A=this.user.stsTokenManager.expirationTime)&&void 0!==A?A:0)-Date.now()-3e5;return Math.max(0,te)}}schedule(E=!1){var A=this;if(!this.isRunning)return;const k=this.getInterval(E);this.timerId=setTimeout((0,D.A)(function*(){yield A.iteration()}),k)}iteration(){var E=this;return(0,D.A)(function*(){try{yield E.user.getIdToken(!0)}catch(A){return void("auth/network-request-failed"===A?.code&&E.schedule(!0))}E.schedule()})()}}class Wi{constructor(E,A){this.createdAt=E,this.lastLoginAt=A,this._initializeTime()}_initializeTime(){this.lastSignInTime=zr(this.lastLoginAt),this.creationTime=zr(this.createdAt)}_copy(E){this.createdAt=E.createdAt,this.lastLoginAt=E.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fi(O){return ei.apply(this,arguments)}function ei(){return(ei=(0,D.A)(function*(O){var E;const A=O.auth,k=yield O.getIdToken(),te=yield Vn(O,un(A,{idToken:k}));ke(te?.users.length,A,"internal-error");const ue=te.users[0];O._notifyReloadListener(ue);const $e=null!==(E=ue.providerUserInfo)&&void 0!==E&&E.length?be(ue.providerUserInfo):[],ot=function tt(O,E){return[...O.filter(k=>!E.some(te=>te.providerId===k.providerId)),...E]}(O.providerData,$e),In=!!O.isAnonymous&&!(O.email&&ue.passwordHash||ot?.length),vr={uid:ue.localId,displayName:ue.displayName||null,photoURL:ue.photoUrl||null,email:ue.email||null,emailVerified:ue.emailVerified||!1,phoneNumber:ue.phoneNumber||null,tenantId:ue.tenantId||null,providerData:ot,metadata:new Wi(ue.createdAt,ue.lastLoginAt),isAnonymous:In};Object.assign(O,vr)})).apply(this,arguments)}function fe(){return(fe=(0,D.A)(function*(O){const E=(0,L.Ku)(O);yield Fi(E),yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)})).apply(this,arguments)}function be(O){return O.map(E=>{var{providerId:A}=E,k=(0,Ze.Tt)(E,["providerId"]);return{providerId:A,uid:k.rawId||"",displayName:k.displayName||null,email:k.email||null,phoneNumber:k.phoneNumber||null,photoURL:k.photoUrl||null}})}function le(){return(le=(0,D.A)(function*(O,E){const A=yield zt(O,{},(0,D.A)(function*(){const k=(0,L.Am)({grant_type:"refresh_token",refresh_token:E}).slice(1),{tokenApiHost:te,apiKey:ue}=O.config,$e=jr(O,te,"/v1/token",`key=${ue}`),ot=yield O._getAdditionalHeaders();return ot["Content-Type"]="application/x-www-form-urlencoded",je.fetch()($e,{method:"POST",headers:ot,body:k})}));return{accessToken:A.access_token,expiresIn:A.expires_in,refreshToken:A.refresh_token}})).apply(this,arguments)}function De(){return(De=(0,D.A)(function*(O,E){return _e(O,"POST","/v2/accounts:revokeToken",he(O,E))})).apply(this,arguments)}class lt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(E){ke(E.idToken,"internal-error"),ke(typeof E.idToken<"u","internal-error"),ke(typeof E.refreshToken<"u","internal-error");const A="expiresIn"in E&&typeof E.expiresIn<"u"?Number(E.expiresIn):_i(E.idToken);this.updateTokensAndExpiration(E.idToken,E.refreshToken,A)}updateFromIdToken(E){ke(0!==E.length,"internal-error");const A=_i(E);this.updateTokensAndExpiration(E,null,A)}getToken(E,A=!1){var k=this;return(0,D.A)(function*(){return A||!k.accessToken||k.isExpired?(ke(k.refreshToken,E,"user-token-expired"),k.refreshToken?(yield k.refresh(E,k.refreshToken),k.accessToken):null):k.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(E,A){var k=this;return(0,D.A)(function*(){const{accessToken:te,refreshToken:ue,expiresIn:$e}=yield function Qe(O,E){return le.apply(this,arguments)}(E,A);k.updateTokensAndExpiration(te,ue,Number($e))})()}updateTokensAndExpiration(E,A,k){this.refreshToken=A||null,this.accessToken=E||null,this.expirationTime=Date.now()+1e3*k}static fromJSON(E,A){const{refreshToken:k,accessToken:te,expirationTime:ue}=A,$e=new lt;return k&&(ke("string"==typeof k,"internal-error",{appName:E}),$e.refreshToken=k),te&&(ke("string"==typeof te,"internal-error",{appName:E}),$e.accessToken=te),ue&&(ke("number"==typeof ue,"internal-error",{appName:E}),$e.expirationTime=ue),$e}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(E){this.accessToken=E.accessToken,this.refreshToken=E.refreshToken,this.expirationTime=E.expirationTime}_clone(){return Object.assign(new lt,this.toJSON())}_performRefresh(){return bn("not implemented")}}function Ke(O,E){ke("string"==typeof O||typeof O>"u","internal-error",{appName:E})}class Xt{constructor(E){var{uid:A,auth:k,stsTokenManager:te}=E,ue=(0,Ze.Tt)(E,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=A,this.auth=k,this.stsTokenManager=te,this.accessToken=te.accessToken,this.displayName=ue.displayName||null,this.email=ue.email||null,this.emailVerified=ue.emailVerified||!1,this.phoneNumber=ue.phoneNumber||null,this.photoURL=ue.photoURL||null,this.isAnonymous=ue.isAnonymous||!1,this.tenantId=ue.tenantId||null,this.providerData=ue.providerData?[...ue.providerData]:[],this.metadata=new Wi(ue.createdAt||void 0,ue.lastLoginAt||void 0)}getIdToken(E){var A=this;return(0,D.A)(function*(){const k=yield Vn(A,A.stsTokenManager.getToken(A.auth,E));return ke(k,A.auth,"internal-error"),A.accessToken!==k&&(A.accessToken=k,yield A.auth._persistUserIfCurrent(A),A.auth._notifyListenersIfCurrent(A)),k})()}getIdTokenResult(E){return function Dr(O){return mi.apply(this,arguments)}(this,E)}reload(){return function Cr(O){return fe.apply(this,arguments)}(this)}_assign(E){this!==E&&(ke(this.uid===E.uid,this.auth,"internal-error"),this.displayName=E.displayName,this.photoURL=E.photoURL,this.email=E.email,this.emailVerified=E.emailVerified,this.phoneNumber=E.phoneNumber,this.isAnonymous=E.isAnonymous,this.tenantId=E.tenantId,this.providerData=E.providerData.map(A=>Object.assign({},A)),this.metadata._copy(E.metadata),this.stsTokenManager._assign(E.stsTokenManager))}_clone(E){const A=new Xt(Object.assign(Object.assign({},this),{auth:E,stsTokenManager:this.stsTokenManager._clone()}));return A.metadata._copy(this.metadata),A}_onReload(E){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=E,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(E){this.reloadListener?this.reloadListener(E):this.reloadUserInfo=E}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(E,A=!1){var k=this;return(0,D.A)(function*(){let te=!1;E.idToken&&E.idToken!==k.stsTokenManager.accessToken&&(k.stsTokenManager.updateFromServerResponse(E),te=!0),A&&(yield Fi(k)),yield k.auth._persistUserIfCurrent(k),te&&k.auth._notifyListenersIfCurrent(k)})()}delete(){var E=this;return(0,D.A)(function*(){if((0,x.xZ)(E.auth.app))return Promise.reject(Lt(E.auth));const A=yield E.getIdToken();return yield Vn(E,function cn(O,E){return Lo.apply(this,arguments)}(E.auth,{idToken:A})),E.stsTokenManager.clearRefreshToken(),E.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(E=>Object.assign({},E)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(E,A){var k,te,ue,$e,ot,jt,Cn,In;const vr=null!==(k=A.displayName)&&void 0!==k?k:void 0,ys=null!==(te=A.email)&&void 0!==te?te:void 0,Zc=null!==(ue=A.phoneNumber)&&void 0!==ue?ue:void 0,Tl=null!==($e=A.photoURL)&&void 0!==$e?$e:void 0,Nh=null!==(ot=A.tenantId)&&void 0!==ot?ot:void 0,Ha=null!==(jt=A._redirectEventId)&&void 0!==jt?jt:void 0,Yl=null!==(Cn=A.createdAt)&&void 0!==Cn?Cn:void 0,Nf=null!==(In=A.lastLoginAt)&&void 0!==In?In:void 0,{uid:Nr,emailVerified:xl,isAnonymous:ic,providerData:Ji,stsTokenManager:Zl}=A;ke(Nr&&Zl,E,"internal-error");const Jc=lt.fromJSON(this.name,Zl);ke("string"==typeof Nr,E,"internal-error"),Ke(vr,E.name),Ke(ys,E.name),ke("boolean"==typeof xl,E,"internal-error"),ke("boolean"==typeof ic,E,"internal-error"),Ke(Zc,E.name),Ke(Tl,E.name),Ke(Nh,E.name),Ke(Ha,E.name),Ke(Yl,E.name),Ke(Nf,E.name);const oc=new Xt({uid:Nr,auth:E,email:ys,emailVerified:xl,displayName:vr,isAnonymous:ic,photoURL:Tl,phoneNumber:Zc,tenantId:Nh,stsTokenManager:Jc,createdAt:Yl,lastLoginAt:Nf});return Ji&&Array.isArray(Ji)&&(oc.providerData=Ji.map(gr=>Object.assign({},gr))),Ha&&(oc._redirectEventId=Ha),oc}static _fromIdTokenResponse(E,A,k=!1){return(0,D.A)(function*(){const te=new lt;te.updateFromServerResponse(A);const ue=new Xt({uid:A.localId,auth:E,stsTokenManager:te,isAnonymous:k});return yield Fi(ue),ue})()}static _fromGetAccountInfoResponse(E,A,k){return(0,D.A)(function*(){const te=A.users[0];ke(void 0!==te.localId,"internal-error");const ue=void 0!==te.providerUserInfo?be(te.providerUserInfo):[],$e=!(te.email&&te.passwordHash||ue?.length),ot=new lt;ot.updateFromIdToken(k);const jt=new Xt({uid:te.localId,auth:E,stsTokenManager:ot,isAnonymous:$e}),Cn={uid:te.localId,displayName:te.displayName||null,photoURL:te.photoUrl||null,email:te.email||null,emailVerified:te.emailVerified||!1,phoneNumber:te.phoneNumber||null,tenantId:te.tenantId||null,providerData:ue,metadata:new Wi(te.createdAt,te.lastLoginAt),isAnonymous:!(te.email&&te.passwordHash||ue?.length)};return Object.assign(jt,Cn),jt})()}}const xn=new Map;function Hn(O){_n(O instanceof Function,"Expected a class definition");let E=xn.get(O);return E?(_n(E instanceof O,"Instance stored in cache mismatched with class"),E):(E=new O,xn.set(O,E),E)}const mr=(()=>{class O{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(A,k){var te=this;return(0,D.A)(function*(){te.storage[A]=k})()}_get(A){var k=this;return(0,D.A)(function*(){const te=k.storage[A];return void 0===te?null:te})()}_remove(A){var k=this;return(0,D.A)(function*(){delete k.storage[A]})()}_addListener(A,k){}_removeListener(A,k){}}return O.type="NONE",O})();function vi(O,E,A){return`firebase:${O}:${E}:${A}`}class Yn{constructor(E,A,k){this.persistence=E,this.auth=A,this.userKey=k;const{config:te,name:ue}=this.auth;this.fullUserKey=vi(this.userKey,te.apiKey,ue),this.fullPersistenceKey=vi("persistence",te.apiKey,ue),this.boundEventHandler=A._onStorageEvent.bind(A),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(E){return this.persistence._set(this.fullUserKey,E.toJSON())}getCurrentUser(){var E=this;return(0,D.A)(function*(){const A=yield E.persistence._get(E.fullUserKey);return A?Xt._fromJSON(E.auth,A):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(E){var A=this;return(0,D.A)(function*(){if(A.persistence===E)return;const k=yield A.getCurrentUser();return yield A.removeCurrentUser(),A.persistence=E,k?A.setCurrentUser(k):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(E,A,k="authUser"){return(0,D.A)(function*(){if(!A.length)return new Yn(Hn(mr),E,k);const te=(yield Promise.all(A.map(function(){var Cn=(0,D.A)(function*(In){if(yield In._isAvailable())return In});return function(In){return Cn.apply(this,arguments)}}()))).filter(Cn=>Cn);let ue=te[0]||Hn(mr);const $e=vi(k,E.config.apiKey,E.name);let ot=null;for(const Cn of A)try{const In=yield Cn._get($e);if(In){const vr=Xt._fromJSON(E,In);Cn!==ue&&(ot=vr),ue=Cn;break}}catch{}const jt=te.filter(Cn=>Cn._shouldAllowMigration);return ue._shouldAllowMigration&&jt.length?(ue=jt[0],ot&&(yield ue._set($e,ot.toJSON())),yield Promise.all(A.map(function(){var Cn=(0,D.A)(function*(In){if(In!==ue)try{yield In._remove($e)}catch{}});return function(In){return Cn.apply(this,arguments)}}())),new Yn(ue,E,k)):new Yn(ue,E,k)})()}}function Li(O){const E=O.toLowerCase();if(E.includes("opera/")||E.includes("opr/")||E.includes("opios/"))return"Opera";if(yo(E))return"IEMobile";if(E.includes("msie")||E.includes("trident/"))return"IE";if(E.includes("edge/"))return"Edge";if(Hr(E))return"Firefox";if(E.includes("silk/"))return"Silk";if(Is(E))return"Blackberry";if(kc(E))return"Webos";if(ci(E))return"Safari";if((E.includes("chrome/")||Us(E))&&!E.includes("edge/"))return"Chrome";if(no(E))return"Android";{const k=O.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===k?.length)return k[1]}return"Other"}function Hr(O=(0,L.ZQ)()){return/firefox\//i.test(O)}function ci(O=(0,L.ZQ)()){const E=O.toLowerCase();return E.includes("safari/")&&!E.includes("chrome/")&&!E.includes("crios/")&&!E.includes("android")}function Us(O=(0,L.ZQ)()){return/crios\//i.test(O)}function yo(O=(0,L.ZQ)()){return/iemobile/i.test(O)}function no(O=(0,L.ZQ)()){return/android/i.test(O)}function Is(O=(0,L.ZQ)()){return/blackberry/i.test(O)}function kc(O=(0,L.ZQ)()){return/webos/i.test(O)}function As(O=(0,L.ZQ)()){return/iphone|ipad|ipod/i.test(O)||/macintosh/i.test(O)&&/mobile/i.test(O)}function St(O=(0,L.ZQ)()){return As(O)||no(O)||kc(O)||Is(O)||/windows phone/i.test(O)||yo(O)}function Bn(O,E=[]){let A;switch(O){case"Browser":A=Li((0,L.ZQ)());break;case"Worker":A=`${Li((0,L.ZQ)())}-${O}`;break;default:A=O}const k=E.length?E.join(","):"FirebaseCore-web";return`${A}/JsCore/${x.MF}/${k}`}class On{constructor(E){this.auth=E,this.queue=[]}pushCallback(E,A){const k=ue=>new Promise(($e,ot)=>{try{$e(E(ue))}catch(jt){ot(jt)}});k.onAbort=A,this.queue.push(k);const te=this.queue.length-1;return()=>{this.queue[te]=()=>Promise.resolve()}}runMiddleware(E){var A=this;return(0,D.A)(function*(){if(A.auth.currentUser===E)return;const k=[];try{for(const te of A.queue)yield te(E),te.onAbort&&k.push(te.onAbort)}catch(te){k.reverse();for(const ue of k)try{ue()}catch{}throw A.auth._errorFactory.create("login-blocked",{originalMessage:te?.message})}})()}}function Rr(){return(Rr=(0,D.A)(function*(O,E={}){return _e(O,"GET","/v2/passwordPolicy",he(O,E))})).apply(this,arguments)}class uo{constructor(E){var A,k,te,ue;const $e=E.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(A=$e.minPasswordLength)&&void 0!==A?A:6,$e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=$e.maxPasswordLength),void 0!==$e.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=$e.containsLowercaseCharacter),void 0!==$e.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=$e.containsUppercaseCharacter),void 0!==$e.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=$e.containsNumericCharacter),void 0!==$e.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=$e.containsNonAlphanumericCharacter),this.enforcementState=E.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(te=null===(k=E.allowedNonAlphanumericCharacters)||void 0===k?void 0:k.join(""))&&void 0!==te?te:"",this.forceUpgradeOnSignin=null!==(ue=E.forceUpgradeOnSignin)&&void 0!==ue&&ue,this.schemaVersion=E.schemaVersion}validatePassword(E){var A,k,te,ue,$e,ot;const jt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(E,jt),this.validatePasswordCharacterOptions(E,jt),jt.isValid&&(jt.isValid=null===(A=jt.meetsMinPasswordLength)||void 0===A||A),jt.isValid&&(jt.isValid=null===(k=jt.meetsMaxPasswordLength)||void 0===k||k),jt.isValid&&(jt.isValid=null===(te=jt.containsLowercaseLetter)||void 0===te||te),jt.isValid&&(jt.isValid=null===(ue=jt.containsUppercaseLetter)||void 0===ue||ue),jt.isValid&&(jt.isValid=null===($e=jt.containsNumericCharacter)||void 0===$e||$e),jt.isValid&&(jt.isValid=null===(ot=jt.containsNonAlphanumericCharacter)||void 0===ot||ot),jt}validatePasswordLengthOptions(E,A){const k=this.customStrengthOptions.minPasswordLength,te=this.customStrengthOptions.maxPasswordLength;k&&(A.meetsMinPasswordLength=E.length>=k),te&&(A.meetsMaxPasswordLength=E.length<=te)}validatePasswordCharacterOptions(E,A){let k;this.updatePasswordCharacterOptionsStatuses(A,!1,!1,!1,!1);for(let te=0;te<E.length;te++)k=E.charAt(te),this.updatePasswordCharacterOptionsStatuses(A,k>="a"&&k<="z",k>="A"&&k<="Z",k>="0"&&k<="9",this.allowedNonAlphanumericCharacters.includes(k))}updatePasswordCharacterOptionsStatuses(E,A,k,te,ue){this.customStrengthOptions.containsLowercaseLetter&&(E.containsLowercaseLetter||(E.containsLowercaseLetter=A)),this.customStrengthOptions.containsUppercaseLetter&&(E.containsUppercaseLetter||(E.containsUppercaseLetter=k)),this.customStrengthOptions.containsNumericCharacter&&(E.containsNumericCharacter||(E.containsNumericCharacter=te)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(E.containsNonAlphanumericCharacter||(E.containsNonAlphanumericCharacter=ue))}}class Vo{constructor(E,A,k,te){this.app=E,this.heartbeatServiceProvider=A,this.appCheckServiceProvider=k,this.config=te,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $a(this),this.idTokenSubscription=new $a(this),this.beforeStateQueue=new On(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=E.name,this.clientVersion=te.sdkClientVersion}_initializeWithPersistence(E,A){var k=this;return A&&(this._popupRedirectResolver=Hn(A)),this._initializationPromise=this.queue((0,D.A)(function*(){var te,ue;if(!k._deleted&&(k.persistenceManager=yield Yn.create(k,E),!k._deleted)){if(null!==(te=k._popupRedirectResolver)&&void 0!==te&&te._shouldInitProactively)try{yield k._popupRedirectResolver._initialize(k)}catch{}yield k.initializeCurrentUser(A),k.lastNotifiedUid=(null===(ue=k.currentUser)||void 0===ue?void 0:ue.uid)||null,!k._deleted&&(k._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var E=this;return(0,D.A)(function*(){if(E._deleted)return;const A=yield E.assertedPersistence.getCurrentUser();if(E.currentUser||A){if(E.currentUser&&A&&E.currentUser.uid===A.uid)return E._currentUser._assign(A),void(yield E.currentUser.getIdToken());yield E._updateCurrentUser(A,!0)}})()}initializeCurrentUserFromIdToken(E){var A=this;return(0,D.A)(function*(){try{const k=yield un(A,{idToken:E}),te=yield Xt._fromGetAccountInfoResponse(A,k,E);yield A.directlySetCurrentUser(te)}catch(k){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",k),yield A.directlySetCurrentUser(null)}})()}initializeCurrentUser(E){var A=this;return(0,D.A)(function*(){var k;if((0,x.xZ)(A.app)){const ot=A.app.settings.authIdToken;return ot?new Promise(jt=>{setTimeout(()=>A.initializeCurrentUserFromIdToken(ot).then(jt,jt))}):A.directlySetCurrentUser(null)}const te=yield A.assertedPersistence.getCurrentUser();let ue=te,$e=!1;if(E&&A.config.authDomain){yield A.getOrInitRedirectPersistenceManager();const ot=null===(k=A.redirectUser)||void 0===k?void 0:k._redirectEventId,jt=ue?._redirectEventId,Cn=yield A.tryRedirectSignIn(E);(!ot||ot===jt)&&Cn?.user&&(ue=Cn.user,$e=!0)}if(!ue)return A.directlySetCurrentUser(null);if(!ue._redirectEventId){if($e)try{yield A.beforeStateQueue.runMiddleware(ue)}catch(ot){ue=te,A._popupRedirectResolver._overrideRedirectResult(A,()=>Promise.reject(ot))}return ue?A.reloadAndSetCurrentUserOrClear(ue):A.directlySetCurrentUser(null)}return ke(A._popupRedirectResolver,A,"argument-error"),yield A.getOrInitRedirectPersistenceManager(),A.redirectUser&&A.redirectUser._redirectEventId===ue._redirectEventId?A.directlySetCurrentUser(ue):A.reloadAndSetCurrentUserOrClear(ue)})()}tryRedirectSignIn(E){var A=this;return(0,D.A)(function*(){let k=null;try{k=yield A._popupRedirectResolver._completeRedirectFn(A,E,!0)}catch{yield A._setRedirectUser(null)}return k})()}reloadAndSetCurrentUserOrClear(E){var A=this;return(0,D.A)(function*(){try{yield Fi(E)}catch(k){if("auth/network-request-failed"!==k?.code)return A.directlySetCurrentUser(null)}return A.directlySetCurrentUser(E)})()}useDeviceLanguage(){this.languageCode=function gn(){if(typeof navigator>"u")return null;const O=navigator;return O.languages&&O.languages[0]||O.language||null}()}_delete(){var E=this;return(0,D.A)(function*(){E._deleted=!0})()}updateCurrentUser(E){var A=this;return(0,D.A)(function*(){if((0,x.xZ)(A.app))return Promise.reject(Lt(A));const k=E?(0,L.Ku)(E):null;return k&&ke(k.auth.config.apiKey===A.config.apiKey,A,"invalid-user-token"),A._updateCurrentUser(k&&k._clone(A))})()}_updateCurrentUser(E,A=!1){var k=this;return(0,D.A)(function*(){if(!k._deleted)return E&&ke(k.tenantId===E.tenantId,k,"tenant-id-mismatch"),A||(yield k.beforeStateQueue.runMiddleware(E)),k.queue((0,D.A)(function*(){yield k.directlySetCurrentUser(E),k.notifyAuthListeners()}))})()}signOut(){var E=this;return(0,D.A)(function*(){return(0,x.xZ)(E.app)?Promise.reject(Lt(E)):(yield E.beforeStateQueue.runMiddleware(null),(E.redirectPersistenceManager||E._popupRedirectResolver)&&(yield E._setRedirectUser(null)),E._updateCurrentUser(null,!0))})()}setPersistence(E){var A=this;return(0,x.xZ)(this.app)?Promise.reject(Lt(this)):this.queue((0,D.A)(function*(){yield A.assertedPersistence.setPersistence(Hn(E))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(E){var A=this;return(0,D.A)(function*(){A._getPasswordPolicyInternal()||(yield A._updatePasswordPolicy());const k=A._getPasswordPolicyInternal();return k.schemaVersion!==A.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(A._errorFactory.create("unsupported-password-policy-schema-version",{})):k.validatePassword(E)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var E=this;return(0,D.A)(function*(){const A=yield function Nn(O){return Rr.apply(this,arguments)}(E),k=new uo(A);null===E.tenantId?E._projectPasswordPolicy=k:E._tenantPasswordPolicies[E.tenantId]=k})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(E){this._errorFactory=new L.FA("auth","Firebase",E())}onAuthStateChanged(E,A,k){return this.registerStateListener(this.authStateSubscription,E,A,k)}beforeAuthStateChanged(E,A){return this.beforeStateQueue.pushCallback(E,A)}onIdTokenChanged(E,A,k){return this.registerStateListener(this.idTokenSubscription,E,A,k)}authStateReady(){return new Promise((E,A)=>{if(this.currentUser)E();else{const k=this.onAuthStateChanged(()=>{k(),E()},A)}})}revokeAccessToken(E){var A=this;return(0,D.A)(function*(){if(A.currentUser){const k=yield A.currentUser.getIdToken(),te={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:E,idToken:k};null!=A.tenantId&&(te.tenantId=A.tenantId),yield function ge(O,E){return De.apply(this,arguments)}(A,te)}})()}toJSON(){var E;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(E=this._currentUser)||void 0===E?void 0:E.toJSON()}}_setRedirectUser(E,A){var k=this;return(0,D.A)(function*(){const te=yield k.getOrInitRedirectPersistenceManager(A);return null===E?te.removeCurrentUser():te.setCurrentUser(E)})()}getOrInitRedirectPersistenceManager(E){var A=this;return(0,D.A)(function*(){if(!A.redirectPersistenceManager){const k=E&&Hn(E)||A._popupRedirectResolver;ke(k,A,"argument-error"),A.redirectPersistenceManager=yield Yn.create(A,[Hn(k._redirectPersistence)],"redirectUser"),A.redirectUser=yield A.redirectPersistenceManager.getCurrentUser()}return A.redirectPersistenceManager})()}_redirectUserForId(E){var A=this;return(0,D.A)(function*(){var k,te;return A._isInitialized&&(yield A.queue((0,D.A)(function*(){}))),(null===(k=A._currentUser)||void 0===k?void 0:k._redirectEventId)===E?A._currentUser:(null===(te=A.redirectUser)||void 0===te?void 0:te._redirectEventId)===E?A.redirectUser:null})()}_persistUserIfCurrent(E){var A=this;return(0,D.A)(function*(){if(E===A.currentUser)return A.queue((0,D.A)(function*(){return A.directlySetCurrentUser(E)}))})()}_notifyListenersIfCurrent(E){E===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var E,A;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const k=null!==(A=null===(E=this.currentUser)||void 0===E?void 0:E.uid)&&void 0!==A?A:null;this.lastNotifiedUid!==k&&(this.lastNotifiedUid=k,this.authStateSubscription.next(this.currentUser))}registerStateListener(E,A,k,te){if(this._deleted)return()=>{};const ue="function"==typeof A?A:A.next.bind(A);let $e=!1;const ot=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(ot,this,"internal-error"),ot.then(()=>{$e||ue(this.currentUser)}),"function"==typeof A){const jt=E.addObserver(A,k,te);return()=>{$e=!0,jt()}}{const jt=E.addObserver(A);return()=>{$e=!0,jt()}}}directlySetCurrentUser(E){var A=this;return(0,D.A)(function*(){A.currentUser&&A.currentUser!==E&&A._currentUser._stopProactiveRefresh(),E&&A.isProactiveRefreshEnabled&&E._startProactiveRefresh(),A.currentUser=E,E?yield A.assertedPersistence.setCurrentUser(E):yield A.assertedPersistence.removeCurrentUser()})()}queue(E){return this.operations=this.operations.then(E,E),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(E){!E||this.frameworks.includes(E)||(this.frameworks.push(E),this.frameworks.sort(),this.clientVersion=Bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var E=this;return(0,D.A)(function*(){var A;const k={"X-Client-Version":E.clientVersion};E.app.options.appId&&(k["X-Firebase-gmpid"]=E.app.options.appId);const te=yield null===(A=E.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===A?void 0:A.getHeartbeatsHeader();te&&(k["X-Firebase-Client"]=te);const ue=yield E._getAppCheckToken();return ue&&(k["X-Firebase-AppCheck"]=ue),k})()}_getAppCheckToken(){var E=this;return(0,D.A)(function*(){var A;const k=yield null===(A=E.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===A?void 0:A.getToken();return k?.error&&function An(O,...E){Kt.logLevel<=Ue.$b.WARN&&Kt.warn(`Auth (${x.MF}): ${O}`,...E)}(`Error while retrieving App Check token: ${k.error}`),k?.token})()}}function Xr(O){return(0,L.Ku)(O)}class $a{constructor(E){this.auth=E,this.observer=null,this.addObserver=(0,L.tD)(A=>this.observer=A)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bs={loadJS:()=>(0,D.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ca(O){return bs.loadJS(O)}function Ts(O){return`__${O}${Math.floor(1e6*Math.random())}`}class To{constructor(E){this.type="recaptcha-enterprise",this.auth=Xr(E)}verify(E="verify",A=!1){var k=this;return(0,D.A)(function*(){function ue(){return ue=(0,D.A)(function*(ot){if(!A){if(null==ot.tenantId&&null!=ot._agentRecaptchaConfig)return ot._agentRecaptchaConfig.siteKey;if(null!=ot.tenantId&&void 0!==ot._tenantRecaptchaConfigs[ot.tenantId])return ot._tenantRecaptchaConfigs[ot.tenantId].siteKey}return new Promise(function(){var jt=(0,D.A)(function*(Cn,In){si(ot,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(vr=>{if(void 0!==vr.recaptchaKey){const ys=new oi(vr);return null==ot.tenantId?ot._agentRecaptchaConfig=ys:ot._tenantRecaptchaConfigs[ot.tenantId]=ys,Cn(ys.siteKey)}In(new Error("recaptcha Enterprise site key undefined"))}).catch(vr=>{In(vr)})});return function(Cn,In){return jt.apply(this,arguments)}}())}),ue.apply(this,arguments)}function $e(ot,jt,Cn){const In=window.grecaptcha;pr(In)?In.enterprise.ready(()=>{In.enterprise.execute(ot,{action:E}).then(vr=>{jt(vr)}).catch(()=>{jt("NO_RECAPTCHA")})}):Cn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ot,jt)=>{(function te(ot){return ue.apply(this,arguments)})(k.auth).then(Cn=>{if(!A&&pr(window.grecaptcha))$e(Cn,ot,jt);else{if(typeof window>"u")return void jt(new Error("RecaptchaVerifier is only supported in browser"));let In=function fc(){return bs.recaptchaEnterpriseScript}();0!==In.length&&(In+=Cn),ca(In).then(()=>{$e(Cn,ot,jt)}).catch(vr=>{jt(vr)})}}).catch(Cn=>{jt(Cn)})})})()}}function Zo(O,E,A){return ro.apply(this,arguments)}function ro(){return(ro=(0,D.A)(function*(O,E,A,k=!1){const te=new To(O);let ue;try{ue=yield te.verify(A)}catch{ue=yield te.verify(A,!0)}const $e=Object.assign({},E);return Object.assign($e,k?{captchaResp:ue}:{captchaResponse:ue}),Object.assign($e,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($e,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$e})).apply(this,arguments)}function Ar(O,E,A,k){return as.apply(this,arguments)}function as(){return as=(0,D.A)(function*(O,E,A,k){var te;if(null!==(te=O._getRecaptchaConfig())&&void 0!==te&&te.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const ue=yield Zo(O,E,A,"getOobCode"===A);return k(O,ue)}return k(O,E).catch(function(){var ue=(0,D.A)(function*($e){if("auth/missing-recaptcha-token"===$e.code){console.log(`${A} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ot=yield Zo(O,E,A,"getOobCode"===A);return k(O,ot)}return Promise.reject($e)});return function($e){return ue.apply(this,arguments)}}())}),as.apply(this,arguments)}function js(O){const E=O.indexOf(":");return E<0?"":O.substr(0,E+1)}function Vi(O){if(!O)return null;const E=Number(O);return isNaN(E)?null:E}class Jo{constructor(E,A){this.providerId=E,this.signInMethod=A}toJSON(){return bn("not implemented")}_getIdTokenResponse(E){return bn("not implemented")}_linkToIdToken(E,A){return bn("not implemented")}_getReauthenticationResolver(E){return bn("not implemented")}}function xo(O,E){return na.apply(this,arguments)}function na(){return(na=(0,D.A)(function*(O,E){return _e(O,"POST","/v1/accounts:signUp",E)})).apply(this,arguments)}function Hs(O,E){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,D.A)(function*(O,E){return en(O,"POST","/v1/accounts:signInWithPassword",he(O,E))})).apply(this,arguments)}function fo(){return(fo=(0,D.A)(function*(O,E){return en(O,"POST","/v1/accounts:signInWithEmailLink",he(O,E))})).apply(this,arguments)}function es(){return(es=(0,D.A)(function*(O,E){return en(O,"POST","/v1/accounts:signInWithEmailLink",he(O,E))})).apply(this,arguments)}class ha extends Jo{constructor(E,A,k,te=null){super("password",k),this._email=E,this._password=A,this._tenantId=te}static _fromEmailAndPassword(E,A){return new ha(E,A,"password")}static _fromEmailAndCode(E,A,k=null){return new ha(E,A,"emailLink",k)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(E){const A="string"==typeof E?JSON.parse(E):E;if(A?.email&&A?.password){if("password"===A.signInMethod)return this._fromEmailAndPassword(A.email,A.password);if("emailLink"===A.signInMethod)return this._fromEmailAndCode(A.email,A.password,A.tenantId)}return null}_getIdTokenResponse(E){var A=this;return(0,D.A)(function*(){switch(A.signInMethod){case"password":return Ar(E,{returnSecureToken:!0,email:A._email,password:A._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Hs);case"emailLink":return function hu(O,E){return fo.apply(this,arguments)}(E,{email:A._email,oobCode:A._password});default:Dt(E,"internal-error")}})()}_linkToIdToken(E,A){var k=this;return(0,D.A)(function*(){switch(k.signInMethod){case"password":return Ar(E,{idToken:A,returnSecureToken:!0,email:k._email,password:k._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xo);case"emailLink":return function za(O,E){return es.apply(this,arguments)}(E,{idToken:A,email:k._email,oobCode:k._password});default:Dt(E,"internal-error")}})()}_getReauthenticationResolver(E){return this._getIdTokenResponse(E)}}function So(O,E){return Da.apply(this,arguments)}function Da(){return(Da=(0,D.A)(function*(O,E){return en(O,"POST","/v1/accounts:signInWithIdp",he(O,E))})).apply(this,arguments)}class Uo extends Jo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(E){const A=new Uo(E.providerId,E.signInMethod);return E.idToken||E.accessToken?(E.idToken&&(A.idToken=E.idToken),E.accessToken&&(A.accessToken=E.accessToken),E.nonce&&!E.pendingToken&&(A.nonce=E.nonce),E.pendingToken&&(A.pendingToken=E.pendingToken)):E.oauthToken&&E.oauthTokenSecret?(A.accessToken=E.oauthToken,A.secret=E.oauthTokenSecret):Dt("argument-error"),A}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(E){const A="string"==typeof E?JSON.parse(E):E,{providerId:k,signInMethod:te}=A,ue=(0,Ze.Tt)(A,["providerId","signInMethod"]);if(!k||!te)return null;const $e=new Uo(k,te);return $e.idToken=ue.idToken||void 0,$e.accessToken=ue.accessToken||void 0,$e.secret=ue.secret,$e.nonce=ue.nonce,$e.pendingToken=ue.pendingToken||null,$e}_getIdTokenResponse(E){return So(E,this.buildRequest())}_linkToIdToken(E,A){const k=this.buildRequest();return k.idToken=A,So(E,k)}_getReauthenticationResolver(E){const A=this.buildRequest();return A.autoCreate=!1,So(E,A)}buildRequest(){const E={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)E.pendingToken=this.pendingToken;else{const A={};this.idToken&&(A.id_token=this.idToken),this.accessToken&&(A.access_token=this.accessToken),this.secret&&(A.oauth_token_secret=this.secret),A.providerId=this.providerId,this.nonce&&!this.pendingToken&&(A.nonce=this.nonce),E.postBody=(0,L.Am)(A)}return E}}class Ra{constructor(E){var A,k,te,ue,$e,ot;const jt=(0,L.I9)((0,L.hp)(E)),Cn=null!==(A=jt.apiKey)&&void 0!==A?A:null,In=null!==(k=jt.oobCode)&&void 0!==k?k:null,vr=function hr(O){switch(O){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(te=jt.mode)&&void 0!==te?te:null);ke(Cn&&In&&vr,"argument-error"),this.apiKey=Cn,this.operation=vr,this.code=In,this.continueUrl=null!==(ue=jt.continueUrl)&&void 0!==ue?ue:null,this.languageCode=null!==($e=jt.languageCode)&&void 0!==$e?$e:null,this.tenantId=null!==(ot=jt.tenantId)&&void 0!==ot?ot:null}static parseLink(E){const A=function $s(O){const E=(0,L.I9)((0,L.hp)(O)).link,A=E?(0,L.I9)((0,L.hp)(E)).deep_link_id:null,k=(0,L.I9)((0,L.hp)(O)).deep_link_id;return(k?(0,L.I9)((0,L.hp)(k)).link:null)||k||A||E||O}(E);try{return new Ra(A)}catch{return null}}}let pu=(()=>{class O{constructor(){this.providerId=O.PROVIDER_ID}static credential(A,k){return ha._fromEmailAndPassword(A,k)}static credentialWithLink(A,k){const te=Ra.parseLink(k);return ke(te,"argument-error"),ha._fromEmailAndCode(A,te.code,te.tenantId)}}return O.PROVIDER_ID="password",O.EMAIL_PASSWORD_SIGN_IN_METHOD="password",O.EMAIL_LINK_SIGN_IN_METHOD="emailLink",O})();class oo{constructor(E){this.providerId=E,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(E){this.defaultLanguageCode=E}setCustomParameters(E){return this.customParameters=E,this}getCustomParameters(){return this.customParameters}}class ga extends oo{constructor(){super(...arguments),this.scopes=[]}addScope(E){return this.scopes.includes(E)||this.scopes.push(E),this}getScopes(){return[...this.scopes]}}let Vc=(()=>{class O extends ga{constructor(){super("google.com"),this.addScope("profile")}static credential(A,k){return Uo._fromParams({providerId:O.PROVIDER_ID,signInMethod:O.GOOGLE_SIGN_IN_METHOD,idToken:A,accessToken:k})}static credentialFromResult(A){return O.credentialFromTaggedObject(A)}static credentialFromError(A){return O.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A)return null;const{oauthIdToken:k,oauthAccessToken:te}=A;if(!k&&!te)return null;try{return O.credential(k,te)}catch{return null}}}return O.GOOGLE_SIGN_IN_METHOD="google.com",O.PROVIDER_ID="google.com",O})(),mc=(()=>{class O extends ga{constructor(){super("github.com")}static credential(A){return Uo._fromParams({providerId:O.PROVIDER_ID,signInMethod:O.GITHUB_SIGN_IN_METHOD,accessToken:A})}static credentialFromResult(A){return O.credentialFromTaggedObject(A)}static credentialFromError(A){return O.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A||!("oauthAccessToken"in A)||!A.oauthAccessToken)return null;try{return O.credential(A.oauthAccessToken)}catch{return null}}}return O.GITHUB_SIGN_IN_METHOD="github.com",O.PROVIDER_ID="github.com",O})();function Gr(O,E){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,D.A)(function*(O,E){return en(O,"POST","/v1/accounts:signUp",he(O,E))})).apply(this,arguments)}class Tr{constructor(E){this.user=E.user,this.providerId=E.providerId,this._tokenResponse=E._tokenResponse,this.operationType=E.operationType}static _fromIdTokenResponse(E,A,k,te=!1){return(0,D.A)(function*(){const ue=yield Xt._fromIdTokenResponse(E,k,te),$e=jo(k);return new Tr({user:ue,providerId:$e,_tokenResponse:k,operationType:A})})()}static _forOperation(E,A,k){return(0,D.A)(function*(){yield E._updateTokensIfNecessary(k,!0);const te=jo(k);return new Tr({user:E,providerId:te,_tokenResponse:k,operationType:A})})()}}function jo(O){return O.providerId?O.providerId:"phoneNumber"in O?"phone":null}class Ho extends L.g{constructor(E,A,k,te){var ue;super(A.code,A.message),this.operationType=k,this.user=te,Object.setPrototypeOf(this,Ho.prototype),this.customData={appName:E.name,tenantId:null!==(ue=E.tenantId)&&void 0!==ue?ue:void 0,_serverResponse:A.customData._serverResponse,operationType:k}}static _fromErrorAndOperation(E,A,k,te){return new Ho(E,A,k,te)}}function kn(O,E,A,k){return("reauthenticate"===E?A._getReauthenticationResolver(O):A._getIdTokenResponse(O)).catch(ue=>{throw"auth/multi-factor-auth-required"===ue.code?Ho._fromErrorAndOperation(O,ue,E,k):ue})}function Yr(){return(Yr=(0,D.A)(function*(O,E,A=!1){const k=yield Vn(O,E._linkToIdToken(O.auth,yield O.getIdToken()),A);return Tr._forOperation(O,"link",k)})).apply(this,arguments)}function Vu(){return(Vu=(0,D.A)(function*(O,E,A=!1){const{auth:k}=O;if((0,x.xZ)(k.app))return Promise.reject(Lt(k));const te="reauthenticate";try{const ue=yield Vn(O,kn(k,te,E,O),A);ke(ue.idToken,k,"internal-error");const $e=Wr(ue.idToken);ke($e,k,"internal-error");const{sub:ot}=$e;return ke(O.uid===ot,k,"user-mismatch"),Tr._forOperation(O,te,ue)}catch(ue){throw"auth/user-not-found"===ue?.code&&Dt(k,"user-mismatch"),ue}})).apply(this,arguments)}function cl(O,E){return Y.apply(this,arguments)}function Y(){return(Y=(0,D.A)(function*(O,E,A=!1){if((0,x.xZ)(O.app))return Promise.reject(Lt(O));const k="signIn",te=yield kn(O,k,E),ue=yield Tr._fromIdTokenResponse(O,k,te);return A||(yield O._updateCurrentUser(ue.user)),ue})).apply(this,arguments)}function H(){return(H=(0,D.A)(function*(O,E){return cl(Xr(O),E)})).apply(this,arguments)}function fs(O){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,D.A)(function*(O){const E=Xr(O);E._getPasswordPolicyInternal()&&(yield E._updatePasswordPolicy())})).apply(this,arguments)}function ll(O,E,A){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,D.A)(function*(O,E,A){if((0,x.xZ)(O.app))return Promise.reject(Lt(O));const k=Xr(O),$e=yield Ar(k,{returnSecureToken:!0,email:E,password:A,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gr).catch(jt=>{throw"auth/password-does-not-meet-requirements"===jt.code&&fs(O),jt}),ot=yield Tr._fromIdTokenResponse(k,"signIn",$e);return yield k._updateCurrentUser(ot.user),ot})).apply(this,arguments)}function yc(O,E,A){return(0,x.xZ)(O.app)?Promise.reject(Lt(O)):function Z(O,E){return H.apply(this,arguments)}((0,L.Ku)(O),pu.credential(E,A)).catch(function(){var k=(0,D.A)(function*(te){throw"auth/password-does-not-meet-requirements"===te.code&&fs(O),te});return function(te){return k.apply(this,arguments)}}())}function Yt(){return(Yt=(0,D.A)(function*(O,E){return _e(O,"POST","/v1/accounts:update",E)})).apply(this,arguments)}function Dd(O,E){return _r.apply(this,arguments)}function _r(){return _r=(0,D.A)(function*(O,{displayName:E,photoURL:A}){if(void 0===E&&void 0===A)return;const k=(0,L.Ku)(O),ue={idToken:yield k.getIdToken(),displayName:E,photoUrl:A,returnSecureToken:!0},$e=yield Vn(k,function Or(O,E){return Yt.apply(this,arguments)}(k.auth,ue));k.displayName=$e.displayName||null,k.photoURL=$e.photoUrl||null;const ot=k.providerData.find(({providerId:jt})=>"password"===jt);ot&&(ot.displayName=k.displayName,ot.photoURL=k.photoURL),yield k._updateTokensIfNecessary($e)}),_r.apply(this,arguments)}function ns(O,E,A,k){return(0,L.Ku)(O).onAuthStateChanged(E,A,k)}const ju="__sak";class sn{constructor(E,A){this.storageRetriever=E,this.type=A}_isAvailable(){try{return this.storage?(this.storage.setItem(ju,"1"),this.storage.removeItem(ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(E,A){return this.storage.setItem(E,JSON.stringify(A)),Promise.resolve()}_get(E){const A=this.storage.getItem(E);return Promise.resolve(A?JSON.parse(A):null)}_remove(E){return this.storage.removeItem(E),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bi=(()=>{class O extends sn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(A,k)=>this.onStorageEvent(A,k),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cc(){const O=(0,L.ZQ)();return ci(O)||As(O)}()&&function tn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=St(),this._shouldAllowMigration=!0}forAllChangedKeys(A){for(const k of Object.keys(this.listeners)){const te=this.storage.getItem(k),ue=this.localCache[k];te!==ue&&A(k,ue,te)}}onStorageEvent(A,k=!1){if(!A.key)return void this.forAllChangedKeys((ot,jt,Cn)=>{this.notifyListeners(ot,Cn)});const te=A.key;if(k?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ot=this.storage.getItem(te);if(A.newValue!==ot)null!==A.newValue?this.storage.setItem(te,A.newValue):this.storage.removeItem(te);else if(this.localCache[te]===A.newValue&&!k)return}const ue=()=>{const ot=this.storage.getItem(te);!k&&this.localCache[te]===ot||this.notifyListeners(te,ot)},$e=this.storage.getItem(te);!function We(){return(0,L.lT)()&&10===document.documentMode}()||$e===A.newValue||A.newValue===A.oldValue?ue():setTimeout(ue,10)}notifyListeners(A,k){this.localCache[A]=k;const te=this.listeners[A];if(te)for(const ue of Array.from(te))ue(k&&JSON.parse(k))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((A,k,te)=>{this.onStorageEvent(new StorageEvent("storage",{key:A,oldValue:k,newValue:te}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(A,k){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[A]||(this.listeners[A]=new Set,this.localCache[A]=this.storage.getItem(A)),this.listeners[A].add(k)}_removeListener(A,k){this.listeners[A]&&(this.listeners[A].delete(k),0===this.listeners[A].size&&delete this.listeners[A]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(A,k){var te=()=>super._set,ue=this;return(0,D.A)(function*(){yield te().call(ue,A,k),ue.localCache[A]=JSON.stringify(k)})()}_get(A){var k=()=>super._get,te=this;return(0,D.A)(function*(){const ue=yield k().call(te,A);return te.localCache[A]=JSON.stringify(ue),ue})()}_remove(A){var k=()=>super._remove,te=this;return(0,D.A)(function*(){yield k().call(te,A),delete te.localCache[A]})()}}return O.type="LOCAL",O})(),vu=(()=>{class O extends sn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(A,k){}_removeListener(A,k){}}return O.type="SESSION",O})();let Wo=(()=>{class O{constructor(A){this.eventTarget=A,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(A){const k=this.receivers.find(ue=>ue.isListeningto(A));if(k)return k;const te=new O(A);return this.receivers.push(te),te}isListeningto(A){return this.eventTarget===A}handleEvent(A){var k=this;return(0,D.A)(function*(){const te=A,{eventId:ue,eventType:$e,data:ot}=te.data,jt=k.handlersMap[$e];if(!jt?.size)return;te.ports[0].postMessage({status:"ack",eventId:ue,eventType:$e});const Cn=Array.from(jt).map(function(){var vr=(0,D.A)(function*(ys){return ys(te.origin,ot)});return function(ys){return vr.apply(this,arguments)}}()),In=yield function zo(O){return Promise.all(O.map(function(){var E=(0,D.A)(function*(A){try{return{fulfilled:!0,value:yield A}}catch(k){return{fulfilled:!1,reason:k}}});return function(A){return E.apply(this,arguments)}}()))}(Cn);te.ports[0].postMessage({status:"done",eventId:ue,eventType:$e,response:In})})()}_subscribe(A,k){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[A]||(this.handlersMap[A]=new Set),this.handlersMap[A].add(k)}_unsubscribe(A,k){this.handlersMap[A]&&k&&this.handlersMap[A].delete(k),(!k||0===this.handlersMap[A].size)&&delete this.handlersMap[A],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return O.receivers=[],O})();function Os(O="",E=10){let A="";for(let k=0;k<E;k++)A+=Math.floor(10*Math.random());return O+A}class Gc{constructor(E){this.target=E,this.handlers=new Set}removeMessageHandler(E){E.messageChannel&&(E.messageChannel.port1.removeEventListener("message",E.onMessage),E.messageChannel.port1.close()),this.handlers.delete(E)}_send(E,A,k=50){var te=this;return(0,D.A)(function*(){const ue=typeof MessageChannel<"u"?new MessageChannel:null;if(!ue)throw new Error("connection_unavailable");let $e,ot;return new Promise((jt,Cn)=>{const In=Os("",20);ue.port1.start();const vr=setTimeout(()=>{Cn(new Error("unsupported_event"))},k);ot={messageChannel:ue,onMessage(ys){const Zc=ys;if(Zc.data.eventId===In)switch(Zc.data.status){case"ack":clearTimeout(vr),$e=setTimeout(()=>{Cn(new Error("timeout"))},3e3);break;case"done":clearTimeout($e),jt(Zc.data.response);break;default:clearTimeout(vr),clearTimeout($e),Cn(new Error("invalid_response"))}}},te.handlers.add(ot),ue.port1.addEventListener("message",ot.onMessage),te.target.postMessage({eventType:E,eventId:In,data:A},[ue.port2])}).finally(()=>{ot&&te.removeMessageHandler(ot)})})()}}function Co(){return window}function pi(){return typeof Co().WorkerGlobalScope<"u"&&"function"==typeof Co().importScripts}function qs(){return(qs=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ka="firebaseLocalStorageDb",Fa="firebaseLocalStorage",La="fbase_key";class Zi{constructor(E){this.request=E}toPromise(){return new Promise((E,A)=>{this.request.addEventListener("success",()=>{E(this.request.result)}),this.request.addEventListener("error",()=>{A(this.request.error)})})}}function Ic(O,E){return O.transaction([Fa],E?"readwrite":"readonly").objectStore(Fa)}function Ul(){const O=indexedDB.open(ka,1);return new Promise((E,A)=>{O.addEventListener("error",()=>{A(O.error)}),O.addEventListener("upgradeneeded",()=>{const k=O.result;try{k.createObjectStore(Fa,{keyPath:La})}catch(te){A(te)}}),O.addEventListener("success",(0,D.A)(function*(){const k=O.result;k.objectStoreNames.contains(Fa)?E(k):(k.close(),yield function Wu(){const O=indexedDB.deleteDatabase(ka);return new Zi(O).toPromise()}(),E(yield Ul()))}))})}function Ir(O,E,A){return fl.apply(this,arguments)}function fl(){return(fl=(0,D.A)(function*(O,E,A){const k=Ic(O,!0).put({[La]:E,value:A});return new Zi(k).toPromise()})).apply(this,arguments)}function jl(){return(jl=(0,D.A)(function*(O,E){const A=Ic(O,!1).get(E),k=yield new Zi(A).toPromise();return void 0===k?null:k.value})).apply(this,arguments)}function hn(O,E){const A=Ic(O,!0).delete(E);return new Zi(A).toPromise()}const Hl=(()=>{class O{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var A=this;return(0,D.A)(function*(){return A.db||(A.db=yield Ul()),A.db})()}_withRetries(A){var k=this;return(0,D.A)(function*(){let te=0;for(;;)try{const ue=yield k._openDb();return yield A(ue)}catch(ue){if(te++>3)throw ue;k.db&&(k.db.close(),k.db=void 0)}})()}initializeServiceWorkerMessaging(){var A=this;return(0,D.A)(function*(){return pi()?A.initializeReceiver():A.initializeSender()})()}initializeReceiver(){var A=this;return(0,D.A)(function*(){A.receiver=Wo._getInstance(function Pd(){return pi()?self:null}()),A.receiver._subscribe("keyChanged",function(){var k=(0,D.A)(function*(te,ue){return{keyProcessed:(yield A._poll()).includes(ue.key)}});return function(te,ue){return k.apply(this,arguments)}}()),A.receiver._subscribe("ping",function(){var k=(0,D.A)(function*(te,ue){return["keyChanged"]});return function(te,ue){return k.apply(this,arguments)}}())})()}initializeSender(){var A=this;return(0,D.A)(function*(){var k,te;if(A.activeServiceWorker=yield function Pr(){return qs.apply(this,arguments)}(),!A.activeServiceWorker)return;A.sender=new Gc(A.activeServiceWorker);const ue=yield A.sender._send("ping",{},800);ue&&null!==(k=ue[0])&&void 0!==k&&k.fulfilled&&null!==(te=ue[0])&&void 0!==te&&te.value.includes("keyChanged")&&(A.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(A){var k=this;return(0,D.A)(function*(){if(k.sender&&k.activeServiceWorker&&function zu(){var O;return(null===(O=navigator?.serviceWorker)||void 0===O?void 0:O.controller)||null}()===k.activeServiceWorker)try{yield k.sender._send("keyChanged",{key:A},k.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const A=yield Ul();return yield Ir(A,ju,"1"),yield hn(A,ju),!0}catch{}return!1})()}_withPendingWrite(A){var k=this;return(0,D.A)(function*(){k.pendingWrites++;try{yield A()}finally{k.pendingWrites--}})()}_set(A,k){var te=this;return(0,D.A)(function*(){return te._withPendingWrite((0,D.A)(function*(){return yield te._withRetries(ue=>Ir(ue,A,k)),te.localCache[A]=k,te.notifyServiceWorker(A)}))})()}_get(A){var k=this;return(0,D.A)(function*(){const te=yield k._withRetries(ue=>function hl(O,E){return jl.apply(this,arguments)}(ue,A));return k.localCache[A]=te,te})()}_remove(A){var k=this;return(0,D.A)(function*(){return k._withPendingWrite((0,D.A)(function*(){return yield k._withRetries(te=>hn(te,A)),delete k.localCache[A],k.notifyServiceWorker(A)}))})()}_poll(){var A=this;return(0,D.A)(function*(){const k=yield A._withRetries($e=>{const ot=Ic($e,!1).getAll();return new Zi(ot).toPromise()});if(!k)return[];if(0!==A.pendingWrites)return[];const te=[],ue=new Set;if(0!==k.length)for(const{fbase_key:$e,value:ot}of k)ue.add($e),JSON.stringify(A.localCache[$e])!==JSON.stringify(ot)&&(A.notifyListeners($e,ot),te.push($e));for(const $e of Object.keys(A.localCache))A.localCache[$e]&&!ue.has($e)&&(A.notifyListeners($e,null),te.push($e));return te})()}notifyListeners(A,k){this.localCache[A]=k;const te=this.listeners[A];if(te)for(const ue of Array.from(te))ue(k)}startPolling(){var A=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return A._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(A,k){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[A]||(this.listeners[A]=new Set,this._get(A)),this.listeners[A].add(k)}_removeListener(A,k){this.listeners[A]&&(this.listeners[A].delete(k),0===this.listeners[A].size&&delete this.listeners[A]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return O.type="LOCAL",O})();function Ja(O,E){return E?Hn(E):(ke(O._popupRedirectResolver,O,"argument-error"),O._popupRedirectResolver)}Ts("rcb"),new er(3e4,6e4);class bf extends Jo{constructor(E){super("custom","custom"),this.params=E}_getIdTokenResponse(E){return So(E,this._buildIdpRequest())}_linkToIdToken(E,A){return So(E,this._buildIdpRequest(A))}_getReauthenticationResolver(E){return So(E,this._buildIdpRequest())}_buildIdpRequest(E){const A={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return E&&(A.idToken=E),A}}function Gl(O){return cl(O.auth,new bf(O),O.bypassAuthState)}function Tf(O){const{auth:E,user:A}=O;return ke(A,E,"internal-error"),function Do(O,E){return Vu.apply(this,arguments)}(A,new bf(O),O.bypassAuthState)}function Fd(O){return qu.apply(this,arguments)}function qu(){return(qu=(0,D.A)(function*(O){const{auth:E,user:A}=O;return ke(A,E,"internal-error"),function Go(O,E){return Yr.apply(this,arguments)}(A,new bf(O),O.bypassAuthState)})).apply(this,arguments)}class $l{constructor(E,A,k,te,ue=!1){this.auth=E,this.resolver=k,this.user=te,this.bypassAuthState=ue,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(A)?A:[A]}execute(){var E=this;return new Promise(function(){var A=(0,D.A)(function*(k,te){E.pendingPromise={resolve:k,reject:te};try{E.eventManager=yield E.resolver._initialize(E.auth),yield E.onExecution(),E.eventManager.registerConsumer(E)}catch(ue){E.reject(ue)}});return function(k,te){return A.apply(this,arguments)}}())}onAuthEvent(E){var A=this;return(0,D.A)(function*(){const{urlResponse:k,sessionId:te,postBody:ue,tenantId:$e,error:ot,type:jt}=E;if(ot)return void A.reject(ot);const Cn={auth:A.auth,requestUri:k,sessionId:te,tenantId:$e||void 0,postBody:ue||void 0,user:A.user,bypassAuthState:A.bypassAuthState};try{A.resolve(yield A.getIdpTask(jt)(Cn))}catch(In){A.reject(In)}})()}onError(E){this.reject(E)}getIdpTask(E){switch(E){case"signInViaPopup":case"signInViaRedirect":return Gl;case"linkViaPopup":case"linkViaRedirect":return Fd;case"reauthViaPopup":case"reauthViaRedirect":return Tf;default:Dt(this.auth,"internal-error")}}resolve(E){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(E),this.unregisterAndCleanUp()}reject(E){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(E),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cu=new er(2e3,1e4);function Wc(O,E,A){return zl.apply(this,arguments)}function zl(){return(zl=(0,D.A)(function*(O,E,A){if((0,x.xZ)(O.app))return Promise.reject(It(O,"operation-not-supported-in-this-environment"));const k=Xr(O);!function At(O,E,A){if(!(E instanceof A))throw A.name!==E.constructor.name&&Dt(O,"argument-error"),_t(O,"argument-error",`Type of ${E.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(O,E,oo);const te=Ja(k,A);return new qo(k,"signInViaPopup",E,te).executeNotNull()})).apply(this,arguments)}let qo=(()=>{class O extends $l{constructor(A,k,te,ue,$e){super(A,k,ue,$e),this.provider=te,this.authWindow=null,this.pollId=null,O.currentPopupAction&&O.currentPopupAction.cancel(),O.currentPopupAction=this}executeNotNull(){var A=this;return(0,D.A)(function*(){const k=yield A.execute();return ke(k,A.auth,"internal-error"),k})()}onExecution(){var A=this;return(0,D.A)(function*(){_n(1===A.filter.length,"Popup operations only handle one event");const k=Os();A.authWindow=yield A.resolver._openPopup(A.auth,A.provider,A.filter[0],k),A.authWindow.associatedEvent=k,A.resolver._originValidation(A.auth).catch(te=>{A.reject(te)}),A.resolver._isIframeWebStorageSupported(A.auth,te=>{te||A.reject(It(A.auth,"web-storage-unsupported"))}),A.pollUserCancellation()})()}get eventId(){var A;return(null===(A=this.authWindow)||void 0===A?void 0:A.associatedEvent)||null}cancel(){this.reject(It(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,O.currentPopupAction=null}pollUserCancellation(){const A=()=>{var k,te;this.pollId=null!==(te=null===(k=this.authWindow)||void 0===k?void 0:k.window)&&void 0!==te&&te.closed?window.setTimeout(()=>{this.pollId=null,this.reject(It(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(A,Cu.get())};A()}}return O.currentPopupAction=null,O})();const Ac="pendingRedirect",ja=new Map;class bh extends $l{constructor(E,A,k=!1){super(E,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],A,void 0,k),this.eventId=null}execute(){var E=()=>super.execute,A=this;return(0,D.A)(function*(){let k=ja.get(A.auth._key());if(!k){try{const ue=(yield function Th(O,E){return Lr.apply(this,arguments)}(A.resolver,A.auth))?yield E().call(A):null;k=()=>Promise.resolve(ue)}catch(te){k=()=>Promise.reject(te)}ja.set(A.auth._key(),k)}return A.bypassAuthState||ja.set(A.auth._key(),()=>Promise.resolve(null)),k()})()}onAuthEvent(E){var A=()=>super.onAuthEvent,k=this;return(0,D.A)(function*(){if("signInViaRedirect"===E.type)return A().call(k,E);if("unknown"!==E.type){if(E.eventId){const te=yield k.auth._redirectUserForId(E.eventId);if(te)return k.user=te,A().call(k,E);k.resolve(null)}}else k.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function Lr(){return(Lr=(0,D.A)(function*(O,E){const A=function bc(O){return vi(Ac,O.config.apiKey,O.name)}(E),k=function ec(O){return Hn(O._redirectPersistence)}(O);if(!(yield k._isAvailable()))return!1;const te="true"===(yield k._get(A));return yield k._remove(A),te})).apply(this,arguments)}function Ld(O,E){ja.set(O._key(),E)}function Dh(O,E){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,D.A)(function*(O,E,A=!1){if((0,x.xZ)(O.app))return Promise.reject(Lt(O));const k=Xr(O),te=Ja(k,E),$e=yield new bh(k,te,A).execute();return $e&&!A&&(delete $e.user._redirectEventId,yield k._persistUserIfCurrent($e.user),yield k._setRedirectUser(null,E)),$e})).apply(this,arguments)}class Bd{constructor(E){this.auth=E,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(E){this.consumers.add(E),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,E)&&(this.sendToConsumer(this.queuedRedirectEvent,E),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(E){this.consumers.delete(E)}onEvent(E){if(this.hasEventBeenHandled(E))return!1;let A=!1;return this.consumers.forEach(k=>{this.isEventForConsumer(E,k)&&(A=!0,this.sendToConsumer(E,k),this.saveEventToCache(E))}),this.hasHandledPotentialRedirect||!function Rn(O){switch(O.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qt(O);default:return!1}}(E)||(this.hasHandledPotentialRedirect=!0,A||(this.queuedRedirectEvent=E,A=!0)),A}sendToConsumer(E,A){var k;if(E.error&&!qt(E)){const te=(null===(k=E.error.code)||void 0===k?void 0:k.split("auth/")[1])||"internal-error";A.onError(It(this.auth,te))}else A.onAuthEvent(E)}isEventForConsumer(E,A){const k=null===A.eventId||!!E.eventId&&E.eventId===A.eventId;return A.filter.includes(E.type)&&k}hasEventBeenHandled(E){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ui(E))}saveEventToCache(E){this.cachedEventUids.add(Ui(E)),this.lastProcessedEventTime=Date.now()}}function Ui(O){return[O.type,O.eventId,O.sessionId,O.tenantId].filter(E=>E).join("-")}function qt({type:O,error:E}){return"unknown"===O&&"auth/no-auth-event"===E?.code}function ms(){return(ms=(0,D.A)(function*(O,E={}){return _e(O,"GET","/v1/projects",E)})).apply(this,arguments)}const _s=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vs=/^https?/;function Ii(){return Ii=(0,D.A)(function*(O){if(O.config.emulator)return;const{authorizedDomains:E}=yield function wo(O){return ms.apply(this,arguments)}(O);for(const A of E)try{if(Pi(A))return}catch{}Dt(O,"unauthorized-domain")}),Ii.apply(this,arguments)}function Pi(O){const E=Sn(),{protocol:A,hostname:k}=new URL(E);if(O.startsWith("chrome-extension://")){const $e=new URL(O);return""===$e.hostname&&""===k?"chrome-extension:"===A&&O.replace("chrome-extension://","")===E.replace("chrome-extension://",""):"chrome-extension:"===A&&$e.hostname===k}if(!vs.test(A))return!1;if(_s.test(O))return k===O;const te=O.replace(/\./g,"\\.");return new RegExp("^(.+\\."+te+"|"+te+")$","i").test(k)}const Ni=new er(3e4,6e4);function nr(){const O=Co().___jsl;if(O?.H)for(const E of Object.keys(O.H))if(O.H[E].r=O.H[E].r||[],O.H[E].L=O.H[E].L||[],O.H[E].r=[...O.H[E].L],O.CP)for(let A=0;A<O.CP.length;A++)O.CP[A]=null}let nc=null;const Ai=new er(5e3,15e3),Qu="__/auth/iframe",Xc="emulator/auth/iframe",go={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},El=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mf(O){const E=O.config;ke(E.authDomain,O,"auth-domain-config-required");const A=E.emulator?Pe(E,Xc):`https://${O.config.authDomain}/${Qu}`,k={apiKey:E.apiKey,appName:O.name,v:x.MF},te=El.get(O.config.apiHost);te&&(k.eid=te);const ue=O._getFrameworks();return ue.length&&(k.fw=ue.join(",")),`${A}?${(0,L.Am)(k).slice(1)}`}function Au(){return Au=(0,D.A)(function*(O){const E=yield function yl(O){return nc=nc||function Xl(O){return new Promise((E,A)=>{var k,te,ue;function $e(){nr(),gapi.load("gapi.iframes",{callback:()=>{E(gapi.iframes.getContext())},ontimeout:()=>{nr(),A(It(O,"network-request-failed"))},timeout:Ni.get()})}if(null!==(te=null===(k=Co().gapi)||void 0===k?void 0:k.iframes)&&void 0!==te&&te.Iframe)E(gapi.iframes.getContext());else{if(null===(ue=Co().gapi)||void 0===ue||!ue.load){const ot=Ts("iframefcb");return Co()[ot]=()=>{gapi.load?$e():A(It(O,"network-request-failed"))},ca(`${function hc(){return bs.gapiScript}()}?onload=${ot}`).catch(jt=>A(jt))}$e()}}).catch(E=>{throw nc=null,E})}(O),nc}(O),A=Co().gapi;return ke(A,O,"internal-error"),E.open({where:document.body,url:Mf(O),messageHandlersFilter:A.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:go,dontclear:!0},k=>new Promise(function(){var te=(0,D.A)(function*(ue,$e){yield k.restyle({setHideOnLeave:!1});const ot=It(O,"network-request-failed"),jt=Co().setTimeout(()=>{$e(ot)},Ai.get());function Cn(){Co().clearTimeout(jt),ue(k)}k.ping(Cn).then(Cn,()=>{$e(ot)})});return function(ue,$e){return te.apply(this,arguments)}}()))}),Au.apply(this,arguments)}const rc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cl{constructor(E){this.window=E,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const wl="__/auth/handler",Po="emulator/auth/handler",ks=encodeURIComponent("fac");function Ks(O,E,A,k,te,ue){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,D.A)(function*(O,E,A,k,te,ue){ke(O.config.authDomain,O,"auth-domain-config-required"),ke(O.config.apiKey,O,"invalid-api-key");const $e={apiKey:O.config.apiKey,appName:O.name,authType:A,redirectUrl:k,v:x.MF,eventId:te};if(E instanceof oo){E.setDefaultLanguage(O.languageCode),$e.providerId=E.providerId||"",(0,L.Im)(E.getCustomParameters())||($e.customParameters=JSON.stringify(E.getCustomParameters()));for(const[In,vr]of Object.entries(ue||{}))$e[In]=vr}if(E instanceof ga){const In=E.getScopes().filter(vr=>""!==vr);In.length>0&&($e.scopes=In.join(","))}O.tenantId&&($e.tid=O.tenantId);const ot=$e;for(const In of Object.keys(ot))void 0===ot[In]&&delete ot[In];const jt=yield O._getAppCheckToken(),Cn=jt?`#${ks}=${encodeURIComponent(jt)}`:"";return`${function Ql({config:O}){return O.emulator?Pe(O,Po):`https://${O.authDomain}/${wl}`}(O)}?${(0,L.Am)(ot).slice(1)}${Cn}`})).apply(this,arguments)}const Ca="webStorageSupport",Il=class xc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vu,this._completeRedirectFn=Dh,this._overrideRedirectResult=Ld}_openPopup(E,A,k,te){var ue=this;return(0,D.A)(function*(){var $e;_n(null===($e=ue.eventManagers[E._key()])||void 0===$e?void 0:$e.manager,"_initialize() not called before _openPopup()");const ot=yield Ks(E,A,k,Sn(),te);return function Qc(O,E,A,k=500,te=600){const ue=Math.max((window.screen.availHeight-te)/2,0).toString(),$e=Math.max((window.screen.availWidth-k)/2,0).toString();let ot="";const jt=Object.assign(Object.assign({},rc),{width:k.toString(),height:te.toString(),top:ue,left:$e}),Cn=(0,L.ZQ)().toLowerCase();A&&(ot=Us(Cn)?"_blank":A),Hr(Cn)&&(E=E||"http://localhost",jt.scrollbars="yes");const In=Object.entries(jt).reduce((ys,[Zc,Tl])=>`${ys}${Zc}=${Tl},`,"");if(function vt(O=(0,L.ZQ)()){var E;return As(O)&&!(null===(E=window.navigator)||void 0===E||!E.standalone)}(Cn)&&"_self"!==ot)return function mo(O,E){const A=document.createElement("a");A.href=O,A.target=E;const k=document.createEvent("MouseEvent");k.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),A.dispatchEvent(k)}(E||"",ot),new Cl(null);const vr=window.open(E||"",ot,In);ke(vr,O,"popup-blocked");try{vr.focus()}catch{}return new Cl(vr)}(E,ot,Os())})()}_openRedirect(E,A,k,te){var ue=this;return(0,D.A)(function*(){return yield ue._originValidation(E),function $u(O){Co().location.href=O}(yield Ks(E,A,k,Sn(),te)),new Promise(()=>{})})()}_initialize(E){const A=E._key();if(this.eventManagers[A]){const{manager:te,promise:ue}=this.eventManagers[A];return te?Promise.resolve(te):(_n(ue,"If manager is not set, promise should be"),ue)}const k=this.initAndGetManager(E);return this.eventManagers[A]={promise:k},k.catch(()=>{delete this.eventManagers[A]}),k}initAndGetManager(E){var A=this;return(0,D.A)(function*(){const k=yield function Ns(O){return Au.apply(this,arguments)}(E),te=new Bd(E);return k.register("authEvent",ue=>(ke(ue?.authEvent,E,"invalid-auth-event"),{status:te.onEvent(ue.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),A.eventManagers[E._key()]={manager:te},A.iframes[E._key()]=k,te})()}_isIframeWebStorageSupported(E,A){this.iframes[E._key()].send(Ca,{type:Ca},te=>{var ue;const $e=null===(ue=te?.[0])||void 0===ue?void 0:ue[Ca];void 0!==$e&&A(!!$e),Dt(E,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(E){const A=E._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=function vl(O){return Ii.apply(this,arguments)}(E)),this.originValidationPromises[A]}get _shouldInitProactively(){return St()||ci()||As()}};var Gp="@firebase/auth";class $p{constructor(E){this.auth=E,this.internalListeners=new Map}getUid(){var E;return this.assertAuthConfigured(),(null===(E=this.auth.currentUser)||void 0===E?void 0:E.uid)||null}getToken(E){var A=this;return(0,D.A)(function*(){return A.assertAuthConfigured(),yield A.auth._initializationPromise,A.auth.currentUser?{accessToken:yield A.auth.currentUser.getIdToken(E)}:null})()}addAuthTokenListener(E){if(this.assertAuthConfigured(),this.internalListeners.has(E))return;const A=this.auth.onIdTokenChanged(k=>{E(k?.stsTokenManager.accessToken||null)});this.internalListeners.set(E,A),this.updateProactiveRefresh()}removeAuthTokenListener(E){this.assertAuthConfigured();const A=this.internalListeners.get(E);A&&(this.internalListeners.delete(E),A(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Hd=(0,L.XA)("authIdTokenMaxAge")||300;let Gd=null;const Oh=O=>function(){var E=(0,D.A)(function*(A){const k=A&&(yield A.getIdTokenResult()),te=k&&((new Date).getTime()-Date.parse(k.issuedAtTime))/1e3;if(te&&te>Hd)return;const ue=k?.token;Gd!==ue&&(Gd=ue,yield fetch(O,{method:ue?"POST":"DELETE",headers:ue?{Authorization:`Bearer ${ue}`}:{}}))});return function(A){return E.apply(this,arguments)}}();function Ph(O=(0,x.Sx)()){const E=(0,x.j6)(O,"auth");if(E.isInitialized())return E.getImmediate();const A=function ua(O,E){const A=(0,x.j6)(O,"auth");if(A.isInitialized()){const te=A.getImmediate(),ue=A.getOptions();if((0,L.bD)(ue,E??{}))return te;Dt(te,"already-initialized")}return A.initialize({options:E})}(O,{popupRedirectResolver:Il,persistence:[Hl,Bi,vu]}),k=(0,L.XA)("authTokenSyncURL");if(k&&"boolean"==typeof isSecureContext&&isSecureContext){const ue=new URL(k,location.origin);if(location.origin===ue.origin){const $e=Oh(ue.toString());(function ts(O,E,A){(0,L.Ku)(O).beforeAuthStateChanged(E,A)})(A,$e,()=>$e(A.currentUser)),function Qi(O,E,A,k){(0,L.Ku)(O).onIdTokenChanged(E,A,k)}(A,ot=>$e(ot))}}const te=(0,L.Tj)("auth");return te&&function Ri(O,E,A){const k=Xr(O);ke(k._canInitEmulator,k,"emulator-config-failed"),ke(/^https?:\/\//.test(E),k,"invalid-emulator-scheme");const te=!!A?.disableWarnings,ue=js(E),{host:$e,port:ot}=function Vl(O){const E=js(O),A=/(\/\/)?([^?#/]+)/.exec(O.substr(E.length));if(!A)return{host:"",port:null};const k=A[2].split("@").pop()||"",te=/^(\[[^\]]+\])(:|$)/.exec(k);if(te){const ue=te[1];return{host:ue,port:Vi(k.substr(ue.length+1))}}{const[ue,$e]=k.split(":");return{host:ue,port:Vi($e)}}}(E);k.config.emulator={url:`${ue}//${$e}${null===ot?"":`:${ot}`}/`},k.settings.appVerificationDisabledForTesting=!0,k.emulatorConfig=Object.freeze({host:$e,port:ot,protocol:ue.replace(":",""),options:Object.freeze({disableWarnings:te})}),te||function Bo(){function O(){const E=document.createElement("p"),A=E.style;E.innerText="Running in emulator mode. Do not use with production credentials.",A.position="fixed",A.width="100%",A.backgroundColor="#ffffff",A.border=".1em solid #000000",A.color="#b50000",A.bottom="0px",A.left="0px",A.margin="0px",A.zIndex="10000",A.textAlign="center",E.classList.add("firebase-emulator-warning"),document.body.appendChild(E)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",O):O())}()}(A,`http://${te}`),A}(function fu(O){bs=O})({loadJS:O=>new Promise((E,A)=>{const k=document.createElement("script");k.setAttribute("src",O),k.onload=E,k.onerror=te=>{const ue=It("internal-error");ue.customData=te,A(ue)},k.type="text/javascript",k.charset="UTF-8",function $d(){var O,E;return null!==(E=null===(O=document.getElementsByTagName("head"))||void 0===O?void 0:O[0])&&void 0!==E?E:document}().appendChild(k)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Mh(O){(0,x.om)(new Ee.uA("auth",(E,{options:A})=>{const k=E.getProvider("app").getImmediate(),te=E.getProvider("heartbeat"),ue=E.getProvider("app-check-internal"),{apiKey:$e,authDomain:ot}=k.options;ke($e&&!$e.includes(":"),"invalid-api-key",{appName:k.name});const jt={apiKey:$e,authDomain:ot,clientPlatform:O,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bn(O)},Cn=new Vo(k,te,ue,jt);return function qi(O,E){const A=E?.persistence||[],k=(Array.isArray(A)?A:[A]).map(Hn);E?.errorMap&&O._updateErrorMap(E.errorMap),O._initializeWithPersistence(k,E?.popupRedirectResolver)}(Cn,A),Cn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((E,A,k)=>{E.getProvider("auth-internal").initialize()})),(0,x.om)(new Ee.uA("auth-internal",E=>{const A=Xr(E.getProvider("auth").getImmediate());return new $p(A)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,x.KO)(Gp,"1.7.4",function zp(O){switch(O){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(O)),(0,x.KO)(Gp,"1.7.4","esm2017")}("Browser")},467:(yn,wt,ie)=>{function D(L,Ue,Ze,Ee,Xe,Et,it){try{var ve=L[Et](it),Ie=ve.value}catch(Oe){return void Ze(Oe)}ve.done?Ue(Ie):Promise.resolve(Ie).then(Ee,Xe)}function x(L){return function(){var Ue=this,Ze=arguments;return new Promise(function(Ee,Xe){var Et=L.apply(Ue,Ze);function it(Ie){D(Et,Ee,Xe,it,ve,"next",Ie)}function ve(Ie){D(Et,Ee,Xe,it,ve,"throw",Ie)}it(void 0)})}}ie.d(wt,{A:()=>x})},1635:(yn,wt,ie)=>{function Ue(Pe,je){var xt={};for(var Fe in Pe)Object.prototype.hasOwnProperty.call(Pe,Fe)&&je.indexOf(Fe)<0&&(xt[Fe]=Pe[Fe]);if(null!=Pe&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(Fe=Object.getOwnPropertySymbols(Pe);he<Fe.length;he++)je.indexOf(Fe[he])<0&&Object.prototype.propertyIsEnumerable.call(Pe,Fe[he])&&(xt[Fe[he]]=Pe[Fe[he]])}return xt}function Oe(Pe,je,xt,Fe){return new(xt||(xt=Promise))(function(_e,mt){function zt(qn){try{en(Fe.next(qn))}catch(jr){mt(jr)}}function jn(qn){try{en(Fe.throw(qn))}catch(jr){mt(jr)}}function en(qn){qn.done?_e(qn.value):function he(_e){return _e instanceof xt?_e:new xt(function(mt){mt(_e)})}(qn.value).then(zt,jn)}en((Fe=Fe.apply(Pe,je||[])).next())})}function Dt(Pe){return this instanceof Dt?(this.v=Pe,this):new Dt(Pe)}function It(Pe,je,xt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,Fe=xt.apply(Pe,je||[]),_e=[];return he={},zt("next"),zt("throw"),zt("return",function mt(lr){return function(qr){return Promise.resolve(qr).then(lr,jr)}}),he[Symbol.asyncIterator]=function(){return this},he;function zt(lr,qr){Fe[lr]&&(he[lr]=function(Tn){return new Promise(function(pr,oi){_e.push([lr,Tn,pr,oi])>1||jn(lr,Tn)})},qr&&(he[lr]=qr(he[lr])))}function jn(lr,qr){try{!function en(lr){lr.value instanceof Dt?Promise.resolve(lr.value.v).then(qn,jr):to(_e[0][2],lr)}(Fe[lr](qr))}catch(Tn){to(_e[0][3],Tn)}}function qn(lr){jn("next",lr)}function jr(lr){jn("throw",lr)}function to(lr,qr){lr(qr),_e.shift(),_e.length&&jn(_e[0][0],_e[0][1])}}function Lt(Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xt,je=Pe[Symbol.asyncIterator];return je?je.call(Pe):(Pe=function kt(Pe){var je="function"==typeof Symbol&&Symbol.iterator,xt=je&&Pe[je],Fe=0;if(xt)return xt.call(Pe);if(Pe&&"number"==typeof Pe.length)return{next:function(){return Pe&&Fe>=Pe.length&&(Pe=void 0),{value:Pe&&Pe[Fe++],done:!Pe}}};throw new TypeError(je?"Object is not iterable.":"Symbol.iterator is not defined.")}(Pe),xt={},Fe("next"),Fe("throw"),Fe("return"),xt[Symbol.asyncIterator]=function(){return this},xt);function Fe(_e){xt[_e]=Pe[_e]&&function(mt){return new Promise(function(zt,jn){!function he(_e,mt,zt,jn){Promise.resolve(jn).then(function(en){_e({value:en,done:zt})},mt)}(zt,jn,(mt=Pe[_e](mt)).done,mt.value)})}}}ie.d(wt,{AQ:()=>It,N3:()=>Dt,Tt:()=>Ue,sH:()=>Oe,xN:()=>Lt}),"function"==typeof SuppressedError&&SuppressedError}},yn=>{yn(yn.s=6184)}]);