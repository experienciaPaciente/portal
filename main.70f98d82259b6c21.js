"use strict";(self.webpackChunkportal_paciente=self.webpackChunkportal_paciente||[]).push([[792],{1076:(Cn,It,ie)=>{ie.d(It,{Am:()=>sn,FA:()=>pe,Fy:()=>kt,I9:()=>Co,Im:()=>Gr,Ku:()=>Qe,T9:()=>Ot,Tj:()=>Xn,Uj:()=>ct,XA:()=>wt,ZQ:()=>xt,bD:()=>yr,cY:()=>dt,eX:()=>Ue,g:()=>le,hp:()=>Pt,jZ:()=>Ht,lT:()=>Je,lV:()=>Yt,nr:()=>ki,sr:()=>gt,tD:()=>an,u:()=>Ee,yU:()=>cr,zW:()=>Ne});const We=function(de){const ge=[];let Se=0;for(let ht=0;ht<de.length;ht++){let qe=de.charCodeAt(ht);qe<128?ge[Se++]=qe:qe<2048?(ge[Se++]=qe>>6|192,ge[Se++]=63&qe|128):55296==(64512&qe)&&ht+1<de.length&&56320==(64512&de.charCodeAt(ht+1))?(qe=65536+((1023&qe)<<10)+(1023&de.charCodeAt(++ht)),ge[Se++]=qe>>18|240,ge[Se++]=qe>>12&63|128,ge[Se++]=qe>>6&63|128,ge[Se++]=63&qe|128):(ge[Se++]=qe>>12|224,ge[Se++]=qe>>6&63|128,ge[Se++]=63&qe|128)}return ge},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(de,ge){if(!Array.isArray(de))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Se=ge?this.byteToCharMapWebSafe_:this.byteToCharMap_,ht=[];for(let qe=0;qe<de.length;qe+=3){const Kt=de[qe],An=qe+1<de.length,Hn=An?de[qe+1]:0,Xr=qe+2<de.length,wr=Xr?de[qe+2]:0;let Vi=(15&Hn)<<2|wr>>6,Ur=63&wr;Xr||(Ur=64,An||(Vi=64)),ht.push(Se[Kt>>2],Se[(3&Kt)<<4|Hn>>4],Se[Vi],Se[Ur])}return ht.join("")},encodeString(de,ge){return this.HAS_NATIVE_SUPPORT&&!ge?btoa(de):this.encodeByteArray(We(de),ge)},decodeString(de,ge){return this.HAS_NATIVE_SUPPORT&&!ge?atob(de):function(de){const ge=[];let Se=0,ht=0;for(;Se<de.length;){const qe=de[Se++];if(qe<128)ge[ht++]=String.fromCharCode(qe);else if(qe>191&&qe<224){const Kt=de[Se++];ge[ht++]=String.fromCharCode((31&qe)<<6|63&Kt)}else if(qe>239&&qe<365){const Xr=((7&qe)<<18|(63&de[Se++])<<12|(63&de[Se++])<<6|63&de[Se++])-65536;ge[ht++]=String.fromCharCode(55296+(Xr>>10)),ge[ht++]=String.fromCharCode(56320+(1023&Xr))}else{const Kt=de[Se++],An=de[Se++];ge[ht++]=String.fromCharCode((15&qe)<<12|(63&Kt)<<6|63&An)}}return ge.join("")}(this.decodeStringToByteArray(de,ge))},decodeStringToByteArray(de,ge){this.init_();const Se=ge?this.charToByteMapWebSafe_:this.charToByteMap_,ht=[];for(let qe=0;qe<de.length;){const Kt=Se[de.charAt(qe++)],Hn=qe<de.length?Se[de.charAt(qe)]:0;++qe;const wr=qe<de.length?Se[de.charAt(qe)]:64;++qe;const qn=qe<de.length?Se[de.charAt(qe)]:64;if(++qe,null==Kt||null==Hn||null==wr||null==qn)throw new Ct;ht.push(Kt<<2|Hn>>4),64!==wr&&(ht.push(Hn<<4&240|wr>>2),64!==qn&&ht.push(wr<<6&192|qn))}return ht},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let de=0;de<this.ENCODED_VALS.length;de++)this.byteToCharMap_[de]=this.ENCODED_VALS.charAt(de),this.charToByteMap_[this.byteToCharMap_[de]]=de,this.byteToCharMapWebSafe_[de]=this.ENCODED_VALS_WEBSAFE.charAt(de),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[de]]=de,de>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(de)]=de,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(de)]=de)}}};class Ct extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ct=function(de){return function(de){const ge=We(de);return ye.encodeByteArray(ge,!0)}(de).replace(/\./g,"")},Ee=function(de){try{return ye.decodeString(de,!0)}catch(ge){console.error("base64Decode failed: ",ge)}return null},$t=()=>{try{return function ze(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const de=process.env.__FIREBASE_DEFAULTS__;return de?JSON.parse(de):void 0})()||(()=>{if(typeof document>"u")return;let de;try{de=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ge=de&&Ee(de[1]);return ge&&JSON.parse(ge)})()}catch(de){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${de}`)}},Xn=de=>{var ge,Se;return null===(Se=null===(ge=$t())||void 0===ge?void 0:ge.emulatorHosts)||void 0===Se?void 0:Se[de]},cr=de=>{const ge=Xn(de);if(!ge)return;const Se=ge.lastIndexOf(":");if(Se<=0||Se+1===ge.length)throw new Error(`Invalid host ${ge} with no separate hostname and port!`);const ht=parseInt(ge.substring(Se+1),10);return"["===ge[0]?[ge.substring(1,Se-1),ht]:[ge.substring(0,Se),ht]},Ot=()=>{var de;return null===(de=$t())||void 0===de?void 0:de.config},wt=de=>{var ge;return null===(ge=$t())||void 0===ge?void 0:ge[`_${de}`]};class dt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ge,Se)=>{this.resolve=ge,this.reject=Se})}wrapCallback(ge){return(Se,ht)=>{Se?this.reject(Se):this.resolve(ht),"function"==typeof ge&&(this.promise.catch(()=>{}),1===ge.length?ge(Se):ge(Se,ht))}}}function kt(de,ge){if(de.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ht=ge||"demo-project",qe=de.iat||0,Kt=de.sub||de.user_id;if(!Kt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const An=Object.assign({iss:`https://securetoken.google.com/${ht}`,aud:ht,iat:qe,exp:qe+3600,auth_time:qe,sub:Kt,user_id:Kt,firebase:{sign_in_provider:"custom",identities:{}}},de);return[ct(JSON.stringify({alg:"none",type:"JWT"})),ct(JSON.stringify(An)),""].join(".")}function xt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ht(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function gt(){const de="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof de&&void 0!==de.id}function Yt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Je(){const de=xt();return de.indexOf("MSIE ")>=0||de.indexOf("Trident/")>=0}function ki(){return!function De(){var de;const ge=null===(de=$t())||void 0===de?void 0:de.forceEnvironment;if("node"===ge)return!0;if("browser"===ge)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ne(){try{return"object"==typeof indexedDB}catch{return!1}}function Ue(){return new Promise((de,ge)=>{try{let Se=!0;const ht="validate-browser-context-for-indexeddb-analytics-module",qe=self.indexedDB.open(ht);qe.onsuccess=()=>{qe.result.close(),Se||self.indexedDB.deleteDatabase(ht),de(!0)},qe.onupgradeneeded=()=>{Se=!1},qe.onerror=()=>{var Kt;ge((null===(Kt=qe.error)||void 0===Kt?void 0:Kt.message)||"")}}catch(Se){ge(Se)}})}class le extends Error{constructor(ge,Se,ht){super(Se),this.code=ge,this.customData=ht,this.name="FirebaseError",Object.setPrototypeOf(this,le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pe.prototype.create)}}class pe{constructor(ge,Se,ht){this.service=ge,this.serviceName=Se,this.errors=ht}create(ge,...Se){const ht=Se[0]||{},qe=`${this.service}/${ge}`,Kt=this.errors[ge],An=Kt?function _t(de,ge){return de.replace(Wt,(Se,ht)=>{const qe=ge[ht];return null!=qe?String(qe):`<${ht}?>`})}(Kt,ht):"Error";return new le(qe,`${this.serviceName}: ${An} (${qe}).`,ht)}}const Wt=/\{\$([^}]+)}/g;function Gr(de){for(const ge in de)if(Object.prototype.hasOwnProperty.call(de,ge))return!1;return!0}function yr(de,ge){if(de===ge)return!0;const Se=Object.keys(de),ht=Object.keys(ge);for(const qe of Se){if(!ht.includes(qe))return!1;const Kt=de[qe],An=ge[qe];if(ni(Kt)&&ni(An)){if(!yr(Kt,An))return!1}else if(Kt!==An)return!1}for(const qe of ht)if(!Se.includes(qe))return!1;return!0}function ni(de){return null!==de&&"object"==typeof de}function sn(de){const ge=[];for(const[Se,ht]of Object.entries(de))Array.isArray(ht)?ht.forEach(qe=>{ge.push(encodeURIComponent(Se)+"="+encodeURIComponent(qe))}):ge.push(encodeURIComponent(Se)+"="+encodeURIComponent(ht));return ge.length?"&"+ge.join("&"):""}function Co(de){const ge={};return de.replace(/^\?/,"").split("&").forEach(ht=>{if(ht){const[qe,Kt]=ht.split("=");ge[decodeURIComponent(qe)]=decodeURIComponent(Kt)}}),ge}function Pt(de){const ge=de.indexOf("?");if(!ge)return"";const Se=de.indexOf("#",ge);return de.substring(ge,Se>0?Se:void 0)}function an(de,ge){const Se=new zt(de,ge);return Se.subscribe.bind(Se)}class zt{constructor(ge,Se){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Se,this.task.then(()=>{ge(this)}).catch(ht=>{this.error(ht)})}next(ge){this.forEachObserver(Se=>{Se.next(ge)})}error(ge){this.forEachObserver(Se=>{Se.error(ge)}),this.close(ge)}complete(){this.forEachObserver(ge=>{ge.complete()}),this.close()}subscribe(ge,Se,ht){let qe;if(void 0===ge&&void 0===Se&&void 0===ht)throw new Error("Missing Observer.");qe=function xi(de,ge){if("object"!=typeof de||null===de)return!1;for(const Se of ge)if(Se in de&&"function"==typeof de[Se])return!0;return!1}(ge,["next","error","complete"])?ge:{next:ge,error:Se,complete:ht},void 0===qe.next&&(qe.next=Nr),void 0===qe.error&&(qe.error=Nr),void 0===qe.complete&&(qe.complete=Nr);const Kt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?qe.error(this.finalError):qe.complete()}catch{}}),this.observers.push(qe),Kt}unsubscribeOne(ge){void 0===this.observers||void 0===this.observers[ge]||(delete this.observers[ge],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ge){if(!this.finalized)for(let Se=0;Se<this.observers.length;Se++)this.sendOne(Se,ge)}sendOne(ge,Se){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ge])try{Se(this.observers[ge])}catch(ht){typeof console<"u"&&console.error&&console.error(ht)}})}close(ge){this.finalized||(this.finalized=!0,void 0!==ge&&(this.finalError=ge),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nr(){}function Qe(de){return de&&de._delegate?de._delegate:de}},8010:(Cn,It,ie)=>{ie.d(It,{u:()=>nt});var D=ie(467),R=ie(3953),V=ie(6335),We=ie(6114);let nt=(()=>{class ye{constructor(){this.auth=(0,R.WQX)(V.Nj),this.authState$=(0,V.wh)(this.auth)}signUpWithEmailAndPassword(Xe){return(0,V.eJ)(this.auth,Xe.email,Xe.password)}logInWithEmailAndPassword(Xe){return(0,V.x9)(this.auth,Xe.email,Xe.password)}logOut(){return this.auth.signOut()}signInWithGoogleProvider(){const Xe=new We.HF;return this.callPopUp(Xe)}signInWithGithubProvider(){const Xe=new We.Dt;return this.callPopUp(Xe)}callPopUp(Xe){var ct=this;return(0,D.A)(function*(){try{return yield(0,V.df)(ct.auth,Xe)}catch(Ee){return Ee}})()}static#e=this.\u0275fac=function(ct){return new(ct||ye)};static#t=this.\u0275prov=R.jDH({token:ye,factory:ye.\u0275fac,providedIn:"root"})}return ye})()},6418:(Cn,It,ie)=>{ie.d(It,{J:()=>V});var D=ie(4412),R=ie(3953);let V=(()=>{class We{constructor(){this.notificationsSubject=new D.t([]),this.notifications$=this.notificationsSubject.asObservable()}addNotification(ye,Ct){this.notificationsSubject.next([...this.notificationsSubject.value,{message:ye,severity:Ct}]),setTimeout(()=>{this.removeNotification(0)},3e3)}removeNotification(ye){const Ct=this.notificationsSubject.value;Ct.splice(ye,1),this.notificationsSubject.next([...Ct])}clearNotifications(){this.notificationsSubject.next([])}static#e=this.\u0275fac=function(Ct){return new(Ct||We)};static#t=this.\u0275prov=R.jDH({token:We,factory:We.\u0275fac,providedIn:"root"})}return We})()},4258:(Cn,It,ie)=>{ie.d(It,{m:()=>nt});var D=ie(467),R=ie(3953),V=ie(2418);const We="registros";let nt=(()=>{class ye{constructor(){this._firestore=(0,R.WQX)(V._7),this._collection=(0,V.rJ)(this._firestore,We)}getRegistros(){return(0,V.xs)(this._collection,{idField:"id"})}getRegistro(Xe){var ct=this;return(0,D.A)(function*(){try{return(yield(0,V.x7)(ct.document(Xe))).data()}catch{return}})()}searchRegistroByQuery(Xe){var ct=this;return(0,D.A)(function*(){const Ee=(0,V.P)(ct._collection,(0,V._M)("fullName",">=",Xe),(0,V._M)("fullName","<=",Xe+"\uf8ff")),be=yield(0,V.GG)(Ee);let Oe=[];return be.forEach(vt=>{Oe=[...Oe,{id:vt.id,...vt.data()}]}),Oe})()}createRegistro(Xe){return(0,V.gS)(this._collection,Xe)}updateRegistro(Xe,ct){return(0,V.mZ)(this.document(Xe),{...ct})}deleteRegistro(Xe){return(0,V.kd)(this.document(Xe))}getRegistrosByUserId(Xe){const ct=(0,V.P)(this._collection,(0,V._M)("userId","==",Xe));return(0,V.xs)(ct,{idField:"id"})}document(Xe){return(0,V.H9)(this._firestore,`${We}/${Xe}`)}static#e=this.\u0275fac=function(ct){return new(ct||ye)};static#t=this.\u0275prov=R.jDH({token:ye,factory:ye.\u0275fac,providedIn:"root"})}return ye})()},903:(Cn,It,ie)=>{ie.r(It),ie.d(It,{default:()=>wt});var D=ie(467),R=ie(3953),V=ie(177),We=ie(4341),nt=ie(5379),ye=ie(2418);const Ct="pacientes";let Xe=(()=>{class dt{constructor(){this._firestore=(0,R.WQX)(ye._7),this._collection=(0,ye.rJ)(this._firestore,Ct)}getPacientes(){return(0,ye.xs)(this._collection,{idField:"id"})}getPaciente(xt){var Ht=this;return(0,D.A)(function*(){try{return(yield(0,ye.x7)(Ht.document(xt))).data()}catch{return}})()}searchPacienteByQuery(xt){var Ht=this;return(0,D.A)(function*(){const De=(0,ye.P)(Ht._collection,(0,ye._M)("fullName",">=",xt),(0,ye._M)("fullName","<=",xt+"\uf8ff")),tn=yield(0,ye.GG)(De);let gt=[];return tn.forEach(Yt=>{gt=[...gt,{id:Yt.id,...Yt.data()}]}),gt})()}createPaciente(xt){return(0,ye.gS)(this._collection,xt)}updatePaciente(xt,Ht){return(0,ye.mZ)(this.document(xt),{...Ht})}deletePaciente(xt){return(0,ye.kd)(this.document(xt))}document(xt){return(0,ye.H9)(this._firestore,`${Ct}/${xt}`)}static#e=this.\u0275fac=function(Ht){return new(Ht||dt)};static#t=this.\u0275prov=R.jDH({token:dt,factory:dt.\u0275fac,providedIn:"root"})}return dt})();var ct=ie(8010),Ee=ie(1229),be=ie(1827),Oe=ie(5699),vt=ie(7533);function ze(dt,kt){1&dt&&R.nrm(0,"img",27)}function At(dt,kt){1&dt&&R.nrm(0,"img",28)}function Ut(dt,kt){1&dt&&(R.j41(0,"small",29),R.EFF(1," Nombre es obligatorio "),R.k0s())}function pn(dt,kt){1&dt&&(R.j41(0,"small",29),R.EFF(1," Apellido es obligatorio "),R.k0s())}function $t(dt,kt){if(1&dt&&(R.j41(0,"small",29),R.EFF(1),R.k0s()),2&dt){const xt=R.XpG();R.R7$(),R.SpI(" ",null!=xt.form.controls.email.errors&&xt.form.controls.email.errors.required?"Email es obligatorio":"Email no es v\xe1lido"," ")}}function Xn(dt,kt){1&dt&&(R.j41(0,"small",29),R.EFF(1," La contrase\xf1a es obligatoria "),R.k0s())}function cr(dt,kt){1&dt&&(R.j41(0,"small",29),R.EFF(1," Las contrase\xf1as no coinciden "),R.k0s())}function Ot(dt,kt){if(1&dt&&(R.j41(0,"app-card",30),R.nrm(1,"app-label",31),R.k0s()),2&dt){const xt=R.XpG();R.Y8G("variant","fab")("severity",xt.showErrorMsg?"danger":"success")("closable",xt.hide)("selectable",xt.showErrorMsg),R.R7$(),R.Y8G("label",xt.showErrorMsg?"No se ha podido registrar el usuario":"El usuario ha sido creado exitosamente")("subtitle",xt.showErrorMsg?"Vuelva a intentar luego":"Ser\xe1 redirigido al login")("icon",xt.showErrorMsg?"alert-circle":"info-circle")}}let wt=(()=>{class dt{constructor(){this.hide=!0,this.isMobile=!1,this.direction="column",this.showConfirmMsg=!1,this.showErrorMsg=!1,this.confirmPassword="",this.passHasChange=!1,this.passwordHelpText='\n  Por favor, aseg\xfarate de que tu contrase\xf1a cumpla con los siguientes requisitos:\n  Longitud M\xednima: La contrase\xf1a debe tener al menos 8 caracteres.\n  Incluye un N\xfamero: Debe contener al menos un n\xfamero (0-9).\n  May\xfasculas: Debe incluir al menos una letra may\xfascula (A-Z).\n  S\xedmbolos Especiales: Debe tener al menos un s\xedmbolo especial, como: ! @ # $ % ^ & * ( ) , . ? " : { } | < >.\n',this.router=(0,R.WQX)(nt.Ix),this.pacienteId="",this.formBuilder=(0,R.WQX)(We.ok).nonNullable,this.authService=(0,R.WQX)(ct.u),this.pacienteService=(0,R.WQX)(Xe),this.form=this.formBuilder.group({nombre:this.formBuilder.control("",We.k0.required),apellido:this.formBuilder.control("",We.k0.required),email:this.formBuilder.control("",We.k0.email),password:this.formBuilder.control("",We.k0.required),confirmPassword:this.formBuilder.control("",{validators:[We.k0.required,this.passwordFormatValidator()]})})}get _pacienteId(){return this.pacienteId}ngOnInit(){this.checkIfMobile(window.innerWidth)}checkIfMobile(xt){this.isMobile=xt<768}passwordFormatValidator(){return xt=>{const Ht=/\d/.test(xt.value),De=/[A-Z]/.test(xt.value),tn=/[!@#$%^&*(),.?":{}|<>]/.test(xt.value);return Ht&&De&&tn&&xt.value?.length>=8?null:{invalidPasswordFormat:!0}}}signUp(){var xt=this;return(0,D.A)(function*(){if(xt.form.invalid||xt.passwordsDoNotMatch)return void(xt.showErrorMsg=!0);const Ht={email:xt.form.value.email||"",password:xt.form.value.password||""};try{yield xt.authService.signUpWithEmailAndPassword(Ht),xt.showConfirmMsg=!0,setTimeout(()=>{xt.router.navigateByUrl("/ingresar")},2e3)}catch(De){console.error(De),xt.showErrorMsg=!0}})()}get isEmailValid(){const xt=this.form.get("email");return!(!xt?.invalid||!xt.touched)&&(xt.hasError("required")?"Este campo es requerido":"Ingrese un mail v\xe1lido")}get passwordsDoNotMatch(){return this.form.controls.password.value!==this.form.controls.confirmPassword.value}static#e=this.\u0275fac=function(Ht){return new(Ht||dt)};static#t=this.\u0275cmp=R.VBU({type:dt,selectors:[["app-sign-up"]],standalone:!0,features:[R.Jv_([]),R.aNF],decls:47,vars:42,consts:[["id","signUp"],[1,"page__bg--overlay"],[1,"page__panel--float",3,"ngSubmit","formGroup"],[1,"panel__inner--left"],["class","panel__img--center","width","240","src","./assets/img/ep__marca--row.svg","alt","logo experiencia paciente",4,"ngIf"],["class","panel__img--center","width","60","height","60","src","./assets/img/ep__marca--sqr.png","alt","logo experiencia paciente",4,"ngIf"],["type","flex",1,"panel__inner--right"],["size","md","subtitle","Aqu\xed comienza tu historia de Salud",3,"prefix","label","direction"],["type","wrap"],[1,"form__input-wrapper--col"],[3,"label","control"],["formControlName","nombre"],["class","required",4,"ngIf"],["formControlName","apellido"],["for","email",1,"required"],["formControlName","email"],["type","flex"],[1,"form__input-wrapper--row"],["formControlName","password",3,"type"],["size","sm",3,"click","type","severity","variant","icon","direction"],["formControlName","confirmPassword",3,"input","type"],[1,"panel__prefooter"],[1,"footer__text--sm"],[1,"panel__footer"],["size","xs",3,"severity","variant","icon","direction","label","path"],["severity","success","type","submit","variant","fill","size","xs",3,"icon","direction","label","disabled"],["size","lg","direction","row","bottom","20px","left","calc(50vw - 180px)",3,"variant","severity","closable","selectable",4,"ngIf"],["width","240","src","./assets/img/ep__marca--row.svg","alt","logo experiencia paciente",1,"panel__img--center"],["width","60","height","60","src","./assets/img/ep__marca--sqr.png","alt","logo experiencia paciente",1,"panel__img--center"],[1,"required"],["size","lg","direction","row","bottom","20px","left","calc(50vw - 180px)",3,"variant","severity","closable","selectable"],["size","xxs","variant","outline","direction","row","severity","success",3,"label","subtitle","icon"]],template:function(Ht,De){1&Ht&&(R.j41(0,"main",0),R.nrm(1,"span",1),R.j41(2,"form",2),R.bIt("ngSubmit",function(){return De.signUp()}),R.j41(3,"section",3),R.DNE(4,ze,1,0,"img",4)(5,At,1,0,"img",5),R.k0s(),R.j41(6,"section",6),R.nrm(7,"app-label",7)(8,"hr"),R.j41(9,"div",8)(10,"div",9),R.nrm(11,"app-required",10)(12,"input",11),R.DNE(13,Ut,2,0,"small",12),R.k0s(),R.j41(14,"div",9),R.nrm(15,"app-required",10)(16,"input",13),R.DNE(17,pn,2,0,"small",12),R.k0s(),R.j41(18,"div",9)(19,"label",14),R.EFF(20,"Email"),R.k0s(),R.nrm(21,"input",15),R.DNE(22,$t,2,1,"small",12),R.k0s(),R.j41(23,"section",16)(24,"span",17)(25,"div",17)(26,"div",9),R.nrm(27,"app-required",10)(28,"input",18),R.DNE(29,Xn,2,0,"small",12),R.k0s(),R.j41(30,"app-button",19),R.bIt("click",function(){return De.hide=!De.hide}),R.k0s()(),R.j41(31,"div",17)(32,"div",9),R.nrm(33,"app-required",10),R.j41(34,"input",20),R.bIt("input",function(){let gt;return null==(gt=De.form.get("confirmPassword"))?null:gt.updateValueAndValidity()}),R.k0s(),R.DNE(35,cr,2,0,"small",12),R.k0s(),R.j41(36,"app-button",19),R.bIt("click",function(){return De.hide=!De.hide}),R.k0s()()()()()(),R.j41(37,"section",21)(38,"small",22)(39,"b"),R.EFF(40,"Aviso Legal y T\xe9rminos de Uso"),R.k0s(),R.nrm(41,"br"),R.EFF(42," Al registrarte en experienciaPaciente, reconoces que la plataforma te brinda el poder de gestionar y controlar tus propios datos de salud, sin depender exclusivamente de sistemas tradicionales. experienciaPaciente no sustituye la atenci\xf3n m\xe9dica, pero te posibilita acceder, registrar y compartir tu informaci\xf3n de Salud. "),R.k0s()(),R.j41(43,"footer",23),R.nrm(44,"app-button",24)(45,"app-button",25),R.k0s()(),R.DNE(46,Ot,2,7,"app-card",26),R.k0s()),2&Ht&&(R.R7$(2),R.Y8G("formGroup",De.form),R.R7$(2),R.Y8G("ngIf",!De.isMobile),R.R7$(),R.Y8G("ngIf",De.isMobile),R.R7$(2),R.Y8G("prefix","Ingreso")("label","Bienvenido")("direction",De.isMobile?"column":"row"),R.R7$(4),R.Y8G("label","Nombre")("control","nombre"),R.R7$(2),R.Y8G("ngIf",(null==De.form.controls.nombre?null:De.form.controls.nombre.invalid)&&(null==De.form.controls.nombre?null:De.form.controls.nombre.touched)),R.R7$(2),R.Y8G("label","Apellido")("control","apellido"),R.R7$(2),R.Y8G("ngIf",(null==De.form.controls.apellido?null:De.form.controls.apellido.invalid)&&(null==De.form.controls.apellido?null:De.form.controls.apellido.touched)),R.R7$(5),R.Y8G("ngIf",De.form.controls.email.invalid&&(null==De.form.controls.email?null:De.form.controls.email.touched)),R.R7$(5),R.Y8G("label","Contrase\xf1a")("control","password"),R.R7$(),R.Y8G("type",De.hide?"password":"text"),R.R7$(),R.Y8G("ngIf",(null==De.form.controls.password?null:De.form.controls.password.invalid)&&(null==De.form.controls.password?null:De.form.controls.password.touched)),R.R7$(),R.Y8G("type","button")("severity","primary")("variant","outline")("icon","eye")("direction","none"),R.R7$(3),R.Y8G("label","Repetir contrase\xf1a")("control","confirmPassword"),R.R7$(),R.Y8G("type",De.hide?"password":"text"),R.R7$(),R.Y8G("ngIf",De.passwordsDoNotMatch),R.R7$(),R.Y8G("type","button")("severity","primary")("variant","outline")("icon","eye")("direction","none"),R.R7$(8),R.Y8G("severity","primary")("variant","link")("icon","arrow-left")("direction","row")("label","Volver")("path","auth/sign-in"),R.R7$(),R.Y8G("icon","check-circle")("direction","row")("label","Registrarme")("disabled",De.form.invalid||De.passwordsDoNotMatch),R.R7$(),R.Y8G("ngIf",De.showConfirmMsg||De.showErrorMsg))},dependencies:[We.X1,We.qT,We.me,We.BC,We.cb,We.j4,We.JD,nt.iI,Ee.Q,be.U,Oe.d,vt.i,V.MD,V.bT],encapsulation:2})}return dt})()},4908:(Cn,It,ie)=>{ie.d(It,{s:()=>Ht});var D=ie(467),R=ie(3953),V=ie(1827),We=ie(6335),nt=ie(4572),ye=ie(9172),Ct=ie(6354),Xe=ie(177),ct=ie(7533),Ee=ie(223),be=ie(1229);function Oe(De,tn){if(1&De){const gt=R.RV6();R.qex(0),R.j41(1,"app-card",2),R.bIt("click",function(){const In=R.eBV(gt).$implicit,Je=R.XpG();return R.Njj(Je.toggleSelectable(In))}),R.nrm(2,"app-label",3),R.k0s(),R.bVm()}if(2&De){const gt=tn.$implicit;R.R7$(),R.Y8G("selectable",!0)("variant","fill")("severity","custom")("color",gt.color)("selected",gt.selectable),R.R7$(),R.Y8G("label",gt.label)("icon",gt.icon)}}let vt=(()=>{class De{constructor(){this.items=[],this.categorySelected=new R.bkB}toggleSelectable(gt){gt.selectable=!gt.selectable,this.categorySelected.emit(gt.selectable?gt.label:"")}trackByFn(gt,Yt){return Yt.label}static#e=this.\u0275fac=function(Yt){return new(Yt||De)};static#t=this.\u0275cmp=R.VBU({type:De,selectors:[["app-navbar"]],inputs:{items:"items"},outputs:{categorySelected:"categorySelected"},standalone:!0,features:[R.aNF],decls:2,vars:2,consts:[[1,"nav__wrapper--row"],[4,"ngFor","ngForOf","ngForTrackBy"],["size","xs","direction","column",3,"click","selectable","variant","severity","color","selected"],["size","xxs",3,"label","icon"]],template:function(Yt,In){1&Yt&&(R.j41(0,"nav",0),R.DNE(1,Oe,3,7,"ng-container",1),R.k0s()),2&Yt&&(R.R7$(),R.Y8G("ngForOf",In.items)("ngForTrackBy",In.trackByFn))},dependencies:[V.U,ct.i,Xe.MD,Xe.Sq],styles:["nav.nav__wrapper--row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;overflow-x:scroll;column-gap:var(--wrapper__gap--col)}nav.nav__wrapper[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;height:var(--footer__height);display:flex;align-items:flex-end;width:420px;box-sizing:border-box;background-color:#d3d3d3}nav.nav__wrapper[_ngcontent-%COMP%]   .nav__list--row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:72px;align-items:center;justify-content:space-around;width:100%;background-color:#4682b4}"]})}return De})();var ze=ie(5023),At=ie(4341),Ut=ie(7587),pn=ie(4258),$t=ie(5379),Xn=ie(6418);function cr(De,tn){if(1&De){const gt=R.RV6();R.j41(0,"app-navbar",11),R.bIt("categorySelected",function(In){R.eBV(gt);const Je=R.XpG();return R.Njj(Je.onCategorySelected(In))}),R.k0s()}if(2&De){const gt=R.XpG();R.Y8G("items",gt.categoriaItems)}}function Ot(De,tn){if(1&De&&R.nrm(0,"app-badge",17),2&De){const gt=R.XpG().$implicit;R.Y8G("label",gt.lugar)}}function wt(De,tn){if(1&De){const gt=R.RV6();R.j41(0,"app-modal",21),R.bIt("closeModal",function(){R.eBV(gt);const In=R.XpG(3);return R.Njj(In.isModalOpen=!1)}),R.j41(1,"app-button",22),R.bIt("click",function(){R.eBV(gt);const In=R.XpG(3);return R.Njj(In.isModalOpen=!1)}),R.k0s(),R.j41(2,"app-button",23),R.bIt("click",function(){R.eBV(gt);const In=R.XpG().$implicit,Je=R.XpG(2);return R.Njj(Je.onConfirm(In))}),R.k0s()()}2&De&&R.Y8G("prefix","Cerrar sesi\xf3n")("title","Desea eliminar Eliminar registro?")("subtitle","Modal Subtitle")("caption","This is the image caption.")("closeable",!0)}function dt(De,tn){if(1&De){const gt=R.RV6();R.j41(0,"li",13),R.bIt("click",function(){const In=R.eBV(gt).$implicit,Je=R.XpG(2);return R.Njj(Je.onItemSelected(In))}),R.j41(1,"app-card",14),R.bIt("cardSelected",function(){const In=R.eBV(gt).$implicit,Je=R.XpG(2);return R.Njj(Je.onCardSelected(In))}),R.j41(2,"app-label",15),R.nrm(3,"app-badge",16),R.DNE(4,Ot,1,1,"app-badge",17),R.j41(5,"app-button",18),R.bIt("click",function(In){const Je=R.eBV(gt).$implicit,Xt=R.XpG(2);return R.Njj(Xt.openModal(In,Je))}),R.k0s(),R.nrm(6,"app-dropdown",19),R.k0s()(),R.DNE(7,wt,3,5,"app-modal",20),R.k0s()}if(2&De){const gt=tn.$implicit,Yt=R.XpG(2);R.R7$(),R.Y8G("selectable",!0)("selected",Yt.selectedItemId===gt.id)("variant","fill")("color",Yt.getColorForCategoria(gt.categoria)),R.R7$(),R.Y8G("size","xs")("label",gt.titulo)("prefix",gt.categoria)("subtitle",Yt.isMobile?"":gt.descripcion)("icon",Yt.getIconForCategoria(gt.categoria))("severity","custom")("color",Yt.getColorForCategoria(gt.categoria)),R.R7$(),R.Y8G("severity",gt.validado?"success":"info")("label",gt.validado?"Validado":"Auto-registro"),R.R7$(),R.vxM(gt.lugar?4:-1),R.R7$(2),R.Y8G("items",Yt.getMenuItems(gt))("position",Yt.dropdownPosition),R.R7$(),R.vxM(Yt.isModalOpen?7:-1)}}function kt(De,tn){if(1&De&&(R.qex(0),R.j41(1,"ul"),R.DNE(2,dt,8,17,"li",12),R.nI1(3,"async"),R.k0s(),R.bVm()),2&De){const gt=R.XpG();R.R7$(),R.ZvI("list__wrapper--",gt.type,""),R.R7$(),R.Y8G("ngForOf",R.bMT(3,5,gt.filteredRegistros$))("ngForTrackBy",gt.trackByFn)}}function xt(De,tn){1&De&&(R.j41(0,"h3"),R.EFF(1,"Sin registros"),R.k0s())}let Ht=(()=>{class De{onCardSelected(gt){this.selectedItemId=gt.id}getMenuItems(gt){return[{label:"Ver detalle",icon:"file-lines",disabled:!1,callback:()=>this.onItemSelected(gt)},{label:"Editar",icon:"pencil",disabled:!1,callback:()=>this.navigateToEdit(gt)},{label:"Destacar",icon:"star",disabled:!0},{label:"Gestionar permisos",icon:"user-lock",disabled:!0},{label:"Asociar a registro",icon:"link",disabled:!0},{label:"Eliminar",icon:"trash",disabled:!1,callback:Yt=>this.openModal(Yt,{id:gt.id})}]}getRegistroOptions(gt){return[{label:"Registro manual",icon:"file-lines",path:"/registrar",disabled:!1},{label:"Registro QR",icon:"qrcode",path:"/scan",disabled:!1}]}constructor(gt,Yt,In){this.registroService=gt,this.router=Yt,this.notificationService=In,this.searchControl=new At.MJ(""),this.selectedCategory="",this.selectedItemId=null,this.isModalOpen=!1,this.auth=(0,R.WQX)(We.Nj),this.authState$=(0,We.wh)(this.auth),this.type="flex",this.direction="horizontal",this.categoriaMap={"Medicina General":{icon:"user-md",color:"#007bff"},Pediatr\u00eda:{icon:"child",color:"#28a745"},"Ginecolog\xeda y Obstetricia":{icon:"venus",color:"#e83e8c"},Cardiolog\u00eda:{icon:"heart",color:"#dc3545"},Dermatolog\u00eda:{icon:"spa",color:"#fd7e14"},Neurolog\u00eda:{icon:"brain",color:"#6f42c1"},Psiquiatr\u00eda:{icon:"comments",color:"#20c997"},Endocrinolog\u00eda:{icon:"balance-scale",color:"#ffc107"},Gastroenterolog\u00eda:{icon:"stethoscope",color:"#795548"},"Traumatolog\xeda y Ortopedia":{icon:"crutch",color:"#6c757d"},Oftalmolog\u00eda:{icon:"eye",color:"#17a2b8"},Otorrinolaringolog\u00eda:{icon:"head-side-cough",color:"#6610f2"},Urolog\u00eda:{icon:"toilet",color:"#007bff"},Neumolog\u00eda:{icon:"lungs",color:"#87ceeb"},Oncolog\u00eda:{icon:"ribbon",color:"#6f42c1"},"Nutrici\xf3n y Diet\xe9tica":{icon:"utensils",color:"#a2d729"},"Fisiatr\xeda y Rehabilitaci\xf3n":{icon:"dumbbell",color:"#fd7e14"},Odontolog\u00eda:{icon:"tooth",color:"#5fc8db"}},this.dropdownPosition={top:"35px",left:"-170px"},this.splitButtonPosition={top:"45px",left:"-160px"},this.categoriaItems=Object.keys(this.categoriaMap).map(Je=>({label:Je,icon:this.categoriaMap[Je].icon,color:this.categoriaMap[Je].color,path:`/categories/${Je}`,selectable:!1}))}triggerSuccess(){this.notificationService.addNotification("Registro eliminado!","danger")}triggerError(){this.notificationService.addNotification("Error al eliminar registro","warning")}ngOnInit(){this.authState$.subscribe(gt=>{gt&&(this.registros$=this.registroService.getRegistrosByUserId(gt.uid),this.filteredRegistros$=(0,nt.z)([this.searchControl.valueChanges.pipe((0,ye.Z)("")),this.registros$]).pipe((0,Ct.T)(([Yt,In])=>In.filter(Je=>Je.titulo.toLowerCase().includes((Yt??"").toLowerCase())&&(""===this.selectedCategory||Je.categoria===this.selectedCategory)))))}),this.checkIfMobile(window.innerWidth)}onResize(gt){this.checkIfMobile(gt.target.innerWidth)}checkIfMobile(gt){this.isMobile=gt<768}onItemSelected(gt){this.router.navigate([`/item/${gt.id}`])}navigateToEdit(gt){this.router.navigate([`/actualizar/${gt.id}`])}navigateToDelete(gt){var Yt=this;return(0,D.A)(function*(){try{yield Yt.registroService.deleteRegistro(gt.id)}catch(In){console.error("Error deleting registro",In)}})()}onCategorySelected(gt){this.selectedCategory=gt,this.filteredRegistros$=this.filterRegistros(this.searchControl.value||"",this.selectedCategory)}filterRegistros(gt,Yt){const In=gt.toLowerCase()||"";return this.registros$.pipe((0,Ct.T)(Je=>Je.filter(Xt=>Xt.titulo.toLowerCase().includes(In)&&(""===Yt||Xt.categoria===Yt))))}getIconForCategoria(gt){return this.categoriaMap[gt]?.icon||"question-circle"}getColorForCategoria(gt){return this.categoriaMap[gt]?.color||"gray"}trackByFn(gt,Yt){return Yt.id}showMedCategories(gt){this.medCategories=!this.medCategories}openModal(gt,Yt){gt?.stopPropagation(),this.selectedItemId=Yt.id,this.isModalOpen=!0}onConfirm(gt){var Yt=this;return(0,D.A)(function*(){if(Yt.selectedItemId=gt.id,Yt.isModalOpen=!1,Yt.selectedItemId)try{yield Yt.registroService.deleteRegistro(Yt.selectedItemId),Yt.router.navigate(["/"]),Yt.triggerSuccess()}catch{Yt.triggerError()}finally{Yt.selectedItemId=null}})()}static#e=this.\u0275fac=function(Yt){return new(Yt||De)(R.rXU(pn.m),R.rXU($t.Ix),R.rXU(Xn.J))};static#t=this.\u0275cmp=R.VBU({type:De,selectors:[["app-list"]],hostBindings:function(Yt,In){1&Yt&&R.bIt("resize",function(Xt){return In.onResize(Xt)},!1,R.tSv)},inputs:{type:"type",direction:"direction"},standalone:!0,features:[R.aNF],decls:15,vars:13,consts:[["noRecords",""],[1,"sidebar__header"],["size","md","direction","row",3,"label","prefix"],[1,"input__group"],[1,"input__wrapper"],["for","titulo"],["type","text","placeholder","Busca por t\xedtulo del registro",1,"input__size--sm",3,"formControl"],["type","button","size","xs","severity","primary","direction","none",3,"clickEvent","direction","icon","variant"],["buttonSize","xs","buttonDirection","none","buttonVariant","fill","buttonSeverity","success","buttonIcon","plus",3,"items","position"],[3,"items"],[4,"ngIf","ngIfElse"],[3,"categorySelected","items"],[3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],["direction","row","severity","custom",3,"cardSelected","selectable","selected","variant","color"],["direction","row",3,"size","label","prefix","subtitle","icon","severity","color"],["size","xs",3,"severity","label"],["severity","info","size","xs","icon","hospital",3,"label"],["variant","icon","icon","trash","size","xs","severity","neutral",3,"click"],["buttonLabel","","buttonIcon","ellipsis-vertical",3,"items","position"],["icon","info-circle",3,"prefix","title","subtitle","caption","closeable"],["icon","info-circle",3,"closeModal","prefix","title","subtitle","caption","closeable"],["direction","none","size","sm","label","Cancel","variant","outline","severity","danger",3,"click"],["direction","none","size","sm","label","Confirm","variant","fill","severity","success",3,"click"]],template:function(Yt,In){if(1&Yt){const Je=R.RV6();R.j41(0,"section",1),R.nrm(1,"app-label",2),R.j41(2,"section",3)(3,"span",4)(4,"label",5),R.EFF(5,"Buscador"),R.k0s(),R.nrm(6,"input",6),R.k0s(),R.j41(7,"app-button",7),R.bIt("clickEvent",function(Tr){return R.eBV(Je),R.Njj(In.showMedCategories(Tr))}),R.k0s(),R.nrm(8,"app-dropdown",8),R.k0s(),R.DNE(9,cr,1,1,"app-navbar",9),R.nrm(10,"hr"),R.k0s(),R.DNE(11,kt,4,7,"ng-container",10),R.nI1(12,"async"),R.DNE(13,xt,2,0,"ng-template",null,0,R.C5r)}if(2&Yt){const Je=R.sdS(14);R.R7$(),R.Y8G("label","Estos son tus registros")("prefix","Hola usuario"),R.R7$(5),R.Y8G("formControl",In.searchControl),R.R7$(),R.Y8G("direction","none")("icon",In.medCategories?"chevron-up":"chevron-down")("variant","outline"),R.R7$(),R.Y8G("items",In.getRegistroOptions())("position",In.splitButtonPosition),R.R7$(),R.vxM(In.medCategories?9:-1),R.R7$(2),R.Y8G("ngIf",R.bMT(12,11,In.registros$))("ngIfElse",Je)}},dependencies:[V.U,Xe.MD,Xe.Sq,Xe.bT,Xe.Jj,ct.i,Ee.n,be.Q,vt,ze.P,At.X1,At.me,At.BC,At.l_,Ut.z],styles:["ul[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box}ul.list__wrapper--flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:scroll}ul.list__wrapper--grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;row-gap:var(--list__item--gap);column-gap:var(--list__item--gap);padding:var(--list__item--padding);width:100%;box-sizing:border-box;height:-moz-fit-content;height:fit-content;min-height:120px;border-radius:var(--card__border--radius);border-bottom:solid 1px var(--primaryLight)}ul.list__item--row[_ngcontent-%COMP%]{flex-direction:row}ul.list__item--vertical[_ngcontent-%COMP%]{flex-direction:column}"]})}return De})()},223:(Cn,It,ie)=>{ie.d(It,{n:()=>We});var D=ie(177),R=ie(3953);function V(nt,ye){if(1&nt&&R.nrm(0,"i"),2&nt){const Ct=R.XpG();R.HbH(Ct.badgeIconClass)}}let We=(()=>{class nt{constructor(){this.severity="info",this.size="md",this.badgeStyle={},this.badgeIconClass=""}ngOnChanges(){this.setBadgeProperties()}setBadgeProperties(){switch(this.severity){case"success":this.badgeStyle={"background-color":"var(--success--light)",color:"var(--success--dark)"},this.badgeIconClass="fa-solid fa-circle-check";break;case"warning":this.badgeStyle={"background-color":"var(--warning--light)",color:"var(--warning)"},this.badgeIconClass="fa-solid fa-circle-exclamation";break;case"danger":this.badgeStyle={"background-color":"var(--danger--light)",color:"var(--danger)"},this.badgeIconClass="fa-solid fa-triangle-exclamation";break;case"info":this.badgeStyle={"background-color":"var(--info--light)",color:"var(--info)"},this.badgeIconClass="fa-solid fa-circle-info";break;case"neutral":this.badgeStyle={"background-color":"#e0e0e0",color:"#6c757d"},this.badgeIconClass="fa-solid fa-circle-question"}}static#e=this.\u0275fac=function(Xe){return new(Xe||nt)};static#t=this.\u0275cmp=R.VBU({type:nt,selectors:[["app-badge"]],inputs:{severity:"severity",size:"size",label:"label"},standalone:!0,features:[R.OA$,R.aNF],decls:4,vars:5,consts:[[3,"ngStyle"],[3,"class",4,"ngIf"]],template:function(Xe,ct){1&Xe&&(R.j41(0,"span",0),R.DNE(1,V,1,2,"i",1),R.j41(2,"p"),R.EFF(3),R.k0s()()),2&Xe&&(R.HbH("badge__wrapper--"+ct.size),R.Y8G("ngStyle",ct.badgeStyle),R.R7$(),R.Y8G("ngIf",ct.badgeIconClass),R.R7$(2),R.JRh(ct.label))},dependencies:[D.MD,D.bT,D.B3],styles:["app-badge[_ngcontent-%COMP%]   [class^=badge__wrapper][_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.5em 1em;border-radius:6px;font-weight:400;font-size:var(--badge__font--size);align-self:center;text-wrap:nowrap;text-overflow:ellipsis}app-badge[_ngcontent-%COMP%]   [class^=badge__wrapper][_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5em}"]})}return nt})()},1229:(Cn,It,ie)=>{ie.d(It,{Q:()=>Ct});var D=ie(3953),R=ie(177),V=ie(1827),We=ie(5379);const nt=Xe=>[Xe];function ye(Xe,ct){if(1&Xe&&(D.j41(0,"span",3),D.EFF(1),D.k0s()),2&Xe){const Ee=D.XpG();D.R7$(),D.JRh(Ee.badgeCount)}}let Ct=(()=>{class Xe{constructor(Ee){this.router=Ee,this.variant="fill",this.type="button",this.severity="info",this.size="md",this.direction="column",this.clickEvent=new D.bkB}handleClick(){this.clickEvent.emit(),this.path&&this.router.navigate([this.path]).catch(Ee=>{console.error("Navigation error:",Ee)})}setButtonClass(){return`button__size--${this.size} button__${this.variant}--${this.severity}`}setFabPositionStyles(){return"fab"===this.variant?{top:this.top,right:this.right,bottom:this.bottom,left:this.left}:{}}static#e=this.\u0275fac=function(be){return new(be||Xe)(D.rXU(We.Ix))};static#t=this.\u0275cmp=D.VBU({type:Xe,selectors:[["app-button"]],inputs:{variant:"variant",type:"type",severity:"severity",size:"size",icon:"icon",label:"label",badgeCount:"badgeCount",prefix:"prefix",subtitle:"subtitle",path:"path",direction:"direction",top:"top",right:"right",bottom:"bottom",left:"left",disabled:"disabled"},outputs:{clickEvent:"clickEvent"},standalone:!0,features:[D.aNF],decls:3,vars:14,consts:[[3,"click","type","disabled","ngClass","ngStyle"],[3,"icon","severity","label","subtitle","prefix","direction","size"],["class","button__badge",4,"ngIf"],[1,"button__badge"]],template:function(be,Oe){1&be&&(D.j41(0,"button",0),D.bIt("click",function(){return Oe.handleClick()}),D.nrm(1,"app-label",1),D.DNE(2,ye,2,1,"span",2),D.k0s()),2&be&&(D.FS9("type",Oe.type),D.Y8G("disabled",Oe.disabled)("ngClass",D.eq3(12,nt,"button__size--"+Oe.size+" button__"+Oe.variant+"--"+Oe.severity))("ngStyle",Oe.setFabPositionStyles()),D.R7$(),D.Y8G("icon",Oe.icon)("severity",Oe.severity)("label",Oe.label)("subtitle",Oe.subtitle)("prefix",Oe.prefix)("direction",Oe.direction)("size",Oe.size),D.R7$(),D.Y8G("ngIf",Oe.badgeCount))},dependencies:[R.MD,R.YU,R.bT,R.B3,V.U],styles:["app-button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:var(--button__padding);background:var(--button__bg--color);font-size:var(--button__font--size);color:var(--button__text--color);text-align:var(--button__text--align);border-radius:var(--button__border--radius);width:var(--button__width);text-transform:capitalize;text-wrap:nowrap}app-button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{filter:brightness(120%);cursor:pointer}app-button[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background-color:var(--secondary);filter:brightness(95%);cursor:grab}app-button[_ngcontent-%COMP%] > button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.5;-webkit-user-select:none;user-select:none}app-button[_ngcontent-%COMP%] > button[class*=__fill][_ngcontent-%COMP%]{--button__text--color: white!important;--label__title--color: white;--button__border--color: transparent!important;border:solid 2px var(--button__border--color)}app-button[_ngcontent-%COMP%] > button[class*=__outline][_ngcontent-%COMP%]{--label__title--color: var(--button__bg--color);--button__border--color: var(--button__bg--color);background:transparent!important;border:solid 2px var(--button__bg--color);color:var(--label__title--color)}app-button[_ngcontent-%COMP%] > button[class*=__link][_ngcontent-%COMP%]{--button__border--color: var(--button__bg--color);--button__padding: 0;background:transparent!important;border:none!important;color:var(--button__bg--color)!important}app-button[_ngcontent-%COMP%] > button[class*=__fab][_ngcontent-%COMP%]{--button__text--color: white!important;--label__title--color: white;--button__border--color: transparent!important;position:absolute;width:calc(var(--button__font--size) * 7.5);height:calc(var(--button__font--size) * 7.5);border:solid 2px var(--button__border--color);border-radius:50%;z-index:3}app-button[_ngcontent-%COMP%] > button[class*=__icon][_ngcontent-%COMP%]{background-color:transparent;color:var(--label__title--color);padding:.5rem}app-button[_ngcontent-%COMP%] > button[class$=--primary][_ngcontent-%COMP%]{--button__text--color: inherit;--button__border--color: var(--primary);--button__bg--color: var(--primary)}app-button[_ngcontent-%COMP%] > button[class$=--secondary][_ngcontent-%COMP%]{--button__text--color: inherit;--button__border--color: var(--secondary);--button__bg--color: var(--secondary)}app-button[_ngcontent-%COMP%] > button[class$=--tertiary][_ngcontent-%COMP%]{--button__text--color: inherit;--button__border--color: var(--tertiary);--button__bg--color: var(--tertiary)}app-button[_ngcontent-%COMP%] > button[class$=--success][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--success)}app-button[_ngcontent-%COMP%] > button[class$=--warning][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--warning)}app-button[_ngcontent-%COMP%] > button[class$=--danger][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--danger)}app-button[_ngcontent-%COMP%] > button[class$=--info][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--info)}app-button[_ngcontent-%COMP%] > button[class$=--neutral][_ngcontent-%COMP%]{--button__text--color: inherit;--button__bg--color: var(--neutral)}app-button[_ngcontent-%COMP%] > button.button__size--xxs[_ngcontent-%COMP%]{--button__padding: .1rem .2rem;--button__font--size: 8px}app-button[_ngcontent-%COMP%] > button.button__size--xs[_ngcontent-%COMP%]{--button__padding: .2rem .25rem;--button__font--size: 10px}app-button[_ngcontent-%COMP%] > button.button__size--sm[_ngcontent-%COMP%]{--button__padding: .35rem .7rem;--button__font--size: 12px}app-button[_ngcontent-%COMP%] > button.button__size--md[_ngcontent-%COMP%]{--button__padding: .5rem 1rem;--button__font--size: 14px}app-button[_ngcontent-%COMP%] > button.button__size--lg[_ngcontent-%COMP%]{--button__padding: .65rem 1.25rem;--button__font--size: 16px}app-button[_ngcontent-%COMP%] > button.button__size--xl[_ngcontent-%COMP%]{--button__padding: .9rem 1.5rem;--button__font--size: 18px}"]})}return Xe})()},7533:(Cn,It,ie)=>{ie.d(It,{i:()=>ct});var D=ie(3953),R=ie(1827),V=ie(177),We=ie(1229);const nt=["cardColor"],ye=[[["app-label"]]],Ct=["app-label"];function Xe(Ee,be){if(1&Ee){const Oe=D.RV6();D.j41(0,"app-button",3),D.bIt("click",function(ze){D.eBV(Oe);const At=D.XpG();return D.Njj(At.closeCard(ze))}),D.k0s()}}let ct=(()=>{class Ee{constructor(){this.selected=!1,this.aligned="center",this.selectable=!1,this.align="center",this.size="md",this.severity="neutral",this.variant="outline",this.direction="column",this.color="",this.closable=!1,this.cardSelected=new D.bkB}get cssDirection(){return"row"===this.direction?"card__wrapper--row":"card__wrapper--column"}ngAfterViewInit(){this.label&&(this.label.direction=this.direction),"custom"===this.severity&&this.color&&this.applyCustomColor()}applyCustomColor(){this.cardColor.nativeElement.style.setProperty("--card__border--color",this.color),this.cardColor.nativeElement.style.setProperty("--card__bg--color",`${this.color}25`),this.label&&(this.label.severity=this.color)}ngOnChanges(Oe){Oe.direction&&this.label&&(this.label.direction=this.direction)}closeCard(Oe){Oe.stopPropagation(),this.cardColor.nativeElement.remove()}onCardClick(){this.selectable&&this.cardSelected.emit()}setFabPositionStyles(){return"fab"===this.variant?{position:"absolute",top:this.top,right:this.right,bottom:this.bottom,left:this.left}:{}}static#e=this.\u0275fac=function(vt){return new(vt||Ee)};static#t=this.\u0275cmp=D.VBU({type:Ee,selectors:[["app-card"]],viewQuery:function(vt,ze){if(1&vt&&(D.GBs(nt,7),D.GBs(R.U,7)),2&vt){let At;D.mGM(At=D.lsd())&&(ze.cardColor=At.first),D.mGM(At=D.lsd())&&(ze.label=At.first)}},inputs:{selected:"selected",aligned:"aligned",selectable:"selectable",align:"align",size:"size",severity:"severity",variant:"variant",direction:"direction",color:"color",closable:"closable",top:"top",right:"right",bottom:"bottom",left:"left"},outputs:{cardSelected:"cardSelected"},standalone:!0,features:[D.OA$,D.aNF],ngContentSelectors:Ct,decls:4,vars:12,consts:[["cardColor",""],["tabindex","0",3,"click","ngStyle","ngClass"],["variant","link","icon","close","size","xs","severity","neutral"],["variant","link","icon","close","size","xs","severity","neutral",3,"click"]],template:function(vt,ze){if(1&vt){const At=D.RV6();D.NAR(ye),D.j41(0,"div",1,0),D.bIt("click",function(){return D.eBV(At),D.Njj(ze.onCardClick())}),D.SdG(2),D.DNE(3,Xe,1,0,"app-button",2),D.k0s()}2&vt&&(D.ZWY("card card__",ze.variant,"--",ze.severity," card--",ze.size,""),D.AVh("card--selectable",ze.selectable)("card--selected",ze.selected),D.Y8G("ngStyle",ze.setFabPositionStyles())("ngClass",ze.cssDirection),D.R7$(3),D.vxM(ze.closable?3:-1))},dependencies:[V.MD,V.YU,V.B3,We.Q],styles:["app-card[_ngcontent-%COMP%]{width:100%}app-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:var(--card__direction);justify-content:var(--card__wrapper--justify);align-items:var(--card__wrapper--align);background-color:transparent;padding:var(--card__padding);gap:var(--card__gap);text-align:var(--card__text--align);border-radius:var(--card__border--radius);box-sizing:border-box;width:var(--card__width);height:var(--card__height);z-index:3}app-card[_ngcontent-%COMP%]   .card__wrapper--row[_ngcontent-%COMP%]{--card__direction: row;--card__wrapper--justify: space-between;--card__text--align: left}app-card[_ngcontent-%COMP%]   .card__wrapper--row[_ngcontent-%COMP%]   .card__inner-wrapper--left[_ngcontent-%COMP%]{width:180px}app-card[_ngcontent-%COMP%]   .card__wrapper--row[_ngcontent-%COMP%]   .card__inner-wrapper--right[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;width:-moz-fit-content;width:fit-content}app-card[_ngcontent-%COMP%]   .card__wrapper--column[_ngcontent-%COMP%]{--card__wrapper--justify: flex-start;--card__direction: column}app-card[_ngcontent-%COMP%]   .card.card__fill--custom[_ngcontent-%COMP%], app-card[_ngcontent-%COMP%]   .card.card__outline--custom[_ngcontent-%COMP%], app-card[_ngcontent-%COMP%]   .card.card__fab--custom[_ngcontent-%COMP%]{--card__bg--color: var(--card__bg--color);--card__border--color: var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--custom.card--selectable[_ngcontent-%COMP%]:hover, app-card[_ngcontent-%COMP%]   .card.card__outline--custom.card--selectable[_ngcontent-%COMP%]:hover, app-card[_ngcontent-%COMP%]   .card.card__fab--custom.card--selectable[_ngcontent-%COMP%]:hover{background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--custom.card--selectable[_ngcontent-%COMP%]:focus, app-card[_ngcontent-%COMP%]   .card.card__outline--custom.card--selectable[_ngcontent-%COMP%]:focus, app-card[_ngcontent-%COMP%]   .card.card__fab--custom.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--primary[_ngcontent-%COMP%]{--card__border--color: var(--primary)}app-card[_ngcontent-%COMP%]   .card.card__fill--primary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--primaryLight);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--primary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--secondary[_ngcontent-%COMP%]{--card__border--color: var(--secondary)}app-card[_ngcontent-%COMP%]   .card.card__fill--secondary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--secondaryLight);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--secondary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--tertiary[_ngcontent-%COMP%]{--card__border--color: var(--tertiary)}app-card[_ngcontent-%COMP%]   .card.card__fill--tertiary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--tertiaryLight);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--tertiary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--info[_ngcontent-%COMP%]{--card__border--color: var(--info)}app-card[_ngcontent-%COMP%]   .card.card__fill--info.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--info--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--info.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--neutral[_ngcontent-%COMP%]{--card__border--color: var(--neutral)}app-card[_ngcontent-%COMP%]   .card.card__fill--neutral.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--neutral--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fill--neutral.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--primary[_ngcontent-%COMP%]{--card__border--color: var(--card__text--color);border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--primary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--primaryLighter);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--primary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--secondary[_ngcontent-%COMP%]{--card__border--color: var(--secondary)}app-card[_ngcontent-%COMP%]   .card.card__outline--secondary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--secondaryLighter);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--secondary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--tertiary[_ngcontent-%COMP%]{--card__border--color: var(--tertiary)}app-card[_ngcontent-%COMP%]   .card.card__outline--tertiary.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--tertiaryLighter);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--tertiary.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--info[_ngcontent-%COMP%]{--card__border--color: var(--info)}app-card[_ngcontent-%COMP%]   .card.card__outline--info.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--info--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--info.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--neutral[_ngcontent-%COMP%]{--card__border--color: var(--neutral)}app-card[_ngcontent-%COMP%]   .card.card__outline--neutral.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--neutral--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__outline--neutral.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab[_ngcontent-%COMP%]{animation:fade-in 1.5s ease-in}app-card[_ngcontent-%COMP%]   .card.card__fab--success[_ngcontent-%COMP%]{--card__border--color: var(--success);--card__bg--color: var(--success--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--success.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--success--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--success.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--warning[_ngcontent-%COMP%]{--card__border--color: var(--warning);--card__bg--color: var(--warning--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--warning.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--warning--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--warning.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--danger[_ngcontent-%COMP%]{--card__border--color: var(--danger);--card__bg--color: var(--danger--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--danger.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--danger--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--danger.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--info[_ngcontent-%COMP%]{--card__border--color: var(--info);--card__bg--color: var(--info--light);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--info.card--selectable[_ngcontent-%COMP%]:hover{--card__bg--color: var(--info--dark);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card.card__fab--info.card--selectable[_ngcontent-%COMP%]:focus{border:solid 2px var(--card__border--color)}app-card[_ngcontent-%COMP%]   .card.card--selected[_ngcontent-%COMP%]{border:solid 2px var(--card__border--color);background-color:var(--card__bg--color)}app-card[_ngcontent-%COMP%]   .card--xs[_ngcontent-%COMP%]{--card__width: 90px;--card__padding: 12px;--card__height: 100%;background-color:#f1f4f5;width:var(--card__width);height:var(--card__height)}app-card[_ngcontent-%COMP%]   .card--sm[_ngcontent-%COMP%]{--card__padding: 6px 14px}app-card[_ngcontent-%COMP%]   .card--md[_ngcontent-%COMP%]{--card__padding: 0 0 0 12px;--card__width: 100%;--card__height: 100%;width:var(--card__width);height:var(--card__height)}app-card[_ngcontent-%COMP%]   .card--md[_ngcontent-%COMP%]   .label__content[_ngcontent-%COMP%]{row-gap:4px}app-card[_ngcontent-%COMP%]   .card--lg[_ngcontent-%COMP%]{--card__padding: 10px 18px}app-card[_ngcontent-%COMP%]   .card--xl[_ngcontent-%COMP%]{--card__padding: 12px 24px}app-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{margin-bottom:.75rem;object-fit:cover}"]})}return Ee})()},5023:(Cn,It,ie)=>{ie.d(It,{P:()=>be});var D=ie(3953),R=ie(177),V=ie(1229),We=ie(5379);const nt=(Oe,vt)=>({top:Oe,left:vt}),ye=Oe=>({nested:Oe});function Ct(Oe,vt){if(1&Oe){const ze=D.RV6();D.qex(0),D.j41(1,"app-button",8),D.bIt("clickEvent",function(){D.eBV(ze);const Ut=D.XpG().$implicit;return D.Njj(Ut.callback?Ut.callback():null)}),D.k0s(),D.bVm()}if(2&Oe){const ze=D.XpG().$implicit;D.R7$(),D.Y8G("variant","link")("direction","row")("size","xxs")("icon",ze.icon)("label",ze.label)("path",ze.path)("disabled",ze.disabled)}}function Xe(Oe,vt){if(1&Oe){const ze=D.RV6();D.j41(0,"app-button",8),D.bIt("clickEvent",function(){D.eBV(ze);const Ut=D.XpG().$implicit;return D.Njj(Ut.callback?Ut.callback():null)}),D.k0s()}if(2&Oe){const ze=D.XpG().$implicit;D.Y8G("variant","link")("direction","row")("size","xxs")("icon",ze.icon)("label",ze.label)("path",ze.path)("disabled",ze.disabled)}}function ct(Oe,vt){if(1&Oe&&(D.qex(0),D.DNE(1,Ct,2,7,"ng-container",7)(2,Xe,1,7,"ng-template",null,0,D.C5r),D.bVm()),2&Oe){const ze=vt.$implicit,At=D.sdS(3);D.R7$(),D.Y8G("ngIf",!ze.subItems)("ngIfElse",At)}}function Ee(Oe,vt){if(1&Oe&&(D.j41(0,"div",4)(1,"div",5),D.DNE(2,ct,4,2,"ng-container",6),D.k0s()()),2&Oe){const ze=D.XpG();D.Y8G("ngStyle",D.l_i(3,nt,null==ze.position?null:ze.position.top,null==ze.position?null:ze.position.left)),D.R7$(),D.Y8G("ngClass",D.eq3(6,ye,ze.hasNestedItems)),D.R7$(),D.Y8G("ngForOf",ze.items)}}let be=(()=>{class Oe{constructor(ze){this.router=ze,this.items=[],this.buttonVariant="link",this.buttonSeverity="info",this.buttonDirection="none",this.buttonSize="sm",this.itemSelected=new D.bkB,this.isOpen=!1,this.hasNestedItems=!1}onClick(ze){!ze.target.closest(".dropdown-container")&&this.isOpen&&this.close()}toggle(ze){this.isOpen=!this.isOpen,this.hasNestedItems=this.items.some(At=>At.subItems&&At.subItems.length>0),ze.stopPropagation()}onItemClicked(ze){this.itemSelected.emit(ze),ze.callback&&ze.callback(),this.close()}handleNestedItemClick(ze){this.itemSelected.emit(ze),this.close()}close(){this.isOpen=!1}static#e=this.\u0275fac=function(At){return new(At||Oe)(D.rXU(We.Ix))};static#t=this.\u0275cmp=D.VBU({type:Oe,selectors:[["app-dropdown"]],hostBindings:function(At,Ut){1&At&&D.bIt("click",function($t){return Ut.onClick($t)},!1,D.EBC)},inputs:{items:"items",position:"position",buttonLabel:"buttonLabel",buttonIcon:"buttonIcon",buttonVariant:"buttonVariant",buttonSeverity:"buttonSeverity",buttonDirection:"buttonDirection",buttonSize:"buttonSize"},outputs:{itemSelected:"itemSelected"},standalone:!0,features:[D.aNF],decls:3,vars:7,consts:[["nestedItems",""],[1,"dropdown-container"],[3,"click","size","severity","variant","direction","icon","label"],["class","dropdown-menu",3,"ngStyle",4,"ngIf"],[1,"dropdown-menu",3,"ngStyle"],[1,"dropdown-content",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[3,"clickEvent","variant","direction","size","icon","label","path","disabled"]],template:function(At,Ut){1&At&&(D.j41(0,"div",1)(1,"app-button",2),D.bIt("click",function($t){return Ut.toggle($t)}),D.k0s(),D.DNE(2,Ee,3,8,"div",3),D.k0s()),2&At&&(D.R7$(),D.Y8G("size",Ut.buttonSize)("severity",Ut.buttonSeverity)("variant",Ut.buttonVariant)("direction",Ut.buttonDirection)("icon",Ut.buttonIcon)("label",Ut.buttonLabel),D.R7$(),D.Y8G("ngIf",Ut.isOpen))},dependencies:[R.MD,R.YU,R.Sq,R.bT,R.B3,V.Q],styles:[".dropdown-container[_ngcontent-%COMP%]{position:relative}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;z-index:1000;background-color:#fff;border:1px solid #ccc;box-shadow:0 2px 10px #0003;width:200px;overflow:hidden}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-label[_ngcontent-%COMP%], .dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{margin-bottom:.5rem}.dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-label[_ngcontent-%COMP%]:last-child, .dropdown-container[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-content[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]})}return Oe})()},1827:(Cn,It,ie)=>{ie.d(It,{U:()=>be});var D=ie(177),R=ie(3953);const V=["labelColor"],We=[[["app-badge"]],[["app-button"]],[["app-dropdown"]]],nt=["app-badge","app-button","app-dropdown"],ye=(Oe,vt,ze)=>[Oe,vt,ze];function Ct(Oe,vt){if(1&Oe&&(R.j41(0,"div",3),R.nrm(1,"i"),R.k0s()),2&Oe){const ze=R.XpG();R.Y8G("ngClass",ze.label?"":"icon__border--none"),R.R7$(),R.ZvI("fa-solid fa-",ze.icon,""),R.BMQ("aria-label",ze.iconLabel)}}function Xe(Oe,vt){if(1&Oe&&(R.j41(0,"div",5),R.EFF(1),R.k0s()),2&Oe){const ze=R.XpG();R.R7$(),R.JRh(ze.prefix)}}function ct(Oe,vt){if(1&Oe&&(R.j41(0,"div",6),R.EFF(1),R.k0s()),2&Oe){const ze=R.XpG();R.R7$(),R.JRh(ze.label)}}function Ee(Oe,vt){if(1&Oe&&(R.j41(0,"div",7),R.EFF(1),R.k0s()),2&Oe){const ze=R.XpG();R.R7$(),R.JRh(ze.subtitle)}}let be=(()=>{class Oe{constructor(){this.severity="neutral",this.direction="column",this.size="md"}ngOnChanges(ze){this.updateIconColor()}updateIconColor(){"string"==typeof this.severity&&(["primary","secondary","tertiary","neutral"].includes(this.severity)?this.labelColor.nativeElement.style.setProperty("--label__icon--color",`var(--${this.severity})`):this.labelColor.nativeElement.style.setProperty("--label__icon--color",this.color))}static#e=this.\u0275fac=function(At){return new(At||Oe)};static#t=this.\u0275cmp=R.VBU({type:Oe,selectors:[["app-label"]],viewQuery:function(At,Ut){if(1&At&&R.GBs(V,7),2&At){let pn;R.mGM(pn=R.lsd())&&(Ut.labelColor=pn.first)}},inputs:{icon:"icon",img:"img",iconLabel:"iconLabel",severity:"severity",color:"color",label:"label",subtitle:"subtitle",prefix:"prefix",direction:"direction",size:"size"},standalone:!0,features:[R.OA$,R.aNF],ngContentSelectors:nt,decls:13,vars:9,consts:[["labelColor",""],[1,"panel__header"],[1,"label",3,"ngClass"],[1,"label__icon",3,"ngClass"],[1,"label__content"],[1,"label__prefix"],[1,"label__title"],[1,"label__subtitle"],[1,"button__group"],[1,"label__menu"]],template:function(At,Ut){1&At&&(R.NAR(We),R.j41(0,"section",1)(1,"span",2,0),R.DNE(3,Ct,2,5,"div",3),R.j41(4,"div",4),R.DNE(5,Xe,2,1,"div",5)(6,ct,2,1,"div",6)(7,Ee,2,1,"div",7),R.j41(8,"span",8),R.SdG(9),R.k0s()(),R.j41(10,"div",9),R.SdG(11,1),R.SdG(12,2),R.k0s()()()),2&At&&(R.R7$(),R.Y8G("ngClass",R.sMw(5,ye,Ut.size,Ut.direction,Ut.severity)),R.R7$(2),R.vxM(Ut.icon?3:-1),R.R7$(2),R.vxM(Ut.prefix?5:-1),R.R7$(),R.vxM(Ut.label?6:-1),R.R7$(),R.vxM(Ut.subtitle?7:-1))},dependencies:[D.MD,D.YU],styles:["app-label[_ngcontent-%COMP%]   .label__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}app-label[_ngcontent-%COMP%]{width:100%}app-label[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%;height:-moz-fit-content;height:fit-content}app-label[_ngcontent-%COMP%]   .label.row[_ngcontent-%COMP%]{flex-direction:row;align-items:center;column-gap:.65rem}app-label[_ngcontent-%COMP%]   .label.row[_ngcontent-%COMP%] > .label__icon[_ngcontent-%COMP%]{--label__icon--align: center}app-label[_ngcontent-%COMP%]   .label.column[_ngcontent-%COMP%]{--button__text--align: center;flex-direction:column;align-items:center;justify-content:center;row-gap:var(--label__gap);text-align:center}app-label[_ngcontent-%COMP%]   .label.xxs[_ngcontent-%COMP%]{--label__prefix--size: 9px;--label__subtitle--size: 10px;--label__icon--size: 12px}app-label[_ngcontent-%COMP%]   .label.xs[_ngcontent-%COMP%]{--label__prefix--size: 11px;--label__subtitle--size: 11px;--label__icon--size: 14px}app-label[_ngcontent-%COMP%]   .label.sm[_ngcontent-%COMP%]{--label__prefix--size: 12px;--label__subtitle--size: 12px;--label__icon--size: 16px}app-label[_ngcontent-%COMP%]   .label.md[_ngcontent-%COMP%]{--label__prefix--size: 14px;--label__subtitle--size: 14px;--label__icon--size: 36px}app-label[_ngcontent-%COMP%]   .label.lg[_ngcontent-%COMP%]{--label__prefix--size: 16px;--label__subtitle--size: 16px;--label__icon--size: 56px}app-label[_ngcontent-%COMP%]   .label.xl[_ngcontent-%COMP%]{--label__prefix--size: 20px;--label__subtitle--size: 20px;--label__icon--size: 64px}app-label[_ngcontent-%COMP%]   .label__icon[_ngcontent-%COMP%]{padding:.5rem;border:solid 2px var(--label__icon--color);border-radius:50%;color:var(--label__icon--color);width:var(--label__icon--size);height:var(--label__icon--size);align-self:var(--label__icon--align)}app-label[_ngcontent-%COMP%]   .label__icon.icon__border--none[_ngcontent-%COMP%]{border:none}app-label[_ngcontent-%COMP%]   .label.column[_ngcontent-%COMP%]   .label__icon[_ngcontent-%COMP%]{--label__icon--align: center}app-label[_ngcontent-%COMP%]   .label__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;overflow:hidden;line-height:1.5;width:var(--label__width)}app-label[_ngcontent-%COMP%]   .label__prefix[_ngcontent-%COMP%]{font-size:var(--label__prefix--size);color:var(--label__prefix--color)}app-label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{color:var(--label__title--color);font-weight:600;line-height:1.25;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;text-overflow:ellipsis;text-wrap:nowrap}app-label[_ngcontent-%COMP%]   .label__subtitle[_ngcontent-%COMP%]{font-size:var(--label__subtitle--size);color:var(--label__subtitle--color);width:-webkit-fill-available;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;text-overflow:ellipsis}.button__group[_ngcontent-%COMP%]{--panel__direction: row;display:flex;flex-direction:row;align-items:center;justify-content:flex-start;column-gap:var(--wrapper__gap--col);width:100%}.label.xxs[_ngcontent-%COMP%]{font-size:12px}.label.xs[_ngcontent-%COMP%]{font-size:14px}.label.sm[_ngcontent-%COMP%]{font-size:16px}.label.md[_ngcontent-%COMP%]{font-size:20px}.label.lg[_ngcontent-%COMP%]{font-size:30px}.label.xl[_ngcontent-%COMP%]{font-size:40px}"]})}return Oe})()},7587:(Cn,It,ie)=>{ie.d(It,{z:()=>Xe});var D=ie(3953),R=ie(1827),V=ie(1229);const We=[[["app-button","severity","danger"]],[["app-button","variant","outline"]],[["app-button","severity","success"]]],nt=["app-button[severity=danger]","app-button[variant=outline]","app-button[severity=success]"];function ye(ct,Ee){if(1&ct&&D.nrm(0,"img",7),2&ct){const be=D.XpG();D.FS9("alt",be.caption),D.Y8G("src",be.img,D.B4B)}}function Ct(ct,Ee){if(1&ct&&(D.j41(0,"p",8),D.EFF(1),D.k0s()),2&ct){const be=D.XpG();D.R7$(),D.JRh(be.caption)}}let Xe=(()=>{class ct{constructor(){this.closeable=!0,this.closeModal=new D.bkB,this.confirmAction=new D.bkB}close(){this.closeModal.emit()}confirm(){this.confirmAction.emit(),this.close()}static#e=this.\u0275fac=function(Oe){return new(Oe||ct)};static#t=this.\u0275cmp=D.VBU({type:ct,selectors:[["app-modal"]],inputs:{img:"img",caption:"caption",prefix:"prefix",title:"title",subtitle:"subtitle",icon:"icon",closeable:"closeable"},outputs:{closeModal:"closeModal",confirmAction:"confirmAction"},standalone:!0,features:[D.aNF],ngContentSelectors:nt,decls:15,vars:6,consts:[[1,"modal__backdrop",3,"click"],[1,"modal__wrapper",3,"click"],[1,"modal__header"],["direction","row",3,"prefix","icon","label","subtitle"],["icon","close","variant","icon","severity","primary",3,"click"],[1,"modal__body"],[1,"modal__img--wrapper"],[1,"modal__img",3,"src","alt"],[1,"modal__caption"],[1,"modal__footer"],[1,"modal__footer--left"],[1,"modal__footer--right"]],template:function(Oe,vt){1&Oe&&(D.NAR(We),D.j41(0,"span",0),D.bIt("click",function(){return vt.close()}),D.j41(1,"section",1),D.bIt("click",function(At){return At.stopPropagation()}),D.j41(2,"header",2)(3,"app-label",3)(4,"app-button",4),D.bIt("click",function(){return vt.close()}),D.k0s()()(),D.j41(5,"div",5)(6,"figure",6),D.DNE(7,ye,1,2,"img",7)(8,Ct,2,1,"p",8),D.k0s()(),D.j41(9,"footer",9)(10,"span",10),D.SdG(11),D.SdG(12,1),D.k0s(),D.j41(13,"span",11),D.SdG(14,2),D.k0s()()()()),2&Oe&&(D.R7$(3),D.Y8G("prefix",vt.prefix)("icon",vt.icon)("label",vt.title)("subtitle",vt.subtitle),D.R7$(4),D.vxM(vt.img?7:-1),D.R7$(),D.vxM(vt.caption?8:-1))},dependencies:[R.U,V.Q],styles:[".modal__backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:3}.modal__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:var(--wrapper__gap);background-color:#fff;padding:1.5rem;border-radius:8px;max-width:80vw;max-height:75vh;width:500px;height:-moz-fit-content;height:fit-content;position:relative;box-shadow:var(--box-shadow)}.modal__wrapper[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:var(--wrapper__gap)}.modal__wrapper[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]   .modal__img--wrapper[_ngcontent-%COMP%]   .modal__img[_ngcontent-%COMP%]{width:100%;max-height:280px;object-fit:contain}.modal__wrapper[_ngcontent-%COMP%]   .modal__body[_ngcontent-%COMP%]   .modal__img--wrapper[_ngcontent-%COMP%]   .modal__caption[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.875rem;color:var(--neutral)}.modal__wrapper[_ngcontent-%COMP%]   .modal__footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}@media screen and (max-width: 768px){.modal__content[_ngcontent-%COMP%]{max-width:90%;padding:1rem}}"]})}return ct})()},5699:(Cn,It,ie)=>{ie.d(It,{d:()=>V});var D=ie(4341),R=ie(3953);let V=(()=>{class We{constructor(ye){this.formGroupDirective=ye,this.isRequired=!1}ngOnInit(){if(this.control){const ye=this.getFormControl(this.control);ye&&(this.isRequired=this.hasRequiredValidator(ye))}}getFormControl(ye){return this.formGroupDirective.form.get(ye)}hasRequiredValidator(ye){return ye.hasValidator(D.k0.required)}static#e=this.\u0275fac=function(Ct){return new(Ct||We)(R.rXU(D.j4))};static#t=this.\u0275cmp=R.VBU({type:We,selectors:[["app-required"]],inputs:{label:"label",control:"control"},standalone:!0,features:[R.aNF],decls:4,vars:3,consts:[[3,"for"],[1,"required"]],template:function(Ct,Xe){1&Ct&&(R.j41(0,"label",0),R.EFF(1),R.k0s(),R.j41(2,"span",1),R.EFF(3),R.k0s()),2&Ct&&(R.Y8G("for",Xe.control),R.R7$(),R.SpI(" ",Xe.label,"\n"),R.R7$(2),R.JRh(Xe.isRequired?"*":" "))}})}return We})()},6184:(Cn,It,ie)=>{var D=ie(345),R=ie(5379),V=ie(3953),We=ie(8010),nt=ie(6354);const ye=()=>(0,V.WQX)(R.Ix),Ct=()=>(0,V.WQX)(We.u).authState$;var Ee=ie(467),be=ie(4341),Oe=ie(4258),vt=ie(6335),ze=ie(1827),At=ie(223),Ut=ie(1229),pn=ie(8359),$t=ie(177);function Xn(i,e){if(1&i&&(V.j41(0,"label",4),V.EFF(1),V.k0s()),2&i){const n=V.XpG();V.STu("switcher__label switcher__label--right switcher--",n.size," ",n.on?"switcher--on":"switcher--off",""),V.R7$(),V.JRh(n.on?n.onLabel:n.offLabel)}}let cr=(()=>{class i{constructor(){this.size="md",this.onLabel="On",this.offLabel="Off",this.colorOn="green",this.colorOff="gray",this.disabled=!1,this.labelPosition="right",this.toggle=new V.bkB}onToggle(){this.disabled||(this.on=!this.on,this.toggle.emit(this.on))}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275cmp=V.VBU({type:i,selectors:[["app-switcher"]],inputs:{on:"on",size:"size",onLabel:"onLabel",offLabel:"offLabel",colorOn:"colorOn",colorOff:"colorOff",disabled:"disabled",labelPosition:"labelPosition"},outputs:{toggle:"toggle"},standalone:!0,features:[V.aNF],decls:4,vars:4,consts:[[1,"switcher"],["type","checkbox",3,"click","checked"],[1,"slider","round"],["for","",3,"class",4,"ngIf"],["for",""]],template:function(s,c){1&s&&(V.j41(0,"section",0)(1,"input",1),V.bIt("click",function(){return c.onToggle()}),V.k0s(),V.nrm(2,"span",2),V.DNE(3,Xn,2,5,"label",3),V.k0s()),2&s&&(V.AVh("switcher--disabled",c.disabled),V.R7$(),V.Y8G("checked",c.on),V.R7$(2),V.Y8G("ngIf","right"===c.labelPosition))},dependencies:[$t.MD,$t.bT],styles:['.switcher[_ngcontent-%COMP%]{--switcher--color-on: var(--color-on, --success);--switcher--color-off: var(--color-off, --neutralLight);--switcher__height: 36px;--switcher__width: 60px;position:relative;height:200px;display:flex;justify-content:space-between;column-gap:var(--panel__gap--col);align-items:center;width:100%;max-width:max-content;height:var(--switcher__height);margin:calc(var(--panel__gap--col) / 2) 0}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{opacity:0;width:calc(var(--switcher__width) + 20px);height:var(--switcher__height);z-index:1}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:34px;width:var(--switcher__width);height:var(--switcher__height)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:var(--primary)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider.round[_ngcontent-%COMP%]{border-radius:var(--switcher__height)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.switcher[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px var(--primary)}.switcher--disabled[_ngcontent-%COMP%]{cursor:not-allowed;pointer-events:none;opacity:.5}.switcher__label[_ngcontent-%COMP%]{font-size:var(--input__label--size);line-height:var(--input__label--lineHeight)}']})}return i})();var Ot=ie(3586),wt=ie(7440),dt=ie(2214),kt=ie(7852),xt=ie(1076),Ht=ie(1362);const De="firebasestorage.googleapis.com",tn="storageBucket";class Je extends xt.g{constructor(e,n,s=0){super(Tr(e),`Firebase Storage: ${n} (${Tr(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tr(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Xt=function(i){return i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment",i}(Xt||{});function Tr(i){return"storage/"+i}function ki(){return new Je(Xt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function pe(){return new Je(Xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _t(){return new Je(Xt.CANCELED,"User canceled the upload/download.")}function Qn(){return new Je(Xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Br(i){return new Je(Xt.INVALID_ARGUMENT,i)}function Fi(){return new Je(Xt.APP_DELETED,"The Firebase app was deleted.")}function Gr(i,e){return new Je(Xt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function Dn(i){throw new Je(Xt.INTERNAL_ERROR,"Internal error: "+i)}class yr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=yr.makeFromUrl(e,n)}catch{return new yr(e,"")}if(""===s.path)return s;throw function Un(i){return new Je(Xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}(e)}static makeFromUrl(e,n){let s=null;const c="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+c+"(/(.*))?$","i");function b(st){st.path_=decodeURIComponent(st.path)}const B=n.replace(/[.]/g,"\\."),Ye=[{regex:m,indices:{bucket:1,path:3},postModify:function l(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${B}/v[A-Za-z0-9_]+/b/${c}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${n===De?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${c}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let st=0;st<Ye.length;st++){const Nt=Ye[st],Gt=Nt.regex.exec(e);if(Gt){let vn=Gt[Nt.indices.path];vn||(vn=""),s=new yr(Gt[Nt.indices.bucket],vn),Nt.postModify(s);break}}if(null==s)throw function Wt(i){return new Je(Xt.INVALID_URL,"Invalid URL '"+i+"'.")}(e);return s}}class ni{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function an(i){return"string"==typeof i||i instanceof String}function zt(i){return $r()&&i instanceof Blob}function $r(){return typeof Blob<"u"}function xi(i,e,n,s){if(s<e)throw Br(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw Br(`Invalid value for '${i}'. Expected ${n} or less.`)}function Nr(i,e,n){let s=e;return null==n&&(s=`https://${e}`),`${n}://${s}/v0${i}`}function ui(i){const e=encodeURIComponent;let n="?";for(const s in i)i.hasOwnProperty(s)&&(n=n+(e(s)+"=")+e(i[s])+"&");return n=n.slice(0,-1),n}var li=function(i){return i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT",i}(li||{});function zr(i,e){const n=i>=500&&i<600,c=-1!==[408,429].indexOf(i),l=-1!==e.indexOf(i);return n||c||l}class Li{constructor(e,n,s,c,l,g,m,y,b,P,B,z=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=c,this.successCodes_=l,this.additionalRetryCodes_=g,this.callback_=m,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=P,this.connectionFactory_=B,this.retry=z,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,ae)=>{this.resolve_=K,this.reject_=ae,this.start_()})}start_(){const n=(s,c)=>{const l=this.resolve_,g=this.reject_,m=c.connection;if(c.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());!function Co(i){return void 0!==i}(y)?l():l(y)}catch(y){g(y)}else if(null!==m){const y=ki();y.serverResponse=m.getErrorText(),g(this.errorCallback_?this.errorCallback_(m,y):y)}else g(c.canceled?this.appDelete_?Fi():_t():pe())};this.canceled_?n(0,new jn(!1,null,!0)):this.backoffId_=function lr(i,e,n){let s=1,c=null,l=null,g=!1,m=0;function y(){return 2===m}let b=!1;function P(...Re){b||(b=!0,e.apply(null,Re))}function B(Re){c=setTimeout(()=>{c=null,i(K,y())},Re)}function z(){l&&clearTimeout(l)}function K(Re,...Ve){if(b)return void z();if(Re)return z(),void P.call(null,Re,...Ve);if(y()||g)return z(),void P.call(null,Re,...Ve);let Ye;s<64&&(s*=2),1===m?(m=2,Ye=0):Ye=1e3*(s+Math.random()),B(Ye)}let ae=!1;function ve(Re){ae||(ae=!0,z(),!b&&(null!==c?(Re||(m=2),clearTimeout(c),B(0)):Re||(m=1)))}return B(0),l=setTimeout(()=>{g=!0,ve(!0)},n),ve}((s,c)=>{if(c)return void s(!1,new jn(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const g=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(g),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(g),this.pendingConnection_=null;const m=l.getErrorCode()===li.NO_ERROR,y=l.getStatus();if(!m||zr(y,this.additionalRetryCodes_)&&this.retry){const P=l.getErrorCode()===li.ABORT;return void s(!1,new jn(!1,null,P))}const b=-1!==this.successCodes_.indexOf(y);s(!0,new jn(b,l))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function sn(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class jn{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function fr(...i){const e=function Si(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let s=0;s<i.length;s++)n.append(i[s]);return n.getBlob()}if($r())return new Blob(i);throw new Je(Xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ae={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qe{constructor(e,n){this.data=e,this.contentType=n||null}}function ge(i){const e=[];for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);s<=127?e.push(s):s<=2047?e.push(192|s>>6,128|63&s):55296==(64512&s)?n<i.length-1&&56320==(64512&i.charCodeAt(n+1))?(s=65536|(1023&s)<<10|1023&i.charCodeAt(++n),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):e.push(239,191,189):56320==(64512&s)?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(e)}function ht(i,e){switch(i){case Ae.BASE64:{const c=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(c||l)throw Gr(i,"Invalid character '"+(c?"-":"_")+"' found: is it base64url encoded?");break}case Ae.BASE64URL:{const c=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(c||l)throw Gr(i,"Invalid character '"+(c?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function tt(i){if(typeof atob>"u")throw function mr(i){return new Je(Xt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(i)}(e)}catch(c){throw c.message.includes("polyfill")?c:Gr(i,"Invalid character found")}const s=new Uint8Array(n.length);for(let c=0;c<n.length;c++)s[c]=n.charCodeAt(c);return s}class qe{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw Gr(Ae.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;null!=s&&(this.base64=function Hn(i,e){return i.length>=e.length&&i.substring(i.length-e.length)===e}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}class Xr{constructor(e,n){let s=0,c="";zt(e)?(this.data_=e,s=e.size,c=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=c}size(){return this.size_}type(){return this.type_}slice(e,n){if(zt(this.data_)){const c=function he(i,e,n){return i.webkitSlice?i.webkitSlice(e,n):i.mozSlice?i.mozSlice(e,n):i.slice?i.slice(e,n):null}(this.data_,e,n);return null===c?null:new Xr(c)}{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Xr(s,!0)}}static getBlob(...e){if($r()){const n=e.map(s=>s instanceof Xr?s.data_:s);return new Xr(fr.apply(null,n))}{const n=e.map(g=>an(g)?function de(i,e){switch(i){case Ae.RAW:return new Qe(ge(e));case Ae.BASE64:case Ae.BASE64URL:return new Qe(ht(i,e));case Ae.DATA_URL:return new Qe(function Kt(i){const e=new qe(i);return e.base64?ht(Ae.BASE64,e.rest):function Se(i){let e;try{e=decodeURIComponent(i)}catch{throw Gr(Ae.DATA_URL,"Malformed data URL.")}return ge(e)}(e.rest)}(e),function An(i){return new qe(i).contentType}(e))}throw ki()}(Ae.RAW,g).data:g.data_);let s=0;n.forEach(g=>{s+=g.byteLength});const c=new Uint8Array(s);let l=0;return n.forEach(g=>{for(let m=0;m<g.length;m++)c[l++]=g[m]}),new Xr(c,!0)}}uploadData(){return this.data_}}function wr(i){let e;try{e=JSON.parse(i)}catch{return null}return function sr(i){return"object"==typeof i&&!Array.isArray(i)}(e)?e:null}function Vi(i){const e=i.lastIndexOf("/",i.length-2);return-1===e?i:i.slice(e+1)}function Ur(i,e){return e}class ii{constructor(e,n,s,c){this.server=e,this.local=n||e,this.writable=!!s,this.xform=c||Ur}}let Ns=null;function oo(){if(Ns)return Ns;const i=[];i.push(new ii("bucket")),i.push(new ii("generation")),i.push(new ii("metageneration")),i.push(new ii("name","fullPath",!0));const n=new ii("name");n.xform=function e(l,g){return function po(i){return!an(i)||i.length<2?i:Vi(i)}(g)},i.push(n);const c=new ii("size");return c.xform=function s(l,g){return void 0!==g?Number(g):g},i.push(c),i.push(new ii("timeCreated")),i.push(new ii("updated")),i.push(new ii("md5Hash",null,!0)),i.push(new ii("cacheControl",null,!0)),i.push(new ii("contentDisposition",null,!0)),i.push(new ii("contentEncoding",null,!0)),i.push(new ii("contentLanguage",null,!0)),i.push(new ii("contentType",null,!0)),i.push(new ii("metadata","customMetadata",!0)),Ns=i,Ns}function Sa(i,e,n){const s=wr(e);return null===s?null:function hc(i,e,n){const s={type:"file"},c=n.length;for(let l=0;l<c;l++){const g=n[l];s[g.local]=g.xform(s,e[g.server])}return function ms(i,e){Object.defineProperty(i,"ref",{get:function n(){const l=new yr(i.bucket,i.fullPath);return e._makeStorageReference(l)}})}(s,i),s}(i,s,n)}function Et(i,e){const n={},s=e.length;for(let c=0;c<s;c++){const l=e[c];l.writable&&(n[l.server]=i[l.local])}return JSON.stringify(n)}class Rn{constructor(e,n,s,c){this.url=e,this.method=n,this.handler=s,this.timeout=c,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function kn(i){if(!i)throw ki()}function Ir(i,e){return function n(s,c){const l=Sa(i,c,e);return kn(null!==l),l}}function No(i){return function e(n,s){let c;return c=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function Le(){return new Je(Xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function bt(){return new Je(Xt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function Ue(i){return new Je(Xt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===n.getStatus()?function le(i){return new Je(Xt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}(i.path):s,c.status=n.getStatus(),c.serverResponse=s.serverResponse,c}}function Qr(i){const e=No(i);return function n(s,c){let l=e(s,c);return 404===s.getStatus()&&(l=function Ne(i){return new Je(Xt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}(i.path)),l.serverResponse=c.serverResponse,l}}function ca(i,e,n){const s=Object.assign({},n);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=function gc(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}(null,e)),s}class or{constructor(e,n,s,c){this.current=e,this.total=n,this.finalized=!!s,this.metadata=c||null}}function Bi(i,e){let n=null;try{n=i.getResponseHeader("X-Goog-Upload-Status")}catch{kn(!1)}return kn(!!n&&-1!==(e||["active"]).indexOf(n)),n}function ea(i){switch(i){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class $i{constructor(e,n,s){if(function Pt(i){return"function"==typeof i}(e)||null!=n||null!=s)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function Di(i){return(...e)=>{Promise.resolve().then(()=>i(...e))}}let ks=null;class Ul{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=li.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=li.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=li.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,c){if(this.sent_)throw Dn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==c)for(const l in c)c.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,c[l].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Ui extends Ul{initXhr(){this.xhr_.responseType="text"}}function ko(){return ks?ks():new Ui}class Oa{constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=oo(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=c=>{if(this._request=void 0,this._chunkMultiplier=1,c._codeEquals(Xt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(zr(c.status,[])){if(!l)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();c=pe()}this._error=c,this._transition("error")}},this._metadataErrorHandler=c=>{this._request=void 0,c._codeEquals(Xt.CANCELED)?this.completeTransitions_():(this._error=c,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((c,l)=>{this._resolve=c,this._reject=l,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const s=function Ma(i,e,n,s,c){const l=e.bucketOnlyServerUrl(),g=ca(e,s,c),m={name:g.fullPath},y=Nr(l,i.host,i._protocol),P={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":g.contentType,"Content-Type":"application/json; charset=utf-8"},B=Et(g,n),ae=new Rn(y,"POST",function K(ve){let Re;Bi(ve);try{Re=ve.getResponseHeader("X-Goog-Upload-URL")}catch{kn(!1)}return kn(an(Re)),Re},i.maxUploadRetryTime);return ae.urlParams=m,ae.headers=P,ae.body=B,ae.errorHandler=No(e),ae}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),c=this._ref.storage._makeRequest(s,ko,e,n);this._request=c,c.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const c=function Io(i,e,n,s){const y=new Rn(n,"POST",function l(b){const P=Bi(b,["active","final"]);let B=null;try{B=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{kn(!1)}B||kn(!1);const z=Number(B);return kn(!isNaN(z)),new or(z,s.size(),"final"===P)},i.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=No(e),y}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(c,ko,n,s);this._request=l,l.getPromise().then(g=>{this._request=void 0,this._updateProgress(g.current),this._needToFetchStatus=!1,g.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new or(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((c,l)=>{let g;try{g=function Js(i,e,n,s,c,l,g,m){const y=new or(0,0);if(g?(y.current=g.current,y.total=g.total):(y.current=0,y.total=s.size()),s.size()!==y.total)throw function Pr(){return new Je(Xt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const b=y.total-y.current;let P=b;c>0&&(P=Math.min(P,c));const B=y.current;let K="";K=0===P?"finalize":b===P?"upload, finalize":"upload";const ae={"X-Goog-Upload-Command":K,"X-Goog-Upload-Offset":`${y.current}`},ve=s.slice(B,B+P);if(null===ve)throw Qn();const Ye=new Rn(n,"POST",function Re(st,Nt){const Gt=Bi(st,["active","final"]),Qt=y.current+P,vn=s.size();let er;return er="final"===Gt?Ir(e,l)(st,Nt):null,new or(Qt,vn,"final"===Gt,er)},e.maxUploadRetryTime);return Ye.headers=ae,Ye.body=ve.uploadData(),Ye.progressCallback=m||null,Ye.errorHandler=No(i),Ye}(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const m=this._ref.storage._makeRequest(g,ko,c,l,!1);this._request=m,m.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=function pc(i,e,n){const c=Nr(e.fullServerUrl(),i.host,i._protocol),g=i.maxOperationRetryTime,m=new Rn(c,"GET",Ir(i,n),g);return m.errorHandler=Qr(e),m}(this._ref.storage,this._ref._location,this._mappings),c=this._ref.storage._makeRequest(s,ko,e,n);this._request=c,c.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=function oi(i,e,n,s,c){const l=e.bucketOnlyServerUrl(),g={"X-Goog-Upload-Protocol":"multipart"},y=function m(){let Ye="";for(let st=0;st<2;st++)Ye+=Math.random().toString().slice(2);return Ye}();g["Content-Type"]="multipart/related; boundary="+y;const b=ca(e,s,c),P=Et(b,n),K=Xr.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+P+"\r\n--"+y+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",s,"\r\n--"+y+"--");if(null===K)throw Qn();const ae={name:b.fullPath},ve=Nr(l,i.host,i._protocol),Ve=i.maxUploadRetryTime,Pe=new Rn(ve,"POST",Ir(i,n),Ve);return Pe.urlParams=ae,Pe.headers=g,Pe.body=K.uploadData(),Pe.errorHandler=No(e),Pe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),c=this._ref.storage._makeRequest(s,ko,e,n);this._request=c,c.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=_t(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ea(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,c){const l=new $i(n||void 0,s||void 0,c||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ea(this._state)){case"success":Di(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":Di(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ea(this._state)){case"running":case"paused":e.next&&Di(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&Di(e.complete.bind(e))();break;default:e.error&&Di(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Fo{constructor(e,n){this._service=e,this._location=n instanceof yr?n:yr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fo(e,n)}get root(){const e=new yr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Vi(this._location.path)}get storage(){return this._service}get parent(){const e=function ri(i){if(0===i.length)return null;const e=i.lastIndexOf("/");return-1===e?"":i.slice(0,e)}(this._location.path);if(null===e)return null;const n=new yr(this._location.bucket,e);return new Fo(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw function ln(i){return new Je(Xt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function $a(i){i._throwIfRoot("getDownloadURL");const e=function Ha(i,e,n){const c=Nr(e.fullServerUrl(),i.host,i._protocol),g=i.maxOperationRetryTime,m=new Rn(c,"GET",function Gi(i,e){return function n(s,c){const l=Sa(i,c,e);return kn(null!==l),function Da(i,e,n,s){const c=wr(e);if(null===c||!an(c.downloadTokens))return null;const l=c.downloadTokens;if(0===l.length)return null;const g=encodeURIComponent;return l.split(",").map(b=>{const B=i.fullPath;return Nr("/b/"+g(i.bucket)+"/o/"+g(B),n,s)+ui({alt:"media",token:b})})[0]}(l,c,i.host,i._protocol)}}(i,n),g);return m.errorHandler=Qr(e),m}(i.storage,i._location,oo());return i.storage.makeRequestWithTokens(e,ko).then(n=>{if(null===n)throw function no(){return new Je(Xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function go(i,e){if(i instanceof mo){const n=i;if(null==n._bucket)throw function nn(){return new Je(Xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tn+"' property when initializing the app?")}();const s=new Fo(n,n._bucket);return null!=e?go(s,e):s}return void 0!==e?function Ko(i,e){const n=function qn(i,e){const n=e.split("/").filter(s=>s.length>0).join("/");return 0===i.length?n:i+"/"+n}(i._location.path,e),s=new yr(i._location.bucket,n);return new Fo(i.storage,s)}(i,e):i}function rs(i,e){const n=e?.[tn];return null==n?null:yr.makeFromBucketSpec(n,i)}class mo{constructor(e,n,s,c,l){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=c,this._firebaseVersion=l,this._bucket=null,this._host=De,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=c?yr.makeFromBucketSpec(c,this._host):rs(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?yr.makeFromBucketSpec(this._url,e):rs(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xi("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xi("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const s=yield n.getToken();if(null!==s)return s.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.A)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fo(this,e)}_makeRequest(e,n,s,c,l=!0){if(this._deleted)return new ni(Fi());{const g=function Zr(i,e,n,s,c,l,g=!0){const m=ui(i.urlParams),y=i.url+m,b=Object.assign({},i.headers);return function gi(i,e){e&&(i["X-Firebase-GMPID"]=e)}(b,e),function Po(i,e){null!==e&&e.length>0&&(i.Authorization="Firebase "+e)}(b,n),function Wn(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(b,l),function Wo(i,e){null!==e&&(i["X-Firebase-AppCheck"]=e)}(b,s),new Li(y,i.method,b,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,c,g)}(e,this._appId,s,c,n,this._firebaseVersion,l);return this._requests.add(g),g.getPromise().then(()=>this._requests.delete(g),()=>this._requests.delete(g)),g}}makeRequestWithTokens(e,n){var s=this;return(0,Ee.A)(function*(){const[c,l]=yield Promise.all([s._getAuthToken(),s._getAppCheckToken()]);return s._makeRequest(e,n,c,l).getPromise()})()}}const za="@firebase/storage",Xo="storage";function zi(i,e,n){return function Ga(i,e,n){return i._throwIfRoot("uploadBytesResumable"),new Oa(i,new Xr(e),n)}(i=(0,xt.Ku)(i),e,n)}function on(i){return $a(i=(0,xt.Ku)(i))}function hr(i,e){return function Na(i,e){if(e&&function ns(i){return/^[A-Za-z]+:\/\//.test(i)}(e)){if(i instanceof mo)return function mc(i,e){return new Fo(i,e)}(i,e);throw Br("To use ref(service, url), the first argument must be a Storage instance.")}return go(i,e)}(i=(0,xt.Ku)(i),e)}function da(i=(0,kt.Sx)(),e){i=(0,xt.Ku)(i);const s=(0,kt.j6)(i,Xo).getImmediate({identifier:e}),c=(0,xt.yU)("storage");return c&&function fa(i,e,n,s={}){!function la(i,e,n,s={}){i.host=`${e}:${n}`,i._protocol="http";const{mockUserToken:c}=s;c&&(i._overrideAuthToken="string"==typeof c?c:(0,xt.Fy)(c,i.app.options.projectId))}(i,e,n,s)}(s,...c),s}function ha(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),c=i.getProvider("app-check-internal");return new mo(n,s,c,e,kt.MF)}!function ws(){(0,kt.om)(new Ht.uA(Xo,ha,"PUBLIC").setMultipleInstances(!0)),(0,kt.KO)(za,"0.12.5",""),(0,kt.KO)(za,"0.12.5","esm2017")}();class Ls{constructor(e){return e}}const gu="storage",Vs=new V.nKC("angularfire2.storage-instances");function Uc(i){return(e,n)=>{const s=e.runOutsideAngular(()=>i(n));return new Ls(s)}}const jc={provide:class vc{constructor(){return(0,Ot.CA)(gu)}},deps:[[new V.Xx1,Vs]]},Wr={provide:Ls,useFactory:function xr(i,e){const n=(0,Ot.lR)(gu,i,e);return n&&new Ls(n)},deps:[[new V.Xx1,Vs],wt.XU]},Yi=(0,Ot.S3)(on,!0),Bo=(0,Ot.S3)(da,!0),Ao=(0,Ot.S3)(hr,!0),Y=(0,Ot.S3)(zi,!0);var H=ie(2418);var Mt=function(){var i=function(n,s){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(c[g]=l[g])})(n,s)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),$n=function(i){function e(n,s){var c=this.constructor,l=i.call(this,n,s)||this;return Object.defineProperty(l,"name",{value:c.name,enumerable:!1,configurable:!0}),function oe(i,e){var n=Object.setPrototypeOf;n?n(i,e):i.__proto__=e}(l,c.prototype),function Te(i,e){void 0===e&&(e=i.constructor);var n=Error.captureStackTrace;n&&n(i,e)}(l),l}return Mt(e,i),e}(Error),bo=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Tn=function(i){function e(n){void 0===n&&(n=void 0);var s=i.call(this,n)||this;return s.message=n,s}return bo(e,i),e.prototype.getKind=function(){return this.constructor.kind},e.kind="Exception",e}($n);var _u=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const qr=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return _u(e,i),e.kind="ArgumentException",e}(Tn);var js=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const yn=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return js(e,i),e.kind="IllegalArgumentException",e}(Tn),vu=function(){function i(e){if(this.binarizer=e,null===e)throw new yn("Binarizer must be non-null.")}return i.prototype.getWidth=function(){return this.binarizer.getWidth()},i.prototype.getHeight=function(){return this.binarizer.getHeight()},i.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},i.prototype.getBlackMatrix=function(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},i.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},i.prototype.crop=function(e,n,s,c){var l=this.binarizer.getLuminanceSource().crop(e,n,s,c);return new i(this.binarizer.createBinarizer(l))},i.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},i.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new i(this.binarizer.createBinarizer(e))},i.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new i(this.binarizer.createBinarizer(e))},i.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},i}();var Yn=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const mi=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Yn(e,i),e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Tn),zc=function(){function i(e){this.source=e}return i.prototype.getLuminanceSource=function(){return this.source},i.prototype.getWidth=function(){return this.source.getWidth()},i.prototype.getHeight=function(){return this.source.getHeight()},i}(),Hr=function(){function i(){}return i.arraycopy=function(e,n,s,c,l){for(;l--;)s[c++]=e[n++]},i.currentTimeMillis=function(){return Date.now()},i}();var zu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const wc=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return zu(e,i),e.kind="IndexOutOfBoundsException",e}(Tn);var Eu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const wu=function(i){function e(n,s){void 0===n&&(n=void 0),void 0===s&&(s=void 0);var c=i.call(this,s)||this;return c.index=n,c.message=s,c}return Eu(e,i),e.kind="ArrayIndexOutOfBoundsException",e}(wc),Yr=function(){function i(){}return i.fill=function(e,n){for(var s=0,c=e.length;s<c;s++)e[s]=n},i.fillWithin=function(e,n,s,c){i.rangeCheck(e.length,n,s);for(var l=n;l<s;l++)e[l]=c},i.rangeCheck=function(e,n,s){if(n>s)throw new yn("fromIndex("+n+") > toIndex("+s+")");if(n<0)throw new wu(n);if(s>e)throw new wu(s)},i.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},i.create=function(e,n,s){return Array.from({length:e}).map(function(l){return Array.from({length:n}).fill(s)})},i.createInt32Array=function(e,n,s){return Array.from({length:e}).map(function(l){return Int32Array.from({length:n}).fill(s)})},i.equals=function(e,n){if(!(e&&n&&e.length&&n.length&&e.length===n.length))return!1;for(var s=0,c=e.length;s<c;s++)if(e[s]!==n[s])return!1;return!0},i.hashCode=function(e){var n,s;if(null===e)return 0;var c=1;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),g=l.next();!g.done;g=l.next())c=31*c+g.value}catch(y){n={error:y}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return c},i.fillUint8Array=function(e,n){for(var s=0;s!==e.length;s++)e[s]=n},i.copyOf=function(e,n){return e.slice(0,n)},i.copyOfUint8Array=function(e,n){if(e.length<=n){var s=new Uint8Array(n);return s.set(e),s}return e.slice(0,n)},i.copyOfRange=function(e,n,s){var c=s-n,l=new Int32Array(c);return Hr.arraycopy(e,n,l,0,c),l},i.binarySearch=function(e,n,s){void 0===s&&(s=i.numberComparator);for(var c=0,l=e.length-1;c<=l;){var g=l+c>>1,m=s(n,e[g]);if(m>0)c=g+1;else{if(!(m<0))return g;l=g-1}}return-c-1},i.numberComparator=function(e,n){return e-n},i}(),ar=function(){function i(){}return i.numberOfTrailingZeros=function(e){var n;if(0===e)return 32;var s=31;return 0!=(n=e<<16)&&(s-=16,e=n),0!=(n=e<<8)&&(s-=8,e=n),0!=(n=e<<4)&&(s-=4,e=n),0!=(n=e<<2)&&(s-=2,e=n),s-(e<<1>>>31)},i.numberOfLeadingZeros=function(e){if(0===e)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-(e>>>31)},i.toHexString=function(e){return e.toString(16)},i.toBinaryString=function(e){return String(parseInt(String(e),2))},i.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,63&(e+=e>>>8)+(e>>>16)},i.truncDivision=function(e,n){return Math.trunc(e/n)},i.parseInt=function(e,n){return void 0===n&&(n=void 0),parseInt(e,n)},i.MIN_VALUE_32_BITS=-2147483648,i.MAX_VALUE=Number.MAX_SAFE_INTEGER,i}(),_i=function(){function i(e,n){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=null==n?i.makeArray(e):n)}return i.prototype.getSize=function(){return this.size},i.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},i.prototype.ensureCapacity=function(e){if(e>32*this.bits.length){var n=i.makeArray(e);Hr.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},i.prototype.get=function(e){return!!(this.bits[Math.floor(e/32)]&1<<(31&e))},i.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},i.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},i.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var s=this.bits,c=Math.floor(e/32),l=s[c];l&=~((1<<(31&e))-1);for(var g=s.length;0===l;){if(++c===g)return n;l=s[c]}var m=32*c+ar.numberOfTrailingZeros(l);return m>n?n:m},i.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var s=this.bits,c=Math.floor(e/32),l=~s[c];l&=~((1<<(31&e))-1);for(var g=s.length;0===l;){if(++c===g)return n;l=~s[c]}var m=32*c+ar.numberOfTrailingZeros(l);return m>n?n:m},i.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},i.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new yn;if(n!==e){n--;for(var s=Math.floor(e/32),c=Math.floor(n/32),l=this.bits,g=s;g<=c;g++)l[g]|=(2<<(g<c?31:31&n))-(1<<(g>s?0:31&e))}},i.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,s=0;s<e;s++)n[s]=0},i.prototype.isRange=function(e,n,s){if(n<e||e<0||n>this.size)throw new yn;if(n===e)return!0;n--;for(var c=Math.floor(e/32),l=Math.floor(n/32),g=this.bits,m=c;m<=l;m++){var P=(2<<(m<l?31:31&n))-(1<<(m>c?0:31&e))&4294967295;if((g[m]&P)!==(s?P:0))return!1}return!0},i.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},i.prototype.appendBits=function(e,n){if(n<0||n>32)throw new yn("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var s=n;s>0;s--)this.appendBit(1==(e>>s-1&1))},i.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var s=0;s<n;s++)this.appendBit(e.get(s))},i.prototype.xor=function(e){if(this.size!==e.size)throw new yn("Sizes don't match");for(var n=this.bits,s=0,c=n.length;s<c;s++)n[s]^=e.bits[s]},i.prototype.toBytes=function(e,n,s,c){for(var l=0;l<c;l++){for(var g=0,m=0;m<8;m++)this.get(e)&&(g|=1<<7-m),e++;n[s+l]=g}},i.prototype.getBitArray=function(){return this.bits},i.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),s=n+1,c=this.bits,l=0;l<s;l++){var g=c[l];e[n-l]=g=(g=(g=(g=(g=g>>1&1431655765|(1431655765&g)<<1)>>2&858993459|(858993459&g)<<2)>>4&252645135|(252645135&g)<<4)>>8&16711935|(16711935&g)<<8)>>16&65535|(65535&g)<<16}if(this.size!==32*s){var m=32*s-this.size,y=e[0]>>>m;for(l=1;l<s;l++){var b=e[l];e[l-1]=y|=b<<32-m,y=b>>>m}e[s-1]=y}this.bits=e},i.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},i.prototype.equals=function(e){return e instanceof i&&(this.size===e.size&&Yr.equals(this.bits,e.bits))},i.prototype.hashCode=function(){return 31*this.size+Yr.hashCode(this.bits)},i.prototype.toString=function(){for(var e="",n=0,s=this.size;n<s;n++)7&n||(e+=" "),e+=this.get(n)?"X":".";return e},i.prototype.clone=function(){return new i(this.size,this.bits.slice())},i.prototype.toArray=function(){for(var e=[],n=0,s=this.size;n<s;n++)e.push(this.get(n));return e},i}();var Za=function(i){return i[i.OTHER=0]="OTHER",i[i.PURE_BARCODE=1]="PURE_BARCODE",i[i.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",i[i.TRY_HARDER=3]="TRY_HARDER",i[i.CHARACTER_SET=4]="CHARACTER_SET",i[i.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",i[i.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",i[i.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",i[i.ASSUME_GS1=8]="ASSUME_GS1",i[i.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",i[i.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",i[i.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS",i}(Za||{});const Vn=Za;var Kn=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Jt=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Kn(e,i),e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Tn);var Er=function(i){return i[i.Cp437=0]="Cp437",i[i.ISO8859_1=1]="ISO8859_1",i[i.ISO8859_2=2]="ISO8859_2",i[i.ISO8859_3=3]="ISO8859_3",i[i.ISO8859_4=4]="ISO8859_4",i[i.ISO8859_5=5]="ISO8859_5",i[i.ISO8859_6=6]="ISO8859_6",i[i.ISO8859_7=7]="ISO8859_7",i[i.ISO8859_8=8]="ISO8859_8",i[i.ISO8859_9=9]="ISO8859_9",i[i.ISO8859_10=10]="ISO8859_10",i[i.ISO8859_11=11]="ISO8859_11",i[i.ISO8859_13=12]="ISO8859_13",i[i.ISO8859_14=13]="ISO8859_14",i[i.ISO8859_15=14]="ISO8859_15",i[i.ISO8859_16=15]="ISO8859_16",i[i.SJIS=16]="SJIS",i[i.Cp1250=17]="Cp1250",i[i.Cp1251=18]="Cp1251",i[i.Cp1252=19]="Cp1252",i[i.Cp1256=20]="Cp1256",i[i.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",i[i.UTF8=22]="UTF8",i[i.ASCII=23]="ASCII",i[i.Big5=24]="Big5",i[i.GB18030=25]="GB18030",i[i.EUC_KR=26]="EUC_KR",i}(Er||{});const co=function(){function i(e,n,s){for(var c,l,g=[],m=3;m<arguments.length;m++)g[m-3]=arguments[m];this.valueIdentifier=e,this.name=s,this.values="number"==typeof n?Int32Array.from([n]):n,this.otherEncodingNames=g,i.VALUE_IDENTIFIER_TO_ECI.set(e,this),i.NAME_TO_ECI.set(s,this);for(var y=this.values,b=0,P=y.length;b!==P;b++)i.VALUES_TO_ECI.set(y[b],this);try{for(var z=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),K=z.next();!K.done;K=z.next())i.NAME_TO_ECI.set(K.value,this)}catch(ve){c={error:ve}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}}return i.prototype.getValueIdentifier=function(){return this.valueIdentifier},i.prototype.getName=function(){return this.name},i.prototype.getValue=function(){return this.values[0]},i.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Jt("incorect value");var n=i.VALUES_TO_ECI.get(e);if(void 0===n)throw new Jt("incorect value");return n},i.getCharacterSetECIByName=function(e){var n=i.NAME_TO_ECI.get(e);if(void 0===n)throw new Jt("incorect value");return n},i.prototype.equals=function(e){if(!(e instanceof i))return!1;var n=e;return this.getName()===n.getName()},i.VALUE_IDENTIFIER_TO_ECI=new Map,i.VALUES_TO_ECI=new Map,i.NAME_TO_ECI=new Map,i.Cp437=new i(Er.Cp437,Int32Array.from([0,2]),"Cp437"),i.ISO8859_1=new i(Er.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),i.ISO8859_2=new i(Er.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),i.ISO8859_3=new i(Er.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),i.ISO8859_4=new i(Er.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),i.ISO8859_5=new i(Er.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),i.ISO8859_6=new i(Er.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),i.ISO8859_7=new i(Er.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),i.ISO8859_8=new i(Er.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),i.ISO8859_9=new i(Er.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),i.ISO8859_10=new i(Er.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),i.ISO8859_11=new i(Er.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),i.ISO8859_13=new i(Er.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),i.ISO8859_14=new i(Er.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),i.ISO8859_15=new i(Er.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),i.ISO8859_16=new i(Er.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),i.SJIS=new i(Er.SJIS,20,"SJIS","Shift_JIS"),i.Cp1250=new i(Er.Cp1250,21,"Cp1250","windows-1250"),i.Cp1251=new i(Er.Cp1251,22,"Cp1251","windows-1251"),i.Cp1252=new i(Er.Cp1252,23,"Cp1252","windows-1252"),i.Cp1256=new i(Er.Cp1256,24,"Cp1256","windows-1256"),i.UnicodeBigUnmarked=new i(Er.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),i.UTF8=new i(Er.UTF8,26,"UTF8","UTF-8"),i.ASCII=new i(Er.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),i.Big5=new i(Er.Big5,28,"Big5"),i.GB18030=new i(Er.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),i.EUC_KR=new i(Er.EUC_KR,30,"EUC_KR","EUC-KR"),i}();var F=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const W=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return F(e,i),e.kind="UnsupportedOperationException",e}(Tn),Ce=function(){function i(){}return i.decode=function(e,n){var s=this.encodingName(n);return this.customDecoder?this.customDecoder(e,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(e,s):new TextDecoder(s).decode(e)},i.shouldDecodeOnFallback=function(e){return!i.isBrowser()&&"ISO-8859-1"===e},i.encode=function(e,n){var s=this.encodingName(n);return this.customEncoder?this.customEncoder(e,s):typeof TextEncoder>"u"?this.encodeFallback(e):(new TextEncoder).encode(e)},i.isBrowser=function(){return typeof window<"u"&&"[object Window]"==={}.toString.call(window)},i.encodingName=function(e){return"string"==typeof e?e:e.getName()},i.encodingCharacterSet=function(e){return e instanceof co?e:co.getCharacterSetECIByName(e)},i.decodeFallback=function(e,n){var s=this.encodingCharacterSet(n);if(i.isDecodeFallbackSupported(s)){for(var c="",l=0,g=e.length;l<g;l++){var m=e[l].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(s.equals(co.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new W("Encoding "+this.encodingName(n)+" not supported by fallback.")},i.isDecodeFallbackSupported=function(e){return e.equals(co.UTF8)||e.equals(co.ISO8859_1)||e.equals(co.ASCII)},i.encodeFallback=function(e){for(var s=btoa(unescape(encodeURIComponent(e))).split(""),c=[],l=0;l<s.length;l++)c.push(s[l].charCodeAt(0));return new Uint8Array(c)},i}(),mt=function(){function i(){}return i.castAsNonUtf8Char=function(e,n){void 0===n&&(n=null);var s=n?n.getName():this.ISO88591;return Ce.decode(new Uint8Array([e]),s)},i.guessEncoding=function(e,n){if(null!=n&&void 0!==n.get(Vn.CHARACTER_SET))return n.get(Vn.CHARACTER_SET).toString();for(var s=e.length,c=!0,l=!0,g=!0,m=0,y=0,b=0,P=0,B=0,z=0,K=0,ae=0,ve=0,Re=0,Ve=0,Pe=e.length>3&&239===e[0]&&187===e[1]&&191===e[2],Ye=0;Ye<s&&(c||l||g);Ye++){var st=255&e[Ye];g&&(m>0?128&st?m--:g=!1:128&st&&(64&st?(m++,32&st?(m++,16&st?(m++,8&st?g=!1:P++):b++):y++):g=!1)),c&&(st>127&&st<160?c=!1:st>159&&(st<192||215===st||247===st)&&Ve++),l&&(B>0?st<64||127===st||st>252?l=!1:B--:128===st||160===st||st>239?l=!1:st>160&&st<224?(z++,ae=0,++K>ve&&(ve=K)):st>127?(B++,K=0,++ae>Re&&(Re=ae)):(K=0,ae=0))}return g&&m>0&&(g=!1),l&&B>0&&(l=!1),g&&(Pe||y+b+P>0)?i.UTF8:l&&(i.ASSUME_SHIFT_JIS||ve>=3||Re>=3)?i.SHIFT_JIS:c&&l?2===ve&&2===z||10*Ve>=s?i.SHIFT_JIS:i.ISO88591:c?i.ISO88591:l?i.SHIFT_JIS:g?i.UTF8:i.PLATFORM_DEFAULT_ENCODING},i.format=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var c=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function l(m,y,b,P,B,z){if("%%"===m)return"%";if(void 0!==n[++c]){m=P?parseInt(P.substr(1)):void 0;var ae,K=B?parseInt(B.substr(1)):void 0;switch(z){case"s":ae=n[c];break;case"c":ae=n[c][0];break;case"f":ae=parseFloat(n[c]).toFixed(m);break;case"p":ae=parseFloat(n[c]).toPrecision(m);break;case"e":ae=parseFloat(n[c]).toExponential(m);break;case"x":ae=parseInt(n[c]).toString(K||16);break;case"d":ae=parseFloat(parseInt(n[c],K||10).toPrecision(m)).toFixed(0)}ae="object"==typeof ae?JSON.stringify(ae):(+ae).toString(K);for(var ve=parseInt(b),Re=b&&b[0]+""=="0"?"0":" ";ae.length<ve;)ae=void 0!==y?ae+Re:Re+ae;return ae}})},i.getBytes=function(e,n){return Ce.encode(e,n)},i.getCharCode=function(e,n){return void 0===n&&(n=0),e.charCodeAt(n)},i.getCharAt=function(e){return String.fromCharCode(e)},i.SHIFT_JIS=co.SJIS.getName(),i.GB2312="GB2312",i.ISO88591=co.ISO8859_1.getName(),i.EUC_JP="EUC_JP",i.UTF8=co.UTF8.getName(),i.PLATFORM_DEFAULT_ENCODING=i.UTF8,i.ASSUME_SHIFT_JIS=!1,i}(),gn=function(){function i(e){void 0===e&&(e=""),this.value=e}return i.prototype.enableDecoding=function(e){return this.encoding=e,this},i.prototype.append=function(e){return this.value+="string"==typeof e?e.toString():this.encoding?mt.castAsNonUtf8Char(e,this.encoding):String.fromCharCode(e),this},i.prototype.appendChars=function(e,n,s){for(var c=n;n<n+s;c++)this.append(e[c]);return this},i.prototype.length=function(){return this.value.length},i.prototype.charAt=function(e){return this.value.charAt(e)},i.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},i.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},i.prototype.substring=function(e,n){return this.value.substring(e,n)},i.prototype.setLengthToZero=function(){this.value=""},i.prototype.toString=function(){return this.value},i.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},i}(),nr=function(){function i(e,n,s,c){if(this.width=e,this.height=n,this.rowSize=s,this.bits=c,null==n&&(n=e),this.height=n,e<1||n<1)throw new yn("Both dimensions must be greater than 0");null==s&&(s=Math.floor((e+31)/32)),this.rowSize=s,null==c&&(this.bits=new Int32Array(this.rowSize*this.height))}return i.parseFromBooleanArray=function(e){for(var n=e.length,s=e[0].length,c=new i(s,n),l=0;l<n;l++)for(var g=e[l],m=0;m<s;m++)g[m]&&c.set(m,l);return c},i.parseFromString=function(e,n,s){if(null===e)throw new yn("stringRepresentation cannot be null");for(var c=new Array(e.length),l=0,g=0,m=-1,y=0,b=0;b<e.length;)if("\n"===e.charAt(b)||"\r"===e.charAt(b)){if(l>g){if(-1===m)m=l-g;else if(l-g!==m)throw new yn("row lengths do not match");g=l,y++}b++}else if(e.substring(b,b+n.length)===n)b+=n.length,c[l]=!0,l++;else{if(e.substring(b,b+s.length)!==s)throw new yn("illegal character encountered: "+e.substring(b));b+=s.length,c[l]=!1,l++}if(l>g){if(-1===m)m=l-g;else if(l-g!==m)throw new yn("row lengths do not match");y++}for(var P=new i(m,y),B=0;B<l;B++)c[B]&&P.set(Math.floor(B%m),Math.floor(B/m));return P},i.prototype.get=function(e,n){var s=n*this.rowSize+Math.floor(e/32);return!!(this.bits[s]>>>(31&e)&1)},i.prototype.set=function(e,n){var s=n*this.rowSize+Math.floor(e/32);this.bits[s]|=1<<(31&e)&4294967295},i.prototype.unset=function(e,n){var s=n*this.rowSize+Math.floor(e/32);this.bits[s]&=~(1<<(31&e)&4294967295)},i.prototype.flip=function(e,n){var s=n*this.rowSize+Math.floor(e/32);this.bits[s]^=1<<(31&e)&4294967295},i.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new yn("input matrix dimensions do not match");for(var n=new _i(Math.floor(this.width/32)+1),s=this.rowSize,c=this.bits,l=0,g=this.height;l<g;l++)for(var m=l*s,y=e.getRow(l,n).getBitArray(),b=0;b<s;b++)c[m+b]^=y[b]},i.prototype.clear=function(){for(var e=this.bits,n=e.length,s=0;s<n;s++)e[s]=0},i.prototype.setRegion=function(e,n,s,c){if(n<0||e<0)throw new yn("Left and top must be nonnegative");if(c<1||s<1)throw new yn("Height and width must be at least 1");var l=e+s,g=n+c;if(g>this.height||l>this.width)throw new yn("The region must fit inside the matrix");for(var m=this.rowSize,y=this.bits,b=n;b<g;b++)for(var P=b*m,B=e;B<l;B++)y[P+Math.floor(B/32)]|=1<<(31&B)&4294967295},i.prototype.getRow=function(e,n){null==n||n.getSize()<this.width?n=new _i(this.width):n.clear();for(var s=this.rowSize,c=this.bits,l=e*s,g=0;g<s;g++)n.setBulk(32*g,c[l+g]);return n},i.prototype.setRow=function(e,n){Hr.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},i.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),s=new _i(e),c=new _i(e),l=0,g=Math.floor((n+1)/2);l<g;l++)s=this.getRow(l,s),c=this.getRow(n-1-l,c),s.reverse(),c.reverse(),this.setRow(l,c),this.setRow(n-1-l,s)},i.prototype.getEnclosingRectangle=function(){for(var n=this.height,s=this.rowSize,c=this.bits,l=this.width,g=n,m=-1,y=-1,b=0;b<n;b++)for(var P=0;P<s;P++){var B=c[b*s+P];if(0!==B){if(b<g&&(g=b),b>y&&(y=b),32*P<l){for(var z=0;!(B<<31-z&4294967295);)z++;32*P+z<l&&(l=32*P+z)}if(32*P+31>m){for(z=31;!(B>>>z);)z--;32*P+z>m&&(m=32*P+z)}}}return m<l||y<g?null:Int32Array.from([l,g,m-l+1,y-g+1])},i.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,s=0;s<n.length&&0===n[s];)s++;if(s===n.length)return null;for(var c=s/e,l=s%e*32,g=n[s],m=0;!(g<<31-m&4294967295);)m++;return Int32Array.from([l+=m,c])},i.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,s=n.length-1;s>=0&&0===n[s];)s--;if(s<0)return null;for(var c=Math.floor(s/e),l=32*Math.floor(s%e),g=n[s],m=31;!(g>>>m);)m--;return Int32Array.from([l+=m,c])},i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.getRowSize=function(){return this.rowSize},i.prototype.equals=function(e){return e instanceof i&&(this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&Yr.equals(this.bits,e.bits))},i.prototype.hashCode=function(){var e=this.width;return 31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+Yr.hashCode(this.bits)},i.prototype.toString=function(e,n,s){return void 0===e&&(e="X "),void 0===n&&(n="  "),void 0===s&&(s="\n"),this.buildToString(e,n,s)},i.prototype.buildToString=function(e,n,s){for(var c=new gn,l=0,g=this.height;l<g;l++){for(var m=0,y=this.width;m<y;m++)c.append(this.get(m,l)?e:n);c.append(s)}return c.toString()},i.prototype.clone=function(){return new i(this.width,this.height,this.rowSize,this.bits.slice())},i}();var pr=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ke=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return pr(e,i),e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Tn);var Wi=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const os=function(i){function e(n){var s=i.call(this,n)||this;return s.luminances=e.EMPTY,s.buckets=new Int32Array(e.LUMINANCE_BUCKETS),s}return Wi(e,i),e.prototype.getBlackRow=function(n,s){var c=this.getLuminanceSource(),l=c.getWidth();null==s||s.getSize()<l?s=new _i(l):s.clear(),this.initArrays(l);for(var g=c.getRow(n,this.luminances),m=this.buckets,y=0;y<l;y++)m[(255&g[y])>>e.LUMINANCE_SHIFT]++;var b=e.estimateBlackPoint(m);if(l<3)for(y=0;y<l;y++)(255&g[y])<b&&s.set(y);else{var P=255&g[0],B=255&g[1];for(y=1;y<l-1;y++){var z=255&g[y+1];(4*B-P-z)/2<b&&s.set(y),P=B,B=z}}return s},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),s=n.getWidth(),c=n.getHeight(),l=new nr(s,c);this.initArrays(s);for(var g=this.buckets,m=1;m<5;m++)for(var y=Math.floor(c*m/5),b=n.getRow(y,this.luminances),P=Math.floor(4*s/5),B=Math.floor(s/5);B<P;B++)g[(255&b[B])>>e.LUMINANCE_SHIFT]++;var K=e.estimateBlackPoint(g),ae=n.getMatrix();for(m=0;m<c;m++){var ve=m*s;for(B=0;B<s;B++)(255&ae[ve+B])<K&&l.set(B,m)}return l},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var s=this.buckets,c=0;c<e.LUMINANCE_BUCKETS;c++)s[c]=0},e.estimateBlackPoint=function(n){for(var s=n.length,c=0,l=0,g=0,m=0;m<s;m++)n[m]>g&&(l=m,g=n[m]),n[m]>c&&(c=n[m]);var y=0,b=0;for(m=0;m<s;m++){var P=m-l;(B=n[m]*P*P)>b&&(y=m,b=B)}if(l>y){var z=l;l=y,y=z}if(y-l<=s/16)throw new Ke;var K=y-1,ae=-1;for(m=y-1;m>l;m--){var B,ve=m-l;(B=ve*ve*(y-m)*(c-n[m]))>ae&&(K=m,ae=B)}return K<<e.LUMINANCE_SHIFT},e.LUMINANCE_SHIFT=8-(e.LUMINANCE_BITS=5),e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(zc);var Yo=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Mi=function(i){function e(n){var s=i.call(this,n)||this;return s.matrix=null,s}return Yo(e,i),e.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var n=this.getLuminanceSource(),s=n.getWidth(),c=n.getHeight();if(s>=e.MINIMUM_DIMENSION&&c>=e.MINIMUM_DIMENSION){var l=n.getMatrix(),g=s>>e.BLOCK_SIZE_POWER;s&e.BLOCK_SIZE_MASK&&g++;var m=c>>e.BLOCK_SIZE_POWER;c&e.BLOCK_SIZE_MASK&&m++;var y=e.calculateBlackPoints(l,g,m,s,c),b=new nr(s,c);e.calculateThresholdForBlock(l,g,m,s,c,y,b),this.matrix=b}else this.matrix=i.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,s,c,l,g,m,y){for(var b=g-e.BLOCK_SIZE,P=l-e.BLOCK_SIZE,B=0;B<c;B++){var z=B<<e.BLOCK_SIZE_POWER;z>b&&(z=b);for(var K=e.cap(B,2,c-3),ae=0;ae<s;ae++){var ve=ae<<e.BLOCK_SIZE_POWER;ve>P&&(ve=P);for(var Re=e.cap(ae,2,s-3),Ve=0,Pe=-2;Pe<=2;Pe++){var Ye=m[K+Pe];Ve+=Ye[Re-2]+Ye[Re-1]+Ye[Re]+Ye[Re+1]+Ye[Re+2]}e.thresholdBlock(n,ve,z,Ve/25,l,y)}}},e.cap=function(n,s,c){return n<s?s:n>c?c:n},e.thresholdBlock=function(n,s,c,l,g,m){for(var y=0,b=c*g+s;y<e.BLOCK_SIZE;y++,b+=g)for(var P=0;P<e.BLOCK_SIZE;P++)(255&n[b+P])<=l&&m.set(s+P,c+y)},e.calculateBlackPoints=function(n,s,c,l,g){for(var m=g-e.BLOCK_SIZE,y=l-e.BLOCK_SIZE,b=new Array(c),P=0;P<c;P++){b[P]=new Int32Array(s);var B=P<<e.BLOCK_SIZE_POWER;B>m&&(B=m);for(var z=0;z<s;z++){var K=z<<e.BLOCK_SIZE_POWER;K>y&&(K=y);for(var ae=0,ve=255,Re=0,Ve=0,Pe=B*l+K;Ve<e.BLOCK_SIZE;Ve++,Pe+=l){for(var Ye=0;Ye<e.BLOCK_SIZE;Ye++){var st=255&n[Pe+Ye];ae+=st,st<ve&&(ve=st),st>Re&&(Re=st)}if(Re-ve>e.MIN_DYNAMIC_RANGE)for(Ve++,Pe+=l;Ve<e.BLOCK_SIZE;Ve++,Pe+=l)for(Ye=0;Ye<e.BLOCK_SIZE;Ye++)ae+=255&n[Pe+Ye]}var Nt=ae>>2*e.BLOCK_SIZE_POWER;if(Re-ve<=e.MIN_DYNAMIC_RANGE&&(Nt=ve/2,P>0&&z>0)){var Gt=(b[P-1][z]+2*b[P][z-1]+b[P-1][z-1])/4;ve<Gt&&(Nt=Gt)}b[P][z]=Nt}}return b},e.BLOCK_SIZE_MASK=(e.BLOCK_SIZE=1<<(e.BLOCK_SIZE_POWER=3))-1,e.MINIMUM_DIMENSION=5*e.BLOCK_SIZE,e.MIN_DYNAMIC_RANGE=24,e}(os),En=function(){function i(e,n){this.width=e,this.height=n}return i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.isCropSupported=function(){return!1},i.prototype.crop=function(e,n,s,c){throw new W("This luminance source does not support cropping.")},i.prototype.isRotateSupported=function(){return!1},i.prototype.rotateCounterClockwise=function(){throw new W("This luminance source does not support rotation by 90 degrees.")},i.prototype.rotateCounterClockwise45=function(){throw new W("This luminance source does not support rotation by 45 degrees.")},i.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new gn,s=0;s<this.height;s++){for(var c=this.getRow(s,e),l=0;l<this.width;l++){var g=255&c[l];n.append(g<64?"#":g<128?"+":g<192?".":" ")}n.append("\n")}return n.toString()},i}();var bs=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const xs=function(i){function e(n){var s=i.call(this,n.getWidth(),n.getHeight())||this;return s.delegate=n,s}return bs(e,i),e.prototype.getRow=function(n,s){for(var c=this.delegate.getRow(n,s),l=this.getWidth(),g=0;g<l;g++)c[g]=255-(255&c[g]);return c},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(s),l=0;l<s;l++)c[l]=255-(255&n[l]);return c},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,s,c,l){return new e(this.delegate.crop(n,s,c,l))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(En);var qc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),jl=function(i){function e(n){var s=i.call(this,n.width,n.height)||this;return s.canvas=n,s.tempCanvasElement=null,s.buffer=e.makeBufferFromCanvasImageData(n),s}return qc(e,i),e.makeBufferFromCanvasImageData=function(n){var s=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(s.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,s,c){var l=new Uint8ClampedArray(s*c);if(e.FRAME_INDEX=!e.FRAME_INDEX)for(var g=0,m=0,y=n.length;g<y;g+=4,m++){l[m]=0===n[g+3]?255:306*n[g]+601*n[g+1]+117*n[g+2]+512>>10}else{g=0,m=0;for(var ae=n.length;g<ae;g+=4,m++)void 0,l[m]=255-(0===n[g+3]?255:306*n[g]+601*n[g+1]+117*n[g+2]+512>>10)}return l},e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new yn("Requested row is outside the image: "+n);var c=this.getWidth(),l=n*c;return null===s?s=this.buffer.slice(l,l+c):(s.length<c&&(s=new Uint8ClampedArray(c)),s.set(this.buffer.slice(l,l+c))),s},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return i.prototype.crop.call(this,n,s,c,l),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var s=this.getTempCanvasElement(),c=s.getContext("2d"),l=n*e.DEGREE_TO_RADIANS,g=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(l))*g+Math.abs(Math.sin(l))*m),b=Math.ceil(Math.abs(Math.sin(l))*g+Math.abs(Math.cos(l))*m);return s.width=y,s.height=b,c.translate(y/2,b/2),c.rotate(l),c.drawImage(this.canvas,g/-2,m/-2),this.buffer=e.makeBufferFromCanvasImageData(s),this},e.prototype.invert=function(){return new xs(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(En),Md=function(){function i(e,n,s){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=s||void 0}return i.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},i}(),ss=function(i,e,n,s){return new(n||(n=Promise))(function(l,g){function m(P){try{b(s.next(P))}catch(B){g(B)}}function y(P){try{b(s.throw(P))}catch(B){g(B)}}function b(P){P.done?l(P.value):function c(l){return l instanceof n?l:new n(function(g){g(l)})}(P.value).then(m,y)}b((s=s.apply(i,e||[])).next())})},To=function(i,e){var s,c,l,g,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return g={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function m(b){return function(P){return function y(b){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,c&&(l=2&b[0]?c.return:b[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,b[1])).done)return l;switch(c=0,l&&(b=[2&b[0],l.value]),b[0]){case 0:case 1:l=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===b[0]||2===b[0])){n=0;continue}if(3===b[0]&&(!l||b[1]>l[0]&&b[1]<l[3])){n.label=b[1];break}if(6===b[0]&&n.label<l[1]){n.label=l[1],l=b;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(b);break}l[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(i,n)}catch(P){b=[6,P],c=0}finally{s=l=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,P])}}},ia=function(){function i(e,n,s){void 0===n&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(i.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),i.prototype.listVideoInputDevices=function(){return ss(this,void 0,void 0,function(){var e,n,s,c,l,g,B,z;return To(this,function(K){switch(K.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=K.sent(),n=[];try{for(s=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),c=s.next();!c.done;c=s.next())"videoinput"===(g="video"===(l=c.value).kind?"videoinput":l.kind)&&n.push({deviceId:l.deviceId||l.id,label:l.label||"Video device "+(n.length+1),kind:g,groupId:l.groupId})}catch(ae){B={error:ae}}finally{try{c&&!c.done&&(z=s.return)&&z.call(s)}finally{if(B)throw B.error}}return[2,n]}})})},i.prototype.getVideoInputDevices=function(){return ss(this,void 0,void 0,function(){return To(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,n.sent().map(function(s){return new Md(s.deviceId,s.label)})]}})})},i.prototype.findDeviceById=function(e){return ss(this,void 0,void 0,function(){var n;return To(this,function(s){switch(s.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(n=s.sent())?[2,n.find(function(c){return c.deviceId===e})]:[2,null]}})})},i.prototype.decodeFromInputVideoDevice=function(e,n){return ss(this,void 0,void 0,function(){return To(this,function(s){switch(s.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,s.sent()]}})})},i.prototype.decodeOnceFromVideoDevice=function(e,n){return ss(this,void 0,void 0,function(){return To(this,function(l){switch(l.label){case 0:return this.reset(),[4,this.decodeOnceFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n)];case 1:return[2,l.sent()]}})})},i.prototype.decodeOnceFromConstraints=function(e,n){return ss(this,void 0,void 0,function(){var s;return To(this,function(c){switch(c.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return s=c.sent(),[4,this.decodeOnceFromStream(s,n)];case 2:return[2,c.sent()]}})})},i.prototype.decodeOnceFromStream=function(e,n){return ss(this,void 0,void 0,function(){var s;return To(this,function(l){switch(l.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return s=l.sent(),[4,this.decodeOnce(s)];case 2:return[2,l.sent()]}})})},i.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,s){return ss(this,void 0,void 0,function(){return To(this,function(c){switch(c.label){case 0:return[4,this.decodeFromVideoDevice(e,n,s)];case 1:return[2,c.sent()]}})})},i.prototype.decodeFromVideoDevice=function(e,n,s){return ss(this,void 0,void 0,function(){return To(this,function(g){switch(g.label){case 0:return[4,this.decodeFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n,s)];case 1:return[2,g.sent()]}})})},i.prototype.decodeFromConstraints=function(e,n,s){return ss(this,void 0,void 0,function(){var c;return To(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return c=l.sent(),[4,this.decodeFromStream(c,n,s)];case 2:return[2,l.sent()]}})})},i.prototype.decodeFromStream=function(e,n,s){return ss(this,void 0,void 0,function(){var c;return To(this,function(l){switch(l.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return c=l.sent(),[4,this.decodeContinuously(c,s)];case 2:return[2,l.sent()]}})})},i.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},i.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},i.prototype.attachStreamToVideo=function(e,n){return ss(this,void 0,void 0,function(){var s;return To(this,function(c){switch(c.label){case 0:return s=this.prepareVideoElement(n),this.addVideoSource(s,e),this.videoElement=s,this.stream=e,[4,this.playVideoOnLoadAsync(s)];case 1:return c.sent(),[2,s]}})})},i.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(s,c){return n.playVideoOnLoad(e,function(){return s()})})},i.prototype.playVideoOnLoad=function(e,n){var s=this;this.videoEndedListener=function(){return s.stopStreams()},this.videoCanPlayListener=function(){return s.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},i.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},i.prototype.tryPlayVideo=function(e){return ss(this,void 0,void 0,function(){return To(this,function(s){switch(s.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.play()];case 2:return s.sent(),[3,4];case 3:return s.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},i.prototype.getMediaElement=function(e,n){var s=document.getElementById(e);if(!s)throw new qr("element with id '"+e+"' not found");if(s.nodeName.toLowerCase()!==n.toLowerCase())throw new qr("element with id '"+e+"' must be an "+n+" element");return s},i.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new qr("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},i.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new qr("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},i.prototype.decodeFromVideoContinuously=function(e,n,s){if(void 0===e&&void 0===n)throw new qr("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,s):this.decodeFromVideoElementContinuously(e,s)},i.prototype.decodeFromImageElement=function(e){if(!e)throw new qr("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);return this.imageElement=n,this.isImageLoaded(n)?this.decodeOnce(n,!1,!0):this._decodeOnLoadImage(n)},i.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},i.prototype.decodeFromVideoElementContinuously=function(e,n){var s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(s,n)},i.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new qr("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},i.prototype.decodeFromImageUrl=function(e){if(!e)throw new qr("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var s=this._decodeOnLoadImage(n);return n.src=e,s},i.prototype.decodeFromVideoUrl=function(e){if(!e)throw new qr("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),s=this.decodeFromVideoElement(n);return n.src=e,s},i.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new qr("An URL must be provided.");this.reset();var s=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(s,n);return s.src=e,c},i.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(s,c){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(s,c)},e.addEventListener("load",n.imageLoadedListener)})},i.prototype._decodeOnLoadVideo=function(e){return ss(this,void 0,void 0,function(){return To(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},i.prototype._decodeOnLoadVideoContinuously=function(e,n){return ss(this,void 0,void 0,function(){return To(this,function(s){switch(s.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return s.sent(),this.decodeContinuously(e,n),[2]}})})},i.prototype.isImageLoaded=function(e){return!(!e.complete||0===e.naturalWidth)},i.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&((n=document.createElement("img")).width=200,n.height=200),"string"==typeof e&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},i.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&((n=document.createElement("video")).width=200,n.height=200),"string"==typeof e&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},i.prototype.decodeOnce=function(e,n,s){var c=this;void 0===n&&(n=!0),void 0===s&&(s=!0),this._stopAsyncDecode=!1;var l=function(g,m){if(c._stopAsyncDecode)return m(new Ke("Video stream has ended before any code could be detected.")),void(c._stopAsyncDecode=void 0);try{g(c.decode(e))}catch(z){if(n&&z instanceof Ke||(z instanceof mi||z instanceof Jt)&&s)return setTimeout(l,c._timeBetweenDecodingAttempts,g,m);m(z)}};return new Promise(function(g,m){return l(g,m)})},i.prototype.decodeContinuously=function(e,n){var s=this;this._stopContinuousDecode=!1;var c=function(){if(s._stopContinuousDecode)s._stopContinuousDecode=void 0;else try{var l=s.decode(e);n(l,null),setTimeout(c,s.timeBetweenScansMillis)}catch(y){n(null,y),(y instanceof mi||y instanceof Jt||y instanceof Ke)&&setTimeout(c,s._timeBetweenDecodingAttempts)}};c()},i.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},i.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var s=this.getCaptureCanvas(e),c=new jl(s),l=new Mi(c);return new vu(l)},i.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),s=void 0;try{s=n.getContext("2d",{willReadFrequently:!0})}catch{s=n.getContext("2d")}this.captureCanvasContext=s}return this.captureCanvasContext},i.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},i.prototype.drawFrameOnCanvas=function(e,n,s){void 0===n&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),void 0===s&&(s=this.captureCanvasContext),s.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},i.prototype.drawImageOnCanvas=function(e,n,s){void 0===n&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),void 0===s&&(s=this.captureCanvasContext),s.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},i.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},i.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var s,c,n=document.createElement("canvas");return typeof e<"u"&&(e instanceof HTMLVideoElement?(s=e.videoWidth,c=e.videoHeight):e instanceof HTMLImageElement&&(s=e.naturalWidth||e.width,c=e.naturalHeight||e.height)),n.style.width=s+"px",n.style.height=c+"px",n.width=s,n.height=c,n},i.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},i.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},i.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},i.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},i.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},i.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},i.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},i}();const qi=function(){function i(e,n,s,c,l,g){void 0===s&&(s=null==n?0:8*n.length),void 0===g&&(g=Hr.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=s,this.resultPoints=c,this.format=l,this.timestamp=g,this.text=e,this.rawBytes=n,this.numBits=null==s?null==n?0:8*n.length:s,this.resultPoints=c,this.format=l,this.resultMetadata=null,this.timestamp=null==g?Hr.currentTimeMillis():g}return i.prototype.getText=function(){return this.text},i.prototype.getRawBytes=function(){return this.rawBytes},i.prototype.getNumBits=function(){return this.numBits},i.prototype.getResultPoints=function(){return this.resultPoints},i.prototype.getBarcodeFormat=function(){return this.format},i.prototype.getResultMetadata=function(){return this.resultMetadata},i.prototype.putMetadata=function(e,n){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},i.prototype.putAllMetadata=function(e){null!==e&&(this.resultMetadata=null===this.resultMetadata?e:new Map(e))},i.prototype.addResultPoints=function(e){var n=this.resultPoints;if(null===n)this.resultPoints=e;else if(null!==e&&e.length>0){var s=new Array(n.length+e.length);Hr.arraycopy(n,0,s,0,n.length),Hr.arraycopy(e,0,s,n.length,e.length),this.resultPoints=s}},i.prototype.getTimestamp=function(){return this.timestamp},i.prototype.toString=function(){return this.text},i}();var qu=function(i){return i[i.AZTEC=0]="AZTEC",i[i.CODABAR=1]="CODABAR",i[i.CODE_39=2]="CODE_39",i[i.CODE_93=3]="CODE_93",i[i.CODE_128=4]="CODE_128",i[i.DATA_MATRIX=5]="DATA_MATRIX",i[i.EAN_8=6]="EAN_8",i[i.EAN_13=7]="EAN_13",i[i.ITF=8]="ITF",i[i.MAXICODE=9]="MAXICODE",i[i.PDF_417=10]="PDF_417",i[i.QR_CODE=11]="QR_CODE",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",i}(qu||{});const dn=qu;var ka=function(i){return i[i.OTHER=0]="OTHER",i[i.ORIENTATION=1]="ORIENTATION",i[i.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",i[i.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",i[i.ISSUE_NUMBER=4]="ISSUE_NUMBER",i[i.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",i[i.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",i[i.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",i[i.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",i[i.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",i[i.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",i}(ka||{});const Zi=ka,Iu=function(){function i(e,n,s,c,l,g){void 0===l&&(l=-1),void 0===g&&(g=-1),this.rawBytes=e,this.text=n,this.byteSegments=s,this.ecLevel=c,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=g,this.numBits=null==e?0:8*e.length}return i.prototype.getRawBytes=function(){return this.rawBytes},i.prototype.getNumBits=function(){return this.numBits},i.prototype.setNumBits=function(e){this.numBits=e},i.prototype.getText=function(){return this.text},i.prototype.getByteSegments=function(){return this.byteSegments},i.prototype.getECLevel=function(){return this.ecLevel},i.prototype.getErrorsCorrected=function(){return this.errorsCorrected},i.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},i.prototype.getErasures=function(){return this.erasures},i.prototype.setErasures=function(e){this.erasures=e},i.prototype.getOther=function(){return this.other},i.prototype.setOther=function(e){this.other=e},i.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},i.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},i.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},i}(),Au=function(){function i(){}return i.prototype.exp=function(e){return this.expTable[e]},i.prototype.log=function(e){if(0===e)throw new yn;return this.logTable[e]},i.addOrSubtract=function(e,n){return e^n},i}(),Ja=function(){function i(e,n){if(0===n.length)throw new yn;this.field=e;var s=n.length;if(s>1&&0===n[0]){for(var c=1;c<s&&0===n[c];)c++;c===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-c),Hr.arraycopy(n,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return i.prototype.getCoefficients=function(){return this.coefficients},i.prototype.getDegree=function(){return this.coefficients.length-1},i.prototype.isZero=function(){return 0===this.coefficients[0]},i.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},i.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var s,n=this.coefficients;if(1===e){s=0;for(var c=0,l=n.length;c!==l;c++)s=Au.addOrSubtract(s,n[c]);return s}s=n[0];var m=n.length,y=this.field;for(c=1;c<m;c++)s=Au.addOrSubtract(y.multiply(e,s),n[c]);return s},i.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new yn("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,s=e.coefficients;if(n.length>s.length){var c=n;n=s,s=c}var l=new Int32Array(s.length),g=s.length-n.length;Hr.arraycopy(s,0,l,0,g);for(var m=g;m<s.length;m++)l[m]=Au.addOrSubtract(n[m-g],s[m]);return new i(this.field,l)},i.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new yn("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,s=n.length,c=e.coefficients,l=c.length,g=new Int32Array(s+l-1),m=this.field,y=0;y<s;y++)for(var b=n[y],P=0;P<l;P++)g[y+P]=Au.addOrSubtract(g[y+P],m.multiply(b,c[P]));return new i(m,g)},i.prototype.multiplyScalar=function(e){if(0===e)return this.field.getZero();if(1===e)return this;for(var n=this.coefficients.length,s=this.field,c=new Int32Array(n),l=this.coefficients,g=0;g<n;g++)c[g]=s.multiply(l[g],e);return new i(s,c)},i.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new yn;if(0===n)return this.field.getZero();for(var s=this.coefficients,c=s.length,l=new Int32Array(c+e),g=this.field,m=0;m<c;m++)l[m]=g.multiply(s[m],n);return new i(g,l)},i.prototype.divide=function(e){if(!this.field.equals(e.field))throw new yn("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new yn("Divide by 0");for(var n=this.field,s=n.getZero(),c=this,l=e.getCoefficient(e.getDegree()),g=n.inverse(l);c.getDegree()>=e.getDegree()&&!c.isZero();){var m=c.getDegree()-e.getDegree(),y=n.multiply(c.getCoefficient(c.getDegree()),g),b=e.multiplyByMonomial(m,y),P=n.buildMonomial(m,y);s=s.addOrSubtract(P),c=c.addOrSubtract(b)}return[s,c]},i.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var s=this.getCoefficient(n);if(0!==s){if(s<0?(e+=" - ",s=-s):e.length>0&&(e+=" + "),0===n||1!==s){var c=this.field.log(s);0===c?e+="1":1===c?e+="a":(e+="a^",e+=c)}0!==n&&(1===n?e+="x":(e+="x^",e+=n))}}return e},i}();var vi=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Kc=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return vi(e,i),e.kind="ArithmeticException",e}(Tn);var _o=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const hi=function(i){function e(n,s,c){var l=i.call(this)||this;l.primitive=n,l.size=s,l.generatorBase=c;for(var g=new Int32Array(s),m=1,y=0;y<s;y++)g[y]=m,(m*=2)>=s&&(m^=n,m&=s-1);l.expTable=g;var b=new Int32Array(s);for(y=0;y<s-1;y++)b[g[y]]=y;return l.logTable=b,l.zero=new Ja(l,Int32Array.from([0])),l.one=new Ja(l,Int32Array.from([1])),l}return _o(e,i),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,s){if(n<0)throw new yn;if(0===s)return this.zero;var c=new Int32Array(n+1);return c[0]=s,new Ja(this,c)},e.prototype.inverse=function(n){if(0===n)throw new Kc;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,s){return 0===n||0===s?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ar.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Au);var Fr=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Xu=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Fr(e,i),e.kind="ReedSolomonException",e}(Tn);var $l=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Zo=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return $l(e,i),e.kind="IllegalStateException",e}(Tn),Fa=function(){function i(e){this.field=e}return i.prototype.decode=function(e,n){for(var s=this.field,c=new Ja(s,e),l=new Int32Array(n),g=!0,m=0;m<n;m++){var y=c.evaluateAt(s.exp(m+s.getGeneratorBase()));l[l.length-1-m]=y,0!==y&&(g=!1)}if(!g){var b=new Ja(s,l),P=this.runEuclideanAlgorithm(s.buildMonomial(n,1),b,n),z=P[1],K=this.findErrorLocations(P[0]),ae=this.findErrorMagnitudes(z,K);for(m=0;m<K.length;m++){var ve=e.length-1-s.log(K[m]);if(ve<0)throw new Xu("Bad error location");e[ve]=hi.addOrSubtract(e[ve],ae[m])}}},i.prototype.runEuclideanAlgorithm=function(e,n,s){if(e.getDegree()<n.getDegree()){var c=e;e=n,n=c}for(var l=this.field,g=e,m=n,y=l.getZero(),b=l.getOne();m.getDegree()>=(s/2|0);){var P=g,B=y;if(y=b,(g=m).isZero())throw new Xu("r_{i-1} was zero");m=P;for(var z=l.getZero(),K=g.getCoefficient(g.getDegree()),ae=l.inverse(K);m.getDegree()>=g.getDegree()&&!m.isZero();){var ve=m.getDegree()-g.getDegree(),Re=l.multiply(m.getCoefficient(m.getDegree()),ae);z=z.addOrSubtract(l.buildMonomial(ve,Re)),m=m.addOrSubtract(g.multiplyByMonomial(ve,Re))}if(b=z.multiply(y).addOrSubtract(B),m.getDegree()>=g.getDegree())throw new Zo("Division algorithm failed to reduce polynomial?")}var Ve=b.getCoefficient(0);if(0===Ve)throw new Xu("sigmaTilde(0) was zero");var Pe=l.inverse(Ve);return[b.multiplyScalar(Pe),m.multiplyScalar(Pe)]},i.prototype.findErrorLocations=function(e){var n=e.getDegree();if(1===n)return Int32Array.from([e.getCoefficient(1)]);for(var s=new Int32Array(n),c=0,l=this.field,g=1;g<l.getSize()&&c<n;g++)0===e.evaluateAt(g)&&(s[c]=l.inverse(g),c++);if(c!==n)throw new Xu("Error locator degree does not match number of roots");return s},i.prototype.findErrorMagnitudes=function(e,n){for(var s=n.length,c=new Int32Array(s),l=this.field,g=0;g<s;g++){for(var m=l.inverse(n[g]),y=1,b=0;b<s;b++)if(g!==b){var P=l.multiply(n[b],m);y=l.multiply(y,1&P?-2&P:1|P)}c[g]=l.multiply(e.evaluateAt(m),l.inverse(y)),0!==l.getGeneratorBase()&&(c[g]=l.multiply(c[g],m))}return c},i}();var Ji=function(i){return i[i.UPPER=0]="UPPER",i[i.LOWER=1]="LOWER",i[i.MIXED=2]="MIXED",i[i.DIGIT=3]="DIGIT",i[i.PUNCT=4]="PUNCT",i[i.BINARY=5]="BINARY",i}(Ji||{});const Qu=function(){function i(){}return i.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),s=this.extractBits(n),c=this.correctBits(s),l=i.convertBoolArrayToByteArray(c),g=i.getEncodedData(c),m=new Iu(l,g,null,null);return m.setNumBits(c.length),m},i.highLevelDecode=function(e){return this.getEncodedData(e)},i.getEncodedData=function(e){for(var n=e.length,s=Ji.UPPER,c=Ji.UPPER,l="",g=0;g<n;)if(c===Ji.BINARY){if(n-g<5)break;var m=i.readCode(e,g,5);if(g+=5,0===m){if(n-g<11)break;m=i.readCode(e,g,11)+31,g+=11}for(var y=0;y<m;y++){if(n-g<8){g=n;break}var b=i.readCode(e,g,8);l+=mt.castAsNonUtf8Char(b),g+=8}c=s}else{var P=c===Ji.DIGIT?4:5;if(n-g<P)break;b=i.readCode(e,g,P),g+=P;var B=i.getCharacter(c,b);B.startsWith("CTRL_")?(s=c,c=i.getTable(B.charAt(5)),"L"===B.charAt(6)&&(s=c)):(l+=B,c=s)}return l},i.getTable=function(e){switch(e){case"L":return Ji.LOWER;case"P":return Ji.PUNCT;case"M":return Ji.MIXED;case"D":return Ji.DIGIT;case"B":return Ji.BINARY;default:return Ji.UPPER}},i.getCharacter=function(e,n){switch(e){case Ji.UPPER:return i.UPPER_TABLE[n];case Ji.LOWER:return i.LOWER_TABLE[n];case Ji.MIXED:return i.MIXED_TABLE[n];case Ji.PUNCT:return i.PUNCT_TABLE[n];case Ji.DIGIT:return i.DIGIT_TABLE[n];default:throw new Zo("Bad table")}},i.prototype.correctBits=function(e){var n,s;this.ddata.getNbLayers()<=2?(s=6,n=hi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,n=hi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,n=hi.AZTEC_DATA_10):(s=12,n=hi.AZTEC_DATA_12);var c=this.ddata.getNbDatablocks(),l=e.length/s;if(l<c)throw new Jt;for(var g=e.length%s,m=new Int32Array(l),y=0;y<l;y++,g+=s)m[y]=i.readCode(e,g,s);try{new Fa(n).decode(m,l-c)}catch(Re){throw new Jt(Re)}var P=(1<<s)-1,B=0;for(y=0;y<c;y++){if(0===(z=m[y])||z===P)throw new Jt;(1===z||z===P-1)&&B++}var K=new Array(c*s-B),ae=0;for(y=0;y<c;y++){var z;if(1===(z=m[y])||z===P-1)K.fill(z>1,ae,ae+s-1),ae+=s-1;else for(var ve=s-1;ve>=0;--ve)K[ae++]=!!(z&1<<ve)}return K},i.prototype.extractBits=function(e){var n=this.ddata.isCompact(),s=this.ddata.getNbLayers(),c=(n?11:14)+4*s,l=new Int32Array(c),g=new Array(this.totalBitsInLayer(s,n));if(n)for(var m=0;m<l.length;m++)l[m]=m;else{var y=c+1+2*ar.truncDivision(ar.truncDivision(c,2)-1,15),b=c/2,P=ar.truncDivision(y,2);for(m=0;m<b;m++){var B=m+ar.truncDivision(m,15);l[b-m-1]=P-B-1,l[b+m]=P+B+1}}m=0;for(var z=0;m<s;m++){for(var K=4*(s-m)+(n?9:12),ae=2*m,ve=c-1-ae,Re=0;Re<K;Re++)for(var Ve=2*Re,Pe=0;Pe<2;Pe++)g[z+Ve+Pe]=e.get(l[ae+Pe],l[ae+Re]),g[z+2*K+Ve+Pe]=e.get(l[ae+Re],l[ve-Pe]),g[z+4*K+Ve+Pe]=e.get(l[ve-Pe],l[ve-Re]),g[z+6*K+Ve+Pe]=e.get(l[ve-Re],l[ae+Pe]);z+=8*K}return g},i.readCode=function(e,n,s){for(var c=0,l=n;l<n+s;l++)c<<=1,e[l]&&(c|=1);return c},i.readByte=function(e,n){var s=e.length-n;return s>=8?i.readCode(e,n,8):i.readCode(e,n,s)<<8-s},i.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),s=0;s<n.length;s++)n[s]=i.readByte(e,8*s);return n},i.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},i.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],i.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],i.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],i.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],i.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],i}(),Ar=function(){function i(){}return i.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},i.distance=function(e,n,s,c){var l=e-s,g=n-c;return Math.sqrt(l*l+g*g)},i.sum=function(e){for(var n=0,s=0,c=e.length;s!==c;s++)n+=e[s];return n},i}(),gl=function(){function i(){}return i.floatToIntBits=function(e){return e},i.MAX_VALUE=Number.MAX_SAFE_INTEGER,i}(),_n=function(){function i(e,n){this.x=e,this.y=n}return i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.equals=function(e){return e instanceof i&&(this.x===e.x&&this.y===e.y)},i.prototype.hashCode=function(){return 31*gl.floatToIntBits(this.x)+gl.floatToIntBits(this.y)},i.prototype.toString=function(){return"("+this.x+","+this.y+")"},i.orderBestPatterns=function(e){var l,g,m,n=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),c=this.distance(e[0],e[2]);if(s>=n&&s>=c?(g=e[0],l=e[1],m=e[2]):c>=s&&c>=n?(g=e[1],l=e[0],m=e[2]):(g=e[2],l=e[0],m=e[1]),this.crossProductZ(l,g,m)<0){var y=l;l=m,m=y}e[0]=l,e[1]=g,e[2]=m},i.distance=function(e,n){return Ar.distance(e.x,e.y,n.x,n.y)},i.crossProductZ=function(e,n,s){var c=n.x,l=n.y;return(s.x-c)*(e.y-l)-(s.y-l)*(e.x-c)},i}(),ml=function(){function i(e,n){this.bits=e,this.points=n}return i.prototype.getBits=function(){return this.bits},i.prototype.getPoints=function(){return this.points},i}();var La=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const _a=function(i){function e(n,s,c,l,g){var m=i.call(this,n,s)||this;return m.compact=c,m.nbDatablocks=l,m.nbLayers=g,m}return La(e,i),e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(ml),Nd=function(){function i(e,n,s,c){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==n&&(n=i.INIT_SIZE),null==s&&(s=e.getWidth()/2|0),null==c&&(c=e.getHeight()/2|0);var l=n/2|0;if(this.leftInit=s-l,this.rightInit=s+l,this.upInit=c-l,this.downInit=c+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Ke}return i.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,s=this.upInit,c=this.downInit,l=!1,g=!0,m=!1,y=!1,b=!1,P=!1,B=!1,z=this.width,K=this.height;g;){g=!1;for(var ae=!0;(ae||!y)&&n<z;)(ae=this.containsBlackPoint(s,c,n,!1))?(n++,g=!0,y=!0):y||n++;if(n>=z){l=!0;break}for(var ve=!0;(ve||!b)&&c<K;)(ve=this.containsBlackPoint(e,n,c,!0))?(c++,g=!0,b=!0):b||c++;if(c>=K){l=!0;break}for(var Re=!0;(Re||!P)&&e>=0;)(Re=this.containsBlackPoint(s,c,e,!1))?(e--,g=!0,P=!0):P||e--;if(e<0){l=!0;break}for(var Ve=!0;(Ve||!B)&&s>=0;)(Ve=this.containsBlackPoint(e,n,s,!0))?(s--,g=!0,B=!0):B||s--;if(s<0){l=!0;break}g&&(m=!0)}if(!l&&m){for(var Pe=n-e,Ye=null,st=1;null===Ye&&st<Pe;st++)Ye=this.getBlackPointOnSegment(e,c-st,e+st,c);if(null==Ye)throw new Ke;var Nt=null;for(st=1;null===Nt&&st<Pe;st++)Nt=this.getBlackPointOnSegment(e,s+st,e+st,s);if(null==Nt)throw new Ke;var Gt=null;for(st=1;null===Gt&&st<Pe;st++)Gt=this.getBlackPointOnSegment(n,s+st,n-st,s);if(null==Gt)throw new Ke;var Qt=null;for(st=1;null===Qt&&st<Pe;st++)Qt=this.getBlackPointOnSegment(n,c-st,n-st,c);if(null==Qt)throw new Ke;return this.centerEdges(Qt,Ye,Gt,Nt)}throw new Ke},i.prototype.getBlackPointOnSegment=function(e,n,s,c){for(var l=Ar.round(Ar.distance(e,n,s,c)),g=(s-e)/l,m=(c-n)/l,y=this.image,b=0;b<l;b++){var P=Ar.round(e+b*g),B=Ar.round(n+b*m);if(y.get(P,B))return new _n(P,B)}return null},i.prototype.centerEdges=function(e,n,s,c){var l=e.getX(),g=e.getY(),m=n.getX(),y=n.getY(),b=s.getX(),P=s.getY(),B=c.getX(),z=c.getY(),K=i.CORR;return l<this.width/2?[new _n(B-K,z+K),new _n(m+K,y+K),new _n(b-K,P-K),new _n(l+K,g-K)]:[new _n(B+K,z+K),new _n(m+K,y-K),new _n(b-K,P+K),new _n(l-K,g-K)]},i.prototype.containsBlackPoint=function(e,n,s,c){var l=this.image;if(c){for(var g=e;g<=n;g++)if(l.get(g,s))return!0}else for(var m=e;m<=n;m++)if(l.get(s,m))return!0;return!1},i.INIT_SIZE=10,i.CORR=1,i}(),_l=function(){function i(){}return i.checkAndNudgePoints=function(e,n){for(var s=e.getWidth(),c=e.getHeight(),l=!0,g=0;g<n.length&&l;g+=2){var m=Math.floor(n[g]),y=Math.floor(n[g+1]);if(m<-1||m>s||y<-1||y>c)throw new Ke;l=!1,-1===m?(n[g]=0,l=!0):m===s&&(n[g]=s-1,l=!0),-1===y?(n[g+1]=0,l=!0):y===c&&(n[g+1]=c-1,l=!0)}for(l=!0,g=n.length-2;g>=0&&l;g-=2){if(m=Math.floor(n[g]),y=Math.floor(n[g+1]),m<-1||m>s||y<-1||y>c)throw new Ke;l=!1,-1===m?(n[g]=0,l=!0):m===s&&(n[g]=s-1,l=!0),-1===y?(n[g+1]=0,l=!0):y===c&&(n[g+1]=c-1,l=!0)}},i}(),Xc=function(){function i(e,n,s,c,l,g,m,y,b){this.a11=e,this.a21=n,this.a31=s,this.a12=c,this.a22=l,this.a32=g,this.a13=m,this.a23=y,this.a33=b}return i.quadrilateralToQuadrilateral=function(e,n,s,c,l,g,m,y,b,P,B,z,K,ae,ve,Re){var Ve=i.quadrilateralToSquare(e,n,s,c,l,g,m,y);return i.squareToQuadrilateral(b,P,B,z,K,ae,ve,Re).times(Ve)},i.prototype.transformPoints=function(e){for(var n=e.length,s=this.a11,c=this.a12,l=this.a13,g=this.a21,m=this.a22,y=this.a23,b=this.a31,P=this.a32,B=this.a33,z=0;z<n;z+=2){var K=e[z],ae=e[z+1],ve=l*K+y*ae+B;e[z]=(s*K+g*ae+b)/ve,e[z+1]=(c*K+m*ae+P)/ve}},i.prototype.transformPointsWithValues=function(e,n){for(var s=this.a11,c=this.a12,l=this.a13,g=this.a21,m=this.a22,y=this.a23,b=this.a31,P=this.a32,B=this.a33,z=e.length,K=0;K<z;K++){var ae=e[K],ve=n[K],Re=l*ae+y*ve+B;e[K]=(s*ae+g*ve+b)/Re,n[K]=(c*ae+m*ve+P)/Re}},i.squareToQuadrilateral=function(e,n,s,c,l,g,m,y){var b=e-s+l-m,P=n-c+g-y;if(0===b&&0===P)return new i(s-e,l-s,e,c-n,g-c,n,0,0,1);var B=s-l,z=m-l,K=c-g,ae=y-g,ve=B*ae-z*K,Re=(b*ae-z*P)/ve,Ve=(B*P-b*K)/ve;return new i(s-e+Re*s,m-e+Ve*m,e,c-n+Re*c,y-n+Ve*y,n,Re,Ve,1)},i.quadrilateralToSquare=function(e,n,s,c,l,g,m,y){return i.squareToQuadrilateral(e,n,s,c,l,g,m,y).buildAdjoint()},i.prototype.buildAdjoint=function(){return new i(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},i.prototype.times=function(e){return new i(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},i}();var xu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const U=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return xu(e,i),e.prototype.sampleGrid=function(n,s,c,l,g,m,y,b,P,B,z,K,ae,ve,Re,Ve,Pe,Ye,st){var Nt=Xc.quadrilateralToQuadrilateral(l,g,m,y,b,P,B,z,K,ae,ve,Re,Ve,Pe,Ye,st);return this.sampleGridWithTransform(n,s,c,Nt)},e.prototype.sampleGridWithTransform=function(n,s,c,l){if(s<=0||c<=0)throw new Ke;for(var g=new nr(s,c),m=new Float32Array(2*s),y=0;y<c;y++){for(var b=m.length,P=y+.5,B=0;B<b;B+=2)m[B]=B/2+.5,m[B+1]=P;l.transformPoints(m),_l.checkAndNudgePoints(n,m);try{for(B=0;B<b;B+=2)n.get(Math.floor(m[B]),Math.floor(m[B+1]))&&g.set(B/2,y)}catch{throw new Ke}}return g},e}(_l),j=function(){function i(){}return i.setGridSampler=function(e){i.gridSampler=e},i.getInstance=function(){return i.gridSampler},i.gridSampler=new U,i}();var X=function(){function i(e,n){this.x=e,this.y=n}return i.prototype.toResultPoint=function(){return new _n(this.getX(),this.getY())},i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i}();const Ie=function(){function i(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return i.prototype.detect=function(){return this.detectMirror(!1)},i.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),s=this.getBullsEyeCorners(n);if(e){var c=s[0];s[0]=s[2],s[2]=c}this.extractParameters(s);var l=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),g=this.getMatrixCornerPoints(s);return new _a(l,g,this.compact,this.nbDataBlocks,this.nbLayers)},i.prototype.extractParameters=function(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new Ke;var n=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(s,n);for(var c=0,l=0;l<4;l++){var g=s[(this.shift+l)%4];this.compact?(c<<=7,c+=g>>1&127):(c<<=10,c+=(g>>2&992)+(g>>1&31))}var m=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=1+(m>>6),this.nbDataBlocks=1+(63&m)):(this.nbLayers=1+(m>>11),this.nbDataBlocks=1+(2047&m))},i.prototype.getRotation=function(e,n){var s=0;e.forEach(function(l,g,m){s=(l>>n-2<<1)+(1&l)+(s<<3)}),s=((1&s)<<11)+(s>>1);for(var c=0;c<4;c++)if(ar.bitCount(s^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new Ke},i.prototype.getCorrectedParameterData=function(e,n){var s,c;n?(s=7,c=2):(s=10,c=4);for(var l=s-c,g=new Int32Array(s),m=s-1;m>=0;--m)g[m]=15&e,e>>=4;try{new Fa(hi.AZTEC_PARAM).decode(g,l)}catch{throw new Ke}var b=0;for(m=0;m<c;m++)b=(b<<4)+g[m];return b},i.prototype.getBullsEyeCorners=function(e){var n=e,s=e,c=e,l=e,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var m=this.getFirstDifferent(n,g,1,-1),y=this.getFirstDifferent(s,g,1,1),b=this.getFirstDifferent(c,g,-1,1),P=this.getFirstDifferent(l,g,-1,-1);if(this.nbCenterLayers>2){var B=this.distancePoint(P,m)*this.nbCenterLayers/(this.distancePoint(l,n)*(this.nbCenterLayers+2));if(B<.75||B>1.25||!this.isWhiteOrBlackRectangle(m,y,b,P))break}n=m,s=y,c=b,l=P,g=!g}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new Ke;this.compact=5===this.nbCenterLayers;var z=new _n(n.getX()+.5,n.getY()-.5),K=new _n(s.getX()+.5,s.getY()+.5),ae=new _n(c.getX()-.5,c.getY()+.5),ve=new _n(l.getX()-.5,l.getY()-.5);return this.expandSquare([z,K,ae,ve],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},i.prototype.getMatrixCenter=function(){var e,n,s,c;try{e=(l=new Nd(this.image).detect())[0],n=l[1],s=l[2],c=l[3]}catch{var g=this.image.getWidth()/2,m=this.image.getHeight()/2;e=this.getFirstDifferent(new X(g+7,m-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new X(g+7,m+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new X(g-7,m+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new X(g-7,m-7),!1,-1,-1).toResultPoint()}var y=Ar.round((e.getX()+c.getX()+n.getX()+s.getX())/4),b=Ar.round((e.getY()+c.getY()+n.getY()+s.getY())/4);try{var l;e=(l=new Nd(this.image,15,y,b).detect())[0],n=l[1],s=l[2],c=l[3]}catch{e=this.getFirstDifferent(new X(y+7,b-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new X(y+7,b+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new X(y-7,b+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new X(y-7,b-7),!1,-1,-1).toResultPoint()}return y=Ar.round((e.getX()+c.getX()+n.getX()+s.getX())/4),b=Ar.round((e.getY()+c.getY()+n.getY()+s.getY())/4),new X(y,b)},i.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},i.prototype.sampleGrid=function(e,n,s,c,l){var g=j.getInstance(),m=this.getDimension(),y=m/2-this.nbCenterLayers,b=m/2+this.nbCenterLayers;return g.sampleGrid(e,m,m,y,y,b,y,b,b,y,b,n.getX(),n.getY(),s.getX(),s.getY(),c.getX(),c.getY(),l.getX(),l.getY())},i.prototype.sampleLine=function(e,n,s){for(var c=0,l=this.distanceResultPoint(e,n),g=l/s,m=e.getX(),y=e.getY(),b=g*(n.getX()-e.getX())/l,P=g*(n.getY()-e.getY())/l,B=0;B<s;B++)this.image.get(Ar.round(m+B*b),Ar.round(y+B*P))&&(c|=1<<s-B-1);return c},i.prototype.isWhiteOrBlackRectangle=function(e,n,s,c){e=new X(e.getX()-3,e.getY()+3),n=new X(n.getX()-3,n.getY()-3),s=new X(s.getX()+3,s.getY()-3),c=new X(c.getX()+3,c.getY()+3);var g=this.getColor(c,e);if(0===g)return!1;var m=this.getColor(e,n);return m===g&&(m=this.getColor(n,s))===g&&(m=this.getColor(s,c))===g},i.prototype.getColor=function(e,n){for(var s=this.distancePoint(e,n),c=(n.getX()-e.getX())/s,l=(n.getY()-e.getY())/s,g=0,m=e.getX(),y=e.getY(),b=this.image.get(e.getX(),e.getY()),P=Math.ceil(s),B=0;B<P;B++)y+=l,this.image.get(Ar.round(m+=c),Ar.round(y))!==b&&g++;var z=g/s;return z>.1&&z<.9?0:z<=.1===b?1:-1},i.prototype.getFirstDifferent=function(e,n,s,c){for(var l=e.getX()+s,g=e.getY()+c;this.isValid(l,g)&&this.image.get(l,g)===n;)l+=s,g+=c;for(l-=s,g-=c;this.isValid(l,g)&&this.image.get(l,g)===n;)l+=s;for(l-=s;this.isValid(l,g)&&this.image.get(l,g)===n;)g+=c;return new X(l,g-=c)},i.prototype.expandSquare=function(e,n,s){var c=s/(2*n),l=e[0].getX()-e[2].getX(),g=e[0].getY()-e[2].getY(),m=(e[0].getX()+e[2].getX())/2,y=(e[0].getY()+e[2].getY())/2,b=new _n(m+c*l,y+c*g),P=new _n(m-c*l,y-c*g);return l=e[1].getX()-e[3].getX(),g=e[1].getY()-e[3].getY(),m=(e[1].getX()+e[3].getX())/2,y=(e[1].getY()+e[3].getY())/2,[b,new _n(m+c*l,y+c*g),P,new _n(m-c*l,y-c*g)]},i.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},i.prototype.isValidPoint=function(e){var n=Ar.round(e.getX()),s=Ar.round(e.getY());return this.isValid(n,s)},i.prototype.distancePoint=function(e,n){return Ar.distance(e.getX(),e.getY(),n.getX(),n.getY())},i.prototype.distanceResultPoint=function(e,n){return Ar.distance(e.getX(),e.getY(),n.getX(),n.getY())},i.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ar.truncDivision(this.nbLayers-4,8)+1)+15},i}(),ke=function(){function i(){}return i.prototype.decode=function(e,n){void 0===n&&(n=null);var s=null,c=new Ie(e.getBlackMatrix()),l=null,g=null;try{l=(m=c.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(n,l),g=(new Qu).decode(m)}catch(B){s=B}if(null==g)try{var m;l=(m=c.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(n,l),g=(new Qu).decode(m)}catch(B){throw s??B}var y=new qi(g.getText(),g.getRawBytes(),g.getNumBits(),l,dn.AZTEC,Hr.currentTimeMillis()),b=g.getByteSegments();null!=b&&y.putMetadata(Zi.BYTE_SEGMENTS,b);var P=g.getECLevel();return null!=P&&y.putMetadata(Zi.ERROR_CORRECTION_LEVEL,P),y},i.prototype.reportFoundResultPoints=function(e,n){if(null!=e){var s=e.get(Vn.NEED_RESULT_POINT_CALLBACK);null!=s&&n.forEach(function(c,l,g){s.foundPossibleResultPoint(c)})}},i.prototype.reset=function(){},i}();var i,Bt=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();Bt(function e(n){return void 0===n&&(n=500),i.call(this,new ke,n)||this},i=ia);const Pn=function(){function i(){}return i.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{if(n&&!0===n.get(Vn.TRY_HARDER)&&e.isRotateSupported()){var c=e.rotateCounterClockwise(),l=this.doDecode(c,n),g=l.getResultMetadata(),m=270;null!==g&&!0===g.get(Zi.ORIENTATION)&&(m+=g.get(Zi.ORIENTATION)%360),l.putMetadata(Zi.ORIENTATION,m);var y=l.getResultPoints();if(null!==y)for(var b=c.getHeight(),P=0;P<y.length;P++)y[P]=new _n(b-y[P].getY()-1,y[P].getX());return l}throw new Ke}},i.prototype.reset=function(){},i.prototype.doDecode=function(e,n){var y,s=e.getWidth(),c=e.getHeight(),l=new _i(s),g=n&&!0===n.get(Vn.TRY_HARDER),m=Math.max(1,c>>(g?8:5));y=g?c:15;for(var b=Math.trunc(c/2),P=0;P<y;P++){var B=Math.trunc((P+1)/2),K=b+m*(1&P?-B:B);if(K<0||K>=c)break;try{l=e.getBlackRow(K,l)}catch{continue}for(var ae=function(Pe){if(1===Pe&&(l.reverse(),n&&!0===n.get(Vn.NEED_RESULT_POINT_CALLBACK))){var Ye=new Map;n.forEach(function(Gt,Qt){return Ye.set(Qt,Gt)}),Ye.delete(Vn.NEED_RESULT_POINT_CALLBACK),n=Ye}try{var st=ve.decodeRow(K,l,n);if(1===Pe){st.putMetadata(Zi.ORIENTATION,180);var Nt=st.getResultPoints();null!==Nt&&(Nt[0]=new _n(s-Nt[0].getX()-1,Nt[0].getY()),Nt[1]=new _n(s-Nt[1].getX()-1,Nt[1].getY()))}return{value:st}}catch{}},ve=this,Re=0;Re<2;Re++){var Ve=ae(Re);if("object"==typeof Ve)return Ve.value}}throw new Ke},i.recordPattern=function(e,n,s){for(var c=s.length,l=0;l<c;l++)s[l]=0;var g=e.getSize();if(n>=g)throw new Ke;for(var m=!e.get(n),y=0,b=n;b<g;){if(e.get(b)!==m)s[y]++;else{if(++y===c)break;s[y]=1,m=!m}b++}if(y!==c&&(y!==c-1||b!==g))throw new Ke},i.recordPatternInReverse=function(e,n,s){for(var c=s.length,l=e.get(n);n>0&&c>=0;)e.get(--n)!==l&&(c--,l=!l);if(c>=0)throw new Ke;i.recordPattern(e,n+1,s)},i.patternMatchVariance=function(e,n,s){for(var c=e.length,l=0,g=0,m=0;m<c;m++)l+=e[m],g+=n[m];if(l<g)return Number.POSITIVE_INFINITY;var y=l/g;s*=y;for(var b=0,P=0;P<c;P++){var B=e[P],z=n[P]*y,K=B>z?B-z:z-B;if(K>s)return Number.POSITIVE_INFINITY;b+=K}return b/l},i}();var va=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const ya=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return va(e,i),e.findStartPattern=function(n){for(var s=n.getSize(),c=n.getNextSet(0),l=0,g=Int32Array.from([0,0,0,0,0,0]),m=c,y=!1,P=c;P<s;P++)if(n.get(P)!==y)g[l]++;else{if(5===l){for(var B=e.MAX_AVG_VARIANCE,z=-1,K=e.CODE_START_A;K<=e.CODE_START_C;K++){var ae=Pn.patternMatchVariance(g,e.CODE_PATTERNS[K],e.MAX_INDIVIDUAL_VARIANCE);ae<B&&(B=ae,z=K)}if(z>=0&&n.isRange(Math.max(0,m-(P-m)/2),m,!1))return Int32Array.from([m,P,z]);m+=g[0]+g[1],(g=g.slice(2,g.length))[l-1]=0,g[l]=0,l--}else l++;g[l]=1,y=!y}throw new Ke},e.decodeCode=function(n,s,c){Pn.recordPattern(n,c,s);for(var l=e.MAX_AVG_VARIANCE,g=-1,m=0;m<e.CODE_PATTERNS.length;m++){var b=this.patternMatchVariance(s,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);b<l&&(l=b,g=m)}if(g>=0)return g;throw new Ke},e.prototype.decodeRow=function(n,s,c){var P,l=c&&!0===c.get(Vn.ASSUME_GS1),g=e.findStartPattern(s),m=g[2],y=0,b=new Uint8Array(20);switch(b[y++]=m,m){case e.CODE_START_A:P=e.CODE_CODE_A;break;case e.CODE_START_B:P=e.CODE_CODE_B;break;case e.CODE_START_C:P=e.CODE_CODE_C;break;default:throw new Jt}for(var B=!1,z=!1,K="",ae=g[0],ve=g[1],Re=Int32Array.from([0,0,0,0,0,0]),Ve=0,Pe=0,Ye=m,st=0,Nt=!0,Gt=!1,Qt=!1;!B;){var vn=z;switch(z=!1,Ve=Pe,Pe=e.decodeCode(s,Re,ve),b[y++]=Pe,Pe!==e.CODE_STOP&&(Nt=!0),Pe!==e.CODE_STOP&&(Ye+=++st*Pe),ae=ve,ve+=Re.reduce(function(Vg,wp){return Vg+wp},0),Pe){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Jt}switch(P){case e.CODE_CODE_A:if(Pe<64)K+=String.fromCharCode(Qt===Gt?32+Pe:32+Pe+128),Qt=!1;else if(Pe<96)K+=String.fromCharCode(Qt===Gt?Pe-64:Pe+64),Qt=!1;else switch(Pe!==e.CODE_STOP&&(Nt=!1),Pe){case e.CODE_FNC_1:l&&(K+=0===K.length?"]C1":"\x1d");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!Gt&&Qt?(Gt=!0,Qt=!1):Gt&&Qt?(Gt=!1,Qt=!1):Qt=!0;break;case e.CODE_SHIFT:z=!0,P=e.CODE_CODE_B;break;case e.CODE_CODE_B:P=e.CODE_CODE_B;break;case e.CODE_CODE_C:P=e.CODE_CODE_C;break;case e.CODE_STOP:B=!0}break;case e.CODE_CODE_B:if(Pe<96)K+=String.fromCharCode(Qt===Gt?32+Pe:32+Pe+128),Qt=!1;else switch(Pe!==e.CODE_STOP&&(Nt=!1),Pe){case e.CODE_FNC_1:l&&(K+=0===K.length?"]C1":"\x1d");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!Gt&&Qt?(Gt=!0,Qt=!1):Gt&&Qt?(Gt=!1,Qt=!1):Qt=!0;break;case e.CODE_SHIFT:z=!0,P=e.CODE_CODE_A;break;case e.CODE_CODE_A:P=e.CODE_CODE_A;break;case e.CODE_CODE_C:P=e.CODE_CODE_C;break;case e.CODE_STOP:B=!0}break;case e.CODE_CODE_C:if(Pe<100)Pe<10&&(K+="0"),K+=Pe;else switch(Pe!==e.CODE_STOP&&(Nt=!1),Pe){case e.CODE_FNC_1:l&&(K+=0===K.length?"]C1":"\x1d");break;case e.CODE_CODE_A:P=e.CODE_CODE_A;break;case e.CODE_CODE_B:P=e.CODE_CODE_B;break;case e.CODE_STOP:B=!0}}vn&&(P=P===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var er=ve-ae;if(ve=s.getNextUnset(ve),!s.isRange(ve,Math.min(s.getSize(),ve+(ve-ae)/2),!1))throw new Ke;if((Ye-=st*Ve)%103!==Ve)throw new mi;var ir=K.length;if(0===ir)throw new Ke;ir>0&&Nt&&(K=K.substring(0,P===e.CODE_CODE_C?ir-2:ir-1));for(var Eo=(g[1]+g[0])/2,ai=ae+er/2,Oo=b.length,Nc=new Uint8Array(Oo),Ed=0;Ed<Oo;Ed++)Nc[Ed]=b[Ed];var T_=[new _n(Eo,n),new _n(ai,n)];return new qi(K,Nc,0,T_,dn.CODE_128,(new Date).getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Pn);var Hs=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Gs=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Ea=function(i){function e(n,s){void 0===n&&(n=!1),void 0===s&&(s=!1);var c=i.call(this)||this;return c.usingCheckDigit=n,c.extendedMode=s,c.decodeRowResult="",c.counters=new Int32Array(9),c}return Hs(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m,y,b=this.counters;b.fill(0),this.decodeRowResult="";var K,ae,P=e.findAsteriskPattern(s,b),B=s.getNextSet(P[1]),z=s.getSize();do{e.recordPattern(s,B,b);var ve=e.toNarrowWidePattern(b);if(ve<0)throw new Ke;K=e.patternToChar(ve),this.decodeRowResult+=K,ae=B;try{for(var Re=(l=void 0,Gs(b)),Ve=Re.next();!Ve.done;Ve=Re.next())B+=Ve.value}catch(Oo){l={error:Oo}}finally{try{Ve&&!Ve.done&&(g=Re.return)&&g.call(Re)}finally{if(l)throw l.error}}B=s.getNextSet(B)}while("*"!==K);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var ir,Ye=0;try{for(var st=Gs(b),Nt=st.next();!Nt.done;Nt=st.next())Ye+=Nt.value}catch(Oo){m={error:Oo}}finally{try{Nt&&!Nt.done&&(y=st.return)&&y.call(st)}finally{if(m)throw m.error}}if(B!==z&&2*(B-ae-Ye)<Ye)throw new Ke;if(this.usingCheckDigit){for(var Qt=this.decodeRowResult.length-1,vn=0,er=0;er<Qt;er++)vn+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(er));if(this.decodeRowResult.charAt(Qt)!==e.ALPHABET_STRING.charAt(vn%43))throw new mi;this.decodeRowResult=this.decodeRowResult.substring(0,Qt)}if(0===this.decodeRowResult.length)throw new Ke;ir=this.extendedMode?e.decodeExtended(this.decodeRowResult):this.decodeRowResult;var ai=ae+Ye/2;return new qi(ir,null,0,[new _n((P[1]+P[0])/2,n),new _n(ai,n)],dn.CODE_39,(new Date).getTime())},e.findAsteriskPattern=function(n,s){for(var c=n.getSize(),l=n.getNextSet(0),g=0,m=l,y=!1,b=s.length,P=l;P<c;P++)if(n.get(P)!==y)s[g]++;else{if(g===b-1){if(this.toNarrowWidePattern(s)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,m-Math.floor((P-m)/2)),m,!1))return[m,P];m+=s[0]+s[1],s.copyWithin(0,2,2+g-1),s[g-1]=0,s[g]=0,g--}else g++;s[g]=1,y=!y}throw new Ke},e.toNarrowWidePattern=function(n){var s,c,m,l=n.length,g=0;do{var y=2147483647;try{for(var b=(s=void 0,Gs(n)),P=b.next();!P.done;P=b.next())(B=P.value)<y&&B>g&&(y=B)}catch(ve){s={error:ve}}finally{try{P&&!P.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}g=y,m=0;for(var z=0,K=0,ae=0;ae<l;ae++)(B=n[ae])>g&&(K|=1<<l-1-ae,m++,z+=B);if(3===m){for(ae=0;ae<l&&m>0;ae++){var B;if((B=n[ae])>g&&(m--,2*B>=z))return-1}return K}}while(m>3);return-1},e.patternToChar=function(n){for(var s=0;s<e.CHARACTER_ENCODINGS.length;s++)if(e.CHARACTER_ENCODINGS[s]===n)return e.ALPHABET_STRING.charAt(s);if(n===e.ASTERISK_ENCODING)return"*";throw new Ke},e.decodeExtended=function(n){for(var s=n.length,c="",l=0;l<s;l++){var g=n.charAt(l);if("+"===g||"$"===g||"%"===g||"/"===g){var m=n.charAt(l+1),y="\0";switch(g){case"+":if(!(m>="A"&&m<="Z"))throw new Jt;y=String.fromCharCode(m.charCodeAt(0)+32);break;case"$":if(!(m>="A"&&m<="Z"))throw new Jt;y=String.fromCharCode(m.charCodeAt(0)-64);break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if("U"===m)y="\0";else if("V"===m)y="@";else if("W"===m)y="`";else{if("X"!==m&&"Y"!==m&&"Z"!==m)throw new Jt;y="\x7f"}break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else{if("Z"!==m)throw new Jt;y=":"}}c+=y,l++}else c+=g}return c},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Pn);var vl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),kd=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const bf=function(i){function e(){var n=i.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return vl(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m,y,K,ae,b=this.findAsteriskPattern(s),P=s.getNextSet(b[1]),B=s.getSize(),z=this.counters;z.fill(0),this.decodeRowResult="";do{e.recordPattern(s,P,z);var ve=this.toPattern(z);if(ve<0)throw new Ke;K=this.patternToChar(ve),this.decodeRowResult+=K,ae=P;try{for(var Re=(l=void 0,kd(z)),Ve=Re.next();!Ve.done;Ve=Re.next())P+=Ve.value}catch(er){l={error:er}}finally{try{Ve&&!Ve.done&&(g=Re.return)&&g.call(Re)}finally{if(l)throw l.error}}P=s.getNextSet(P)}while("*"!==K);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var Ye=0;try{for(var st=kd(z),Nt=st.next();!Nt.done;Nt=st.next())Ye+=Nt.value}catch(er){m={error:er}}finally{try{Nt&&!Nt.done&&(y=st.return)&&y.call(st)}finally{if(m)throw m.error}}if(P===B||!s.get(P))throw new Ke;if(this.decodeRowResult.length<2)throw new Ke;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var Gt=this.decodeExtended(this.decodeRowResult),vn=ae+Ye/2;return new qi(Gt,null,0,[new _n((b[1]+b[0])/2,n),new _n(vn,n)],dn.CODE_93,(new Date).getTime())},e.prototype.findAsteriskPattern=function(n){var s=n.getSize(),c=n.getNextSet(0);this.counters.fill(0);for(var l=this.counters,g=c,m=!1,y=l.length,b=0,P=c;P<s;P++)if(n.get(P)!==m)l[b]++;else{if(b===y-1){if(this.toPattern(l)===e.ASTERISK_ENCODING)return new Int32Array([g,P]);g+=l[0]+l[1],l.copyWithin(0,2,2+b-1),l[b-1]=0,l[b]=0,b--}else b++;l[b]=1,m=!m}throw new Ke},e.prototype.toPattern=function(n){var s,c,l=0;try{for(var g=kd(n),m=g.next();!m.done;m=g.next())l+=m.value}catch(ae){s={error:ae}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}for(var b=0,P=n.length,B=0;B<P;B++){var z=Math.round(9*n[B]/l);if(z<1||z>4)return-1;if(1&B)b<<=z;else for(var K=0;K<z;K++)b=b<<1|1}return b},e.prototype.patternToChar=function(n){for(var s=0;s<e.CHARACTER_ENCODINGS.length;s++)if(e.CHARACTER_ENCODINGS[s]===n)return e.ALPHABET_STRING.charAt(s);throw new Ke},e.prototype.decodeExtended=function(n){for(var s=n.length,c="",l=0;l<s;l++){var g=n.charAt(l);if(g>="a"&&g<="d"){if(l>=s-1)throw new Jt;var m=n.charAt(l+1),y="\0";switch(g){case"d":if(!(m>="A"&&m<="Z"))throw new Jt;y=String.fromCharCode(m.charCodeAt(0)+32);break;case"a":if(!(m>="A"&&m<="Z"))throw new Jt;y=String.fromCharCode(m.charCodeAt(0)-64);break;case"b":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if("U"===m)y="\0";else if("V"===m)y="@";else if("W"===m)y="`";else{if(!(m>="X"&&m<="Z"))throw new Jt;y="\x7f"}break;case"c":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else{if("Z"!==m)throw new Jt;y=":"}}c+=y,l++}else c+=g}return c},e.prototype.checkChecksums=function(n){var s=n.length;this.checkOneChecksum(n,s-2,20),this.checkOneChecksum(n,s-1,15)},e.prototype.checkOneChecksum=function(n,s,c){for(var l=1,g=0,m=s-1;m>=0;m--)g+=l*e.ALPHABET_STRING.indexOf(n.charAt(m)),++l>c&&(l=1);if(n.charAt(s)!==e.ALPHABET_STRING[g%47])throw new mi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.ASTERISK_ENCODING=(e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350])[47],e}(Pn);var Wl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ju=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return Wl(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m=this.decodeStart(s),y=this.decodeEnd(s),b=new gn;e.decodeMiddle(s,m[1],y[0],b);var P=b.toString(),B=null;null!=c&&(B=c.get(Vn.ALLOWED_LENGTHS)),null==B&&(B=e.DEFAULT_ALLOWED_LENGTHS);var z=P.length,K=!1,ae=0;try{for(var ve=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(B),Re=ve.next();!Re.done;Re=ve.next()){var Ve=Re.value;if(z===Ve){K=!0;break}Ve>ae&&(ae=Ve)}}catch(st){l={error:st}}finally{try{Re&&!Re.done&&(g=ve.return)&&g.call(ve)}finally{if(l)throw l.error}}if(!K&&z>ae&&(K=!0),!K)throw new Jt;var Pe=[new _n(m[1],n),new _n(y[0],n)];return new qi(P,null,0,Pe,dn.ITF,(new Date).getTime())},e.decodeMiddle=function(n,s,c,l){var g=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(g.fill(0),m.fill(0),y.fill(0);s<c;){Pn.recordPattern(n,s,g);for(var b=0;b<5;b++){var P=2*b;m[b]=g[P],y[b]=g[P+1]}var B=e.decodeDigit(m);l.append(B.toString()),B=this.decodeDigit(y),l.append(B.toString()),g.forEach(function(z){s+=z})}},e.prototype.decodeStart=function(n){var s=e.skipWhiteSpace(n),c=e.findGuardPattern(n,s,e.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(n,c[0]),c},e.prototype.validateQuietZone=function(n,s){var c=10*this.narrowLineWidth;c=c<s?c:s;for(var l=s-1;c>0&&l>=0&&!n.get(l);l--)c--;if(0!==c)throw new Ke},e.skipWhiteSpace=function(n){var s=n.getSize(),c=n.getNextSet(0);if(c===s)throw new Ke;return c},e.prototype.decodeEnd=function(n){n.reverse();try{var s=e.skipWhiteSpace(n),c=void 0;try{c=e.findGuardPattern(n,s,e.END_PATTERN_REVERSED[0])}catch(g){g instanceof Ke&&(c=e.findGuardPattern(n,s,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,c[0]);var l=c[0];return c[0]=n.getSize()-c[1],c[1]=n.getSize()-l,c}finally{n.reverse()}},e.findGuardPattern=function(n,s,c){var l=c.length,g=new Int32Array(l),m=n.getSize(),y=!1,b=0,P=s;g.fill(0);for(var B=s;B<m;B++)if(n.get(B)!==y)g[b]++;else{if(b===l-1){if(Pn.patternMatchVariance(g,c,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[P,B];P+=g[0]+g[1],Hr.arraycopy(g,2,g,0,b-1),g[b-1]=0,g[b]=0,b--}else b++;g[b]=1,y=!y}throw new Ke},e.decodeDigit=function(n){for(var s=e.MAX_AVG_VARIANCE,c=-1,l=e.PATTERNS.length,g=0;g<l;g++){var y=Pn.patternMatchVariance(n,e.PATTERNS[g],e.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,c=g):y===s&&(c=-1)}if(c>=0)return c%10;throw new Ke},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Pn);var ql=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Qc=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return ql(e,i),e.findStartGuardPattern=function(n){for(var c,s=!1,l=0,g=Int32Array.from([0,0,0]);!s;){g=Int32Array.from([0,0,0]);var m=(c=e.findGuardPattern(n,l,!1,this.START_END_PATTERN,g))[0],y=m-((l=c[1])-m);y>=0&&(s=n.isRange(y,m,!1))}return c},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var s=n.length;if(0===s)return!1;var c=parseInt(n.charAt(s-1),10);return e.getStandardUPCEANChecksum(n.substring(0,s-1))===c},e.getStandardUPCEANChecksum=function(n){for(var s=n.length,c=0,l=s-1;l>=0;l-=2){if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Jt;c+=g}for(c*=3,l=s-2;l>=0;l-=2){var g;if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Jt;c+=g}return(1e3-c)%10},e.decodeEnd=function(n,s){return e.findGuardPattern(n,s,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,s,c,l){return this.findGuardPattern(n,s,c,l,new Int32Array(l.length))},e.findGuardPattern=function(n,s,c,l,g){for(var m=n.getSize(),y=0,b=s=c?n.getNextUnset(s):n.getNextSet(s),P=l.length,B=c,z=s;z<m;z++)if(n.get(z)!==B)g[y]++;else{if(y===P-1){if(Pn.patternMatchVariance(g,l,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([b,z]);b+=g[0]+g[1];for(var K=g.slice(2,g.length),ae=0;ae<y-1;ae++)g[ae]=K[ae];g[y-1]=0,g[y]=0,y--}else y++;g[y]=1,B=!B}throw new Ke},e.decodeDigit=function(n,s,c,l){this.recordPattern(n,c,s);for(var g=this.MAX_AVG_VARIANCE,m=-1,y=l.length,b=0;b<y;b++){var B=Pn.patternMatchVariance(s,l[b],e.MAX_INDIVIDUAL_VARIANCE);B<g&&(g=B,m=b)}if(m>=0)return m;throw new Ke},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Pn);var Kl=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const yl=function(){function i(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return i.prototype.decodeRow=function(e,n,s){var c=this.decodeRowStringBuffer,l=this.decodeMiddle(n,s,c),g=c.toString(),m=i.parseExtensionString(g),y=[new _n((s[0]+s[1])/2,e),new _n(l,e)],b=new qi(g,null,0,y,dn.UPC_EAN_EXTENSION,(new Date).getTime());return null!=m&&b.putAllMetadata(m),b},i.prototype.decodeMiddle=function(e,n,s){var c,l,g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var m=e.getSize(),y=n[1],b=0,P=0;P<5&&y<m;P++){var B=Qc.decodeDigit(e,g,y,Qc.L_AND_G_PATTERNS);s+=String.fromCharCode(48+B%10);try{for(var z=(c=void 0,Kl(g)),K=z.next();!K.done;K=z.next())y+=K.value}catch(Re){c={error:Re}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}B>=10&&(b|=1<<4-P),4!==P&&(y=e.getNextSet(y),y=e.getNextUnset(y))}if(5!==s.length)throw new Ke;var ve=this.determineCheckDigit(b);if(i.extensionChecksum(s.toString())!==ve)throw new Ke;return y},i.extensionChecksum=function(e){for(var n=e.length,s=0,c=n-2;c>=0;c-=2)s+=e.charAt(c).charCodeAt(0)-48;for(s*=3,c=n-1;c>=0;c-=2)s+=e.charAt(c).charCodeAt(0)-48;return(s*=3)%10},i.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new Ke},i.parseExtensionString=function(e){if(5!==e.length)return null;var n=i.parseExtension5String(e);return null==n?null:new Map([[Zi.SUGGESTED_PRICE,n]])},i.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="\xa3";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n=""}var s=parseInt(e.substring(1)),l=s%100;return n+(s/100).toString()+"."+(l<10?"0"+l:l.toString())},i}();var Ih=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const jo=function(){function i(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return i.prototype.decodeRow=function(e,n,s){var c=this.decodeRowStringBuffer,l=this.decodeMiddle(n,s,c),g=c.toString(),m=i.parseExtensionString(g),y=[new _n((s[0]+s[1])/2,e),new _n(l,e)],b=new qi(g,null,0,y,dn.UPC_EAN_EXTENSION,(new Date).getTime());return null!=m&&b.putAllMetadata(m),b},i.prototype.decodeMiddle=function(e,n,s){var c,l,g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;for(var m=e.getSize(),y=n[1],b=0,P=0;P<2&&y<m;P++){var B=Qc.decodeDigit(e,g,y,Qc.L_AND_G_PATTERNS);s+=String.fromCharCode(48+B%10);try{for(var z=(c=void 0,Ih(g)),K=z.next();!K.done;K=z.next())y+=K.value}catch(ve){c={error:ve}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}B>=10&&(b|=1<<1-P),1!==P&&(y=e.getNextSet(y),y=e.getNextUnset(y))}if(2!==s.length)throw new Ke;if(parseInt(s.toString())%4!==b)throw new Ke;return y},i.parseExtensionString=function(e){return 2!==e.length?null:new Map([[Zi.ISSUE_NUMBER,parseInt(e)]])},i}(),Ba=function(){function i(){}return i.decodeRow=function(e,n,s){var c=Qc.findGuardPattern(n,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new yl).decodeRow(e,n,c)}catch{return(new jo).decodeRow(e,n,c)}},i.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),i}();var Ah=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Lr=function(i){function e(){var n=i.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(m){return Int32Array.from(m)});for(var s=10;s<20;s++){for(var c=e.L_PATTERNS[s-10],l=new Int32Array(c.length),g=0;g<c.length;g++)l[g]=c[c.length-g-1];e.L_AND_G_PATTERNS[s]=l}return n}return Ah(e,i),e.prototype.decodeRow=function(n,s,c){var l=e.findStartGuardPattern(s),g=null==c?null:c.get(Vn.NEED_RESULT_POINT_CALLBACK);if(null!=g){var m=new _n((l[0]+l[1])/2,n);g.foundPossibleResultPoint(m)}var y=this.decodeMiddle(s,l,this.decodeRowStringBuffer),b=y.rowOffset,P=y.resultString;if(null!=g){var B=new _n(b,n);g.foundPossibleResultPoint(B)}var z=e.decodeEnd(s,b);if(null!=g){var K=new _n((z[0]+z[1])/2,n);g.foundPossibleResultPoint(K)}var ae=z[1],ve=ae+(ae-z[0]);if(ve>=s.getSize()||!s.isRange(ae,ve,!1))throw new Ke;var Re=P.toString();if(Re.length<8)throw new Jt;if(!e.checkChecksum(Re))throw new mi;var Ve=(l[1]+l[0])/2,Pe=(z[1]+z[0])/2,Ye=this.getBarcodeFormat(),st=[new _n(Ve,n),new _n(Pe,n)],Nt=new qi(Re,null,0,st,Ye,(new Date).getTime()),Gt=0;try{var Qt=Ba.decodeRow(n,s,z[1]);Nt.putMetadata(Zi.UPC_EAN_EXTENSION,Qt.getText()),Nt.putAllMetadata(Qt.getResultMetadata()),Nt.addResultPoints(Qt.getResultPoints()),Gt=Qt.getText().length}catch{}var vn=null==c?null:c.get(Vn.ALLOWED_EAN_EXTENSIONS);if(null!=vn){var er=!1;for(var ir in vn)if(Gt.toString()===ir){er=!0;break}if(!er)throw new Ke}return Nt},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var s=n.length;if(0===s)return!1;var c=parseInt(n.charAt(s-1),10);return e.getStandardUPCEANChecksum(n.substring(0,s-1))===c},e.getStandardUPCEANChecksum=function(n){for(var s=n.length,c=0,l=s-1;l>=0;l-=2){if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Jt;c+=g}for(c*=3,l=s-2;l>=0;l-=2){var g;if((g=n.charAt(l).charCodeAt(0)-48)<0||g>9)throw new Jt;c+=g}return(1e3-c)%10},e.decodeEnd=function(n,s){return e.findGuardPattern(n,s,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Qc);var Yc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),tl=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Ld=function(i){function e(){var n=i.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return Yc(e,i),e.prototype.decodeMiddle=function(n,s,c){var l,g,m,y,b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;for(var P=n.getSize(),B=s[1],z=0,K=0;K<6&&B<P;K++){var ae=Lr.decodeDigit(n,b,B,Lr.L_AND_G_PATTERNS);c+=String.fromCharCode(48+ae%10);try{for(var ve=(l=void 0,tl(b)),Re=ve.next();!Re.done;Re=ve.next())B+=Re.value}catch(Nt){l={error:Nt}}finally{try{Re&&!Re.done&&(g=ve.return)&&g.call(ve)}finally{if(l)throw l.error}}ae>=10&&(z|=1<<5-K)}for(c=e.determineFirstDigit(c,z),B=Lr.findGuardPattern(n,B,!0,Lr.MIDDLE_PATTERN,new Int32Array(Lr.MIDDLE_PATTERN.length).fill(0))[1],K=0;K<6&&B<P;K++){ae=Lr.decodeDigit(n,b,B,Lr.L_PATTERNS),c+=String.fromCharCode(48+ae);try{for(var Ye=(m=void 0,tl(b)),st=Ye.next();!st.done;st=Ye.next())B+=st.value}catch(Qt){m={error:Qt}}finally{try{st&&!st.done&&(y=Ye.return)&&y.call(Ye)}finally{if(m)throw m.error}}}return{rowOffset:B,resultString:c}},e.prototype.getBarcodeFormat=function(){return dn.EAN_13},e.determineFirstDigit=function(n,s){for(var c=0;c<10;c++)if(s===this.FIRST_DIGIT_ENCODINGS[c])return String.fromCharCode(48+c)+n;throw new Ke},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Lr);var tc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),bc=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const nc=function(i){function e(){var n=i.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return tc(e,i),e.prototype.decodeMiddle=function(n,s,c){var l,g,m,y,b=this.decodeMiddleCounters;b[0]=0,b[1]=0,b[2]=0,b[3]=0;for(var P=n.getSize(),B=s[1],z=0;z<4&&B<P;z++){var K=Lr.decodeDigit(n,b,B,Lr.L_PATTERNS);c+=String.fromCharCode(48+K);try{for(var ae=(l=void 0,bc(b)),ve=ae.next();!ve.done;ve=ae.next())B+=ve.value}catch(st){l={error:st}}finally{try{ve&&!ve.done&&(g=ae.return)&&g.call(ae)}finally{if(l)throw l.error}}}for(B=Lr.findGuardPattern(n,B,!0,Lr.MIDDLE_PATTERN,new Int32Array(Lr.MIDDLE_PATTERN.length).fill(0))[1],z=0;z<4&&B<P;z++){K=Lr.decodeDigit(n,b,B,Lr.L_PATTERNS),c+=String.fromCharCode(48+K);try{for(var Pe=(m=void 0,bc(b)),Ye=Pe.next();!Ye.done;Ye=Pe.next())B+=Ye.value}catch(Gt){m={error:Gt}}finally{try{Ye&&!Ye.done&&(y=Pe.return)&&y.call(Pe)}finally{if(m)throw m.error}}}return{rowOffset:B,resultString:c}},e.prototype.getBarcodeFormat=function(){return dn.EAN_8},e}(Lr);var Du=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Sf=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.ean13Reader=new Ld,n}return Du(e,i),e.prototype.getBarcodeFormat=function(){return dn.UPC_A},e.prototype.decode=function(n,s){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,s,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,s,c))},e.prototype.decodeMiddle=function(n,s,c){return this.ean13Reader.decodeMiddle(n,s,c)},e.prototype.maybeReturnResult=function(n){var s=n.getText();if("0"===s.charAt(0)){var c=new qi(s.substring(1),null,null,n.getResultPoints(),dn.UPC_A);return null!=n.getResultMetadata()&&c.putAllMetadata(n.getResultMetadata()),c}throw new Ke},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Lr);var yi=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),xh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Zc=function(i){function e(){var n=i.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return yi(e,i),e.prototype.decodeMiddle=function(n,s,c){var l,g,m=this.decodeMiddleCounters.map(function(Re){return Re});m[0]=0,m[1]=0,m[2]=0,m[3]=0;for(var y=n.getSize(),b=s[1],P=0,B=0;B<6&&b<y;B++){var z=e.decodeDigit(n,m,b,e.L_AND_G_PATTERNS);c+=String.fromCharCode(48+z%10);try{for(var K=(l=void 0,xh(m)),ae=K.next();!ae.done;ae=K.next())b+=ae.value}catch(Re){l={error:Re}}finally{try{ae&&!ae.done&&(g=K.return)&&g.call(K)}finally{if(l)throw l.error}}z>=10&&(P|=1<<5-B)}return e.determineNumSysAndCheckDigit(new gn(c),P),b},e.prototype.decodeEnd=function(n,s){return e.findGuardPatternWithoutCounters(n,s,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return Lr.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,s){for(var c=0;c<=1;c++)for(var l=0;l<10;l++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][l])return n.insert(0,"0"+c),void n.append("0"+l);throw Ke.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return dn.UPC_E},e.convertUPCEtoUPCA=function(n){var s=n.slice(1,7).split("").map(function(g){return g.charCodeAt(0)}),c=new gn;c.append(n.charAt(0));var l=s[5];switch(l){case 0:case 1:case 2:c.appendChars(s,0,2),c.append(l),c.append("0000"),c.appendChars(s,2,3);break;case 3:c.appendChars(s,0,3),c.append("00000"),c.appendChars(s,3,2);break;case 4:c.appendChars(s,0,4),c.append("00000"),c.append(s[4]);break;default:c.appendChars(s,0,5),c.append("0000"),c.append(l)}return n.length>=8&&c.append(n.charAt(7)),c.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Lr);var Im=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Yl=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Ru=function(i){function e(n){var s=i.call(this)||this,c=null==n?null:n.get(Vn.POSSIBLE_FORMATS),l=[];return null!=c&&(c.indexOf(dn.EAN_13)>-1&&l.push(new Ld),c.indexOf(dn.UPC_A)>-1&&l.push(new Sf),c.indexOf(dn.EAN_8)>-1&&l.push(new nc),c.indexOf(dn.UPC_E)>-1&&l.push(new Zc)),0===l.length&&(l.push(new Ld),l.push(new Sf),l.push(new nc),l.push(new Zc)),s.readers=l,s}return Im(e,i),e.prototype.decodeRow=function(n,s,c){var l,g;try{for(var m=Yl(this.readers),y=m.next();!y.done;y=m.next()){var b=y.value;try{var P=b.decodeRow(n,s,c),B=P.getBarcodeFormat()===dn.EAN_13&&"0"===P.getText().charAt(0),z=null==c?null:c.get(Vn.POSSIBLE_FORMATS),K=null==z||z.includes(dn.UPC_A);if(B&&K){var ae=P.getRawBytes(),ve=new qi(P.getText().substring(1),ae,ae?ae.length:null,P.getResultPoints(),dn.UPC_A);return ve.putAllMetadata(P.getResultMetadata()),ve}return P}catch{}}}catch(Re){l={error:Re}}finally{try{y&&!y.done&&(g=m.return)&&g.call(m)}finally{if(l)throw l.error}}throw new Ke},e.prototype.reset=function(){var n,s;try{for(var c=Yl(this.readers),l=c.next();!l.done;l=c.next())l.value.reset()}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}},e}(Pn);var Df=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Vd=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return Df(e,i),e.prototype.decodeRow=function(n,s,c){var l=this.getValidRowData(s);if(!l)throw new Ke;var g=this.codaBarDecodeRow(l.row);if(!g)throw new Ke;return new qi(g,null,0,[new _n(l.left,n),new _n(l.right,n)],dn.CODABAR,(new Date).getTime())},e.prototype.getValidRowData=function(n){var s=n.toArray(),c=s.indexOf(!0);if(-1===c)return null;var l=s.lastIndexOf(!0);if(l<=c)return null;for(var g=[],m=(s=s.slice(c,l+1))[0],y=1,b=1;b<s.length;b++)s[b]===m?y++:(m=s[b],g.push(y),y=1);return g.push(y),g.length<23&&(g.length+1)%8!=0?null:{row:g,left:c,right:l}},e.prototype.codaBarDecodeRow=function(n){for(var s=[],c=Math.ceil(n.reduce(function(y,b){return(y+b)/2},0));n.length>0;){var g=n.splice(0,8).splice(0,7).map(function(y){return y<c?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[g])return null;s.push(this.CODA_BAR_CHAR_SET[g])}var m=s.join("");return this.validCodaBarString(m)?m:null},e.prototype.validCodaBarString=function(n){return/^[A-D].{1,}[A-D]$/.test(n)},e}(Pn);var Bd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const xn=function(i){function e(){var n=i.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return Bd(e,i),e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,s){for(var c=0;c<s.length;c++)if(Pn.patternMatchVariance(n,s[c],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return c;throw new Ke},e.count=function(n){return Ar.sum(new Int32Array(n))},e.increment=function(n,s){for(var c=0,l=s[0],g=1;g<n.length;g++)s[g]>l&&(l=s[g],c=g);n[c]++},e.decrement=function(n,s){for(var c=0,l=s[0],g=1;g<n.length;g++)s[g]<l&&(l=s[g],c=g);n[c]--},e.isFinderPattern=function(n){var s,c,l=n[0]+n[1],m=l/(l+n[2]+n[3]);if(m>=e.MIN_FINDER_PATTERN_RATIO&&m<=e.MAX_FINDER_PATTERN_RATIO){var y=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER;try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),B=P.next();!B.done;B=P.next()){var z=B.value;z>b&&(b=z),z<y&&(y=z)}}catch(K){s={error:K}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}return b<10*y}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Pn),us=function(){function i(e,n){this.value=e,this.checksumPortion=n}return i.prototype.getValue=function(){return this.value},i.prototype.getChecksumPortion=function(){return this.checksumPortion},i.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},i.prototype.equals=function(e){return e instanceof i&&(this.value===e.value&&this.checksumPortion===e.checksumPortion)},i.prototype.hashCode=function(){return this.value^this.checksumPortion},i}(),ds=function(){function i(e,n,s,c,l){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new _n(s,l)),this.resultPoints.push(new _n(c,l))}return i.prototype.getValue=function(){return this.value},i.prototype.getStartEnd=function(){return this.startEnd},i.prototype.getResultPoints=function(){return this.resultPoints},i.prototype.equals=function(e){return e instanceof i&&this.value===e.value},i.prototype.hashCode=function(){return this.value},i}(),Pi=function(){function i(){}return i.getRSSvalue=function(e,n,s){var c,l,g=0;try{for(var m=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),y=m.next();!y.done;y=m.next())g+=y.value}catch(Pe){c={error:Pe}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}for(var P=0,B=0,z=e.length,K=0;K<z-1;K++){var ae=void 0;for(ae=1,B|=1<<K;ae<e[K];ae++,B&=~(1<<K)){var ve=i.combins(g-ae-1,z-K-2);if(s&&0===B&&g-ae-(z-K-1)>=z-K-1&&(ve-=i.combins(g-ae-(z-K),z-K-2)),z-K-1>1){for(var Re=0,Ve=g-ae-(z-K-2);Ve>n;Ve--)Re+=i.combins(g-ae-Ve-1,z-K-3);ve-=Re*(z-1-K)}else g-ae>n&&ve--;P+=ve}g-=ae}return P},i.combins=function(e,n){var s,c;e-n>n?(c=n,s=e-n):(c=e-n,s=n);for(var l=1,g=1,m=e;m>s;m--)l*=m,g<=c&&(l/=g,g++);for(;g<=c;)l/=g,g++;return l},i}(),Jn=function(){function i(){}return i.buildBitArray=function(e){var n=2*e.length-1;null==e[e.length-1].getRightChar()&&(n-=1);for(var c=new _i(12*n),l=0,m=e[0].getRightChar().getValue(),y=11;y>=0;--y)m&1<<y&&c.set(l),l++;for(y=1;y<e.length;++y){for(var b=e[y],P=b.getLeftChar().getValue(),B=11;B>=0;--B)P&1<<B&&c.set(l),l++;if(null!==b.getRightChar()){var z=b.getRightChar().getValue();for(B=11;B>=0;--B)z&1<<B&&c.set(l),l++}}return c},i}(),rc=function(){function i(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return i.prototype.getDecodedInformation=function(){return this.decodedInformation},i.prototype.isFinished=function(){return this.finished},i}(),wi=function(){function i(e){this.newPosition=e}return i.prototype.getNewPosition=function(){return this.newPosition},i}();var nl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const uo=function(i){function e(n,s){var c=i.call(this,n)||this;return c.value=s,c}return nl(e,i),e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(wi);var Cl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ss=function(i){function e(n,s,c){var l=i.call(this,n)||this;return c?(l.remaining=!0,l.remainingValue=l.remainingValue):(l.remaining=!1,l.remainingValue=0),l.newString=s,l}return Cl(e,i),e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(wi);var Mu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Nn=function(i){function e(n,s,c){var l=i.call(this,n)||this;if(s<0||s>10||c<0||c>10)throw new Jt;return l.firstDigit=s,l.secondDigit=c,l}return Mu(e,i),e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(wi);var Ou=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Tc=function(){function i(){}return i.parseFieldsInGeneralPurpose=function(e){var n,s,c,l,g,m,y,b;if(!e)return null;if(e.length<2)throw new Ke;var P=e.substring(0,2);try{for(var B=Ou(i.TWO_DIGIT_DATA_LENGTH),z=B.next();!z.done;z=B.next())if((K=z.value)[0]===P)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(2,K[2],e):i.processFixedAI(2,K[1],e)}catch(Gt){n={error:Gt}}finally{try{z&&!z.done&&(s=B.return)&&s.call(B)}finally{if(n)throw n.error}}if(e.length<3)throw new Ke;var ae=e.substring(0,3);try{for(var ve=Ou(i.THREE_DIGIT_DATA_LENGTH),Re=ve.next();!Re.done;Re=ve.next())if((K=Re.value)[0]===ae)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(3,K[2],e):i.processFixedAI(3,K[1],e)}catch(Gt){c={error:Gt}}finally{try{Re&&!Re.done&&(l=ve.return)&&l.call(ve)}finally{if(c)throw c.error}}try{for(var Ve=Ou(i.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),Pe=Ve.next();!Pe.done;Pe=Ve.next())if((K=Pe.value)[0]===ae)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(4,K[2],e):i.processFixedAI(4,K[1],e)}catch(Gt){g={error:Gt}}finally{try{Pe&&!Pe.done&&(m=Ve.return)&&m.call(Ve)}finally{if(g)throw g.error}}if(e.length<4)throw new Ke;var Ye=e.substring(0,4);try{for(var st=Ou(i.FOUR_DIGIT_DATA_LENGTH),Nt=st.next();!Nt.done;Nt=st.next()){var K;if((K=Nt.value)[0]===Ye)return K[1]===i.VARIABLE_LENGTH?i.processVariableAI(4,K[2],e):i.processFixedAI(4,K[1],e)}}catch(Gt){y={error:Gt}}finally{try{Nt&&!Nt.done&&(b=st.return)&&b.call(st)}finally{if(y)throw y.error}}throw new Ke},i.processFixedAI=function(e,n,s){if(s.length<e)throw new Ke;var c=s.substring(0,e);if(s.length<e+n)throw new Ke;var l=s.substring(e,e+n),g=s.substring(e+n),m="("+c+")"+l,y=i.parseFieldsInGeneralPurpose(g);return null==y?m:m+y},i.processVariableAI=function(e,n,s){var l,c=s.substring(0,e),g=s.substring(e,l=s.length<e+n?s.length:e+n),m=s.substring(l),y="("+c+")"+g,b=i.parseFieldsInGeneralPurpose(m);return null==b?y:y+b},i.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",i.VARIABLE_LENGTH=[],20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",i.VARIABLE_LENGTH,20],["22",i.VARIABLE_LENGTH,29],["30",i.VARIABLE_LENGTH,8],["37",i.VARIABLE_LENGTH,8],["90",i.VARIABLE_LENGTH,30],["91",i.VARIABLE_LENGTH,30],["92",i.VARIABLE_LENGTH,30],["93",i.VARIABLE_LENGTH,30],["94",i.VARIABLE_LENGTH,30],["95",i.VARIABLE_LENGTH,30],["96",i.VARIABLE_LENGTH,30],["97",i.VARIABLE_LENGTH,3],["98",i.VARIABLE_LENGTH,30],["99",i.VARIABLE_LENGTH,30]],i.THREE_DIGIT_DATA_LENGTH=[["240",i.VARIABLE_LENGTH,30],["241",i.VARIABLE_LENGTH,30],["242",i.VARIABLE_LENGTH,6],["250",i.VARIABLE_LENGTH,30],["251",i.VARIABLE_LENGTH,30],["253",i.VARIABLE_LENGTH,17],["254",i.VARIABLE_LENGTH,20],["400",i.VARIABLE_LENGTH,30],["401",i.VARIABLE_LENGTH,30],["402",17],["403",i.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",i.VARIABLE_LENGTH,20],["421",i.VARIABLE_LENGTH,15],["422",3],["423",i.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],i.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",i.VARIABLE_LENGTH,15],["391",i.VARIABLE_LENGTH,18],["392",i.VARIABLE_LENGTH,15],["393",i.VARIABLE_LENGTH,18],["703",i.VARIABLE_LENGTH,30]],i.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",i.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",i.VARIABLE_LENGTH,20],["8003",i.VARIABLE_LENGTH,30],["8004",i.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",i.VARIABLE_LENGTH,30],["8008",i.VARIABLE_LENGTH,12],["8018",18],["8020",i.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",i.VARIABLE_LENGTH,70],["8200",i.VARIABLE_LENGTH,70]],i}(),eu=function(){function i(e){this.buffer=new gn,this.information=e}return i.prototype.decodeAllCodes=function(e,n){for(var s=n,c=null;;){var l=this.decodeGeneralPurposeField(s,c),g=Tc.parseFieldsInGeneralPurpose(l.getNewString());if(null!=g&&e.append(g),c=l.isRemaining()?""+l.getRemainingValue():null,s===l.getNewPosition())break;s=l.getNewPosition()}return e.toString()},i.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},i.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return new Nn(this.information.getSize(),0===n?Nn.FNC1:n-1,Nn.FNC1)}var s=this.extractNumericValueFromBitArray(e,7);return new Nn(e+7,(s-8)/11,(s-8)%11)},i.prototype.extractNumericValueFromBitArray=function(e,n){return i.extractNumericValueFromBitArray(this.information,e,n)},i.extractNumericValueFromBitArray=function(e,n,s){for(var c=0,l=0;l<s;++l)e.get(n+l)&&(c|=1<<s-l-1);return c},i.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),null!=n&&this.buffer.append(n),this.current.setPosition(e);var s=this.parseBlocks();return null!=s&&s.isRemaining()?new Ss(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new Ss(this.current.getPosition(),this.buffer.toString())},i.prototype.parseBlocks=function(){var e,n;do{var s=this.current.getPosition();if(e=this.current.isAlpha()?(n=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(n=this.parseIsoIec646Block()).isFinished():(n=this.parseNumericBlock()).isFinished(),s===this.current.getPosition()&&!e)break}while(!e);return n.getDecodedInformation()},i.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return n=e.isSecondDigitFNC1()?new Ss(this.current.getPosition(),this.buffer.toString()):new Ss(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new rc(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return n=new Ss(this.current.getPosition(),this.buffer.toString()),new rc(!0,n);this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new rc(!1)},i.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Ss(this.current.getPosition(),this.buffer.toString());return new rc(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new rc(!1)},i.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Ss(this.current.getPosition(),this.buffer.toString());return new rc(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new rc(!1)},i.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<116)return!0;if(e+8>this.information.getSize())return!1;var c=this.extractNumericValueFromBitArray(e,8);return c>=232&&c<253},i.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(15===n)return new uo(e+5,uo.FNC1);if(n>=5&&n<15)return new uo(e+5,"0"+(n-5));var l,s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<90)return new uo(e+7,""+(s+1));if(s>=90&&s<116)return new uo(e+7,""+(s+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new Jt}return new uo(e+8,l)},i.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(e,6);return s>=16&&s<63},i.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(15===n)return new uo(e+5,uo.FNC1);if(n>=5&&n<15)return new uo(e+5,"0"+(n-5));var c,s=this.extractNumericValueFromBitArray(e,6);if(s>=32&&s<58)return new uo(e+6,""+(s+33));switch(s){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Zo("Decoding invalid alphanumeric value: "+s)}return new uo(e+6,c)},i.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(2===n){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},i.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},i.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},i}(),Al=function(){function i(e){this.information=e,this.generalDecoder=new eu(e)}return i.prototype.getInformation=function(){return this.information},i.prototype.getGeneralDecoder=function(){return this.generalDecoder},i}();var So=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const zs=function(i){function e(n){return i.call(this,n)||this}return So(e,i),e.prototype.encodeCompressedGtin=function(n,s){n.append("(01)");var c=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,s,c)},e.prototype.encodeCompressedGtinWithoutAI=function(n,s,c){for(var l=0;l<4;++l){var g=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*l,10);g/100==0&&n.append("0"),g/10==0&&n.append("0"),n.append(g)}e.appendCheckDigit(n,c)},e.appendCheckDigit=function(n,s){for(var c=0,l=0;l<13;l++){var g=n.charAt(l+s).charCodeAt(0)-48;c+=1&l?g:3*g}10==(c=10-c%10)&&(c=0),n.append(c)},e.GTIN_SIZE=40,e}(Al);var tu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const wa=function(i){function e(n){return i.call(this,n)||this}return tu(e,i),e.prototype.parseInformation=function(){var n=new gn;n.append("(01)");var s=n.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(c),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(zs);var xc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ud=function(i){function e(n){return i.call(this,n)||this}return xc(e,i),e.prototype.parseInformation=function(){var n=new gn;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Al);var il=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const jd=function(i){function e(n){return i.call(this,n)||this}return il(e,i),e.prototype.encodeCompressedWeight=function(n,s,c){var l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,c);this.addWeightCode(n,l);for(var g=this.checkWeight(l),m=1e5,y=0;y<5;++y)g/m==0&&n.append("0"),m/=10;n.append(g)},e}(zs);var Tl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const xl=function(i){function e(n){return i.call(this,n)||this}return Tl(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+jd.GTIN_SIZE+e.WEIGHT_SIZE)throw new Ke;var n=new gn;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+jd.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(jd);var Up=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const jp=function(i){function e(n){return i.call(this,n)||this}return Up(e,i),e.prototype.addWeightCode=function(n,s){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(xl);var Hp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Pf=function(i){function e(n){return i.call(this,n)||this}return Hp(e,i),e.prototype.addWeightCode=function(n,s){n.append(s<1e4?"(3202)":"(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(xl);var Hd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Mh=function(i){function e(n){return i.call(this,n)||this}return Hd(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+zs.GTIN_SIZE)throw new Ke;var n=new gn;this.encodeCompressedGtin(n,e.HEADER_SIZE);var s=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+zs.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(s),n.append(")");var c=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+zs.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(c.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(zs);var Oh=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const O=function(i){function e(n){return i.call(this,n)||this}return Oh(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+zs.GTIN_SIZE)throw new Ke;var n=new gn;this.encodeCompressedGtin(n,e.HEADER_SIZE);var s=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+zs.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(s),n.append(")");var c=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+zs.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);c/100==0&&n.append("0"),c/10==0&&n.append("0"),n.append(c);var l=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+zs.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(l.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(zs);var E=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const k=function(i){function e(n,s,c){var l=i.call(this,n)||this;return l.dateCode=c,l.firstAIdigits=s,l}return E(e,i),e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Ke;var n=new gn;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,s){var c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,e.DATE_SIZE);if(38400!==c){n.append("("),n.append(this.dateCode),n.append(")");var l=c%32,g=(c/=32)%12+1,m=c/=12;m/10==0&&n.append("0"),n.append(m),g/10==0&&n.append("0"),n.append(g),l/10==0&&n.append("0"),n.append(l)}},e.prototype.addWeightCode=function(n,s){n.append("("),n.append(this.firstAIdigits),n.append(s/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(jd),He=function(){function i(e,n,s,c){this.leftchar=e,this.rightchar=n,this.finderpattern=s,this.maybeLast=c}return i.prototype.mayBeLast=function(){return this.maybeLast},i.prototype.getLeftChar=function(){return this.leftchar},i.prototype.getRightChar=function(){return this.rightchar},i.prototype.getFinderPattern=function(){return this.finderpattern},i.prototype.mustBeLast=function(){return null==this.rightchar},i.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},i.equals=function(e,n){return e instanceof i&&i.equalsOrNull(e.leftchar,n.leftchar)&&i.equalsOrNull(e.rightchar,n.rightchar)&&i.equalsOrNull(e.finderpattern,n.finderpattern)},i.equalsOrNull=function(e,n){return null===e?null===n:i.equals(e,n)},i.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},i}(),Vt=function(){function i(e,n,s){this.pairs=e,this.rowNumber=n,this.wasReversed=s}return i.prototype.getPairs=function(){return this.pairs},i.prototype.getRowNumber=function(){return this.rowNumber},i.prototype.isReversed=function(){return this.wasReversed},i.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},i.prototype.toString=function(){return"{ "+this.pairs+" }"},i.prototype.equals=function(e,n){return e instanceof i&&this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed},i.prototype.checkEqualitity=function(e,n){var s;if(e&&n)return e.forEach(function(c,l){n.forEach(function(g){c.getLeftChar().getValue()===g.getLeftChar().getValue()&&c.getRightChar().getValue()===g.getRightChar().getValue()&&c.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(s=!0)})}),s},i}();var wn=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),bn=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const fs=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return wn(e,i),e.prototype.decodeRow=function(n,s,c){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,s))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,s))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,s){for(var c=!1;!c;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,n))}catch(m){if(m instanceof Ke){if(!this.pairs.length)throw new Ke;c=!0}}if(this.checkChecksum())return this.pairs;var l;if(l=!!this.rows.length,this.storeRow(n,!1),l){var g=this.checkRowsBoolean(!1);if(null!=g||null!=(g=this.checkRowsBoolean(!0)))return g}throw new Ke},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var s=null;try{s=this.checkRows(new Array,0)}catch(c){console.log(c)}return n&&(this.rows=this.rows.reverse()),s},e.prototype.checkRows=function(n,s){for(var c,l,g=s;g<this.rows.length;g++){var m=this.rows[g];this.pairs.length=0;try{for(var y=(c=void 0,bn(n)),b=y.next();!b.done;b=y.next())this.pairs.push(b.value.getPairs())}catch(z){c={error:z}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(c)throw c.error}}if(this.pairs.push(m.getPairs()),e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var B=new Array(n);B.push(m);try{return this.checkRows(B,g+1)}catch(z){console.log(z)}}}throw new Ke},e.isValidSequence=function(n){var s,c;try{for(var l=bn(e.FINDER_PATTERN_SEQUENCES),g=l.next();!g.done;g=l.next()){var m=g.value;if(!(n.length>m.length)){for(var y=!0,b=0;b<n.length;b++)if(n[b].getFinderPattern().getValue()!==m[b]){y=!1;break}if(y)return!0}}}catch(P){s={error:P}}finally{try{g&&!g.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}return!1},e.prototype.storeRow=function(n,s){for(var c=0,l=!1,g=!1;c<this.rows.length;){var m=this.rows[c];if(m.getRowNumber()>n){g=m.isEquivalent(this.pairs);break}l=m.isEquivalent(this.pairs),c++}g||l||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Vt(this.pairs,n,s)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,s){var c,l,g,m,y,b;try{for(var P=bn(s),B=P.next();!B.done;B=P.next()){var z=B.value;if(z.getPairs().length!==n.length)try{for(var ae=(g=void 0,bn(z.getPairs())),ve=ae.next();!ve.done;ve=ae.next()){var Re=ve.value;try{for(var Pe=(y=void 0,bn(n)),Ye=Pe.next();!Ye.done;Ye=Pe.next())if(He.equals(Re,Ye.value)){!0;break}}catch(Nt){y={error:Nt}}finally{try{Ye&&!Ye.done&&(b=Pe.return)&&b.call(Pe)}finally{if(y)throw y.error}}}}catch(Nt){g={error:Nt}}finally{try{ve&&!ve.done&&(m=ae.return)&&m.call(ae)}finally{if(g)throw g.error}}}}catch(Nt){c={error:Nt}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}},e.isPartialRow=function(n,s){var c,l,g,m,y,b;try{for(var P=bn(s),B=P.next();!B.done;B=P.next()){var z=B.value,K=!0;try{for(var ae=(g=void 0,bn(n)),ve=ae.next();!ve.done;ve=ae.next()){var Re=ve.value,Ve=!1;try{for(var Pe=(y=void 0,bn(z.getPairs())),Ye=Pe.next();!Ye.done;Ye=Pe.next())if(Re.equals(Ye.value)){Ve=!0;break}}catch(Nt){y={error:Nt}}finally{try{Ye&&!Ye.done&&(b=Pe.return)&&b.call(Pe)}finally{if(y)throw y.error}}if(!Ve){K=!1;break}}}catch(Nt){g={error:Nt}}finally{try{ve&&!ve.done&&(m=ae.return)&&m.call(ae)}finally{if(g)throw g.error}}if(K)return!0}}catch(Nt){c={error:Nt}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var c=function te(i){try{if(i.get(1))return new wa(i);if(!i.get(2))return new Ud(i);switch(eu.extractNumericValueFromBitArray(i,1,4)){case 4:return new jp(i);case 5:return new Pf(i)}switch(eu.extractNumericValueFromBitArray(i,1,5)){case 12:return new Mh(i);case 13:return new O(i)}switch(eu.extractNumericValueFromBitArray(i,1,7)){case 56:return new k(i,"310","11");case 57:return new k(i,"320","11");case 58:return new k(i,"310","13");case 59:return new k(i,"320","13");case 60:return new k(i,"310","15");case 61:return new k(i,"320","15");case 62:return new k(i,"310","17");case 63:return new k(i,"320","17")}}catch(c){throw console.log(c),new Zo("unknown decoder: "+i)}}(Jn.buildBitArray(n)),l=c.parseInformation(),g=n[0].getFinderPattern().getResultPoints(),m=n[n.length-1].getFinderPattern().getResultPoints();return new qi(l,null,null,[g[0],g[1],m[0],m[1]],dn.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),s=n.getLeftChar(),c=n.getRightChar();if(null===c)return!1;for(var l=c.getChecksumPortion(),g=2,m=1;m<this.pairs.size();++m){var y=this.pairs.get(m);l+=y.getLeftChar().getChecksumPortion(),g++;var b=y.getRightChar();null!=b&&(l+=b.getChecksumPortion(),g++)}return 211*(g-4)+(l%=211)===s.getValue()},e.getNextSecondBar=function(n,s){var c;return n.get(s)?(c=n.getNextUnset(s),c=n.getNextSet(c)):(c=n.getNextSet(s),c=n.getNextUnset(c)),c},e.prototype.retrieveNextPair=function(n,s,c){var l=s.length%2==0;this.startFromEven&&(l=!l);var g,m=!0,y=-1;do{this.findNextPair(n,s,y),null===(g=this.parseFoundFinderPattern(n,c,l))?y=e.getNextSecondBar(n,this.startEnd[0]):m=!1}while(m);var P,b=this.decodeDataCharacter(n,g,l,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new Ke;try{P=this.decodeDataCharacter(n,g,l,!1)}catch(B){P=null,console.log(B)}return new He(b,P,g,!0)},e.prototype.isEmptyPair=function(n){return 0===n.length},e.prototype.findNextPair=function(n,s,c){var l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;var m,g=n.getSize();m=c>=0?c:this.isEmptyPair(s)?0:s[s.length-1].getFinderPattern().getStartEnd()[1];var b=s.length%2!=0;this.startFromEven&&(b=!b);for(var P=!1;m<g&&(P=!n.get(m));)m++;for(var B=0,z=m,K=m;K<g;K++)if(n.get(K)!==P)l[B]++;else{if(3===B){if(b&&e.reverseCounters(l),e.isFinderPattern(l))return this.startEnd[0]=z,void(this.startEnd[1]=K);b&&e.reverseCounters(l),z+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,B--}else B++;l[B]=1,P=!P}throw new Ke},e.reverseCounters=function(n){for(var s=n.length,c=0;c<s/2;++c){var l=n[c];n[c]=n[s-c-1],n[s-c-1]=l}},e.prototype.parseFoundFinderPattern=function(n,s,c){var l,g,m;if(c){for(var y=this.startEnd[0]-1;y>=0&&!n.get(y);)y--;y++,l=this.startEnd[0]-y,g=y,m=this.startEnd[1]}else g=this.startEnd[0],l=(m=n.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var P,b=this.getDecodeFinderCounters();Hr.arraycopy(b,0,b,1,b.length-1),b[0]=l;try{P=this.parseFinderValue(b,e.FINDER_PATTERNS)}catch{return null}return new ds(P,[g,m],g,m,s)},e.prototype.decodeDataCharacter=function(n,s,c,l){for(var g=this.getDataCharacterCounters(),m=0;m<g.length;m++)g[m]=0;if(l)e.recordPatternInReverse(n,s.getStartEnd()[0],g);else{e.recordPattern(n,s.getStartEnd()[1],g);for(var y=0,b=g.length-1;y<b;y++,b--){var P=g[y];g[y]=g[b],g[b]=P}}var z=Ar.sum(new Int32Array(g))/17,K=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(z-K)/K>.3)throw new Ke;var ae=this.getOddCounts(),ve=this.getEvenCounts(),Re=this.getOddRoundingErrors(),Ve=this.getEvenRoundingErrors();for(y=0;y<g.length;y++){var Pe=1*g[y]/z,Ye=Pe+.5;if(Ye<1){if(Pe<.3)throw new Ke;Ye=1}else if(Ye>8){if(Pe>8.7)throw new Ke;Ye=8}var st=y/2;1&y?(ve[st]=Ye,Ve[st]=Pe-Ye):(ae[st]=Ye,Re[st]=Pe-Ye)}this.adjustOddEvenCounts(17);var Nt=4*s.getValue()+(c?0:2)+(l?0:1)-1,Gt=0,Qt=0;for(y=ae.length-1;y>=0;y--)e.isNotA1left(s,c,l)&&(Qt+=ae[y]*e.WEIGHTS[Nt][2*y]),Gt+=ae[y];var er=0;for(y=ve.length-1;y>=0;y--)e.isNotA1left(s,c,l)&&(er+=ve[y]*e.WEIGHTS[Nt][2*y+1]);var ir=Qt+er;if(1&Gt||Gt>13||Gt<4)throw new Ke;var Eo=(13-Gt)/2,ai=e.SYMBOL_WIDEST[Eo],Oo=9-ai,Nc=Pi.getRSSvalue(ae,ai,!0),Ed=Pi.getRSSvalue(ve,Oo,!1);return new us(Nc*e.EVEN_TOTAL_SUBSET[Eo]+Ed+e.GSUM[Eo],ir)},e.isNotA1left=function(n,s,c){return!(0===n.getValue()&&s&&c)},e.prototype.adjustOddEvenCounts=function(n){var s=Ar.sum(new Int32Array(this.getOddCounts())),c=Ar.sum(new Int32Array(this.getEvenCounts())),l=!1,g=!1;s>13?g=!0:s<4&&(l=!0);var m=!1,y=!1;c>13?y=!0:c<4&&(m=!0);var b=s+c-n,P=!(1&~s),B=!(1&c);if(1===b)if(P){if(B)throw new Ke;g=!0}else{if(!B)throw new Ke;y=!0}else if(-1===b)if(P){if(B)throw new Ke;l=!0}else{if(!B)throw new Ke;m=!0}else{if(0!==b)throw new Ke;if(P){if(!B)throw new Ke;s<c?(l=!0,y=!0):(g=!0,m=!0)}else if(B)throw new Ke}if(l){if(g)throw new Ke;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new Ke;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A=0,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B=1,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C=2,e.FINDER_PAT_B,e.FINDER_PAT_D=3],[e.FINDER_PAT_A,e.FINDER_PAT_E=4,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F=5],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(xn);var nu=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ph=function(i){function e(n,s,c){var l=i.call(this,n,s)||this;return l.count=0,l.finderPattern=c,l}return nu(e,i),e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(us);var Ua=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ed=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Rr=function(i){function e(){var n=null!==i&&i.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return Ua(e,i),e.prototype.decodeRow=function(n,s,c){var l,g,m,y,b=this.decodePair(s,!1,n,c);e.addOrTally(this.possibleLeftPairs,b),s.reverse();var P=this.decodePair(s,!0,n,c);e.addOrTally(this.possibleRightPairs,P),s.reverse();try{for(var B=ed(this.possibleLeftPairs),z=B.next();!z.done;z=B.next()){var K=z.value;if(K.getCount()>1)try{for(var ae=(m=void 0,ed(this.possibleRightPairs)),ve=ae.next();!ve.done;ve=ae.next()){var Re=ve.value;if(Re.getCount()>1&&e.checkChecksum(K,Re))return e.constructResult(K,Re)}}catch(Ve){m={error:Ve}}finally{try{ve&&!ve.done&&(y=ae.return)&&y.call(ae)}finally{if(m)throw m.error}}}}catch(Ve){l={error:Ve}}finally{try{z&&!z.done&&(g=B.return)&&g.call(B)}finally{if(l)throw l.error}}throw new Ke},e.addOrTally=function(n,s){var c,l;if(null!=s){var g=!1;try{for(var m=ed(n),y=m.next();!y.done;y=m.next()){var b=y.value;if(b.getValue()===s.getValue()){b.incrementCount(),g=!0;break}}}catch(P){c={error:P}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}g||n.push(s)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,s){for(var c=4537077*n.getValue()+s.getValue(),l=new String(c).toString(),g=new gn,m=13-l.length;m>0;m--)g.append("0");g.append(l);var y=0;for(m=0;m<13;m++){var b=g.charAt(m).charCodeAt(0)-48;y+=1&m?b:3*b}10==(y=10-y%10)&&(y=0),g.append(y.toString());var P=n.getFinderPattern().getResultPoints(),B=s.getFinderPattern().getResultPoints();return new qi(g.toString(),null,0,[P[0],P[1],B[0],B[1]],dn.RSS_14,(new Date).getTime())},e.checkChecksum=function(n,s){var c=(n.getChecksumPortion()+16*s.getChecksumPortion())%79,l=9*n.getFinderPattern().getValue()+s.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,c===l},e.prototype.decodePair=function(n,s,c,l){try{var g=this.findFinderPattern(n,s),m=this.parseFoundFinderPattern(n,c,s,g),y=null==l?null:l.get(Vn.NEED_RESULT_POINT_CALLBACK);if(null!=y){var b=(g[0]+g[1])/2;s&&(b=n.getSize()-1-b),y.foundPossibleResultPoint(new _n(b,c))}var P=this.decodeDataCharacter(n,m,!0),B=this.decodeDataCharacter(n,m,!1);return new Ph(1597*P.getValue()+B.getValue(),P.getChecksumPortion()+4*B.getChecksumPortion(),m)}catch{return null}},e.prototype.decodeDataCharacter=function(n,s,c){for(var l=this.getDataCharacterCounters(),g=0;g<l.length;g++)l[g]=0;if(c)Pn.recordPatternInReverse(n,s.getStartEnd()[0],l);else{Pn.recordPattern(n,s.getStartEnd()[1]+1,l);for(var m=0,y=l.length-1;m<y;m++,y--){var b=l[m];l[m]=l[y],l[y]=b}}var P=c?16:15,B=Ar.sum(new Int32Array(l))/P,z=this.getOddCounts(),K=this.getEvenCounts(),ae=this.getOddRoundingErrors(),ve=this.getEvenRoundingErrors();for(m=0;m<l.length;m++){var Re=l[m]/B,Ve=Math.floor(Re+.5);Ve<1?Ve=1:Ve>8&&(Ve=8);var Pe=Math.floor(m/2);1&m?(K[Pe]=Ve,ve[Pe]=Re-Ve):(z[Pe]=Ve,ae[Pe]=Re-Ve)}this.adjustOddEvenCounts(c,P);var Ye=0,st=0;for(m=z.length-1;m>=0;m--)st*=9,st+=z[m],Ye+=z[m];var Nt=0,Gt=0;for(m=K.length-1;m>=0;m--)Nt*=9,Nt+=K[m],Gt+=K[m];var vn,er,Qt=st+3*Nt;if(c){if(1&Ye||Ye>12||Ye<4)throw new Ke;var ir=9-(er=e.OUTSIDE_ODD_WIDEST[vn=(12-Ye)/2]),Eo=Pi.getRSSvalue(z,er,!1),ai=Pi.getRSSvalue(K,ir,!0);return new us(Eo*e.OUTSIDE_EVEN_TOTAL_SUBSET[vn]+ai+e.OUTSIDE_GSUM[vn],Qt)}if(1&Gt||Gt>10||Gt<4)throw new Ke;return ir=9-(er=e.INSIDE_ODD_WIDEST[vn=(10-Gt)/2]),Eo=Pi.getRSSvalue(z,er,!0),ai=Pi.getRSSvalue(K,ir,!1),new us(ai*e.INSIDE_ODD_TOTAL_SUBSET[vn]+Eo+e.INSIDE_GSUM[vn],Qt)},e.prototype.findFinderPattern=function(n,s){var c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var l=n.getSize(),g=!1,m=0;m<l&&s!==(g=!n.get(m));)m++;for(var y=0,b=m,P=m;P<l;P++)if(n.get(P)!==g)c[y]++;else{if(3===y){if(xn.isFinderPattern(c))return[b,P];b+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,g=!g}throw new Ke},e.prototype.parseFoundFinderPattern=function(n,s,c,l){for(var g=n.get(l[0]),m=l[0]-1;m>=0&&g!==n.get(m);)m--;m++;var y=l[0]-m,b=this.getDecodeFinderCounters(),P=new Int32Array(b.length);Hr.arraycopy(b,0,P,1,b.length-1),P[0]=y;var B=this.parseFinderValue(P,e.FINDER_PATTERNS),z=m,K=l[1];return c&&(z=n.getSize()-1-z,K=n.getSize()-1-K),new ds(B,[m,l[1]],z,K,s)},e.prototype.adjustOddEvenCounts=function(n,s){var c=Ar.sum(new Int32Array(this.getOddCounts())),l=Ar.sum(new Int32Array(this.getEvenCounts())),g=!1,m=!1,y=!1,b=!1;n?(c>12?m=!0:c<4&&(g=!0),l>12?b=!0:l<4&&(y=!0)):(c>11?m=!0:c<5&&(g=!0),l>10?b=!0:l<4&&(y=!0));var P=c+l-s,B=(1&c)==(n?1:0),z=!(1&~l);if(1===P)if(B){if(z)throw new Ke;m=!0}else{if(!z)throw new Ke;b=!0}else if(-1===P)if(B){if(z)throw new Ke;g=!0}else{if(!z)throw new Ke;y=!0}else{if(0!==P)throw new Ke;if(B){if(!z)throw new Ke;c<l?(g=!0,b=!0):(m=!0,y=!0)}else if(z)throw new Ke}if(g){if(m)throw new Ke;xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(b)throw new Ke;xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(xn);var Dl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const eo=function(i){function e(n){var s=i.call(this)||this;s.readers=[];var c=n?n.get(Vn.POSSIBLE_FORMATS):null,l=n&&void 0!==n.get(Vn.ASSUME_CODE_39_CHECK_DIGIT),g=n&&void 0!==n.get(Vn.ENABLE_CODE_39_EXTENDED_MODE);return c&&((c.includes(dn.EAN_13)||c.includes(dn.UPC_A)||c.includes(dn.EAN_8)||c.includes(dn.UPC_E))&&s.readers.push(new Ru(n)),c.includes(dn.CODE_39)&&s.readers.push(new Ea(l,g)),c.includes(dn.CODE_93)&&s.readers.push(new bf),c.includes(dn.CODE_128)&&s.readers.push(new ya),c.includes(dn.ITF)&&s.readers.push(new Ju),c.includes(dn.CODABAR)&&s.readers.push(new Vd),c.includes(dn.RSS_14)&&s.readers.push(new Rr),c.includes(dn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),s.readers.push(new fs))),0===s.readers.length&&(s.readers.push(new Ru(n)),s.readers.push(new Ea),s.readers.push(new bf),s.readers.push(new Ru(n)),s.readers.push(new ya),s.readers.push(new Ju),s.readers.push(new Rr)),s}return Dl(e,i),e.prototype.decodeRow=function(n,s,c){for(var l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(n,s,c)}catch{}throw new Ke},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(Pn);var td=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),sc=(function(i){td(function e(n,s){return void 0===n&&(n=500),i.call(this,new eo(s),n,s)||this},i)}(ia),function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}),gr=function(){function i(e,n,s){this.ecCodewords=e,this.ecBlocks=[n],s&&this.ecBlocks.push(s)}return i.prototype.getECCodewords=function(){return this.ecCodewords},i.prototype.getECBlocks=function(){return this.ecBlocks},i}(),ti=function(){function i(e,n){this.count=e,this.dataCodewords=n}return i.prototype.getCount=function(){return this.count},i.prototype.getDataCodewords=function(){return this.dataCodewords},i}();const Rl=function(){function i(e,n,s,c,l,g){var m,y;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=s,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=l,this.ecBlocks=g;var b=0,P=g.getECCodewords(),B=g.getECBlocks();try{for(var z=sc(B),K=z.next();!K.done;K=z.next()){var ae=K.value;b+=ae.getCount()*(ae.getDataCodewords()+P)}}catch(ve){m={error:ve}}finally{try{K&&!K.done&&(y=z.return)&&y.call(z)}finally{if(m)throw m.error}}this.totalCodewords=b}return i.prototype.getVersionNumber=function(){return this.versionNumber},i.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},i.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},i.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},i.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},i.prototype.getTotalCodewords=function(){return this.totalCodewords},i.prototype.getECBlocks=function(){return this.ecBlocks},i.getVersionForDimensions=function(e,n){var s,c;if(1&e||1&n)throw new Jt;try{for(var l=sc(i.VERSIONS),g=l.next();!g.done;g=l.next()){var m=g.value;if(m.symbolSizeRows===e&&m.symbolSizeColumns===n)return m}}catch(y){s={error:y}}finally{try{g&&!g.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}throw new Jt},i.prototype.toString=function(){return""+this.versionNumber},i.buildVersions=function(){return[new i(1,10,10,8,8,new gr(5,new ti(1,3))),new i(2,12,12,10,10,new gr(7,new ti(1,5))),new i(3,14,14,12,12,new gr(10,new ti(1,8))),new i(4,16,16,14,14,new gr(12,new ti(1,12))),new i(5,18,18,16,16,new gr(14,new ti(1,18))),new i(6,20,20,18,18,new gr(18,new ti(1,22))),new i(7,22,22,20,20,new gr(20,new ti(1,30))),new i(8,24,24,22,22,new gr(24,new ti(1,36))),new i(9,26,26,24,24,new gr(28,new ti(1,44))),new i(10,32,32,14,14,new gr(36,new ti(1,62))),new i(11,36,36,16,16,new gr(42,new ti(1,86))),new i(12,40,40,18,18,new gr(48,new ti(1,114))),new i(13,44,44,20,20,new gr(56,new ti(1,144))),new i(14,48,48,22,22,new gr(68,new ti(1,174))),new i(15,52,52,24,24,new gr(42,new ti(2,102))),new i(16,64,64,14,14,new gr(56,new ti(2,140))),new i(17,72,72,16,16,new gr(36,new ti(4,92))),new i(18,80,80,18,18,new gr(48,new ti(4,114))),new i(19,88,88,20,20,new gr(56,new ti(4,144))),new i(20,96,96,22,22,new gr(68,new ti(4,174))),new i(21,104,104,24,24,new gr(56,new ti(6,136))),new i(22,120,120,18,18,new gr(68,new ti(6,175))),new i(23,132,132,20,20,new gr(62,new ti(8,163))),new i(24,144,144,22,22,new gr(62,new ti(8,156),new ti(2,155))),new i(25,8,18,6,16,new gr(7,new ti(1,5))),new i(26,8,32,6,14,new gr(11,new ti(1,10))),new i(27,12,26,10,24,new gr(14,new ti(1,16))),new i(28,12,36,10,16,new gr(18,new ti(1,22))),new i(29,16,36,14,16,new gr(24,new ti(1,32))),new i(30,16,48,14,22,new gr(28,new ti(1,49)))]},i.VERSIONS=i.buildVersions(),i}(),Am=function(){function i(e){var n=e.getHeight();if(n<8||n>144||1&n)throw new Jt;this.version=i.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new nr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return i.prototype.getVersion=function(){return this.version},i.readVersion=function(e){var n=e.getHeight(),s=e.getWidth();return Rl.getVersionForDimensions(n,s)},i.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,s=4,c=0,l=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth(),m=!1,y=!1,b=!1,P=!1;do{if(s!==l||0!==c||m)if(s===l-2&&0===c&&3&g&&!y)e[n++]=255&this.readCorner2(l,g),s-=2,c+=2,y=!0;else if(s!==l+4||2!==c||7&g||b)if(s!==l-2||0!==c||4!=(7&g)||P){do{s<l&&c>=0&&!this.readMappingMatrix.get(c,s)&&(e[n++]=255&this.readUtah(s,c,l,g)),s-=2,c+=2}while(s>=0&&c<g);s+=1,c+=3;do{s>=0&&c<g&&!this.readMappingMatrix.get(c,s)&&(e[n++]=255&this.readUtah(s,c,l,g)),s+=2,c-=2}while(s<l&&c>=0);s+=3,c+=1}else e[n++]=255&this.readCorner4(l,g),s-=2,c+=2,P=!0;else e[n++]=255&this.readCorner3(l,g),s-=2,c+=2,b=!0;else e[n++]=255&this.readCorner1(l,g),s-=2,c+=2,m=!0}while(s<l||c<g);if(n!==this.version.getTotalCodewords())throw new Jt;return e},i.prototype.readModule=function(e,n,s,c){return e<0&&(e+=s,n+=4-(s+4&7)),n<0&&(n+=c,e+=4-(c+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},i.prototype.readUtah=function(e,n,s,c){var l=0;return this.readModule(e-2,n-2,s,c)&&(l|=1),l<<=1,this.readModule(e-2,n-1,s,c)&&(l|=1),l<<=1,this.readModule(e-1,n-2,s,c)&&(l|=1),l<<=1,this.readModule(e-1,n-1,s,c)&&(l|=1),l<<=1,this.readModule(e-1,n,s,c)&&(l|=1),l<<=1,this.readModule(e,n-2,s,c)&&(l|=1),l<<=1,this.readModule(e,n-1,s,c)&&(l|=1),l<<=1,this.readModule(e,n,s,c)&&(l|=1),l},i.prototype.readCorner1=function(e,n){var s=0;return this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,1,e,n)&&(s|=1),s<<=1,this.readModule(e-1,2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(2,n-1,e,n)&&(s|=1),s<<=1,this.readModule(3,n-1,e,n)&&(s|=1),s},i.prototype.readCorner2=function(e,n){var s=0;return this.readModule(e-3,0,e,n)&&(s|=1),s<<=1,this.readModule(e-2,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(0,n-4,e,n)&&(s|=1),s<<=1,this.readModule(0,n-3,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s},i.prototype.readCorner3=function(e,n){var s=0;return this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(0,n-3,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-3,e,n)&&(s|=1),s<<=1,this.readModule(1,n-2,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s},i.prototype.readCorner4=function(e,n){var s=0;return this.readModule(e-3,0,e,n)&&(s|=1),s<<=1,this.readModule(e-2,0,e,n)&&(s|=1),s<<=1,this.readModule(e-1,0,e,n)&&(s|=1),s<<=1,this.readModule(0,n-2,e,n)&&(s|=1),s<<=1,this.readModule(0,n-1,e,n)&&(s|=1),s<<=1,this.readModule(1,n-1,e,n)&&(s|=1),s<<=1,this.readModule(2,n-1,e,n)&&(s|=1),s<<=1,this.readModule(3,n-1,e,n)&&(s|=1),s},i.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new yn("Dimension of bitMatrix must match the version size");for(var c=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),g=n/c|0,m=s/l|0,P=new nr(m*l,g*c),B=0;B<g;++B)for(var z=B*c,K=0;K<m;++K)for(var ae=K*l,ve=0;ve<c;++ve)for(var Re=B*(c+2)+1+ve,Ve=z+ve,Pe=0;Pe<l;++Pe)e.get(K*(l+2)+1+Pe,Re)&&P.set(ae+Pe,Ve);return P},i}();var Nh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const nd=function(){function i(e,n){this.numDataCodewords=e,this.codewords=n}return i.getDataBlocks=function(e,n){var s,c,l,g,m=n.getECBlocks(),y=0,b=m.getECBlocks();try{for(var P=Nh(b),B=P.next();!B.done;B=P.next())y+=(z=B.value).getCount()}catch(Nc){s={error:Nc}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}var K=new Array(y),ae=0;try{for(var ve=Nh(b),Re=ve.next();!Re.done;Re=ve.next())for(var z=Re.value,Ve=0;Ve<z.getCount();Ve++){var Pe=z.getDataCodewords(),Ye=m.getECCodewords()+Pe;K[ae++]=new i(Pe,new Uint8Array(Ye))}}catch(Nc){l={error:Nc}}finally{try{Re&&!Re.done&&(g=ve.return)&&g.call(ve)}finally{if(l)throw l.error}}var Nt=K[0].codewords.length-m.getECCodewords(),Gt=Nt-1,Qt=0;for(Ve=0;Ve<Gt;Ve++)for(var vn=0;vn<ae;vn++)K[vn].codewords[Ve]=e[Qt++];var er=24===n.getVersionNumber(),ir=er?8:ae;for(vn=0;vn<ir;vn++)K[vn].codewords[Nt-1]=e[Qt++];var Eo=K[0].codewords.length;for(Ve=Nt;Ve<Eo;Ve++)for(vn=0;vn<ae;vn++){var ai=er?(vn+8)%ae:vn;K[ai].codewords[er&&ai>7?Ve-1:Ve]=e[Qt++]}if(Qt!==e.length)throw new yn;return K},i.prototype.getNumDataCodewords=function(){return this.numDataCodewords},i.prototype.getCodewords=function(){return this.codewords},i}(),rd=function(){function i(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return i.prototype.getBitOffset=function(){return this.bitOffset},i.prototype.getByteOffset=function(){return this.byteOffset},i.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new yn(""+e);var n=0,s=this.bitOffset,c=this.byteOffset,l=this.bytes;if(s>0){var g=8-s,m=e<g?e:g;n=(l[c]&255>>8-m<<(y=g-m))>>y,e-=m,8===(s+=m)&&(s=0,c++)}if(e>0){for(;e>=8;)n=n<<8|255&l[c],c++,e-=8;var y;e>0&&(n=n<<e|(l[c]&255>>(y=8-e)<<y)>>y,s+=e)}return this.bitOffset=s,this.byteOffset=c,n},i.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},i}();var Ho=function(i){return i[i.PAD_ENCODE=0]="PAD_ENCODE",i[i.ASCII_ENCODE=1]="ASCII_ENCODE",i[i.C40_ENCODE=2]="C40_ENCODE",i[i.TEXT_ENCODE=3]="TEXT_ENCODE",i[i.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",i[i.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",i[i.BASE256_ENCODE=6]="BASE256_ENCODE",i}(Ho||{});const Pu=function(){function i(){}return i.decode=function(e){var n=new rd(e),s=new gn,c=new gn,l=new Array,g=Ho.ASCII_ENCODE;do{if(g===Ho.ASCII_ENCODE)g=this.decodeAsciiSegment(n,s,c);else{switch(g){case Ho.C40_ENCODE:this.decodeC40Segment(n,s);break;case Ho.TEXT_ENCODE:this.decodeTextSegment(n,s);break;case Ho.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,s);break;case Ho.EDIFACT_ENCODE:this.decodeEdifactSegment(n,s);break;case Ho.BASE256_ENCODE:this.decodeBase256Segment(n,s,l);break;default:throw new Jt}g=Ho.ASCII_ENCODE}}while(g!==Ho.PAD_ENCODE&&n.available()>0);return c.length()>0&&s.append(c.toString()),new Iu(e,s.toString(),0===l.length?null:l,null)},i.decodeAsciiSegment=function(e,n,s){var c=!1;do{var l=e.readBits(8);if(0===l)throw new Jt;if(l<=128)return c&&(l+=128),n.append(String.fromCharCode(l-1)),Ho.ASCII_ENCODE;if(129===l)return Ho.PAD_ENCODE;if(l<=229){var g=l-130;g<10&&n.append("0"),n.append(""+g)}else switch(l){case 230:return Ho.C40_ENCODE;case 231:return Ho.BASE256_ENCODE;case 232:n.append("\x1d");break;case 233:case 234:case 241:break;case 235:c=!0;break;case 236:n.append("[)>\x1e05\x1d"),s.insert(0,"\x1e\x04");break;case 237:n.append("[)>\x1e06\x1d"),s.insert(0,"\x1e\x04");break;case 238:return Ho.ANSIX12_ENCODE;case 239:return Ho.TEXT_ENCODE;case 240:return Ho.EDIFACT_ENCODE;default:if(254!==l||0!==e.available())throw new Jt}}while(e.available()>0);return Ho.ASCII_ENCODE},i.decodeC40Segment=function(e,n){var s=!1,c=[],l=0;do{if(8===e.available())return;var g=e.readBits(8);if(254===g)return;this.parseTwoBytes(g,e.readBits(8),c);for(var m=0;m<3;m++){var y=c[m];switch(l){case 0:if(y<3)l=y+1;else{if(!(y<this.C40_BASIC_SET_CHARS.length))throw new Jt;var b=this.C40_BASIC_SET_CHARS[y];s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b)}break;case 1:s?(n.append(String.fromCharCode(y+128)),s=!1):n.append(String.fromCharCode(y)),l=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length)b=this.C40_SHIFT2_SET_CHARS[y],s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b);else switch(y){case 27:n.append("\x1d");break;case 30:s=!0;break;default:throw new Jt}l=0;break;case 3:s?(n.append(String.fromCharCode(y+224)),s=!1):n.append(String.fromCharCode(y+96)),l=0;break;default:throw new Jt}}}while(e.available()>0)},i.decodeTextSegment=function(e,n){var s=!1,c=[],l=0;do{if(8===e.available())return;var g=e.readBits(8);if(254===g)return;this.parseTwoBytes(g,e.readBits(8),c);for(var m=0;m<3;m++){var y=c[m];switch(l){case 0:if(y<3)l=y+1;else{if(!(y<this.TEXT_BASIC_SET_CHARS.length))throw new Jt;var b=this.TEXT_BASIC_SET_CHARS[y];s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b)}break;case 1:s?(n.append(String.fromCharCode(y+128)),s=!1):n.append(String.fromCharCode(y)),l=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length)b=this.TEXT_SHIFT2_SET_CHARS[y],s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b);else switch(y){case 27:n.append("\x1d");break;case 30:s=!0;break;default:throw new Jt}l=0;break;case 3:if(!(y<this.TEXT_SHIFT3_SET_CHARS.length))throw new Jt;b=this.TEXT_SHIFT3_SET_CHARS[y],s?(n.append(String.fromCharCode(b.charCodeAt(0)+128)),s=!1):n.append(b),l=0;break;default:throw new Jt}}}while(e.available()>0)},i.decodeAnsiX12Segment=function(e,n){var s=[];do{if(8===e.available())return;var c=e.readBits(8);if(254===c)return;this.parseTwoBytes(c,e.readBits(8),s);for(var l=0;l<3;l++){var g=s[l];switch(g){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(g<14)n.append(String.fromCharCode(g+44));else{if(!(g<40))throw new Jt;n.append(String.fromCharCode(g+51))}}}}while(e.available()>0)},i.parseTwoBytes=function(e,n,s){var c=(e<<8)+n-1,l=Math.floor(c/1600);s[0]=l,c-=1600*l,l=Math.floor(c/40),s[1]=l,s[2]=c-40*l},i.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var s=0;s<4;s++){var c=e.readBits(6);if(31===c){var l=8-e.getBitOffset();return void(8!==l&&e.readBits(l))}32&c||(c|=64),n.append(String.fromCharCode(c))}}while(e.available()>0)},i.decodeBase256Segment=function(e,n,s){var g,c=1+e.getByteOffset(),l=this.unrandomize255State(e.readBits(8),c++);if((g=0===l?e.available()/8|0:l<250?l:250*(l-249)+this.unrandomize255State(e.readBits(8),c++))<0)throw new Jt;for(var m=new Uint8Array(g),y=0;y<g;y++){if(e.available()<8)throw new Jt;m[y]=this.unrandomize255State(e.readBits(8),c++)}s.push(m);try{n.append(Ce.decode(m,mt.ISO88591))}catch(b){throw new Zo("Platform does not support required encoding: "+b.message)}},i.unrandomize255State=function(e,n){var c=e-(149*n%255+1);return c>=0?c:c+256},i.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],i.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i.TEXT_SHIFT2_SET_CHARS=i.C40_SHIFT2_SET_CHARS,i.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7f"],i}(),Ml=function(){function i(){this.rsDecoder=new Fa(hi.DATA_MATRIX_FIELD_256)}return i.prototype.decode=function(e){var n,s,c=new Am(e),l=c.getVersion(),g=c.readCodewords(),m=nd.getDataBlocks(g,l),y=0;try{for(var b=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(m),P=b.next();!P.done;P=b.next())y+=P.value.getNumDataCodewords()}catch(Ye){n={error:Ye}}finally{try{P&&!P.done&&(s=b.return)&&s.call(b)}finally{if(n)throw n.error}}for(var z=new Uint8Array(y),K=m.length,ae=0;ae<K;ae++){var ve=m[ae],Re=ve.getCodewords(),Ve=ve.getNumDataCodewords();this.correctErrors(Re,Ve);for(var Pe=0;Pe<Ve;Pe++)z[Pe*K+ae]=Re[Pe]}return Pu.decode(z)},i.prototype.correctErrors=function(e,n){var s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-n)}catch{throw new mi}for(var c=0;c<n;c++)e[c]=s[c]},i}(),t1=function(){function i(e){this.image=e,this.rectangleDetector=new Nd(this.image)}return i.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new Ke;var s=(n=this.shiftToModuleCenter(n))[0],c=n[1],l=n[2],g=n[3],m=this.transitionsBetween(s,g)+1,y=this.transitionsBetween(l,g)+1;!(1&~m)&&(m+=1),!(1&~y)&&(y+=1),4*m<7*y&&4*y<7*m&&(m=y=Math.max(m,y));var b=i.sampleGrid(this.image,s,c,l,g,m,y);return new ml(b,[s,c,l,g])},i.shiftPoint=function(e,n,s){var c=(n.getX()-e.getX())/(s+1),l=(n.getY()-e.getY())/(s+1);return new _n(e.getX()+c,e.getY()+l)},i.moveAway=function(e,n,s){var c=e.getX(),l=e.getY();return c<n?c-=1:c+=1,l<s?l-=1:l+=1,new _n(c,l)},i.prototype.detectSolid1=function(e){var n=e[0],s=e[1],c=e[3],l=e[2],g=this.transitionsBetween(n,s),m=this.transitionsBetween(s,c),y=this.transitionsBetween(c,l),b=this.transitionsBetween(l,n),P=g,B=[l,n,s,c];return P>m&&(P=m,B[0]=n,B[1]=s,B[2]=c,B[3]=l),P>y&&(P=y,B[0]=s,B[1]=c,B[2]=l,B[3]=n),P>b&&(B[0]=c,B[1]=l,B[2]=n,B[3]=s),B},i.prototype.detectSolid2=function(e){var n=e[0],s=e[1],c=e[2],l=e[3],g=this.transitionsBetween(n,l),m=i.shiftPoint(s,c,4*(g+1)),y=i.shiftPoint(c,s,4*(g+1));return this.transitionsBetween(m,n)<this.transitionsBetween(y,l)?(e[0]=n,e[1]=s,e[2]=c,e[3]=l):(e[0]=s,e[1]=c,e[2]=l,e[3]=n),e},i.prototype.correctTopRight=function(e){var n=e[0],s=e[1],c=e[2],l=e[3],g=this.transitionsBetween(n,l),m=this.transitionsBetween(s,l),y=i.shiftPoint(n,s,4*(m+1)),b=i.shiftPoint(c,s,4*(g+1));g=this.transitionsBetween(y,l),m=this.transitionsBetween(b,l);var P=new _n(l.getX()+(c.getX()-s.getX())/(g+1),l.getY()+(c.getY()-s.getY())/(g+1)),B=new _n(l.getX()+(n.getX()-s.getX())/(m+1),l.getY()+(n.getY()-s.getY())/(m+1));return this.isValid(P)?this.isValid(B)?this.transitionsBetween(y,P)+this.transitionsBetween(b,P)>this.transitionsBetween(y,B)+this.transitionsBetween(b,B)?P:B:P:this.isValid(B)?B:null},i.prototype.shiftToModuleCenter=function(e){var n=e[0],s=e[1],c=e[2],l=e[3],g=this.transitionsBetween(n,l)+1,m=this.transitionsBetween(c,l)+1,y=i.shiftPoint(n,s,4*m),b=i.shiftPoint(c,s,4*g);!(1&~(g=this.transitionsBetween(y,l)+1))&&(g+=1),!(1&~(m=this.transitionsBetween(b,l)+1))&&(m+=1);var z,K,P=(n.getX()+s.getX()+c.getX()+l.getX())/4,B=(n.getY()+s.getY()+c.getY()+l.getY())/4;return n=i.moveAway(n,P,B),s=i.moveAway(s,P,B),c=i.moveAway(c,P,B),l=i.moveAway(l,P,B),y=i.shiftPoint(n,s,4*m),y=i.shiftPoint(y,l,4*g),z=i.shiftPoint(s,n,4*m),z=i.shiftPoint(z,c,4*g),b=i.shiftPoint(c,l,4*m),b=i.shiftPoint(b,s,4*g),K=i.shiftPoint(l,c,4*m),[y,z,b,K=i.shiftPoint(K,n,4*g)]},i.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},i.sampleGrid=function(e,n,s,c,l,g,m){return j.getInstance().sampleGrid(e,g,m,.5,.5,g-.5,.5,g-.5,m-.5,.5,m-.5,n.getX(),n.getY(),l.getX(),l.getY(),c.getX(),c.getY(),s.getX(),s.getY())},i.prototype.transitionsBetween=function(e,n){var s=Math.trunc(e.getX()),c=Math.trunc(e.getY()),l=Math.trunc(n.getX()),g=Math.trunc(n.getY()),m=Math.abs(g-c)>Math.abs(l-s);if(m){var y=s;s=c,c=y,y=l,l=g,g=y}for(var b=Math.abs(l-s),P=Math.abs(g-c),B=-b/2,z=c<g?1:-1,K=s<l?1:-1,ae=0,ve=this.image.get(m?c:s,m?s:c),Re=s,Ve=c;Re!==l;Re+=K){var Pe=this.image.get(m?Ve:Re,m?Re:Ve);if(Pe!==ve&&(ae++,ve=Pe),(B+=P)>0){if(Ve===g)break;Ve+=z,B-=b}}return ae},i}(),Vf=function(){function i(){this.decoder=new Ml}return i.prototype.decode=function(e,n){var s,c;if(void 0===n&&(n=null),null!=n&&n.has(Vn.PURE_BARCODE)){var l=i.extractPureBits(e.getBlackMatrix());s=this.decoder.decode(l),c=i.NO_POINTS}else{var g=new t1(e.getBlackMatrix()).detect();s=this.decoder.decode(g.getBits()),c=g.getPoints()}var m=s.getRawBytes(),y=new qi(s.getText(),m,8*m.length,c,dn.DATA_MATRIX,Hr.currentTimeMillis()),b=s.getByteSegments();null!=b&&y.putMetadata(Zi.BYTE_SEGMENTS,b);var P=s.getECLevel();return null!=P&&y.putMetadata(Zi.ERROR_CORRECTION_LEVEL,P),y},i.prototype.reset=function(){},i.extractPureBits=function(e){var n=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(null==n||null==s)throw new Ke;var c=this.moduleSize(n,e),l=n[1],m=n[0],b=(s[0]-m+1)/c,P=(s[1]-l+1)/c;if(b<=0||P<=0)throw new Ke;var B=c/2;l+=B,m+=B;for(var z=new nr(b,P),K=0;K<P;K++)for(var ae=l+K*c,ve=0;ve<b;ve++)e.get(m+ve*c,ae)&&z.set(ve,K);return z},i.moduleSize=function(e,n){for(var s=n.getWidth(),c=e[0],l=e[1];c<s&&n.get(c,l);)c++;if(c===s)throw new Ke;var g=c-e[0];if(0===g)throw new Ke;return g},i.NO_POINTS=[],i}();var Tm=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),cc=(function(i){Tm(function e(n){return void 0===n&&(n=500),i.call(this,new Vf,n)||this},i)}(ia),function(i){return i[i.L=0]="L",i[i.M=1]="M",i[i.Q=2]="Q",i[i.H=3]="H",i}(cc||{}));const iu=function(){function i(e,n,s){this.value=e,this.stringValue=n,this.bits=s,i.FOR_BITS.set(s,this),i.FOR_VALUE.set(e,this)}return i.prototype.getValue=function(){return this.value},i.prototype.getBits=function(){return this.bits},i.fromString=function(e){switch(e){case"L":return i.L;case"M":return i.M;case"Q":return i.Q;case"H":return i.H;default:throw new qr(e+"not available")}},i.prototype.toString=function(){return this.stringValue},i.prototype.equals=function(e){return e instanceof i&&this.value===e.value},i.forBits=function(e){if(e<0||e>=i.FOR_BITS.size)throw new yn;return i.FOR_BITS.get(e)},i.FOR_BITS=new Map,i.FOR_VALUE=new Map,i.L=new i(cc.L,"L",1),i.M=new i(cc.M,"M",0),i.Q=new i(cc.Q,"Q",3),i.H=new i(cc.H,"H",2),i}(),xm=function(){function i(e){this.errorCorrectionLevel=iu.forBits(e>>3&3),this.dataMask=7&e}return i.numBitsDiffering=function(e,n){return ar.bitCount(e^n)},i.decodeFormatInformation=function(e,n){var s=i.doDecodeFormatInformation(e,n);return null!==s?s:i.doDecodeFormatInformation(e^i.FORMAT_INFO_MASK_QR,n^i.FORMAT_INFO_MASK_QR)},i.doDecodeFormatInformation=function(e,n){var s,c,l=Number.MAX_SAFE_INTEGER,g=0;try{for(var m=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i.FORMAT_INFO_DECODE_LOOKUP),y=m.next();!y.done;y=m.next()){var b=y.value,P=b[0];if(P===e||P===n)return new i(b[1]);var B=i.numBitsDiffering(e,P);B<l&&(g=b[1],l=B),e!==n&&(B=i.numBitsDiffering(n,P))<l&&(g=b[1],l=B)}}catch(z){s={error:z}}finally{try{y&&!y.done&&(c=m.return)&&c.call(m)}finally{if(s)throw s.error}}return l<=3?new i(g):null},i.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},i.prototype.getDataMask=function(){return this.dataMask},i.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},i.prototype.equals=function(e){return e instanceof i&&(this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask)},i.FORMAT_INFO_MASK_QR=21522,i.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],i}(),ft=function(){function i(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return i.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},i.prototype.getNumBlocks=function(){var e,n,s=0,c=this.ecBlocks;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),g=l.next();!g.done;g=l.next())s+=g.value.getCount()}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s},i.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},i.prototype.getECBlocks=function(){return this.ecBlocks},i}(),_e=function(){function i(e,n){this.count=e,this.dataCodewords=n}return i.prototype.getCount=function(){return this.count},i.prototype.getDataCodewords=function(){return this.dataCodewords},i}(),Rs=function(){function i(e,n){for(var s,c,l=[],g=2;g<arguments.length;g++)l[g-2]=arguments[g];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=l;var m=0,y=l[0].getECCodewordsPerBlock(),b=l[0].getECBlocks();try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(b),B=P.next();!B.done;B=P.next()){var z=B.value;m+=z.getCount()*(z.getDataCodewords()+y)}}catch(K){s={error:K}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}this.totalCodewords=m}return i.prototype.getVersionNumber=function(){return this.versionNumber},i.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},i.prototype.getTotalCodewords=function(){return this.totalCodewords},i.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},i.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},i.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw new Jt;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Jt}},i.getVersionForNumber=function(e){if(e<1||e>40)throw new yn;return i.VERSIONS[e-1]},i.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,s=0,c=0;c<i.VERSION_DECODE_INFO.length;c++){var l=i.VERSION_DECODE_INFO[c];if(l===e)return i.getVersionForNumber(c+7);var g=xm.numBitsDiffering(e,l);g<n&&(s=c+7,n=g)}return n<=3?i.getVersionForNumber(s):null},i.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new nr(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var s=this.alignmentPatternCenters.length,c=0;c<s;c++)for(var l=this.alignmentPatternCenters[c]-2,g=0;g<s;g++)0===c&&(0===g||g===s-1)||c===s-1&&0===g||n.setRegion(this.alignmentPatternCenters[g]-2,l,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},i.prototype.toString=function(){return""+this.versionNumber},i.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),i.VERSIONS=[new i(1,new Int32Array(0),new ft(7,new _e(1,19)),new ft(10,new _e(1,16)),new ft(13,new _e(1,13)),new ft(17,new _e(1,9))),new i(2,Int32Array.from([6,18]),new ft(10,new _e(1,34)),new ft(16,new _e(1,28)),new ft(22,new _e(1,22)),new ft(28,new _e(1,16))),new i(3,Int32Array.from([6,22]),new ft(15,new _e(1,55)),new ft(26,new _e(1,44)),new ft(18,new _e(2,17)),new ft(22,new _e(2,13))),new i(4,Int32Array.from([6,26]),new ft(20,new _e(1,80)),new ft(18,new _e(2,32)),new ft(26,new _e(2,24)),new ft(16,new _e(4,9))),new i(5,Int32Array.from([6,30]),new ft(26,new _e(1,108)),new ft(24,new _e(2,43)),new ft(18,new _e(2,15),new _e(2,16)),new ft(22,new _e(2,11),new _e(2,12))),new i(6,Int32Array.from([6,34]),new ft(18,new _e(2,68)),new ft(16,new _e(4,27)),new ft(24,new _e(4,19)),new ft(28,new _e(4,15))),new i(7,Int32Array.from([6,22,38]),new ft(20,new _e(2,78)),new ft(18,new _e(4,31)),new ft(18,new _e(2,14),new _e(4,15)),new ft(26,new _e(4,13),new _e(1,14))),new i(8,Int32Array.from([6,24,42]),new ft(24,new _e(2,97)),new ft(22,new _e(2,38),new _e(2,39)),new ft(22,new _e(4,18),new _e(2,19)),new ft(26,new _e(4,14),new _e(2,15))),new i(9,Int32Array.from([6,26,46]),new ft(30,new _e(2,116)),new ft(22,new _e(3,36),new _e(2,37)),new ft(20,new _e(4,16),new _e(4,17)),new ft(24,new _e(4,12),new _e(4,13))),new i(10,Int32Array.from([6,28,50]),new ft(18,new _e(2,68),new _e(2,69)),new ft(26,new _e(4,43),new _e(1,44)),new ft(24,new _e(6,19),new _e(2,20)),new ft(28,new _e(6,15),new _e(2,16))),new i(11,Int32Array.from([6,30,54]),new ft(20,new _e(4,81)),new ft(30,new _e(1,50),new _e(4,51)),new ft(28,new _e(4,22),new _e(4,23)),new ft(24,new _e(3,12),new _e(8,13))),new i(12,Int32Array.from([6,32,58]),new ft(24,new _e(2,92),new _e(2,93)),new ft(22,new _e(6,36),new _e(2,37)),new ft(26,new _e(4,20),new _e(6,21)),new ft(28,new _e(7,14),new _e(4,15))),new i(13,Int32Array.from([6,34,62]),new ft(26,new _e(4,107)),new ft(22,new _e(8,37),new _e(1,38)),new ft(24,new _e(8,20),new _e(4,21)),new ft(22,new _e(12,11),new _e(4,12))),new i(14,Int32Array.from([6,26,46,66]),new ft(30,new _e(3,115),new _e(1,116)),new ft(24,new _e(4,40),new _e(5,41)),new ft(20,new _e(11,16),new _e(5,17)),new ft(24,new _e(11,12),new _e(5,13))),new i(15,Int32Array.from([6,26,48,70]),new ft(22,new _e(5,87),new _e(1,88)),new ft(24,new _e(5,41),new _e(5,42)),new ft(30,new _e(5,24),new _e(7,25)),new ft(24,new _e(11,12),new _e(7,13))),new i(16,Int32Array.from([6,26,50,74]),new ft(24,new _e(5,98),new _e(1,99)),new ft(28,new _e(7,45),new _e(3,46)),new ft(24,new _e(15,19),new _e(2,20)),new ft(30,new _e(3,15),new _e(13,16))),new i(17,Int32Array.from([6,30,54,78]),new ft(28,new _e(1,107),new _e(5,108)),new ft(28,new _e(10,46),new _e(1,47)),new ft(28,new _e(1,22),new _e(15,23)),new ft(28,new _e(2,14),new _e(17,15))),new i(18,Int32Array.from([6,30,56,82]),new ft(30,new _e(5,120),new _e(1,121)),new ft(26,new _e(9,43),new _e(4,44)),new ft(28,new _e(17,22),new _e(1,23)),new ft(28,new _e(2,14),new _e(19,15))),new i(19,Int32Array.from([6,30,58,86]),new ft(28,new _e(3,113),new _e(4,114)),new ft(26,new _e(3,44),new _e(11,45)),new ft(26,new _e(17,21),new _e(4,22)),new ft(26,new _e(9,13),new _e(16,14))),new i(20,Int32Array.from([6,34,62,90]),new ft(28,new _e(3,107),new _e(5,108)),new ft(26,new _e(3,41),new _e(13,42)),new ft(30,new _e(15,24),new _e(5,25)),new ft(28,new _e(15,15),new _e(10,16))),new i(21,Int32Array.from([6,28,50,72,94]),new ft(28,new _e(4,116),new _e(4,117)),new ft(26,new _e(17,42)),new ft(28,new _e(17,22),new _e(6,23)),new ft(30,new _e(19,16),new _e(6,17))),new i(22,Int32Array.from([6,26,50,74,98]),new ft(28,new _e(2,111),new _e(7,112)),new ft(28,new _e(17,46)),new ft(30,new _e(7,24),new _e(16,25)),new ft(24,new _e(34,13))),new i(23,Int32Array.from([6,30,54,78,102]),new ft(30,new _e(4,121),new _e(5,122)),new ft(28,new _e(4,47),new _e(14,48)),new ft(30,new _e(11,24),new _e(14,25)),new ft(30,new _e(16,15),new _e(14,16))),new i(24,Int32Array.from([6,28,54,80,106]),new ft(30,new _e(6,117),new _e(4,118)),new ft(28,new _e(6,45),new _e(14,46)),new ft(30,new _e(11,24),new _e(16,25)),new ft(30,new _e(30,16),new _e(2,17))),new i(25,Int32Array.from([6,32,58,84,110]),new ft(26,new _e(8,106),new _e(4,107)),new ft(28,new _e(8,47),new _e(13,48)),new ft(30,new _e(7,24),new _e(22,25)),new ft(30,new _e(22,15),new _e(13,16))),new i(26,Int32Array.from([6,30,58,86,114]),new ft(28,new _e(10,114),new _e(2,115)),new ft(28,new _e(19,46),new _e(4,47)),new ft(28,new _e(28,22),new _e(6,23)),new ft(30,new _e(33,16),new _e(4,17))),new i(27,Int32Array.from([6,34,62,90,118]),new ft(30,new _e(8,122),new _e(4,123)),new ft(28,new _e(22,45),new _e(3,46)),new ft(30,new _e(8,23),new _e(26,24)),new ft(30,new _e(12,15),new _e(28,16))),new i(28,Int32Array.from([6,26,50,74,98,122]),new ft(30,new _e(3,117),new _e(10,118)),new ft(28,new _e(3,45),new _e(23,46)),new ft(30,new _e(4,24),new _e(31,25)),new ft(30,new _e(11,15),new _e(31,16))),new i(29,Int32Array.from([6,30,54,78,102,126]),new ft(30,new _e(7,116),new _e(7,117)),new ft(28,new _e(21,45),new _e(7,46)),new ft(30,new _e(1,23),new _e(37,24)),new ft(30,new _e(19,15),new _e(26,16))),new i(30,Int32Array.from([6,26,52,78,104,130]),new ft(30,new _e(5,115),new _e(10,116)),new ft(28,new _e(19,47),new _e(10,48)),new ft(30,new _e(15,24),new _e(25,25)),new ft(30,new _e(23,15),new _e(25,16))),new i(31,Int32Array.from([6,30,56,82,108,134]),new ft(30,new _e(13,115),new _e(3,116)),new ft(28,new _e(2,46),new _e(29,47)),new ft(30,new _e(42,24),new _e(1,25)),new ft(30,new _e(23,15),new _e(28,16))),new i(32,Int32Array.from([6,34,60,86,112,138]),new ft(30,new _e(17,115)),new ft(28,new _e(10,46),new _e(23,47)),new ft(30,new _e(10,24),new _e(35,25)),new ft(30,new _e(19,15),new _e(35,16))),new i(33,Int32Array.from([6,30,58,86,114,142]),new ft(30,new _e(17,115),new _e(1,116)),new ft(28,new _e(14,46),new _e(21,47)),new ft(30,new _e(29,24),new _e(19,25)),new ft(30,new _e(11,15),new _e(46,16))),new i(34,Int32Array.from([6,34,62,90,118,146]),new ft(30,new _e(13,115),new _e(6,116)),new ft(28,new _e(14,46),new _e(23,47)),new ft(30,new _e(44,24),new _e(7,25)),new ft(30,new _e(59,16),new _e(1,17))),new i(35,Int32Array.from([6,30,54,78,102,126,150]),new ft(30,new _e(12,121),new _e(7,122)),new ft(28,new _e(12,47),new _e(26,48)),new ft(30,new _e(39,24),new _e(14,25)),new ft(30,new _e(22,15),new _e(41,16))),new i(36,Int32Array.from([6,24,50,76,102,128,154]),new ft(30,new _e(6,121),new _e(14,122)),new ft(28,new _e(6,47),new _e(34,48)),new ft(30,new _e(46,24),new _e(10,25)),new ft(30,new _e(2,15),new _e(64,16))),new i(37,Int32Array.from([6,28,54,80,106,132,158]),new ft(30,new _e(17,122),new _e(4,123)),new ft(28,new _e(29,46),new _e(14,47)),new ft(30,new _e(49,24),new _e(10,25)),new ft(30,new _e(24,15),new _e(46,16))),new i(38,Int32Array.from([6,32,58,84,110,136,162]),new ft(30,new _e(4,122),new _e(18,123)),new ft(28,new _e(13,46),new _e(32,47)),new ft(30,new _e(48,24),new _e(14,25)),new ft(30,new _e(42,15),new _e(32,16))),new i(39,Int32Array.from([6,26,54,82,110,138,166]),new ft(30,new _e(20,117),new _e(4,118)),new ft(28,new _e(40,47),new _e(7,48)),new ft(30,new _e(43,24),new _e(22,25)),new ft(30,new _e(10,15),new _e(67,16))),new i(40,Int32Array.from([6,30,58,86,114,142,170]),new ft(30,new _e(19,118),new _e(6,119)),new ft(28,new _e(18,47),new _e(31,48)),new ft(30,new _e(34,24),new _e(34,25)),new ft(30,new _e(20,15),new _e(61,16)))],i}();var fo=function(i){return i[i.DATA_MASK_000=0]="DATA_MASK_000",i[i.DATA_MASK_001=1]="DATA_MASK_001",i[i.DATA_MASK_010=2]="DATA_MASK_010",i[i.DATA_MASK_011=3]="DATA_MASK_011",i[i.DATA_MASK_100=4]="DATA_MASK_100",i[i.DATA_MASK_101=5]="DATA_MASK_101",i[i.DATA_MASK_110=6]="DATA_MASK_110",i[i.DATA_MASK_111=7]="DATA_MASK_111",i}(fo||{});const zp=function(){function i(e,n){this.value=e,this.isMasked=n}return i.prototype.unmaskBitMatrix=function(e,n){for(var s=0;s<n;s++)for(var c=0;c<n;c++)this.isMasked(s,c)&&e.flip(c,s)},i.values=new Map([[fo.DATA_MASK_000,new i(fo.DATA_MASK_000,function(e,n){return!(e+n&1)})],[fo.DATA_MASK_001,new i(fo.DATA_MASK_001,function(e,n){return!(1&e)})],[fo.DATA_MASK_010,new i(fo.DATA_MASK_010,function(e,n){return n%3==0})],[fo.DATA_MASK_011,new i(fo.DATA_MASK_011,function(e,n){return(e+n)%3==0})],[fo.DATA_MASK_100,new i(fo.DATA_MASK_100,function(e,n){return!(Math.floor(e/2)+Math.floor(n/3)&1)})],[fo.DATA_MASK_101,new i(fo.DATA_MASK_101,function(e,n){return e*n%6==0})],[fo.DATA_MASK_110,new i(fo.DATA_MASK_110,function(e,n){return e*n%6<3})],[fo.DATA_MASK_111,new i(fo.DATA_MASK_111,function(e,n){return!(e+n+e*n%3&1)})]]),i}(),n1=function(){function i(e){var n=e.getHeight();if(n<21||1!=(3&n))throw new Jt;this.bitMatrix=e}return i.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var s=5;s>=0;s--)e=this.copyBit(8,s,e);var c=this.bitMatrix.getHeight(),l=0,g=c-7;for(s=c-1;s>=g;s--)l=this.copyBit(8,s,l);for(n=c-8;n<c;n++)l=this.copyBit(n,8,l);if(this.parsedFormatInfo=xm.decodeFormatInformation(e,l),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new Jt},i.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Rs.getVersionForNumber(n);for(var s=0,c=e-11,l=5;l>=0;l--)for(var g=e-9;g>=c;g--)s=this.copyBit(g,l,s);var m=Rs.decodeVersionInformation(s);if(null!==m&&m.getDimensionForVersion()===e)return this.parsedVersion=m,m;for(s=0,g=5;g>=0;g--)for(l=e-9;l>=c;l--)s=this.copyBit(g,l,s);if(null!==(m=Rs.decodeVersionInformation(s))&&m.getDimensionForVersion()===e)return this.parsedVersion=m,m;throw new Jt},i.prototype.copyBit=function(e,n,s){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?s<<1|1:s<<1},i.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),s=zp.values.get(e.getDataMask()),c=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,c);for(var l=n.buildFunctionPattern(),g=!0,m=new Uint8Array(n.getTotalCodewords()),y=0,b=0,P=0,B=c-1;B>0;B-=2){6===B&&B--;for(var z=0;z<c;z++)for(var K=g?c-1-z:z,ae=0;ae<2;ae++)l.get(B-ae,K)||(P++,b<<=1,this.bitMatrix.get(B-ae,K)&&(b|=1),8===P&&(m[y++]=b,P=0,b=0));g=!g}if(y!==n.getTotalCodewords())throw new Jt;return m},i.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=zp.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},i.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},i.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,s=e.getWidth();n<s;n++)for(var c=n+1,l=e.getHeight();c<l;c++)e.get(n,c)!==e.get(c,n)&&(e.flip(c,n),e.flip(n,c))},i}();var Wp=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Vh=function(){function i(e,n){this.numDataCodewords=e,this.codewords=n}return i.getDataBlocks=function(e,n,s){var c,l,g,m;if(e.length!==n.getTotalCodewords())throw new yn;var y=n.getECBlocksForLevel(s),b=0,P=y.getECBlocks();try{for(var B=Wp(P),z=B.next();!z.done;z=B.next())b+=(K=z.value).getCount()}catch(Oo){c={error:Oo}}finally{try{z&&!z.done&&(l=B.return)&&l.call(B)}finally{if(c)throw c.error}}var ae=new Array(b),ve=0;try{for(var Re=Wp(P),Ve=Re.next();!Ve.done;Ve=Re.next())for(var K=Ve.value,Pe=0;Pe<K.getCount();Pe++){var Ye=K.getDataCodewords(),st=y.getECCodewordsPerBlock()+Ye;ae[ve++]=new i(Ye,new Uint8Array(st))}}catch(Oo){g={error:Oo}}finally{try{Ve&&!Ve.done&&(m=Re.return)&&m.call(Re)}finally{if(g)throw g.error}}for(var Nt=ae[0].codewords.length,Gt=ae.length-1;Gt>=0&&ae[Gt].codewords.length!==Nt;)Gt--;Gt++;var vn=Nt-y.getECCodewordsPerBlock(),er=0;for(Pe=0;Pe<vn;Pe++)for(var ir=0;ir<ve;ir++)ae[ir].codewords[Pe]=e[er++];for(ir=Gt;ir<ve;ir++)ae[ir].codewords[vn]=e[er++];var Eo=ae[0].codewords.length;for(Pe=vn;Pe<Eo;Pe++)for(ir=0;ir<ve;ir++)ae[ir].codewords[ir<Gt?Pe:Pe+1]=e[er++];return ae},i.prototype.getNumDataCodewords=function(){return this.numDataCodewords},i.prototype.getCodewords=function(){return this.codewords},i}();var Ki=function(i){return i[i.TERMINATOR=0]="TERMINATOR",i[i.NUMERIC=1]="NUMERIC",i[i.ALPHANUMERIC=2]="ALPHANUMERIC",i[i.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",i[i.BYTE=4]="BYTE",i[i.ECI=5]="ECI",i[i.KANJI=6]="KANJI",i[i.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",i[i.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",i[i.HANZI=9]="HANZI",i}(Ki||{});const to=function(){function i(e,n,s,c){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=s,this.bits=c,i.FOR_BITS.set(c,this),i.FOR_VALUE.set(e,this)}return i.forBits=function(e){var n=i.FOR_BITS.get(e);if(void 0===n)throw new yn;return n},i.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber();return this.characterCountBitsForVersions[n<=9?0:n<=26?1:2]},i.prototype.getValue=function(){return this.value},i.prototype.getBits=function(){return this.bits},i.prototype.equals=function(e){return e instanceof i&&this.value===e.value},i.prototype.toString=function(){return this.stringValue},i.FOR_BITS=new Map,i.FOR_VALUE=new Map,i.TERMINATOR=new i(Ki.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),i.NUMERIC=new i(Ki.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),i.ALPHANUMERIC=new i(Ki.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),i.STRUCTURED_APPEND=new i(Ki.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),i.BYTE=new i(Ki.BYTE,"BYTE",Int32Array.from([8,16,16]),4),i.ECI=new i(Ki.ECI,"ECI",Int32Array.from([0,0,0]),7),i.KANJI=new i(Ki.KANJI,"KANJI",Int32Array.from([8,10,12]),8),i.FNC1_FIRST_POSITION=new i(Ki.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),i.FNC1_SECOND_POSITION=new i(Ki.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),i.HANZI=new i(Ki.HANZI,"HANZI",Int32Array.from([8,10,12]),13),i}(),au=function(){function i(){}return i.decode=function(e,n,s,c){var l=new rd(e),g=new gn,m=new Array,y=-1,b=-1;try{var P=null,B=!1,z=void 0;do{if(l.available()<4)z=to.TERMINATOR;else{var K=l.readBits(4);z=to.forBits(K)}switch(z){case to.TERMINATOR:break;case to.FNC1_FIRST_POSITION:case to.FNC1_SECOND_POSITION:B=!0;break;case to.STRUCTURED_APPEND:if(l.available()<16)throw new Jt;y=l.readBits(8),b=l.readBits(8);break;case to.ECI:var ae=i.parseECIValue(l);if(null===(P=co.getCharacterSetECIByValue(ae)))throw new Jt;break;case to.HANZI:var ve=l.readBits(4),Re=l.readBits(z.getCharacterCountBits(n));ve===i.GB2312_SUBSET&&i.decodeHanziSegment(l,g,Re);break;default:var Ve=l.readBits(z.getCharacterCountBits(n));switch(z){case to.NUMERIC:i.decodeNumericSegment(l,g,Ve);break;case to.ALPHANUMERIC:i.decodeAlphanumericSegment(l,g,Ve,B);break;case to.BYTE:i.decodeByteSegment(l,g,Ve,P,m,c);break;case to.KANJI:i.decodeKanjiSegment(l,g,Ve);break;default:throw new Jt}}}while(z!==to.TERMINATOR)}catch{throw new Jt}return new Iu(e,g.toString(),0===m.length?null:m,null===s?null:s.toString(),y,b)},i.decodeHanziSegment=function(e,n,s){if(13*s>e.available())throw new Jt;for(var c=new Uint8Array(2*s),l=0;s>0;){var g=e.readBits(13),m=g/96<<8&4294967295|g%96;c[l]=(m+=m<959?41377:42657)>>8&255,c[l+1]=255&m,l+=2,s--}try{n.append(Ce.decode(c,mt.GB2312))}catch(y){throw new Jt(y)}},i.decodeKanjiSegment=function(e,n,s){if(13*s>e.available())throw new Jt;for(var c=new Uint8Array(2*s),l=0;s>0;){var g=e.readBits(13),m=g/192<<8&4294967295|g%192;c[l]=(m+=m<7936?33088:49472)>>8,c[l+1]=m,l+=2,s--}try{n.append(Ce.decode(c,mt.SHIFT_JIS))}catch(y){throw new Jt(y)}},i.decodeByteSegment=function(e,n,s,c,l,g){if(8*s>e.available())throw new Jt;for(var m=new Uint8Array(s),y=0;y<s;y++)m[y]=e.readBits(8);var b;b=null===c?mt.guessEncoding(m,g):c.getName();try{n.append(Ce.decode(m,b))}catch(P){throw new Jt(P)}l.push(m)},i.toAlphaNumericChar=function(e){if(e>=i.ALPHANUMERIC_CHARS.length)throw new Jt;return i.ALPHANUMERIC_CHARS[e]},i.decodeAlphanumericSegment=function(e,n,s,c){for(var l=n.length();s>1;){if(e.available()<11)throw new Jt;var g=e.readBits(11);n.append(i.toAlphaNumericChar(Math.floor(g/45))),n.append(i.toAlphaNumericChar(g%45)),s-=2}if(1===s){if(e.available()<6)throw new Jt;n.append(i.toAlphaNumericChar(e.readBits(6)))}if(c)for(var m=l;m<n.length();m++)"%"===n.charAt(m)&&(m<n.length()-1&&"%"===n.charAt(m+1)?n.deleteCharAt(m+1):n.setCharAt(m,"\x1d"))},i.decodeNumericSegment=function(e,n,s){for(;s>=3;){if(e.available()<10)throw new Jt;var c=e.readBits(10);if(c>=1e3)throw new Jt;n.append(i.toAlphaNumericChar(Math.floor(c/100))),n.append(i.toAlphaNumericChar(Math.floor(c/10)%10)),n.append(i.toAlphaNumericChar(c%10)),s-=3}if(2===s){if(e.available()<7)throw new Jt;var l=e.readBits(7);if(l>=100)throw new Jt;n.append(i.toAlphaNumericChar(Math.floor(l/10))),n.append(i.toAlphaNumericChar(l%10))}else if(1===s){if(e.available()<4)throw new Jt;var g=e.readBits(4);if(g>=10)throw new Jt;n.append(i.toAlphaNumericChar(g))}},i.parseECIValue=function(e){var n=e.readBits(8);if(!(128&n))return 127&n;if(128==(192&n))return(63&n)<<8&4294967295|e.readBits(8);if(192==(224&n))return(31&n)<<16&4294967295|e.readBits(16);throw new Jt},i.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.GB2312_SUBSET=1,i}(),Bh=function(){function i(e){this.mirrored=e}return i.prototype.isMirrored=function(){return this.mirrored},i.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},i}();var Uh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const jh=function(){function i(){this.rsDecoder=new Fa(hi.QR_CODE_FIELD_256)}return i.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(nr.parseFromBooleanArray(e),n)},i.prototype.decodeBitMatrix=function(e,n){var s=new n1(e),c=null;try{return this.decodeBitMatrixParser(s,n)}catch(g){c=g}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();var l=this.decodeBitMatrixParser(s,n);return l.setOther(new Bh(!0)),l}catch(g){throw null!==c?c:g}},i.prototype.decodeBitMatrixParser=function(e,n){var s,c,l,g,m=e.readVersion(),y=e.readFormatInformation().getErrorCorrectionLevel(),b=e.readCodewords(),P=Vh.getDataBlocks(b,m,y),B=0;try{for(var z=Uh(P),K=z.next();!K.done;K=z.next())B+=(ae=K.value).getNumDataCodewords()}catch(Gt){s={error:Gt}}finally{try{K&&!K.done&&(c=z.return)&&c.call(z)}finally{if(s)throw s.error}}var ve=new Uint8Array(B),Re=0;try{for(var Ve=Uh(P),Pe=Ve.next();!Pe.done;Pe=Ve.next()){var ae,Ye=(ae=Pe.value).getCodewords(),st=ae.getNumDataCodewords();this.correctErrors(Ye,st);for(var Nt=0;Nt<st;Nt++)ve[Re++]=Ye[Nt]}}catch(Gt){l={error:Gt}}finally{try{Pe&&!Pe.done&&(g=Ve.return)&&g.call(Ve)}finally{if(l)throw l.error}}return au.decode(ve,m,y,n)},i.prototype.correctErrors=function(e,n){var s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-n)}catch{throw new mi}for(var c=0;c<n;c++)e[c]=s[c]},i}();var Kp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Uf=function(i){function e(n,s,c){var l=i.call(this,n,s)||this;return l.estimatedModuleSize=c,l}return Kp(e,i),e.prototype.aboutEquals=function(n,s,c){if(Math.abs(s-this.getY())<=n&&Math.abs(c-this.getX())<=n){var l=Math.abs(n-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,s,c){return new e((this.getX()+s)/2,(this.getY()+n)/2,(this.estimatedModuleSize+c)/2)},e}(_n),Qp=function(){function i(e,n,s,c,l,g,m){this.image=e,this.startX=n,this.startY=s,this.width=c,this.height=l,this.moduleSize=g,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return i.prototype.find=function(){for(var e=this.startX,n=this.height,c=e+this.width,l=this.startY+n/2,g=new Int32Array(3),m=this.image,y=0;y<n;y++){var b=l+(1&y?-Math.floor((y+1)/2):Math.floor((y+1)/2));g[0]=0,g[1]=0,g[2]=0;for(var P=e;P<c&&!m.get(P,b);)P++;for(var B=0;P<c;){if(m.get(P,b))if(1===B)g[1]++;else if(2===B){var z;if(this.foundPatternCross(g)&&null!==(z=this.handlePossibleCenter(g,b,P)))return z;g[0]=g[2],g[1]=1,g[2]=0,B=1}else g[++B]++;else 1===B&&B++,g[B]++;P++}if(this.foundPatternCross(g)&&null!==(z=this.handlePossibleCenter(g,b,c)))return z}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new Ke},i.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},i.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,s=n/2,c=0;c<3;c++)if(Math.abs(n-e[c])>=s)return!1;return!0},i.prototype.crossCheckVertical=function(e,n,s,c){var l=this.image,g=l.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;for(var y=e;y>=0&&l.get(n,y)&&m[1]<=s;)m[1]++,y--;if(y<0||m[1]>s)return NaN;for(;y>=0&&!l.get(n,y)&&m[0]<=s;)m[0]++,y--;if(m[0]>s)return NaN;for(y=e+1;y<g&&l.get(n,y)&&m[1]<=s;)m[1]++,y++;if(y===g||m[1]>s)return NaN;for(;y<g&&!l.get(n,y)&&m[2]<=s;)m[2]++,y++;return m[2]>s||5*Math.abs(m[0]+m[1]+m[2]-c)>=2*c?NaN:this.foundPatternCross(m)?i.centerFromEnd(m,y):NaN},i.prototype.handlePossibleCenter=function(e,n,s){var c,l,g=e[0]+e[1]+e[2],m=i.centerFromEnd(e,s),y=this.crossCheckVertical(n,m,2*e[1],g);if(!isNaN(y)){var b=(e[0]+e[1]+e[2])/3;try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.possibleCenters),B=P.next();!B.done;B=P.next()){var z=B.value;if(z.aboutEquals(b,y,m))return z.combineEstimate(y,m,b)}}catch(ae){c={error:ae}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}var K=new Uf(m,y,b);this.possibleCenters.push(K),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(K)}return null},i}();var Dm=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Mm=function(i){function e(n,s,c,l){var g=i.call(this,n,s)||this;return g.estimatedModuleSize=c,g.count=l,void 0===l&&(g.count=1),g}return Dm(e,i),e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,s,c){if(Math.abs(s-this.getY())<=n&&Math.abs(c-this.getX())<=n){var l=Math.abs(n-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,s,c){var l=this.count+1;return new e((this.count*this.getX()+s)/l,(this.count*this.getY()+n)/l,(this.count*this.estimatedModuleSize+c)/l,l)},e}(_n),Yp=function(){function i(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return i.prototype.getBottomLeft=function(){return this.bottomLeft},i.prototype.getTopLeft=function(){return this.topLeft},i.prototype.getTopRight=function(){return this.topRight},i}();var od=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const ol=function(){function i(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return i.prototype.getImage=function(){return this.image},i.prototype.getPossibleCenters=function(){return this.possibleCenters},i.prototype.find=function(e){var n=null!=e&&void 0!==e.get(Vn.TRY_HARDER),s=null!=e&&void 0!==e.get(Vn.PURE_BARCODE),c=this.image,l=c.getHeight(),g=c.getWidth(),m=Math.floor(3*l/(4*i.MAX_MODULES));(m<i.MIN_SKIP||n)&&(m=i.MIN_SKIP);for(var y=!1,b=new Int32Array(5),P=m-1;P<l&&!y;P+=m){b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0;for(var B=0,z=0;z<g;z++)if(c.get(z,P))!(1&~B)&&B++,b[B]++;else if(1&B)b[B]++;else if(4===B)if(i.foundPatternCross(b)){if(!0!==this.handlePossibleCenter(b,P,z,s)){b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,B=3;continue}if(m=2,!0===this.hasSkipped)y=this.haveMultiplyConfirmedCenters();else{var ae=this.findRowSkip();ae>b[2]&&(P+=ae-b[2]-m,z=g-1)}B=0,b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0}else b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,B=3;else b[++B]++;i.foundPatternCross(b)&&!0===this.handlePossibleCenter(b,P,g,s)&&(m=b[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}var ve=this.selectBestPatterns();return _n.orderBestPatterns(ve),new Yp(ve)},i.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},i.foundPatternCross=function(e){for(var n=0,s=0;s<5;s++){var c=e[s];if(0===c)return!1;n+=c}if(n<7)return!1;var l=n/7,g=l/2;return Math.abs(l-e[0])<g&&Math.abs(l-e[1])<g&&Math.abs(3*l-e[2])<3*g&&Math.abs(l-e[3])<g&&Math.abs(l-e[4])<g},i.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},i.prototype.crossCheckDiagonal=function(e,n,s,c){for(var l=this.getCrossCheckStateCount(),g=0,m=this.image;e>=g&&n>=g&&m.get(n-g,e-g);)l[2]++,g++;if(e<g||n<g)return!1;for(;e>=g&&n>=g&&!m.get(n-g,e-g)&&l[1]<=s;)l[1]++,g++;if(e<g||n<g||l[1]>s)return!1;for(;e>=g&&n>=g&&m.get(n-g,e-g)&&l[0]<=s;)l[0]++,g++;if(l[0]>s)return!1;var y=m.getHeight(),b=m.getWidth();for(g=1;e+g<y&&n+g<b&&m.get(n+g,e+g);)l[2]++,g++;if(e+g>=y||n+g>=b)return!1;for(;e+g<y&&n+g<b&&!m.get(n+g,e+g)&&l[3]<s;)l[3]++,g++;if(e+g>=y||n+g>=b||l[3]>=s)return!1;for(;e+g<y&&n+g<b&&m.get(n+g,e+g)&&l[4]<s;)l[4]++,g++;return!(l[4]>=s)&&Math.abs(l[0]+l[1]+l[2]+l[3]+l[4]-c)<2*c&&i.foundPatternCross(l)},i.prototype.crossCheckVertical=function(e,n,s,c){for(var l=this.image,g=l.getHeight(),m=this.getCrossCheckStateCount(),y=e;y>=0&&l.get(n,y);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!l.get(n,y)&&m[1]<=s;)m[1]++,y--;if(y<0||m[1]>s)return NaN;for(;y>=0&&l.get(n,y)&&m[0]<=s;)m[0]++,y--;if(m[0]>s)return NaN;for(y=e+1;y<g&&l.get(n,y);)m[2]++,y++;if(y===g)return NaN;for(;y<g&&!l.get(n,y)&&m[3]<s;)m[3]++,y++;if(y===g||m[3]>=s)return NaN;for(;y<g&&l.get(n,y)&&m[4]<s;)m[4]++,y++;return m[4]>=s||5*Math.abs(m[0]+m[1]+m[2]+m[3]+m[4]-c)>=2*c?NaN:i.foundPatternCross(m)?i.centerFromEnd(m,y):NaN},i.prototype.crossCheckHorizontal=function(e,n,s,c){for(var l=this.image,g=l.getWidth(),m=this.getCrossCheckStateCount(),y=e;y>=0&&l.get(y,n);)m[2]++,y--;if(y<0)return NaN;for(;y>=0&&!l.get(y,n)&&m[1]<=s;)m[1]++,y--;if(y<0||m[1]>s)return NaN;for(;y>=0&&l.get(y,n)&&m[0]<=s;)m[0]++,y--;if(m[0]>s)return NaN;for(y=e+1;y<g&&l.get(y,n);)m[2]++,y++;if(y===g)return NaN;for(;y<g&&!l.get(y,n)&&m[3]<s;)m[3]++,y++;if(y===g||m[3]>=s)return NaN;for(;y<g&&l.get(y,n)&&m[4]<s;)m[4]++,y++;return m[4]>=s||5*Math.abs(m[0]+m[1]+m[2]+m[3]+m[4]-c)>=c?NaN:i.foundPatternCross(m)?i.centerFromEnd(m,y):NaN},i.prototype.handlePossibleCenter=function(e,n,s,c){var l=e[0]+e[1]+e[2]+e[3]+e[4],g=i.centerFromEnd(e,s),m=this.crossCheckVertical(n,Math.floor(g),e[2],l);if(!isNaN(m)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(m),e[2],l),!isNaN(g)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(g),e[2],l)))){for(var y=l/7,b=!1,P=this.possibleCenters,B=0,z=P.length;B<z;B++){var K=P[B];if(K.aboutEquals(y,m,g)){P[B]=K.combineEstimate(m,g,y),b=!0;break}}if(!b){var ae=new Mm(g,m,y);P.push(ae),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(ae)}return!0}return!1},i.prototype.findRowSkip=function(){var e,n;if(this.possibleCenters.length<=1)return 0;var c=null;try{for(var l=od(this.possibleCenters),g=l.next();!g.done;g=l.next()){var m=g.value;if(m.getCount()>=i.CENTER_QUORUM){if(null!=c)return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-m.getX())-Math.abs(c.getY()-m.getY()))/2);c=m}}}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return 0},i.prototype.haveMultiplyConfirmedCenters=function(){var e,n,s,c,l=0,g=0,m=this.possibleCenters.length;try{for(var y=od(this.possibleCenters),b=y.next();!b.done;b=y.next())(P=b.value).getCount()>=i.CENTER_QUORUM&&(l++,g+=P.getEstimatedModuleSize())}catch(ve){e={error:ve}}finally{try{b&&!b.done&&(n=y.return)&&n.call(y)}finally{if(e)throw e.error}}if(l<3)return!1;var B=g/m,z=0;try{for(var K=od(this.possibleCenters),ae=K.next();!ae.done;ae=K.next()){var P=ae.value;z+=Math.abs(P.getEstimatedModuleSize()-B)}}catch(ve){s={error:ve}}finally{try{ae&&!ae.done&&(c=K.return)&&c.call(K)}finally{if(s)throw s.error}}return z<=.05*g},i.prototype.selectBestPatterns=function(){var e,n,s,c,l=this.possibleCenters.length;if(l<3)throw new Ke;var m,g=this.possibleCenters;if(l>3){var y=0,b=0;try{for(var P=od(this.possibleCenters),B=P.next();!B.done;B=P.next()){var K=B.value.getEstimatedModuleSize();y+=K,b+=K*K}}catch(Nt){e={error:Nt}}finally{try{B&&!B.done&&(n=P.return)&&n.call(P)}finally{if(e)throw e.error}}m=y/l;var ae=Math.sqrt(b/l-m*m);g.sort(function(Nt,Gt){var Qt=Math.abs(Gt.getEstimatedModuleSize()-m),vn=Math.abs(Nt.getEstimatedModuleSize()-m);return Qt<vn?-1:Qt>vn?1:0});for(var ve=Math.max(.2*m,ae),Re=0;Re<g.length&&g.length>3;Re++)Math.abs(g[Re].getEstimatedModuleSize()-m)>ve&&(g.splice(Re,1),Re--)}if(g.length>3){y=0;try{for(var Pe=od(g),Ye=Pe.next();!Ye.done;Ye=Pe.next())y+=Ye.value.getEstimatedModuleSize()}catch(Gt){s={error:Gt}}finally{try{Ye&&!Ye.done&&(c=Pe.return)&&c.call(Pe)}finally{if(s)throw s.error}}m=y/g.length,g.sort(function(Gt,Qt){if(Qt.getCount()===Gt.getCount()){var vn=Math.abs(Qt.getEstimatedModuleSize()-m),er=Math.abs(Gt.getEstimatedModuleSize()-m);return vn<er?1:vn>er?-1:0}return Qt.getCount()-Gt.getCount()}),g.splice(3)}return[g[0],g[1],g[2]]},i.CENTER_QUORUM=2,i.MIN_SKIP=3,i.MAX_MODULES=57,i}(),Zp=function(){function i(e){this.image=e}return i.prototype.getImage=function(){return this.image},i.prototype.getResultPointCallback=function(){return this.resultPointCallback},i.prototype.detect=function(e){this.resultPointCallback=null==e?null:e.get(Vn.NEED_RESULT_POINT_CALLBACK);var s=new ol(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(s)},i.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),s=e.getTopRight(),c=e.getBottomLeft(),l=this.calculateModuleSize(n,s,c);if(l<1)throw new Ke("No pattern found in proccess finder.");var g=i.computeDimension(n,s,c,l),m=Rs.getProvisionalVersionForDimension(g),y=m.getDimensionForVersion()-7,b=null;if(m.getAlignmentPatternCenters().length>0)for(var P=s.getX()-n.getX()+c.getX(),B=s.getY()-n.getY()+c.getY(),z=1-3/y,K=Math.floor(n.getX()+z*(P-n.getX())),ae=Math.floor(n.getY()+z*(B-n.getY())),ve=4;ve<=16;ve<<=1)try{b=this.findAlignmentInRegion(l,K,ae,ve);break}catch(Ye){if(!(Ye instanceof Ke))throw Ye}var Re=i.createTransform(n,s,c,b,g),Ve=i.sampleGrid(this.image,Re,g);return new ml(Ve,null===b?[c,n,s]:[c,n,s,b])},i.createTransform=function(e,n,s,c,l){var m,y,b,P,g=l-3.5;return null!==c?(m=c.getX(),y=c.getY(),P=b=g-3):(m=n.getX()-e.getX()+s.getX(),y=n.getY()-e.getY()+s.getY(),b=g,P=g),Xc.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,b,P,3.5,g,e.getX(),e.getY(),n.getX(),n.getY(),m,y,s.getX(),s.getY())},i.sampleGrid=function(e,n,s){return j.getInstance().sampleGridWithTransform(e,s,s,n)},i.computeDimension=function(e,n,s,c){var l=Ar.round(_n.distance(e,n)/c),g=Ar.round(_n.distance(e,s)/c),m=Math.floor((l+g)/2)+7;switch(3&m){case 0:m++;break;case 2:m--;break;case 3:throw new Ke("Dimensions could be not found.")}return m},i.prototype.calculateModuleSize=function(e,n,s){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,s))/2},i.prototype.calculateModuleSizeOneWay=function(e,n){var s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(s)?c/7:isNaN(c)?s/7:(s+c)/14},i.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,s,c){var l=this.sizeOfBlackWhiteBlackRun(e,n,s,c),g=1,m=e-(s-e);m<0?(g=e/(e-m),m=0):m>=this.image.getWidth()&&(g=(this.image.getWidth()-1-e)/(m-e),m=this.image.getWidth()-1);var y=Math.floor(n-(c-n)*g);return g=1,y<0?(g=n/(n-y),y=0):y>=this.image.getHeight()&&(g=(this.image.getHeight()-1-n)/(y-n),y=this.image.getHeight()-1),m=Math.floor(e+(m-e)*g),(l+=this.sizeOfBlackWhiteBlackRun(e,n,m,y))-1},i.prototype.sizeOfBlackWhiteBlackRun=function(e,n,s,c){var l=Math.abs(c-n)>Math.abs(s-e);if(l){var g=e;e=n,n=g,g=s,s=c,c=g}for(var m=Math.abs(s-e),y=Math.abs(c-n),b=-m/2,P=e<s?1:-1,B=n<c?1:-1,z=0,K=s+P,ae=e,ve=n;ae!==K;ae+=P){if(1===z===this.image.get(l?ve:ae,l?ae:ve)){if(2===z)return Ar.distance(ae,ve,e,n);z++}if((b+=y)>0){if(ve===c)break;ve+=B,b-=m}}return 2===z?Ar.distance(s+P,c,e,n):NaN},i.prototype.findAlignmentInRegion=function(e,n,s,c){var l=Math.floor(c*e),g=Math.max(0,n-l),m=Math.min(this.image.getWidth()-1,n+l);if(m-g<3*e)throw new Ke("Alignment top exceeds estimated module size.");var y=Math.max(0,s-l),b=Math.min(this.image.getHeight()-1,s+l);if(b-y<3*e)throw new Ke("Alignment bottom exceeds estimated module size.");return new Qp(this.image,g,y,m-g,b-y,e,this.resultPointCallback).find()},i}(),zd=function(){function i(){this.decoder=new jh}return i.prototype.getDecoder=function(){return this.decoder},i.prototype.decode=function(e,n){var s,c;if(null!=n&&void 0!==n.get(Vn.PURE_BARCODE)){var l=i.extractPureBits(e.getBlackMatrix());s=this.decoder.decodeBitMatrix(l,n),c=i.NO_POINTS}else{var g=new Zp(e.getBlackMatrix()).detect(n);s=this.decoder.decodeBitMatrix(g.getBits(),n),c=g.getPoints()}s.getOther()instanceof Bh&&s.getOther().applyMirroredCorrection(c);var m=new qi(s.getText(),s.getRawBytes(),void 0,c,dn.QR_CODE,void 0),y=s.getByteSegments();null!==y&&m.putMetadata(Zi.BYTE_SEGMENTS,y);var b=s.getECLevel();return null!==b&&m.putMetadata(Zi.ERROR_CORRECTION_LEVEL,b),s.hasStructuredAppend()&&(m.putMetadata(Zi.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),m.putMetadata(Zi.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),m},i.prototype.reset=function(){},i.extractPureBits=function(e){var n=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(null===n||null===s)throw new Ke;var c=this.moduleSize(n,e),l=n[1],g=s[1],m=n[0],y=s[0];if(m>=y||l>=g)throw new Ke;if(g-l!=y-m&&(y=m+(g-l))>=e.getWidth())throw new Ke;var b=Math.round((y-m+1)/c),P=Math.round((g-l+1)/c);if(b<=0||P<=0)throw new Ke;if(P!==b)throw new Ke;var B=Math.floor(c/2);l+=B;var z=(m+=B)+Math.floor((b-1)*c)-y;if(z>0){if(z>B)throw new Ke;m-=z}var K=l+Math.floor((P-1)*c)-g;if(K>0){if(K>B)throw new Ke;l-=K}for(var ae=new nr(b,P),ve=0;ve<P;ve++)for(var Re=l+Math.floor(ve*c),Ve=0;Ve<b;Ve++)e.get(m+Math.floor(Ve*c),Re)&&ae.set(Ve,ve);return ae},i.moduleSize=function(e,n){for(var s=n.getHeight(),c=n.getWidth(),l=e[0],g=e[1],m=!0,y=0;l<c&&g<s;){if(m!==n.get(l,g)){if(5==++y)break;m=!m}l++,g++}if(l===c||g===s)throw new Ke;return(l-e[0])/7},i.NO_POINTS=new Array,i}(),Jr=function(){function i(){}return i.prototype.PDF417Common=function(){},i.getBitCountSum=function(e){return Ar.sum(e)},i.toIntArray=function(e){var n,s;if(null==e||!e.length)return i.EMPTY_INT_ARRAY;var c=new Int32Array(e.length),l=0;try{for(var g=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),m=g.next();!m.done;m=g.next())c[l++]=m.value}catch(b){n={error:b}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}return c},i.getCodeword=function(e){var n=Yr.binarySearch(i.SYMBOL_TABLE,262143&e);return n<0?-1:(i.CODEWORD_TABLE[n]-1)%i.NUMBER_OF_CODEWORDS},i.MAX_CODEWORDS_IN_BARCODE=(i.NUMBER_OF_CODEWORDS=929)-1,i.MIN_ROWS_IN_BARCODE=3,i.MAX_ROWS_IN_BARCODE=90,i.MODULES_IN_CODEWORD=17,i.MODULES_IN_STOP_PATTERN=18,i.BARS_IN_MODULE=8,i.EMPTY_INT_ARRAY=new Int32Array([]),i.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),i.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),i}(),cu=function(){function i(e,n){this.bits=e,this.points=n}return i.prototype.getBits=function(){return this.bits},i.prototype.getPoints=function(){return this.points},i}();var Jp=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const zh=function(){function i(){}return i.detectMultiple=function(e,n,s){var c=e.getBlackMatrix(),l=i.detect(s,c);return l.length||((c=c.clone()).rotate180(),l=i.detect(s,c)),new cu(c,l)},i.detect=function(e,n){for(var s,c,l=new Array,g=0,m=0,y=!1;g<n.getHeight();){var b=i.findVertices(n,g,m);if(null!=b[0]||null!=b[3]){if(y=!0,l.push(b),!e)break;null!=b[2]?(m=Math.trunc(b[2].getX()),g=Math.trunc(b[2].getY())):(m=Math.trunc(b[4].getX()),g=Math.trunc(b[4].getY()))}else{if(!y)break;y=!1,m=0;try{for(var P=(s=void 0,Jp(l)),B=P.next();!B.done;B=P.next()){var z=B.value;null!=z[1]&&(g=Math.trunc(Math.max(g,z[1].getY()))),null!=z[3]&&(g=Math.max(g,Math.trunc(z[3].getY())))}}catch(K){s={error:K}}finally{try{B&&!B.done&&(c=P.return)&&c.call(P)}finally{if(s)throw s.error}}g+=i.ROW_STEP}}return l},i.findVertices=function(e,n,s){var c=e.getHeight(),l=e.getWidth(),g=new Array(8);return i.copyToResult(g,i.findRowsWithPattern(e,c,l,n,s,i.START_PATTERN),i.INDEXES_START_PATTERN),null!=g[4]&&(s=Math.trunc(g[4].getX()),n=Math.trunc(g[4].getY())),i.copyToResult(g,i.findRowsWithPattern(e,c,l,n,s,i.STOP_PATTERN),i.INDEXES_STOP_PATTERN),g},i.copyToResult=function(e,n,s){for(var c=0;c<s.length;c++)e[s[c]]=n[c]},i.findRowsWithPattern=function(e,n,s,c,l,g){for(var m=new Array(4),y=!1,b=new Int32Array(g.length);c<n;c+=i.ROW_STEP)if(null!=(P=i.findGuardPattern(e,l,c,s,!1,g,b))){for(;c>0;){if(null==(B=i.findGuardPattern(e,l,--c,s,!1,g,b))){c++;break}P=B}m[0]=new _n(P[0],c),m[1]=new _n(P[1],c),y=!0;break}var z=c+1;if(y){for(var K=0,B=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);z<n;z++){var P;if(null!=(P=i.findGuardPattern(e,B[0],z,s,!1,g,b))&&Math.abs(B[0]-P[0])<i.MAX_PATTERN_DRIFT&&Math.abs(B[1]-P[1])<i.MAX_PATTERN_DRIFT)B=P,K=0;else{if(K>i.SKIPPED_ROW_COUNT_MAX)break;K++}}m[2]=new _n(B[0],z-=K+1),m[3]=new _n(B[1],z)}return z-c<i.BARCODE_MIN_HEIGHT&&Yr.fill(m,null),m},i.findGuardPattern=function(e,n,s,c,l,g,m){Yr.fillWithin(m,0,m.length,0);for(var y=n,b=0;e.get(y,s)&&y>0&&b++<i.MAX_PIXEL_DRIFT;)y--;for(var P=y,B=0,z=g.length,K=l;P<c;P++)if(e.get(P,s)!==K)m[B]++;else{if(B===z-1){if(i.patternMatchVariance(m,g,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE)return new Int32Array([y,P]);y+=m[0]+m[1],Hr.arraycopy(m,2,m,0,B-1),m[B-1]=0,m[B]=0,B--}else B++;m[B]=1,K=!K}return B===z-1&&i.patternMatchVariance(m,g,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE?new Int32Array([y,P-1]):null},i.patternMatchVariance=function(e,n,s){for(var c=e.length,l=0,g=0,m=0;m<c;m++)l+=e[m],g+=n[m];if(l<g)return 1/0;var y=l/g;s*=y;for(var b=0,P=0;P<c;P++){var B=e[P],z=n[P]*y,K=B>z?B-z:z-B;if(K>s)return 1/0;b+=K}return b/l},i.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),i.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),i.MAX_AVG_VARIANCE=.42,i.MAX_INDIVIDUAL_VARIANCE=.8,i.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),i.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),i.MAX_PIXEL_DRIFT=3,i.MAX_PATTERN_DRIFT=5,i.SKIPPED_ROW_COUNT_MAX=25,i.ROW_STEP=5,i.BARCODE_MIN_HEIGHT=10,i}(),Nu=function(){function i(e,n){if(0===n.length)throw new yn;this.field=e;var s=n.length;if(s>1&&0===n[0]){for(var c=1;c<s&&0===n[c];)c++;c===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-c),Hr.arraycopy(n,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return i.prototype.getCoefficients=function(){return this.coefficients},i.prototype.getDegree=function(){return this.coefficients.length-1},i.prototype.isZero=function(){return 0===this.coefficients[0]},i.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},i.prototype.evaluateAt=function(e){var n,s;if(0===e)return this.getCoefficient(0);if(1===e){var c=0;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.coefficients),g=l.next();!g.done;g=l.next())c=this.field.add(c,g.value)}catch(B){n={error:B}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return c}for(var y=this.coefficients[0],b=this.coefficients.length,P=1;P<b;P++)y=this.field.add(this.field.multiply(e,y),this.coefficients[P]);return y},i.prototype.add=function(e){if(!this.field.equals(e.field))throw new yn("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,s=e.coefficients;if(n.length>s.length){var c=n;n=s,s=c}var l=new Int32Array(s.length),g=s.length-n.length;Hr.arraycopy(s,0,l,0,g);for(var m=g;m<s.length;m++)l[m]=this.field.add(n[m-g],s[m]);return new i(this.field,l)},i.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new yn("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},i.prototype.multiply=function(e){return e instanceof i?this.multiplyOther(e):this.multiplyScalar(e)},i.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new yn("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new i(this.field,new Int32Array([0]));for(var n=this.coefficients,s=n.length,c=e.coefficients,l=c.length,g=new Int32Array(s+l-1),m=0;m<s;m++)for(var y=n[m],b=0;b<l;b++)g[m+b]=this.field.add(g[m+b],this.field.multiply(y,c[b]));return new i(this.field,g)},i.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),s=0;s<e;s++)n[s]=this.field.subtract(0,this.coefficients[s]);return new i(this.field,n)},i.prototype.multiplyScalar=function(e){if(0===e)return new i(this.field,new Int32Array([0]));if(1===e)return this;for(var n=this.coefficients.length,s=new Int32Array(n),c=0;c<n;c++)s[c]=this.field.multiply(this.coefficients[c],e);return new i(this.field,s)},i.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new yn;if(0===n)return new i(this.field,new Int32Array([0]));for(var s=this.coefficients.length,c=new Int32Array(s+e),l=0;l<s;l++)c[l]=this.field.multiply(this.coefficients[l],n);return new i(this.field,c)},i.prototype.toString=function(){for(var e=new gn,n=this.getDegree();n>=0;n--){var s=this.getCoefficient(n);0!==s&&(s<0?(e.append(" - "),s=-s):e.length()>0&&e.append(" + "),(0===n||1!==s)&&e.append(s),0!==n&&(1===n?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},i}(),tg=function(){function i(){}return i.prototype.add=function(e,n){return(e+n)%this.modulus},i.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},i.prototype.exp=function(e){return this.expTable[e]},i.prototype.log=function(e){if(0===e)throw new yn;return this.logTable[e]},i.prototype.inverse=function(e){if(0===e)throw new Kc;return this.expTable[this.modulus-this.logTable[e]-1]},i.prototype.multiply=function(e,n){return 0===e||0===n?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},i.prototype.getSize=function(){return this.modulus},i.prototype.equals=function(e){return e===this},i}();var qd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const ng=function(i){function e(n,s){var c=i.call(this)||this;c.modulus=n,c.expTable=new Int32Array(n),c.logTable=new Int32Array(n);for(var l=1,g=0;g<n;g++)c.expTable[g]=l,l=l*s%n;for(g=0;g<n-1;g++)c.logTable[c.expTable[g]]=g;return c.zero=new Nu(c,new Int32Array([0])),c.one=new Nu(c,new Int32Array([1])),c}return qd(e,i),e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,s){if(n<0)throw new yn;if(0===s)return this.zero;var c=new Int32Array(n+1);return c[0]=s,new Nu(this,c)},e.PDF417_GF=new e(Jr.NUMBER_OF_CODEWORDS,3),e}(tg),Pm=function(){function i(){this.field=ng.PDF417_GF}return i.prototype.decode=function(e,n,s){for(var c,l,g=new Nu(this.field,e),m=new Int32Array(n),y=!1,b=n;b>0;b--){var P=g.evaluateAt(this.field.exp(b));m[n-b]=P,0!==P&&(y=!0)}if(!y)return 0;var B=this.field.getOne();if(null!=s)try{for(var z=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),K=z.next();!K.done;K=z.next()){var ve=this.field.exp(e.length-1-K.value),Re=new Nu(this.field,new Int32Array([this.field.subtract(0,ve),1]));B=B.multiply(Re)}}catch(vn){c={error:vn}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}var Ve=new Nu(this.field,m),Pe=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),Ve,n),Ye=Pe[0],st=Pe[1],Nt=this.findErrorLocations(Ye),Gt=this.findErrorMagnitudes(st,Ye,Nt);for(b=0;b<Nt.length;b++){var Qt=e.length-1-this.field.log(Nt[b]);if(Qt<0)throw mi.getChecksumInstance();e[Qt]=this.field.subtract(e[Qt],Gt[b])}return Nt.length},i.prototype.runEuclideanAlgorithm=function(e,n,s){if(e.getDegree()<n.getDegree()){var c=e;e=n,n=c}for(var l=e,g=n,m=this.field.getZero(),y=this.field.getOne();g.getDegree()>=Math.round(s/2);){var b=l,P=m;if(m=y,(l=g).isZero())throw mi.getChecksumInstance();g=b;for(var B=this.field.getZero(),z=l.getCoefficient(l.getDegree()),K=this.field.inverse(z);g.getDegree()>=l.getDegree()&&!g.isZero();){var ae=g.getDegree()-l.getDegree(),ve=this.field.multiply(g.getCoefficient(g.getDegree()),K);B=B.add(this.field.buildMonomial(ae,ve)),g=g.subtract(l.multiplyByMonomial(ae,ve))}y=B.multiply(m).subtract(P).negative()}var Re=y.getCoefficient(0);if(0===Re)throw mi.getChecksumInstance();var Ve=this.field.inverse(Re);return[y.multiply(Ve),g.multiply(Ve)]},i.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),s=new Int32Array(n),c=0,l=1;l<this.field.getSize()&&c<n;l++)0===e.evaluateAt(l)&&(s[c]=this.field.inverse(l),c++);if(c!==n)throw mi.getChecksumInstance();return s},i.prototype.findErrorMagnitudes=function(e,n,s){for(var c=n.getDegree(),l=new Int32Array(c),g=1;g<=c;g++)l[c-g]=this.field.multiply(g,n.getCoefficient(g));var m=new Nu(this.field,l),y=s.length,b=new Int32Array(y);for(g=0;g<y;g++){var P=this.field.inverse(s[g]),B=this.field.subtract(0,e.evaluateAt(P)),z=this.field.inverse(m.evaluateAt(P));b[g]=this.field.multiply(B,z)}return b},i}(),Nm=function(){function i(e,n,s,c,l){e instanceof i?this.constructor_2(e):this.constructor_1(e,n,s,c,l)}return i.prototype.constructor_1=function(e,n,s,c,l){var g=null==n||null==s,m=null==c||null==l;if(g&&m)throw new Ke;g?(n=new _n(0,c.getY()),s=new _n(0,l.getY())):m&&(c=new _n(e.getWidth()-1,n.getY()),l=new _n(e.getWidth()-1,s.getY())),this.image=e,this.topLeft=n,this.bottomLeft=s,this.topRight=c,this.bottomRight=l,this.minX=Math.trunc(Math.min(n.getX(),s.getX())),this.maxX=Math.trunc(Math.max(c.getX(),l.getX())),this.minY=Math.trunc(Math.min(n.getY(),c.getY())),this.maxY=Math.trunc(Math.max(s.getY(),l.getY()))},i.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},i.merge=function(e,n){return null==e?n:null==n?e:new i(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},i.prototype.addMissingRows=function(e,n,s){var c=this.topLeft,l=this.bottomLeft,g=this.topRight,m=this.bottomRight;if(e>0){var y=s?this.topLeft:this.topRight,b=Math.trunc(y.getY()-e);b<0&&(b=0);var P=new _n(y.getX(),b);s?c=P:g=P}if(n>0){var B=s?this.bottomLeft:this.bottomRight,z=Math.trunc(B.getY()+n);z>=this.image.getHeight()&&(z=this.image.getHeight()-1);var K=new _n(B.getX(),z);s?l=K:m=K}return new i(this.image,c,l,g,m)},i.prototype.getMinX=function(){return this.minX},i.prototype.getMaxX=function(){return this.maxX},i.prototype.getMinY=function(){return this.minY},i.prototype.getMaxY=function(){return this.maxY},i.prototype.getTopLeft=function(){return this.topLeft},i.prototype.getTopRight=function(){return this.topRight},i.prototype.getBottomLeft=function(){return this.bottomLeft},i.prototype.getBottomRight=function(){return this.bottomRight},i}(),uu=function(){function i(e,n,s,c){this.columnCount=e,this.errorCorrectionLevel=c,this.rowCountUpperPart=n,this.rowCountLowerPart=s,this.rowCount=n+s}return i.prototype.getColumnCount=function(){return this.columnCount},i.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},i.prototype.getRowCount=function(){return this.rowCount},i.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},i.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},i}(),ig=function(){function i(){this.buffer=""}return i.form=function(e,n){var s=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function c(g,m,y,b,P,B){if("%%"===g)return"%";if(void 0!==n[++s]){g=b?parseInt(b.substr(1)):void 0;var K,z=P?parseInt(P.substr(1)):void 0;switch(B){case"s":K=n[s];break;case"c":K=n[s][0];break;case"f":K=parseFloat(n[s]).toFixed(g);break;case"p":K=parseFloat(n[s]).toPrecision(g);break;case"e":K=parseFloat(n[s]).toExponential(g);break;case"x":K=parseInt(n[s]).toString(z||16);break;case"d":K=parseFloat(parseInt(n[s],z||10).toPrecision(g)).toFixed(0)}K="object"==typeof K?JSON.stringify(K):(+K).toString(z);for(var ae=parseInt(y),ve=y&&y[0]+""=="0"?"0":" ";K.length<ae;)K=void 0!==m?K+ve:ve+K;return K}})},i.prototype.format=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];this.buffer+=i.form(e,n)},i.prototype.toString=function(){return this.buffer},i}(),Gf=function(){function i(e){this.boundingBox=new Nm(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return i.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(null!=n)return n;for(var s=1;s<i.MAX_NEARBY_DISTANCE;s++){var c=this.imageRowToCodewordIndex(e)-s;if(c>=0&&null!=(n=this.codewords[c])||(c=this.imageRowToCodewordIndex(e)+s)<this.codewords.length&&null!=(n=this.codewords[c]))return n}return null},i.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},i.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},i.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},i.prototype.getBoundingBox=function(){return this.boundingBox},i.prototype.getCodewords=function(){return this.codewords},i.prototype.toString=function(){var e,n,s=new ig,c=0;try{for(var l=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.codewords),g=l.next();!g.done;g=l.next()){var m=g.value;null!=m?s.format("%3d: %3d|%3d%n",c++,m.getRowNumber(),m.getValue()):s.format("%3d:    |   %n",c++)}}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s.toString()},i.MAX_NEARBY_DISTANCE=5,i}();var Lm=function(i,e){var n="function"==typeof Symbol&&i[Symbol.iterator];if(!n)return i;var c,g,s=n.call(i),l=[];try{for(;(void 0===e||e-- >0)&&!(c=s.next()).done;)l.push(c.value)}catch(m){g={error:m}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(g)throw g.error}}return l};const $f=function(){function i(){this.values=new Map}return i.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);null==n&&(n=0),n++,this.values.set(e,n)},i.prototype.getValue=function(){var e,n,s=-1,c=new Array,l=function(B,z){var K_getKey=function(){return B},K_getValue=function(){return z};K_getValue()>s?(s=K_getValue(),(c=[]).push(K_getKey())):K_getValue()===s&&c.push(K_getKey())};try{for(var g=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.values.entries()),m=g.next();!m.done;m=g.next()){var y=Lm(m.value,2);l(y[0],y[1])}}catch(B){e={error:B}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(e)throw e.error}}return Jr.toIntArray(c)},i.prototype.getConfidence=function(e){return this.values.get(e)},i}();var Dc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),sg=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const zf=function(i){function e(n,s){var c=i.call(this,n)||this;return c._isLeft=s,c}return Dc(e,i),e.prototype.setRowNumbers=function(){var n,s;try{for(var c=sg(this.getCodewords()),l=c.next();!l.done;l=c.next()){var g=l.value;g?.setRowNumberAsRowIndicatorColumn()}}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,n);for(var c=this.getBoundingBox(),l=this._isLeft?c.getTopLeft():c.getTopRight(),g=this._isLeft?c.getBottomLeft():c.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(l.getY())),y=this.imageRowToCodewordIndex(Math.trunc(g.getY())),b=-1,P=1,B=0,z=m;z<y;z++)if(null!=s[z]){var K=s[z],ae=K.getRowNumber()-b;if(0===ae)B++;else if(1===ae)P=Math.max(P,B),B=1,b=K.getRowNumber();else if(ae<0||K.getRowNumber()>=n.getRowCount()||ae>z)s[z]=null;else{for(var ve,Re=(ve=P>2?(P-2)*ae:ae)>=z,Ve=1;Ve<=ve&&!Re;Ve++)Re=null!=s[z-Ve];Re?s[z]=null:(b=K.getRowNumber(),B=1)}}},e.prototype.getRowHeights=function(){var n,s,c=this.getBarcodeMetadata();if(null==c)return null;this.adjustIncompleteIndicatorColumnRowNumbers(c);var l=new Int32Array(c.getRowCount());try{for(var g=sg(this.getCodewords()),m=g.next();!m.done;m=g.next()){var y=m.value;if(null!=y){var b=y.getRowNumber();if(b>=l.length)continue;l[b]++}}}catch(P){n={error:P}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}return l},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var s=this.getBoundingBox(),c=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(l.getY())),y=this.getCodewords(),b=-1,P=1,B=0,z=g;z<m;z++)if(null!=y[z]){var K=y[z];K.setRowNumberAsRowIndicatorColumn();var ae=K.getRowNumber()-b;0===ae?B++:1===ae?(P=Math.max(P,B),B=1,b=K.getRowNumber()):K.getRowNumber()>=n.getRowCount()?y[z]=null:(b=K.getRowNumber(),B=1)}},e.prototype.getBarcodeMetadata=function(){var n,s,c=this.getCodewords(),l=new $f,g=new $f,m=new $f,y=new $f;try{for(var b=sg(c),P=b.next();!P.done;P=b.next()){var B=P.value;if(null!=B){B.setRowNumberAsRowIndicatorColumn();var z=B.getValue()%30,K=B.getRowNumber();switch(this._isLeft||(K+=2),K%3){case 0:g.setValue(3*z+1);break;case 1:y.setValue(z/3),m.setValue(z%3);break;case 2:l.setValue(z+1)}}}}catch(ve){n={error:ve}}finally{try{P&&!P.done&&(s=b.return)&&s.call(b)}finally{if(n)throw n.error}}if(0===l.getValue().length||0===g.getValue().length||0===m.getValue().length||0===y.getValue().length||l.getValue()[0]<1||g.getValue()[0]+m.getValue()[0]<Jr.MIN_ROWS_IN_BARCODE||g.getValue()[0]+m.getValue()[0]>Jr.MAX_ROWS_IN_BARCODE)return null;var ae=new uu(l.getValue()[0],g.getValue()[0],m.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(c,ae),ae},e.prototype.removeIncorrectCodewords=function(n,s){for(var c=0;c<n.length;c++){var l=n[c];if(null!=n[c]){var g=l.getValue()%30,m=l.getRowNumber();if(m>s.getRowCount()){n[c]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:3*g+1!==s.getRowCountUpperPart()&&(n[c]=null);break;case 1:(Math.trunc(g/3)!==s.getErrorCorrectionLevel()||g%3!==s.getRowCountLowerPart())&&(n[c]=null);break;case 2:g+1!==s.getColumnCount()&&(n[c]=null)}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+i.prototype.toString.call(this)},e}(Gf),ag=function(){function i(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return i.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var n,e=Jr.MAX_CODEWORDS_IN_BARCODE;do{n=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<n);return this.detectionResultColumns},i.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},i.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var s=this.detectionResultColumns[n].getCodewords(),c=0;c<s.length;c++)null!=s[c]&&(s[c].hasValidRowNumber()||this.adjustRowNumbers(n,c,s));return e},i.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},i.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),s=0;s<e.length;s++)if(null!=e[s]&&null!=n[s]&&e[s].getRowNumber()===n[s].getRowNumber())for(var c=1;c<=this.barcodeColumnCount;c++){var l=this.detectionResultColumns[c].getCodewords()[s];null!=l&&(l.setRowNumber(e[s].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[s]=null))}},i.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),s=0;s<n.length;s++)if(null!=n[s])for(var c=n[s].getRowNumber(),l=0,g=this.barcodeColumnCount+1;g>0&&l<this.ADJUST_ROW_NUMBER_SKIP;g--){var m=this.detectionResultColumns[g].getCodewords()[s];null!=m&&(l=i.adjustRowNumberIfValid(c,l,m),m.hasValidRowNumber()||e++)}return e},i.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),s=0;s<n.length;s++)if(null!=n[s])for(var c=n[s].getRowNumber(),l=0,g=1;g<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;g++){var m=this.detectionResultColumns[g].getCodewords()[s];null!=m&&(l=i.adjustRowNumberIfValid(c,l,m),m.hasValidRowNumber()||e++)}return e},i.adjustRowNumberIfValid=function(e,n,s){return null==s||s.hasValidRowNumber()||(s.isValidRowNumber(e)?(s.setRowNumber(e),n=0):++n),n},i.prototype.adjustRowNumbers=function(e,n,s){var c,l;if(null!=this.detectionResultColumns[e-1]){var g=s[n],m=this.detectionResultColumns[e-1].getCodewords(),y=m;null!=this.detectionResultColumns[e+1]&&(y=this.detectionResultColumns[e+1].getCodewords());var b=new Array(14);b[2]=m[n],b[3]=y[n],n>0&&(b[0]=s[n-1],b[4]=m[n-1],b[5]=y[n-1]),n>1&&(b[8]=s[n-2],b[10]=m[n-2],b[11]=y[n-2]),n<s.length-1&&(b[1]=s[n+1],b[6]=m[n+1],b[7]=y[n+1]),n<s.length-2&&(b[9]=s[n+2],b[12]=m[n+2],b[13]=y[n+2]);try{for(var P=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(b),B=P.next();!B.done;B=P.next())if(i.adjustRowNumber(g,B.value))return}catch(K){c={error:K}}finally{try{B&&!B.done&&(l=P.return)&&l.call(P)}finally{if(c)throw c.error}}}},i.adjustRowNumber=function(e,n){return!(null==n||!n.hasValidRowNumber()||n.getBucket()!==e.getBucket()||(e.setRowNumber(n.getRowNumber()),0))},i.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},i.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},i.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},i.prototype.setBoundingBox=function(e){this.boundingBox=e},i.prototype.getBoundingBox=function(){return this.boundingBox},i.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},i.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},i.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new ig,s=0;s<e.getCodewords().length;s++){n.format("CW %3d:",s);for(var c=0;c<this.barcodeColumnCount+2;c++)if(null!=this.detectionResultColumns[c]){var l=this.detectionResultColumns[c].getCodewords()[s];null!=l?n.format(" %3d|%3d",l.getRowNumber(),l.getValue()):n.format("    |   ")}else n.format("    |   ");n.format("%n")}return n.toString()},i}(),Kh=function(){function i(e,n,s,c){this.rowNumber=i.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(s),this.value=Math.trunc(c)}return i.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},i.prototype.isValidRowNumber=function(e){return e!==i.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},i.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},i.prototype.getWidth=function(){return this.endX-this.startX},i.prototype.getStartX=function(){return this.startX},i.prototype.getEndX=function(){return this.endX},i.prototype.getBucket=function(){return this.bucket},i.prototype.getValue=function(){return this.value},i.prototype.getRowNumber=function(){return this.rowNumber},i.prototype.setRowNumber=function(e){this.rowNumber=e},i.prototype.toString=function(){return this.rowNumber+"|"+this.value},i.BARCODE_ROW_UNKNOWN=-1,i}(),Xh=function(){function i(){}return i.initialize=function(){for(var e=0;e<Jr.SYMBOL_TABLE.length;e++)for(var n=Jr.SYMBOL_TABLE[e],s=1&n,c=0;c<Jr.BARS_IN_MODULE;c++){for(var l=0;(1&n)===s;)l+=1,n>>=1;s=1&n,i.RATIOS_TABLE[e]||(i.RATIOS_TABLE[e]=new Array(Jr.BARS_IN_MODULE)),i.RATIOS_TABLE[e][Jr.BARS_IN_MODULE-c-1]=Math.fround(l/Jr.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},i.getDecodedValue=function(e){var n=i.getDecodedCodewordValue(i.sampleBitCounts(e));return-1!==n?n:i.getClosestDecodedValue(e)},i.sampleBitCounts=function(e){for(var n=Ar.sum(e),s=new Int32Array(Jr.BARS_IN_MODULE),c=0,l=0,g=0;g<Jr.MODULES_IN_CODEWORD;g++)l+e[c]<=n/(2*Jr.MODULES_IN_CODEWORD)+g*n/Jr.MODULES_IN_CODEWORD&&(l+=e[c],c++),s[c]++;return s},i.getDecodedCodewordValue=function(e){var n=i.getBitValue(e);return-1===Jr.getCodeword(n)?-1:n},i.getBitValue=function(e){for(var n=0,s=0;s<e.length;s++)for(var c=0;c<e[s];c++)n=n<<1|(s%2==0?1:0);return Math.trunc(n)},i.getClosestDecodedValue=function(e){var n=Ar.sum(e),s=new Array(Jr.BARS_IN_MODULE);if(n>1)for(var c=0;c<s.length;c++)s[c]=Math.fround(e[c]/n);var l=gl.MAX_VALUE,g=-1;this.bSymbolTableReady||i.initialize();for(var m=0;m<i.RATIOS_TABLE.length;m++){for(var y=0,b=i.RATIOS_TABLE[m],P=0;P<Jr.BARS_IN_MODULE;P++){var B=Math.fround(b[P]-s[P]);if((y+=Math.fround(B*B))>=l)break}y<l&&(l=y,g=Jr.SYMBOL_TABLE[m])}return g},i.bSymbolTableReady=!1,i.RATIOS_TABLE=new Array(Jr.SYMBOL_TABLE.length).map(function(e){return new Array(Jr.BARS_IN_MODULE)}),i}(),cg=function(){function i(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return i.prototype.getSegmentIndex=function(){return this.segmentIndex},i.prototype.setSegmentIndex=function(e){this.segmentIndex=e},i.prototype.getFileId=function(){return this.fileId},i.prototype.setFileId=function(e){this.fileId=e},i.prototype.getOptionalData=function(){return this.optionalData},i.prototype.setOptionalData=function(e){this.optionalData=e},i.prototype.isLastSegment=function(){return this.lastSegment},i.prototype.setLastSegment=function(e){this.lastSegment=e},i.prototype.getSegmentCount=function(){return this.segmentCount},i.prototype.setSegmentCount=function(e){this.segmentCount=e},i.prototype.getSender=function(){return this.sender||null},i.prototype.setSender=function(e){this.sender=e},i.prototype.getAddressee=function(){return this.addressee||null},i.prototype.setAddressee=function(e){this.addressee=e},i.prototype.getFileName=function(){return this.fileName},i.prototype.setFileName=function(e){this.fileName=e},i.prototype.getFileSize=function(){return this.fileSize},i.prototype.setFileSize=function(e){this.fileSize=e},i.prototype.getChecksum=function(){return this.checksum},i.prototype.setChecksum=function(e){this.checksum=e},i.prototype.getTimestamp=function(){return this.timestamp},i.prototype.setTimestamp=function(e){this.timestamp=e},i}(),uc=function(){function i(){}return i.parseLong=function(e,n){return void 0===n&&(n=void 0),parseInt(e,n)},i}();var S0=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const ug=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return S0(e,i),e.kind="NullPointerException",e}(Tn),ld=function(){function i(){}return i.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},i.prototype.writeBytesOffset=function(e,n,s){if(null==e)throw new ug;if(n<0||n>e.length||s<0||n+s>e.length||n+s<0)throw new wc;if(0!==s)for(var c=0;c<s;c++)this.write(e[n+c])},i.prototype.flush=function(){},i.prototype.close=function(){},i}();var Do=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Bm=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Do(e,i),e}(Tn);var lg=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Kf=function(i){function e(n){void 0===n&&(n=32);var s=i.call(this)||this;if(s.count=0,n<0)throw new yn("Negative initial size: "+n);return s.buf=new Uint8Array(n),s}return lg(e,i),e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var c=this.buf.length<<1;if(c-n<0&&(c=n),c<0){if(n<0)throw new Bm;c=ar.MAX_VALUE}this.buf=Yr.copyOfUint8Array(this.buf,c)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,s,c){if(s<0||s>n.length||c<0||s+c-n.length>0)throw new wc;this.ensureCapacity(this.count+c),Hr.arraycopy(n,s,this.buf,this.count,c),this.count+=c},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Yr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?"string"==typeof n?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(ld);var dd,si=function(i){return i[i.ALPHA=0]="ALPHA",i[i.LOWER=1]="LOWER",i[i.MIXED=2]="MIXED",i[i.PUNCT=3]="PUNCT",i[i.ALPHA_SHIFT=4]="ALPHA_SHIFT",i[i.PUNCT_SHIFT=5]="PUNCT_SHIFT",i}(si||{});function Zh(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function du(i){if(typeof dd>"u"&&(dd=Zh()),null===dd)throw new Error("BigInt is not supported!");return dd(i)}const ep=function(){function i(){}return i.decode=function(e,n){var s=new gn(""),c=co.ISO8859_1;s.enableDecoding(c);for(var l=1,g=e[l++],m=new cg;l<e[0];){switch(g){case i.TEXT_COMPACTION_MODE_LATCH:l=i.textCompaction(e,l,s);break;case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:l=i.byteCompaction(g,e,c,l,s);break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(e[l++]);break;case i.NUMERIC_COMPACTION_MODE_LATCH:l=i.numericCompaction(e,l,s);break;case i.ECI_CHARSET:co.getCharacterSetECIByValue(e[l++]);break;case i.ECI_GENERAL_PURPOSE:l+=2;break;case i.ECI_USER_DEFINED:l++;break;case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=i.decodeMacroBlock(e,l,m);break;case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:throw new Jt;default:l--,l=i.textCompaction(e,l,s)}if(!(l<e.length))throw Jt.getFormatInstance();g=e[l++]}if(0===s.length())throw Jt.getFormatInstance();var b=new Iu(null,s.toString(),null,n);return b.setOther(m),b},i.decodeMacroBlock=function(e,n,s){if(n+i.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Jt.getFormatInstance();for(var c=new Int32Array(i.NUMBER_OF_SEQUENCE_CODEWORDS),l=0;l<i.NUMBER_OF_SEQUENCE_CODEWORDS;l++,n++)c[l]=e[n];s.setSegmentIndex(ar.parseInt(i.decodeBase900toBase10(c,i.NUMBER_OF_SEQUENCE_CODEWORDS)));var g=new gn;n=i.textCompaction(e,n,g),s.setFileId(g.toString());var m=-1;for(e[n]===i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=n+1);n<e[0];)switch(e[n]){case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++n]){case i.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var y=new gn;n=i.textCompaction(e,n+1,y),s.setFileName(y.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var b=new gn;n=i.textCompaction(e,n+1,b),s.setSender(b.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var P=new gn;n=i.textCompaction(e,n+1,P),s.setAddressee(P.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var B=new gn;n=i.numericCompaction(e,n+1,B),s.setSegmentCount(ar.parseInt(B.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var z=new gn;n=i.numericCompaction(e,n+1,z),s.setTimestamp(uc.parseLong(z.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var K=new gn;n=i.numericCompaction(e,n+1,K),s.setChecksum(ar.parseInt(K.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var ae=new gn;n=i.numericCompaction(e,n+1,ae),s.setFileSize(uc.parseLong(ae.toString()));break;default:throw Jt.getFormatInstance()}break;case i.MACRO_PDF417_TERMINATOR:n++,s.setLastSegment(!0);break;default:throw Jt.getFormatInstance()}if(-1!==m){var ve=n-m;s.isLastSegment()&&ve--,s.setOptionalData(Yr.copyOfRange(e,m,m+ve))}return n},i.textCompaction=function(e,n,s){for(var c=new Int32Array(2*(e[0]-n)),l=new Int32Array(2*(e[0]-n)),g=0,m=!1;n<e[0]&&!m;){var y=e[n++];if(y<i.TEXT_COMPACTION_MODE_LATCH)c[g]=y/30,c[g+1]=y%30,g+=2;else switch(y){case i.TEXT_COMPACTION_MODE_LATCH:c[g++]=i.TEXT_COMPACTION_MODE_LATCH;break;case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:n--,m=!0;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[g]=i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=e[n++],l[g]=y,g++}}return i.decodeTextCompaction(c,l,g,s),n},i.decodeTextCompaction=function(e,n,s,c){for(var l=si.ALPHA,g=si.ALPHA,m=0;m<s;){var y=e[m],b="";switch(l){case si.ALPHA:if(y<26)b=String.fromCharCode(65+y);else switch(y){case 26:b=" ";break;case i.LL:l=si.LOWER;break;case i.ML:l=si.MIXED;break;case i.PS:g=l,l=si.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=si.ALPHA}break;case si.LOWER:if(y<26)b=String.fromCharCode(97+y);else switch(y){case 26:b=" ";break;case i.AS:g=l,l=si.ALPHA_SHIFT;break;case i.ML:l=si.MIXED;break;case i.PS:g=l,l=si.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=si.ALPHA}break;case si.MIXED:if(y<i.PL)b=i.MIXED_CHARS[y];else switch(y){case i.PL:l=si.PUNCT;break;case 26:b=" ";break;case i.LL:l=si.LOWER;break;case i.AL:l=si.ALPHA;break;case i.PS:g=l,l=si.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=si.ALPHA}break;case si.PUNCT:if(y<i.PAL)b=i.PUNCT_CHARS[y];else switch(y){case i.PAL:l=si.ALPHA;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=si.ALPHA}break;case si.ALPHA_SHIFT:if(l=g,y<26)b=String.fromCharCode(65+y);else switch(y){case 26:b=" ";break;case i.TEXT_COMPACTION_MODE_LATCH:l=si.ALPHA}break;case si.PUNCT_SHIFT:if(l=g,y<i.PAL)b=i.PUNCT_CHARS[y];else switch(y){case i.PAL:l=si.ALPHA;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[m]);break;case i.TEXT_COMPACTION_MODE_LATCH:l=si.ALPHA}}""!==b&&c.append(b),m++}},i.byteCompaction=function(e,n,s,c,l){var g=new Kf,m=0,y=0,b=!1;switch(e){case i.BYTE_COMPACTION_MODE_LATCH:for(var P=new Int32Array(6),B=n[c++];c<n[0]&&!b;)switch(P[m++]=B,y=900*y+B,B=n[c++],B){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:c--,b=!0;break;default:if(m%5==0&&m>0){for(var z=0;z<6;++z)g.write(Number(du(y)>>du(8*(5-z))));y=0,m=0}}c===n[0]&&B<i.TEXT_COMPACTION_MODE_LATCH&&(P[m++]=B);for(var K=0;K<m;K++)g.write(P[K]);break;case i.BYTE_COMPACTION_MODE_LATCH_6:for(;c<n[0]&&!b;){var ae=n[c++];if(ae<i.TEXT_COMPACTION_MODE_LATCH)m++,y=900*y+ae;else switch(ae){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:c--,b=!0}if(m%5==0&&m>0){for(z=0;z<6;++z)g.write(Number(du(y)>>du(8*(5-z))));y=0,m=0}}}return l.append(Ce.decode(g.toByteArray(),s)),c},i.numericCompaction=function(e,n,s){for(var c=0,l=!1,g=new Int32Array(i.MAX_NUMERIC_CODEWORDS);n<e[0]&&!l;){var m=e[n++];if(n===e[0]&&(l=!0),m<i.TEXT_COMPACTION_MODE_LATCH)g[c]=m,c++;else switch(m){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:n--,l=!0}(c%i.MAX_NUMERIC_CODEWORDS==0||m===i.NUMERIC_COMPACTION_MODE_LATCH||l)&&c>0&&(s.append(i.decodeBase900toBase10(g,c)),c=0)}return n},i.decodeBase900toBase10=function(e,n){for(var s=du(0),c=0;c<n;c++)s+=i.EXP900[n-c-1]*du(e[c]);var l=s.toString();if("1"!==l.charAt(0))throw new Jt;return l.substring(1)},i.TEXT_COMPACTION_MODE_LATCH=900,i.BYTE_COMPACTION_MODE_LATCH=901,i.NUMERIC_COMPACTION_MODE_LATCH=902,i.BYTE_COMPACTION_MODE_LATCH_6=924,i.ECI_USER_DEFINED=925,i.ECI_GENERAL_PURPOSE=926,i.ECI_CHARSET=927,i.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,i.MACRO_PDF417_TERMINATOR=922,i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,i.MAX_NUMERIC_CODEWORDS=15,i.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,i.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,i.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,i.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,i.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,i.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,i.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,i.PL=25,i.LL=27,i.AS=27,i.ML=28,i.AL=28,i.PS=29,i.PAL=29,i.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",i.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",i.EXP900=Zh()?function Qd(){var i=[];i[0]=du(1);var e=du(900);i[1]=e;for(var n=2;n<16;n++)i[n]=i[n-1]*e;return i}():[],i.NUMBER_OF_SEQUENCE_CODEWORDS=2,i}();var fd=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const hd=function(){function i(){}return i.decode=function(e,n,s,c,l,g,m){for(var B,y=new Nm(e,n,s,c,l),b=null,P=null,z=!0;;z=!1){if(null!=n&&(b=i.getRowIndicatorColumn(e,y,n,!0,g,m)),null!=c&&(P=i.getRowIndicatorColumn(e,y,c,!1,g,m)),null==(B=i.merge(b,P)))throw Ke.getNotFoundInstance();var K=B.getBoundingBox();if(!z||null==K||!(K.getMinY()<y.getMinY()||K.getMaxY()>y.getMaxY()))break;y=K}B.setBoundingBox(y);var ae=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,b),B.setDetectionResultColumn(ae,P);for(var ve=null!=b,Re=1;Re<=ae;Re++){var Ve=ve?Re:ae-Re;if(void 0===B.getDetectionResultColumn(Ve)){var Pe=void 0;Pe=0===Ve||Ve===ae?new zf(y,0===Ve):new Gf(y),B.setDetectionResultColumn(Ve,Pe);for(var Ye=-1,st=Ye,Nt=y.getMinY();Nt<=y.getMaxY();Nt++){if((Ye=i.getStartColumn(B,Ve,Nt,ve))<0||Ye>y.getMaxX()){if(-1===st)continue;Ye=st}var Gt=i.detectCodeword(e,y.getMinX(),y.getMaxX(),ve,Ye,Nt,g,m);null!=Gt&&(Pe.setCodeword(Nt,Gt),st=Ye,g=Math.min(g,Gt.getWidth()),m=Math.max(m,Gt.getWidth()))}}}return i.createDecoderResult(B)},i.merge=function(e,n){if(null==e&&null==n)return null;var s=i.getBarcodeMetadata(e,n);if(null==s)return null;var c=Nm.merge(i.adjustBoundingBox(e),i.adjustBoundingBox(n));return new ag(s,c)},i.adjustBoundingBox=function(e){var n,s;if(null==e)return null;var c=e.getRowHeights();if(null==c)return null;var l=i.getMax(c),g=0;try{for(var m=fd(c),y=m.next();!y.done;y=m.next()){var b=y.value;if(g+=l-b,b>0)break}}catch(K){n={error:K}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}for(var P=e.getCodewords(),B=0;g>0&&null==P[B];B++)g--;var z=0;for(B=c.length-1;B>=0&&(z+=l-c[B],!(c[B]>0));B--);for(B=P.length-1;z>0&&null==P[B];B--)z--;return e.getBoundingBox().addMissingRows(g,z,e.isLeft())},i.getMax=function(e){var n,s,c=-1;try{for(var l=fd(e),g=l.next();!g.done;g=l.next())c=Math.max(c,g.value)}catch(y){n={error:y}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return c},i.getBarcodeMetadata=function(e,n){var s,c;return null==e||null==(s=e.getBarcodeMetadata())?null==n?null:n.getBarcodeMetadata():null==n||null==(c=n.getBarcodeMetadata())?s:s.getColumnCount()!==c.getColumnCount()&&s.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&s.getRowCount()!==c.getRowCount()?null:s},i.getRowIndicatorColumn=function(e,n,s,c,l,g){for(var m=new zf(n,c),y=0;y<2;y++)for(var b=0===y?1:-1,P=Math.trunc(Math.trunc(s.getX())),B=Math.trunc(Math.trunc(s.getY()));B<=n.getMaxY()&&B>=n.getMinY();B+=b){var z=i.detectCodeword(e,0,e.getWidth(),c,P,B,l,g);null!=z&&(m.setCodeword(B,z),P=c?z.getStartX():z.getEndX())}return m},i.adjustCodewordCount=function(e,n){var s=n[0][1],c=s.getValue(),l=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-i.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===c.length){if(l<1||l>Jr.MAX_CODEWORDS_IN_BARCODE)throw Ke.getNotFoundInstance();s.setValue(l)}else c[0]!==l&&s.setValue(l)},i.createDecoderResult=function(e){var n=i.createBarcodeMatrix(e);i.adjustCodewordCount(e,n);for(var s=new Array,c=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),l=[],g=new Array,m=0;m<e.getBarcodeRowCount();m++)for(var y=0;y<e.getBarcodeColumnCount();y++){var b=n[m][y+1].getValue(),P=m*e.getBarcodeColumnCount()+y;0===b.length?s.push(P):1===b.length?c[P]=b[0]:(g.push(P),l.push(b))}for(var B=new Array(l.length),z=0;z<B.length;z++)B[z]=l[z];return i.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),c,Jr.toIntArray(s),Jr.toIntArray(g),B)},i.createDecoderResultFromAmbiguousValues=function(e,n,s,c,l){for(var g=new Int32Array(c.length),m=100;m-- >0;){for(var y=0;y<g.length;y++)n[c[y]]=l[y][g[y]];try{return i.decodeCodewords(n,e,s)}catch(P){if(!(P instanceof mi))throw P}if(0===g.length)throw mi.getChecksumInstance();for(y=0;y<g.length;y++){if(g[y]<l[y].length-1){g[y]++;break}if(g[y]=0,y===g.length-1)throw mi.getChecksumInstance()}}throw mi.getChecksumInstance()},i.createBarcodeMatrix=function(e){for(var n,s,c,l,g=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),m=0;m<g.length;m++)for(var y=0;y<g[m].length;y++)g[m][y]=new $f;var b=0;try{for(var P=fd(e.getDetectionResultColumns()),B=P.next();!B.done;B=P.next()){var z=B.value;if(null!=z)try{for(var K=(c=void 0,fd(z.getCodewords())),ae=K.next();!ae.done;ae=K.next()){var ve=ae.value;if(null!=ve){var Re=ve.getRowNumber();if(Re>=0){if(Re>=g.length)continue;g[Re][b].setValue(ve.getValue())}}}}catch(Ve){c={error:Ve}}finally{try{ae&&!ae.done&&(l=K.return)&&l.call(K)}finally{if(c)throw c.error}}b++}}catch(Ve){n={error:Ve}}finally{try{B&&!B.done&&(s=P.return)&&s.call(P)}finally{if(n)throw n.error}}return g},i.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},i.getStartColumn=function(e,n,s,c){var l,g,m=c?1:-1,y=null;if(i.isValidBarcodeColumn(e,n-m)&&(y=e.getDetectionResultColumn(n-m).getCodeword(s)),null!=y)return c?y.getEndX():y.getStartX();if(null!=(y=e.getDetectionResultColumn(n).getCodewordNearby(s)))return c?y.getStartX():y.getEndX();if(i.isValidBarcodeColumn(e,n-m)&&(y=e.getDetectionResultColumn(n-m).getCodewordNearby(s)),null!=y)return c?y.getEndX():y.getStartX();for(var b=0;i.isValidBarcodeColumn(e,n-m);){n-=m;try{for(var P=(l=void 0,fd(e.getDetectionResultColumn(n).getCodewords())),B=P.next();!B.done;B=P.next()){var z=B.value;if(null!=z)return(c?z.getEndX():z.getStartX())+m*b*(z.getEndX()-z.getStartX())}}catch(K){l={error:K}}finally{try{B&&!B.done&&(g=P.return)&&g.call(P)}finally{if(l)throw l.error}}b++}return c?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},i.detectCodeword=function(e,n,s,c,l,g,m,y){l=i.adjustCodewordStartColumn(e,n,s,c,l,g);var b=i.getModuleBitCount(e,n,s,c,l,g);if(null==b)return null;var P,B=Ar.sum(b);if(c)P=l+B;else{for(var z=0;z<b.length/2;z++){var K=b[z];b[z]=b[b.length-1-z],b[b.length-1-z]=K}l=(P=l)-B}if(!i.checkCodewordSkew(B,m,y))return null;var ae=Xh.getDecodedValue(b),ve=Jr.getCodeword(ae);return-1===ve?null:new Kh(l,P,i.getCodewordBucketNumber(ae),ve)},i.getModuleBitCount=function(e,n,s,c,l,g){for(var m=l,y=new Int32Array(8),b=0,P=c?1:-1,B=c;(c?m<s:m>=n)&&b<y.length;)e.get(m,g)===B?(y[b]++,m+=P):(b++,B=!B);return b===y.length||m===(c?s:n)&&b===y.length-1?y:null},i.getNumberOfECCodeWords=function(e){return 2<<e},i.adjustCodewordStartColumn=function(e,n,s,c,l,g){for(var m=l,y=c?-1:1,b=0;b<2;b++){for(;(c?m>=n:m<s)&&c===e.get(m,g);){if(Math.abs(l-m)>i.CODEWORD_SKEW_SIZE)return l;m+=y}y=-y,c=!c}return m},i.checkCodewordSkew=function(e,n,s){return n-i.CODEWORD_SKEW_SIZE<=e&&e<=s+i.CODEWORD_SKEW_SIZE},i.decodeCodewords=function(e,n,s){if(0===e.length)throw Jt.getFormatInstance();var c=1<<n+1,l=i.correctErrors(e,s,c);i.verifyCodewordCount(e,c);var g=ep.decode(e,""+n);return g.setErrorsCorrected(l),g.setErasures(s.length),g},i.correctErrors=function(e,n,s){if(null!=n&&n.length>s/2+i.MAX_ERRORS||s<0||s>i.MAX_EC_CODEWORDS)throw mi.getChecksumInstance();return i.errorCorrection.decode(e,s,n)},i.verifyCodewordCount=function(e,n){if(e.length<4)throw Jt.getFormatInstance();var s=e[0];if(s>e.length)throw Jt.getFormatInstance();if(0===s){if(!(n<e.length))throw Jt.getFormatInstance();e[0]=e.length-n}},i.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),s=0,c=n.length-1;!((1&e)!==s&&(s=1&e,c--,c<0));)n[c]++,e>>=1;return n},i.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},i.getCodewordBucketNumber_number=function(e){return i.getCodewordBucketNumber(i.getBitCountForCodeword(e))},i.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},i.toString=function(e){for(var n=new ig,s=0;s<e.length;s++){n.format("Row %2d: ",s);for(var c=0;c<e[s].length;c++){var l=e[s][c];0===l.getValue().length?n.format("        ",null):n.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}n.format("%n")}return n.toString()},i.CODEWORD_SKEW_SIZE=2,i.MAX_ERRORS=3,i.MAX_EC_CODEWORDS=512,i.errorCorrection=new Pm,i}(),Xf=function(){function i(){}return i.prototype.decode=function(e,n){void 0===n&&(n=null);var s=i.decode(e,n,!1);if(null==s||0===s.length||null==s[0])throw Ke.getNotFoundInstance();return s[0]},i.prototype.decodeMultiple=function(e,n){void 0===n&&(n=null);try{return i.decode(e,n,!0)}catch(s){throw s instanceof Jt||s instanceof mi?Ke.getNotFoundInstance():s}},i.decode=function(e,n,s){var c,l,g=new Array,m=zh.detectMultiple(e,n,s);try{for(var y=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(m.getPoints()),b=y.next();!b.done;b=y.next()){var P=b.value,B=hd.decode(m.getBits(),P[4],P[5],P[6],P[7],i.getMinCodewordWidth(P),i.getMaxCodewordWidth(P)),z=new qi(B.getText(),B.getRawBytes(),void 0,P,dn.PDF_417);z.putMetadata(Zi.ERROR_CORRECTION_LEVEL,B.getECLevel());var K=B.getOther();null!=K&&z.putMetadata(Zi.PDF417_EXTRA_METADATA,K),g.push(z)}}catch(ae){c={error:ae}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(c)throw c.error}}return g.map(function(ae){return ae})},i.getMaxWidth=function(e,n){return null==e||null==n?0:Math.trunc(Math.abs(e.getX()-n.getX()))},i.getMinWidth=function(e,n){return null==e||null==n?ar.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},i.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(i.getMaxWidth(e[0],e[4]),i.getMaxWidth(e[6],e[2])*Jr.MODULES_IN_CODEWORD/Jr.MODULES_IN_STOP_PATTERN),Math.max(i.getMaxWidth(e[1],e[5]),i.getMaxWidth(e[7],e[3])*Jr.MODULES_IN_CODEWORD/Jr.MODULES_IN_STOP_PATTERN)))},i.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(i.getMinWidth(e[0],e[4]),i.getMinWidth(e[6],e[2])*Jr.MODULES_IN_CODEWORD/Jr.MODULES_IN_STOP_PATTERN),Math.min(i.getMinWidth(e[1],e[5]),i.getMinWidth(e[7],e[3])*Jr.MODULES_IN_CODEWORD/Jr.MODULES_IN_STOP_PATTERN)))},i.prototype.reset=function(){},i}();var Yd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const dg=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return Yd(e,i),e.kind="ReaderException",e}(Tn);var fg=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Gm=function(){function i(){}return i.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},i.prototype.decodeWithState=function(e){return null==this.readers&&this.setHints(null),this.decodeInternal(e)},i.prototype.setHints=function(e){this.hints=e;var n=null!=e&&void 0!==e.get(Vn.TRY_HARDER),s=null==e?null:e.get(Vn.POSSIBLE_FORMATS),c=new Array;if(null!=s){var l=s.some(function(g){return g===dn.UPC_A||g===dn.UPC_E||g===dn.EAN_13||g===dn.EAN_8||g===dn.CODABAR||g===dn.CODE_39||g===dn.CODE_93||g===dn.CODE_128||g===dn.ITF||g===dn.RSS_14||g===dn.RSS_EXPANDED});l&&!n&&c.push(new eo(e)),s.includes(dn.QR_CODE)&&c.push(new zd),s.includes(dn.DATA_MATRIX)&&c.push(new Vf),s.includes(dn.AZTEC)&&c.push(new ke),s.includes(dn.PDF_417)&&c.push(new Xf),l&&n&&c.push(new eo(e))}0===c.length&&(n||c.push(new eo(e)),c.push(new zd),c.push(new Vf),c.push(new ke),c.push(new Xf),n&&c.push(new eo(e))),this.readers=c},i.prototype.reset=function(){var e,n;if(null!==this.readers)try{for(var s=fg(this.readers),c=s.next();!c.done;c=s.next())c.value.reset()}catch(g){e={error:g}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},i.prototype.decodeInternal=function(e){var n,s;if(null===this.readers)throw new dg("No readers where selected, nothing can be read.");try{for(var c=fg(this.readers),l=c.next();!l.done;l=c.next()){var g=l.value;try{return g.decode(e,this.hints)}catch(m){if(m instanceof dg)continue}}}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}throw new Ke("No MultiFormat Readers were able to detect the code.")},i}();var M0=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),$m=(function(i){function e(n,s){void 0===n&&(n=null),void 0===s&&(s=500);var l=new Gm;return l.setHints(n),i.call(this,l,s)||this}M0(e,i),e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)}}(ia),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),hg=(function(i){$m(function e(n){return void 0===n&&(n=500),i.call(this,new Xf,n)||this},i)}(ia),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),pg=(function(i){hg(function e(n){return void 0===n&&(n=500),i.call(this,new zd,n)||this},i)}(ia),function(i){return i[i.ERROR_CORRECTION=0]="ERROR_CORRECTION",i[i.CHARACTER_SET=1]="CHARACTER_SET",i[i.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",i[i.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",i[i.MIN_SIZE=4]="MIN_SIZE",i[i.MAX_SIZE=5]="MAX_SIZE",i[i.MARGIN=6]="MARGIN",i[i.PDF417_COMPACT=7]="PDF417_COMPACT",i[i.PDF417_COMPACTION=8]="PDF417_COMPACTION",i[i.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",i[i.AZTEC_LAYERS=10]="AZTEC_LAYERS",i[i.QR_VERSION=11]="QR_VERSION",i[i.GS1_FORMAT=12]="GS1_FORMAT",i[i.FORCE_C40=13]="FORCE_C40",i}(pg||{}));const Cr=pg,gg=function(){function i(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ja(e,Int32Array.from([1])))}return i.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var s=n[n.length-1],c=this.field,l=n.length;l<=e;l++){var g=s.multiply(new Ja(c,Int32Array.from([1,c.exp(l-1+c.getGeneratorBase())])));n.push(g),s=g}return n[e]},i.prototype.encode=function(e,n){if(0===n)throw new yn("No error correction bytes");var s=e.length-n;if(s<=0)throw new yn("No data bytes provided");var c=this.buildGenerator(n),l=new Int32Array(s);Hr.arraycopy(e,0,l,0,s);for(var g=new Ja(this.field,l),y=(g=g.multiplyByMonomial(n,1)).divide(c)[1].getCoefficients(),b=n-y.length,P=0;P<b;P++)e[s+P]=0;Hr.arraycopy(y,0,e,s+b,y.length)},i}(),Zd=function(){function i(){}return i.applyMaskPenaltyRule1=function(e){return i.applyMaskPenaltyRule1Internal(e,!0)+i.applyMaskPenaltyRule1Internal(e,!1)},i.applyMaskPenaltyRule2=function(e){for(var n=0,s=e.getArray(),c=e.getWidth(),l=e.getHeight(),g=0;g<l-1;g++)for(var m=s[g],y=0;y<c-1;y++){var b=m[y];b===m[y+1]&&b===s[g+1][y]&&b===s[g+1][y+1]&&n++}return i.N2*n},i.applyMaskPenaltyRule3=function(e){for(var n=0,s=e.getArray(),c=e.getWidth(),l=e.getHeight(),g=0;g<l;g++)for(var m=0;m<c;m++){var y=s[g];m+6<c&&1===y[m]&&0===y[m+1]&&1===y[m+2]&&1===y[m+3]&&1===y[m+4]&&0===y[m+5]&&1===y[m+6]&&(i.isWhiteHorizontal(y,m-4,m)||i.isWhiteHorizontal(y,m+7,m+11))&&n++,g+6<l&&1===s[g][m]&&0===s[g+1][m]&&1===s[g+2][m]&&1===s[g+3][m]&&1===s[g+4][m]&&0===s[g+5][m]&&1===s[g+6][m]&&(i.isWhiteVertical(s,m,g-4,g)||i.isWhiteVertical(s,m,g+7,g+11))&&n++}return n*i.N3},i.isWhiteHorizontal=function(e,n,s){n=Math.max(n,0),s=Math.min(s,e.length);for(var c=n;c<s;c++)if(1===e[c])return!1;return!0},i.isWhiteVertical=function(e,n,s,c){s=Math.max(s,0),c=Math.min(c,e.length);for(var l=s;l<c;l++)if(1===e[l][n])return!1;return!0},i.applyMaskPenaltyRule4=function(e){for(var n=0,s=e.getArray(),c=e.getWidth(),l=e.getHeight(),g=0;g<l;g++)for(var m=s[g],y=0;y<c;y++)1===m[y]&&n++;var b=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*n-b)/b)*i.N4},i.getDataMaskBit=function(e,n,s){var c,l;switch(e){case 0:c=s+n&1;break;case 1:c=1&s;break;case 2:c=n%3;break;case 3:c=(s+n)%3;break;case 4:c=Math.floor(s/2)+Math.floor(n/3)&1;break;case 5:c=(1&(l=s*n))+l%3;break;case 6:c=(1&(l=s*n))+l%3&1;break;case 7:c=(l=s*n)%3+(s+n&1)&1;break;default:throw new yn("Invalid mask pattern: "+e)}return 0===c},i.applyMaskPenaltyRule1Internal=function(e,n){for(var s=0,c=n?e.getHeight():e.getWidth(),l=n?e.getWidth():e.getHeight(),g=e.getArray(),m=0;m<c;m++){for(var y=0,b=-1,P=0;P<l;P++){var B=n?g[m][P]:g[P][m];B===b?y++:(y>=5&&(s+=i.N1+(y-5)),y=1,b=B)}y>=5&&(s+=i.N1+(y-5))}return s},i.N1=3,i.N2=3,i.N3=40,i.N4=10,i}(),zm=function(){function i(e,n){this.width=e,this.height=n;for(var s=new Array(n),c=0;c!==n;c++)s[c]=new Uint8Array(e);this.bytes=s}return i.prototype.getHeight=function(){return this.height},i.prototype.getWidth=function(){return this.width},i.prototype.get=function(e,n){return this.bytes[n][e]},i.prototype.getArray=function(){return this.bytes},i.prototype.setNumber=function(e,n,s){this.bytes[n][e]=s},i.prototype.setBoolean=function(e,n,s){this.bytes[n][e]=s?1:0},i.prototype.clear=function(e){var n,s;try{for(var c=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.bytes),l=c.next();!l.done;l=c.next())Yr.fill(l.value,e)}catch(m){n={error:m}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}},i.prototype.equals=function(e){if(!(e instanceof i))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var s=0,c=this.height;s<c;++s)for(var l=this.bytes[s],g=n.bytes[s],m=0,y=this.width;m<y;++m)if(l[m]!==g[m])return!1;return!0},i.prototype.toString=function(){for(var e=new gn,n=0,s=this.height;n<s;++n){for(var c=this.bytes[n],l=0,g=this.width;l<g;++l)switch(c[l]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()},i}(),Mr=function(){function i(){this.maskPattern=-1}return i.prototype.getMode=function(){return this.mode},i.prototype.getECLevel=function(){return this.ecLevel},i.prototype.getVersion=function(){return this.version},i.prototype.getMaskPattern=function(){return this.maskPattern},i.prototype.getMatrix=function(){return this.matrix},i.prototype.toString=function(){var e=new gn;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},i.prototype.setMode=function(e){this.mode=e},i.prototype.setECLevel=function(e){this.ecLevel=e},i.prototype.setVersion=function(e){this.version=e},i.prototype.setMaskPattern=function(e){this.maskPattern=e},i.prototype.setMatrix=function(e){this.matrix=e},i.isValidMaskPattern=function(e){return e>=0&&e<i.NUM_MASK_PATTERNS},i.NUM_MASK_PATTERNS=8,i}();var pd=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Ci=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return pd(e,i),e.kind="WriterException",e}(Tn),Jo=function(){function i(){}return i.clearMatrix=function(e){e.clear(255)},i.buildMatrix=function(e,n,s,c,l){i.clearMatrix(l),i.embedBasicPatterns(s,l),i.embedTypeInfo(n,c,l),i.maybeEmbedVersionInfo(s,l),i.embedDataBits(e,c,l)},i.embedBasicPatterns=function(e,n){i.embedPositionDetectionPatternsAndSeparators(n),i.embedDarkDotAtLeftBottomCorner(n),i.maybeEmbedPositionAdjustmentPatterns(e,n),i.embedTimingPatterns(n)},i.embedTypeInfo=function(e,n,s){var c=new _i;i.makeTypeInfoBits(e,n,c);for(var l=0,g=c.getSize();l<g;++l){var m=c.get(c.getSize()-1-l),y=i.TYPE_INFO_COORDINATES[l];if(s.setBoolean(y[0],y[1],m),l<8){var B=s.getWidth()-l-1;s.setBoolean(B,z=8,m)}else{B=8;var z=s.getHeight()-7+(l-8);s.setBoolean(B,z,m)}}},i.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var s=new _i;i.makeVersionInfoBits(e,s);for(var c=17,l=0;l<6;++l)for(var g=0;g<3;++g){var m=s.get(c);c--,n.setBoolean(l,n.getHeight()-11+g,m),n.setBoolean(n.getHeight()-11+g,l,m)}}},i.embedDataBits=function(e,n,s){for(var c=0,l=-1,g=s.getWidth()-1,m=s.getHeight()-1;g>0;){for(6===g&&(g-=1);m>=0&&m<s.getHeight();){for(var y=0;y<2;++y){var b=g-y;if(i.isEmpty(s.get(b,m))){var P=void 0;c<e.getSize()?(P=e.get(c),++c):P=!1,255!==n&&Zd.getDataMaskBit(n,b,m)&&(P=!P),s.setBoolean(b,m,P)}}m+=l}m+=l=-l,g-=2}if(c!==e.getSize())throw new Ci("Not all bits consumed: "+c+"/"+e.getSize())},i.findMSBSet=function(e){return 32-ar.numberOfLeadingZeros(e)},i.calculateBCHCode=function(e,n){if(0===n)throw new yn("0 polynomial");var s=i.findMSBSet(n);for(e<<=s-1;i.findMSBSet(e)>=s;)e^=n<<i.findMSBSet(e)-s;return e},i.makeTypeInfoBits=function(e,n,s){if(!Mr.isValidMaskPattern(n))throw new Ci("Invalid mask pattern");var c=e.getBits()<<3|n;s.appendBits(c,5);var l=i.calculateBCHCode(c,i.TYPE_INFO_POLY);s.appendBits(l,10);var g=new _i;if(g.appendBits(i.TYPE_INFO_MASK_PATTERN,15),s.xor(g),15!==s.getSize())throw new Ci("should not happen but we got: "+s.getSize())},i.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var s=i.calculateBCHCode(e.getVersionNumber(),i.VERSION_INFO_POLY);if(n.appendBits(s,12),18!==n.getSize())throw new Ci("should not happen but we got: "+n.getSize())},i.isEmpty=function(e){return 255===e},i.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var s=(n+1)%2;i.isEmpty(e.get(n,6))&&e.setNumber(n,6,s),i.isEmpty(e.get(6,n))&&e.setNumber(6,n,s)}},i.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new Ci;e.setNumber(8,e.getHeight()-8,1)},i.embedHorizontalSeparationPattern=function(e,n,s){for(var c=0;c<8;++c){if(!i.isEmpty(s.get(e+c,n)))throw new Ci;s.setNumber(e+c,n,0)}},i.embedVerticalSeparationPattern=function(e,n,s){for(var c=0;c<7;++c){if(!i.isEmpty(s.get(e,n+c)))throw new Ci;s.setNumber(e,n+c,0)}},i.embedPositionAdjustmentPattern=function(e,n,s){for(var c=0;c<5;++c)for(var l=i.POSITION_ADJUSTMENT_PATTERN[c],g=0;g<5;++g)s.setNumber(e+g,n+c,l[g])},i.embedPositionDetectionPattern=function(e,n,s){for(var c=0;c<7;++c)for(var l=i.POSITION_DETECTION_PATTERN[c],g=0;g<7;++g)s.setNumber(e+g,n+c,l[g])},i.embedPositionDetectionPatternsAndSeparators=function(e){var n=i.POSITION_DETECTION_PATTERN[0].length;i.embedPositionDetectionPattern(0,0,e),i.embedPositionDetectionPattern(e.getWidth()-n,0,e),i.embedPositionDetectionPattern(0,e.getWidth()-n,e),i.embedHorizontalSeparationPattern(0,7,e),i.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),i.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),i.embedVerticalSeparationPattern(7,0,e),i.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),i.embedVerticalSeparationPattern(7,e.getHeight()-7,e)},i.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var s=e.getVersionNumber()-1,c=i.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s],l=0,g=c.length;l!==g;l++){var m=c[l];if(m>=0)for(var y=0;y!==g;y++){var b=c[y];b>=0&&i.isEmpty(n.get(b,m))&&i.embedPositionAdjustmentPattern(b-2,m-2,n)}}},i.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),i.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),i.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),i.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),i.VERSION_INFO_POLY=7973,i.TYPE_INFO_POLY=1335,i.TYPE_INFO_MASK_PATTERN=21522,i}(),Fu=function(){function i(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return i.prototype.getDataBytes=function(){return this.dataBytes},i.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},i}();var np=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Qf=function(){function i(){}return i.calculateMaskPenalty=function(e){return Zd.applyMaskPenaltyRule1(e)+Zd.applyMaskPenaltyRule2(e)+Zd.applyMaskPenaltyRule3(e)+Zd.applyMaskPenaltyRule4(e)},i.encode=function(e,n,s){void 0===s&&(s=null);var c=i.DEFAULT_BYTE_MODE_ENCODING,l=null!==s&&void 0!==s.get(Cr.CHARACTER_SET);l&&(c=s.get(Cr.CHARACTER_SET).toString());var g=this.chooseMode(e,c),m=new _i;if(g===to.BYTE&&(l||i.DEFAULT_BYTE_MODE_ENCODING!==c)){var y=co.getCharacterSetECIByName(c);void 0!==y&&this.appendECI(y,m)}this.appendModeInfo(g,m);var P,b=new _i;if(this.appendBytes(e,g,b,c),null!==s&&void 0!==s.get(Cr.QR_VERSION)){var B=Number.parseInt(s.get(Cr.QR_VERSION).toString(),10);P=Rs.getVersionForNumber(B);var z=this.calculateBitsNeeded(g,m,b,P);if(!this.willFit(z,P,n))throw new Ci("Data too big for requested version")}else P=this.recommendVersion(n,g,m,b);var K=new _i;K.appendBitArray(m);var ae=g===to.BYTE?b.getSizeInBytes():e.length;this.appendLengthInfo(ae,P,g,K),K.appendBitArray(b);var ve=P.getECBlocksForLevel(n),Re=P.getTotalCodewords()-ve.getTotalECCodewords();this.terminateBits(Re,K);var Ve=this.interleaveWithECBytes(K,P.getTotalCodewords(),Re,ve.getNumBlocks()),Pe=new Mr;Pe.setECLevel(n),Pe.setMode(g),Pe.setVersion(P);var Ye=P.getDimensionForVersion(),st=new zm(Ye,Ye),Nt=this.chooseMaskPattern(Ve,n,P,st);return Pe.setMaskPattern(Nt),Jo.buildMatrix(Ve,n,P,Nt,st),Pe.setMatrix(st),Pe},i.recommendVersion=function(e,n,s,c){var l=this.calculateBitsNeeded(n,s,c,Rs.getVersionForNumber(1)),g=this.chooseVersion(l,e),m=this.calculateBitsNeeded(n,s,c,g);return this.chooseVersion(m,e)},i.calculateBitsNeeded=function(e,n,s,c){return n.getSize()+e.getCharacterCountBits(c)+s.getSize()},i.getAlphanumericCode=function(e){return e<i.ALPHANUMERIC_TABLE.length?i.ALPHANUMERIC_TABLE[e]:-1},i.chooseMode=function(e,n){if(void 0===n&&(n=null),co.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return to.KANJI;for(var s=!1,c=!1,l=0,g=e.length;l<g;++l){var m=e.charAt(l);if(i.isDigit(m))s=!0;else{if(-1===this.getAlphanumericCode(m.charCodeAt(0)))return to.BYTE;c=!0}}return c?to.ALPHANUMERIC:s?to.NUMERIC:to.BYTE},i.isOnlyDoubleByteKanji=function(e){var n;try{n=Ce.encode(e,co.SJIS)}catch{return!1}var s=n.length;if(s%2!=0)return!1;for(var c=0;c<s;c+=2){var l=255&n[c];if((l<129||l>159)&&(l<224||l>235))return!1}return!0},i.chooseMaskPattern=function(e,n,s,c){for(var l=Number.MAX_SAFE_INTEGER,g=-1,m=0;m<Mr.NUM_MASK_PATTERNS;m++){Jo.buildMatrix(e,n,s,m,c);var y=this.calculateMaskPenalty(c);y<l&&(l=y,g=m)}return g},i.chooseVersion=function(e,n){for(var s=1;s<=40;s++){var c=Rs.getVersionForNumber(s);if(i.willFit(e,c,n))return c}throw new Ci("Data too big")},i.willFit=function(e,n,s){return n.getTotalCodewords()-n.getECBlocksForLevel(s).getTotalECCodewords()>=(e+7)/8},i.terminateBits=function(e,n){var s=8*e;if(n.getSize()>s)throw new Ci("data bits cannot fit in the QR Code"+n.getSize()+" > "+s);for(var c=0;c<4&&n.getSize()<s;++c)n.appendBit(!1);var l=7&n.getSize();if(l>0)for(c=l;c<8;c++)n.appendBit(!1);var g=e-n.getSizeInBytes();for(c=0;c<g;++c)n.appendBits(1&c?17:236,8);if(n.getSize()!==s)throw new Ci("Bits size does not equal capacity")},i.getNumDataBytesAndNumECBytesForBlockID=function(e,n,s,c,l,g){if(c>=s)throw new Ci("Block ID too large");var m=e%s,y=s-m,b=Math.floor(e/s),P=b+1,B=Math.floor(n/s),z=B+1,K=b-B,ae=P-z;if(K!==ae)throw new Ci("EC bytes mismatch");if(s!==y+m)throw new Ci("RS blocks mismatch");if(e!==(B+K)*y+(z+ae)*m)throw new Ci("Total bytes mismatch");c<y?(l[0]=B,g[0]=K):(l[0]=z,g[0]=ae)},i.interleaveWithECBytes=function(e,n,s,c){var l,g,m,y;if(e.getSizeInBytes()!==s)throw new Ci("Number of bits and data bytes does not match");for(var b=0,P=0,B=0,z=new Array,K=0;K<c;++K){var ae=new Int32Array(1),ve=new Int32Array(1);i.getNumDataBytesAndNumECBytesForBlockID(n,s,c,K,ae,ve);var Re=ae[0],Ve=new Uint8Array(Re);e.toBytes(8*b,Ve,0,Re);var Pe=i.generateECBytes(Ve,ve[0]);z.push(new Fu(Ve,Pe)),P=Math.max(P,Re),B=Math.max(B,Pe.length),b+=ae[0]}if(s!==b)throw new Ci("Data bytes does not match offset");var Ye=new _i;for(K=0;K<P;++K)try{for(var st=(l=void 0,np(z)),Nt=st.next();!Nt.done;Nt=st.next())K<(Ve=Nt.value.getDataBytes()).length&&Ye.appendBits(Ve[K],8)}catch(ir){l={error:ir}}finally{try{Nt&&!Nt.done&&(g=st.return)&&g.call(st)}finally{if(l)throw l.error}}for(K=0;K<B;++K)try{for(var Qt=(m=void 0,np(z)),vn=Qt.next();!vn.done;vn=Qt.next())K<(Pe=vn.value.getErrorCorrectionBytes()).length&&Ye.appendBits(Pe[K],8)}catch(ir){m={error:ir}}finally{try{vn&&!vn.done&&(y=Qt.return)&&y.call(Qt)}finally{if(m)throw m.error}}if(n!==Ye.getSizeInBytes())throw new Ci("Interleaving error: "+n+" and "+Ye.getSizeInBytes()+" differ.");return Ye},i.generateECBytes=function(e,n){for(var s=e.length,c=new Int32Array(s+n),l=0;l<s;l++)c[l]=255&e[l];new gg(hi.QR_CODE_FIELD_256).encode(c,n);var g=new Uint8Array(n);for(l=0;l<n;l++)g[l]=c[s+l];return g},i.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},i.appendLengthInfo=function(e,n,s,c){var l=s.getCharacterCountBits(n);if(e>=1<<l)throw new Ci(e+" is bigger than "+((1<<l)-1));c.appendBits(e,l)},i.appendBytes=function(e,n,s,c){switch(n){case to.NUMERIC:i.appendNumericBytes(e,s);break;case to.ALPHANUMERIC:i.appendAlphanumericBytes(e,s);break;case to.BYTE:i.append8BitBytes(e,s,c);break;case to.KANJI:i.appendKanjiBytes(e,s);break;default:throw new Ci("Invalid mode: "+n)}},i.getDigit=function(e){return e.charCodeAt(0)-48},i.isDigit=function(e){var n=i.getDigit(e);return n>=0&&n<=9},i.appendNumericBytes=function(e,n){for(var s=e.length,c=0;c<s;){var l=i.getDigit(e.charAt(c));if(c+2<s){var g=i.getDigit(e.charAt(c+1)),m=i.getDigit(e.charAt(c+2));n.appendBits(100*l+10*g+m,10),c+=3}else c+1<s?(g=i.getDigit(e.charAt(c+1)),n.appendBits(10*l+g,7),c+=2):(n.appendBits(l,4),c++)}},i.appendAlphanumericBytes=function(e,n){for(var s=e.length,c=0;c<s;){var l=i.getAlphanumericCode(e.charCodeAt(c));if(-1===l)throw new Ci;if(c+1<s){var g=i.getAlphanumericCode(e.charCodeAt(c+1));if(-1===g)throw new Ci;n.appendBits(45*l+g,11),c+=2}else n.appendBits(l,6),c++}},i.append8BitBytes=function(e,n,s){var c;try{c=Ce.encode(e,s)}catch(y){throw new Ci(y)}for(var l=0,g=c.length;l!==g;l++)n.appendBits(c[l],8)},i.appendKanjiBytes=function(e,n){var s;try{s=Ce.encode(e,co.SJIS)}catch(B){throw new Ci(B)}for(var c=s.length,l=0;l<c;l+=2){var y=(255&s[l])<<8&4294967295|255&s[l+1],b=-1;if(y>=33088&&y<=40956?b=y-33088:y>=57408&&y<=60351&&(b=y-49472),-1===b)throw new Ci("Invalid byte sequence");n.appendBits(192*(b>>8)+(255&b),13)}},i.appendECI=function(e,n){n.appendBits(to.ECI.getBits(),4),n.appendBits(e.getValue(),8)},i.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),i.DEFAULT_BYTE_MODE_ENCODING=co.UTF8.getName(),i}();!function(){function i(){}i.prototype.write=function(e,n,s,c){if(void 0===c&&(c=null),0===e.length)throw new yn("Found empty contents");if(n<0||s<0)throw new yn("Requested dimensions are too small: "+n+"x"+s);var l=iu.L,g=i.QUIET_ZONE_SIZE;null!==c&&(void 0!==c.get(Cr.ERROR_CORRECTION)&&(l=iu.fromString(c.get(Cr.ERROR_CORRECTION).toString())),void 0!==c.get(Cr.MARGIN)&&(g=Number.parseInt(c.get(Cr.MARGIN).toString(),10)));var m=Qf.encode(e,l,c);return this.renderResult(m,n,s,g)},i.prototype.writeToDom=function(e,n,s,c,l){void 0===l&&(l=null),"string"==typeof e&&(e=document.querySelector(e));var g=this.write(n,s,c,l);e&&e.appendChild(g)},i.prototype.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new Zo;for(var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),ve=this.createSVGElement(P,B),Re=0,Ve=ae;Re<m;Re++,Ve+=z)for(var Pe=0,Ye=K;Pe<g;Pe++,Ye+=z)if(1===l.get(Pe,Re)){var st=this.createSvgRectElement(Ye,Ve,z,z);ve.appendChild(st)}return ve},i.prototype.createSVGElement=function(e,n){var s=document.createElementNS(i.SVG_NS,"svg");return s.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width",n.toString()),s},i.prototype.createSvgRectElement=function(e,n,s,c){var l=document.createElementNS(i.SVG_NS,"rect");return l.setAttributeNS(null,"x",e.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",c.toString()),l.setAttributeNS(null,"fill","#000000"),l},i.QUIET_ZONE_SIZE=4,i.SVG_NS="http://www.w3.org/2000/svg"}();!function(){function i(){}i.prototype.encode=function(e,n,s,c,l){if(0===e.length)throw new yn("Found empty contents");if(n!==dn.QR_CODE)throw new yn("Can only encode QR_CODE, but got "+n);if(s<0||c<0)throw new yn("Requested dimensions are too small: "+s+"x"+c);var g=iu.L,m=i.QUIET_ZONE_SIZE;null!==l&&(void 0!==l.get(Cr.ERROR_CORRECTION)&&(g=iu.fromString(l.get(Cr.ERROR_CORRECTION).toString())),void 0!==l.get(Cr.MARGIN)&&(m=Number.parseInt(l.get(Cr.MARGIN).toString(),10)));var y=Qf.encode(e,g,l);return i.renderResult(y,s,c,m)},i.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new Zo;for(var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),ve=new nr(P,B),Re=0,Ve=ae;Re<m;Re++,Ve+=z)for(var Pe=0,Ye=K;Pe<g;Pe++,Ye+=z)1===l.get(Pe,Re)&&ve.setRegion(Ye,Ve,z,z);return ve},i.QUIET_ZONE_SIZE=4}();var s1=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();!function(i){function e(n,s,c,l,g,m,y,b){var P=i.call(this,m,y)||this;if(P.yuvData=n,P.dataWidth=s,P.dataHeight=c,P.left=l,P.top=g,l+m>s||g+y>c)throw new yn("Crop rectangle does not fit within image data.");return b&&P.reverseHorizontal(m,y),P}s1(e,i),e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new yn("Requested row is outside the image: "+n);var c=this.getWidth();return(null==s||s.length<c)&&(s=new Uint8ClampedArray(c)),Hr.arraycopy(this.yuvData,(n+this.top)*this.dataWidth+this.left,s,0,c),s},e.prototype.getMatrix=function(){var n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.yuvData;var c=n*s,l=new Uint8ClampedArray(c),g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Hr.arraycopy(this.yuvData,g,l,0,c),l;for(var m=0;m<s;m++)Hr.arraycopy(this.yuvData,g,l,m*n,n),g+=this.dataWidth;return l},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+s,c,l,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(n*s),l=this.yuvData,g=this.top*this.dataWidth+this.left,m=0;m<s;m++){for(var y=m*n,b=0;b<n;b++)c[y+b]=4278190080|65793*(255&l[g+b*e.THUMBNAIL_SCALE_FACTOR]);g+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return c},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,s){for(var c=this.yuvData,l=0,g=this.top*this.dataWidth+this.left;l<s;l++,g+=this.dataWidth)for(var m=g+n/2,y=g,b=g+n-1;y<m;y++,b--){var P=c[y];c[y]=c[b],c[b]=P}},e.prototype.invert=function(){return new xs(this)},e.THUMBNAIL_SCALE_FACTOR=2}(En);var qm=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();!function(i){function e(n,s,c,l,g,m,y){var b=i.call(this,s,c)||this;if(b.dataWidth=l,b.dataHeight=g,b.left=m,b.top=y,4===n.BYTES_PER_ELEMENT){for(var P=s*c,B=new Uint8ClampedArray(P),z=0;z<P;z++){var K=n[z];B[z]=((K>>16&255)+(K>>7&510)+(255&K))/4&255}b.luminances=B}else b.luminances=n;if(void 0===l&&(b.dataWidth=s),void 0===g&&(b.dataHeight=c),void 0===m&&(b.left=0),void 0===y&&(b.top=0),b.left+s>b.dataWidth||b.top+c>b.dataHeight)throw new yn("Crop rectangle does not fit within image data.");return b}qm(e,i),e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new yn("Requested row is outside the image: "+n);var c=this.getWidth();return(null==s||s.length<c)&&(s=new Uint8ClampedArray(c)),Hr.arraycopy(this.luminances,(n+this.top)*this.dataWidth+this.left,s,0,c),s},e.prototype.getMatrix=function(){var n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.luminances;var c=n*s,l=new Uint8ClampedArray(c),g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Hr.arraycopy(this.luminances,g,l,0,c),l;for(var m=0;m<s;m++)Hr.arraycopy(this.luminances,g,l,m*n,n),g+=this.dataWidth;return l},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return new e(this.luminances,c,l,this.dataWidth,this.dataHeight,this.left+n,this.top+s)},e.prototype.invert=function(){return new xs(this)}}(En);var lc=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Zf=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return lc(e,i),e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(co),a1=function(){function i(){}return i.ISO_8859_1=co.ISO8859_1,i}(),Ca=function(){function i(e,n,s){this.codewords=e,this.numcols=n,this.numrows=s,this.bits=new Uint8Array(n*s),Yr.fill(this.bits,2)}return i.prototype.getNumrows=function(){return this.numrows},i.prototype.getNumcols=function(){return this.numcols},i.prototype.getBits=function(){return this.bits},i.prototype.getBit=function(e,n){return 1===this.bits[n*this.numcols+e]},i.prototype.setBit=function(e,n,s){this.bits[n*this.numcols+e]=s?1:0},i.prototype.noBit=function(e,n){return 2===this.bits[n*this.numcols+e]},i.prototype.place=function(){var e=0,n=4,s=0;do{n===this.numrows&&0===s&&this.corner1(e++),n===this.numrows-2&&0===s&&this.numcols%4!=0&&this.corner2(e++),n===this.numrows-2&&0===s&&this.numcols%8==4&&this.corner3(e++),n===this.numrows+4&&2===s&&this.numcols%8==0&&this.corner4(e++);do{n<this.numrows&&s>=0&&this.noBit(s,n)&&this.utah(n,s,e++),n-=2,s+=2}while(n>=0&&s<this.numcols);n++,s+=3;do{n>=0&&s<this.numcols&&this.noBit(s,n)&&this.utah(n,s,e++),n+=2,s-=2}while(n<this.numrows&&s>=0);n+=3,s++}while(n<this.numrows||s<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},i.prototype.module=function(e,n,s,c){e<0&&(e+=this.numrows,n+=4-(this.numrows+4)%8),n<0&&(n+=this.numcols,e+=4-(this.numcols+4)%8);var l=this.codewords.charCodeAt(s);this.setBit(n,e,0!=(l&=1<<8-c))},i.prototype.utah=function(e,n,s){this.module(e-2,n-2,s,1),this.module(e-2,n-1,s,2),this.module(e-1,n-2,s,3),this.module(e-1,n-1,s,4),this.module(e-1,n,s,5),this.module(e,n-2,s,6),this.module(e,n-1,s,7),this.module(e,n,s,8)},i.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},i.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},i.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},i.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},i}();var gd,Xm=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],F0=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],op=(gd=function(i,e){for(var n=1,s=0;s<255;s++)e[s]=n,i[n]=s,(n*=2)>=256&&(n^=301);return{LOG:i,ALOG:e}}([],[])).LOG,sl=gd.ALOG,al="[)>\x1e05\x1d",tf="[)>\x1e06\x1d";const Zm=function(){function i(){}return i.encodeECC200=function(e,n){if(e.length!==n.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var s=new gn;s.append(e);var c=n.getInterleavedBlockCount();if(1===c){var l=this.createECCBlock(e,n.getErrorCodewords());s.append(l)}else{for(var g=[],m=[],y=0;y<c;y++)g[y]=n.getDataLengthForInterleavedBlock(y+1),m[y]=n.getErrorLengthForInterleavedBlock(y+1);for(var b=0;b<c;b++){for(var P=new gn,B=b;B<n.getDataCapacity();B+=c)P.append(e.charAt(B));l=this.createECCBlock(P.toString(),m[b]);for(var z=0,K=b;K<m[b]*c;K+=c)s.setCharAt(n.getDataCapacity()+K,l.charAt(z++))}}return s.toString()},i.createECCBlock=function(e,n){for(var s=-1,c=0;c<Xm.length;c++)if(Xm[c]===n){s=c;break}if(s<0)throw new Error("Illegal number of error correction codewords specified: "+n);var l=F0[s],g=[];for(c=0;c<n;c++)g[c]=0;for(c=0;c<e.length;c++){for(var m=g[n-1]^e.charAt(c).charCodeAt(0),y=n-1;y>0;y--)g[y]=0!==m&&0!==l[y]?g[y-1]^sl[(op[m]+op[l[y]])%255]:g[y-1];g[0]=0!==m&&0!==l[0]?sl[(op[m]+op[l[0]])%255]:0}var b=[];for(c=0;c<n;c++)b[c]=g[n-c-1];return b.map(function(P){return String.fromCharCode(P)}).join("")},i}();var B0=function(){function i(){}return i.prototype.getEncodingMode=function(){return 0},i.prototype.encode=function(e){if(br.determineConsecutiveDigitCount(e.getMessage(),e.pos)>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var s=e.getCurrentChar(),c=br.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode())switch(c){case 5:return e.writeCodeword(231),void e.signalEncoderChange(5);case 1:return e.writeCodeword(230),void e.signalEncoderChange(1);case 3:e.writeCodeword(238),e.signalEncoderChange(3);break;case 2:e.writeCodeword(239),e.signalEncoderChange(2);break;case 4:e.writeCodeword(240),e.signalEncoderChange(4);break;default:throw new Error("Illegal mode: "+c)}else br.isExtendedASCII(s)?(e.writeCodeword(235),e.writeCodeword(s-128+1),e.pos++):(e.writeCodeword(s+1),e.pos++)}},i.prototype.encodeASCIIDigits=function(e,n){if(br.isDigit(e)&&br.isDigit(n))return 10*(e-48)+(n-48)+130;throw new Error("not digits: "+e+n)},i}(),Ig=function(){function i(){}return i.prototype.getEncodingMode=function(){return 5},i.prototype.encode=function(e){var n=new gn;for(n.append(0);e.hasMoreCharacters();){var s=e.getCurrentChar();if(n.append(s),e.pos++,br.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}var l=n.length()-1,m=e.getCodewordCount()+l+1;e.updateSymbolInfo(m);var y=e.getSymbolInfo().getDataCapacity()-m>0;if(e.hasMoreCharacters()||y)if(l<=249)n.setCharAt(0,mt.getCharAt(l));else{if(!(l<=1555))throw new Error("Message length not in valid ranges: "+l);n.setCharAt(0,mt.getCharAt(Math.floor(l/250)+249)),n.insert(1,mt.getCharAt(l%250))}var b=0;for(s=n.length();b<s;b++)e.writeCodeword(this.randomize255State(n.charAt(b).charCodeAt(0),e.getCodewordCount()+1))},i.prototype.randomize255State=function(e,n){var c=e+(149*n%255+1);return c<=255?c:c-256},i}(),Pl=function(){function i(){}return i.prototype.getEncodingMode=function(){return 1},i.prototype.encodeMaximal=function(e){for(var n=new gn,s=0,c=e.pos,l=0;e.hasMoreCharacters();){var g=e.getCurrentChar();e.pos++,s=this.encodeChar(g,n),n.length()%3==0&&(c=e.pos,l=n.length())}if(l!==n.length()){var m=Math.floor(n.length()/3*2),y=Math.floor(e.getCodewordCount()+m+1);e.updateSymbolInfo(y);var b=e.getSymbolInfo().getDataCapacity()-y,P=Math.floor(n.length()%3);(2===P&&2!==b||1===P&&(s>3||1!==b))&&(e.pos=c)}n.length()>0&&e.writeCodeword(230),this.handleEOD(e,n)},i.prototype.encode=function(e){for(var n=new gn;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++;var c=this.encodeChar(s,n),l=2*Math.floor(n.length()/3),g=e.getCodewordCount()+l;e.updateSymbolInfo(g);var m=e.getSymbolInfo().getDataCapacity()-g;if(!e.hasMoreCharacters()){var y=new gn;for(n.length()%3==2&&2!==m&&(c=this.backtrackOneCharacter(e,n,y,c));n.length()%3==1&&(c>3||1!==m);)c=this.backtrackOneCharacter(e,n,y,c);break}if(n.length()%3==0&&br.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,n)},i.prototype.backtrackOneCharacter=function(e,n,s,c){var l=n.length(),g=n.toString().substring(0,l-c);n.setLengthToZero(),n.append(g),e.pos--;var m=e.getCurrentChar();return c=this.encodeChar(m,s),e.resetSymbolInfo(),c},i.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var s=n.toString().substring(3);n.setLengthToZero(),n.append(s)},i.prototype.handleEOD=function(e,n){var s=Math.floor(n.length()/3*2),c=n.length()%3,l=e.getCodewordCount()+s;e.updateSymbolInfo(l);var g=e.getSymbolInfo().getDataCapacity()-l;if(2===c){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(254)}else if(1===g&&1===c){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(254),e.pos--}else{if(0!==c)throw new Error("Unexpected case. Please report!");for(;n.length()>=3;)this.writeNextTriplet(e,n);(g>0||e.hasMoreCharacters())&&e.writeCodeword(254)}e.signalEncoderChange(0)},i.prototype.encodeChar=function(e,n){return 32===e?(n.append(3),1):e>=48&&e<=57?(n.append(e-48+4),1):e>=65&&e<=90?(n.append(e-65+14),1):e<32?(n.append(0),n.append(e),2):e<=47?(n.append(1),n.append(e-33),2):e<=64?(n.append(1),n.append(e-58+15),2):e<=95?(n.append(1),n.append(e-91+22),2):e<=127?(n.append(2),n.append(e-96),2):(n.append("1\x1e"),2+this.encodeChar(e-128,n))},i.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,s=n/256,c=n%256,l=new gn;return l.append(s),l.append(c),l.toString()},i}(),Ag=function(){function i(){}return i.prototype.getEncodingMode=function(){return 4},i.prototype.encode=function(e){for(var n=new gn;e.hasMoreCharacters();){var s=e.getCurrentChar();if(this.encodeChar(s,n),e.pos++,n.length()>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var l=n.toString().substring(4);if(n.setLengthToZero(),n.append(l),br.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}}n.append(mt.getCharAt(31)),this.handleEOD(e,n)},i.prototype.handleEOD=function(e,n){try{var s=n.length();if(0===s)return;if(1===s){e.updateSymbolInfo();var c=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),l=e.getRemainingCharacters();if(l>c&&(e.updateSymbolInfo(e.getCodewordCount()+1),c=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),l<=c&&c<=2)return}if(s>4)throw new Error("Count must not exceed 4");var g=s-1,m=this.encodeToCodewords(n.toString()),b=!e.hasMoreCharacters()&&g<=2;g<=2&&(e.updateSymbolInfo(e.getCodewordCount()+g),(c=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount())>=3&&(b=!1,e.updateSymbolInfo(e.getCodewordCount()+m.length))),b?(e.resetSymbolInfo(),e.pos-=g):e.writeCodewords(m)}finally{e.signalEncoderChange(0)}},i.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(mt.getCharAt(e-64)):br.illegalCharacter(mt.getCharAt(e))},i.prototype.encodeToCodewords=function(e){var n=e.length;if(0===n)throw new Error("StringBuilder must not be empty");var m=(e.charAt(0).charCodeAt(0)<<18)+((n>=2?e.charAt(1).charCodeAt(0):0)<<12)+((n>=3?e.charAt(2).charCodeAt(0):0)<<6)+(n>=4?e.charAt(3).charCodeAt(0):0),y=m>>16&255,b=m>>8&255,P=255&m,B=new gn;return B.append(y),n>=2&&B.append(b),n>=3&&B.append(P),B.toString()},i}(),ap=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ei=function(){function i(e,n,s,c,l,g,m,y){void 0===m&&(m=0),void 0===y&&(y=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=s,this.matrixWidth=c,this.matrixHeight=l,this.dataRegions=g,this.rsBlockData=m,this.rsBlockError=y}return i.lookup=function(e,n,s,c,l){var g,m;void 0===n&&(n=0),void 0===s&&(s=null),void 0===c&&(c=null),void 0===l&&(l=!0);try{for(var y=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(sf),b=y.next();!b.done;b=y.next()){var P=b.value;if((1!==n||!P.rectangular)&&(2!==n||P.rectangular)&&(null==s||!(P.getSymbolWidth()<s.getWidth()||P.getSymbolHeight()<s.getHeight()))&&(null==c||!(P.getSymbolWidth()>c.getWidth()||P.getSymbolHeight()>c.getHeight()))&&e<=P.dataCapacity)return P}}catch(B){g={error:B}}finally{try{b&&!b.done&&(m=y.return)&&m.call(y)}finally{if(g)throw g.error}}if(l)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},i.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},i.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},i.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},i.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},i.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},i.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},i.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},i.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},i.prototype.getDataCapacity=function(){return this.dataCapacity},i.prototype.getErrorCodewords=function(){return this.errorCodewords},i.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},i.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},i}();const rf=ei;var Jm=function(i){function e(){return i.call(this,!1,1558,620,22,22,36,-1,62)||this}return ap(e,i),e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(ei),sf=[new ei(!1,3,5,8,8,1),new ei(!1,5,7,10,10,1),new ei(!0,5,7,16,6,1),new ei(!1,8,10,12,12,1),new ei(!0,10,11,14,6,2),new ei(!1,12,12,14,14,1),new ei(!0,16,14,24,10,1),new ei(!1,18,14,16,16,1),new ei(!1,22,18,18,18,1),new ei(!0,22,18,16,10,2),new ei(!1,30,20,20,20,1),new ei(!0,32,24,16,14,2),new ei(!1,36,24,22,22,1),new ei(!1,44,28,24,24,1),new ei(!0,49,28,22,14,2),new ei(!1,62,36,14,14,4),new ei(!1,86,42,16,16,4),new ei(!1,114,48,18,18,4),new ei(!1,144,56,20,20,4),new ei(!1,174,68,22,22,4),new ei(!1,204,84,24,24,4,102,42),new ei(!1,280,112,14,14,16,140,56),new ei(!1,368,144,16,16,16,92,36),new ei(!1,456,192,18,18,16,114,48),new ei(!1,576,224,20,20,16,144,56),new ei(!1,696,272,22,22,16,174,68),new ei(!1,816,336,24,24,16,136,56),new ei(!1,1050,408,18,18,36,175,68),new ei(!1,1304,496,20,20,36,163,62),new Jm],U0=function(){function i(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(m){return m.charCodeAt(0)}),s=new gn,c=0,l=n.length;c<l;c++){var g=String.fromCharCode(255&n[c]);if("?"===g&&"?"!==e.charAt(c))throw new Error("Message contains characters outside ISO-8859-1 encoding.");s.append(g)}this.msg=s.toString(),this.shape=0,this.codewords=new gn,this.newEncoding=-1}return i.prototype.setSymbolShape=function(e){this.shape=e},i.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},i.prototype.getMessage=function(){return this.msg},i.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},i.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},i.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},i.prototype.getCodewords=function(){return this.codewords},i.prototype.writeCodewords=function(e){this.codewords.append(e)},i.prototype.writeCodeword=function(e){this.codewords.append(e)},i.prototype.getCodewordCount=function(){return this.codewords.length()},i.prototype.getNewEncoding=function(){return this.newEncoding},i.prototype.signalEncoderChange=function(e){this.newEncoding=e},i.prototype.resetEncoderSignal=function(){this.newEncoding=-1},i.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},i.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},i.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},i.prototype.getSymbolInfo=function(){return this.symbolInfo},i.prototype.updateSymbolInfo=function(e){void 0===e&&(e=this.getCodewordCount()),(null==this.symbolInfo||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=rf.lookup(e,this.shape,this.minSize,this.maxSize,!0))},i.prototype.resetSymbolInfo=function(){this.symbolInfo=null},i}(),e_=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),th=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return e_(e,i),e.prototype.getEncodingMode=function(){return 3},e.prototype.encode=function(n){for(var s=new gn;n.hasMoreCharacters();){var c=n.getCurrentChar();if(n.pos++,this.encodeChar(c,s),s.length()%3==0&&(this.writeNextTriplet(n,s),br.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode())!==this.getEncodingMode())){n.signalEncoderChange(0);break}}this.handleEOD(n,s)},e.prototype.encodeChar=function(n,s){switch(n){case 13:s.append(0);break;case 42:s.append(1);break;case 62:s.append(2);break;case 32:s.append(3);break;default:n>=48&&n<=57?s.append(n-48+4):n>=65&&n<=90?s.append(n-65+14):br.illegalCharacter(mt.getCharAt(n))}return 1},e.prototype.handleEOD=function(n,s){n.updateSymbolInfo();var c=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),l=s.length();n.pos-=l,(n.getRemainingCharacters()>1||c>1||n.getRemainingCharacters()!==c)&&n.writeCodeword(254),n.getNewEncoding()<0&&n.signalEncoderChange(0)},e}(Pl),j0=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),nh=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return j0(e,i),e.prototype.getEncodingMode=function(){return 2},e.prototype.encodeChar=function(n,s){return 32===n?(s.append(3),1):n>=48&&n<=57?(s.append(n-48+4),1):n>=97&&n<=122?(s.append(n-97+14),1):n<32?(s.append(0),s.append(n),2):n<=47?(s.append(1),s.append(n-33),2):n<=64?(s.append(1),s.append(n-58+15),2):n>=91&&n<=95?(s.append(1),s.append(n-91+22),2):96===n?(s.append(2),s.append(0),2):n<=90?(s.append(2),s.append(n-65+1),2):n<=127?(s.append(2),s.append(n-123+27),2):(s.append("1\x1e"),2+this.encodeChar(n-128,s))},e}(Pl);const br=function(){function i(){}return i.randomize253State=function(e){var s=149*e%253+1+129;return s<=254?s:s-254},i.encodeHighLevel=function(e,n,s,c,l){void 0===n&&(n=0),void 0===s&&(s=null),void 0===c&&(c=null),void 0===l&&(l=!1);var g=new Pl,m=[new B0,g,new nh,new th,new Ag,new Ig],y=new U0(e);y.setSymbolShape(n),y.setSizeConstraints(s,c),e.startsWith(al)&&e.endsWith("\x1e\x04")?(y.writeCodeword(236),y.setSkipAtEnd(2),y.pos+=7):e.startsWith(tf)&&e.endsWith("\x1e\x04")&&(y.writeCodeword(237),y.setSkipAtEnd(2),y.pos+=7);var b=0;for(l&&(g.encodeMaximal(y),b=y.getNewEncoding(),y.resetEncoderSignal());y.hasMoreCharacters();)m[b].encode(y),y.getNewEncoding()>=0&&(b=y.getNewEncoding(),y.resetEncoderSignal());var P=y.getCodewordCount();y.updateSymbolInfo();var B=y.getSymbolInfo().getDataCapacity();P<B&&0!==b&&5!==b&&4!==b&&y.writeCodeword("\xfe");var z=y.getCodewords();for(z.length()<B&&z.append(129);z.length()<B;)z.append(this.randomize253State(z.length()+1));return y.getCodewords().toString()},i.lookAheadTest=function(e,n,s){var c=this.lookAheadTestIntern(e,n,s);if(3===s&&3===c){for(var l=Math.min(n+3,e.length),g=n;g<l;g++)if(!this.isNativeX12(e.charCodeAt(g)))return 0}else if(4===s&&4===c)for(l=Math.min(n+4,e.length),g=n;g<l;g++)if(!this.isNativeEDIFACT(e.charCodeAt(g)))return 0;return c},i.lookAheadTestIntern=function(e,n,s){if(n>=e.length)return s;var c;0===s?c=[0,1,1,1,1,1.25]:(c=[1,2,2,2,2,2.25])[s]=0;for(var l=0,g=new Uint8Array(6),m=[];;){if(n+l===e.length){Yr.fill(g,0),Yr.fill(m,0);var y=this.findMinimums(c,m,ar.MAX_VALUE,g),b=this.getMinimumCount(g);if(m[0]===y)return 0;if(1===b){if(g[5]>0)return 5;if(g[4]>0)return 4;if(g[2]>0)return 2;if(g[3]>0)return 3}return 1}var P=e.charCodeAt(n+l);if(l++,this.isDigit(P)?c[0]+=.5:this.isExtendedASCII(P)?(c[0]=Math.ceil(c[0]),c[0]+=2):(c[0]=Math.ceil(c[0]),c[0]++),this.isNativeC40(P)?c[1]+=2/3:this.isExtendedASCII(P)?c[1]+=8/3:c[1]+=4/3,this.isNativeText(P)?c[2]+=2/3:this.isExtendedASCII(P)?c[2]+=8/3:c[2]+=4/3,this.isNativeX12(P)?c[3]+=2/3:this.isExtendedASCII(P)?c[3]+=13/3:c[3]+=10/3,this.isNativeEDIFACT(P)?c[4]+=3/4:this.isExtendedASCII(P)?c[4]+=4.25:c[4]+=3.25,this.isSpecialB256(P)?c[5]+=4:c[5]++,l>=4){if(Yr.fill(g,0),Yr.fill(m,0),this.findMinimums(c,m,ar.MAX_VALUE,g),m[0]<this.min(m[5],m[1],m[2],m[3],m[4]))return 0;if(m[5]<m[0]||m[5]+1<this.min(m[1],m[2],m[3],m[4]))return 5;if(m[4]+1<this.min(m[5],m[1],m[2],m[3],m[0]))return 4;if(m[2]+1<this.min(m[5],m[1],m[4],m[3],m[0]))return 2;if(m[3]+1<this.min(m[5],m[1],m[4],m[2],m[0]))return 3;if(m[1]+1<this.min(m[0],m[5],m[4],m[2])){if(m[1]<m[3])return 1;if(m[1]===m[3]){for(var B=n+l+1;B<e.length;){var z=e.charCodeAt(B);if(this.isX12TermSep(z))return 3;if(!this.isNativeX12(z))break;B++}return 1}}}}},i.min=function(e,n,s,c,l){var g=Math.min(e,Math.min(n,Math.min(s,c)));return void 0===l?g:Math.min(g,l)},i.findMinimums=function(e,n,s,c){for(var l=0;l<6;l++){var g=n[l]=Math.ceil(e[l]);s>g&&(s=g,Yr.fill(c,0)),s===g&&(c[l]=c[l]+1)}return s},i.getMinimumCount=function(e){for(var n=0,s=0;s<6;s++)n+=e[s];return n||0},i.isDigit=function(e){return e>=48&&e<=57},i.isExtendedASCII=function(e){return e>=128&&e<=255},i.isNativeC40=function(e){return 32===e||e>=48&&e<=57||e>=65&&e<=90},i.isNativeText=function(e){return 32===e||e>=48&&e<=57||e>=97&&e<=122},i.isNativeX12=function(e){return this.isX12TermSep(e)||32===e||e>=48&&e<=57||e>=65&&e<=90},i.isX12TermSep=function(e){return 13===e||42===e||62===e},i.isNativeEDIFACT=function(e){return e>=32&&e<=94},i.isSpecialB256=function(e){return!1},i.determineConsecutiveDigitCount=function(e,n){void 0===n&&(n=0);for(var s=e.length,c=n;c<s&&this.isDigit(e.charCodeAt(c));)c++;return c-n},i.illegalCharacter=function(e){var n=ar.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},i}();var rh=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H0=function(){function i(e){this.charset=e,this.name=e.name}return i.prototype.canEncode=function(e){try{return null!=Ce.encode(e,this.charset)}catch{return!1}},i}(),ih=function(){function i(e,n,s){var c,l,g,m,y,b;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(er){return new H0(Zf.forName(er))}),this.encoders=[];var P=[];P.push(new H0(a1.ISO_8859_1));for(var B=null!=n&&n.name.startsWith("UTF"),z=0;z<e.length;z++){var K=!1;try{for(var ae=(c=void 0,rh(P)),ve=ae.next();!ve.done;ve=ae.next()){var Re=ve.value,Ve=e.charAt(z);if(Ve.charCodeAt(0)===s||Re.canEncode(Ve)){K=!0;break}}}catch(er){c={error:er}}finally{try{ve&&!ve.done&&(l=ae.return)&&l.call(ae)}finally{if(c)throw c.error}}if(!K)try{for(var Ye=(g=void 0,rh(this.ENCODERS)),st=Ye.next();!st.done;st=Ye.next())if((Re=st.value).canEncode(e.charAt(z))){P.push(Re),K=!0;break}}catch(er){g={error:er}}finally{try{st&&!st.done&&(m=Ye.return)&&m.call(Ye)}finally{if(g)throw g.error}}K||(B=!0)}if(1!==P.length||B){this.encoders=[];var Nt=0;try{for(var Gt=rh(P),Qt=Gt.next();!Qt.done;Qt=Gt.next())this.encoders[Nt++]=Re=Qt.value}catch(er){y={error:er}}finally{try{Qt&&!Qt.done&&(b=Gt.return)&&b.call(Gt)}finally{if(y)throw y.error}}}else this.encoders=[P[0]];var vn=-1;if(null!=n)for(z=0;z<this.encoders.length;z++)if(null!=this.encoders[z]&&n.name===this.encoders[z].name){vn=z;break}this.priorityEncoderIndex=vn}return i.prototype.length=function(){return this.encoders.length},i.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},i.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},i.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},i.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},i.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},i.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return Ce.encode(mt.getCharAt(e),this.encoders[n].name)},i}(),cl=function(){function i(e,n,s){this.fnc1=s;var c=new ih(e,n,s);if(1===c.length())for(var l=0;l<this.bytes.length;l++){var g=e.charAt(l).charCodeAt(0);this.bytes[l]=g===s?1e3:g}else this.bytes=this.encodeMinimally(e,c,s)}return i.prototype.getFNC1Character=function(){return this.fnc1},i.prototype.length=function(){return this.bytes.length},i.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var s=0;s<n;s++)if(this.isECI(e+s))return!1;return!0},i.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},i.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var s=new gn,c=e;c<n;c++){if(this.isECI(c))throw new Error("value at "+c+" is not a character but an ECI");s.append(this.charAt(c))}return s.toString()},i.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},i.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return 1e3===this.bytes[e]},i.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},i.prototype.addEdge=function(e,n,s){(null==e[n][s.encoderIndex]||e[n][s.encoderIndex].cachedTotalSize>s.cachedTotalSize)&&(e[n][s.encoderIndex]=s)},i.prototype.addEdges=function(e,n,s,c,l,g){var m=e.charAt(c).charCodeAt(0),y=0,b=n.length();n.getPriorityEncoderIndex()>=0&&(m===g||n.canEncode(m,n.getPriorityEncoderIndex()))&&(b=(y=n.getPriorityEncoderIndex())+1);for(var P=y;P<b;P++)(m===g||n.canEncode(m,P))&&this.addEdge(s,c+1,new cp(m,n,P,l,g))},i.prototype.encodeMinimally=function(e,n,s){var c=e.length,l=new(cp[c+1][n.length()]);this.addEdges(e,n,l,0,null,s);for(var g=1;g<=c;g++){for(var m=0;m<n.length();m++)null!=l[g][m]&&g<c&&this.addEdges(e,n,l,g,l[g][m],s);for(m=0;m<n.length();m++)l[g-1][m]=null}var y=-1,b=ar.MAX_VALUE;for(m=0;m<n.length();m++)if(null!=l[c][m]){var P=l[c][m];P.cachedTotalSize<b&&(b=P.cachedTotalSize,y=m)}if(y<0)throw new Error('Failed to encode "'+e+'"');for(var B=[],z=l[c][y];null!=z;){if(z.isFNC1())B.unshift(1e3);else{var K=n.encode(z.c,z.encoderIndex);for(g=K.length-1;g>=0;g--)B.unshift(255&K[g])}(null===z.previous?0:z.previous.encoderIndex)!==z.encoderIndex&&B.unshift(256+n.getECIValue(z.encoderIndex)),z=z.previous}var ve=[];for(g=0;g<ve.length;g++)ve[g]=B[g];return ve},i}(),cp=function(){function i(e,n,s,c,l){this.c=e,this.encoderSet=n,this.encoderIndex=s,this.previous=c,this.fnc1=l,this.c=e===l?1e3:e;var g=this.isFNC1()?1:n.encode(e,s).length;(null===c?0:c.encoderIndex)!==s&&(g+=3),null!=c&&(g+=c.cachedTotalSize),this.cachedTotalSize=g}return i.prototype.isFNC1=function(){return 1e3===this.c},i}(),n_=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Rc=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bg=function(i,e){var n="function"==typeof Symbol&&i[Symbol.iterator];if(!n)return i;var c,g,s=n.call(i),l=[];try{for(;(void 0===e||e-- >0)&&!(c=s.next()).done;)l.push(c.value)}catch(m){g={error:m}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(g)throw g.error}}return l},un=function(i){return i[i.ASCII=0]="ASCII",i[i.C40=1]="C40",i[i.TEXT=2]="TEXT",i[i.X12=3]="X12",i[i.EDF=4]="EDF",i[i.B256=5]="B256",i}(un||{}),Tg=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ks=function(){function i(){}return i.isExtendedASCII=function(e,n){return e!==n&&e>=128&&e<=255},i.isInC40Shift1Set=function(e){return e<=31},i.isInC40Shift2Set=function(e,n){var s,c;try{for(var l=Rc(Tg),g=l.next();!g.done;g=l.next())if(g.value.charCodeAt(0)===e)return!0}catch(y){s={error:y}}finally{try{g&&!g.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}return e===n},i.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},i.isInTextShift2Set=function(e,n){return this.isInC40Shift2Set(e,n)},i.encodeHighLevel=function(e,n,s,c){void 0===n&&(n=null),void 0===s&&(s=-1),void 0===c&&(c=0);var l=0;return e.startsWith(al)&&e.endsWith("\x1e\x04")?(l=5,e=e.substring(7,e.length-2)):e.startsWith(tf)&&e.endsWith("\x1e\x04")&&(l=6,e=e.substring(7,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,function(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(bg(arguments[e]));return i}(this.encode(e,n,s,c,l)))))},i.encode=function(e,n,s,c,l){return this.encodeMinimally(new lp(e,n,s,c,l)).getBytes()},i.addEdge=function(e,n){var s=n.fromPosition+n.characterLength;(null===e[s][n.getEndMode()]||e[s][n.getEndMode()].cachedTotalSize>n.cachedTotalSize)&&(e[s][n.getEndMode()]=n)},i.getNumberOfC40Words=function(e,n,s,c){for(var l=0,g=n;g<e.length();g++){if(e.isECI(g))return c[0]=0,0;var m=e.charAt(g);if(s&&br.isNativeC40(m)||!s&&br.isNativeText(m))l++;else if(i.isExtendedASCII(m,e.getFNC1Character())){var y=255&m;y>=128&&(s&&br.isNativeC40(y-128)||!s&&br.isNativeText(y-128))?l+=3:l+=4}else l+=2;if(l%3==0||(l-2)%3==0&&g+1===e.length())return c[0]=g-n+1,Math.ceil(l/3)}return c[0]=0,0},i.addEdges=function(e,n,s,c){var l,g;if(e.isECI(s))this.addEdge(n,new Mc(e,un.ASCII,s,1,c));else{var K,m=e.charAt(s);if(null===c||c.getEndMode()!==un.EDF){br.isDigit(m)&&e.haveNCharacters(s,2)&&br.isDigit(e.charAt(s+1))?this.addEdge(n,new Mc(e,un.ASCII,s,2,c)):this.addEdge(n,new Mc(e,un.ASCII,s,1,c));var y=[un.C40,un.TEXT];try{for(var b=Rc(y),P=b.next();!P.done;P=b.next()){var B=P.value,z=[];i.getNumberOfC40Words(e,s,B===un.C40,z)>0&&this.addEdge(n,new Mc(e,B,s,z[0],c))}}catch(ve){l={error:ve}}finally{try{P&&!P.done&&(g=b.return)&&g.call(b)}finally{if(l)throw l.error}}e.haveNCharacters(s,3)&&br.isNativeX12(e.charAt(s))&&br.isNativeX12(e.charAt(s+1))&&br.isNativeX12(e.charAt(s+2))&&this.addEdge(n,new Mc(e,un.X12,s,3,c)),this.addEdge(n,new Mc(e,un.B256,s,1,c))}for(K=0;K<3;K++){var ae=s+K;if(!e.haveNCharacters(ae,1)||!br.isNativeEDIFACT(e.charAt(ae)))break;this.addEdge(n,new Mc(e,un.EDF,s,K+1,c))}3===K&&e.haveNCharacters(s,4)&&br.isNativeEDIFACT(e.charAt(s+3))&&this.addEdge(n,new Mc(e,un.EDF,s,4,c))}},i.encodeMinimally=function(e){var n=e.length(),s=Array(n+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,s,0,null);for(var c=1;c<=n;c++){for(var l=0;l<6;l++)null!==s[c][l]&&c<n&&this.addEdges(e,s,c,s[c][l]);for(l=0;l<6;l++)s[c-1][l]=null}var g=-1,m=ar.MAX_VALUE;for(l=0;l<6;l++)if(null!==s[n][l]){var y=s[n][l],b=l>=1&&l<=3?y.cachedTotalSize+1:y.cachedTotalSize;b<m&&(m=b,g=l)}if(g<0)throw new Error('Failed to encode "'+e+'"');return new up(s[n][g])},i}(),up=function(){function i(e){var n=e.input,s=0,c=[],l=[],g=[];(e.mode===un.C40||e.mode===un.TEXT||e.mode===un.X12)&&e.getEndMode()!==un.ASCII&&(s+=this.prepend(Mc.getBytes(254),c));for(var m=e;null!==m;)s+=this.prepend(m.getDataBytes(),c),(null===m.previous||m.getPreviousStartMode()!==m.getMode())&&(m.getMode()===un.B256&&(s<=249?(c.unshift(s),s++):(c.unshift(s%250),c.unshift(s/250+249),s+=2),l.push(c.length),g.push(s)),this.prepend(m.getLatchBytes(),c),s=0),m=m.previous;5===n.getMacroId()?s+=this.prepend(Mc.getBytes(236),c):6===n.getMacroId()&&(s+=this.prepend(Mc.getBytes(237),c)),n.getFNC1Character()>0&&(s+=this.prepend(Mc.getBytes(232),c));for(var y=0;y<l.length;y++)this.applyRandomPattern(c,c.length-l[y],g[y]);var b=e.getMinSymbolSize(c.length);for(c.length<b&&c.push(129);c.length<b;)c.push(this.randomize253State(c.length+1));for(this.bytes=new Uint8Array(c.length),y=0;y<this.bytes.length;y++)this.bytes[y]=c[y]}return i.prototype.prepend=function(e,n){for(var s=e.length-1;s>=0;s--)n.unshift(e[s]);return e.length},i.prototype.randomize253State=function(e){var s=149*e%253+1+129;return s<=254?s:s-254},i.prototype.applyRandomPattern=function(e,n,s){for(var c=0;c<s;c++){var l=n+c,y=149*(l+1)%255+1+(255&e[l]);e[l]=y<=255?y:y-256}},i.prototype.getBytes=function(){return this.bytes},i}(),Mc=function(){function i(e,n,s,c,l){if(this.input=e,this.mode=n,this.fromPosition=s,this.characterLength=c,this.previous=l,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(s+c<=e.length()))throw new Error("Invalid edge");var g=null!==l?l.cachedTotalSize:0,m=this.getPreviousMode();switch(n){case un.ASCII:g++,(e.isECI(s)||Ks.isExtendedASCII(e.charAt(s),e.getFNC1Character()))&&g++,(m===un.C40||m===un.TEXT||m===un.X12)&&g++;break;case un.B256:g++,(m!==un.B256||250===this.getB256Size())&&g++,m===un.ASCII?g++:(m===un.C40||m===un.TEXT||m===un.X12)&&(g+=2);break;case un.C40:case un.TEXT:case un.X12:g+=n===un.X12?2:2*Ks.getNumberOfC40Words(e,s,n===un.C40,[]),m===un.ASCII||m===un.B256?g++:m!==n&&(m===un.C40||m===un.TEXT||m===un.X12)&&(g+=2);break;case un.EDF:g+=3,m===un.ASCII||m===un.B256?g++:(m===un.C40||m===un.TEXT||m===un.X12)&&(g+=2)}this.cachedTotalSize=g}return i.prototype.getB256Size=function(){for(var e=0,n=this;null!==n&&n.mode===un.B256&&e<=250;)e++,n=n.previous;return e},i.prototype.getPreviousStartMode=function(){return null===this.previous?un.ASCII:this.previous.mode},i.prototype.getPreviousMode=function(){return null===this.previous?un.ASCII:this.previous.getEndMode()},i.prototype.getEndMode=function(){if(this.mode===un.EDF){if(this.characterLength<4)return un.ASCII;if((e=this.getLastASCII())>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return un.ASCII}if(this.mode===un.C40||this.mode===un.TEXT||this.mode===un.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return un.ASCII;var e;if(1===(e=this.getLastASCII())&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return un.ASCII}return this.mode},i.prototype.getMode=function(){return this.mode},i.prototype.getLastASCII=function(){var e=this.input.length(),n=this.fromPosition+this.characterLength;return e-n>4||n>=e?0:e-n==1?Ks.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())?0:1:e-n==2?Ks.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())||Ks.isExtendedASCII(this.input.charAt(n+1),this.input.getFNC1Character())?0:br.isDigit(this.input.charAt(n))&&br.isDigit(this.input.charAt(n+1))?1:2:e-n==3?br.isDigit(this.input.charAt(n))&&br.isDigit(this.input.charAt(n+1))&&!Ks.isExtendedASCII(this.input.charAt(n+2),this.input.getFNC1Character())||br.isDigit(this.input.charAt(n+1))&&br.isDigit(this.input.charAt(n+2))&&!Ks.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())?2:0:br.isDigit(this.input.charAt(n))&&br.isDigit(this.input.charAt(n+1))&&br.isDigit(this.input.charAt(n+2))&&br.isDigit(this.input.charAt(n+3))?2:0},i.prototype.getMinSymbolSize=function(e){var n,s,c,l,g,m;switch(this.input.getShapeHint()){case 1:try{for(var y=Rc(this.squareCodewordCapacities),b=y.next();!b.done;b=y.next())if((P=b.value)>=e)return P}catch(ve){n={error:ve}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(n)throw n.error}}break;case 2:try{for(var B=Rc(this.rectangularCodewordCapacities),z=B.next();!z.done;z=B.next())if((P=z.value)>=e)return P}catch(ve){c={error:ve}}finally{try{z&&!z.done&&(l=B.return)&&l.call(B)}finally{if(c)throw c.error}}}try{for(var K=Rc(this.allCodewordCapacities),ae=K.next();!ae.done;ae=K.next()){var P;if((P=ae.value)>=e)return P}}catch(ve){g={error:ve}}finally{try{ae&&!ae.done&&(m=K.return)&&m.call(K)}finally{if(g)throw g.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},i.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},i.getBytes=function(e,n){var s=new Uint8Array(n?2:1);return s[0]=e,n&&(s[1]=n),s},i.prototype.setC40Word=function(e,n,s,c,l){var g=1600*(255&s)+40*(255&c)+(255&l)+1;e[n]=g/256,e[n+1]=g%256},i.prototype.getX12Value=function(e){return 13===e?0:42===e?1:62===e?2:32===e?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},i.prototype.getX12Words=function(){if(this.characterLength%3!=0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),n=0;n<e.length;n+=2)this.setC40Word(e,n,this.getX12Value(this.input.charAt(this.fromPosition+n/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+n/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+n/2*3+2)));return e},i.prototype.getShiftValue=function(e,n,s){return n&&Ks.isInC40Shift1Set(e)||!n&&Ks.isInTextShift1Set(e)?0:n&&Ks.isInC40Shift2Set(e,s)||!n&&Ks.isInTextShift2Set(e,s)?1:2},i.prototype.getC40Value=function(e,n,s,c){if(s===c){if(2!==n)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?s<=31?s:32===s?3:s<=47?s-33:s<=57?s-44:s<=64?s-43:s<=90?s-51:s<=95?s-69:s<=127?s-96:s:0===s?0:0===n&&s<=3?s-1:1===n&&s<=31?s:32===s?3:s>=33&&s<=47?s-33:s>=48&&s<=57?s-44:s>=58&&s<=64?s-43:s>=65&&s<=90?s-64:s>=91&&s<=95?s-69:96===s?0:s>=97&&s<=122?s-83:s>=123&&s<=127?s-96:s},i.prototype.getC40Words=function(e,n){for(var s=[],c=0;c<this.characterLength;c++){var l=this.input.charAt(this.fromPosition+c);if(e&&br.isNativeC40(l)||!e&&br.isNativeText(l))s.push(this.getC40Value(e,0,l,n));else if(Ks.isExtendedASCII(l,n)){var m=(255&l)-128;if(e&&br.isNativeC40(m)||!e&&br.isNativeText(m))s.push(1),s.push(30),s.push(this.getC40Value(e,0,m,n));else{s.push(1),s.push(30);var g=this.getShiftValue(m,e,n);s.push(g),s.push(this.getC40Value(e,g,m,n))}}else g=this.getShiftValue(l,e,n),s.push(g),s.push(this.getC40Value(e,g,l,n))}if(s.length%3!=0){if((s.length-2)%3!=0||this.fromPosition+this.characterLength!==this.input.length())throw new Error("C40 words must be a multiple of 3");s.push(0)}var y=new Uint8Array(s.length/3*2),b=0;for(c=0;c<s.length;c+=3)this.setC40Word(y,b,255&s[c],255&s[c+1],255&s[c+2]),b+=2;return y},i.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),n=new Uint8Array(3*e),s=this.fromPosition,c=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),l=0;l<e;l+=3){for(var g=[],m=0;m<4;m++)g[m]=s<=c?63&this.input.charAt(s++):s===c+1?31:0;var y=g[0]<<18;y|=g[1]<<12,y|=g[2]<<6,n[l]=(y|=g[3])>>16&255,n[l+1]=y>>8&255,n[l+2]=255&y}return n},i.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case un.ASCII:case un.B256:switch(this.mode){case un.B256:return i.getBytes(231);case un.C40:return i.getBytes(230);case un.TEXT:return i.getBytes(239);case un.X12:return i.getBytes(238);case un.EDF:return i.getBytes(240)}break;case un.C40:case un.TEXT:case un.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case un.ASCII:return i.getBytes(254);case un.B256:return i.getBytes(254,231);case un.C40:return i.getBytes(254,230);case un.TEXT:return i.getBytes(254,239);case un.X12:return i.getBytes(254,238);case un.EDF:return i.getBytes(254,240)}break;case un.EDF:if(this.mode!==un.EDF)throw new Error("Cannot switch from EDF to "+this.mode)}return new Uint8Array(0)},i.prototype.getDataBytes=function(){switch(this.mode){case un.ASCII:return this.input.isECI(this.fromPosition)?i.getBytes(241,this.input.getECIValue(this.fromPosition)+1):Ks.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?i.getBytes(235,this.input.charAt(this.fromPosition)-127):2===this.characterLength?i.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?i.getBytes(232):i.getBytes(this.input.charAt(this.fromPosition)+1);case un.B256:return i.getBytes(this.input.charAt(this.fromPosition));case un.C40:return this.getC40Words(!0,this.input.getFNC1Character());case un.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case un.X12:return this.getX12Words();case un.EDF:return this.getEDFBytes()}},i}(),lp=function(i){function e(n,s,c,l,g){var m=i.call(this,n,s,c)||this;return m.shape=l,m.macroId=g,m}return n_(e,i),e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(cl);!function(){function i(){}i.prototype.encode=function(e,n,s,c,l){if(void 0===l&&(l=null),""===e.trim())throw new Error("Found empty contents");if(n!==dn.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+n);if(s<0||c<0)throw new Error("Requested dimensions can't be negative: "+s+"x"+c);var z,g=0,m=null,y=null;if(null!=l){var b=l.get(Cr.DATA_MATRIX_SHAPE);null!=b&&(g=b);var P=l.get(Cr.MIN_SIZE);null!=P&&(m=P);var B=l.get(Cr.MAX_SIZE);null!=B&&(y=B)}if(null!=l&&l.has(Cr.DATA_MATRIX_COMPACT)&&l.get(Cr.DATA_MATRIX_COMPACT).toString()){var ae=l.has(Cr.GS1_FORMAT)&&!!l.get(Cr.GS1_FORMAT).toString(),ve=null;l.has(Cr.CHARACTER_SET)&&(ve=Zf.forName(l.get(Cr.CHARACTER_SET).toString())),z=Ks.encodeHighLevel(e,ve,ae?29:-1,g)}else{var Ve=null!=l&&l.has(Cr.FORCE_C40)&&!!l.get(Cr.FORCE_C40).toString();z=br.encodeHighLevel(e,g,m,y,Ve)}var Pe=rf.lookup(z.length,g,m,y,!0),Ye=Zm.encodeECC200(z,Pe),st=new Ca(Ye,Pe.getSymbolDataWidth(),Pe.getSymbolDataHeight());return st.place(),this.encodeLowLevel(st,Pe,s,c)},i.prototype.encodeLowLevel=function(e,n,s,c){for(var l=n.getSymbolDataWidth(),g=n.getSymbolDataHeight(),m=new zm(n.getSymbolWidth(),n.getSymbolHeight()),y=0,b=0;b<g;b++){var P=void 0;if(b%n.matrixHeight==0){P=0;for(var B=0;B<n.getSymbolWidth();B++)m.setBoolean(P,y,B%2==0),P++;y++}for(P=0,B=0;B<l;B++)B%n.matrixWidth==0&&(m.setBoolean(P,y,!0),P++),m.setBoolean(P,y,e.getBit(B,b)),P++,B%n.matrixWidth==n.matrixWidth-1&&(m.setBoolean(P,y,b%2==0),P++);if(y++,b%n.matrixHeight==n.matrixHeight-1){for(P=0,B=0;B<n.getSymbolWidth();B++)m.setBoolean(P,y,!0),P++;y++}}return this.convertByteMatrixToBitMatrix(m,s,c)},i.prototype.convertByteMatrixToBitMatrix=function(e,n,s){var B,c=e.getWidth(),l=e.getHeight(),g=Math.max(n,c),m=Math.max(s,l),y=Math.min(g/c,m/l),b=(g-c*y)/2,P=(m-l*y)/2;s<l||n<c?(b=0,P=0,B=new nr(c,l)):B=new nr(n,s),B.clear();for(var z=0,K=P;z<l;z++,K+=y)for(var ae=0,ve=b;ae<c;ae++,ve+=y)1===e.get(ae,z)&&B.setRegion(ve,K,y,y);return B}}();const dp=function(){function i(){}return i.prototype.isCompact=function(){return this.compact},i.prototype.setCompact=function(e){this.compact=e},i.prototype.getSize=function(){return this.size},i.prototype.setSize=function(e){this.size=e},i.prototype.getLayers=function(){return this.layers},i.prototype.setLayers=function(e){this.layers=e},i.prototype.getCodeWords=function(){return this.codeWords},i.prototype.setCodeWords=function(e){this.codeWords=e},i.prototype.getMatrix=function(){return this.matrix},i.prototype.setMatrix=function(e){this.matrix=e},i}(),Sg=function(){function i(){}return i.singletonList=function(e){return[e]},i.min=function(e,n){return e.sort(n)[0]},i}(),W0=function(){function i(e){this.previous=e}return i.prototype.getPrevious=function(){return this.previous},i}();var u1=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const Vu=function(i){function e(n,s,c){var l=i.call(this,n)||this;return l.value=s,l.bitCount=c,l}return u1(e,i),e.prototype.appendTo=function(n,s){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,s){return new e(this,n,s)},e.prototype.addBinaryShift=function(n,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,s)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return"<"+ar.toBinaryString((n|=1<<this.bitCount)|1<<this.bitCount).substring(1)+">"},e}(W0);var Nl=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)c.hasOwnProperty(l)&&(s[l]=c[l])})(e,n)};return function(e,n){function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();const ah=function(i){function e(n,s,c){var l=i.call(this,n,0,0)||this;return l.binaryShiftStart=s,l.binaryShiftByteCount=c,l}return Nl(e,i),e.prototype.appendTo=function(n,s){for(var c=0;c<this.binaryShiftByteCount;c++)(0===c||31===c&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):n.appendBits(0===c?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),n.appendBits(s[this.binaryShiftStart+c],8)},e.prototype.addBinaryShift=function(n,s){return new e(this,n,s)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Vu);function kl(i,e,n){return new Vu(i,e,n)}var q0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],i_=new Vu(null,0,0),Dg=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],lh=function o_(i){var e,n;try{for(var s=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),c=s.next();!c.done;c=s.next())Yr.fill(c.value,-1)}catch(g){e={error:g}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i[0][4]=0,i[1][4]=0,i[1][0]=28,i[3][4]=0,i[2][4]=0,i[2][0]=15,i}(Yr.createInt32Array(6,6));const af=function(){function i(e,n,s,c){this.token=e,this.mode=n,this.binaryShiftByteCount=s,this.bitCount=c}return i.prototype.getMode=function(){return this.mode},i.prototype.getToken=function(){return this.token},i.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},i.prototype.getBitCount=function(){return this.bitCount},i.prototype.latchAndAppend=function(e,n){var s=this.bitCount,c=this.token;if(e!==this.mode){var l=Dg[this.mode][e];c=kl(c,65535&l,l>>16),s+=l>>16}var g=2===e?4:5;return new i(c=kl(c,n,g),e,0,s+g)},i.prototype.shiftAndAppend=function(e,n){var s=this.token,c=2===this.mode?4:5;return s=kl(s,lh[this.mode][e],c),new i(s=kl(s,n,5),this.mode,0,this.bitCount+c+5)},i.prototype.addBinaryShiftChar=function(e){var n=this.token,s=this.mode,c=this.bitCount;if(4===this.mode||2===this.mode){var l=Dg[s][0];n=kl(n,65535&l,l>>16),c+=l>>16,s=0}var m=new i(n,s,this.binaryShiftByteCount+1,c+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===m.binaryShiftByteCount&&(m=m.endBinaryShift(e+1)),m},i.prototype.endBinaryShift=function(e){if(0===this.binaryShiftByteCount)return this;var n=this.token;return n=function l1(i,e,n){return new ah(i,e,n)}(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new i(n,this.mode,0,this.bitCount)},i.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(Dg[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=i.calculateBinaryShiftCost(e)-i.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},i.prototype.toBitArray=function(e){for(var n,s,c=[],l=this.endBinaryShift(e.length).token;null!==l;l=l.getPrevious())c.unshift(l);var g=new _i;try{for(var m=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),y=m.next();!y.done;y=m.next())y.value.appendTo(g,e)}catch(P){n={error:P}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}return g},i.prototype.toString=function(){return mt.format("%s bits=%d bytes=%d",q0[this.mode],this.bitCount,this.binaryShiftByteCount)},i.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},i.INITIAL_STATE=new i(i_,0,0,0),i}();var Rg=function dh(i){var e=mt.getCharCode(" "),n=mt.getCharCode("."),s=mt.getCharCode(",");i[0][e]=1;for(var c=mt.getCharCode("Z"),l=mt.getCharCode("A"),g=l;g<=c;g++)i[0][g]=g-l+2;i[1][e]=1;var m=mt.getCharCode("z"),y=mt.getCharCode("a");for(g=y;g<=m;g++)i[1][g]=g-y+2;i[2][e]=1;var b=mt.getCharCode("9"),P=mt.getCharCode("0");for(g=P;g<=b;g++)i[2][g]=g-P+2;i[2][s]=12,i[2][n]=13;for(var B=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],z=0;z<B.length;z++)i[3][mt.getCharCode(B[z])]=z;var K=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(z=0;z<K.length;z++)mt.getCharCode(K[z])>0&&(i[4][mt.getCharCode(K[z])]=z);return i}(Yr.createInt32Array(5,256)),pp=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};const Mg=function(){function i(e){this.text=e}return i.prototype.encode=function(){for(var e=mt.getCharCode(" "),n=mt.getCharCode("\n"),s=Sg.singletonList(af.INITIAL_STATE),c=0;c<this.text.length;c++){var l=void 0,g=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case mt.getCharCode("\r"):l=g===n?2:0;break;case mt.getCharCode("."):l=g===e?3:0;break;case mt.getCharCode(","):l=g===e?4:0;break;case mt.getCharCode(":"):l=g===e?5:0;break;default:l=0}l>0?(s=i.updateStateListForPair(s,c,l),c++):s=this.updateStateListForChar(s,c)}return Sg.min(s,function(y,b){return y.getBitCount()-b.getBitCount()}).toBitArray(this.text)},i.prototype.updateStateListForChar=function(e,n){var s,c,l=[];try{for(var g=pp(e),m=g.next();!m.done;m=g.next())this.updateStateForChar(m.value,n,l)}catch(b){s={error:b}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}return i.simplifyStates(l)},i.prototype.updateStateForChar=function(e,n,s){for(var c=255&this.text[n],l=Rg[e.getMode()][c]>0,g=null,m=0;m<=4;m++){var y=Rg[m][c];if(y>0){if(null==g&&(g=e.endBinaryShift(n)),!l||m===e.getMode()||2===m){var b=g.latchAndAppend(m,y);s.push(b)}if(!l&&lh[e.getMode()][m]>=0){var P=g.shiftAndAppend(m,y);s.push(P)}}}if(e.getBinaryShiftByteCount()>0||0===Rg[e.getMode()][c]){var B=e.addBinaryShiftChar(n);s.push(B)}},i.updateStateListForPair=function(e,n,s){var c,l,g=[];try{for(var m=pp(e),y=m.next();!y.done;y=m.next())this.updateStateForPair(y.value,n,s,g)}catch(P){c={error:P}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(c)throw c.error}}return this.simplifyStates(g)},i.updateStateForPair=function(e,n,s,c){var l=e.endBinaryShift(n);if(c.push(l.latchAndAppend(4,s)),4!==e.getMode()&&c.push(l.shiftAndAppend(4,s)),3===s||4===s){var g=l.latchAndAppend(2,16-s).latchAndAppend(2,1);c.push(g)}if(e.getBinaryShiftByteCount()>0){var m=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);c.push(m)}},i.simplifyStates=function(e){var n,s,c,l,g=[];try{for(var m=pp(e),y=m.next();!y.done;y=m.next()){var b=y.value,P=!0,B=function(Re){if(Re.isBetterThanOrEqualTo(b))return P=!1,"break";b.isBetterThanOrEqualTo(Re)&&(g=g.filter(function(Ve){return Ve!==Re}))};try{for(var z=(c=void 0,pp(g)),K=z.next();!K.done&&"break"!==B(K.value);K=z.next());}catch(Re){c={error:Re}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}P&&g.push(b)}}catch(Re){n={error:Re}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}return g},i}(),a_=function(){function i(){}return i.encodeBytes=function(e){return i.encode(e,i.DEFAULT_EC_PERCENT,i.DEFAULT_AZTEC_LAYERS)},i.encode=function(e,n,s){var m,y,b,P,B,c=new Mg(e).encode(),l=ar.truncDivision(c.getSize()*n,100)+11,g=c.getSize()+l;if(s!==i.DEFAULT_AZTEC_LAYERS){if(m=s<0,(y=Math.abs(s))>(m?i.MAX_NB_BITS_COMPACT:i.MAX_NB_BITS))throw new yn(mt.format("Illegal value %s for layers",s));var z=(b=i.totalBitsInLayer(y,m))-b%(P=i.WORD_SIZE[y]);if((B=i.stuffBits(c,P)).getSize()+l>z)throw new yn("Data to large for user specified layer");if(m&&B.getSize()>64*P)throw new yn("Data to large for user specified layer")}else{P=0,B=null;for(var K=0;;K++){if(K>i.MAX_NB_BITS)throw new yn("Data too large for an Aztec code");if(!(g>(b=i.totalBitsInLayer(y=(m=K<=3)?K+1:K,m)))&&((null==B||P!==i.WORD_SIZE[y])&&(B=i.stuffBits(c,P=i.WORD_SIZE[y])),z=b-b%P,!(m&&B.getSize()>64*P)&&B.getSize()+l<=z))break}}var Ye,ae=i.generateCheckWords(B,b,P),ve=B.getSize()/P,Re=i.generateModeMessage(m,y,ve),Ve=(m?11:14)+4*y,Pe=new Int32Array(Ve);if(m)for(Ye=Ve,K=0;K<Pe.length;K++)Pe[K]=K;else{Ye=Ve+1+2*ar.truncDivision(ar.truncDivision(Ve,2)-1,15);var st=ar.truncDivision(Ve,2),Nt=ar.truncDivision(Ye,2);for(K=0;K<st;K++){var Gt=K+ar.truncDivision(K,15);Pe[st-K-1]=Nt-Gt-1,Pe[st+K]=Nt+Gt+1}}for(var Qt=new nr(Ye),vn=(K=0,0);K<y;K++){for(var er=4*(y-K)+(m?9:12),ir=0;ir<er;ir++)for(var Eo=2*ir,ai=0;ai<2;ai++)ae.get(vn+Eo+ai)&&Qt.set(Pe[2*K+ai],Pe[2*K+ir]),ae.get(vn+2*er+Eo+ai)&&Qt.set(Pe[2*K+ir],Pe[Ve-1-2*K-ai]),ae.get(vn+4*er+Eo+ai)&&Qt.set(Pe[Ve-1-2*K-ai],Pe[Ve-1-2*K-ir]),ae.get(vn+6*er+Eo+ai)&&Qt.set(Pe[Ve-1-2*K-ir],Pe[2*K+ai]);vn+=8*er}if(i.drawModeMessage(Qt,m,Ye,Re),m)i.drawBullsEye(Qt,ar.truncDivision(Ye,2),5);else for(i.drawBullsEye(Qt,ar.truncDivision(Ye,2),7),K=0,ir=0;K<ar.truncDivision(Ve,2)-1;K+=15,ir+=16)for(ai=1&ar.truncDivision(Ye,2);ai<Ye;ai+=2)Qt.set(ar.truncDivision(Ye,2)-ir,ai),Qt.set(ar.truncDivision(Ye,2)+ir,ai),Qt.set(ai,ar.truncDivision(Ye,2)-ir),Qt.set(ai,ar.truncDivision(Ye,2)+ir);var Oo=new dp;return Oo.setCompact(m),Oo.setSize(Ye),Oo.setLayers(y),Oo.setCodeWords(ve),Oo.setMatrix(Qt),Oo},i.drawBullsEye=function(e,n,s){for(var c=0;c<s;c+=2)for(var l=n-c;l<=n+c;l++)e.set(l,n-c),e.set(l,n+c),e.set(n-c,l),e.set(n+c,l);e.set(n-s,n-s),e.set(n-s+1,n-s),e.set(n-s,n-s+1),e.set(n+s,n-s),e.set(n+s,n-s+1),e.set(n+s,n+s-1)},i.generateModeMessage=function(e,n,s){var c=new _i;return e?(c.appendBits(n-1,2),c.appendBits(s-1,6),c=i.generateCheckWords(c,28,4)):(c.appendBits(n-1,5),c.appendBits(s-1,11),c=i.generateCheckWords(c,40,4)),c},i.drawModeMessage=function(e,n,s,c){var l=ar.truncDivision(s,2);if(n)for(var g=0;g<7;g++){var m=l-3+g;c.get(g)&&e.set(m,l-5),c.get(g+7)&&e.set(l+5,m),c.get(20-g)&&e.set(m,l+5),c.get(27-g)&&e.set(l-5,m)}else for(g=0;g<10;g++)m=l-5+g+ar.truncDivision(g,5),c.get(g)&&e.set(m,l-7),c.get(g+10)&&e.set(l+7,m),c.get(29-g)&&e.set(m,l+7),c.get(39-g)&&e.set(l-7,m)},i.generateCheckWords=function(e,n,s){var c,l,g=e.getSize()/s,m=new gg(i.getGF(s)),y=ar.truncDivision(n,s),b=i.bitsToWords(e,s,y);m.encode(b,y-g);var P=n%s,B=new _i;B.appendBits(0,P);try{for(var z=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(b)),K=z.next();!K.done;K=z.next())B.appendBits(K.value,s)}catch(ve){c={error:ve}}finally{try{K&&!K.done&&(l=z.return)&&l.call(z)}finally{if(c)throw c.error}}return B},i.bitsToWords=function(e,n,s){var l,g,c=new Int32Array(s);for(l=0,g=e.getSize()/n;l<g;l++){for(var m=0,y=0;y<n;y++)m|=e.get(l*n+y)?1<<n-y-1:0;c[l]=m}return c},i.getGF=function(e){switch(e){case 4:return hi.AZTEC_PARAM;case 6:return hi.AZTEC_DATA_6;case 8:return hi.AZTEC_DATA_8;case 10:return hi.AZTEC_DATA_10;case 12:return hi.AZTEC_DATA_12;default:throw new yn("Unsupported word size "+e)}},i.stuffBits=function(e,n){for(var s=new _i,c=e.getSize(),l=(1<<n)-2,g=0;g<c;g+=n){for(var m=0,y=0;y<n;y++)(g+y>=c||e.get(g+y))&&(m|=1<<n-1-y);(m&l)===l?(s.appendBits(m&l,n),g--):m&l?s.appendBits(m,n):(s.appendBits(1|m,n),g--)}return s},i.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},i.DEFAULT_EC_PERCENT=33,i.DEFAULT_AZTEC_LAYERS=0,i.MAX_NB_BITS=32,i.MAX_NB_BITS_COMPACT=4,i.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),i}();!function(){function i(){}i.prototype.encode=function(e,n,s,c){return this.encodeWithHints(e,n,s,c,null)},i.prototype.encodeWithHints=function(e,n,s,c,l){var g=a1.ISO_8859_1,m=a_.DEFAULT_EC_PERCENT,y=a_.DEFAULT_AZTEC_LAYERS;return null!=l&&(l.has(Cr.CHARACTER_SET)&&(g=Zf.forName(l.get(Cr.CHARACTER_SET).toString())),l.has(Cr.ERROR_CORRECTION)&&(m=ar.parseInt(l.get(Cr.ERROR_CORRECTION).toString())),l.has(Cr.AZTEC_LAYERS)&&(y=ar.parseInt(l.get(Cr.AZTEC_LAYERS).toString()))),i.encodeLayers(e,n,s,c,g,m,y)},i.encodeLayers=function(e,n,s,c,l,g,m){if(n!==dn.AZTEC)throw new yn("Can only encode AZTEC, but got "+n);var y=a_.encode(mt.getBytes(e,l),g,m);return i.renderResult(y,s,c)},i.renderResult=function(e,n,s){var c=e.getMatrix();if(null==c)throw new Zo;for(var l=c.getWidth(),g=c.getHeight(),m=Math.max(n,l),y=Math.max(s,g),b=Math.min(m/l,y/g),P=(m-l*b)/2,B=(y-g*b)/2,z=new nr(m,y),K=0,ae=B;K<g;K++,ae+=b)for(var ve=0,Re=P;ve<l;ve++,Re+=b)c.get(ve,K)&&z.setRegion(Re,ae,b,b);return z}}();var u_=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),l_=function(i){function e(n){var s=i.call(this,n.width,n.height)||this;return s.canvas=n,s.tempCanvasElement=null,s.buffer=e.makeBufferFromCanvasImageData(n),s}return u_(e,i),e.makeBufferFromCanvasImageData=function(n){var s;try{s=n.getContext("2d",{willReadFrequently:!0})}catch{s=n.getContext("2d")}if(!s)throw new Error("Couldn't get canvas context.");var c=s.getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(c.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,s,c){for(var l=new Uint8ClampedArray(s*c),g=0,m=0,y=n.length;g<y;g+=4,m++){l[m]=0===n[g+3]?255:306*n[g]+601*n[g+1]+117*n[g+2]+512>>10}return l},e.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new yn("Requested row is outside the image: "+n);var c=this.getWidth(),l=n*c;return null===s?s=this.buffer.slice(l,l+c):(s.length<c&&(s=new Uint8ClampedArray(c)),s.set(this.buffer.slice(l,l+c))),s},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,s,c,l){return i.prototype.crop.call(this,n,s,c,l),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new xs(this)},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var s=this.getTempCanvasElement();if(!s)throw new Error("Could not create a Canvas element.");var c=n*e.DEGREE_TO_RADIANS,l=this.canvas.width,g=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*l+Math.abs(Math.sin(c))*g),y=Math.ceil(Math.abs(Math.sin(c))*l+Math.abs(Math.cos(c))*g);s.width=m,s.height=y;var b=s.getContext("2d");if(!b)throw new Error("Could not create a Canvas Context element.");return b.translate(m/2,y/2),b.rotate(c),b.drawImage(this.canvas,l/-2,g/-2),this.buffer=e.makeBufferFromCanvasImageData(s),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(En);function Og(){return typeof navigator<"u"}var uf=function(){return uf=Object.assign||function(i){for(var e,n=1,s=arguments.length;n<s;n++)for(var c in e=arguments[n])Object.prototype.hasOwnProperty.call(e,c)&&(i[c]=e[c]);return i},uf.apply(this,arguments)},yo=function(i,e,n,s){return new(n||(n=Promise))(function(l,g){function m(P){try{b(s.next(P))}catch(B){g(B)}}function y(P){try{b(s.throw(P))}catch(B){g(B)}}function b(P){P.done?l(P.value):function c(l){return l instanceof n?l:new n(function(g){g(l)})}(P.value).then(m,y)}b((s=s.apply(i,e||[])).next())})},Ai=function(i,e){var s,c,l,g,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return g={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function m(b){return function(P){return function y(b){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,c&&(l=2&b[0]?c.return:b[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,b[1])).done)return l;switch(c=0,l&&(b=[2&b[0],l.value]),b[0]){case 0:case 1:l=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,c=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===b[0]||2===b[0])){n=0;continue}if(3===b[0]&&(!l||b[1]>l[0]&&b[1]<l[3])){n.label=b[1];break}if(6===b[0]&&n.label<l[1]){n.label=l[1],l=b;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(b);break}l[2]&&n.ops.pop(),n.trys.pop();continue}b=e.call(i,n)}catch(P){b=[6,P],c=0}finally{s=l=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,P])}}},Pg=function(i){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&i[e],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d1={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Xs=function(){function i(e,n,s){void 0===n&&(n=new Map),void 0===s&&(s={}),this.reader=e,this.hints=n,this.options=uf(uf({},d1),s)}return Object.defineProperty(i.prototype,"possibleFormats",{set:function(e){this.hints.set(Vn.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),i.addVideoSource=function(e,n){try{e.srcObject=n}catch{console.error("got interrupted by new loading request")}},i.mediaStreamSetTorch=function(e,n){return yo(this,void 0,void 0,function(){return Ai(this,function(s){switch(s.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:n?"flash":"off",torch:!!n}]})];case 1:return s.sent(),[2]}})})},i.mediaStreamIsTorchCompatible=function(e){var n,s,c=e.getVideoTracks();try{for(var l=Pg(c),g=l.next();!g.done;g=l.next())if(i.mediaStreamIsTorchCompatibleTrack(g.value))return!0}catch(y){n={error:y}}finally{try{g&&!g.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}return!1},i.mediaStreamIsTorchCompatibleTrack=function(e){try{return"torch"in e.getCapabilities()}catch(s){return console.error(s),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},i.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},i.getMediaElement=function(e,n){var s=document.getElementById(e);if(!s)throw new qr("element with id '".concat(e,"' not found"));if(s.nodeName.toLowerCase()!==n.toLowerCase())throw new qr("element with id '".concat(e,"' must be an ").concat(n," element"));return s},i.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if("string"==typeof e)return i.getMediaElement(e,"video");if(!e&&typeof document<"u"){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},i.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if("string"==typeof e)return i.getMediaElement(e,"img");if(typeof e>"u"){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},i.prepareVideoElement=function(e){var n=i.createVideoElement(e);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},i.isImageLoaded=function(e){return!(!e.complete||0===e.naturalWidth)},i.createBinaryBitmapFromCanvas=function(e){var n=new l_(e),s=new Mi(n);return new vu(s)},i.drawImageOnCanvas=function(e,n){e.drawImage(n,0,0)},i.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},i.createCaptureCanvas=function(e){if(!e)throw new qr("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var n=document.createElement("canvas"),s=i.getMediaElementDimensions(e),c=s.width,l=s.height;return n.style.width=c+"px",n.style.height=l+"px",n.width=c,n.height=l,n},i.tryPlayVideo=function(e){return yo(this,void 0,void 0,function(){var n;return Ai(this,function(s){switch(s.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(i.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.play()];case 2:return s.sent(),[2,!0];case 3:return n=s.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}})})},i.createCanvasFromMediaElement=function(e){var n=i.createCaptureCanvas(e),s=n.getContext("2d");if(!s)throw new Error("Couldn't find Canvas 2D Context.");return i.drawImageOnCanvas(s,e),n},i.createBinaryBitmapFromMediaElem=function(e){var n=i.createCanvasFromMediaElement(e);return i.createBinaryBitmapFromCanvas(n)},i.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},i.listVideoInputDevices=function(){return yo(this,void 0,void 0,function(){var e,n,s,c,l,g,m,y,B,z;return Ai(this,function(K){switch(K.label){case 0:if(!Og())throw new Error("Can't enumerate devices, navigator is not present.");if(!function Q0(){return!(!function d_(){return Og()&&!!navigator.mediaDevices}()||!navigator.mediaDevices.enumerateDevices)}())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=K.sent(),n=[];try{for(s=Pg(e),c=s.next();!c.done;c=s.next())"videoinput"===(g="video"===(l=c.value).kind?"videoinput":l.kind)&&(m=l.deviceId||l.id,y=l.label||"Video device ".concat(n.length+1),n.push({deviceId:m,label:y,kind:g,groupId:l.groupId}))}catch(ae){B={error:ae}}finally{try{c&&!c.done&&(z=s.return)&&z.call(s)}finally{if(B)throw B.error}}return[2,n]}})})},i.findDeviceById=function(e){return yo(this,void 0,void 0,function(){var n;return Ai(this,function(s){switch(s.label){case 0:return[4,i.listVideoInputDevices()];case 1:return(n=s.sent())?[2,n.find(function(c){return c.deviceId===e})]:[2]}})})},i.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},i.releaseAllStreams=function(){0!==i.streamTracker.length&&i.streamTracker.forEach(function(e){e.getTracks().forEach(function(n){return n.stop()})}),i.streamTracker=[]},i.playVideoOnLoadAsync=function(e,n){return yo(this,void 0,void 0,function(){return Ai(this,function(c){switch(c.label){case 0:return[4,i.tryPlayVideo(e)];case 1:return c.sent()?[2,!0]:[2,new Promise(function(l,g){var m=setTimeout(function(){i.isVideoPlaying(e)||(g(!1),e.removeEventListener("canplay",y))},n),y=function(){i.tryPlayVideo(e).then(function(b){clearTimeout(m),e.removeEventListener("canplay",y),l(b)})};e.addEventListener("canplay",y)})]}})})},i.attachStreamToVideo=function(e,n,s){return void 0===s&&(s=5e3),yo(this,void 0,void 0,function(){var c;return Ai(this,function(l){switch(l.label){case 0:return c=i.prepareVideoElement(n),i.addVideoSource(c,e),[4,i.playVideoOnLoadAsync(c,s)];case 1:return l.sent(),[2,c]}})})},i._waitImageLoad=function(e){return new Promise(function(n,s){var l=setTimeout(function(){i.isImageLoaded(e)||(e.removeEventListener("load",g),s())},1e4),g=function(){clearTimeout(l),e.removeEventListener("load",g),n()};e.addEventListener("load",g)})},i.checkCallbackFnOrThrow=function(e){if(!e)throw new qr("`callbackFn` is a required parameter, you cannot capture results without it.")},i.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(n){return n.stop()}),e=void 0},i.prototype.decode=function(e){var n=i.createCanvasFromMediaElement(e);return this.decodeFromCanvas(n)},i.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},i.prototype.decodeFromCanvas=function(e){var n=i.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(n)},i.prototype.decodeFromImageElement=function(e){return yo(this,void 0,void 0,function(){var n;return Ai(this,function(s){switch(s.label){case 0:if(!e)throw new qr("An image element must be provided.");return n=i.prepareImageElement(e),[4,this._decodeOnLoadImage(n)];case 1:return[2,s.sent()]}})})},i.prototype.decodeFromImageUrl=function(e){return yo(this,void 0,void 0,function(){var n;return Ai(this,function(s){switch(s.label){case 0:if(!e)throw new qr("An URL must be provided.");(n=i.prepareImageElement()).src=e,s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,s.sent()];case 3:return i.destroyImageElement(n),[7];case 4:return[2]}})})},i.prototype.decodeFromConstraints=function(e,n,s){return yo(this,void 0,void 0,function(){var c,l;return Ai(this,function(g){switch(g.label){case 0:return i.checkCallbackFnOrThrow(s),[4,this.getUserMedia(e)];case 1:c=g.sent(),g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.decodeFromStream(c,n,s)];case 3:return[2,g.sent()];case 4:throw l=g.sent(),i.disposeMediaStream(c),l;case 5:return[2]}})})},i.prototype.decodeFromStream=function(e,n,s){return yo(this,void 0,void 0,function(){var l,m,y,b,B,z,K=this;return Ai(this,function(ae){switch(ae.label){case 0:return i.checkCallbackFnOrThrow(s),[4,i.attachStreamToVideo(e,n,this.options.tryPlayVideoTimeout)];case 1:return l=ae.sent(),m=this.scan(l,s,function(){i.disposeMediaStream(e),i.cleanVideoSource(l)}),y=e.getVideoTracks(),b=uf(uf({},m),{stop:function(){m.stop()},streamVideoConstraintsApply:function(ve,Re){return yo(this,void 0,void 0,function(){var Ve,Pe,Ye,Nt,Gt,Qt;return Ai(this,function(vn){switch(vn.label){case 0:Ve=Re?y.filter(Re):y,vn.label=1;case 1:vn.trys.push([1,6,7,8]),Pe=Pg(Ve),Ye=Pe.next(),vn.label=2;case 2:return Ye.done?[3,5]:[4,Ye.value.applyConstraints(ve)];case 3:vn.sent(),vn.label=4;case 4:return Ye=Pe.next(),[3,2];case 5:return[3,8];case 6:return Nt=vn.sent(),Gt={error:Nt},[3,8];case 7:try{Ye&&!Ye.done&&(Qt=Pe.return)&&Qt.call(Pe)}finally{if(Gt)throw Gt.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(ve){return y.find(ve).getConstraints()},streamVideoSettingsGet:function(ve){return y.find(ve).getSettings()},streamVideoCapabilitiesGet:function(ve){return y.find(ve).getCapabilities()}}),i.mediaStreamIsTorchCompatible(e)&&(B=y?.find(function(ve){return i.mediaStreamIsTorchCompatibleTrack(ve)}),b.switchTorch=z=function(ve){return yo(K,void 0,void 0,function(){return Ai(this,function(Re){switch(Re.label){case 0:return[4,i.mediaStreamSetTorch(B,ve)];case 1:return Re.sent(),[2]}})})},b.stop=function(){return yo(K,void 0,void 0,function(){return Ai(this,function(ve){switch(ve.label){case 0:return m.stop(),[4,z(!1)];case 1:return ve.sent(),[2]}})})}),[2,b]}})})},i.prototype.decodeFromVideoDevice=function(e,n,s){return yo(this,void 0,void 0,function(){return Ai(this,function(g){switch(g.label){case 0:return i.checkCallbackFnOrThrow(s),[4,this.decodeFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n,s)];case 1:return[2,g.sent()]}})})},i.prototype.decodeFromVideoElement=function(e,n){return yo(this,void 0,void 0,function(){var s;return Ai(this,function(l){switch(l.label){case 0:if(i.checkCallbackFnOrThrow(n),!e)throw new qr("A video element must be provided.");return s=i.prepareVideoElement(e),[4,i.playVideoOnLoadAsync(s,this.options.tryPlayVideoTimeout)];case 1:return l.sent(),[2,this.scan(s,n)]}})})},i.prototype.decodeFromVideoUrl=function(e,n){return yo(this,void 0,void 0,function(){var s,c;return Ai(this,function(m){switch(m.label){case 0:if(i.checkCallbackFnOrThrow(n),!e)throw new qr("An URL must be provided.");return(s=i.prepareVideoElement()).src=e,c=function(){i.cleanVideoSource(s)},[4,i.playVideoOnLoadAsync(s,this.options.tryPlayVideoTimeout)];case 1:return m.sent(),[2,this.scan(s,n,c)]}})})},i.prototype.decodeOnceFromConstraints=function(e,n){return yo(this,void 0,void 0,function(){var s;return Ai(this,function(c){switch(c.label){case 0:return[4,this.getUserMedia(e)];case 1:return s=c.sent(),[4,this.decodeOnceFromStream(s,n)];case 2:return[2,c.sent()]}})})},i.prototype.decodeOnceFromStream=function(e,n){return yo(this,void 0,void 0,function(){var s,c;return Ai(this,function(g){switch(g.label){case 0:return s=!!n,[4,i.attachStreamToVideo(e,n)];case 1:c=g.sent(),g.label=2;case 2:return g.trys.push([2,,4,5]),[4,this.scanOneResult(c)];case 3:return[2,g.sent()];case 4:return s||i.cleanVideoSource(c),[7];case 5:return[2]}})})},i.prototype.decodeOnceFromVideoDevice=function(e,n){return yo(this,void 0,void 0,function(){return Ai(this,function(l){switch(l.label){case 0:return[4,this.decodeOnceFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n)];case 1:return[2,l.sent()]}})})},i.prototype.decodeOnceFromVideoElement=function(e){return yo(this,void 0,void 0,function(){var n;return Ai(this,function(c){switch(c.label){case 0:if(!e)throw new qr("A video element must be provided.");return n=i.prepareVideoElement(e),[4,i.playVideoOnLoadAsync(n,this.options.tryPlayVideoTimeout)];case 1:return c.sent(),[4,this.scanOneResult(n)];case 2:return[2,c.sent()]}})})},i.prototype.decodeOnceFromVideoUrl=function(e){return yo(this,void 0,void 0,function(){var n,s;return Ai(this,function(c){switch(c.label){case 0:if(!e)throw new qr("An URL must be provided.");(n=i.prepareVideoElement()).src=e,s=this.decodeOnceFromVideoElement(n),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,s];case 2:return[2,c.sent()];case 3:return i.cleanVideoSource(n),[7];case 4:return[2]}})})},i.prototype.scanOneResult=function(e,n,s,c){var l=this;return void 0===n&&(n=!0),void 0===s&&(s=!0),void 0===c&&(c=!0),new Promise(function(g,m){l.scan(e,function(y,b,P){if(y)return g(y),void P.stop();if(b){if(b instanceof Ke&&n||b instanceof mi&&s||b instanceof Jt&&c)return;P.stop(),m(b)}})})},i.prototype.scan=function(e,n,s){var c=this;i.checkCallbackFnOrThrow(n);var g,l=i.createCaptureCanvas(e);try{g=l.getContext("2d",{willReadFrequently:!0})}catch{g=l.getContext("2d")}if(!g)throw new Error("Couldn't create canvas for visual element scan.");var b,m=function(){g=void 0,l=void 0},y=!1,B={stop:function(){y=!0,clearTimeout(b),m(),s&&s()}},z=function(){if(!y)try{i.drawImageOnCanvas(g,e);var K=c.decodeFromCanvas(l);n(K,void 0,B),b=setTimeout(z,c.options.delayBetweenScanSuccess)}catch(Ve){if(n(void 0,Ve,B),Ve instanceof mi||Ve instanceof Jt||Ve instanceof Ke)return void(b=setTimeout(z,c.options.delayBetweenScanAttempts));m(),s&&s(Ve)}};return z(),B},i.prototype._decodeOnLoadImage=function(e){return yo(this,void 0,void 0,function(){return Ai(this,function(s){switch(s.label){case 0:return i.isImageLoaded(e)?[3,2]:[4,i._waitImageLoad(e)];case 1:s.sent(),s.label=2;case 2:return[2,this.decode(e)]}})})},i.prototype.getUserMedia=function(e){return yo(this,void 0,void 0,function(){var n;return Ai(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=s.sent(),i.streamTracker.push(n),[2,n]}})})},i.streamTracker=[],i}(),mp=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),dE=(function(i){mp(function e(n,s){return i.call(this,new ke,n,s)||this},i)}(Xs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),fE=(function(i){dE(function e(n,s){return i.call(this,new eo(n),n,s)||this},i)}(Xs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),Y0=(function(i){fE(function e(n,s){return i.call(this,new Vf,n,s)||this},i)}(Xs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),f_=function(i){function e(n,s){var c=this,l=new Gm;return l.setHints(n),(c=i.call(this,l,n,s)||this).reader=l,c}return Y0(e,i),Object.defineProperty(e.prototype,"possibleFormats",{set:function(n){this.hints.set(Vn.POSSIBLE_FORMATS,n),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e.prototype.setHints=function(n){this.hints=n,this.reader.setHints(this.hints)},e}(Xs),f1=function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),h1=(function(i){f1(function e(n,s){return i.call(this,new Xf,n,s)||this},i)}(Xs),function(){var i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),Pc=(function(i){h1(function e(n,s){return i.call(this,new zd,n,s)||this},i)}(Xs),"http://www.w3.org/2000/svg"),fh=(function(){function i(e){if("string"==typeof e){var n=document.getElementById(e);if(!n)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=n}else this.containerElement=e}i.prototype.write=function(e,n,s,c){if(0===e.length)throw new yn("Found empty contents");if(n<0||s<0)throw new yn("Requested dimensions are too small: "+n+"x"+s);var l=c&&void 0!==c.get(Cr.MARGIN)?Number.parseInt(c.get(Cr.MARGIN).toString(),10):i.QUIET_ZONE_SIZE,g=this.encode(c,e);return this.renderResult(g,n,s,l)},i.prototype.createSVGElement=function(e,n){var s=document.createElementNS(i.SVG_NS,"svg");return s.setAttributeNS(Pc,"width",n.toString()),s.setAttributeNS(Pc,"height",e.toString()),s},i.prototype.createSvgPathPlaceholderElement=function(e,n){var s=document.createElementNS(i.SVG_NS,"path");return s.setAttributeNS(Pc,"d","M0 0h".concat(e,"v").concat(n,"H0z")),s.setAttributeNS(Pc,"fill","none"),s},i.prototype.createSvgRectElement=function(e,n,s,c){var l=document.createElementNS(i.SVG_NS,"rect");return l.setAttributeNS(Pc,"x",e.toString()),l.setAttributeNS(Pc,"y",n.toString()),l.setAttributeNS(Pc,"height",s.toString()),l.setAttributeNS(Pc,"width",c.toString()),l.setAttributeNS(Pc,"fill","#000000"),l},i.prototype.encode=function(e,n){var s=iu.L;if(e&&void 0!==e.get(Cr.ERROR_CORRECTION)){var c=e.get(Cr.ERROR_CORRECTION).toString();s=iu.fromString(c)}return Qf.encode(n,s,e)},i.prototype.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new Zo;var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),ve=this.createSVGElement(P,B),Re=this.createSvgPathPlaceholderElement(n,s);ve.appendChild(Re),this.containerElement.appendChild(ve);for(var Ve=0,Pe=ae;Ve<m;Ve++,Pe+=z)for(var Ye=0,st=K;Ye<g;Ye++,st+=z)if(1===l.get(Ye,Ve)){var Nt=this.createSvgRectElement(st,Pe,z,z);ve.appendChild(Nt)}return ve},i.QUIET_ZONE_SIZE=4,i.SVG_NS="http://www.w3.org/2000/svg"}(),"http://www.w3.org/2000/svg"),Ng=(function(){function i(){}i.prototype.write=function(e,n,s,c){if(0===e.length)throw new yn("Found empty contents");if(n<0||s<0)throw new yn("Requested dimensions are too small: "+n+"x"+s);var l=iu.L,g=i.QUIET_ZONE_SIZE;if(c){if(void 0!==c.get(Cr.ERROR_CORRECTION)){var m=c.get(Cr.ERROR_CORRECTION).toString();l=iu.fromString(m)}void 0!==c.get(Cr.MARGIN)&&(g=Number.parseInt(c.get(Cr.MARGIN).toString(),10))}var y=Qf.encode(e,l,c);return this.renderResult(y,n,s,g)},i.prototype.writeToDom=function(e,n,s,c,l){if("string"==typeof e){var g=document.querySelector(e);if(!g)throw new Error("Could no find the target HTML element.");e=g}var m=this.write(n,s,c,l);e instanceof HTMLElement&&e.appendChild(m)},i.prototype.renderResult=function(e,n,s,c){var l=e.getMatrix();if(null===l)throw new Zo;for(var g=l.getWidth(),m=l.getHeight(),y=g+2*c,b=m+2*c,P=Math.max(n,y),B=Math.max(s,b),z=Math.min(Math.floor(P/y),Math.floor(B/b)),K=Math.floor((P-g*z)/2),ae=Math.floor((B-m*z)/2),ve=this.createSVGElement(P,B),Re=0,Ve=ae;Re<m;Re++,Ve+=z)for(var Pe=0,Ye=K;Pe<g;Pe++,Ye+=z)if(1===l.get(Pe,Re)){var st=this.createSvgRectElement(Ye,Ve,z,z);ve.appendChild(st)}return ve},i.prototype.createSVGElement=function(e,n){var s=document.createElementNS(fh,"svg"),c=e.toString(),l=n.toString();return s.setAttribute("height",l),s.setAttribute("width",c),s.setAttribute("viewBox","0 0 "+c+" "+l),s},i.prototype.createSvgRectElement=function(e,n,s,c){var l=document.createElementNS(fh,"rect");return l.setAttribute("x",e.toString()),l.setAttribute("y",n.toString()),l.setAttribute("height",s.toString()),l.setAttribute("width",c.toString()),l.setAttribute("fill","#000000"),l},i.QUIET_ZONE_SIZE=4}(),ie(4412));const _p=["preview"];class hh extends f_{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(e,n){var s=this;return(0,Ee.A)(function*(){const c=new Ng.t({});let l;try{l=yield s.decodeFromVideoDevice(e,n,(g,m)=>{if(!m)return void c.next({result:g});const y=m.name;y===Ke.name||y===mi.name||y===Jt.name||m.message.includes("No MultiFormat Readers were able to detect the code.")?c.next({error:m}):(c.error(m),s.scannerControls.stop(),s.scannerControls=void 0)}),s.scannerControls={...l,stop(){l.stop(),c.complete()}}}catch(g){c.error(g),s.scannerControls?.stop(),s.scannerControls=void 0}return c.asObservable()})()}}let g1=(()=>{class i{get codeReader(){return this._codeReader}set device(n){this._ready?this.isAutostarting?console.warn("Avoid setting a device during auto-start."):this.isCurrentDevice(n)?console.warn("Setting the same device is not allowed."):this.hasPermission?this.setDevice(n):console.warn("Permissions not set yet, waiting for them to be set to apply device change."):this._devicePreStart=n}get device(){return this._device}get formats(){return this.hints.get(Vn.POSSIBLE_FORMATS)}set formats(n){if("string"==typeof n)throw new Error("Invalid formats, make sure the [formats] input is a binding.");const s=n.map(l=>this.getBarcodeFormatOrFail(l)),c=this.hints;c.set(Vn.POSSIBLE_FORMATS,s),this.hints=c}get hints(){return this._hints}set hints(n){this._hints=n,this.codeReader?.setHints(this._hints)}set videoConstraints(n){const s=this.codeReader?.getScannerControls();s&&s?.streamVideoConstraintsApply(n)}set isAutostarting(n){this._isAutostarting=n,this.autostarting.next(n)}get isAutostarting(){return this._isAutostarting}set torch(n){try{this.getCodeReader().getScannerControls().switchTorch(n)}catch{}}set enable(n){this._enabled!==!!n&&(this._enabled=!!n,this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():(this.reset(),hh.releaseAllStreams()))}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(Vn.TRY_HARDER)}set tryHarder(n){const s=this.hints;n?s.set(Vn.TRY_HARDER,!0):s.delete(Vn.TRY_HARDER),this.hints=s}constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this.poster="",this._ready=!1,this.autostarted=new V.bkB,this.autostarting=new V.bkB,this.torchCompatible=new V.bkB(!1),this.scanSuccess=new V.bkB,this.scanFailure=new V.bkB,this.scanError=new V.bkB,this.scanComplete=new V.bkB,this.camerasFound=new V.bkB,this.camerasNotFound=new V.bkB,this.permissionResponse=new V.bkB(!0),this.hasDevices=new V.bkB,this.deviceChange=new V.bkB,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[dn.QR_CODE],this.hasNavigator=typeof navigator<"u",this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}askForPermission(){var n=this;return(0,Ee.A)(function*(){if(!n.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),n.setPermission(null),n.hasPermission;if(!n.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),n.setPermission(null),n.hasPermission;let s,c;try{s=yield n.getAnyVideoDevice(),c=!!s}catch(l){return n.handlePermissionException(l)}finally{n.terminateStream(s)}return n.setPermission(c),c})()}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(n){n&&n.getTracks().forEach(s=>s.stop()),n=void 0}init(){var n=this;return(0,Ee.A)(function*(){if(!n.autostart)return console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),n.initAutostartOff(),void(n._ready=!0);yield n.initAutostartOn(),n._ready=!0})()}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){var n=this;return(0,Ee.A)(function*(){let s;n.isAutostarting=!0;try{s=yield n.askForPermission()}catch(c){return void console.error("Exception occurred while asking for permission:",c)}if(s){const c=yield n.updateVideoInputDevices();yield n.autostartScanner([...c])}n.isAutostarting=!1,n.autostarted.next()})()}isCurrentDevice(n){return n?.deviceId===this._device?.deviceId}ngOnDestroy(){this.reset(),Xs.cleanVideoSource(this.previewElemRef.nativeElement),hh.releaseAllStreams()}ngOnInit(){this.init()}scanStop(){this._scanSubscription&&(this.codeReader?.getScannerControls().stop(),this._scanSubscription?.unsubscribe(),this._scanSubscription=void 0),this.torchCompatible.next(!1)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan process running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;const n=this._reset();n&&(this.device=n)}updateVideoInputDevices(){var n=this;return(0,Ee.A)(function*(){const s=(yield Xs.listVideoInputDevices())||[],c=s&&s.length>0;return n.hasDevices.next(c),n.camerasFound.next([...s]),c||n.camerasNotFound.next(null),s})()}autostartScanner(n){var s=this;return(0,Ee.A)(function*(){const l=n.find(({label:g})=>/back|tr\xe1s|rear|traseira|environment|ambiente/gi.test(g))||n.pop();if(!l)throw new Error("Impossible to autostart, no input devices available.");yield s.setDevice(l),s.deviceChange.next(l)})()}dispatchScanSuccess(n){this.scanSuccess.next(n.getText())}dispatchScanFailure(n){this.scanFailure.next(n)}dispatchScanError(n){this.scanError.observed||(console.error(`zxing scanner component: ${n.name}`,n),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(n)}dispatchScanComplete(n){this.scanComplete.next(n)}handlePermissionException(n){let s;switch(console.error("@zxing/ngx-scanner","Error when asking for permission.",n),n.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",n.message),s=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",n.message),s=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",n.message),s=null,this.hasDevices.next(!1),this.camerasNotFound.next(n);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),s=null,this.hasDevices.next(!1),this.camerasNotFound.next(n);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",n),s=null}return this.setPermission(s),this.permissionResponse.error(n),s}getBarcodeFormatOrFail(n){return"string"==typeof n?dn[n.trim().toUpperCase()]:n}getCodeReader(){return this._codeReader||(this._codeReader=new hh(this.hints,{delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess})),this._codeReader}scanFromDevice(n){var s=this;return(0,Ee.A)(function*(){const c=s.previewElemRef.nativeElement,l=s.getCodeReader(),g=yield l.scanFromDeviceObservable(n,c);if(!g)throw new Error("Undefined decoding stream, aborting.");if(s._scanSubscription=g.subscribe(z=>s._onDecodeResult(z.result,z.error),z=>s._onDecodeError(z),()=>{}),s._scanSubscription.closed)return;const B=typeof l.getScannerControls().switchTorch<"u";s.torchCompatible.next(B)})()}_onDecodeError(n){this.dispatchScanError(n)}_onDecodeResult(n,s){n?this.dispatchScanSuccess(n):this.dispatchScanFailure(s),this.dispatchScanComplete(n)}_reset(){if(!this._codeReader)return;this.scanStop();try{Xs.cleanVideoSource(this.previewElemRef.nativeElement)}catch{}try{Xs.releaseAllStreams()}catch{}this._codeReader=void 0;const n=this._device;return this.device=void 0,n}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(n){var s=this;return(0,Ee.A)(function*(){s.scanStop(),s._device=n||void 0,s._device||Xs.cleanVideoSource(s.previewElemRef.nativeElement),s._enabled&&n&&(yield s.scanFromDevice(n.deviceId))})()}setPermission(n){this.hasPermission=n,this.permissionResponse.next(n)}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275cmp=V.VBU({type:i,selectors:[["zxing-scanner"]],viewQuery:function(s,c){if(1&s&&V.GBs(_p,7),2&s){let l;V.mGM(l=V.lsd())&&(c.previewElemRef=l.first)}},inputs:{autofocusEnabled:"autofocusEnabled",timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",autostart:"autostart",previewFitMode:"previewFitMode",poster:"poster",device:"device",formats:"formats",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},decls:6,vars:3,consts:[["preview",""],[3,"poster"]],template:function(s,c){1&s&&(V.j41(0,"video",1,0)(2,"p"),V.EFF(3," Your browser does not support this feature, please try to upgrade it. "),V.k0s(),V.j41(4,"p"),V.EFF(5," Seu navegador n\xe3o suporta este recurso, por favor tente atualiz\xe1-lo. "),V.k0s()()),2&s&&(V.xc7("object-fit",c.previewFitMode),V.Y8G("poster",c.poster,V.B4B))},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}"],changeDetection:0})}return i})(),h_=(()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275mod=V.$C({type:i});static#n=this.\u0275inj=V.G2t({imports:[$t.MD,be.YN]})}return i})(),yd=(()=>{class i{constructor(){this.qrDataSubject=new Ng.t(null),this.qrData$=this.qrDataSubject.asObservable()}setQRData(n){this.qrDataSubject.next(n)}static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275prov=V.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ph(i,e){if(1&i){const n=V.RV6();V.nrm(0,"app-badge",8),V.j41(1,"app-button",9),V.bIt("clickEvent",function(){V.eBV(n);const c=V.XpG(2);return V.Njj(c.cancel())}),V.k0s()}2&i&&(V.R7$(),V.Y8G("severity","neutral")("variant","link")("icon","xmark")("direction","none")("type","button"))}function m1(i,e){1&i&&V.nrm(0,"app-badge",10)}function p_(i,e){if(1&i&&(V.DNE(0,m1,1,0,"app-badge",10),V.j41(1,"span",3),V.nrm(2,"div",11)(3,"div",12),V.k0s()),2&i){const n=V.XpG(2);V.vxM(n.isMobile?0:-1)}}function g_(i,e){1&i&&V.nrm(0,"app-badge",14)}function _1(i,e){1&i&&V.nrm(0,"app-badge",15)}function m_(i,e){if(1&i){const n=V.RV6();V.j41(0,"span",3)(1,"zxing-scanner",13),V.mxI("deviceChange",function(c){V.eBV(n);const l=V.XpG(2);return V.DH7(l.currentDevice,c)||(l.currentDevice=c),V.Njj(c)}),V.bIt("scanSuccess",function(c){V.eBV(n);const l=V.XpG(2);return V.Njj(l.onCodeResult(c))})("permissionResponse",function(c){V.eBV(n);const l=V.XpG(2);return V.Njj(l.onHasPermission(c))})("camerasFound",function(c){V.eBV(n);const l=V.XpG(2);return V.Njj(l.onCamerasFound(c))})("torchCompatible",function(c){V.eBV(n);const l=V.XpG(2);return V.Njj(l.onTorchCompatible(c))}),V.k0s(),V.nrm(2,"div",11)(3,"div",12),V.k0s(),V.DNE(4,g_,1,0,"app-badge",14)(5,_1,1,0,"app-badge",15)}if(2&i){const n=V.XpG(2);V.R7$(),V.Y8G("torch",n.torchEnabled),V.R50("device",n.currentDevice),V.Y8G("formats",n.formatsEnabled)("tryHarder",n.tryHarder),V.R7$(3),V.vxM(n.qrResultString?4:5)}}function __(i,e){1&i&&V.nrm(0,"app-label",4),2&i&&V.Y8G("label","Enfoca")("icon","info-circle")}function Z0(i,e){if(1&i&&(V.j41(0,"section",0)(1,"div",1),V.nrm(2,"app-label",2),V.DNE(3,ph,2,5),V.k0s(),V.DNE(4,p_,4,1,"span",3)(5,m_,6,5)(6,__,1,2,"app-label",4),V.j41(7,"footer",5),V.nrm(8,"app-button",6)(9,"app-button",7),V.k0s()()),2&i){const n=V.XpG();V.R7$(2),V.Y8G("size",n.isMobile?"md":"lg")("prefix","Autoregistro")("label","Scan QR")("subtitle",n.isMobile?"Scanea el QR para obtener su contenido y autocompletar el formulario.":""),V.R7$(),V.vxM(n.isMobile?-1:3),V.R7$(),V.vxM(n.noPermissions?4:-1),V.R7$(),V.vxM(n.noPermissions?-1:5),V.R7$(),V.vxM(n.isMobile?6:-1),V.R7$(2),V.Y8G("variant","outline")("direction","row")("icon","close")("label","Cancelar"),V.R7$(),V.Y8G("variant","fill")("direction","row")("icon","pencil")("label","Registro manual")}}let vp=(()=>{class i{constructor(n,s){this.router=n,this.QrService=s,this.currentDevice=null,this.formatsEnabled=[dn.CODE_128,dn.DATA_MATRIX,dn.EAN_13,dn.QR_CODE],this.noPermissions=!1,this.torchEnabled=!1,this.torchAvailable$=new Ng.t(!1),this.tryHarder=!1,this.qrRegistro=!0}onResize(n){this.checkIfMobile(n.target.innerWidth)}ngOnInit(){this.checkCameraPermissions()}checkCameraPermissions(){navigator.mediaDevices.getUserMedia({video:!0}).then(()=>{this.noPermissions=!1}).catch(()=>{this.noPermissions=!0})}onCodeResult(n){this.qrResultString=n,this.QrService.setQRData(this.qrResultString),this.router.navigate(["/registrar"])}onHasPermission(n){this.hasPermission=n}onCamerasFound(n){this.availableDevices=n,this.hasDevices=!(!n||!n.length)}onTorchCompatible(n){this.torchAvailable$.next(n||!1)}checkIfMobile(n){this.isMobile=n<768}cancel(){this.qrRegistro=!this.qrRegistro}static#e=this.\u0275fac=function(s){return new(s||i)(V.rXU(R.Ix),V.rXU(yd))};static#t=this.\u0275cmp=V.VBU({type:i,selectors:[["app-scan"]],hostBindings:function(s,c){1&s&&V.bIt("resize",function(g){return c.onResize(g)},!1,V.tSv)},standalone:!0,features:[V.aNF],decls:1,vars:1,consts:[[1,"panel__main--center"],[1,"form__input-wrapper--row"],["severity","neutral","direction","column",3,"size","prefix","label","subtitle"],[1,"qr__wrapper"],["size","sm","subtitle","Si el c\xf3digo no es detectado, vuelve a intentarlo.","severity","warning","variant","link","direction","column",3,"label","icon"],[1,"panel__footer"],["size","xxs","severity","danger",3,"variant","direction","icon","label"],["size","xxs","severity","primary",3,"variant","direction","icon","label"],["severity","danger","label","C\xe1mara","size","xs"],["size","xs",3,"clickEvent","severity","variant","icon","direction","type"],["severity","danger","label","C\xe1mara no habilitada","size","xs"],[1,"qr__overlay"],[1,"qr__line"],[3,"deviceChange","scanSuccess","permissionResponse","camerasFound","torchCompatible","torch","device","formats","tryHarder"],["severity","success","label","Scaneo exitoso","size","xs"],["severity","warning","label","No se pudo leer el c\xf3digo","size","xs"]],template:function(s,c){1&s&&V.DNE(0,Z0,10,16,"section",0),2&s&&V.vxM(c.qrRegistro?0:-1)},dependencies:[be.X1,h_,g1,ze.U,At.n,Ut.Q],styles:[".panel__main--center[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;flex:1;padding:var(--card__padding) var(--card__padding) 24px var(--card__padding);box-sizing:border-box;row-gap:var(--wrapper__gap--row);background-color:#fff;border:solid 1px var(--neutral);border-radius:var(--card__border--radius);--qr__border: solid 1px var(--secondary);--qr__background: white;--qr__line-color: var(--secondary);--qr__glow-color: var(--secondaryLighter);--qr__animation-duration: 2.5s;--qr__line-height: 4px}.panel__main--center[_ngcontent-%COMP%]   .qr__wrapper[_ngcontent-%COMP%]{position:relative;width:100%;max-width:220px;height:160px;max-height:220px;background-color:var(--qr__background);overflow:hidden;outline:var(--qr__border);outline-offset:8px}.panel__main--center[_ngcontent-%COMP%]   .qr__wrapper[_ngcontent-%COMP%]   .qr__line[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:var(--qr__line-height);background-color:var(--qr__line-color);animation:_ngcontent-%COMP%_qr-scan var(--qr__animation-duration) infinite ease-in-out;box-shadow:0 0 10px var(--qr__glow-color),0 0 20px var(--qr__glow-color)}.panel__main--center[_ngcontent-%COMP%]   .qr__wrapper[_ngcontent-%COMP%]   .qr__overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:0;background-color:var(--qr__line-color);mix-blend-mode:multiply;animation:_ngcontent-%COMP%_qr-overlay-grow var(--qr__animation-duration) infinite ease-in-out}@keyframes _ngcontent-%COMP%_qr-scan{0%{top:0}to{top:100%}0%{top:0}}@keyframes _ngcontent-%COMP%_qr-overlay-grow{0%{height:0}to{height:100%}0%{height:0}}"]})}return i})();var v_=ie(5699),yp=ie(6418);function y_(i,e){1&i&&V.nrm(0,"app-badge",2)}function kg(i,e){1&i&&V.nrm(0,"app-badge",3)}function E_(i,e){1&i&&(V.j41(0,"small",28),V.EFF(1," T\xedtulo es obligatorio "),V.k0s())}function gh(i,e){if(1&i&&(V.j41(0,"div",5),V.nrm(1,"app-required",6)(2,"textarea",29),V.k0s()),2&i){const n=V.XpG();V.R7$(),V.Y8G("label","Descripci\xf3n")("control","descripcion"),V.R7$(),V.HbH(n.qrRegister?"disabled":"")}}function J0(i,e){if(1&i){const n=V.RV6();V.j41(0,"div",5),V.nrm(1,"app-required",6),V.j41(2,"textarea",30),V.EFF(3),V.k0s(),V.j41(4,"button",31),V.bIt("click",function(){V.eBV(n);const c=V.XpG();return V.Njj(c.clearResult())}),V.EFF(5,"\xd7"),V.k0s()()}if(2&i){const n=V.XpG();V.R7$(),V.Y8G("label","Registro obtenido del QR")("control","paciente"),V.R7$(2),V.SpI("          ",n.qrResultString,"\n        ")}}function w_(i,e){if(1&i&&(V.j41(0,"option",11),V.EFF(1),V.k0s()),2&i){const n=e.$implicit;V.Y8G("value",n),V.R7$(),V.SpI(" ",n," ")}}function v1(i,e){1&i&&(V.j41(0,"small",28),V.EFF(1," La categor\xeda es obligatoria "),V.k0s())}function lf(i,e){1&i&&V.nrm(0,"app-label",32)(1,"hr"),2&i&&V.Y8G("size","sm")}function ev(i,e){if(1&i){const n=V.RV6();V.j41(0,"figure"),V.nrm(1,"img",33),V.j41(2,"figcaption"),V.EFF(3),V.k0s(),V.j41(4,"app-button",34),V.bIt("clickEvent",function(){const c=V.eBV(n).index,l=V.XpG();return V.Njj(l.removeFile(c))}),V.k0s()()}if(2&i){const n=e.$implicit;V.R7$(),V.Y8G("src",n,V.B4B),V.R7$(2),V.JRh(n),V.R7$(),V.Y8G("severity","danger")("variant","outline")("icon","trash-can")("direction","none")("label","")("type","button")}}function y1(i,e){1&i&&V.nrm(0,"app-scan")}function df(i,e){1&i&&(V.j41(0,"small",28),V.EFF(1," Debe seleccionar una fecha "),V.k0s())}function Fg(i,e){1&i&&(V.j41(0,"small",28),V.EFF(1," Debe seleccionar un horario "),V.k0s())}function tv(i,e){1&i&&(V.j41(0,"div",5),V.nrm(1,"app-required",6)(2,"input",35),V.k0s()),2&i&&(V.R7$(),V.Y8G("label","Miembro equipo de Salud")("control","validador"))}function E1(i,e){if(1&i&&V.nrm(0,"app-button",24),2&i){const n=V.XpG();V.Y8G("severity","warning")("variant","outline")("icon","arrows-rotate")("direction",n.isMobile?"none":"row")("label",n.isMobile?"":"Reset")("type","reset")}}function Lg(i,e){if(1&i){const n=V.RV6();V.j41(0,"app-button",36),V.bIt("clickEvent",function(){V.eBV(n);const c=V.XpG();return V.Njj(c.showQrRegister())}),V.k0s()}if(2&i){const n=V.XpG();V.Y8G("type","button")("severity","primary")("variant","link")("icon","mobile-screen-button")("direction",n.isMobile?"none":"row")("label",n.isMobile?"":"Registro QR")}}let C_=(()=>{class i{checkIfMobile(n){this.isMobile=n<768}constructor(n,s,c,l,g,m,y){this.QrService=n,this.storage=s,this.firestore=c,this._activatedRoute=l,this.router=g,this.location=m,this.notificationService=y,this.isMobile=!1,this.qrResultString=null,this.subscription=new pn.yU,this.validado=!0,this.registroId=null,this.hasChange=!1,this.uploadedImages=[],this.uploadedFileNames=[],this.showConfirmMsg=!1,this.showErrorMsg=!1,this.hide=!0,this.categorias=["Medicina General","Pediatr\xeda","Ginecolog\xeda y Obstetricia","Cardiolog\xeda","Dermatolog\xeda","Neurolog\xeda","Psiquiatr\xeda","Endocrinolog\xeda","Gastroenterolog\xeda","Traumatolog\xeda y Ortopedia","Oftalmolog\xeda","Otorrinolaringolog\xeda","Urolog\xeda","Neumolog\xeda","Oncolog\xeda","Nutrici\xf3n y Diet\xe9tica","Fisiatr\xeda y Rehabilitaci\xf3n","Odontolog\xeda"],this.categoriaMap={"Medicina General":{icon:"user-md",color:"#007bff"},Pediatr\u00eda:{icon:"child",color:"#28a745"},"Ginecolog\xeda y Obstetricia":{icon:"venus",color:"#e83e8c"},Cardiolog\u00eda:{icon:"heart",color:"#dc3545"},Dermatolog\u00eda:{icon:"spa",color:"#fd7e14"},Neurolog\u00eda:{icon:"brain",color:"#6f42c1"},Psiquiatr\u00eda:{icon:"comments",color:"#20c997"},Endocrinolog\u00eda:{icon:"balance-scale",color:"#ffc107"},Gastroenterolog\u00eda:{icon:"stethoscope",color:"#795548"},"Traumatolog\xeda y Ortopedia":{icon:"crutch",color:"#6c757d"},Oftalmolog\u00eda:{icon:"eye",color:"#17a2b8"},Otorrinolaringolog\u00eda:{icon:"head-side-cough",color:"#6610f2"},Urolog\u00eda:{icon:"toilet",color:"#007bff"},Neumolog\u00eda:{icon:"lungs",color:"#87ceeb"},Oncolog\u00eda:{icon:"ribbon",color:"#6f42c1"},"Nutrici\xf3n y Diet\xe9tica":{icon:"utensils",color:"#a2d729"},"Fisiatr\xeda y Rehabilitaci\xf3n":{icon:"dumbbell",color:"#fd7e14"},Odontolog\u00eda:{icon:"tooth",color:"#ffffff"}},this.editableTitle="",this.editableCategory="",this.editableIcon="heart",this.editableColor="",this.categoriaOptions=Object.keys(this.categoriaMap).map(b=>({value:b,label:b.replace(/([A-Z])/g," $1").trim()})),this._formBuilder=(0,V.WQX)(be.ok).nonNullable,this._router=(0,V.WQX)(R.Ix),this._registrosService=(0,V.WQX)(Oe.m),this.auth=(0,V.WQX)(vt.Nj),this.form=this._formBuilder.group({paciente:this._formBuilder.control(""),titulo:this._formBuilder.control("",be.k0.required),descripcion:this._formBuilder.control("",be.k0.required),categoria:this._formBuilder.control("",be.k0.required),estado:this._formBuilder.control(""),validado:this._formBuilder.control(null),lugar:this._formBuilder.control("",be.k0.required),validador:this._formBuilder.control(""),fecha:this._formBuilder.control(new Date,be.k0.required),hora:this._formBuilder.control("",be.k0.required),adjuntos:this._formBuilder.control([])})}triggerSuccess(){this.notificationService.addNotification("Registro creado con \xe9xito!","success")}triggerError(){this.notificationService.addNotification("Error al generar el registro","error")}ngOnInit(){this.checkIfMobile(window.innerWidth),this.registroId=this._activatedRoute.snapshot.paramMap.get("id"),this.registroId&&this.loadRegistroData(this.registroId),this.setTitle(),this.onCategoryChange(),this.subscription=this.QrService.qrData$.subscribe(m=>{this.qrResultString=m,this.setPacienteValue(m??"")});const n=new Date,s=n.toISOString().split("T")[0];this.form.controls.fecha.setValue(s);const c=n.getHours().toString().padStart(2,"0"),l=n.getMinutes().toString().padStart(2,"0");this.form.controls.hora.setValue(`${c}:${l}`)}ngOnDestroy(){this.subscription.unsubscribe(),this.form.get("adjuntos")?.value.forEach(n=>URL.revokeObjectURL(n))}onTitleChange(){return this.hasChange=!0}setTitle(){return this.form.controls.titulo.value}validateRecord(){this.validado=!this.validado,this.form.controls.validado.setValue(this.validado)}onCategoryChange(){const n=this.form.controls.categoria.value;if(n){const{icon:s,color:c}=this.categoriaMap[n];this.editableIcon=s,this.editableColor=c,this.editableCategory=n}this.hasChange=!0}clearResult(){this.qrResultString=""}getPacienteControl(){return this.form.get("paciente")}getPacienteValue(){return this.getPacienteControl()?.value}setPacienteValue(n){this.getPacienteControl()?.setValue(n)}onCodeResult(n){this.qrResultString=n,this.setPacienteValue(n)}loadRegistroData(n){var s=this;return(0,Ee.A)(function*(){try{const c=yield s._registrosService.getRegistro(n);c&&s.form.patchValue({paciente:c.paciente,titulo:c.titulo,descripcion:c.descripcion,categoria:c.categoria,estado:c.estado,validado:c.validado,lugar:c.lugar,validador:c.validador,fecha:c.fecha,hora:c.hora,adjuntos:c.adjuntos||[]})}catch(c){console.error("Error loading registro:",c)}})()}createRegistro(){var n=this;return(0,Ee.A)(function*(){const s=yield n.auth.currentUser;if(!n.form.invalid)try{const c=n.form.value;c.adjuntos=c.adjuntos.filter(l=>n.isValidUrl(l)),s&&(c.userId=s.uid),n.registroId?yield n._registrosService.updateRegistro(n.registroId,c):yield n._registrosService.createRegistro(c),n._router.navigate(["/"]),n.triggerSuccess()}catch{n.triggerError()}})()}isValidUrl(n){try{return new URL(n),!0}catch{return!1}}setFormValues(n){var s=this;return(0,Ee.A)(function*(){try{const c=yield s._registrosService.getRegistro(n);if(!c)return;s.form.setValue({paciente:c.paciente||"",titulo:c.titulo||"",descripcion:c.descripcion||"",categoria:c.categoria||"",estado:c.estado||"",validado:c.validado??!1,lugar:c.lugar||"",validador:c.validador||"",fecha:c.fecha||new Date,hora:c.hora||"",adjuntos:c.adjuntos||[]})}catch{}})()}showQrRegister(){this.qrRegister=!this.qrRegister}goBack(){window.history.length>1?this.location.back():this.router.navigate(["/"])}cancel(){this.form&&this.form.reset(),this.goBack()}uploadFiles(n){var s=this;const c=n.target.files;c.length&&Array.from(c).forEach(l=>{const g=`images/${Date.now()}_${l.name}`,m=Ao(this.storage,g),y=Y(m,l);var b;this.uploadedFileNames.push(l.name),y.on("state_changed",{next:b=>{},error:b=>console.error("Upload error:",b),complete:(b=(0,Ee.A)(function*(){try{const P=yield Yi(m);s.uploadedImages.push(P),s.form.get("adjuntos")?.setValue([...s.uploadedImages]),n.target.value=""}catch(P){console.error("Error getting download URL:",P)}}),function(){return b.apply(this,arguments)})})})}saveImageMetadata(n,s){var c=this;return(0,Ee.A)(function*(){const l=(0,H.rJ)(c.firestore,"images");yield(0,H.gS)(l,{url:n,name:s,uploadedAt:new Date})})()}removeFile(n){const s=this.form.get("adjuntos")?.value||[];s.splice(n,1),this.form.get("adjuntos")?.setValue(s)}trackByFn(n,s){return s}get adjuntosControl(){return this.form.get("adjuntos")}static#e=this.\u0275fac=function(s){return new(s||i)(V.rXU(yd),V.rXU(Ls),V.rXU(H._7),V.rXU(R.nX),V.rXU(R.Ix),V.rXU($t.aZ),V.rXU(yp.J))};static#t=this.\u0275cmp=V.VBU({type:i,selectors:[["app-crear-registro"]],standalone:!0,features:[V.aNF],decls:50,vars:46,consts:[[1,"panel__main",3,"ngSubmit","formGroup"],["subtitle","Completa los campos requeridos (*)","direction","row",3,"size","label","prefix","severity"],["severity","warning","label","Campos requeridos sin completar","size","md"],["severity","success","label","Campos requeridos completos","size","md"],[1,"panel__inner--main"],[1,"form__input-wrapper--col"],[3,"label","control"],["type","text","formControlName","titulo",3,"keyup"],["class","required",4,"ngIf"],["id","categoria","formControlName","categoria",1,"form__select--custom",3,"change"],["value","","disabled","","selected",""],[3,"value"],["for","adjuntos"],["type","file","id","adjuntos","formControlName","adjuntos","multiple","",3,"change"],[1,"img__wrapper--grid"],[4,"ngFor","ngForOf"],[1,"panel__inner--aside"],["type","date","formControlName","fecha"],["type","time","formControlName","hora"],["type","text","formControlName","lugar"],["size","md","offLabel","No validado por equipo de Salud","labelPosition","right",3,"toggle","on","onLabel"],[1,"panel__footer"],[1,"panel__footer--left"],["size","xs",3,"clickEvent","severity","variant","icon","direction","label","type"],["size","xs",3,"severity","variant","icon","direction","label","type"],[1,"panel__footer--right"],["size","xs",3,"type","severity","variant","icon","direction","label"],["type","submit","size","xs",3,"severity","variant","label","direction","icon","disabled","path"],[1,"required"],["rows","5","type","text","id","descripcion","placeholder","Describa su registro de Salud","formControlName","descripcion"],["id","paciente","formControlName","paciente"],[3,"click"],["prefix","Adjuntos","label","Mis archivos","direction","row",3,"size"],["alt","Uploaded Image",3,"src"],["size","xxs",3,"clickEvent","severity","variant","icon","direction","label","type"],["type","text","formControlName","validador"],["size","xs",3,"clickEvent","type","severity","variant","icon","direction","label"]],template:function(s,c){1&s&&(V.j41(0,"form",0),V.bIt("ngSubmit",function(){return c.createRegistro()}),V.j41(1,"header"),V.nrm(2,"app-label",1),V.DNE(3,y_,1,0,"app-badge",2)(4,kg,1,0,"app-badge",3),V.k0s(),V.j41(5,"section",4)(6,"div",5),V.nrm(7,"app-required",6),V.j41(8,"input",7),V.bIt("keyup",function(){return c.onTitleChange()}),V.k0s(),V.DNE(9,E_,2,0,"small",8),V.k0s(),V.DNE(10,gh,3,4,"div",5)(11,J0,6,3,"div",5),V.j41(12,"div",5),V.nrm(13,"app-required",6),V.j41(14,"select",9),V.bIt("change",function(){return c.onCategoryChange()}),V.j41(15,"option",10),V.EFF(16,"Seleccionar categor\xeda"),V.k0s(),V.Z7z(17,w_,2,2,"option",11,V.fX1),V.k0s(),V.DNE(19,v1,2,0,"small",8),V.k0s(),V.j41(20,"div",5)(21,"label",12),V.EFF(22,"Adjuntar archivos"),V.k0s(),V.j41(23,"input",13),V.bIt("change",function(g){return c.uploadFiles(g)}),V.k0s()(),V.j41(24,"div"),V.DNE(25,lf,2,1),V.j41(26,"div",14),V.DNE(27,ev,5,8,"figure",15),V.k0s()()(),V.j41(28,"section",16),V.DNE(29,y1,1,0,"app-scan"),V.j41(30,"div",5),V.nrm(31,"app-required",6)(32,"input",17),V.DNE(33,df,2,0,"small",8),V.k0s(),V.j41(34,"div",5),V.nrm(35,"app-required",6)(36,"input",18),V.DNE(37,Fg,2,0,"small",8),V.k0s(),V.j41(38,"div",5),V.nrm(39,"app-required",6)(40,"input",19),V.k0s(),V.j41(41,"app-switcher",20),V.bIt("toggle",function(){return c.validateRecord()}),V.k0s(),V.DNE(42,tv,3,2,"div",5),V.k0s(),V.j41(43,"footer",21)(44,"div",22)(45,"app-button",23),V.bIt("clickEvent",function(){return c.cancel()}),V.k0s(),V.DNE(46,E1,1,6,"app-button",24),V.k0s(),V.j41(47,"div",25),V.DNE(48,Lg,1,6,"app-button",26),V.nrm(49,"app-button",27),V.k0s()()()),2&s&&(V.Y8G("formGroup",c.form),V.R7$(),V.HbH(c.isMobile?"panel__header--col":"panel__header--row"),V.R7$(),V.Y8G("size",c.isMobile?"md":"lg")("label",c.registroId?c.setTitle():"Nuevo registro de Salud")("prefix","Autoregistro")("severity","info"),V.R7$(),V.vxM(c.form.invalid?3:c.form.invalid?-1:4),V.R7$(4),V.Y8G("label","T\xedtulo")("control","titulo"),V.R7$(2),V.Y8G("ngIf",(null==c.form.controls.titulo?null:c.form.controls.titulo.invalid)&&(null==c.form.controls.titulo?null:c.form.controls.titulo.touched)),V.R7$(),V.vxM(c.qrResultString?-1:10),V.R7$(),V.vxM(c.qrResultString?11:-1),V.R7$(2),V.Y8G("label","Categor\xeda")("control","categoria"),V.R7$(4),V.Dyx(c.categorias),V.R7$(2),V.Y8G("ngIf",(null==c.form.controls.categoria?null:c.form.controls.categoria.invalid)&&(null==c.form.controls.categoria?null:c.form.controls.categoria.touched)),V.R7$(6),V.vxM(c.uploadedImages.length>0?25:-1),V.R7$(2),V.Y8G("ngForOf",c.uploadedFileNames),V.R7$(2),V.vxM(c.qrRegister?29:-1),V.R7$(2),V.Y8G("label","Fecha")("control","fecha"),V.R7$(2),V.Y8G("ngIf",(null==c.form.controls.fecha?null:c.form.controls.fecha.invalid)&&(null==c.form.controls.fecha?null:c.form.controls.fecha.touched)),V.R7$(2),V.Y8G("label","Hora")("control","hora"),V.R7$(2),V.Y8G("ngIf",(null==c.form.controls.hora?null:c.form.controls.hora.invalid)&&(null==c.form.controls.hora?null:c.form.controls.hora.touched)),V.R7$(2),V.Y8G("label","Establecimiento")("control","lugar"),V.R7$(2),V.Y8G("on",c.validado)("onLabel","Validado por equipo de Salud"),V.R7$(),V.vxM(c.validado?42:-1),V.R7$(3),V.Y8G("severity","danger")("variant","outline")("icon","xmark")("direction",c.isMobile?"none":"row")("label",c.isMobile?"":"Cancelar")("type","button"),V.R7$(),V.vxM(c.registroId?-1:46),V.R7$(2),V.vxM(c.registroId?-1:48),V.R7$(),V.Y8G("severity","success")("variant","fill")("label",c.isMobile?"":"Guardar")("direction",c.isMobile?"none":"row")("icon","floppy-disk")("disabled",c.form.invalid)("path","item/"+c.registroId))},dependencies:[be.X1,be.qT,be.xH,be.y7,be.me,be.wz,be.BC,be.cb,be.j4,be.JD,ze.U,At.n,Ut.Q,cr,vp,v_.d,$t.MD,$t.Sq,$t.bT]})}return i})();var I_=ie(4908),w1=ie(5023),C1=ie(7587);function Ep(i,e){if(1&i){const n=V.RV6();V.j41(0,"figure",24),V.bIt("click",function(){const c=V.eBV(n).$implicit,l=V.XpG(3);return V.Njj(l.openModal(c))}),V.nrm(1,"img",25),V.j41(2,"figcaption"),V.EFF(3),V.k0s()()}if(2&i){const n=e.$implicit;V.R7$(),V.Y8G("src",n,V.B4B),V.R7$(2),V.JRh(n)}}function nv(i,e){if(1&i){const n=V.RV6();V.j41(0,"app-modal",26),V.bIt("closeModal",function(){V.eBV(n);const c=V.XpG(3);return V.Njj(c.isModalOpen=!1)}),V.j41(1,"app-button",27),V.bIt("click",function(){V.eBV(n);const c=V.XpG(3);return V.Njj(c.isModalOpen=!1)}),V.k0s(),V.nrm(2,"app-button",28),V.k0s()}if(2&i){const n=V.XpG(3);V.Y8G("prefix","Previsualizar")("title",n.selectedFile)("subtitle","Modal Subtitle")("img",n.selectedFile)("closeable",!0)}}function I1(i,e){if(1&i&&(V.nrm(0,"app-label",20)(1,"hr"),V.j41(2,"section",21),V.DNE(3,Ep,4,2,"figure",22),V.k0s(),V.DNE(4,nv,3,5,"app-modal",23)),2&i){const n=V.XpG(2);V.Y8G("size",n.isMobile?"sm":"md"),V.R7$(3),V.Y8G("ngForOf",n.registro.adjuntos)("ngForTrackBy",n.trackByFn),V.R7$(),V.vxM(n.isModalOpen?4:-1)}}function A1(i,e){1&i&&V.nrm(0,"hr")}function rv(i,e){if(1&i&&V.nrm(0,"img",10),2&i){const n=V.XpG(2);V.Y8G("src",n.qrCodeUrl,V.B4B)}}function b1(i,e){if(1&i&&V.nrm(0,"app-label",12),2&i){const n=V.XpG(2);V.Y8G("label",n.registro.lugar)("prefix","Establecimiento de Salud")("direction","row")}}function iv(i,e){if(1&i&&V.nrm(0,"app-label",12),2&i){const n=V.XpG(2);V.Y8G("label",n.registro.validador)("prefix","Miembro equipo de Salud")("direction","row")}}function T1(i,e){if(1&i){const n=V.RV6();V.j41(0,"app-modal",29),V.bIt("closeModal",function(){V.eBV(n);const c=V.XpG(2);return V.Njj(c.modalDelete=!1)}),V.j41(1,"app-button",27),V.bIt("click",function(){V.eBV(n);const c=V.XpG(2);return V.Njj(c.modalDelete=!1)}),V.k0s(),V.j41(2,"app-button",30),V.bIt("click",function(){V.eBV(n);const c=V.XpG(2);return V.Njj(c.onConfirm())}),V.k0s()()}if(2&i){const n=V.XpG(2);V.Y8G("prefix",n.registro.categoria)("title",n.registro.titulo)("subtitle","Esta acci\xf3n es irreversible")("closeable",!0)}}function x1(i,e){if(1&i){const n=V.RV6();V.j41(0,"section",0)(1,"header",1)(2,"app-label",2),V.nrm(3,"app-badge",3)(4,"app-dropdown",4),V.k0s()(),V.j41(5,"div",5)(6,"article",6),V.EFF(7),V.k0s(),V.DNE(8,I1,5,4),V.k0s(),V.DNE(9,A1,1,0,"hr"),V.j41(10,"div",7)(11,"article",8)(12,"figure",9),V.DNE(13,rv,1,1,"img",10),V.nrm(14,"app-label",11),V.k0s(),V.nrm(15,"app-label",12),V.DNE(16,b1,1,3,"app-label",12),V.nrm(17,"app-switcher",13),V.DNE(18,iv,1,3,"app-label",12),V.k0s()(),V.j41(19,"footer",14)(20,"div",15)(21,"app-button",16),V.bIt("clickEvent",function(){V.eBV(n);const c=V.XpG();return V.Njj(c.goBack())}),V.k0s()(),V.j41(22,"div",17),V.nrm(23,"app-button",18),V.k0s()(),V.DNE(24,T1,3,4,"app-modal",19),V.k0s()}if(2&i){const n=V.XpG();V.R7$(2),V.Y8G("size",n.isMobile?"md":"lg")("label",n.registro.titulo)("prefix",n.registro.categoria)("icon",n.getIconForCategoria(n.registro.categoria))("severity","custom")("color",n.getColorForCategoria(n.registro.categoria)),V.R7$(),V.FS9("label",n.registro.validado?"validado":"auto-registro"),V.Y8G("severity",n.registro.validado?"success":"info"),V.R7$(),V.Y8G("items",n.getMenuItems(n.registro))("position",n.dropdownPosition),V.R7$(3),V.Lme(" ",n.registro.descripcion," ",n.registro.paciente," "),V.R7$(),V.vxM(n.registro.adjuntos.length>0?8:-1),V.R7$(),V.vxM(n.isMobile?9:-1),V.R7$(4),V.vxM(n.qrCodeUrl?13:-1),V.R7$(),V.Y8G("size","sm")("prefix","Para escanear el c\xf3digo, accede a tu cuenta experienciaPaciente.org.")("direction","row")("severity","neutral")("icon",n.isMobile?"":"info-circle"),V.R7$(),V.Y8G("label",n.registro.fecha)("prefix","Fecha del registro")("direction","row"),V.R7$(),V.vxM(n.registro.lugar?16:-1),V.R7$(),V.Y8G("on",n.registro.validado)("disabled",!0),V.R7$(),V.vxM(n.registro.validador?18:-1),V.R7$(3),V.Y8G("severity","primary")("variant","link")("icon","arrow-left")("direction","row")("label","volver")("disabled",!1),V.R7$(2),V.Y8G("severity","warning")("variant","fill")("icon","pencil")("direction","row")("label","Editar")("path","actualizar/"+n.id)("disabled",!1),V.R7$(),V.vxM(n.modalDelete?24:-1)}}function S1(i,e){1&i&&(V.j41(0,"p"),V.EFF(1,"Sin registros!"),V.k0s())}let D1=(()=>{class i{getMenuItems(n){return[{label:"Editar",icon:"user",disabled:!1,callback:()=>this.navigateToEdit(n)},{label:"Gestionar permisos",icon:"star",disabled:!0},{label:"Eliminar",icon:"trash",disabled:!1,callback:s=>{this.openDeleteModal(s)}}]}constructor(n,s,c,l,g){this.route=n,this.registroService=s,this.router=c,this.location=l,this.notificationService=g,this.disabled=!1,this.isModalOpen=!1,this.modalDelete=!1,this.selectedItemId=null,this.categoriaMap={"Medicina General":{icon:"user-md",color:"#007bff"},Pediatr\u00eda:{icon:"child",color:"#28a745"},"Ginecolog\xeda y Obstetricia":{icon:"venus",color:"#e83e8c"},Cardiolog\u00eda:{icon:"heart",color:"#dc3545"},Dermatolog\u00eda:{icon:"spa",color:"#fd7e14"},Neurolog\u00eda:{icon:"brain",color:"#6f42c1"},Psiquiatr\u00eda:{icon:"comments",color:"#20c997"},Endocrinolog\u00eda:{icon:"balance-scale",color:"#ffc107"},Gastroenterolog\u00eda:{icon:"stethoscope",color:"#795548"},"Traumatolog\xeda y Ortopedia":{icon:"crutch",color:"#6c757d"},Oftalmolog\u00eda:{icon:"eye",color:"#17a2b8"},Otorrinolaringolog\u00eda:{icon:"head-side-cough",color:"#6610f2"},Urolog\u00eda:{icon:"toilet",color:"#007bff"},Neumolog\u00eda:{icon:"lungs",color:"#87ceeb"},Oncolog\u00eda:{icon:"ribbon",color:"#6f42c1"},"Nutrici\xf3n y Diet\xe9tica":{icon:"utensils",color:"#a2d729"},"Fisiatr\xeda y Rehabilitaci\xf3n":{icon:"dumbbell",color:"#fd7e14"},Odontolog\u00eda:{icon:"tooth",color:"#5fc8db"}},this.dropdownPosition={top:"35px",left:"-190px"}}triggerSuccess(){this.notificationService.addNotification("Registro eliminado con \xe9xito!","danger")}triggerError(){this.notificationService.addNotification("Error al generar el registro","warning")}ngOnInit(){this.route.params.subscribe(n=>{this.id=n.id,this.id?(this.fetchDetails(this.id),console.log(`ID: ${this.id}`)):console.error("ID not found in route parameters")}),this.checkIfMobile(window.innerWidth)}onResize(n){this.checkIfMobile(n.target.innerWidth)}checkIfMobile(n){this.isMobile=n<768}generateQRCode(n){if(n){const c=encodeURIComponent(`T\xedtulo: ${n.titulo}\nDescripci\xf3n: ${n.descripcion}\nFecha: ${n.fecha}\nHora: ${n.hora}\nCategoria: ${n.categoria}\nValidado: ${n.validado}\nEstado: ${n.estado}\nEmisor: ${n.validador}\nAdjuntos: ${n.adjuntos}`);this.qrCodeUrl=`https://quickchart.io/qr?text=${c}`}}fetchDetails(n){var s=this;return(0,Ee.A)(function*(){if(n)try{yield s.loadRegistro(n),s.registro&&s.generateQRCode(s.registro)}catch(c){console.error("Error loading registro:",c),s.registro=null}else s.registro=null})()}loadRegistro(n){var s=this;return(0,Ee.A)(function*(){try{const c=yield s.registroService.getRegistro(n);s.registro=c||null,s.generateQRCode(c)}catch(c){s.registro=null,console.error("Error fetching registro:",c)}})()}getIconForCategoria(n){return this.categoriaMap[n]?.icon||"question-circle"}getColorForCategoria(n){return this.categoriaMap[n]?.color||"gray"}trackByFn(n){return n.id}goBack(){window.history.length>1?this.location.back():this.router.navigate(["/"])}navigateToEdit(n){this.router.navigate([`/actualizar/${n.id}`])}navigateToDelete(n){var s=this;return(0,Ee.A)(function*(){try{yield s.registroService.deleteRegistro(n.id),s.router.navigate(["/"])}catch(c){console.error("Error deleting registro",c)}})()}openDeleteModal(n){n?.stopPropagation(),this.modalDelete=!0}openModal(n){this.selectedFile=n,this.isModalOpen=!this.isModalOpen}onConfirm(){var n=this;return(0,Ee.A)(function*(){const s=n.id;if(s)try{n.modalDelete=!1,yield n.registroService.deleteRegistro(s),n.router.navigate(["/"]),n.triggerSuccess()}catch{n.triggerError()}})()}static#e=this.\u0275fac=function(s){return new(s||i)(V.rXU(R.nX),V.rXU(Oe.m),V.rXU(R.Ix),V.rXU($t.aZ),V.rXU(yp.J))};static#t=this.\u0275cmp=V.VBU({type:i,selectors:[["app-detail"]],hostBindings:function(s,c){1&s&&V.bIt("resize",function(g){return c.onResize(g)},!1,V.tSv)},standalone:!0,features:[V.aNF],decls:2,vars:1,consts:[[1,"panel__main"],[1,"panel__header--row"],["direction","row",3,"size","label","prefix","icon","severity","color"],["size","xs",3,"severity","label"],["buttonLabel","","buttonIcon","ellipsis-vertical",3,"items","position"],[1,"panel__inner--main"],[1,"panel__text--article"],[1,"panel__inner--aside"],[1,"panel__inner--left"],[1,"panel__qr--wrapper"],["alt","QR Code","alt","",1,"panel__qr--aside",3,"src"],[3,"size","prefix","direction","severity","icon"],["size","md",3,"label","prefix","direction"],["size","lg","onLabel","Validado","offLabel","No validado","colorOn","green","colorOff","red","labelPosition","right",3,"on","disabled"],[1,"panel__footer"],[1,"panel__footer--left"],["size","xs",3,"clickEvent","severity","variant","icon","direction","label","disabled"],[1,"panel__footer--right"],["size","xs",3,"severity","variant","icon","direction","label","path","disabled"],["icon","info-circle",3,"prefix","title","subtitle","closeable"],["prefix","Adjuntos","label","Mis archivos","direction","row",3,"size"],["role","navigation",1,"img__wrapper--grid"],[3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["icon","info-circle",3,"prefix","title","subtitle","img","closeable"],[3,"click"],["alt","Uploaded Image",3,"src"],["icon","info-circle",3,"closeModal","prefix","title","subtitle","img","closeable"],["direction","none","size","sm","label","Eliminar","variant","outline","severity","danger",3,"click"],["direction","none","size","sm","label","Editar","variant","fill","severity","success"],["icon","info-circle",3,"closeModal","prefix","title","subtitle","closeable"],["direction","none","size","sm","label","Editar","variant","fill","severity","success",3,"click"]],template:function(s,c){1&s&&V.DNE(0,x1,25,41,"section",0)(1,S1,2,0,"p"),2&s&&V.vxM(null!=c.registro?0:1)},dependencies:[At.n,Ut.Q,ze.U,cr,w1.P,C1.z,$t.MD,$t.Sq]})}return i})();var A_=ie(903);const gE=[{path:"",canActivate:[()=>{const i=ye();return Ct().pipe((0,nt.T)(e=>!!e||(i.navigateByUrl("auth/sign-in"),!1)))}],loadComponent:()=>ie.e(556).then(ie.bind(ie,6556)),children:[{path:"item/:id",component:D1},{path:"registrar",component:C_},{path:"scan",component:vp},{path:"registros",component:I_.s},{path:"actualizar/:id",component:C_}]},{path:"registrarse",component:A_.default},{path:"**",loadComponent:()=>ie.e(553).then(ie.bind(ie,6553)).then(i=>i.default)},{path:"auth",canActivate:[()=>{const i=ye();return Ct().pipe((0,nt.T)(e=>!e||(i.navigateByUrl("/"),!1)))}],children:[{path:"sign-in",loadComponent:()=>ie.e(553).then(ie.bind(ie,6553)).then(i=>i.default)},{path:"sign-up",loadComponent:()=>Promise.resolve().then(ie.bind(ie,903)).then(i=>i.default)}]}],b__firebaseConfig={apiKey:"AIzaSyBpsJfN6s6cNBJhbOeI-uZMu_-3gM7Z8zc",authDomain:"experienciapaciente-2024.firebaseapp.com",databaseURL:"https://experienciapaciente-2024-default-rtdb.firebaseio.com",projectId:"experienciapaciente-2024",storageBucket:"experienciapaciente-2024.appspot.com",messagingSenderId:"893869065647",appId:"1:893869065647:web:346d367ab8f1e3556f9b5a"},_E=[(0,wt.MW)(()=>(0,wt.Wp)(b__firebaseConfig)),(0,H.hV)(()=>(0,H.aU)()),(0,vt._q)(()=>(0,vt.xI)()),function Sr(i,...e){return(0,dt.KO)("angularfire",Ot.xv.full,"gcs"),(0,V.EmA)([Wr,jc,{provide:Vs,useFactory:Uc(i),multi:!0,deps:[V.SKi,V.zZn,Ot.u0,wt.gL,[new V.Xx1,vt.DF],[new V.Xx1,Ot.Jv],...e]}])}(()=>Bo())],vE={providers:[(0,R.lh)(gE,(0,R.qQ)(),(0,R.lG)()),_E,h_]};var yE=ie(7533);function EE(i,e){if(1&i&&(V.j41(0,"app-card",1),V.nrm(1,"app-label",2),V.k0s()),2&i){const n=e.$implicit,s=V.XpG();V.Y8G("variant","fab")("severity","danger"===n.severity?"danger":"success")("closable",s.hide)("selectable",s.showErrorMsg),V.R7$(),V.FS9("label",n.message),V.FS9("severity",n.severity),V.Y8G("subtitle",s.showErrorMsg?"Vuelva a intentar luego":"Ser\xe1 redirigido al login")("icon","danger"===n.severity?"circle-exclamation":"circle-check")}}let wE=(()=>{class i{constructor(n){this.notificationService=n,this.showConfirmMsg=!1,this.showErrorMsg=!1,this.hide=!0,this.notifications=[],this.notificationService.notifications$.subscribe(s=>{this.notifications=s})}dismissNotification(n){this.notificationService.removeNotification(n)}static#e=this.\u0275fac=function(s){return new(s||i)(V.rXU(yp.J))};static#t=this.\u0275cmp=V.VBU({type:i,selectors:[["app-message"]],standalone:!0,features:[V.aNF],decls:1,vars:1,consts:[["size","lg","direction","row","bottom","20px","left","50vw",3,"variant","severity","closable","selectable",4,"ngFor","ngForOf"],["size","lg","direction","row","bottom","20px","left","50vw",3,"variant","severity","closable","selectable"],["size","xxs","variant","outline","direction","row",3,"label","subtitle","icon","severity"]],template:function(s,c){1&s&&V.DNE(0,EE,2,8,"app-card",0),2&s&&V.Y8G("ngForOf",c.notifications)},dependencies:[yE.i,ze.U,$t.MD,$t.Sq]})}return i})();(0,D.B8)((()=>{class i{static#e=this.\u0275fac=function(s){return new(s||i)};static#t=this.\u0275cmp=V.VBU({type:i,selectors:[["app-root"]],standalone:!0,features:[V.aNF],decls:2,vars:0,template:function(s,c){1&s&&V.nrm(0,"router-outlet")(1,"app-message")},dependencies:[R.n3,wE]})}return i})(),vE).catch(i=>console.error(i))},4412:(Cn,It,ie)=>{ie.d(It,{t:()=>R});var D=ie(1413);class R extends D.B{constructor(We){super(),this._value=We}get value(){return this.getValue()}_subscribe(We){const nt=super._subscribe(We);return!nt.closed&&We.next(this._value),nt}getValue(){const{hasError:We,thrownError:nt,_value:ye}=this;if(We)throw nt;return this._throwIfClosed(),ye}next(We){super.next(this._value=We)}}},1985:(Cn,It,ie)=>{ie.d(It,{c:()=>Xe});var D=ie(7707),R=ie(8359),V=ie(3494),We=ie(1203),nt=ie(1026),ye=ie(8071),Ct=ie(9786);let Xe=(()=>{class Oe{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const At=new Oe;return At.source=this,At.operator=ze,At}subscribe(ze,At,Ut){const pn=function be(Oe){return Oe&&Oe instanceof D.vU||function Ee(Oe){return Oe&&(0,ye.T)(Oe.next)&&(0,ye.T)(Oe.error)&&(0,ye.T)(Oe.complete)}(Oe)&&(0,R.Uv)(Oe)}(ze)?ze:new D.Ms(ze,At,Ut);return(0,Ct.Y)(()=>{const{operator:$t,source:Xn}=this;pn.add($t?$t.call(pn,Xn):Xn?this._subscribe(pn):this._trySubscribe(pn))}),pn}_trySubscribe(ze){try{return this._subscribe(ze)}catch(At){ze.error(At)}}forEach(ze,At){return new(At=ct(At))((Ut,pn)=>{const $t=new D.Ms({next:Xn=>{try{ze(Xn)}catch(cr){pn(cr),$t.unsubscribe()}},error:pn,complete:Ut});this.subscribe($t)})}_subscribe(ze){var At;return null===(At=this.source)||void 0===At?void 0:At.subscribe(ze)}[V.s](){return this}pipe(...ze){return(0,We.m)(ze)(this)}toPromise(ze){return new(ze=ct(ze))((At,Ut)=>{let pn;this.subscribe($t=>pn=$t,$t=>Ut($t),()=>At(pn))})}}return Oe.create=vt=>new Oe(vt),Oe})();function ct(Oe){var vt;return null!==(vt=Oe??nt.$.Promise)&&void 0!==vt?vt:Promise}},1413:(Cn,It,ie)=>{ie.d(It,{B:()=>Ct});var D=ie(1985),R=ie(8359);const We=(0,ie(1853).L)(ct=>function(){ct(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=ie(7908),ye=ie(9786);let Ct=(()=>{class ct extends D.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(be){const Oe=new Xe(this,this);return Oe.operator=be,Oe}_throwIfClosed(){if(this.closed)throw new We}next(be){(0,ye.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Oe of this.currentObservers)Oe.next(be)}})}error(be){(0,ye.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=be;const{observers:Oe}=this;for(;Oe.length;)Oe.shift().error(be)}})}complete(){(0,ye.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:be}=this;for(;be.length;)be.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var be;return(null===(be=this.observers)||void 0===be?void 0:be.length)>0}_trySubscribe(be){return this._throwIfClosed(),super._trySubscribe(be)}_subscribe(be){return this._throwIfClosed(),this._checkFinalizedStatuses(be),this._innerSubscribe(be)}_innerSubscribe(be){const{hasError:Oe,isStopped:vt,observers:ze}=this;return Oe||vt?R.Kn:(this.currentObservers=null,ze.push(be),new R.yU(()=>{this.currentObservers=null,(0,nt.o)(ze,be)}))}_checkFinalizedStatuses(be){const{hasError:Oe,thrownError:vt,isStopped:ze}=this;Oe?be.error(vt):ze&&be.complete()}asObservable(){const be=new D.c;return be.source=this,be}}return ct.create=(Ee,be)=>new Xe(Ee,be),ct})();class Xe extends Ct{constructor(Ee,be){super(),this.destination=Ee,this.source=be}next(Ee){var be,Oe;null===(Oe=null===(be=this.destination)||void 0===be?void 0:be.next)||void 0===Oe||Oe.call(be,Ee)}error(Ee){var be,Oe;null===(Oe=null===(be=this.destination)||void 0===be?void 0:be.error)||void 0===Oe||Oe.call(be,Ee)}complete(){var Ee,be;null===(be=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.complete)||void 0===be||be.call(Ee)}_subscribe(Ee){var be,Oe;return null!==(Oe=null===(be=this.source)||void 0===be?void 0:be.subscribe(Ee))&&void 0!==Oe?Oe:R.Kn}}},7707:(Cn,It,ie)=>{ie.d(It,{Ms:()=>Ut,vU:()=>Oe});var D=ie(8071),R=ie(8359),V=ie(1026),We=ie(5334),nt=ie(5343);const ye=ct("C",void 0,void 0);function ct(Ot,wt,dt){return{kind:Ot,value:wt,error:dt}}var Ee=ie(9270),be=ie(9786);class Oe extends R.yU{constructor(wt){super(),this.isStopped=!1,wt?(this.destination=wt,(0,R.Uv)(wt)&&wt.add(this)):this.destination=cr}static create(wt,dt,kt){return new Ut(wt,dt,kt)}next(wt){this.isStopped?Xn(function Xe(Ot){return ct("N",Ot,void 0)}(wt),this):this._next(wt)}error(wt){this.isStopped?Xn(function Ct(Ot){return ct("E",void 0,Ot)}(wt),this):(this.isStopped=!0,this._error(wt))}complete(){this.isStopped?Xn(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(wt){this.destination.next(wt)}_error(wt){try{this.destination.error(wt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const vt=Function.prototype.bind;function ze(Ot,wt){return vt.call(Ot,wt)}class At{constructor(wt){this.partialObserver=wt}next(wt){const{partialObserver:dt}=this;if(dt.next)try{dt.next(wt)}catch(kt){pn(kt)}}error(wt){const{partialObserver:dt}=this;if(dt.error)try{dt.error(wt)}catch(kt){pn(kt)}else pn(wt)}complete(){const{partialObserver:wt}=this;if(wt.complete)try{wt.complete()}catch(dt){pn(dt)}}}class Ut extends Oe{constructor(wt,dt,kt){let xt;if(super(),(0,D.T)(wt)||!wt)xt={next:wt??void 0,error:dt??void 0,complete:kt??void 0};else{let Ht;this&&V.$.useDeprecatedNextContext?(Ht=Object.create(wt),Ht.unsubscribe=()=>this.unsubscribe(),xt={next:wt.next&&ze(wt.next,Ht),error:wt.error&&ze(wt.error,Ht),complete:wt.complete&&ze(wt.complete,Ht)}):xt=wt}this.destination=new At(xt)}}function pn(Ot){V.$.useDeprecatedSynchronousErrorHandling?(0,be.l)(Ot):(0,We.m)(Ot)}function Xn(Ot,wt){const{onStoppedNotification:dt}=V.$;dt&&Ee.f.setTimeout(()=>dt(Ot,wt))}const cr={closed:!0,next:nt.l,error:function $t(Ot){throw Ot},complete:nt.l}},8359:(Cn,It,ie)=>{ie.d(It,{Kn:()=>ye,yU:()=>nt,Uv:()=>Ct});var D=ie(8071);const V=(0,ie(1853).L)(ct=>function(be){ct(this),this.message=be?`${be.length} errors occurred during unsubscription:\n${be.map((Oe,vt)=>`${vt+1}) ${Oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=be});var We=ie(7908);class nt{constructor(Ee){this.initialTeardown=Ee,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ee;if(!this.closed){this.closed=!0;const{_parentage:be}=this;if(be)if(this._parentage=null,Array.isArray(be))for(const ze of be)ze.remove(this);else be.remove(this);const{initialTeardown:Oe}=this;if((0,D.T)(Oe))try{Oe()}catch(ze){Ee=ze instanceof V?ze.errors:[ze]}const{_finalizers:vt}=this;if(vt){this._finalizers=null;for(const ze of vt)try{Xe(ze)}catch(At){Ee=Ee??[],At instanceof V?Ee=[...Ee,...At.errors]:Ee.push(At)}}if(Ee)throw new V(Ee)}}add(Ee){var be;if(Ee&&Ee!==this)if(this.closed)Xe(Ee);else{if(Ee instanceof nt){if(Ee.closed||Ee._hasParent(this))return;Ee._addParent(this)}(this._finalizers=null!==(be=this._finalizers)&&void 0!==be?be:[]).push(Ee)}}_hasParent(Ee){const{_parentage:be}=this;return be===Ee||Array.isArray(be)&&be.includes(Ee)}_addParent(Ee){const{_parentage:be}=this;this._parentage=Array.isArray(be)?(be.push(Ee),be):be?[be,Ee]:Ee}_removeParent(Ee){const{_parentage:be}=this;be===Ee?this._parentage=null:Array.isArray(be)&&(0,We.o)(be,Ee)}remove(Ee){const{_finalizers:be}=this;be&&(0,We.o)(be,Ee),Ee instanceof nt&&Ee._removeParent(this)}}nt.EMPTY=(()=>{const ct=new nt;return ct.closed=!0,ct})();const ye=nt.EMPTY;function Ct(ct){return ct instanceof nt||ct&&"closed"in ct&&(0,D.T)(ct.remove)&&(0,D.T)(ct.add)&&(0,D.T)(ct.unsubscribe)}function Xe(ct){(0,D.T)(ct)?ct():ct.unsubscribe()}},1026:(Cn,It,ie)=>{ie.d(It,{$:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4572:(Cn,It,ie)=>{ie.d(It,{z:()=>Ee});var D=ie(1985),R=ie(3073),V=ie(8455),We=ie(3669),nt=ie(6450),ye=ie(3794),Ct=ie(8496),Xe=ie(4360),ct=ie(5225);function Ee(...vt){const ze=(0,ye.lI)(vt),At=(0,ye.ms)(vt),{args:Ut,keys:pn}=(0,R.D)(vt);if(0===Ut.length)return(0,V.H)([],ze);const $t=new D.c(function be(vt,ze,At=We.D){return Ut=>{Oe(ze,()=>{const{length:pn}=vt,$t=new Array(pn);let Xn=pn,cr=pn;for(let Ot=0;Ot<pn;Ot++)Oe(ze,()=>{const wt=(0,V.H)(vt[Ot],ze);let dt=!1;wt.subscribe((0,Xe._)(Ut,kt=>{$t[Ot]=kt,dt||(dt=!0,cr--),cr||Ut.next(At($t.slice()))},()=>{--Xn||Ut.complete()}))},Ut)},Ut)}}(Ut,ze,pn?Xn=>(0,Ct.e)(pn,Xn):We.D));return At?$t.pipe((0,nt.I)(At)):$t}function Oe(vt,ze,At){vt?(0,ct.N)(At,vt,ze):ze()}},8793:(Cn,It,ie)=>{ie.d(It,{x:()=>nt});var D=ie(6365),V=ie(3794),We=ie(8455);function nt(...ye){return function R(){return(0,D.U)(1)}()((0,We.H)(ye,(0,V.lI)(ye)))}},8455:(Cn,It,ie)=>{ie.d(It,{H:()=>wt});var D=ie(8750),R=ie(941),V=ie(6745),ye=ie(1985),Xe=ie(4761),ct=ie(8071),Ee=ie(5225);function Oe(dt,kt){if(!dt)throw new Error("Iterable cannot be null");return new ye.c(xt=>{(0,Ee.N)(xt,kt,()=>{const Ht=dt[Symbol.asyncIterator]();(0,Ee.N)(xt,kt,()=>{Ht.next().then(De=>{De.done?xt.complete():xt.next(De.value)})},0,!0)})})}var vt=ie(5055),ze=ie(9858),At=ie(7441),Ut=ie(5397),pn=ie(7953),$t=ie(591),Xn=ie(5196);function wt(dt,kt){return kt?function Ot(dt,kt){if(null!=dt){if((0,vt.l)(dt))return function We(dt,kt){return(0,D.Tg)(dt).pipe((0,V._)(kt),(0,R.Q)(kt))}(dt,kt);if((0,At.X)(dt))return function Ct(dt,kt){return new ye.c(xt=>{let Ht=0;return kt.schedule(function(){Ht===dt.length?xt.complete():(xt.next(dt[Ht++]),xt.closed||this.schedule())})})}(dt,kt);if((0,ze.y)(dt))return function nt(dt,kt){return(0,D.Tg)(dt).pipe((0,V._)(kt),(0,R.Q)(kt))}(dt,kt);if((0,pn.T)(dt))return Oe(dt,kt);if((0,Ut.x)(dt))return function be(dt,kt){return new ye.c(xt=>{let Ht;return(0,Ee.N)(xt,kt,()=>{Ht=dt[Xe.l](),(0,Ee.N)(xt,kt,()=>{let De,tn;try{({value:De,done:tn}=Ht.next())}catch(gt){return void xt.error(gt)}tn?xt.complete():xt.next(De)},0,!0)}),()=>(0,ct.T)(Ht?.return)&&Ht.return()})}(dt,kt);if((0,Xn.U)(dt))return function cr(dt,kt){return Oe((0,Xn.C)(dt),kt)}(dt,kt)}throw(0,$t.L)(dt)}(dt,kt):(0,D.Tg)(dt)}},8750:(Cn,It,ie)=>{ie.d(It,{Tg:()=>vt});var D=ie(1635),R=ie(7441),V=ie(9858),We=ie(1985),nt=ie(5055),ye=ie(7953),Ct=ie(591),Xe=ie(5397),ct=ie(5196),Ee=ie(8071),be=ie(5334),Oe=ie(3494);function vt(Ot){if(Ot instanceof We.c)return Ot;if(null!=Ot){if((0,nt.l)(Ot))return function ze(Ot){return new We.c(wt=>{const dt=Ot[Oe.s]();if((0,Ee.T)(dt.subscribe))return dt.subscribe(wt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ot);if((0,R.X)(Ot))return function At(Ot){return new We.c(wt=>{for(let dt=0;dt<Ot.length&&!wt.closed;dt++)wt.next(Ot[dt]);wt.complete()})}(Ot);if((0,V.y)(Ot))return function Ut(Ot){return new We.c(wt=>{Ot.then(dt=>{wt.closed||(wt.next(dt),wt.complete())},dt=>wt.error(dt)).then(null,be.m)})}(Ot);if((0,ye.T)(Ot))return $t(Ot);if((0,Xe.x)(Ot))return function pn(Ot){return new We.c(wt=>{for(const dt of Ot)if(wt.next(dt),wt.closed)return;wt.complete()})}(Ot);if((0,ct.U)(Ot))return function Xn(Ot){return $t((0,ct.C)(Ot))}(Ot)}throw(0,Ct.L)(Ot)}function $t(Ot){return new We.c(wt=>{(function cr(Ot,wt){var dt,kt,xt,Ht;return(0,D.sH)(this,void 0,void 0,function*(){try{for(dt=(0,D.xN)(Ot);!(kt=yield dt.next()).done;)if(wt.next(kt.value),wt.closed)return}catch(De){xt={error:De}}finally{try{kt&&!kt.done&&(Ht=dt.return)&&(yield Ht.call(dt))}finally{if(xt)throw xt.error}}wt.complete()})})(Ot,wt).catch(dt=>wt.error(dt))})}},4360:(Cn,It,ie)=>{ie.d(It,{_:()=>R});var D=ie(7707);function R(We,nt,ye,Ct,Xe){return new V(We,nt,ye,Ct,Xe)}class V extends D.vU{constructor(nt,ye,Ct,Xe,ct,Ee){super(nt),this.onFinalize=ct,this.shouldUnsubscribe=Ee,this._next=ye?function(be){try{ye(be)}catch(Oe){nt.error(Oe)}}:super._next,this._error=Xe?function(be){try{Xe(be)}catch(Oe){nt.error(Oe)}finally{this.unsubscribe()}}:super._error,this._complete=Ct?function(){try{Ct()}catch(be){nt.error(be)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var nt;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(nt=this.onFinalize)||void 0===nt||nt.call(this))}}}},6354:(Cn,It,ie)=>{ie.d(It,{T:()=>V});var D=ie(9974),R=ie(4360);function V(We,nt){return(0,D.N)((ye,Ct)=>{let Xe=0;ye.subscribe((0,R._)(Ct,ct=>{Ct.next(We.call(nt,ct,Xe++))}))})}},6365:(Cn,It,ie)=>{ie.d(It,{U:()=>V});var D=ie(1397),R=ie(3669);function V(We=1/0){return(0,D.Z)(R.D,We)}},1397:(Cn,It,ie)=>{ie.d(It,{Z:()=>Xe});var D=ie(6354),R=ie(8750),V=ie(9974),We=ie(5225),nt=ie(4360),Ct=ie(8071);function Xe(ct,Ee,be=1/0){return(0,Ct.T)(Ee)?Xe((Oe,vt)=>(0,D.T)((ze,At)=>Ee(Oe,ze,vt,At))((0,R.Tg)(ct(Oe,vt))),be):("number"==typeof Ee&&(be=Ee),(0,V.N)((Oe,vt)=>function ye(ct,Ee,be,Oe,vt,ze,At,Ut){const pn=[];let $t=0,Xn=0,cr=!1;const Ot=()=>{cr&&!pn.length&&!$t&&Ee.complete()},wt=kt=>$t<Oe?dt(kt):pn.push(kt),dt=kt=>{ze&&Ee.next(kt),$t++;let xt=!1;(0,R.Tg)(be(kt,Xn++)).subscribe((0,nt._)(Ee,Ht=>{vt?.(Ht),ze?wt(Ht):Ee.next(Ht)},()=>{xt=!0},void 0,()=>{if(xt)try{for($t--;pn.length&&$t<Oe;){const Ht=pn.shift();At?(0,We.N)(Ee,At,()=>dt(Ht)):dt(Ht)}Ot()}catch(Ht){Ee.error(Ht)}}))};return ct.subscribe((0,nt._)(Ee,wt,()=>{cr=!0,Ot()})),()=>{Ut?.()}}(Oe,vt,ct,be)))}},941:(Cn,It,ie)=>{ie.d(It,{Q:()=>We});var D=ie(5225),R=ie(9974),V=ie(4360);function We(nt,ye=0){return(0,R.N)((Ct,Xe)=>{Ct.subscribe((0,V._)(Xe,ct=>(0,D.N)(Xe,nt,()=>Xe.next(ct),ye),()=>(0,D.N)(Xe,nt,()=>Xe.complete(),ye),ct=>(0,D.N)(Xe,nt,()=>Xe.error(ct),ye)))})}},9172:(Cn,It,ie)=>{ie.d(It,{Z:()=>We});var D=ie(8793),R=ie(3794),V=ie(9974);function We(...nt){const ye=(0,R.lI)(nt);return(0,V.N)((Ct,Xe)=>{(ye?(0,D.x)(nt,Ct,ye):(0,D.x)(nt,Ct)).subscribe(Xe)})}},6745:(Cn,It,ie)=>{ie.d(It,{_:()=>R});var D=ie(9974);function R(V,We=0){return(0,D.N)((nt,ye)=>{ye.add(V.schedule(()=>nt.subscribe(ye),We))})}},8141:(Cn,It,ie)=>{ie.d(It,{M:()=>nt});var D=ie(8071),R=ie(9974),V=ie(4360),We=ie(3669);function nt(ye,Ct,Xe){const ct=(0,D.T)(ye)||Ct||Xe?{next:ye,error:Ct,complete:Xe}:ye;return ct?(0,R.N)((Ee,be)=>{var Oe;null===(Oe=ct.subscribe)||void 0===Oe||Oe.call(ct);let vt=!0;Ee.subscribe((0,V._)(be,ze=>{var At;null===(At=ct.next)||void 0===At||At.call(ct,ze),be.next(ze)},()=>{var ze;vt=!1,null===(ze=ct.complete)||void 0===ze||ze.call(ct),be.complete()},ze=>{var At;vt=!1,null===(At=ct.error)||void 0===At||At.call(ct,ze),be.error(ze)},()=>{var ze,At;vt&&(null===(ze=ct.unsubscribe)||void 0===ze||ze.call(ct)),null===(At=ct.finalize)||void 0===At||At.call(ct)}))}):We.D}},9270:(Cn,It,ie)=>{ie.d(It,{f:()=>D});const D={setTimeout(R,V,...We){const{delegate:nt}=D;return nt?.setTimeout?nt.setTimeout(R,V,...We):setTimeout(R,V,...We)},clearTimeout(R){const{delegate:V}=D;return(V?.clearTimeout||clearTimeout)(R)},delegate:void 0}},4761:(Cn,It,ie)=>{ie.d(It,{l:()=>R});const R=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Cn,It,ie)=>{ie.d(It,{s:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},3794:(Cn,It,ie)=>{ie.d(It,{ms:()=>We,lI:()=>nt});var D=ie(8071);function V(Ct){return Ct[Ct.length-1]}function We(Ct){return(0,D.T)(V(Ct))?Ct.pop():void 0}function nt(Ct){return function R(Ct){return Ct&&(0,D.T)(Ct.schedule)}(V(Ct))?Ct.pop():void 0}},3073:(Cn,It,ie)=>{ie.d(It,{D:()=>nt});const{isArray:D}=Array,{getPrototypeOf:R,prototype:V,keys:We}=Object;function nt(Ct){if(1===Ct.length){const Xe=Ct[0];if(D(Xe))return{args:Xe,keys:null};if(function ye(Ct){return Ct&&"object"==typeof Ct&&R(Ct)===V}(Xe)){const ct=We(Xe);return{args:ct.map(Ee=>Xe[Ee]),keys:ct}}}return{args:Ct,keys:null}}},7908:(Cn,It,ie)=>{function D(R,V){if(R){const We=R.indexOf(V);0<=We&&R.splice(We,1)}}ie.d(It,{o:()=>D})},1853:(Cn,It,ie)=>{function D(R){const We=R(nt=>{Error.call(nt),nt.stack=(new Error).stack});return We.prototype=Object.create(Error.prototype),We.prototype.constructor=We,We}ie.d(It,{L:()=>D})},8496:(Cn,It,ie)=>{function D(R,V){return R.reduce((We,nt,ye)=>(We[nt]=V[ye],We),{})}ie.d(It,{e:()=>D})},9786:(Cn,It,ie)=>{ie.d(It,{Y:()=>V,l:()=>We});var D=ie(1026);let R=null;function V(nt){if(D.$.useDeprecatedSynchronousErrorHandling){const ye=!R;if(ye&&(R={errorThrown:!1,error:null}),nt(),ye){const{errorThrown:Ct,error:Xe}=R;if(R=null,Ct)throw Xe}}else nt()}function We(nt){D.$.useDeprecatedSynchronousErrorHandling&&R&&(R.errorThrown=!0,R.error=nt)}},5225:(Cn,It,ie)=>{function D(R,V,We,nt=0,ye=!1){const Ct=V.schedule(function(){We(),ye?R.add(this.schedule(null,nt)):this.unsubscribe()},nt);if(R.add(Ct),!ye)return Ct}ie.d(It,{N:()=>D})},3669:(Cn,It,ie)=>{function D(R){return R}ie.d(It,{D:()=>D})},7441:(Cn,It,ie)=>{ie.d(It,{X:()=>D});const D=R=>R&&"number"==typeof R.length&&"function"!=typeof R},7953:(Cn,It,ie)=>{ie.d(It,{T:()=>R});var D=ie(8071);function R(V){return Symbol.asyncIterator&&(0,D.T)(V?.[Symbol.asyncIterator])}},8071:(Cn,It,ie)=>{function D(R){return"function"==typeof R}ie.d(It,{T:()=>D})},5055:(Cn,It,ie)=>{ie.d(It,{l:()=>V});var D=ie(3494),R=ie(8071);function V(We){return(0,R.T)(We[D.s])}},5397:(Cn,It,ie)=>{ie.d(It,{x:()=>V});var D=ie(4761),R=ie(8071);function V(We){return(0,R.T)(We?.[D.l])}},9858:(Cn,It,ie)=>{ie.d(It,{y:()=>R});var D=ie(8071);function R(V){return(0,D.T)(V?.then)}},5196:(Cn,It,ie)=>{ie.d(It,{C:()=>V,U:()=>We});var D=ie(1635),R=ie(8071);function V(nt){return(0,D.AQ)(this,arguments,function*(){const Ct=nt.getReader();try{for(;;){const{value:Xe,done:ct}=yield(0,D.N3)(Ct.read());if(ct)return yield(0,D.N3)(void 0);yield yield(0,D.N3)(Xe)}}finally{Ct.releaseLock()}})}function We(nt){return(0,R.T)(nt?.getReader)}},9974:(Cn,It,ie)=>{ie.d(It,{N:()=>V,S:()=>R});var D=ie(8071);function R(We){return(0,D.T)(We?.lift)}function V(We){return nt=>{if(R(nt))return nt.lift(function(ye){try{return We(ye,this)}catch(Ct){this.error(Ct)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Cn,It,ie)=>{ie.d(It,{I:()=>We});var D=ie(6354);const{isArray:R}=Array;function We(nt){return(0,D.T)(ye=>function V(nt,ye){return R(ye)?nt(...ye):nt(ye)}(nt,ye))}},5343:(Cn,It,ie)=>{function D(){}ie.d(It,{l:()=>D})},1203:(Cn,It,ie)=>{ie.d(It,{F:()=>R,m:()=>V});var D=ie(3669);function R(...We){return V(We)}function V(We){return 0===We.length?D.D:1===We.length?We[0]:function(ye){return We.reduce((Ct,Xe)=>Xe(Ct),ye)}}},5334:(Cn,It,ie)=>{ie.d(It,{m:()=>V});var D=ie(1026),R=ie(9270);function V(We){R.f.setTimeout(()=>{const{onUnhandledError:nt}=D.$;if(!nt)throw We;nt(We)})}},591:(Cn,It,ie)=>{function D(R){return new TypeError(`You provided ${null!==R&&"object"==typeof R?"an invalid object":`'${R}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ie.d(It,{L:()=>D})},177:(Cn,It,ie)=>{ie.d(It,{AJ:()=>Na,B3:()=>di,Jj:()=>ko,MD:()=>go,N0:()=>fi,QT:()=>V,Sm:()=>Ut,Sq:()=>pc,VF:()=>nt,Vy:()=>mo,Xr:()=>Wa,YU:()=>jr,ZD:()=>We,_b:()=>Rn,aZ:()=>$t,bT:()=>Ha,fw:()=>pn,hb:()=>ze,hj:()=>ct,qQ:()=>Ct});var D=ie(3953);let R=null;function V(){return R}function We(F){R??=F}class nt{}const Ct=new D.nKC("");let Xe=(()=>{class F{historyGo(W){throw new Error("")}static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275prov=D.jDH({token:F,factory:()=>(0,D.WQX)(Ee),providedIn:"platform"})}return F})();const ct=new D.nKC("");let Ee=(()=>{class F extends Xe{constructor(){super(),this._doc=(0,D.WQX)(Ct),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(W){const ne=V().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",W,!1),()=>ne.removeEventListener("popstate",W)}onHashChange(W){const ne=V().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",W,!1),()=>ne.removeEventListener("hashchange",W)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(W){this._location.pathname=W}pushState(W,ne,Ce){this._history.pushState(W,ne,Ce)}replaceState(W,ne,Ce){this._history.replaceState(W,ne,Ce)}forward(){this._history.forward()}back(){this._history.back()}historyGo(W=0){this._history.go(W)}getState(){return this._history.state}static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275prov=D.jDH({token:F,factory:()=>new F,providedIn:"platform"})}return F})();function be(F,re){if(0==F.length)return re;if(0==re.length)return F;let W=0;return F.endsWith("/")&&W++,re.startsWith("/")&&W++,2==W?F+re.substring(1):1==W?F+re:F+"/"+re}function Oe(F){const re=F.match(/#|\?|$/),W=re&&re.index||F.length;return F.slice(0,W-("/"===F[W-1]?1:0))+F.slice(W)}function vt(F){return F&&"?"!==F[0]?"?"+F:F}let ze=(()=>{class F{historyGo(W){throw new Error("")}static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275prov=D.jDH({token:F,factory:()=>(0,D.WQX)(Ut),providedIn:"root"})}return F})();const At=new D.nKC("");let Ut=(()=>{class F extends ze{constructor(W,ne){super(),this._platformLocation=W,this._removeListenerFns=[],this._baseHref=ne??this._platformLocation.getBaseHrefFromDOM()??(0,D.WQX)(Ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}prepareExternalUrl(W){return be(this._baseHref,W)}path(W=!1){const ne=this._platformLocation.pathname+vt(this._platformLocation.search),Ce=this._platformLocation.hash;return Ce&&W?`${ne}${Ce}`:ne}pushState(W,ne,Ce,ut){const mt=this.prepareExternalUrl(Ce+vt(ut));this._platformLocation.pushState(W,ne,mt)}replaceState(W,ne,Ce,ut){const mt=this.prepareExternalUrl(Ce+vt(ut));this._platformLocation.replaceState(W,ne,mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.KVO(Xe),D.KVO(At,8))};static#t=this.\u0275prov=D.jDH({token:F,factory:F.\u0275fac,providedIn:"root"})}return F})(),pn=(()=>{class F extends ze{constructor(W,ne){super(),this._platformLocation=W,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(W){this._removeListenerFns.push(this._platformLocation.onPopState(W),this._platformLocation.onHashChange(W))}getBaseHref(){return this._baseHref}path(W=!1){const ne=this._platformLocation.hash??"#";return ne.length>0?ne.substring(1):ne}prepareExternalUrl(W){const ne=be(this._baseHref,W);return ne.length>0?"#"+ne:ne}pushState(W,ne,Ce,ut){let mt=this.prepareExternalUrl(Ce+vt(ut));0==mt.length&&(mt=this._platformLocation.pathname),this._platformLocation.pushState(W,ne,mt)}replaceState(W,ne,Ce,ut){let mt=this.prepareExternalUrl(Ce+vt(ut));0==mt.length&&(mt=this._platformLocation.pathname),this._platformLocation.replaceState(W,ne,mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(W=0){this._platformLocation.historyGo?.(W)}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.KVO(Xe),D.KVO(At,8))};static#t=this.\u0275prov=D.jDH({token:F,factory:F.\u0275fac})}return F})(),$t=(()=>{class F{constructor(W){this._subject=new D.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=W;const ne=this._locationStrategy.getBaseHref();this._basePath=function wt(F){if(new RegExp("^(https?:)?//").test(F)){const[,W]=F.split(/\/\/[^\/]+/);return W}return F}(Oe(Ot(ne))),this._locationStrategy.onPopState(Ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ce.state,type:Ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(W=!1){return this.normalize(this._locationStrategy.path(W))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(W,ne=""){return this.path()==this.normalize(W+vt(ne))}normalize(W){return F.stripTrailingSlash(function cr(F,re){if(!F||!re.startsWith(F))return re;const W=re.substring(F.length);return""===W||["/",";","?","#"].includes(W[0])?W:re}(this._basePath,Ot(W)))}prepareExternalUrl(W){return W&&"/"!==W[0]&&(W="/"+W),this._locationStrategy.prepareExternalUrl(W)}go(W,ne="",Ce=null){this._locationStrategy.pushState(Ce,"",W,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+vt(ne)),Ce)}replaceState(W,ne="",Ce=null){this._locationStrategy.replaceState(Ce,"",W,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(W+vt(ne)),Ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(W=0){this._locationStrategy.historyGo?.(W)}onUrlChange(W){return this._urlChangeListeners.push(W),this._urlChangeSubscription??=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)}),()=>{const ne=this._urlChangeListeners.indexOf(W);this._urlChangeListeners.splice(ne,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(W="",ne){this._urlChangeListeners.forEach(Ce=>Ce(W,ne))}subscribe(W,ne,Ce){return this._subject.subscribe({next:W,error:ne,complete:Ce})}static#e=this.normalizeQueryParams=vt;static#t=this.joinWithSlash=be;static#n=this.stripTrailingSlash=Oe;static#r=this.\u0275fac=function(ne){return new(ne||F)(D.KVO(ze))};static#i=this.\u0275prov=D.jDH({token:F,factory:()=>function Xn(){return new $t((0,D.KVO)(ze))}(),providedIn:"root"})}return F})();function Ot(F){return F.replace(/\/index.html$/,"")}function Rn(F,re){re=encodeURIComponent(re);for(const W of F.split(";")){const ne=W.indexOf("="),[Ce,ut]=-1==ne?[W,""]:[W.slice(0,ne),W.slice(ne+1)];if(Ce.trim()===re)return decodeURIComponent(ut)}return null}const kn=/\s+/,Ir=[];let jr=(()=>{class F{constructor(W,ne){this._ngEl=W,this._renderer=ne,this.initialClasses=Ir,this.stateMap=new Map}set klass(W){this.initialClasses=null!=W?W.trim().split(kn):Ir}set ngClass(W){this.rawClass="string"==typeof W?W.trim().split(kn):W}ngDoCheck(){for(const ne of this.initialClasses)this._updateState(ne,!0);const W=this.rawClass;if(Array.isArray(W)||W instanceof Set)for(const ne of W)this._updateState(ne,!0);else if(null!=W)for(const ne of Object.keys(W))this._updateState(ne,!!W[ne]);this._applyStateDiff()}_updateState(W,ne){const Ce=this.stateMap.get(W);void 0!==Ce?(Ce.enabled!==ne&&(Ce.changed=!0,Ce.enabled=ne),Ce.touched=!0):this.stateMap.set(W,{enabled:ne,changed:!0,touched:!0})}_applyStateDiff(){for(const W of this.stateMap){const ne=W[0],Ce=W[1];Ce.changed?(this._toggleClass(ne,Ce.enabled),Ce.changed=!1):Ce.touched||(Ce.enabled&&this._toggleClass(ne,!1),this.stateMap.delete(ne)),Ce.touched=!1}}_toggleClass(W,ne){(W=W.trim()).length>0&&W.split(kn).forEach(Ce=>{ne?this._renderer.addClass(this._ngEl.nativeElement,Ce):this._renderer.removeClass(this._ngEl.nativeElement,Ce)})}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.aKT),D.rXU(D.sFG))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return F})();class Qr{constructor(re,W,ne,Ce){this.$implicit=re,this.ngForOf=W,this.index=ne,this.count=Ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pc=(()=>{class F{set ngForOf(W){this._ngForOf=W,this._ngForOfDirty=!0}set ngForTrackBy(W){this._trackByFn=W}get ngForTrackBy(){return this._trackByFn}constructor(W,ne,Ce){this._viewContainer=W,this._template=ne,this._differs=Ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(W){W&&(this._template=W)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const W=this._ngForOf;!this._differ&&W&&(this._differ=this._differs.find(W).create(this.ngForTrackBy))}if(this._differ){const W=this._differ.diff(this._ngForOf);W&&this._applyChanges(W)}}_applyChanges(W){const ne=this._viewContainer;W.forEachOperation((Ce,ut,mt)=>{if(null==Ce.previousIndex)ne.createEmbeddedView(this._template,new Qr(Ce.item,this._ngForOf,-1,-1),null===mt?void 0:mt);else if(null==mt)ne.remove(null===ut?void 0:ut);else if(null!==ut){const mn=ne.get(ut);ne.move(mn,mt),aa(mn,Ce)}});for(let Ce=0,ut=ne.length;Ce<ut;Ce++){const mn=ne.get(Ce).context;mn.index=Ce,mn.count=ut,mn.ngForOf=this._ngForOf}W.forEachIdentityChange(Ce=>{aa(ne.get(Ce.currentIndex),Ce)})}static ngTemplateContextGuard(W,ne){return!0}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.c1b),D.rXU(D.C4Q),D.rXU(D._q3))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return F})();function aa(F,re){F.context.$implicit=re.item}let Ha=(()=>{class F{constructor(W,ne){this._viewContainer=W,this._context=new Fc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(W){this._context.$implicit=this._context.ngIf=W,this._updateView()}set ngIfThen(W){Lc("ngIfThen",W),this._thenTemplateRef=W,this._thenViewRef=null,this._updateView()}set ngIfElse(W){Lc("ngIfElse",W),this._elseTemplateRef=W,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(W,ne){return!0}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.c1b),D.rXU(D.C4Q))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return F})();class Fc{constructor(){this.$implicit=null,this.ngIf=null}}function Lc(F,re){if(re&&!re.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,D.Tbb)(re)}'.`)}let di=(()=>{class F{constructor(W,ne,Ce){this._ngEl=W,this._differs=ne,this._renderer=Ce,this._ngStyle=null,this._differ=null}set ngStyle(W){this._ngStyle=W,!this._differ&&W&&(this._differ=this._differs.find(W).create())}ngDoCheck(){if(this._differ){const W=this._differ.diff(this._ngStyle);W&&this._applyChanges(W)}}_setStyle(W,ne){const[Ce,ut]=W.split("."),mt=-1===Ce.indexOf("-")?void 0:D.czy.DashCase;null!=ne?this._renderer.setStyle(this._ngEl.nativeElement,Ce,ut?`${ne}${ut}`:ne,mt):this._renderer.removeStyle(this._ngEl.nativeElement,Ce,mt)}_applyChanges(W){W.forEachRemovedItem(ne=>this._setStyle(ne.key,null)),W.forEachAddedItem(ne=>this._setStyle(ne.key,ne.currentValue)),W.forEachChangedItem(ne=>this._setStyle(ne.key,ne.currentValue))}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.aKT),D.rXU(D.MKu),D.rXU(D.sFG))};static#t=this.\u0275dir=D.FsC({type:F,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return F})();class Di{createSubscription(re,W){return(0,D.O8t)(()=>re.subscribe({next:W,error:ne=>{throw ne}}))}dispose(re){(0,D.O8t)(()=>re.unsubscribe())}}class ks{createSubscription(re,W){return re.then(W,ne=>{throw ne})}dispose(re){}}const Ul=new ks,Ui=new Di;let ko=(()=>{class F{constructor(W){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=W}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(W){if(!this._obj){if(W)try{this.markForCheckOnValueUpdate=!1,this._subscribe(W)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return W!==this._obj?(this._dispose(),this.transform(W)):this._latestValue}_subscribe(W){this._obj=W,this._strategy=this._selectStrategy(W),this._subscription=this._strategy.createSubscription(W,ne=>this._updateLatestValue(W,ne))}_selectStrategy(W){if((0,D.jNT)(W))return Ul;if((0,D.zjR)(W))return Ui;throw function $i(F,re){return new D.wOt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(W,ne){W===this._obj&&(this._latestValue=ne,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(ne){return new(ne||F)(D.rXU(D.gRc,16))};static#t=this.\u0275pipe=D.EJ8({name:"async",type:F,pure:!1,standalone:!0})}return F})(),go=(()=>{class F{static#e=this.\u0275fac=function(ne){return new(ne||F)};static#t=this.\u0275mod=D.$C({type:F});static#n=this.\u0275inj=D.G2t({})}return F})();const Na="browser",rs="server";function mo(F){return F===rs}let Wa=(()=>{class F{static#e=this.\u0275prov=(0,D.jDH)({token:F,providedIn:"root",factory:()=>function la(F){return F===Na}((0,D.WQX)(D.Agw))?new Xo((0,D.WQX)(Ct),window):new _c})}return F})();class Xo{constructor(re,W){this.document=re,this.window=W,this.offset=()=>[0,0]}setOffset(re){this.offset=Array.isArray(re)?()=>re:re}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(re){this.window.scrollTo(re[0],re[1])}scrollToAnchor(re){const W=function Qi(F,re){const W=F.getElementById(re)||F.getElementsByName(re)[0];if(W)return W;if("function"==typeof F.createTreeWalker&&F.body&&"function"==typeof F.body.attachShadow){const ne=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Ce=ne.currentNode;for(;Ce;){const ut=Ce.shadowRoot;if(ut){const mt=ut.getElementById(re)||ut.querySelector(`[name="${re}"]`);if(mt)return mt}Ce=ne.nextNode()}}return null}(this.document,re);W&&(this.scrollToElement(W),W.focus())}setHistoryScrollRestoration(re){this.window.history.scrollRestoration=re}scrollToElement(re){const W=re.getBoundingClientRect(),ne=W.left+this.window.pageXOffset,Ce=W.top+this.window.pageYOffset,ut=this.offset();this.window.scrollTo(ne-ut[0],Ce-ut[1])}}class _c{setOffset(re){}getScrollPosition(){return[0,0]}scrollToPosition(re){}scrollToAnchor(re){}setHistoryScrollRestoration(re){}}class fi{}},3953:(Cn,It,ie)=>{ie.d(It,{iLQ:()=>Xy,sZ2:()=>ei,hnV:()=>vT,o8S:()=>Dd,BIS:()=>th,gRc:()=>MT,Ql9:()=>hM,Ocv:()=>wM,Z63:()=>cs,aKT:()=>Jd,uvJ:()=>jo,zcH:()=>ku,bkB:()=>Ii,$GK:()=>re,nKC:()=>tr,zZn:()=>Ms,_q3:()=>hC,MKu:()=>pC,xe9:()=>Zy,Co$:()=>pI,Vns:()=>mm,SKi:()=>zo,Xx1:()=>To,Agw:()=>sf,PLl:()=>Jm,sFG:()=>io,_9s:()=>fn,czy:()=>Ye,kdw:()=>ia,C4Q:()=>xp,NYb:()=>aM,giA:()=>mT,xvI:()=>kR,RxE:()=>cT,c1b:()=>Ay,gXe:()=>ma,mal:()=>RC,L39:()=>EO,Ol2:()=>lw,w6W:()=>dS,Rfq:()=>ta,WQX:()=>En,QuC:()=>Mn,EmA:()=>$s,HJs:()=>SO,N4e:()=>bc,O8t:()=>CO,H3F:()=>uT,H8p:()=>Kl,KH2:()=>g0,TgB:()=>_m,wOt:()=>on,WHO:()=>pT,e01:()=>gT,H5H:()=>kw,Zy3:()=>Gn,mq5:()=>bA,JZv:()=>xr,TL3:()=>JM,LfX:()=>js,plB:()=>Pp,jNT:()=>nC,zjR:()=>_T,TL$:()=>ap,Tbb:()=>Sr,Vt3:()=>aw,GFd:()=>hI,OA$:()=>it,Jv_:()=>Pb,aNF:()=>Nb,R7$:()=>ce,BMQ:()=>Cw,HbH:()=>nA,ZvI:()=>uA,STu:()=>lA,ZWY:()=>dA,AVh:()=>Dw,vxM:()=>gA,wni:()=>cb,VBU:()=>U,FsC:()=>Ie,jDH:()=>Tn,G2t:()=>Us,$C:()=>X,EJ8:()=>lt,rXU:()=>Fe,nrm:()=>Nw,bVm:()=>jy,qex:()=>Uy,k0s:()=>By,j41:()=>Vy,RV6:()=>CA,xGo:()=>Bm,KVO:()=>Mi,kS0:()=>si,QTQ:()=>pt,bIt:()=>Vw,lsd:()=>db,XpG:()=>YA,nI1:()=>$b,bMT:()=>zb,SdG:()=>JA,NAR:()=>ZA,Y8G:()=>Tw,FS9:()=>Uw,eq3:()=>Fb,l_i:()=>Lb,sMw:()=>Vb,mGM:()=>lb,sdS:()=>fb,Dyx:()=>vA,Z7z:()=>_A,fX1:()=>mA,Njj:()=>Fh,EBC:()=>g,tSv:()=>l,eBV:()=>ft,B4B:()=>df,n$t:()=>I_,xc7:()=>Sw,DNE:()=>fw,C5r:()=>Wb,EFF:()=>Cb,JRh:()=>Hw,SpI:()=>zy,Lme:()=>Gw,DH7:()=>Mb,mxI:()=>zw,R50:()=>$w,GBs:()=>ub});let R=null,We=1;const nt=Symbol("SIGNAL");function ye(t){const r=R;return R=t,r}function vt(t){if((!dt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==We)){if(!t.producerMustRecompute(t)&&!Xn(t))return t.dirty=!1,void(t.lastCleanEpoch=We);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=We}}function Xn(t){kt(t);for(let r=0;r<t.producerNode.length;r++){const a=t.producerNode[r],d=t.producerLastReadVersion[r];if(d!==a.version||(vt(a),d!==a.version))return!0}return!1}function wt(t,r){if(function xt(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),1===t.liveConsumerNode.length&&function Ht(t){return void 0!==t.producerNode}(t))for(let d=0;d<t.producerNode.length;d++)wt(t.producerNode[d],t.producerIndexOfThis[d]);const a=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[a],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[a],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const d=t.liveConsumerIndexOfThis[r],h=t.liveConsumerNode[r];kt(h),h.producerIndexOfThis[d]=r}}function dt(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function kt(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Xt=null;var no=ie(1413),mr=ie(8359),Br=ie(4412),Fi=ie(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const Bc="https://g.co/ng/security#xss";class on extends Error{constructor(r,a){super(Gn(r,a)),this.code=r}}function Gn(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}function ro(t){return{toString:t}.toString()}const ws="__parameters__";function Xa(t,r,a){return ro(()=>{const d=function vc(t){return function(...a){if(t){const d=t(...a);for(const h in d)this[h]=d[h]}}}(r);function h(...v){if(this instanceof h)return d.apply(this,v),this;const C=new h(...v);return x.annotation=C,x;function x(N,q,J){const fe=N.hasOwnProperty(ws)?N[ws]:Object.defineProperty(N,ws,{value:[]})[ws];for(;fe.length<=J;)fe.push(null);return(fe[J]=fe[J]||[]).push(C),N}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=t,h.annotationCls=h,h})}const xr=globalThis;function Wr(t){for(let r in t)if(t[r]===Wr)return r;throw Error("Could not find renamed property on target object.")}function Hc(t,r){for(const a in r)r.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(t[a]=r[a])}function Sr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Sr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const a=r.indexOf("\n");return-1===a?r:r.substring(0,a)}function is(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const $c=Wr({__forward_ref__:Wr});function ta(t){return t.__forward_ref__=ta,t.toString=function(){return Sr(this())},t}function On(t){return Cs(t)?t():t}function Cs(t){return"function"==typeof t&&t.hasOwnProperty($c)&&t.__forward_ref__===ta}function Tn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Us(t){return{providers:t.providers||[],imports:t.imports||[]}}function qr(t){return Ec(t,vu)||Ec(t,Rd)}function js(t){return null!==qr(t)}function Ec(t,r){return t.hasOwnProperty(r)?t[r]:null}function As(t){return t&&(t.hasOwnProperty(Yn)||t.hasOwnProperty(mi))?t[Yn]:null}const vu=Wr({\u0275prov:Wr}),Yn=Wr({\u0275inj:Wr}),Rd=Wr({ngInjectableDef:Wr}),mi=Wr({ngInjectorDef:Wr});class tr{constructor(r,a){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Tn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cc(t){return t&&!!t.\u0275providers}const Yr=Wr({\u0275cmp:Wr}),Wc=Wr({\u0275dir:Wr}),ar=Wr({\u0275pipe:Wr}),Ya=Wr({\u0275mod:Wr}),_i=Wr({\u0275fac:Wr}),Za=Wr({__NG_ELEMENT_ID__:Wr}),Vn=Wr({__NG_ENV_ID__:Wr});function Kn(t){return"string"==typeof t?t:null==t?"":String(t)}function F(t,r){throw new on(-201,!1)}var re=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(re||{});let W;function ne(){return W}function Ce(t){const r=W;return W=t,r}function ut(t,r,a){const d=qr(t);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:a&re.Optional?null:void 0!==r?r:void F()}const gn={},Kr="__NG_DI_FLAG__",nr="ngTempTokenPath",dr=/\n/gm,Wi="__source";let Qo;function Yo(t){const r=Qo;return Qo=t,r}function na(t,r=re.Default){if(void 0===Qo)throw new on(-203,!1);return null===Qo?ut(t,void 0,r):Qo.get(t,r&re.Optional?null:void 0,r)}function Mi(t,r=re.Default){return(ne()||na)(On(t),r)}function En(t,r=re.Default){return Mi(t,bs(r))}function bs(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ts(t){const r=[];for(let a=0;a<t.length;a++){const d=On(t[a]);if(Array.isArray(d)){if(0===d.length)throw new on(900,!1);let h,v=re.Default;for(let C=0;C<d.length;C++){const x=d[C],N=qc(x);"number"==typeof N?-1===N?h=x.token:v|=N:h=x}r.push(Mi(h,v))}else r.push(Mi(d))}return r}function xs(t,r){return t[Kr]=r,t.prototype[Kr]=r,t}function qc(t){return t[Kr]}const To=xs(Xa("Optional"),8),ia=xs(Xa("SkipSelf"),4);function qi(t,r){return t.hasOwnProperty(_i)?t[_i]:null}function ka(t,r){t.forEach(a=>Array.isArray(a)?ka(a,r):r(a))}function Zi(t,r,a){r>=t.length?t.push(a):t.splice(r,0,a)}function pl(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function vi(t,r,a){let d=Kc(t,r);return d>=0?t[1|d]=a:(d=~d,function Ku(t,r,a,d){let h=t.length;if(h==r)t.push(a,d);else if(1===h)t.push(d,t[0]),t[0]=a;else{for(h--,t.push(t[h-1],t[h]);h>r;)t[h]=t[h-2],h--;t[r]=a,t[r+1]=d}}(t,d,r,a)),d}function as(t,r){const a=Kc(t,r);if(a>=0)return t[1|a]}function Kc(t,r){return function Gl(t,r,a){let d=0,h=t.length>>a;for(;h!==d;){const v=d+(h-d>>1),C=t[v<<a];if(r===C)return v<<a;C>r?h=v:d=v+1}return~(h<<a)}(t,r,1)}const hi={},Fr=[],cs=new tr(""),Xu=new tr("",-1),$l=new tr("");class Ic{get(r,a=gn){if(a===gn){const d=new Error(`NullInjectorError: No provider for ${Sr(r)}!`);throw d.name="NullInjectorError",d}return a}}var Zo=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Zo||{}),ma=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ma||{}),Fa=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Fa||{});function Ji(t,r,a){let d=t.length;for(;;){const h=t.indexOf(r,a);if(-1===h)return h;if(0===h||t.charCodeAt(h-1)<=32){const v=r.length;if(h+v===d||t.charCodeAt(h+v)<=32)return h}a=h+1}}function bu(t,r,a){let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const v=a[d++],C=a[d++],x=a[d++];t.setAttribute(r,C,x,v)}else{const v=h,C=a[++d];Yu(v)?t.setProperty(r,v,C):t.setAttribute(r,v,C),d++}}return d}function Qu(t){return 3===t||4===t||6===t}function Yu(t){return 64===t.charCodeAt(0)}function Ar(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let a=-1;for(let d=0;d<r.length;d++){const h=r[d];"number"==typeof h?a=h:0===a||Zu(t,a,h,null,-1===a||2===a?r[++d]:null)}}return t}function Zu(t,r,a,d,h){let v=0,C=t.length;if(-1===r)C=-1;else for(;v<t.length;){const x=t[v++];if("number"==typeof x){if(x===r){C=-1;break}if(x>r){C=v-1;break}}}for(;v<t.length;){const x=t[v];if("number"==typeof x)break;if(x===a){if(null===d)return void(null!==h&&(t[v+1]=h));if(d===t[v+1])return void(t[v+2]=h)}v++,null!==d&&v++,null!==h&&v++}-1!==C&&(t.splice(C,0,r),v=C+1),t.splice(v++,0,a),null!==d&&t.splice(v++,0,d),null!==h&&t.splice(v++,0,h)}const gl="ng-template";function zl(t,r,a,d){let h=0;if(d){for(;h<r.length&&"string"==typeof r[h];h+=2)if("class"===r[h]&&-1!==Ji(r[h+1].toLowerCase(),a,0))return!0}else if(_n(t))return!1;if(h=r.indexOf(1,h),h>-1){let v;for(;++h<r.length&&"string"==typeof(v=r[h]);)if(v.toLowerCase()===a)return!0}return!1}function _n(t){return 4===t.type&&t.value!==gl}function Tu(t,r,a){return r===(4!==t.type||a?t.value:gl)}function ml(t,r,a){let d=4;const h=t.attrs,v=null!==h?function Nd(t){for(let r=0;r<t.length;r++)if(Qu(t[r]))return r;return t.length}(h):0;let C=!1;for(let x=0;x<r.length;x++){const N=r[x];if("number"!=typeof N){if(!C)if(4&d){if(d=2|1&d,""!==N&&!Tu(t,N,a)||""===N&&1===r.length){if(La(d))return!1;C=!0}}else if(8&d){if(null===h||!zl(t,h,N,a)){if(La(d))return!1;C=!0}}else{const q=r[++x],J=Od(N,h,_n(t),a);if(-1===J){if(La(d))return!1;C=!0;continue}if(""!==q){let fe;if(fe=J>v?"":h[J+1].toLowerCase(),2&d&&q!==fe){if(La(d))return!1;C=!0}}}}else{if(!C&&!La(d)&&!La(N))return!1;if(C&&La(N))continue;C=!1,d=N|1&d}}return La(d)||C}function La(t){return!(1&t)}function Od(t,r,a,d){if(null===r)return-1;let h=0;if(d||!a){let v=!1;for(;h<r.length;){const C=r[h];if(C===t)return h;if(3===C||6===C)v=!0;else{if(1===C||2===C){let x=r[++h];for(;"string"==typeof x;)x=r[++h];continue}if(4===C)break;if(0===C){h+=4;continue}}h+=v?1:2}return-1}return function Af(t,r){let a=t.indexOf(4);if(a>-1)for(a++;a<t.length;){const d=t[a];if("number"==typeof d)return-1;if(d===r)return a;a++}return-1}(r,t)}function _a(t,r,a=!1){for(let d=0;d<r.length;d++)if(ml(t,r[d],a))return!0;return!1}function _l(t,r){e:for(let a=0;a<r.length;a++){const d=r[a];if(t.length===d.length){for(let h=0;h<t.length;h++)if(t[h]!==d[h])continue e;return!0}}return!1}function Va(t,r){return t?":not("+r.trim()+")":r}function Xc(t){let r=t[0],a=1,d=2,h="",v=!1;for(;a<t.length;){let C=t[a];if("string"==typeof C)if(2&d){const x=t[++a];h+="["+C+(x.length>0?'="'+x+'"':"")+"]"}else 8&d?h+="."+C:4&d&&(h+=" "+C);else""!==h&&!La(C)&&(r+=Va(v,h),h=""),d=C,v=v||!La(d);a++}return""!==h&&(r+=Va(v,h)),r}function U(t){return ro(()=>{const r=va(t),a={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Zo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ma.Emulated,styles:t.styles||Fr,_:null,schemas:t.schemas||null,tView:null,id:""};xo(a);const d=t.dependencies;return a.directiveDefs=ya(d,!1),a.pipeDefs=ya(d,!0),a.id=function Gs(t){let r=0;const a=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const h of a)r=Math.imul(31,r)+h.charCodeAt(0)|0;return r+=2147483648,"c"+r}(a),a})}function M(t){return ke(t)||Bt(t)}function j(t){return null!==t}function X(t){return ro(()=>({type:t.type,bootstrap:t.bootstrap||Fr,declarations:t.declarations||Fr,imports:t.imports||Fr,exports:t.exports||Fr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function se(t,r){if(null==t)return hi;const a={};for(const d in t)if(t.hasOwnProperty(d)){const h=t[d];let v,C,x=Fa.None;Array.isArray(h)?(x=h[0],v=h[1],C=h[2]??v):(v=h,C=h),r?(a[v]=x!==Fa.None?[d,x]:d,r[v]=C):a[v]=d}return a}function Ie(t){return ro(()=>{const r=va(t);return xo(r),r})}function lt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function ke(t){return t[Yr]||null}function Bt(t){return t[Wc]||null}function hn(t){return t[ar]||null}function Mn(t){const r=ke(t)||Bt(t)||hn(t);return null!==r&&r.standalone}function Pn(t,r){const a=t[Ya]||null;if(!a&&!0===r)throw new Error(`Type ${Sr(t)} does not have '\u0275mod' property.`);return a}function va(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||hi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Fr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:se(t.inputs,r),outputs:se(t.outputs),debugInfo:null}}function xo(t){t.features?.forEach(r=>r(t))}function ya(t,r){if(!t)return null;const a=r?hn:M;return()=>("function"==typeof t?t():t).map(d=>a(d)).filter(j)}function $s(t){return{\u0275providers:t}}function Ea(...t){return{\u0275providers:vl(0,t),\u0275fromNgModule:!0}}function vl(t,...r){const a=[],d=new Set;let h;const v=C=>{a.push(C)};return ka(r,C=>{const x=C;ec(x,v,[],d)&&(h||=[],h.push(x))}),void 0!==h&&kd(h,v),a}function kd(t,r){for(let a=0;a<t.length;a++){const{ngModule:d,providers:h}=t[a];Wl(h,v=>{r(v,d)})}}function ec(t,r,a,d){if(!(t=On(t)))return!1;let h=null,v=As(t);const C=!v&&ke(t);if(v||C){if(C&&!C.standalone)return!1;h=t}else{const N=t.ngModule;if(v=As(N),!v)return!1;h=N}const x=d.has(h);if(C){if(x)return!1;if(d.add(h),C.dependencies){const N="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const q of N)ec(q,r,a,d)}}else{if(!v)return!1;{if(null!=v.imports&&!x){let q;d.add(h);try{ka(v.imports,J=>{ec(J,r,a,d)&&(q||=[],q.push(J))})}finally{}void 0!==q&&kd(q,r)}if(!x){const q=qi(h)||(()=>new h);r({provide:h,useFactory:q,deps:Fr},h),r({provide:$l,useValue:h,multi:!0},h),r({provide:cs,useValue:()=>Mi(h),multi:!0},h)}const N=v.providers;if(null!=N&&!x){const q=t;Wl(N,J=>{r(J,q)})}}}return h!==t&&void 0!==t.providers}function Wl(t,r){for(let a of t)Cc(a)&&(a=a.\u0275providers),Array.isArray(a)?Wl(a,r):r(a)}const Tf=Wr({provide:String,useValue:Wr});function Fd(t){return null!==t&&"object"==typeof t&&Tf in t}function Su(t){return"function"==typeof t}const Kl=new tr(""),Xl={},yl={};let Ih;function el(){return void 0===Ih&&(Ih=new Ic),Ih}class jo{}class Ac extends jo{get destroyed(){return this._destroyed}constructor(r,a,d,h){super(),this.parent=a,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,tc(r,C=>this.processProvider(C)),this.records.set(Xu,Yc(void 0,this)),h.has("environment")&&this.records.set(jo,Yc(void 0,this));const v=this.records.get(Kl);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get($l,Fr,re.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const r=ye(null);try{for(const d of this._ngOnDestroyHooks)d.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const d of a)d()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(r)}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const a=Yo(this),d=Ce(void 0);try{return r()}finally{Yo(a),Ce(d)}}get(r,a=gn,d=re.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Vn))return r[Vn](this);d=bs(d);const v=Yo(this),C=Ce(void 0);try{if(!(d&re.SkipSelf)){let N=this.records.get(r);if(void 0===N){const q=function Ld(t){return"function"==typeof t||"object"==typeof t&&t instanceof tr}(r)&&qr(r);N=q&&this.injectableDefInScope(q)?Yc(Ba(r),Xl):null,this.records.set(r,N)}if(null!=N)return this.hydrate(r,N)}return(d&re.Self?el():this.parent).get(r,a=d&re.Optional&&a===gn?null:a)}catch(x){if("NullInjectorError"===x.name){if((x[nr]=x[nr]||[]).unshift(Sr(r)),v)throw x;return function jl(t,r,a,d){const h=t[nr];throw r[Wi]&&h.unshift(r[Wi]),t.message=function Md(t,r,a,d=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let h=Sr(r);if(Array.isArray(r))h=r.map(Sr).join(" -> ");else if("object"==typeof r){let v=[];for(let C in r)if(r.hasOwnProperty(C)){let x=r[C];v.push(C+":"+("string"==typeof x?JSON.stringify(x):Sr(x)))}h=`{${v.join(", ")}}`}return`${a}${d?"("+d+")":""}[${h}]: ${t.replace(dr,"\n  ")}`}("\n"+t.message,h,a,d),t.ngTokenPath=h,t[nr]=null,t}(x,r,"R3InjectorError",this.source)}throw x}finally{Ce(C),Yo(v)}}resolveInjectorInitializers(){const r=ye(null),a=Yo(this),d=Ce(void 0);try{const v=this.get(cs,Fr,re.Self);for(const C of v)C()}finally{Yo(a),Ce(d),ye(r)}}toString(){const r=[],a=this.records;for(const d of a.keys())r.push(Sr(d));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new on(205,!1)}processProvider(r){let a=Su(r=On(r))?r:On(r&&r.provide);const d=function bh(t){return Fd(t)?Yc(void 0,t.useValue):Yc(Lr(t),Xl)}(r);if(!Su(r)&&!0===r.multi){let h=this.records.get(a);h||(h=Yc(void 0,Xl,!0),h.factory=()=>Ts(h.multi),this.records.set(a,h)),a=r,h.multi.push(r)}this.records.set(a,d)}hydrate(r,a){const d=ye(null);try{return a.value===Xl&&(a.value=yl,a.value=a.factory()),"object"==typeof a.value&&a.value&&function xf(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}finally{ye(d)}}injectableDefInScope(r){if(!r.providedIn)return!1;const a=On(r.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(r){const a=this._onDestroyHooks.indexOf(r);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Ba(t){const r=qr(t),a=null!==r?r.factory:qi(t);if(null!==a)return a;if(t instanceof tr)throw new on(204,!1);if(t instanceof Function)return function Ah(t){if(t.length>0)throw new on(204,!1);const a=function yn(t){return t&&(t[vu]||t[Rd])||null}(t);return null!==a?()=>a.factory(t):()=>new t}(t);throw new on(204,!1)}function Lr(t,r,a){let d;if(Su(t)){const h=On(t);return qi(h)||Ba(h)}if(Fd(t))d=()=>On(t.useValue);else if(function ql(t){return!(!t||!t.useFactory)}(t))d=()=>t.useFactory(...Ts(t.deps||[]));else if(function Ju(t){return!(!t||!t.useExisting)}(t))d=()=>Mi(On(t.useExisting));else{const h=On(t&&(t.useClass||t.provide));if(!function tl(t){return!!t.deps}(t))return qi(h)||Ba(h);d=()=>new h(...Ts(t.deps))}return d}function Yc(t,r,a=!1){return{factory:t,value:r,multi:a?[]:void 0}}function tc(t,r){for(const a of t)Array.isArray(a)?tc(a,r):a&&Cc(a)?tc(a.\u0275providers,r):r(a)}function bc(t,r){t instanceof Ac&&t.assertNotDestroyed();const d=Yo(t),h=Ce(void 0);try{return r()}finally{Yo(d),Ce(h)}}function Th(){return void 0!==ne()||null!=function os(){return Qo}()}const ji=0,qt=1,xn=2,vo=3,us=4,ls=5,ds=6,El=7,Ei=8,Pi=9,Ni=10,Jn=11,Zl=12,rc=13,wl=14,wi=15,nl=16,Jc=17,uo=18,Cl=19,Mf=20,Ss=21,Mu=22,ic=23,Nn=25,Ou=1,Tc=7,eu=9,lo=10;var Al=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Al||{});function So(t){return Array.isArray(t)&&"object"==typeof t[Ou]}function Ds(t){return Array.isArray(t)&&!0===t[Ou]}function zs(t){return!!(4&t.flags)}function tu(t){return t.componentOffset>-1}function Jl(t){return!(1&~t.flags)}function wa(t){return!!t.template}function xc(t){return!!(512&t[xn])}class ue{constructor(r,a,d){this.previousValue=r,this.currentValue=a,this.firstChange=d}isFirstChange(){return this.firstChange}}function He(t,r,a,d){null!==r?r.applyValueToInputSignal(r,d):t[a]=d}function it(){return Vt}function Vt(t){return t.type.prototype.ngOnChanges&&(t.setInput=bn),wn}function wn(){const t=fs(this),r=t?.current;if(r){const a=t.previous;if(a===hi)t.previous=r;else for(let d in r)a[d]=r[d];t.current=null,this.ngOnChanges(r)}}function bn(t,r,a,d,h){const v=this.declaredInputs[d],C=fs(t)||function nu(t,r){return t[_r]=r}(t,{previous:hi,current:null}),x=C.current||(C.current={}),N=C.previous,q=N[v];x[v]=new ue(q&&q.currentValue,a,N===hi),He(t,r,h,a)}it.ngInherit=!0;const _r="__ngSimpleChanges__";function fs(t){return t[_r]||null}const Ua=function(t,r,a){};function Rr(t){for(;Array.isArray(t);)t=t[ji];return t}function oc(t,r){return Rr(r[t])}function eo(t,r){return Rr(r[t.index])}function ru(t,r){return t.data[r]}function sc(t,r){return t[r]}function gr(t,r){const a=r[t];return So(a)?a:a[ji]}function kf(t){return!(128&~t[xn])}function ac(t,r){return null==r?null:t[r]}function Am(t){t[Jc]=0}function Nh(t){1024&t[xn]||(t[xn]|=1024,kf(t)&&rd(t))}function nd(t){return!!(9216&t[xn]||t[ic]?.dirty)}function Gp(t){t[Ni].changeDetectionScheduler?.notify(7),64&t[xn]&&(t[xn]|=1024),nd(t)&&rd(t)}function rd(t){t[Ni].changeDetectionScheduler?.notify(0);let r=Pu(t);for(;null!==r&&!(8192&r[xn])&&(r[xn]|=8192,kf(r));)r=Pu(r)}function Ho(t,r){if(!(256&~t[xn]))throw new on(911,!1);null===t[Ss]&&(t[Ss]=[]),t[Ss].push(r)}function Pu(t){const r=t[vo];return Ds(r)?r[vo]:r}const rr={lFrame:Rm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let kh=!1;function w0(){return rr.bindingsEnabled}function cc(){return null!==rr.skipHydrationRootTNode}function Dt(){return rr.lFrame.lView}function Vr(){return rr.lFrame.tView}function ft(t){return rr.lFrame.contextLView=t,t[Ei]}function Fh(t){return rr.lFrame.contextLView=null,t}function _e(){let t=id();for(;null!==t&&64===t.type;)t=t.parent;return t}function id(){return rr.lFrame.currentTNode}function Rs(t,r){const a=rr.lFrame;a.currentTNode=t,a.isParent=r}function fo(){return rr.lFrame.isParent}function Ol(){rr.lFrame.isParent=!1}function Lh(){return kh}function Vh(t){kh=t}function Ki(){const t=rr.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function ou(){return rr.lFrame.bindingIndex}function su(){return rr.lFrame.bindingIndex++}function au(t){const r=rr.lFrame,a=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,a}function Uh(t,r){const a=rr.lFrame;a.bindingIndex=a.bindingRootIndex=t,jh(r)}function jh(t){rr.lFrame.currentDirectiveIndex=t}function Hh(){return rr.lFrame.currentQueryIndex}function Uf(t){rr.lFrame.currentQueryIndex=t}function Sm(t){const r=t[qt];return 2===r.type?r.declTNode:1===r.type?t[ls]:null}function Xp(t,r,a){if(a&re.SkipSelf){let h=r,v=t;for(;!(h=h.parent,null!==h||a&re.Host||(h=Sm(v),null===h||(v=v[wl],10&h.type))););if(null===h)return!1;r=h,t=v}const d=rr.lFrame=Dm();return d.currentTNode=r,d.lView=t,!0}function Qp(t){const r=Dm(),a=t[qt];rr.lFrame=r,r.currentTNode=a.firstChild,r.lView=t,r.tView=a,r.contextLView=t,r.bindingIndex=a.bindingStartIndex,r.inI18n=!1}function Dm(){const t=rr.lFrame,r=null===t?null:t.child;return null===r?Rm(t):r}function Rm(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Mm(){const t=rr.lFrame;return rr.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Gh=Mm;function Yp(){const t=Mm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ws(){return rr.lFrame.selectedIndex}function ol(t){rr.lFrame.selectedIndex=t}function Hi(){const t=rr.lFrame;return ru(t.tView,t.selectedIndex)}let Jr=!0;function sd(){return Jr}function cu(t){Jr=t}function jf(t,r){for(let a=r.directiveStart,d=r.directiveEnd;a<d;a++){const v=t.data[a].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:x,ngAfterViewInit:N,ngAfterViewChecked:q,ngOnDestroy:J}=v;C&&(t.contentHooks??=[]).push(-a,C),x&&((t.contentHooks??=[]).push(a,x),(t.contentCheckHooks??=[]).push(a,x)),N&&(t.viewHooks??=[]).push(-a,N),q&&((t.viewHooks??=[]).push(a,q),(t.viewCheckHooks??=[]).push(a,q)),null!=J&&(t.destroyHooks??=[]).push(a,J)}}function zh(t,r,a){Nu(t,r,3,a)}function Wd(t,r,a,d){(3&t[xn])===a&&Nu(t,r,a,d)}function eg(t,r){let a=t[xn];(3&a)===r&&(a&=16383,a+=1,t[xn]=a)}function Nu(t,r,a,d){const v=d??-1,C=r.length-1;let x=0;for(let N=void 0!==d?65535&t[Jc]:0;N<C;N++)if("number"==typeof r[N+1]){if(x=r[N],null!=d&&x>=d)break}else r[N]<0&&(t[Jc]+=65536),(x<v||-1==v)&&(tg(t,a,r,N),t[Jc]=(4294901760&t[Jc])+N+2),N++}function Om(t,r){Ua(4,t,r);const a=ye(null);try{r.call(t)}finally{ye(a),Ua(5,t,r)}}function tg(t,r,a,d){const h=a[d]<0,v=a[d+1],x=t[h?-a[d]:a[d]];h?t[xn]>>14<t[Jc]>>16&&(3&t[xn])===r&&(t[xn]+=16384,Om(x,v)):Om(x,v)}const qd=-1;class ad{constructor(r,a,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=d}}function uu(t){return t!==qd}function cd(t){return 32767&t}function ud(t,r){let a=function ig(t){return t>>16}(t),d=r;for(;a>0;)d=d[wl],a--;return d}let og=!0;function Gf(t){const r=og;return og=t,r}const Lm=255,Wh=5;let $f=0;const Dc={};function Xd(t,r){const a=qh(t,r);if(-1!==a)return a;const d=r[qt];d.firstCreatePass&&(t.injectorIndex=r.length,zf(d.data,t),zf(r,null),zf(d.blueprint,null));const h=Wf(t,r),v=t.injectorIndex;if(uu(h)){const C=cd(h),x=ud(h,r),N=x[qt].data;for(let q=0;q<8;q++)r[v+q]=x[C+q]|N[C+q]}return r[v+8]=h,v}function zf(t,r){t.push(0,0,0,0,0,0,0,0,r)}function qh(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Wf(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let a=0,d=null,h=r;for(;null!==h;){if(d=Kf(h),null===d)return qd;if(a++,h=h[wl],-1!==d.injectorIndex)return d.injectorIndex|a<<16}return qd}function ag(t,r,a){!function sg(t,r,a){let d;"string"==typeof a?d=a.charCodeAt(0)||0:a.hasOwnProperty(Za)&&(d=a[Za]),null==d&&(d=a[Za]=$f++);const h=d&Lm;r.data[t+(h>>Wh)]|=1<<h}(t,r,a)}function Kh(t,r,a){if(a&re.Optional||void 0!==t)return t;F()}function Vm(t,r,a,d){if(a&re.Optional&&void 0===d&&(d=null),!(a&(re.Self|re.Host))){const h=t[Pi],v=Ce(void 0);try{return h?h.get(r,d,a&re.Optional):ut(r,d,a&re.Optional)}finally{Ce(v)}}return Kh(d,0,a)}function Xh(t,r,a,d=re.Default,h){if(null!==t){if(2048&r[xn]&&!(d&re.Self)){const C=function R0(t,r,a,d,h){let v=t,C=r;for(;null!==v&&null!==C&&2048&C[xn]&&!(512&C[xn]);){const x=qf(v,C,a,d|re.Self,Dc);if(x!==Dc)return x;let N=v.parent;if(!N){const q=C[Mf];if(q){const J=q.get(a,Dc,d);if(J!==Dc)return J}N=Kf(C),C=C[wl]}v=N}return h}(t,r,a,d,Dc);if(C!==Dc)return C}const v=qf(t,r,a,d,Dc);if(v!==Dc)return v}return Vm(r,a,d,h)}function qf(t,r,a,d,h){const v=function S0(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Za)?t[Za]:void 0;return"number"==typeof r?r>=0?r&Lm:D0:r}(a);if("function"==typeof v){if(!Xp(r,t,d))return d&re.Host?Kh(h,0,d):Vm(r,a,d,h);try{let C;if(C=v(d),null!=C||d&re.Optional)return C;F()}finally{Gh()}}else if("number"==typeof v){let C=null,x=qh(t,r),N=qd,q=d&re.Host?r[wi][ls]:null;for((-1===x||d&re.SkipSelf)&&(N=-1===x?Wf(t,r):r[x+8],N!==qd&&ug(d,!1)?(C=r[qt],x=cd(N),r=ud(N,r)):x=-1);-1!==x;){const J=r[qt];if(Yh(v,x,J.data)){const fe=cg(x,r,a,C,d,q);if(fe!==Dc)return fe}N=r[x+8],N!==qd&&ug(d,r[qt].data[x+8]===q)&&Yh(v,x,r)?(C=J,x=cd(N),r=ud(N,r)):x=-1}}return h}function cg(t,r,a,d,h,v){const C=r[qt],x=C.data[t+8],J=Qh(x,C,a,null==d?tu(x)&&og:d!=C&&!!(3&x.type),h&re.Host&&v===x);return null!==J?uc(r,C,J,x):Dc}function Qh(t,r,a,d,h){const v=t.providerIndexes,C=r.data,x=1048575&v,N=t.directiveStart,J=v>>20,xe=h?x+J:t.directiveEnd;for(let je=d?x:x+J;je<xe;je++){const rt=C[je];if(je<N&&a===rt||je>=N&&rt.type===a)return je}if(h){const je=C[N];if(je&&wa(je)&&je.type===a)return N}return null}function uc(t,r,a,d){let h=t[a];const v=r.data;if(function ng(t){return t instanceof ad}(h)){const C=h;C.resolving&&function Er(t,r){throw r&&r.join(" > "),new on(-200,t)}(function Dr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Kn(t)}(v[a]));const x=Gf(C.canSeeViewProviders);C.resolving=!0;const q=C.injectImpl?Ce(C.injectImpl):null;Xp(t,d,re.Default);try{h=t[a]=C.factory(void 0,v,t,d),r.firstCreatePass&&a>=d.directiveStart&&function Jp(t,r,a){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:v}=r.type.prototype;if(d){const C=Vt(r);(a.preOrderHooks??=[]).push(t,C),(a.preOrderCheckHooks??=[]).push(t,C)}h&&(a.preOrderHooks??=[]).push(0-t,h),v&&((a.preOrderHooks??=[]).push(t,v),(a.preOrderCheckHooks??=[]).push(t,v))}(a,v[a],r)}finally{null!==q&&Ce(q),Gf(x),C.resolving=!1,Gh()}}return h}function Yh(t,r,a){return!!(a[r+(t>>Wh)]&1<<t)}function ug(t,r){return!(t&re.Self||t&re.Host&&r)}class Do{constructor(r,a){this._tNode=r,this._lView=a}get(r,a,d){return Xh(this._tNode,this._lView,r,bs(d),a)}}function D0(){return new Do(_e(),Dt())}function Bm(t){return ro(()=>{const r=t.prototype.constructor,a=r[_i]||lg(r),d=Object.prototype;let h=Object.getPrototypeOf(t.prototype).constructor;for(;h&&h!==d;){const v=h[_i]||lg(h);if(v&&v!==a)return v;h=Object.getPrototypeOf(h)}return v=>new v})}function lg(t){return Cs(t)?()=>{const r=lg(On(t));return r&&r()}:qi(t)}function Kf(t){const r=t[qt],a=r.type;return 2===a?r.declTNode:1===a?t[ls]:null}function si(t){return function x0(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const a=t.attrs;if(a){const d=a.length;let h=0;for(;h<d;){const v=a[h];if(Qu(v))break;if(0===v)h+=2;else if("number"==typeof v)for(h++;h<d&&"string"==typeof a[h];)h++;else{if(v===r)return a[h+1];h+=2}}}return null}(_e(),t)}function dg(t,r=null,a=null,d){const h=fg(t,r,a,d);return h.resolveInjectorInitializers(),h}function fg(t,r=null,a=null,d,h=new Set){const v=[a||Fr,Ea(t)];return d=d||("object"==typeof t?void 0:Sr(t)),new Ac(v,r||el(),d||null,h)}class Ms{static#e=this.THROW_IF_NOT_FOUND=gn;static#t=this.NULL=new Ic;static create(r,a){if(Array.isArray(r))return dg({name:""},a,r,"");{const d=r.name??"";return dg({name:d},r.parent,r.providers,d)}}static#n=this.\u0275prov=Tn({token:Ms,providedIn:"any",factory:()=>Mi(Xu)});static#r=this.__NG_ELEMENT_ID__=-1}new tr("").__NG_ELEMENT_ID__=t=>{const r=_e();if(null===r)throw new on(204,!1);if(2&r.type)return r.value;if(t&re.Optional)return null;throw new on(204,!1)};function hg(t){return t.ngOriginalError}class ku{constructor(){this._console=console}handleError(r){const a=this._findOriginalError(r);this._console.error("ERROR",r),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(r){let a=r&&hg(r);for(;a&&hg(a);)a=hg(a);return a||null}}const pg=new tr("",{providedIn:"root",factory:()=>En(ku).handleError.bind(void 0)});let Cr=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=gg;static#t=this.__NG_ENV_ID__=a=>a}return t})();class O0 extends Cr{constructor(r){super(),this._lView=r}onDestroy(r){return Ho(this._lView,r),()=>function Ff(t,r){if(null===t[Ss])return;const a=t[Ss].indexOf(r);-1!==a&&t[Ss].splice(a,1)}(this._lView,r)}}function gg(){return new O0(Dt())}function Mr(){return pd(_e(),Dt())}function pd(t,r){return new Jd(eo(t,r))}let Jd=(()=>{class t{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=Mr}return t})();function Ci(t){return t instanceof Jd?t.nativeElement:t}function Jo(t){return r=>{setTimeout(t,void 0,r)}}const Ii=class N0 extends no.B{constructor(r=!1){super(),this.destroyRef=void 0,this.__isAsync=r,Th()&&(this.destroyRef=En(Cr,{optional:!0})??void 0)}emit(r){const a=ye(null);try{super.next(r)}finally{ye(a)}}subscribe(r,a,d){let h=r,v=a||(()=>null),C=d;if(r&&"object"==typeof r){const N=r;h=N.next?.bind(N),v=N.error?.bind(N),C=N.complete?.bind(N)}this.__isAsync&&(v=Jo(v),h&&(h=Jo(h)),C&&(C=Jo(C)));const x=super.subscribe({next:h,error:v,complete:C});return r instanceof mr.yU&&r.add(x),x}};function Fu(){return this._results[Symbol.iterator]()}class np{static#e=Symbol.iterator;get changes(){return this._changes??=new Ii}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const a=np.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Fu)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,a){return this._results.reduce(r,a)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,a){this.dirty=!1;const d=function dn(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function qu(t,r,a){if(t.length!==r.length)return!1;for(let d=0;d<t.length;d++){let h=t[d],v=r[d];if(a&&(h=a(h),v=a(v)),v!==h)return!1}return!0}(this._results,d,a))&&(this._results=d,this.length=d.length,this.last=d[this.length-1],this.first=d[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(r){this._onDirty=r}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function ip(t){return!(128&~t.flags)}const Wm=new Map;let s1=0;const yg="__ngContext__";function Ca(t,r){So(r)?(t[yg]=r[Cl],function cE(t){Wm.set(t[Cl],t)}(r)):t[yg]=r}function wg(t){return Jf(t[Zl])}function Cg(t){return Jf(t[us])}function Jf(t){for(;null!==t&&!Ds(t);)t=t[us];return t}let Ag;function ap(t){Ag=t}const ei=new tr("",{providedIn:"root",factory:()=>rf}),rf="ng",Jm=new tr(""),sf=new tr("",{providedIn:"platform",factory:()=>"unknown"}),th=new tr("",{providedIn:"root",factory:()=>function fu(){if(void 0!==Ag)return Ag;if(typeof document<"u")return document;throw new on(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let xg=()=>null;function Sg(t,r,a=!1){return xg(t,r,a)}const K0=new tr("",{providedIn:"root",factory:()=>!1});let c_;function d_(t){return function u_(){if(void 0===c_&&(c_=null,xr.trustedTypes))try{c_=xr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return c_}()?.createScriptURL(t)||t}class Q0{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Bc})`}}function Xs(t){return t instanceof Q0?t.changingThisBreaksApplicationSecurity:t}function mp(t,r){const a=function lE(t){return t instanceof Q0&&t.getTypeName()||null}(t);if(null!=a&&a!==r){if("ResourceURL"===a&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${a} (see ${Bc})`)}return a===r}const pE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var lf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(lf||{});function df(t){const r=Ep();return r?r.sanitize(lf.URL,t)||"":mp(t,"URL")?Xs(t):function Pc(t){return(t=String(t)).match(pE)?t:"unsafe:"+t}(Kn(t))}function Fg(t){const r=Ep();if(r)return d_(r.sanitize(lf.RESOURCE_URL,t)||"");if(mp(t,"ResourceURL"))return d_(Xs(t));throw new on(904,!1)}function I_(t,r,a){return function C_(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Fg:df}(r,a)(t)}function Ep(){const t=Dt();return t&&t[Ni].sanitizer}const nv=/^>|^->|<!--|-->|--!>|<!-$/g,I1=/(<|>)/g,A1="\u200b$1\u200b";function l(t){return t.ownerDocument.defaultView}function g(t){return t.ownerDocument}function b(t){return t instanceof Function?t():t}var Ye=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ye||{});let st;function Nt(t,r){return st(t,r)}function Qt(t,r,a,d,h){if(null!=d){let v,C=!1;Ds(d)?v=d:So(d)&&(C=!0,d=d[ji]);const x=Rr(d);0===t&&null!==a?null==h?P1(r,a,x):Cp(r,a,x,h||null,!0):1===t&&null!==a?Cp(r,a,x,h||null,!0):2===t?function Bg(t,r,a){const d=sv(t,r);d&&function CC(t,r,a,d){t.removeChild(r,a,d)}(t,d,r,a)}(r,x,C):3===t&&r.destroyNode(x),null!=v&&function _(t,r,a,d,h){const v=a[Tc];v!==Rr(a)&&Qt(r,t,d,v,h);for(let x=lo;x<a.length;x++){const N=a[x];o(N[qt],N,t,r,d,v)}}(r,t,v,a,h)}}function ir(t,r){return t.createComment(function rv(t){return t.replace(nv,r=>r.replace(I1,A1))}(r))}function Eo(t,r,a){return t.createElement(r,a)}function Nc(t,r){r[Ni].changeDetectionScheduler?.notify(8),o(t,r,r[Jn],2,null,null)}function Vg(t,r){const a=t[eu],d=r[vo];(So(d)||r[wi]!==d[vo][wi])&&(t[xn]|=Al.HasTransplantedViews),null===a?t[eu]=[r]:a.push(r)}function wp(t,r){const a=t[eu],d=a.indexOf(r);a.splice(d,1)}function x_(t,r){if(t.length<=lo)return;const a=lo+r,d=t[a];if(d){const h=d[nl];null!==h&&h!==t&&wp(h,d),r>0&&(t[a-1][us]=d[us]);const v=pl(t,lo+r);!function ai(t,r){Nc(t,r),r[ji]=null,r[ls]=null}(d[qt],d);const C=v[uo];null!==C&&C.detachView(v[qt]),d[vo]=null,d[us]=null,d[xn]&=-129}return d}function ov(t,r){if(!(256&r[xn])){const a=r[Jn];a.destroyNode&&o(t,r,a,3,null,null),function Ed(t){let r=t[Zl];if(!r)return M1(t[qt],t);for(;r;){let a=null;if(So(r))a=r[Zl];else{const d=r[lo];d&&(a=d)}if(!a){for(;r&&!r[us]&&r!==t;)So(r)&&M1(r[qt],r),r=r[vo];null===r&&(r=t),So(r)&&M1(r[qt],r),a=r&&r[us]}r=a}}(r)}}function M1(t,r){if(256&r[xn])return;const a=ye(null);try{r[xn]&=-129,r[xn]|=256,r[ic]&&function cr(t){if(kt(t),dt(t))for(let r=0;r<t.producerNode.length;r++)wt(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(r[ic]),function wC(t,r){let a;if(null!=t&&null!=(a=t.destroyHooks))for(let d=0;d<a.length;d+=2){const h=r[a[d]];if(!(h instanceof ad)){const v=a[d+1];if(Array.isArray(v))for(let C=0;C<v.length;C+=2){const x=h[v[C]],N=v[C+1];Ua(4,x,N);try{N.call(x)}finally{Ua(5,x,N)}}else{Ua(4,h,v);try{v.call(h)}finally{Ua(5,h,v)}}}}}(t,r),function EC(t,r){const a=t.cleanup,d=r[El];if(null!==a)for(let v=0;v<a.length-1;v+=2)if("string"==typeof a[v]){const C=a[v+3];C>=0?d[C]():d[-C].unsubscribe(),v+=2}else a[v].call(d[a[v+1]]);null!==d&&(r[El]=null);const h=r[Ss];if(null!==h){r[Ss]=null;for(let v=0;v<h.length;v++)(0,h[v])()}}(t,r),1===r[qt].type&&r[Jn].destroy();const d=r[nl];if(null!==d&&Ds(r[vo])){d!==r[vo]&&wp(d,r);const h=r[uo];null!==h&&h.detachView(t)}!function Ro(t){Wm.delete(t[Cl])}(r)}finally{ye(a)}}function O1(t,r,a){return function CE(t,r,a){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return a[ji];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:v}=t.data[d.directiveStart+h];if(v===ma.None||v===ma.Emulated)return null}return eo(d,a)}}(t,r.parent,a)}function Cp(t,r,a,d,h){t.insertBefore(r,a,d,h)}function P1(t,r,a){t.appendChild(r,a)}function IE(t,r,a,d,h){null!==d?Cp(t,r,a,d,h):P1(t,r,a)}function sv(t,r){return t.parentNode(r)}function AE(t,r,a){return TE(t,r,a)}let N1,TE=function bE(t,r,a){return 40&t.type?eo(t,a):null};function av(t,r,a,d){const h=O1(t,d,r),v=r[Jn],x=AE(d.parent||r[ls],d,r);if(null!=h)if(Array.isArray(a))for(let N=0;N<a.length;N++)IE(v,h,a[N],x,!1);else IE(v,h,a,x,!1);void 0!==N1&&N1(v,d,r,a,h)}function S_(t,r){if(null!==r){const a=r.type;if(3&a)return eo(r,t);if(4&a)return F1(-1,t[r.index]);if(8&a){const d=r.child;if(null!==d)return S_(t,d);{const h=t[r.index];return Ds(h)?F1(-1,h):Rr(h)}}if(32&a)return Nt(r,t)()||Rr(t[r.index]);{const d=k1(t,r);return null!==d?Array.isArray(d)?d[0]:S_(Pu(t[wi]),d):S_(t,r.next)}}return null}function k1(t,r){return null!==r?t[wi][ls].projection[r.projection]:null}function F1(t,r){const a=lo+t+1;if(a<r.length){const d=r[a],h=d[qt].firstChild;if(null!==h)return S_(d,h)}return r[Tc]}function p(t,r,a,d,h,v,C){for(;null!=a;){const x=d[a.index],N=a.type;if(C&&0===r&&(x&&Ca(Rr(x),d),a.flags|=2),32&~a.flags)if(8&N)p(t,r,a.child,d,h,v,!1),Qt(r,t,h,x,v);else if(32&N){const q=Nt(a,d);let J;for(;J=q();)Qt(r,t,h,J,v);Qt(r,t,h,x,v)}else 16&N?f(t,r,d,a,h,v):Qt(r,t,h,x,v);a=C?a.projectionNext:a.next}}function o(t,r,a,d,h,v){p(a,d,t.firstChild,r,h,v,!1)}function f(t,r,a,d,h,v){const C=a[wi],N=C[ls].projection[d.projection];if(Array.isArray(N))for(let q=0;q<N.length;q++)Qt(r,t,h,N[q],v);else{let q=N;const J=C[vo];ip(d)&&(q.flags|=128),p(t,r,q,J,h,v,!0)}}function L(t,r,a){""===a?t.removeAttribute(r,"class"):t.setAttribute(r,"class",a)}function G(t,r,a){const{mergedAttrs:d,classes:h,styles:v}=a;null!==d&&bu(t,r,d),null!==h&&L(t,r,h),null!==v&&function T(t,r,a){t.setAttribute(r,"style",a)}(t,r,v)}const Q={};function ce(t=1){we(Vr(),Dt(),Ws()+t,!1)}function we(t,r,a,d){if(!d)if(3&~r[xn]){const v=t.preOrderHooks;null!==v&&Wd(r,v,0,a)}else{const v=t.preOrderCheckHooks;null!==v&&zh(r,v,a)}ol(a)}function Fe(t,r=re.Default){const a=Dt();return null===a?Mi(t,r):Xh(_e(),a,On(t),r)}function pt(){throw new Error("invalid")}function Lt(t,r,a,d,h,v){const C=ye(null);try{let x=null;h&Fa.SignalBased&&(x=r[d][nt]),null!==x&&void 0!==x.transformFn&&(v=x.transformFn(v)),h&Fa.HasDecoratorInputTransform&&(v=t.inputTransforms[d].call(r,v)),null!==t.setInput?t.setInput(r,x,v,a,d):He(r,x,d,v)}finally{ye(C)}}function jt(t,r,a,d,h,v,C,x,N,q,J){const fe=r.blueprint.slice();return fe[ji]=h,fe[xn]=204|d,(null!==q||t&&2048&t[xn])&&(fe[xn]|=2048),Am(fe),fe[vo]=fe[wl]=t,fe[Ei]=a,fe[Ni]=C||t&&t[Ni],fe[Jn]=x||t&&t[Jn],fe[Pi]=N||t&&t[Pi]||null,fe[ls]=v,fe[Cl]=function Xi(){return s1++}(),fe[ds]=J,fe[Mf]=q,fe[wi]=2==r.type?t[wi]:fe,fe}function Sn(t,r,a,d,h){let v=t.data[r];if(null===v)v=function zn(t,r,a,d,h){const v=id(),C=fo(),N=t.data[r]=function jg(t,r,a,d,h,v){let C=r?r.injectorIndex:-1,x=0;return cc()&&(x|=128),{type:a,index:d,insertBeforeIndex:null,injectorIndex:C,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:x,providerIndexes:0,value:h,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?v:v&&v.parent,a,r,d,h);return null===t.firstChild&&(t.firstChild=N),null!==v&&(C?null==v.child&&null!==N.parent&&(v.child=N):null===v.next&&(v.next=N,N.prev=v)),N}(t,r,a,d,h),function qp(){return rr.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=a,v.value=d,v.attrs=h;const C=function Sc(){const t=rr.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();v.injectorIndex=null===C?-1:C.injectorIndex}return Rs(v,!0),v}function Fn(t,r,a,d){if(0===a)return-1;const h=r.length;for(let v=0;v<a;v++)r.push(d),t.blueprint.push(d),t.data.push(null);return h}function vr(t,r,a,d,h){const v=Ws(),C=2&d;try{ol(-1),C&&r.length>Nn&&we(t,r,Nn,!1),Ua(C?2:0,h),a(d,h)}finally{ol(v),Ua(C?3:1,h)}}function ci(t,r,a){if(zs(r)){const d=ye(null);try{const v=r.directiveEnd;for(let C=r.directiveStart;C<v;C++){const x=t.data[C];x.contentQueries&&x.contentQueries(1,a[C],C)}}finally{ye(d)}}}function Or(t,r,a){w0()&&(function M_(t,r,a,d){const h=a.directiveStart,v=a.directiveEnd;tu(a)&&function U1(t,r,a){const d=eo(r,t),h=Me(a);let C=16;a.signals?C=4096:a.onPush&&(C=64);const x=bp(t,jt(t,h,null,C,d,r,null,t[Ni].rendererFactory.createRenderer(d,a),null,null,null));t[r.index]=x}(r,a,t.data[h+a.componentOffset]),t.firstCreatePass||Xd(a,r),Ca(d,r);const C=a.initialInputs;for(let x=h;x<v;x++){const N=t.data[x],q=uc(r,t,x,a);Ca(q,r),null!==C&&j1(0,x-h,q,N,0,C),wa(N)&&(gr(a.index,r)[Ei]=uc(r,t,x,a))}}(t,r,a,eo(a,r)),!(64&~a.flags)&&Hg(t,r,a))}function Ze(t,r,a=eo){const d=r.localNames;if(null!==d){let h=r.index+1;for(let v=0;v<d.length;v+=2){const C=d[v+1],x=-1===C?a(r,t):t[C];t[h++]=x}}}function Me(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Ge(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Ge(t,r,a,d,h,v,C,x,N,q,J){const fe=Nn+d,xe=fe+h,je=function et(t,r){const a=[];for(let d=0;d<r;d++)a.push(d<t?null:Q);return a}(fe,xe),rt="function"==typeof q?q():q;return je[qt]={type:t,blueprint:je,template:a,queries:null,viewQuery:x,declTNode:r,data:je.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:xe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:N,consts:rt,incompleteFirstPass:!1,ssrId:J}}let Be=()=>null;function Ip(t,r,a,d,h){for(let v in r){if(!r.hasOwnProperty(v))continue;const C=r[v];if(void 0===C)continue;d??={};let x,N=Fa.None;Array.isArray(C)?(x=C[0],N=C[1]):x=C;let q=v;if(null!==h){if(!h.hasOwnProperty(v))continue;q=h[v]}0===t?D_(d,a,q,x,N):D_(d,a,q,x)}return d}function D_(t,r,a,d,h){let v;t.hasOwnProperty(a)?(v=t[a]).push(r,d):v=t[a]=[r,d],void 0!==h&&v.push(h)}function gs(t,r,a,d,h,v,C,x){const N=eo(r,a);let J,q=r.inputs;!x&&null!=q&&(J=q[d])?(mh(t,a,J,d,h),tu(r)&&function ja(t,r){const a=gr(r,t);16&a[xn]||(a[xn]|=64)}(a,r.index)):3&r.type&&(d=function RE(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(d),h=null!=C?C(h,r.value||"",d):h,v.setProperty(N,d,h))}function cv(t,r,a,d){if(w0()){const h=null===d?null:{"":-1},v=function lv(t,r){const a=t.directiveRegistry;let d=null,h=null;if(a)for(let v=0;v<a.length;v++){const C=a[v];if(_a(r,C.selectors,!1))if(d||(d=[]),wa(C))if(null!==C.findHostDirectiveDefs){const x=[];h=h||new Map,C.findHostDirectiveDefs(C,x,h),d.unshift(...x,C),Gg(t,r,x.length)}else d.unshift(C),Gg(t,r,0);else h=h||new Map,C.findHostDirectiveDefs?.(C,d,h),d.push(C)}return null===d?null:[d,h]}(t,a);let C,x;null===v?C=x=null:[C,x]=v,null!==C&&Ap(t,r,a,C,h,x),h&&function dv(t,r,a){if(r){const d=t.localNames=[];for(let h=0;h<r.length;h+=2){const v=a[r[h+1]];if(null==v)throw new on(-301,!1);d.push(r[h],v)}}}(a,d,h)}a.mergedAttrs=Ar(a.mergedAttrs,a.attrs)}function Ap(t,r,a,d,h,v){for(let q=0;q<d.length;q++)ag(Xd(a,r),t,d[q].type);!function B1(t,r,a){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+a,t.providerIndexes=r}(a,t.data.length,d.length);for(let q=0;q<d.length;q++){const J=d[q];J.providersResolver&&J.providersResolver(J)}let C=!1,x=!1,N=Fn(t,r,d.length,null);for(let q=0;q<d.length;q++){const J=d[q];a.mergedAttrs=Ar(a.mergedAttrs,J.hostAttrs),NE(t,a,r,N,J),V1(N,J,h),null!==J.contentQueries&&(a.flags|=4),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(a.flags|=64);const fe=J.type.prototype;!C&&(fe.ngOnChanges||fe.ngOnInit||fe.ngDoCheck)&&((t.preOrderHooks??=[]).push(a.index),C=!0),!x&&(fe.ngOnChanges||fe.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(a.index),x=!0),N++}!function L1(t,r,a){const h=r.directiveEnd,v=t.data,C=r.attrs,x=[];let N=null,q=null;for(let J=r.directiveStart;J<h;J++){const fe=v[J],xe=a?a.get(fe):null,rt=xe?xe.outputs:null;N=Ip(0,fe.inputs,J,N,xe?xe.inputs:null),q=Ip(1,fe.outputs,J,q,rt);const Rt=null===N||null===C||_n(r)?null:kE(N,J,C);x.push(Rt)}null!==N&&(N.hasOwnProperty("class")&&(r.flags|=8),N.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=x,r.inputs=N,r.outputs=q}(t,a,v)}function Hg(t,r,a){const d=a.directiveStart,h=a.directiveEnd,v=a.index,C=function A0(){return rr.lFrame.currentDirectiveIndex}();try{ol(v);for(let x=d;x<h;x++){const N=t.data[x],q=r[x];jh(x),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&uv(N,q)}}finally{ol(-1),jh(C)}}function uv(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Gg(t,r,a){r.componentOffset=a,(t.components??=[]).push(r.index)}function V1(t,r,a){if(a){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)a[r.exportAs[d]]=t;wa(r)&&(a[""]=t)}}function NE(t,r,a,d,h){t.data[d]=h;const v=h.factory||(h.factory=qi(h.type)),C=new ad(v,wa(h),Fe);t.blueprint[d]=C,a[d]=C,function OE(t,r,a,d,h){const v=h.hostBindings;if(v){let C=t.hostBindingOpCodes;null===C&&(C=t.hostBindingOpCodes=[]);const x=~r.index;(function PE(t){let r=t.length;for(;r>0;){const a=t[--r];if("number"==typeof a&&a<0)return a}return 0})(C)!=x&&C.push(x),C.push(a,d,v)}}(t,r,d,Fn(t,a,h.hostVars,Q),h)}function ll(t,r,a,d,h,v){const C=eo(t,r);!function $g(t,r,a,d,h,v,C){if(null==v)t.removeAttribute(r,h,a);else{const x=null==C?Kn(v):C(v,d||"",h);t.setAttribute(r,h,x,a)}}(r[Jn],C,v,t.value,a,d,h)}function j1(t,r,a,d,h,v){const C=v[r];if(null!==C)for(let x=0;x<C.length;)Lt(d,a,C[x++],C[x++],C[x++],C[x++])}function kE(t,r,a){let d=null,h=0;for(;h<a.length;){const v=a[h];if(0!==v)if(5!==v){if("number"==typeof v)break;if(t.hasOwnProperty(v)){null===d&&(d=[]);const C=t[v];for(let x=0;x<C.length;x+=3)if(C[x]===r){d.push(v,C[x+1],C[x+2],a[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function O_(t,r,a,d){return[t,!0,0,r,null,d,null,a,null,null]}function P_(t,r){const a=t.contentQueries;if(null!==a){const d=ye(null);try{for(let h=0;h<a.length;h+=2){const C=a[h+1];if(-1!==C){const x=t.data[C];Uf(a[h]),x.contentQueries(2,r[C],C)}}}finally{ye(d)}}}function bp(t,r){return t[Zl]?t[rc][us]=r:t[Zl]=r,t[rc]=r,r}function oa(t,r,a){Uf(0);const d=ye(null);try{r(t,a)}finally{ye(d)}}function zg(t){return t[El]??=[]}function fv(t){return t.cleanup??=[]}function N_(t,r){const a=t[Pi],d=a?a.get(ku,null):null;d&&d.handleError(r)}function mh(t,r,a,d,h){for(let v=0;v<a.length;){const C=a[v++],x=a[v++],N=a[v++];Lt(t.data[C],r[C],d,x,N,h)}}function Fl(t,r,a){const d=oc(r,t);!function er(t,r,a){t.setValue(r,a)}(t[Jn],d,a)}function H1(t,r){const a=gr(r,t),d=a[qt];!function pv(t,r){for(let a=r.length;a<t.blueprint.length;a++)r.push(t.blueprint[a])}(d,a);const h=a[ji];null!==h&&null===a[ds]&&(a[ds]=Sg(h,a[Pi])),gv(d,a,a[Ei])}function gv(t,r,a){Qp(r);try{const d=t.viewQuery;null!==d&&oa(1,d,a);const h=t.template;null!==h&&vr(t,r,h,1,a),t.firstCreatePass&&(t.firstCreatePass=!1),r[uo]?.finishViewCreation(t),t.staticContentQueries&&P_(t,r),t.staticViewQueries&&oa(2,t.viewQuery,a);const v=t.components;null!==v&&function FE(t,r){for(let a=0;a<r.length;a++)H1(t,r[a])}(r,v)}catch(d){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),d}finally{r[xn]&=-5,Yp()}}function ff(t,r,a,d){const h=ye(null);try{const v=r.tView,N=jt(t,v,a,4096&t[xn]?4096:16,null,r,null,null,d?.injector??null,d?.embeddedViewInjector??null,d?.dehydratedView??null);N[nl]=t[r.index];const J=t[uo];return null!==J&&(N[uo]=J.createEmbeddedView(v)),gv(v,N,a),N}finally{ye(h)}}function mv(t,r){const a=lo+r;if(a<t.length)return t[a]}function hf(t,r){return!r||null===r.firstChild||ip(t)}function Ll(t,r,a,d=!0){const h=r[qt];if(function T_(t,r,a,d){const h=lo+d,v=a.length;d>0&&(a[h-1][us]=r),d<v-lo?(r[us]=a[h],Zi(a,lo+d,r)):(a.push(r),r[us]=null),r[vo]=a;const C=r[nl];null!==C&&a!==C&&Vg(C,r);const x=r[uo];null!==x&&x.insertView(t),Gp(r),r[xn]|=128}(h,r,t,a),d){const C=F1(a,t),x=r[Jn],N=sv(x,t[Tc]);null!==N&&function Oo(t,r,a,d,h,v){d[ji]=h,d[ls]=r,o(t,d,a,1,h,v)}(h,t[ls],x,r,N,C)}const v=r[ds];null!==v&&null!==v.firstChild&&(v.firstChild=null)}function Wg(t,r){const a=x_(t,r);return void 0!==a&&ov(a[qt],a),a}function _h(t,r,a,d,h=!1){for(;null!==a;){const v=r[a.index];null!==v&&d.push(Rr(v)),Ds(v)&&pf(v,d);const C=a.type;if(8&C)_h(t,r,a.child,d);else if(32&C){const x=Nt(a,r);let N;for(;N=x();)d.push(N)}else if(16&C){const x=k1(r,a);if(Array.isArray(x))d.push(...x);else{const N=Pu(r[wi]);_h(N[qt],N,x,d,!0)}}a=h?a.projectionNext:a.next}return d}function pf(t,r){for(let a=lo;a<t.length;a++){const d=t[a],h=d[qt].firstChild;null!==h&&_h(d[qt],d,h,r)}t[Tc]!==t[ji]&&r.push(t[Tc])}let _v=[];const $1={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{rd(t.lView)},consumerOnSignalRead(){this.lView[ic]=this}},dc=100;function Kg(t,r=!0,a=0){const d=t[Ni],h=d.rendererFactory;h.begin?.();try{!function Xg(t,r){const a=Lh();try{Vh(!0),F_(t,r);let d=0;for(;nd(t);){if(d===dc)throw new on(103,!1);d++,F_(t,1)}}finally{Vh(a)}}(t,a)}catch(C){throw r&&N_(t,C),C}finally{h.end?.(),d.inlineEffectRunner?.flush()}}function LE(t,r,a,d){const h=r[xn];if(!(256&~h))return;r[Ni].inlineEffectRunner?.flush(),Qp(r);let x=null,N=null;(function VE(t){return 2!==t.type})(t)&&(N=function k_(t){return t[ic]??function G1(t){const r=_v.pop()??Object.create($1);return r.lView=t,r}(t)}(r),x=function pn(t){return t&&(t.nextProducerIndex=0),ye(t)}(N));try{Am(r),function to(t){return rr.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==a&&vr(t,r,a,2,d);const q=!(3&~h);if(q){const xe=t.preOrderCheckHooks;null!==xe&&zh(r,xe,null)}else{const xe=t.preOrderHooks;null!==xe&&Wd(r,xe,0,null),eg(r,0)}if(function BE(t){for(let r=wg(t);null!==r;r=Cg(r)){if(!(r[xn]&Al.HasTransplantedViews))continue;const a=r[eu];for(let d=0;d<a.length;d++)Nh(a[d])}}(r),vh(r,0),null!==t.contentQueries&&P_(t,r),q){const xe=t.contentCheckHooks;null!==xe&&zh(r,xe)}else{const xe=t.contentHooks;null!==xe&&Wd(r,xe,1),eg(r,1)}!function en(t,r){const a=t.hostBindingOpCodes;if(null!==a)try{for(let d=0;d<a.length;d++){const h=a[d];if(h<0)ol(~h);else{const v=h,C=a[++d],x=a[++d];Uh(C,v),x(2,r[v])}}}finally{ol(-1)}}(t,r);const J=t.components;null!==J&&L_(r,J,0);const fe=t.viewQuery;if(null!==fe&&oa(2,fe,d),q){const xe=t.viewCheckHooks;null!==xe&&zh(r,xe)}else{const xe=t.viewHooks;null!==xe&&Wd(r,xe,2),eg(r,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[Mu]){for(const xe of r[Mu])xe();r[Mu]=null}r[xn]&=-73}catch(q){throw rd(r),q}finally{null!==N&&(function $t(t,r){if(ye(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(dt(t))for(let a=t.nextProducerIndex;a<t.producerNode.length;a++)wt(t.producerNode[a],t.producerIndexOfThis[a]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(N,x),function qg(t){t.lView[ic]!==t&&(t.lView=null,_v.push(t))}(N)),Yp()}}function vh(t,r){for(let a=wg(t);null!==a;a=Cg(a))for(let d=lo;d<a.length;d++)Qg(a[d],r)}function UE(t,r,a){Qg(gr(r,t),a)}function Qg(t,r){kf(t)&&F_(t,r)}function F_(t,r){const d=t[qt],h=t[xn],v=t[ic];let C=!!(0===r&&16&h);if(C||=!!(64&h&&0===r),C||=!!(1024&h),C||=!(!v?.dirty||!Xn(v)),C||=!1,v&&(v.dirty=!1),t[xn]&=-9217,C)LE(d,t,d.template,t[Ei]);else if(8192&h){vh(t,1);const x=d.components;null!==x&&L_(t,x,1)}}function L_(t,r,a){for(let d=0;d<r.length;d++)UE(t,r[d],a)}function gf(t,r){const a=Lh()?64:1088;for(t[Ni].changeDetectionScheduler?.notify(r);t;){t[xn]|=a;const d=Pu(t);if(xc(t)&&!d)return t;t=d}return null}class Uu{get rootNodes(){const r=this._lView,a=r[qt];return _h(a,r,a.firstChild,[])}constructor(r,a,d=!0){this._lView=r,this._cdRefInjectingView=a,this.notifyErrorHandler=d,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ei]}set context(r){this._lView[Ei]=r}get destroyed(){return!(256&~this._lView[xn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[vo];if(Ds(r)){const a=r[8],d=a?a.indexOf(this):-1;d>-1&&(x_(r,d),pl(a,d))}this._attachedToViewContainer=!1}ov(this._lView[qt],this._lView)}onDestroy(r){Ho(this._lView,r)}markForCheck(){gf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[xn]&=-129}reattach(){Gp(this._lView),this._lView[xn]|=128}detectChanges(){this._lView[xn]|=1024,Kg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new on(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const r=xc(this._lView),a=this._lView[nl];null!==a&&!r&&wp(a,this._lView),Nc(this._lView[qt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new on(902,!1);this._appRef=r;const a=xc(this._lView),d=this._lView[nl];null!==d&&!a&&Vg(d,this._lView),Gp(this._lView)}}let xp=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yv}return t})();const z1=xp,vv=class extends z1{constructor(r,a,d){super(),this._declarationLView=r,this._declarationTContainer=a,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,a){return this.createEmbeddedViewImpl(r,a)}createEmbeddedViewImpl(r,a,d){const h=ff(this._declarationLView,this._declarationTContainer,r,{embeddedViewInjector:a,dehydratedView:d});return new Uu(h)}};function yv(){return Yg(_e(),Dt())}function Yg(t,r){return 4&t.type?new vv(r,t,pd(t,r)):null}let Rv=()=>null;function vf(t,r){return Rv(t,r)}class Td{}const Ia=new tr("",{providedIn:"root",factory:()=>!1}),Mv=new tr("");class Op{}class I{}class at{resolveComponentFactory(r){throw function $(t){const r=Error(`No component factory found for ${Sr(t)}.`);return r.ngComponent=t,r}(r)}}class Tt{static#e=this.NULL=new at}class fn{}let io=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Aa(){const t=Dt(),a=gr(_e().index,t);return(So(a)?a:t)[Jn]}()}return t})(),bi=(()=>{class t{static#e=this.\u0275prov=Tn({token:t,providedIn:"root",factory:()=>null})}return t})();const sa={},Ch=new Set;function $o(t){Ch.has(t)||(Ch.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function pm(t){let r=!0;return setTimeout(()=>{r&&(r=!1,t())}),"function"==typeof xr.requestAnimationFrame&&xr.requestAnimationFrame(()=>{r&&(r=!1,t())}),()=>{r=!1}}function K_(t){let r=!0;return queueMicrotask(()=>{r&&t()}),()=>{r=!1}}function bC(...t){}class zo{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ii(!1),this.onMicrotaskEmpty=new Ii(!1),this.onStable=new Ii(!1),this.onError=new Ii(!1),typeof Zone>"u")throw new on(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&a,h.shouldCoalesceRunChangeDetection=d,h.callbackScheduled=!1,function _x(t){const r=()=>{!function mx(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{pm(()=>{t.callbackScheduled=!1,WE(t),t.isCheckStableRunning=!0,zE(t),t.isCheckStableRunning=!1})}),WE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,d,h,v,C,x)=>{if(function vx(t){return SC(t,"__ignore_ng_zone__")}(x))return a.invokeTask(h,v,C,x);try{return TC(t),a.invokeTask(h,v,C,x)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||t.shouldCoalesceRunChangeDetection)&&r(),xC(t)}},onInvoke:(a,d,h,v,C,x,N)=>{try{return TC(t),a.invoke(h,v,C,x,N)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function yx(t){return SC(t,"__scheduler_tick__")}(x)&&r(),xC(t)}},onHasTask:(a,d,h,v)=>{a.hasTask(h,v),d===h&&("microTask"==v.change?(t._hasPendingMicrotasks=v.microTask,WE(t),zE(t)):"macroTask"==v.change&&(t.hasPendingMacrotasks=v.macroTask))},onHandleError:(a,d,h,v)=>(a.handleError(h,v),t.runOutsideAngular(()=>t.onError.emit(v)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zo.isInAngularZone())throw new on(909,!1)}static assertNotInAngularZone(){if(zo.isInAngularZone())throw new on(909,!1)}run(r,a,d){return this._inner.run(r,a,d)}runTask(r,a,d,h){const v=this._inner,C=v.scheduleEventTask("NgZoneEvent: "+h,r,gx,bC,bC);try{return v.runTask(C,a,d)}finally{v.cancelTask(C)}}runGuarded(r,a,d){return this._inner.runGuarded(r,a,d)}runOutsideAngular(r){return this._outer.run(r)}}const gx={};function zE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function WE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function TC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xC(t){t._nesting--,zE(t)}class qE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ii,this.onMicrotaskEmpty=new Ii,this.onStable=new Ii,this.onError=new Ii}run(r,a,d){return r.apply(a,d)}runGuarded(r,a,d){return r.apply(a,d)}runOutsideAngular(r){return r()}runTask(r,a,d,h){return r.apply(a,d)}}function SC(t,r){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[r]}var gm=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(gm||{});const DC={destroy(){}};function RC(t,r){!r&&function nc(t){if(!Th())throw new on(-203,!1)}();const a=r?.injector??En(Ms);if(!function P(t){return"browser"===(t??En(Ms)).get(sf)}(a))return DC;$o("NgAfterNextRender");const d=a.get(Ov),h=d.handler??=new OC,v=r?.phase??gm.MixedReadWrite,C=()=>{h.unregister(N),x()},x=a.get(Cr).onDestroy(C),N=bc(a,()=>new MC(v,()=>{C(),t()}));return h.register(N),{destroy:C}}class MC{constructor(r,a){this.phase=r,this.callbackFn=a,this.zone=En(zo),this.errorHandler=En(ku,{optional:!0}),En(Td,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(r){this.errorHandler?.handleError(r)}}}class OC{constructor(){this.executingCallbacks=!1,this.buckets={[gm.EarlyRead]:new Set,[gm.Write]:new Set,[gm.MixedReadWrite]:new Set,[gm.Read]:new Set},this.deferredCallbacks=new Set}register(r){(this.executingCallbacks?this.deferredCallbacks:this.buckets[r.phase]).add(r)}unregister(r){this.buckets[r.phase].delete(r),this.deferredCallbacks.delete(r)}execute(){this.executingCallbacks=!0;for(const r of Object.values(this.buckets))for(const a of r)a.invoke();this.executingCallbacks=!1;for(const r of this.deferredCallbacks)this.buckets[r.phase].add(r);this.deferredCallbacks.clear()}destroy(){for(const r of Object.values(this.buckets))r.clear();this.deferredCallbacks.clear()}}let Ov=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const a=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const d of a)d()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Tn({token:t,providedIn:"root",factory:()=>new t})}return t})();function Pp(t){return!!Pn(t)}function Cy(t,r,a){let d=a?t.styles:null,h=a?t.classes:null,v=0;if(null!==r)for(let C=0;C<r.length;C++){const x=r[C];"number"==typeof x?v=x:1==v?h=is(h,x):2==v&&(d=is(d,x+": "+r[++C]+";"))}a?t.styles=d:t.stylesWithoutHost=d,a?t.classes=h:t.classesWithoutHost=h}class kC extends Tt{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const a=ke(r);return new kv(a,this.ngModule)}}function FC(t){const r=[];for(const a in t){if(!t.hasOwnProperty(a))continue;const d=t[a];void 0!==d&&r.push({propName:Array.isArray(d)?d[0]:d,templateName:a})}return r}class Iy{constructor(r,a){this.injector=r,this.parentInjector=a}get(r,a,d){d=bs(d);const h=this.injector.get(r,sa,d);return h!==sa||a===sa?h:this.parentInjector.get(r,a,d)}}class kv extends I{get inputs(){const r=this.componentDef,a=r.inputTransforms,d=FC(r.inputs);if(null!==a)for(const h of d)a.hasOwnProperty(h.propName)&&(h.transform=a[h.propName]);return d}get outputs(){return FC(this.componentDef.outputs)}constructor(r,a){super(),this.componentDef=r,this.ngModule=a,this.componentType=r.type,this.selector=function xu(t){return t.map(Xc).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!a}create(r,a,d,h){const v=ye(null);try{let C=(h=h||this.ngModule)instanceof jo?h:h?.injector;C&&null!==this.componentDef.getStandaloneInjector&&(C=this.componentDef.getStandaloneInjector(C)||C);const x=C?new Iy(r,C):r,N=x.get(fn,null);if(null===N)throw new on(407,!1);const q=x.get(bi,null),xe={rendererFactory:N,sanitizer:q,inlineEffectRunner:null,afterRenderEventManager:x.get(Ov,null),changeDetectionScheduler:x.get(Td,null)},je=N.createRenderer(null,this.componentDef),rt=this.componentDef.selectors[0][0]||"div",Rt=d?function ot(t,r,a,d){const v=d.get(K0,!1)||a===ma.ShadowDom,C=t.selectRootElement(r,v);return function yt(t){Be(t)}(C),C}(je,d,this.componentDef.encapsulation,x):Eo(je,rt,function Ax(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(rt));let Zt=512;this.componentDef.signals?Zt|=4096:this.componentDef.onPush||(Zt|=16);let cn=null;null!==Rt&&(cn=Sg(Rt,x,!0));const Ft=Ge(0,null,null,1,0,null,null,null,null,null,null),ur=jt(null,Ft,null,Zt,null,null,xe,je,x,null,cn);let Ti,ho;Qp(ur);try{const xa=this.componentDef;let Hu,y0=null;xa.findHostDirectiveDefs?(Hu=[],y0=new Map,xa.findHostDirectiveDefs(xa,Hu,y0),Hu.push(xa)):Hu=[xa];const hx=function Tx(t,r){const a=t[qt],d=Nn;return t[d]=r,Sn(a,d,2,"#host",null)}(ur,Rt),DO=function xx(t,r,a,d,h,v,C){const x=h[qt];!function Sx(t,r,a,d){for(const h of t)r.mergedAttrs=Ar(r.mergedAttrs,h.hostAttrs);null!==r.mergedAttrs&&(Cy(r,r.mergedAttrs,!0),null!==a&&G(d,a,r))}(d,t,r,C);let N=null;null!==r&&(N=Sg(r,h[Pi]));const q=v.rendererFactory.createRenderer(r,a);let J=16;a.signals?J=4096:a.onPush&&(J=64);const fe=jt(h,Me(a),null,J,h[t.index],t,v,q,null,null,N);return x.firstCreatePass&&Gg(x,t,d.length-1),bp(h,fe),h[t.index]=fe}(hx,Rt,xa,Hu,ur,xe,je);ho=ru(Ft,Nn),Rt&&function Rx(t,r,a,d){if(d)bu(t,a,["ng-version","18.0.2"]);else{const{attrs:h,classes:v}=function S(t){const r=[],a=[];let d=1,h=2;for(;d<t.length;){let v=t[d];if("string"==typeof v)2===h?""!==v&&r.push(v,t[++d]):8===h&&a.push(v);else{if(!La(h))break;h=v}d++}return{attrs:r,classes:a}}(r.selectors[0]);h&&bu(t,a,h),v&&v.length>0&&L(t,a,v.join(" "))}}(je,xa,Rt,d),void 0!==a&&function Mx(t,r,a){const d=t.projection=[];for(let h=0;h<r.length;h++){const v=a[h];d.push(null!=v?Array.from(v):null)}}(ho,this.ngContentSelectors,a),Ti=function Dx(t,r,a,d,h,v){const C=_e(),x=h[qt],N=eo(C,h);Ap(x,h,C,a,null,d);for(let J=0;J<a.length;J++)Ca(uc(h,x,C.directiveStart+J,C),h);Hg(x,h,C),N&&Ca(N,h);const q=uc(h,x,C.directiveStart+C.componentOffset,C);if(t[Ei]=h[Ei]=q,null!==v)for(const J of v)J(q,r);return ci(x,C,h),q}(DO,xa,Hu,y0,ur,[Ox]),gv(Ft,ur,null)}finally{Yp()}return new bx(this.componentType,Ti,pd(ho,ur),ur,ho)}finally{ye(v)}}}class bx extends Op{constructor(r,a,d,h,v){super(),this.location=d,this._rootLView=h,this._tNode=v,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new Uu(h,void 0,!1),this.componentType=r}setInput(r,a){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),a))return;const v=this._rootLView;mh(v[qt],v,h,r,a),this.previousInputValues.set(r,a),gf(gr(this._tNode.index,v),1)}}get injector(){return new Do(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Ox(){const t=_e();jf(Dt()[qt],t)}let Ay=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Px}return t})();function Px(){return BC(_e(),Dt())}const Nx=Ay,LC=class extends Nx{constructor(r,a,d){super(),this._lContainer=r,this._hostTNode=a,this._hostLView=d}get element(){return pd(this._hostTNode,this._hostLView)}get injector(){return new Do(this._hostTNode,this._hostLView)}get parentInjector(){const r=Wf(this._hostTNode,this._hostLView);if(uu(r)){const a=ud(r,this._hostLView),d=cd(r);return new Do(a[qt].data[d+8],a)}return new Do(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const a=VC(this._lContainer);return null!==a&&a[r]||null}get length(){return this._lContainer.length-lo}createEmbeddedView(r,a,d){let h,v;"number"==typeof d?h=d:null!=d&&(h=d.index,v=d.injector);const C=vf(this._lContainer,r.ssrId),x=r.createEmbeddedViewImpl(a||{},v,C);return this.insertImpl(x,h,hf(this._hostTNode,C)),x}createComponent(r,a,d,h,v){const C=r&&!function Zc(t){return"function"==typeof t}(r);let x;if(C)x=a;else{const rt=a||{};x=rt.index,d=rt.injector,h=rt.projectableNodes,v=rt.environmentInjector||rt.ngModuleRef}const N=C?r:new kv(ke(r)),q=d||this.parentInjector;if(!v&&null==N.ngModule){const Rt=(C?q:this.parentInjector).get(jo,null);Rt&&(v=Rt)}const J=ke(N.componentType??{}),fe=vf(this._lContainer,J?.id??null),je=N.create(q,h,fe?.firstChild??null,v);return this.insertImpl(je.hostView,x,hf(this._hostTNode,fe)),je}insert(r,a){return this.insertImpl(r,a,!0)}insertImpl(r,a,d){const h=r._lView;if(function Rl(t){return Ds(t[vo])}(h)){const x=this.indexOf(r);if(-1!==x)this.detach(x);else{const N=h[vo],q=new LC(N,N[ls],N[vo]);q.detach(q.indexOf(r))}}const v=this._adjustIndex(a),C=this._lContainer;return Ll(C,h,v,d),r.attachToViewContainerRef(),Zi(YE(C),v,r),r}move(r,a){return this.insert(r,a)}indexOf(r){const a=VC(this._lContainer);return null!==a?a.indexOf(r):-1}remove(r){const a=this._adjustIndex(r,-1),d=x_(this._lContainer,a);d&&(pl(YE(this._lContainer),a),ov(d[qt],d))}detach(r){const a=this._adjustIndex(r,-1),d=x_(this._lContainer,a);return d&&null!=pl(YE(this._lContainer),a)?new Uu(d):null}_adjustIndex(r,a=0){return r??this.length+a}};function VC(t){return t[8]}function YE(t){return t[8]||(t[8]=[])}function BC(t,r){let a;const d=r[t.index];return Ds(d)?a=d:(a=O_(d,r,null,t),r[t.index]=a,bp(r,a)),UC(a,r,t,d),new LC(a,t,r)}let UC=function HC(t,r,a,d){if(t[Tc])return;let h;h=8&a.type?Rr(d):function kx(t,r){const a=t[Jn],d=a.createComment(""),h=eo(r,t);return Cp(a,sv(a,h),d,function IC(t,r){return t.nextSibling(r)}(a,h),!1),d}(r,a),t[Tc]=h},ZE=()=>!1;class JE{constructor(r){this.queryList=r,this.matches=null}clone(){return new JE(this.queryList)}setDirty(){this.queryList.setDirty()}}class ew{constructor(r=[]){this.queries=r}createEmbeddedView(r){const a=r.queries;if(null!==a){const d=null!==r.contentQueries?r.contentQueries[0]:a.length,h=[];for(let v=0;v<d;v++){const C=a.getByIndex(v);h.push(this.queries[C.indexInDeclarationView].clone())}return new ew(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}finishViewCreation(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let a=0;a<this.queries.length;a++)null!==ow(r,a).matches&&this.queries[a].setDirty()}}class GC{constructor(r,a,d=null){this.flags=a,this.read=d,this.predicate="string"==typeof r?function Gx(t){return t.split(",").map(r=>r.trim())}(r):r}}class tw{constructor(r=[]){this.queries=r}elementStart(r,a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,a)}elementEnd(r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(r)}embeddedTView(r){let a=null;for(let d=0;d<this.length;d++){const h=null!==a?a.length:0,v=this.getByIndex(d).embeddedTView(r,h);v&&(v.indexInDeclarationView=d,null!==a?a.push(v):a=[v])}return null!==a?new tw(a):null}template(r,a){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,a)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class nw{constructor(r,a=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(r,a){this.isApplyingToNode(a)&&this.matchTNode(r,a)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,a){this.elementStart(r,a)}embeddedTView(r,a){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,a),new nw(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1&~this.metadata.flags){const a=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==a;)d=d.parent;return a===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,a){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const v=d[h];this.matchTNodeWithReadOption(r,a,Bx(a,v)),this.matchTNodeWithReadOption(r,a,Qh(a,r,v,!1,!1))}else d===xp?4&a.type&&this.matchTNodeWithReadOption(r,a,-1):this.matchTNodeWithReadOption(r,a,Qh(a,r,d,!1,!1))}matchTNodeWithReadOption(r,a,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Jd||h===Ay||h===xp&&4&a.type)this.addMatch(a.index,-2);else{const v=Qh(a,r,h,!1,!1);null!==v&&this.addMatch(a.index,v)}else this.addMatch(a.index,d)}}addMatch(r,a){null===this.matches?this.matches=[r,a]:this.matches.push(r,a)}}function Bx(t,r){const a=t.localNames;if(null!==a)for(let d=0;d<a.length;d+=2)if(a[d]===r)return a[d+1];return null}function jx(t,r,a,d){return-1===a?function Ux(t,r){return 11&t.type?pd(t,r):4&t.type?Yg(t,r):null}(r,t):-2===a?function Hx(t,r,a){return a===Jd?pd(r,t):a===xp?Yg(r,t):a===Ay?BC(r,t):void 0}(t,r,d):uc(t,t[qt],a,r)}function $C(t,r,a,d){const h=r[uo].queries[d];if(null===h.matches){const v=t.data,C=a.matches,x=[];for(let N=0;null!==C&&N<C.length;N+=2){const q=C[N];x.push(q<0?null:jx(r,v[q],C[N+1],a.metadata.read))}h.matches=x}return h.matches}function rw(t,r,a,d){const h=t.queries.getByIndex(a),v=h.matches;if(null!==v){const C=$C(t,r,h,a);for(let x=0;x<v.length;x+=2){const N=v[x];if(N>0)d.push(C[x/2]);else{const q=v[x+1],J=r[-N];for(let fe=lo;fe<J.length;fe++){const xe=J[fe];xe[nl]===xe[vo]&&rw(xe[qt],xe,q,d)}if(null!==J[eu]){const fe=J[eu];for(let xe=0;xe<fe.length;xe++){const je=fe[xe];rw(je[qt],je,q,d)}}}}}return d}function zC(t,r,a){const d=new np(!(4&~a));return function DE(t,r,a,d){const h=zg(r);h.push(a),t.firstCreatePass&&fv(t).push(d,h.length-1)}(t,r,d,d.destroy),(r[uo]??=new ew).queries.push(new JE(d))-1}function KC(t,r,a){null===t.queries&&(t.queries=new tw),t.queries.track(new nw(r,a))}function ow(t,r){return t.queries.getByIndex(r)}function XC(t,r){const a=t[qt],d=ow(a,r);return d.crossesNgTemplate?rw(a,t,r,[]):$C(a,t,d,r)}function ZC(t){return function QC(t){return"function"==typeof t&&void 0!==t[nt]}(t)&&"function"==typeof t.set}function aw(t){let r=function uI(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),a=!0;const d=[t];for(;r;){let h;if(wa(t))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new on(903,!1);h=r.\u0275dir}if(h){if(a){d.push(h);const C=t;C.inputs=Ty(t.inputs),C.inputTransforms=Ty(t.inputTransforms),C.declaredInputs=Ty(t.declaredInputs),C.outputs=Ty(t.outputs);const x=h.hostBindings;x&&oS(t,x);const N=h.viewQuery,q=h.contentQueries;if(N&&rS(t,N),q&&iS(t,q),tS(t,h),Hc(t.outputs,h.outputs),wa(h)&&h.data.animation){const J=t.data;J.animation=(J.animation||[]).concat(h.data.animation)}}const v=h.features;if(v)for(let C=0;C<v.length;C++){const x=v[C];x&&x.ngInherit&&x(t),x===aw&&(a=!1)}}r=Object.getPrototypeOf(r)}!function nS(t){let r=0,a=null;for(let d=t.length-1;d>=0;d--){const h=t[d];h.hostVars=r+=h.hostVars,h.hostAttrs=Ar(h.hostAttrs,a=Ar(a,h.hostAttrs))}}(d)}function tS(t,r){for(const a in r.inputs){if(!r.inputs.hasOwnProperty(a)||t.inputs.hasOwnProperty(a))continue;const d=r.inputs[a];if(void 0!==d&&(t.inputs[a]=d,t.declaredInputs[a]=r.declaredInputs[a],null!==r.inputTransforms)){const h=Array.isArray(d)?d[0]:d;if(!r.inputTransforms.hasOwnProperty(h))continue;t.inputTransforms??={},t.inputTransforms[h]=r.inputTransforms[h]}}}function Ty(t){return t===hi?{}:t===Fr?[]:t}function rS(t,r){const a=t.viewQuery;t.viewQuery=a?(d,h)=>{r(d,h),a(d,h)}:r}function iS(t,r){const a=t.contentQueries;t.contentQueries=a?(d,h,v)=>{r(d,h,v),a(d,h,v)}:r}function oS(t,r){const a=t.hostBindings;t.hostBindings=a?(d,h)=>{r(d,h),a(d,h)}:r}function hI(t){const r=t.inputConfig,a={};for(const d in r)if(r.hasOwnProperty(d)){const h=r[d];Array.isArray(h)&&h[3]&&(a[d]=h[3])}t.inputTransforms=a}class mm{}class pI{}function dS(t,r){return new cw(t,r??null,[])}class cw extends mm{constructor(r,a,d){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kC(this);const h=Pn(r);this._bootstrapComponents=b(h.bootstrap),this._r3Injector=fg(r,a,[{provide:mm,useValue:this},{provide:Tt,useValue:this.componentFactoryResolver},...d],Sr(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class uw extends pI{constructor(r){super(),this.moduleType=r}create(r){return new cw(this.moduleType,r,[])}}class gI extends mm{constructor(r){super(),this.componentFactoryResolver=new kC(this),this.instance=null;const a=new Ac([...r.providers,{provide:mm,useValue:this},{provide:Tt,useValue:this.componentFactoryResolver}],r.parent||el(),r.debugName,new Set(["environment"]));this.injector=a,r.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function lw(t,r,a=null){return new gI({providers:t,parent:r,debugName:a,runEnvironmentInitializers:!0}).injector}let _m=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Br.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Tn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sy(t){return!!dw(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function dw(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function yf(t,r,a){return t[r]=a}function Qs(t,r,a){return!Object.is(t[r],a)&&(t[r]=a,!0)}function vm(t,r,a,d){const h=Qs(t,r,a);return Qs(t,r+1,d)||h}function Dy(t,r,a,d,h){const v=vm(t,r,a,d);return Qs(t,r+2,h)||v}function Vv(t,r,a,d,h,v,C,x,N,q){const J=a+Nn,fe=r.firstCreatePass?function vS(t,r,a,d,h,v,C,x,N){const q=r.consts,J=Sn(r,t,4,C||null,x||null);cv(r,a,J,ac(q,N)),jf(r,J);const fe=J.tView=Ge(2,J,d,h,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,q,null);return null!==r.queries&&(r.queries.template(r,J),fe.queries=r.queries.embeddedTView(J)),J}(J,r,t,d,h,v,C,x,N):r.data[J];Rs(fe,!1);const xe=_I(r,t,fe,a);sd()&&av(r,t,xe,fe),Ca(xe,t);const je=O_(xe,t,xe,fe);return t[J]=je,bp(t,je),function jC(t,r,a){return ZE(t,r,a)}(je,fe,t),Jl(fe)&&Or(r,t,fe),null!=N&&Ze(t,fe,q),fe}function fw(t,r,a,d,h,v,C,x){const N=Dt(),q=Vr();return Vv(N,q,t,r,a,d,h,ac(q.consts,v),C,x),fw}let _I=function vI(t,r,a,d){return cu(!0),r[Jn].createComment("")};function Cw(t,r,a,d){const h=Dt();return Qs(h,su(),r)&&(Vr(),ll(Hi(),h,t,r,a,d)),Cw}function o0(t,r,a,d){return Qs(t,su(),a)?r+Kn(a)+d:Q}function s0(t,r,a,d,h,v){const x=vm(t,ou(),a,h);return au(2),x?r+Kn(a)+d+Kn(h)+v:Q}function ky(t,r){return t<<17|r<<2}function Fp(t){return t>>17&32767}function Iw(t){return 2|t}function Em(t){return(131068&t)>>2}function Aw(t,r){return-131069&t|r<<2}function bw(t){return 1|t}function XI(t,r,a,d){const h=t[a+1],v=null===r;let C=d?Fp(h):Em(h),x=!1;for(;0!==C&&(!1===x||v);){const q=t[C+1];iD(t[C],r)&&(x=!0,t[C+1]=d?bw(q):Iw(q)),C=d?Fp(q):Em(q)}x&&(t[a+1]=d?Iw(h):bw(h))}function iD(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Kc(t,r)>=0}const ba={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function QI(t){return t.substring(ba.key,ba.keyEnd)}function YI(t,r){const a=ba.textEnd;return a===r?-1:(r=ba.keyEnd=function cD(t,r,a){for(;r<a&&t.charCodeAt(r)>32;)r++;return r}(t,ba.key=r,a),h0(t,r,a))}function h0(t,r,a){for(;r<a&&t.charCodeAt(r)<=32;)r++;return r}function Tw(t,r,a){const d=Dt();return Qs(d,su(),r)&&gs(Vr(),Hi(),d,t,r,d[Jn],a,!1),Tw}function xw(t,r,a,d,h){const C=h?"class":"style";mh(t,a,r.inputs[C],C,d)}function Sw(t,r,a){return xd(t,r,a,!1),Sw}function Dw(t,r){return xd(t,r,null,!0),Dw}function nA(t){Sd(_D,wf,t,!0)}function wf(t,r){for(let a=function sD(t){return function JI(t){ba.key=0,ba.keyEnd=0,ba.value=0,ba.valueEnd=0,ba.textEnd=t.length}(t),YI(t,h0(t,0,ba.textEnd))}(r);a>=0;a=YI(r,a))vi(t,QI(r),!0)}function xd(t,r,a,d){const h=Dt(),v=Vr(),C=au(2);v.firstUpdatePass&&iA(v,t,C,d),r!==Q&&Qs(h,C,r)&&sA(v,v.data[Ws()],h,h[Jn],t,h[C+1]=function yD(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Sr(Xs(t)))),t}(r,a),d,C)}function Sd(t,r,a,d){const h=Vr(),v=au(2);h.firstUpdatePass&&iA(h,null,v,d);const C=Dt();if(a!==Q&&Qs(C,v,a)){const x=h.data[Ws()];if(cA(x,d)&&!rA(h,v)){let N=d?x.classesWithoutHost:x.stylesWithoutHost;null!==N&&(a=is(N,a||"")),xw(h,x,C,a,d)}else!function vD(t,r,a,d,h,v,C,x){h===Q&&(h=Fr);let N=0,q=0,J=0<h.length?h[0]:null,fe=0<v.length?v[0]:null;for(;null!==J||null!==fe;){const xe=N<h.length?h[N+1]:void 0,je=q<v.length?v[q+1]:void 0;let Rt,rt=null;J===fe?(N+=2,q+=2,xe!==je&&(rt=fe,Rt=je)):null===fe||null!==J&&J<fe?(N+=2,rt=J):(q+=2,rt=fe,Rt=je),null!==rt&&sA(t,r,a,d,rt,Rt,C,x),J=N<h.length?h[N]:null,fe=q<v.length?v[q]:null}}(h,x,C,C[Jn],C[v+1],C[v+1]=function mD(t,r,a){if(null==a||""===a)return Fr;const d=[],h=Xs(a);if(Array.isArray(h))for(let v=0;v<h.length;v++)t(d,h[v],!0);else if("object"==typeof h)for(const v in h)h.hasOwnProperty(v)&&t(d,v,h[v]);else"string"==typeof h&&r(d,h);return d}(t,r,a),d,v)}}function rA(t,r){return r>=t.expandoStartIndex}function iA(t,r,a,d){const h=t.data;if(null===h[a+1]){const v=h[Ws()],C=rA(t,a);cA(v,d)&&null===r&&!C&&(r=!1),r=function fD(t,r,a,d){const h=function Kp(t){const r=rr.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let v=d?r.residualClasses:r.residualStyles;if(null===h)0===(d?r.classBindings:r.styleBindings)&&(a=Hv(a=Rw(null,t,r,a,d),r.attrs,d),v=null);else{const C=r.directiveStylingLast;if(-1===C||t[C]!==h)if(a=Rw(h,t,r,a,d),null===v){let N=function hD(t,r,a){const d=a?r.classBindings:r.styleBindings;if(0!==Em(d))return t[Fp(d)]}(t,r,d);void 0!==N&&Array.isArray(N)&&(N=Rw(null,t,r,N[1],d),N=Hv(N,r.attrs,d),function pD(t,r,a,d){t[Fp(a?r.classBindings:r.styleBindings)]=d}(t,r,d,N))}else v=function gD(t,r,a){let d;const h=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<h;v++)d=Hv(d,t[v].hostAttrs,a);return Hv(d,r.attrs,a)}(t,r,d)}return void 0!==v&&(d?r.residualClasses=v:r.residualStyles=v),a}(h,v,r,d),function nD(t,r,a,d,h,v){let C=v?r.classBindings:r.styleBindings,x=Fp(C),N=Em(C);t[d]=a;let J,q=!1;if(Array.isArray(a)?(J=a[1],(null===J||Kc(a,J)>0)&&(q=!0)):J=a,h)if(0!==N){const xe=Fp(t[x+1]);t[d+1]=ky(xe,x),0!==xe&&(t[xe+1]=Aw(t[xe+1],d)),t[x+1]=function eD(t,r){return 131071&t|r<<17}(t[x+1],d)}else t[d+1]=ky(x,0),0!==x&&(t[x+1]=Aw(t[x+1],d)),x=d;else t[d+1]=ky(N,0),0===x?x=d:t[N+1]=Aw(t[N+1],d),N=d;q&&(t[d+1]=Iw(t[d+1])),XI(t,J,d,!0),XI(t,J,d,!1),function rD(t,r,a,d,h){const v=h?t.residualClasses:t.residualStyles;null!=v&&"string"==typeof r&&Kc(v,r)>=0&&(a[d+1]=bw(a[d+1]))}(r,J,t,d,v),C=ky(x,N),v?r.classBindings=C:r.styleBindings=C}(h,v,r,a,C,d)}}function Rw(t,r,a,d,h){let v=null;const C=a.directiveEnd;let x=a.directiveStylingLast;for(-1===x?x=a.directiveStart:x++;x<C&&(v=r[x],d=Hv(d,v.hostAttrs,h),v!==t);)x++;return null!==t&&(a.directiveStylingLast=x),d}function Hv(t,r,a){const d=a?1:2;let h=-1;if(null!==r)for(let v=0;v<r.length;v++){const C=r[v];"number"==typeof C?h=C:h===d&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),vi(t,C,!!a||r[++v]))}return void 0===t?null:t}function _D(t,r,a){const d=String(r);""!==d&&!d.includes(" ")&&vi(t,d,a)}function sA(t,r,a,d,h,v,C,x){if(!(3&r.type))return;const N=t.data,q=N[x+1],J=function tD(t){return!(1&~t)}(q)?aA(N,r,a,h,Em(q),C):void 0;Fy(J)||(Fy(v)||function JS(t){return!(2&~t)}(q)&&(v=aA(N,null,a,h,x,C)),function w(t,r,a,d,h){if(r)h?t.addClass(a,d):t.removeClass(a,d);else{let v=-1===d.indexOf("-")?void 0:Ye.DashCase;null==h?t.removeStyle(a,d,v):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),v|=Ye.Important),t.setStyle(a,d,h,v))}}(d,C,oc(Ws(),a),h,v))}function aA(t,r,a,d,h,v){const C=null===r;let x;for(;h>0;){const N=t[h],q=Array.isArray(N),J=q?N[1]:N,fe=null===J;let xe=a[h+1];xe===Q&&(xe=fe?Fr:void 0);let je=fe?as(xe,d):J===d?xe:void 0;if(q&&!Fy(je)&&(je=as(N,d)),Fy(je)&&(x=je,C))return x;const rt=t[h+1];h=C?Fp(rt):Em(rt)}if(null!==r){let N=v?r.residualClasses:r.residualStyles;null!=N&&(x=as(N,d))}return x}function Fy(t){return void 0!==t}function cA(t,r){return!!(t.flags&(r?8:16))}function uA(t,r,a){Sd(vi,wf,o0(Dt(),t,r,a),!0)}function lA(t,r,a,d,h){Sd(vi,wf,s0(Dt(),t,r,a,d,h),!0)}function dA(t,r,a,d,h,v,C){Sd(vi,wf,function a0(t,r,a,d,h,v,C,x){const q=Dy(t,ou(),a,h,C);return au(3),q?r+Kn(a)+d+Kn(h)+v+Kn(C)+x:Q}(Dt(),t,r,a,d,h,v,C),!0)}class xD{destroy(r){}updateValue(r,a){}swap(r,a){const d=Math.min(r,a),h=Math.max(r,a),v=this.detach(h);if(h-d>1){const C=this.detach(d);this.attach(d,v),this.attach(h,C)}else this.attach(d,v)}move(r,a){this.attach(a,this.detach(r))}}function Mw(t,r,a,d,h){return t===a&&Object.is(r,d)?1:Object.is(h(t,r),h(a,d))?-1:0}function Ow(t,r,a,d){return!(void 0===r||!r.has(d)||(t.attach(a,r.get(d)),r.delete(d),0))}function fA(t,r,a,d,h){if(Ow(t,r,d,a(d,h)))t.updateValue(d,h);else{const v=t.create(d,h);t.attach(d,v)}}function hA(t,r,a,d){const h=new Set;for(let v=r;v<=a;v++)h.add(d(v,t.at(v)));return h}class pA{constructor(){this.kvMap=new Map,this._vMap=void 0}has(r){return this.kvMap.has(r)}delete(r){if(!this.has(r))return!1;const a=this.kvMap.get(r);return void 0!==this._vMap&&this._vMap.has(a)?(this.kvMap.set(r,this._vMap.get(a)),this._vMap.delete(a)):this.kvMap.delete(r),!0}get(r){return this.kvMap.get(r)}set(r,a){if(this.kvMap.has(r)){let d=this.kvMap.get(r);void 0===this._vMap&&(this._vMap=new Map);const h=this._vMap;for(;h.has(d);)d=h.get(d);h.set(d,a)}else this.kvMap.set(r,a)}forEach(r){for(let[a,d]of this.kvMap)if(r(d,a),void 0!==this._vMap){const h=this._vMap;for(;h.has(d);)d=h.get(d),r(d,a)}}}function gA(t,r){$o("NgControlFlow");const a=Dt(),d=su(),h=a[d]!==Q?a[d]:-1,v=-1!==h?Ly(a,Nn+h):void 0;if(Qs(a,d,t)){const x=ye(null);try{if(void 0!==v&&Wg(v,0),-1!==t){const N=Nn+t,q=Ly(a,N),J=Pw(a[qt],N),fe=vf(q,J.tView.ssrId);Ll(q,ff(a,J,r,{dehydratedView:fe}),0,hf(J,fe))}}finally{ye(x)}}else if(void 0!==v){const x=mv(v,0);void 0!==x&&(x[Ei]=r)}}class DD{constructor(r,a,d){this.lContainer=r,this.$implicit=a,this.$index=d}get $count(){return this.lContainer.length-lo}}function mA(t,r){return r}class MD{constructor(r,a,d){this.hasEmptyBlock=r,this.trackByFn=a,this.liveCollection=d}}function _A(t,r,a,d,h,v,C,x,N,q,J,fe,xe){$o("NgControlFlow");const je=Dt(),rt=Vr(),Rt=void 0!==N,Zt=Dt(),cn=x?C.bind(Zt[wi][Ei]):C,Ft=new MD(Rt,cn);Zt[Nn+t]=Ft,Vv(je,rt,t+1,r,a,d,h,ac(rt.consts,v)),Rt&&Vv(je,rt,t+2,N,q,J,fe,ac(rt.consts,xe))}class OD extends xD{constructor(r,a,d){super(),this.lContainer=r,this.hostLView=a,this.templateTNode=d,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-lo}at(r){return this.getLView(r)[Ei].$implicit}attach(r,a){const d=a[ds];this.needsIndexUpdate||=r!==this.length,Ll(this.lContainer,a,r,hf(this.templateTNode,d))}detach(r){return this.needsIndexUpdate||=r!==this.length-1,function PD(t,r){return x_(t,r)}(this.lContainer,r)}create(r,a){const d=vf(this.lContainer,this.templateTNode.tView.ssrId),h=ff(this.hostLView,this.templateTNode,new DD(this.lContainer,a,r),{dehydratedView:d});return this.operationsCounter?.recordCreate(),h}destroy(r){ov(r[qt],r),this.operationsCounter?.recordDestroy()}updateValue(r,a){this.getLView(r)[Ei].$implicit=a}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let r=0;r<this.length;r++)this.getLView(r)[Ei].$index=r}getLView(r){return function ND(t,r){return mv(t,r)}(this.lContainer,r)}}function vA(t){const r=ye(null),a=Ws();try{const d=Dt(),h=d[qt],v=d[a],C=a+1,x=Ly(d,C);if(void 0===v.liveCollection){const q=Pw(h,C);v.liveCollection=new OD(x,d,q)}else v.liveCollection.reset();const N=v.liveCollection;if(function SD(t,r,a){let d,h,v=0,C=t.length-1;if(Array.isArray(r)){let N=r.length-1;for(;v<=C&&v<=N;){const q=t.at(v),J=r[v],fe=Mw(v,q,v,J,a);if(0!==fe){fe<0&&t.updateValue(v,J),v++;continue}const xe=t.at(C),je=r[N],rt=Mw(C,xe,N,je,a);if(0!==rt){rt<0&&t.updateValue(C,je),C--,N--;continue}const Rt=a(v,q),Zt=a(C,xe),cn=a(v,J);if(Object.is(cn,Zt)){const Ft=a(N,je);Object.is(Ft,Rt)?(t.swap(v,C),t.updateValue(C,je),N--,C--):t.move(C,v),t.updateValue(v,J),v++}else if(d??=new pA,h??=hA(t,v,C,a),Ow(t,d,v,cn))t.updateValue(v,J),v++,C++;else if(h.has(cn))d.set(Rt,t.detach(v)),C--;else{const Ft=t.create(v,r[v]);t.attach(v,Ft),v++,C++}}for(;v<=N;)fA(t,d,a,v,r[v]),v++}else if(null!=r){const N=r[Symbol.iterator]();let q=N.next();for(;!q.done&&v<=C;){const J=t.at(v),fe=q.value,xe=Mw(v,J,v,fe,a);if(0!==xe)xe<0&&t.updateValue(v,fe),v++,q=N.next();else{d??=new pA,h??=hA(t,v,C,a);const je=a(v,fe);if(Ow(t,d,v,je))t.updateValue(v,fe),v++,C++,q=N.next();else if(h.has(je)){const rt=a(v,J);d.set(rt,t.detach(v)),C--}else t.attach(v,t.create(v,fe)),v++,C++,q=N.next()}}for(;!q.done;)fA(t,d,a,t.length,q.value),q=N.next()}for(;v<=C;)t.destroy(t.detach(C--));d?.forEach(N=>{t.destroy(N)})}(N,t,v.trackByFn),N.updateIndexes(),v.hasEmptyBlock){const q=su(),J=0===N.length;if(Qs(d,q,J)){const fe=a+2,xe=Ly(d,fe);if(J){const je=Pw(h,fe),rt=vf(xe,je.tView.ssrId);Ll(xe,ff(d,je,void 0,{dehydratedView:rt}),0,hf(je,rt))}else Wg(xe,0)}}}finally{ye(r)}}function Ly(t,r){return t[r]}function Pw(t,r){return ru(t,r)}function Vy(t,r,a,d){const h=Dt(),v=Vr(),C=Nn+t,x=h[Jn],N=v.firstCreatePass?function kD(t,r,a,d,h,v){const C=r.consts,N=Sn(r,t,2,d,ac(C,h));return cv(r,a,N,ac(C,v)),null!==N.attrs&&Cy(N,N.attrs,!1),null!==N.mergedAttrs&&Cy(N,N.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,N),N}(C,v,h,r,a,d):v.data[C],q=yA(v,h,N,x,r,t);h[C]=q;const J=Jl(N);return Rs(N,!0),G(x,q,N),!function Q_(t){return!(32&~t.flags)}(N)&&sd()&&av(v,h,q,N),0===function E0(){return rr.lFrame.elementDepthCount}()&&Ca(q,h),function Vf(){rr.lFrame.elementDepthCount++}(),J&&(Or(v,h,N),ci(v,N,h)),null!==d&&Ze(h,N),Vy}function By(){let t=_e();fo()?Ol():(t=t.parent,Rs(t,!1));const r=t;(function C0(t){return rr.skipHydrationRootTNode===t})(r)&&function xm(){rr.skipHydrationRootTNode=null}(),function Tm(){rr.lFrame.elementDepthCount--}();const a=Vr();return a.firstCreatePass&&(jf(a,t),zs(t)&&a.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Pm(t){return!!(8&t.flags)}(r)&&xw(a,r,Dt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function rg(t){return!!(16&t.flags)}(r)&&xw(a,r,Dt(),r.stylesWithoutHost,!1),By}function Nw(t,r,a,d){return Vy(t,r,a,d),By(),Nw}let yA=(t,r,a,d,h,v)=>(cu(!0),Eo(d,h,function $h(){return rr.lFrame.currentNamespace}()));function Uy(t,r,a){const d=Dt(),h=Vr(),v=t+Nn,C=h.firstCreatePass?function VD(t,r,a,d,h){const v=r.consts,C=ac(v,d),x=Sn(r,t,8,"ng-container",C);return null!==C&&Cy(x,C,!0),cv(r,a,x,ac(v,h)),null!==r.queries&&r.queries.elementStart(r,x),x}(v,h,d,r,a):h.data[v];Rs(C,!0);const x=wA(h,d,C,t);return d[v]=x,sd()&&av(h,d,x,C),Ca(x,d),Jl(C)&&(Or(h,d,C),ci(h,C,d)),null!=a&&Ze(d,C),Uy}function jy(){let t=_e();const r=Vr();return fo()?Ol():(t=t.parent,Rs(t,!1)),r.firstCreatePass&&(jf(r,t),zs(t)&&r.queries.elementEnd(t)),jy}let wA=(t,r,a,d)=>(cu(!0),ir(r[Jn],""));function CA(){return Dt()}const wm=void 0;var HD=["en",[["a","p"],["AM","PM"],wm],[["AM","PM"],wm,wm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wm,"{1} 'at' {0}",wm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jD(t){const a=Math.floor(Math.abs(t)),d=t.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===d?1:5}];let p0={};function kw(t){const r=function GD(t){return t.toLowerCase().replace(/_/g,"-")}(t);let a=TA(r);if(a)return a;const d=r.split("-")[0];if(a=TA(d),a)return a;if("en"===d)return HD;throw new on(701,!1)}function bA(t){return kw(t)[g0.PluralCase]}function TA(t){return t in p0||(p0[t]=xr.ng&&xr.ng.common&&xr.ng.common.locales&&xr.ng.common.locales[t]),p0[t]}var g0=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(g0||{});const m0="en-US";let xA=m0;let WA=(t,r,a)=>{};function Vw(t,r,a,d){const h=Dt(),v=Vr(),C=_e();return Bw(v,h,h[Jn],C,t,r,d),Vw}function Bw(t,r,a,d,h,v,C){const x=Jl(d),q=t.firstCreatePass&&fv(t),J=r[Ei],fe=zg(r);let xe=!0;if(3&d.type||C){const Rt=eo(d,r),Zt=C?C(Rt):Rt,cn=fe.length,Ft=C?Ti=>C(Rr(Ti[d.index])):d.index;let ur=null;if(!C&&x&&(ur=function M2(t,r,a,d){const h=t.cleanup;if(null!=h)for(let v=0;v<h.length-1;v+=2){const C=h[v];if(C===a&&h[v+1]===d){const x=r[El],N=h[v+2];return x.length>N?x[N]:null}"string"==typeof C&&(v+=2)}return null}(t,r,h,d.index)),null!==ur)(ur.__ngLastListenerFn__||ur).__ngNextListenerFn__=v,ur.__ngLastListenerFn__=v,xe=!1;else{v=QA(d,r,J,v),WA(Rt,h,v);const Ti=a.listen(Zt,h,v);fe.push(v,Ti),q&&q.push(h,Ft,cn,cn+1)}}else v=QA(d,r,J,v);const je=d.outputs;let rt;if(xe&&null!==je&&(rt=je[h])){const Rt=rt.length;if(Rt)for(let Zt=0;Zt<Rt;Zt+=2){const ho=r[rt[Zt]][rt[Zt+1]].subscribe(v),xa=fe.length;fe.push(v,ho),q&&q.push(h,d.index,xa,-(xa+1))}}}function XA(t,r,a,d){const h=ye(null);try{return Ua(6,r,a),!1!==a(d)}catch(v){return N_(t,v),!1}finally{Ua(7,r,a),ye(h)}}function QA(t,r,a,d){return function h(v){if(v===Function)return d;gf(t.componentOffset>-1?gr(t.index,r):r,5);let x=XA(r,a,d,v),N=h.__ngNextListenerFn__;for(;N;)x=XA(r,a,N,v)&&x,N=N.__ngNextListenerFn__;return x}}function YA(t=1){return function od(t){return(rr.lFrame.contextLView=function bm(t,r){for(;t>0;)r=r[wl],t--;return r}(t,rr.lFrame.contextLView))[Ei]}(t)}function O2(t,r){let a=null;const d=function Pd(t){const r=t.attrs;if(null!=r){const a=r.indexOf(5);if(!(1&a))return r[a+1]}return null}(t);for(let h=0;h<r.length;h++){const v=r[h];if("*"!==v){if(null===d?_a(t,v,!0):_l(d,v))return h}else a=h}return a}function ZA(t){const r=Dt()[wi][ls];if(!r.projection){const d=r.projection=function Iu(t,r){const a=[];for(let d=0;d<t;d++)a.push(r);return a}(t?t.length:1,null),h=d.slice();let v=r.child;for(;null!==v;){const C=t?O2(v,t):0;null!==C&&(h[C]?h[C].projectionNext=v:d[C]=v,h[C]=v),v=v.next}}}function JA(t,r=0,a,d,h,v){const C=Dt(),x=Vr(),N=d?t+1:null;null!==N&&Vv(C,x,N,d,h,v,null,a);const q=Sn(x,Nn+t,16,null,a||null);null===q.projection&&(q.projection=r),Ol();const fe=!C[ds]||cc();null===C[wi][ls].projection[q.projection]&&null!==N?function P2(t,r,a){const d=Nn+a,h=r.data[d],v=t[d],C=vf(v,h.tView.ssrId);Ll(v,ff(t,h,void 0,{dehydratedView:C}),0,hf(h,C))}(C,x,N):fe&&32&~q.flags&&function u(t,r,a){f(r[Jn],0,r,a,O1(t,a,r),AE(a.parent||r[ls],a,r))}(x,C,q)}function Uw(t,r,a){return jw(t,"",r,"",a),Uw}function jw(t,r,a,d,h){const v=Dt(),C=o0(v,r,a,d);return C!==Q&&gs(Vr(),Hi(),v,t,C,v[Jn],h,!1),jw}function cb(t,r,a,d){!function qC(t,r,a,d){const h=Vr();if(h.firstCreatePass){const v=_e();KC(h,new GC(r,a,d),v.index),function $x(t,r){const a=t.contentQueries||(t.contentQueries=[]);r!==(a.length?a[a.length-1]:-1)&&a.push(t.queries.length-1,r)}(h,t),!(2&~a)&&(h.staticContentQueries=!0)}return zC(h,Dt(),a)}(t,r,a,d)}function ub(t,r,a){!function WC(t,r,a){const d=Vr();return d.firstCreatePass&&(KC(d,new GC(t,r,a),-1),!(2&~r)&&(d.staticViewQueries=!0)),zC(d,Dt(),r)}(t,r,a)}function lb(t){const r=Dt(),a=Vr(),d=Hh();Uf(d+1);const h=ow(a,d);if(t.dirty&&function ti(t){return!(4&~t[xn])}(r)===!(2&~h.metadata.flags)){if(null===h.matches)t.reset([]);else{const v=XC(r,d);t.reset(v,Ci),t.notifyOnChanges()}return!0}return!1}function db(){return function iw(t,r){return t[uo].queries[r].queryList}(Dt(),Hh())}function fb(t){return sc(function zp(){return rr.lFrame.contextLView}(),Nn+t)}function Cb(t,r=""){const a=Dt(),d=Vr(),h=t+Nn,v=d.firstCreatePass?Sn(d,h,1,r,null):d.data[h],C=Ib(d,a,v,r,t);a[h]=C,sd()&&av(d,a,C,v),Rs(v,!1)}let Ib=(t,r,a,d,h)=>(cu(!0),function vn(t,r){return t.createText(r)}(r[Jn],d));function Hw(t){return zy("",t,""),Hw}function zy(t,r,a){const d=Dt(),h=o0(d,t,r,a);return h!==Q&&Fl(d,Ws(),h),zy}function Gw(t,r,a,d,h){const v=Dt(),C=s0(v,t,r,a,d,h);return C!==Q&&Fl(v,Ws(),C),Gw}function $w(t,r,a){ZC(r)&&(r=r());const d=Dt();return Qs(d,su(),r)&&gs(Vr(),Hi(),d,t,r,d[Jn],a,!1),$w}function Mb(t,r){const a=ZC(t);return a&&t.set(r),a}function zw(t,r){const a=Dt(),d=Vr(),h=_e();return Bw(d,a,a[Jn],h,t,r),zw}function Ww(t,r,a,d,h){if(t=On(t),Array.isArray(t))for(let v=0;v<t.length;v++)Ww(t[v],r,a,d,h);else{const v=Vr(),C=Dt(),x=_e();let N=Su(t)?t:On(t.provide);const q=Lr(t),J=1048575&x.providerIndexes,fe=x.directiveStart,xe=x.providerIndexes>>20;if(Su(t)||!t.multi){const je=new ad(q,h,Fe),rt=Kw(N,r,h?J:J+xe,fe);-1===rt?(ag(Xd(x,C),v,N),qw(v,t,r.length),r.push(N),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),a.push(je),C.push(je)):(a[rt]=je,C[rt]=je)}else{const je=Kw(N,r,J+xe,fe),rt=Kw(N,r,J,J+xe),Zt=rt>=0&&a[rt];if(h&&!Zt||!h&&!(je>=0&&a[je])){ag(Xd(x,C),v,N);const cn=function Z2(t,r,a,d,h){const v=new ad(t,a,Fe);return v.multi=[],v.index=r,v.componentProviders=0,Ob(v,h,d&&!a),v}(h?Y2:Q2,a.length,h,d,q);!h&&Zt&&(a[rt].providerFactory=cn),qw(v,t,r.length,0),r.push(N),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),a.push(cn),C.push(cn)}else qw(v,t,je>-1?je:rt,Ob(a[h?rt:je],q,!h&&d));!h&&d&&Zt&&a[rt].componentProviders++}}}function qw(t,r,a,d){const h=Su(r),v=function Qc(t){return!!t.useClass}(r);if(h||v){const N=(v?On(r.useClass):r).prototype.ngOnDestroy;if(N){const q=t.destroyHooks||(t.destroyHooks=[]);if(!h&&r.multi){const J=q.indexOf(a);-1===J?q.push(a,[d,N]):q[J+1].push(d,N)}else q.push(a,N)}}}function Ob(t,r,a){return a&&t.componentProviders++,t.multi.push(r)-1}function Kw(t,r,a,d){for(let h=a;h<d;h++)if(r[h]===t)return h;return-1}function Q2(t,r,a,d){return Xw(this.multi,[])}function Y2(t,r,a,d){const h=this.multi;let v;if(this.providerFactory){const C=this.providerFactory.componentProviders,x=uc(a,a[qt],this.providerFactory.index,d);v=x.slice(0,C),Xw(h,v);for(let N=C;N<x.length;N++)v.push(x[N])}else v=[],Xw(h,v);return v}function Xw(t,r){for(let a=0;a<t.length;a++)r.push((0,t[a])());return r}function Pb(t,r=[]){return a=>{a.providersResolver=(d,h)=>function X2(t,r,a){const d=Vr();if(d.firstCreatePass){const h=wa(t);Ww(a,d.data,d.blueprint,h,!0),Ww(r,d.data,d.blueprint,h,!1)}}(d,h?h(t):t,r)}}let J2=(()=>{class t{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const d=vl(0,a.type),h=d.length>0?lw([d],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,h)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Tn({token:t,providedIn:"environment",factory:()=>new t(Mi(jo))})}return t})();function Nb(t){$o("NgStandalone"),t.getStandaloneInjector=r=>r.get(J2).getOrCreateStandaloneInjector(t)}function Fb(t,r,a,d){return Bb(Dt(),Ki(),t,r,a,d)}function Lb(t,r,a,d,h){return function Ub(t,r,a,d,h,v,C){const x=r+a;return vm(t,x,h,v)?yf(t,x+2,C?d.call(C,h,v):d(h,v)):Kv(t,x+2)}(Dt(),Ki(),t,r,a,d,h)}function Vb(t,r,a,d,h,v){return function jb(t,r,a,d,h,v,C,x){const N=r+a;return Dy(t,N,h,v,C)?yf(t,N+3,x?d.call(x,h,v,C):d(h,v,C)):Kv(t,N+3)}(Dt(),Ki(),t,r,a,d,h,v)}function Kv(t,r){const a=t[r];return a===Q?void 0:a}function Bb(t,r,a,d,h,v){const C=r+a;return Qs(t,C,h)?yf(t,C+1,v?d.call(v,h):d(h)):Kv(t,C+1)}function $b(t,r){const a=Vr();let d;const h=t+Nn;a.firstCreatePass?(d=function uR(t,r){if(r)for(let a=r.length-1;a>=0;a--){const d=r[a];if(t===d.name)return d}}(r,a.pipeRegistry),a.data[h]=d,d.onDestroy&&(a.destroyHooks??=[]).push(h,d.onDestroy)):d=a.data[h];const v=d.factory||(d.factory=qi(d.type)),x=Ce(Fe);try{const N=Gf(!1),q=v();return Gf(N),function L2(t,r,a,d){a>=t.data.length&&(t.data[a]=null,t.blueprint[a]=null),r[a]=d}(a,Dt(),h,q),q}finally{Ce(x)}}function zb(t,r,a){const d=t+Nn,h=Dt(),v=sc(h,d);return function Xv(t,r){return t[qt].data[r].pure}(h,d)?Bb(h,Ki(),r,v.transform,a,v):v.transform(a)}function Wb(t,r){return Yg(t,r)}class cT{constructor(r){this.full=r;const a=r.split(".");this.major=a[0],this.minor=a[1],this.patch=a.slice(2).join(".")}}const kR=new cT("18.0.2");let uT=(()=>{class t{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Tn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const pT=new tr(""),gT=new tr("");let tC,aM=(()=>{class t{constructor(a,d,h){this._ngZone=a,this.registry=d,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,tC||(function cM(t){tC=t}(h),h.addToWindow(d)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb()}});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(a)||(clearTimeout(d.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,d,h){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==v),a()},d)),this._callbacks.push({doneCb:a,timeoutId:v,updateCb:h})}whenStable(a,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,d,h),this._runCallbacksIfReady()}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,d,h){return[]}static#e=this.\u0275fac=function(d){return new(d||t)(Mi(zo),Mi(mT),Mi(gT))};static#t=this.\u0275prov=Tn({token:t,factory:t.\u0275fac})}return t})(),mT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(a,d){this._applications.set(a,d)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,d=!0){return tC?.findTestabilityInTree(this,a,d)??null}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Tn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function nC(t){return!!t&&"function"==typeof t.then}function _T(t){return!!t&&"function"==typeof t.subscribe}const vT=new tr("");let rC=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d}),this.appInits=En(vT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const h of this.appInits){const v=h();if(nC(v))a.push(v);else if(_T(v)){const C=new Promise((x,N)=>{v.subscribe({complete:x,error:N})});a.push(C)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{d()}).catch(h=>{this.reject(h)}),0===a.length&&d(),this.initialized=!0}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Tn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Xy=new tr("");let Dd=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=En(pg),this.afterRenderEffectManager=En(Ov),this.zonelessEnabled=En(Ia),this.externalTestViews=new Set,this.beforeRender=new no.B,this.afterTick=new no.B,this.componentTypes=[],this.components=[],this.isStable=En(_m).hasPendingTasks.pipe((0,Fi.T)(a=>!a)),this._injector=En(jo)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,d){const h=a instanceof I;if(!this._injector.get(rC).done)throw!h&&Mn(a),new on(405,!1);let C;C=h?a:this._injector.get(Tt).resolveComponentFactory(a),this.componentTypes.push(C.componentType);const x=function uM(t){return t.isBoundToModule}(C)?void 0:this._injector.get(mm),q=C.create(Ms.NULL,[],d||C.selector,x),J=q.location.nativeElement,fe=q.injector.get(pT,null);return fe?.registerApplication(J),q.onDestroy(()=>{this.detachView(q.hostView),Qy(this.components,q),fe?.unregisterApplication(J)}),this._loadComponent(q),q}tick(){this._tick(!0)}_tick(a){if(this._runningTick)throw new on(101,!1);const d=ye(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(a)}catch(h){this.internalErrorHandler(h)}finally{this._runningTick=!1,ye(d),this.afterTick.next()}}detectChangesInAttachedViews(a){let d=null;this._injector.destroyed||(d=this._injector.get(fn,null,{optional:!0}));let h=0;const v=this.afterRenderEffectManager;for(;h<10;){const C=0===h;if(a||!C){this.beforeRender.next(C);for(let{_lView:x,notifyErrorHandler:N}of this._views)dM(x,N,C,this.zonelessEnabled)}else d?.begin?.(),d?.end?.();if(h++,v.executeInternalCallbacks(),!this.allViews.some(({_lView:x})=>nd(x))&&(v.execute(),!this.allViews.some(({_lView:x})=>nd(x))))break}}attachView(a){const d=a;this._views.push(d),d.attachToAppRef(this)}detachView(a){const d=a;Qy(this._views,d),d.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const d=this._injector.get(Xy,[]);[...this._bootstrapListeners,...d].forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Qy(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new on(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Tn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qy(t,r){const a=t.indexOf(r);a>-1&&t.splice(a,1)}function dM(t,r,a,d){(a||nd(t))&&Kg(t,r,a&&!d?0:1)}class fM{constructor(r,a){this.ngModuleFactory=r,this.componentFactories=a}}let hM=(()=>{class t{compileModuleSync(a){return new uw(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const d=this.compileModuleSync(a),v=b(Pn(a).declarations).reduce((C,x)=>{const N=ke(x);return N&&C.push(new kv(N)),C},[]);return new fM(d,v)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Tn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mM=(()=>{class t{constructor(){this.zone=En(zo),this.changeDetectionScheduler=En(Td),this.applicationRef=En(Dd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Tn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function iC({ngZoneFactory:t,ignoreChangesOutsideZone:r}){return t??=()=>new zo(function oC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}()),[{provide:zo,useFactory:t},{provide:cs,multi:!0,useFactory:()=>{const a=En(mM,{optional:!0});return()=>a.initialize()}},{provide:cs,multi:!0,useFactory:()=>{const a=En(yM);return()=>{a.initialize()}}},{provide:pg,useFactory:vM},!0===r?{provide:Mv,useValue:!0}:[]]}function vM(){const t=En(zo),r=En(ku);return a=>t.runOutsideAngular(()=>r.handleError(a))}let yM=(()=>{class t{constructor(){this.subscription=new mr.yU,this.initialized=!1,this.zone=En(zo),this.pendingTasks=En(_m)}initialize(){if(this.initialized)return;this.initialized=!0;let a=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(a=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{zo.assertNotInAngularZone(),queueMicrotask(()=>{null!==a&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(a),a=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{zo.assertInAngularZone(),a??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Tn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Zv=(()=>{class t{constructor(){this.appRef=En(Dd),this.taskService=En(_m),this.ngZone=En(zo),this.zonelessEnabled=En(Ia),this.disableScheduling=En(Mv,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new mr.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof qE||!this.zoneIsDefined)}notify(a){if(!this.zonelessEnabled&&5===a)return;switch(a){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const d=this.useMicrotaskScheduler?K_:pm;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=d(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=d(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&zo.isInAngularZone())}tick(a){if(this.runningTick||this.appRef.destroyed)return;const d=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(a)},void 0,this.schedulerTickApplyArgs)}catch(h){throw this.taskService.remove(d),h}finally{this.cleanup()}this.useMicrotaskScheduler=!0,K_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(d)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const a=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(a)}}static#e=this.\u0275fac=function(d){return new(d||t)};static#t=this.\u0275prov=Tn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Zy=new tr("",{providedIn:"root",factory:()=>En(Zy,re.Optional|re.SkipSelf)||function EM(){return typeof $localize<"u"&&$localize.locale||m0}()}),wM=new tr("",{providedIn:"root",factory:()=>"USD"}),aC=new tr("");let Lp=null;let MT=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=TM}return t})();function TM(t){return function xM(t,r,a){if(tu(t)&&!a){const d=gr(t.index,r);return new Uu(d,d)}return 47&t.type?new Uu(r[wi],r):null}(_e(),Dt(),!(16&~t))}class kT{constructor(){}supports(r){return Sy(r)}create(r){return new OM(r)}}const MM=(t,r)=>r;class OM{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||MM}forEachItem(r){let a;for(a=this._itHead;null!==a;a=a._next)r(a)}forEachOperation(r){let a=this._itHead,d=this._removalsHead,h=0,v=null;for(;a||d;){const C=!d||a&&a.currentIndex<LT(d,h,v)?a:d,x=LT(C,h,v),N=C.currentIndex;if(C===d)h--,d=d._nextRemoved;else if(a=a._next,null==C.previousIndex)h++;else{v||(v=[]);const q=x-h,J=N-h;if(q!=J){for(let xe=0;xe<q;xe++){const je=xe<v.length?v[xe]:v[xe]=0,rt=je+xe;J<=rt&&rt<q&&(v[xe]=je+1)}v[C.previousIndex]=J-q}}x!==N&&r(C,x,N)}}forEachPreviousItem(r){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachMovedItem(r){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}forEachIdentityChange(r){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)r(a)}diff(r){if(null==r&&(r=[]),!Sy(r))throw new on(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,v,C,a=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)v=r[x],C=this._trackByFn(x,v),null!==a&&Object.is(a.trackById,C)?(d&&(a=this._verifyReinsertion(a,v,C,x)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,C,x),d=!0),a=a._next}else h=0,function mS(t,r){if(Array.isArray(t))for(let a=0;a<t.length;a++)r(t[a]);else{const a=t[Symbol.iterator]();let d;for(;!(d=a.next()).done;)r(d.value)}}(r,x=>{C=this._trackByFn(h,x),null!==a&&Object.is(a.trackById,C)?(d&&(a=this._verifyReinsertion(a,x,C,h)),Object.is(a.item,x)||this._addIdentityChange(a,x)):(a=this._mismatch(a,x,C,h),d=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,a,d,h){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._reinsertAfter(r,v,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._moveAfter(r,v,h)):r=this._addAfter(new PM(a,d),v,h),r}_verifyReinsertion(r,a,d,h){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?r=this._reinsertAfter(v,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const a=r._next;this._addToRemovals(this._unlink(r)),r=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,a,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,v=r._nextRemoved;return null===h?this._removalsHead=v:h._nextRemoved=v,null===v?this._removalsTail=h:v._prevRemoved=h,this._insertAfter(r,a,d),this._addToMoves(r,d),r}_moveAfter(r,a,d){return this._unlink(r),this._insertAfter(r,a,d),this._addToMoves(r,d),r}_addAfter(r,a,d){return this._insertAfter(r,a,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,a,d){const h=null===a?this._itHead:a._next;return r._next=h,r._prev=a,null===h?this._itTail=r:h._prev=r,null===a?this._itHead=r:a._next=r,null===this._linkedRecords&&(this._linkedRecords=new FT),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const a=r._prev,d=r._next;return null===a?this._itHead=d:a._next=d,null===d?this._itTail=a:d._prev=a,r}_addToMoves(r,a){return r.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FT),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,a){return r.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class PM{constructor(r,a){this.item=r,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class NM{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,a){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===a||a<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const a=r._prevDup,d=r._nextDup;return null===a?this._head=d:a._nextDup=d,null===d?this._tail=a:d._prevDup=a,null===this._head}}class FT{constructor(){this.map=new Map}put(r){const a=r.trackById;let d=this.map.get(a);d||(d=new NM,this.map.set(a,d)),d.add(r)}get(r,a){const h=this.map.get(r);return h?h.get(r,a):null}remove(r){const a=r.trackById;return this.map.get(a).remove(r)&&this.map.delete(a),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LT(t,r,a){const d=t.previousIndex;if(null===d)return d;let h=0;return a&&d<a.length&&(h=a[d]),d+r+h}class VT{constructor(){}supports(r){return r instanceof Map||dw(r)}create(){return new kM}}class kM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let a;for(a=this._mapHead;null!==a;a=a._next)r(a)}forEachPreviousItem(r){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)r(a)}forEachChangedItem(r){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}diff(r){if(r){if(!(r instanceof Map||dw(r)))throw new on(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,d),this._appendAfter=a,a=a._next;else{const v=this._getOrCreateRecordForKey(h,d);a=this._insertBeforeOrAppend(a,v)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let d=a;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,a){if(r){const d=r._prev;return a._next=r,a._prev=d,r._prev=a,d&&(d._next=a),r===this._mapHead&&(this._mapHead=a),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(r,a){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,a);const v=h._prev,C=h._next;return v&&(v._next=C),C&&(C._prev=v),h._next=null,h._prev=null,h}const d=new FM(r);return this._records.set(r,d),d.currentValue=a,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,a){Object.is(a,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=a,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,a){r instanceof Map?r.forEach(a):Object.keys(r).forEach(d=>a(r[d],d))}}class FM{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function BT(){return new hC([new kT])}let hC=(()=>{class t{static#e=this.\u0275prov=Tn({token:t,providedIn:"root",factory:BT});constructor(a){this.factories=a}static create(a,d){if(null!=d){const h=d.factories.slice();a=a.concat(h)}return new t(a)}static extend(a){return{provide:t,useFactory:d=>t.create(a,d||BT()),deps:[[t,new ia,new To]]}}find(a){const d=this.factories.find(h=>h.supports(a));if(null!=d)return d;throw new on(901,!1)}}return t})();function UT(){return new pC([new VT])}let pC=(()=>{class t{static#e=this.\u0275prov=Tn({token:t,providedIn:"root",factory:UT});constructor(a){this.factories=a}static create(a,d){if(d){const h=d.factories.slice();a=a.concat(h)}return new t(a)}static extend(a){return{provide:t,useFactory:d=>t.create(a,d||UT()),deps:[[t,new ia,new To]]}}find(a){const d=this.factories.find(h=>h.supports(a));if(d)return d;throw new on(901,!1)}}return t})();function JM(t){try{const{rootComponent:r,appProviders:a,platformProviders:d}=t,h=function bM(t=[]){if(Lp)return Lp;const r=function ST(t=[],r){return Ms.create({name:r,providers:[{provide:Kl,useValue:"platform"},{provide:aC,useValue:new Set([()=>Lp=null])},...t]})}(t);return Lp=r,function yT(){!function ki(t){Xt=t}(()=>{throw new on(600,!1)})}(),function DT(t){t.get(Jm,null)?.forEach(a=>a())}(r),r}(d),v=[iC({}),{provide:Td,useExisting:Zv},...a||[]],x=new gI({providers:v,parent:h,debugName:"",runEnvironmentInitializers:!1}).injector,N=x.get(zo);return N.run(()=>{x.resolveInjectorInitializers();const q=x.get(ku,null);let J;N.runOutsideAngular(()=>{J=N.onError.subscribe({next:je=>{q.handleError(je)}})});const fe=()=>x.destroy(),xe=h.get(aC);return xe.add(fe),x.onDestroy(()=>{J.unsubscribe(),xe.delete(fe)}),function ET(t,r,a){try{const d=a();return nC(d)?d.catch(h=>{throw r.runOutsideAngular(()=>t.handleError(h)),h}):d}catch(d){throw r.runOutsideAngular(()=>t.handleError(d)),d}}(q,N,()=>{const je=x.get(rC);return je.runInitializers(),je.donePromise.then(()=>{!function SA(t){"string"==typeof t&&(xA=t.toLowerCase().replace(/_/g,"-"))}(x.get(Zy,m0)||m0);const Rt=x.get(Dd);return void 0!==r&&Rt.bootstrap(r),Rt})})})}catch(r){return Promise.reject(r)}}function EO(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function CO(t){const r=ye(null);try{return t()}finally{ye(r)}}function SO(t){const r=ke(t);if(!r)return null;const a=new kv(r);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7440:(Cn,It,ie)=>{ie.d(It,{MW:()=>vt,Wp:()=>pn,XU:()=>We,gL:()=>nt});var D=ie(2214),R=ie(3953),V=ie(3586);class We{constructor(dt){return dt}}class nt{constructor(){return(0,D.Dk)()}}const Xe=new R.nKC("angularfire2._apps"),ct={provide:We,useFactory:function Ct(wt){return wt&&1===wt.length?wt[0]:new We((0,D.Sx)())},deps:[[new R.Xx1,Xe]]},Ee={provide:nt,deps:[[new R.Xx1,Xe]]};function be(wt){return(dt,kt)=>{const xt=kt.get(R.Agw);(0,D.KO)("angularfire",V.xv.full,"core"),(0,D.KO)("angularfire",V.xv.full,"app"),(0,D.KO)("angular",R.xvI.full,xt.toString());const Ht=dt.runOutsideAngular(()=>wt(kt));return new We(Ht)}}function vt(wt,...dt){return(0,R.EmA)([ct,Ee,{provide:Xe,useFactory:be(wt),multi:!0,deps:[R.SKi,R.zZn,V.u0,...dt]}])}const pn=(0,V.S3)(D.Wp,!0)},6335:(Cn,It,ie)=>{ie.d(It,{Nj:()=>be,DF:()=>Oe,wh:()=>Ot,eJ:()=>gt,xI:()=>Xt,_q:()=>cr,x9:()=>an,df:()=>xi});var D=ie(3586),R=ie(3953),V=ie(7440),We=ie(2214),nt=ie(6114),ye=ie(1985);function Ct(fr){return new ye.c(function(he){return{unsubscribe:(0,nt.hg)(fr,he.next.bind(he),he.error.bind(he),he.complete.bind(he))}})}class be{constructor(he){return he}}class Oe{constructor(){return(0,D.CA)("auth")}}const ze=new R.nKC("angularfire2.auth-instances");function Ut(fr){return(he,tt)=>{const Ae=he.runOutsideAngular(()=>fr(tt));return new be(Ae)}}const pn={provide:Oe,deps:[[new R.Xx1,ze]]},$t={provide:be,useFactory:function At(fr,he){const tt=(0,D.lR)("auth",fr,he);return tt&&new be(tt)},deps:[[new R.Xx1,ze],V.XU]};function cr(fr,...he){return(0,We.KO)("angularfire",D.xv.full,"auth"),(0,R.EmA)([$t,pn,{provide:ze,useFactory:Ut(fr),multi:!0,deps:[R.SKi,R.zZn,D.u0,V.gL,[new R.Xx1,D.Jv],...he]}])}const Ot=(0,D.S3)(Ct,!0),gt=(0,D.S3)(nt.eJ,!0),Xt=(0,D.S3)(nt.xI,!0),an=(0,D.S3)(nt.x9,!0),xi=(0,D.S3)(nt.df,!0)},2418:(Cn,It,ie)=>{ie.d(It,{_7:()=>df,gS:()=>mE,rJ:()=>i,xs:()=>iv,kd:()=>l,H9:()=>b,x7:()=>Ye,GG:()=>Gt,aU:()=>er,hV:()=>nv,P:()=>P1,mZ:()=>k1,_M:()=>Bg});var vt,ze,D=ie(3586),R=ie(3953),V=ie(7440),We=ie(6335),nt=ie(2214),ye=ie(467),Ct=ie(7852),Xe=ie(1362),ct=ie(8041),Ee=ie(1076),be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oe={};(function(){var p;function f(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function _(Ze,Me,Ge){Ge||(Ge=0);var et=Array(16);if("string"==typeof Me)for(var ot=0;16>ot;++ot)et[ot]=Me.charCodeAt(Ge++)|Me.charCodeAt(Ge++)<<8|Me.charCodeAt(Ge++)<<16|Me.charCodeAt(Ge++)<<24;else for(ot=0;16>ot;++ot)et[ot]=Me[Ge++]|Me[Ge++]<<8|Me[Ge++]<<16|Me[Ge++]<<24;var yt=Ze.g[3],Be=(Me=Ze.g[0])+(yt^(Ge=Ze.g[1])&((ot=Ze.g[2])^yt))+et[0]+3614090360&4294967295;Be=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=(Ge=(ot=(yt=(Me=Ge+(Be<<7&4294967295|Be>>>25))+((Be=yt+(ot^Me&(Ge^ot))+et[1]+3905402710&4294967295)<<12&4294967295|Be>>>20))+((Be=ot+(Ge^yt&(Me^Ge))+et[2]+606105819&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Me^ot&(yt^Me))+et[3]+3250441966&4294967295)<<22&4294967295|Be>>>10))+((Be=Me+(yt^Ge&(ot^yt))+et[4]+4118548399&4294967295)<<7&4294967295|Be>>>25))+((Be=yt+(ot^Me&(Ge^ot))+et[5]+1200080426&4294967295)<<12&4294967295|Be>>>20))+((Be=ot+(Ge^yt&(Me^Ge))+et[6]+2821735955&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Me^ot&(yt^Me))+et[7]+4249261313&4294967295)<<22&4294967295|Be>>>10))+((Be=Me+(yt^Ge&(ot^yt))+et[8]+1770035416&4294967295)<<7&4294967295|Be>>>25))+((Be=yt+(ot^Me&(Ge^ot))+et[9]+2336552879&4294967295)<<12&4294967295|Be>>>20))+((Be=ot+(Ge^yt&(Me^Ge))+et[10]+4294925233&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Me^ot&(yt^Me))+et[11]+2304563134&4294967295)<<22&4294967295|Be>>>10))+((Be=Me+(yt^Ge&(ot^yt))+et[12]+1804603682&4294967295)<<7&4294967295|Be>>>25))+((Be=yt+(ot^Me&(Ge^ot))+et[13]+4254626195&4294967295)<<12&4294967295|Be>>>20))+((Be=ot+(Ge^yt&(Me^Ge))+et[14]+2792965006&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Me^ot&(yt^Me))+et[15]+1236535329&4294967295)<<22&4294967295|Be>>>10))+((Be=Me+(ot^yt&(Ge^ot))+et[1]+4129170786&4294967295)<<5&4294967295|Be>>>27))+((Be=yt+(Ge^ot&(Me^Ge))+et[6]+3225465664&4294967295)<<9&4294967295|Be>>>23))+((Be=ot+(Me^Ge&(yt^Me))+et[11]+643717713&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(yt^Me&(ot^yt))+et[0]+3921069994&4294967295)<<20&4294967295|Be>>>12))+((Be=Me+(ot^yt&(Ge^ot))+et[5]+3593408605&4294967295)<<5&4294967295|Be>>>27))+((Be=yt+(Ge^ot&(Me^Ge))+et[10]+38016083&4294967295)<<9&4294967295|Be>>>23))+((Be=ot+(Me^Ge&(yt^Me))+et[15]+3634488961&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(yt^Me&(ot^yt))+et[4]+3889429448&4294967295)<<20&4294967295|Be>>>12))+((Be=Me+(ot^yt&(Ge^ot))+et[9]+568446438&4294967295)<<5&4294967295|Be>>>27))+((Be=yt+(Ge^ot&(Me^Ge))+et[14]+3275163606&4294967295)<<9&4294967295|Be>>>23))+((Be=ot+(Me^Ge&(yt^Me))+et[3]+4107603335&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(yt^Me&(ot^yt))+et[8]+1163531501&4294967295)<<20&4294967295|Be>>>12))+((Be=Me+(ot^yt&(Ge^ot))+et[13]+2850285829&4294967295)<<5&4294967295|Be>>>27))+((Be=yt+(Ge^ot&(Me^Ge))+et[2]+4243563512&4294967295)<<9&4294967295|Be>>>23))+((Be=ot+(Me^Ge&(yt^Me))+et[7]+1735328473&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(yt^Me&(ot^yt))+et[12]+2368359562&4294967295)<<20&4294967295|Be>>>12))+((Be=Me+(Ge^ot^yt)+et[5]+4294588738&4294967295)<<4&4294967295|Be>>>28))+((Be=yt+(Me^Ge^ot)+et[8]+2272392833&4294967295)<<11&4294967295|Be>>>21))+((Be=ot+(yt^Me^Ge)+et[11]+1839030562&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(ot^yt^Me)+et[14]+4259657740&4294967295)<<23&4294967295|Be>>>9))+((Be=Me+(Ge^ot^yt)+et[1]+2763975236&4294967295)<<4&4294967295|Be>>>28))+((Be=yt+(Me^Ge^ot)+et[4]+1272893353&4294967295)<<11&4294967295|Be>>>21))+((Be=ot+(yt^Me^Ge)+et[7]+4139469664&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(ot^yt^Me)+et[10]+3200236656&4294967295)<<23&4294967295|Be>>>9))+((Be=Me+(Ge^ot^yt)+et[13]+681279174&4294967295)<<4&4294967295|Be>>>28))+((Be=yt+(Me^Ge^ot)+et[0]+3936430074&4294967295)<<11&4294967295|Be>>>21))+((Be=ot+(yt^Me^Ge)+et[3]+3572445317&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(ot^yt^Me)+et[6]+76029189&4294967295)<<23&4294967295|Be>>>9))+((Be=Me+(Ge^ot^yt)+et[9]+3654602809&4294967295)<<4&4294967295|Be>>>28))+((Be=yt+(Me^Ge^ot)+et[12]+3873151461&4294967295)<<11&4294967295|Be>>>21))+((Be=ot+(yt^Me^Ge)+et[15]+530742520&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(ot^yt^Me)+et[2]+3299628645&4294967295)<<23&4294967295|Be>>>9))+((Be=Me+(ot^(Ge|~yt))+et[0]+4096336452&4294967295)<<6&4294967295|Be>>>26))+((Be=yt+(Ge^(Me|~ot))+et[7]+1126891415&4294967295)<<10&4294967295|Be>>>22))+((Be=ot+(Me^(yt|~Ge))+et[14]+2878612391&4294967295)<<15&4294967295|Be>>>17))+((Be=Ge+(yt^(ot|~Me))+et[5]+4237533241&4294967295)<<21&4294967295|Be>>>11))+((Be=Me+(ot^(Ge|~yt))+et[12]+1700485571&4294967295)<<6&4294967295|Be>>>26))+((Be=yt+(Ge^(Me|~ot))+et[3]+2399980690&4294967295)<<10&4294967295|Be>>>22))+((Be=ot+(Me^(yt|~Ge))+et[10]+4293915773&4294967295)<<15&4294967295|Be>>>17))+((Be=Ge+(yt^(ot|~Me))+et[1]+2240044497&4294967295)<<21&4294967295|Be>>>11))+((Be=Me+(ot^(Ge|~yt))+et[8]+1873313359&4294967295)<<6&4294967295|Be>>>26))+((Be=yt+(Ge^(Me|~ot))+et[15]+4264355552&4294967295)<<10&4294967295|Be>>>22))+((Be=ot+(Me^(yt|~Ge))+et[6]+2734768916&4294967295)<<15&4294967295|Be>>>17))+((Be=Ge+(yt^(ot|~Me))+et[13]+1309151649&4294967295)<<21&4294967295|Be>>>11))+((yt=(Me=Ge+((Be=Me+(ot^(Ge|~yt))+et[4]+4149444226&4294967295)<<6&4294967295|Be>>>26))+((Be=yt+(Ge^(Me|~ot))+et[11]+3174756917&4294967295)<<10&4294967295|Be>>>22))^((ot=yt+((Be=ot+(Me^(yt|~Ge))+et[2]+718787259&4294967295)<<15&4294967295|Be>>>17))|~Me))+et[9]+3951481745&4294967295,Ze.g[0]=Ze.g[0]+Me&4294967295,Ze.g[1]=Ze.g[1]+(ot+(Be<<21&4294967295|Be>>>11))&4294967295,Ze.g[2]=Ze.g[2]+ot&4294967295,Ze.g[3]=Ze.g[3]+yt&4294967295}function T(Ze,Me){this.h=Me;for(var Ge=[],et=!0,ot=Ze.length-1;0<=ot;ot--){var yt=0|Ze[ot];et&&yt==Me||(Ge[ot]=yt,et=!1)}this.g=Ge}(function o(Ze,Me){function Ge(){}Ge.prototype=Me.prototype,Ze.D=Me.prototype,Ze.prototype=new Ge,Ze.prototype.constructor=Ze,Ze.C=function(et,ot,yt){for(var Be=Array(arguments.length-2),wd=2;wd<arguments.length;wd++)Be[wd-2]=arguments[wd];return Me.prototype[ot].apply(et,Be)}})(f,function u(){this.blockSize=-1}),f.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},f.prototype.u=function(Ze,Me){void 0===Me&&(Me=Ze.length);for(var Ge=Me-this.blockSize,et=this.B,ot=this.h,yt=0;yt<Me;){if(0==ot)for(;yt<=Ge;)_(this,Ze,yt),yt+=this.blockSize;if("string"==typeof Ze){for(;yt<Me;)if(et[ot++]=Ze.charCodeAt(yt++),ot==this.blockSize){_(this,et),ot=0;break}}else for(;yt<Me;)if(et[ot++]=Ze[yt++],ot==this.blockSize){_(this,et),ot=0;break}}this.h=ot,this.o+=Me},f.prototype.v=function(){var Ze=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Ze[0]=128;for(var Me=1;Me<Ze.length-8;++Me)Ze[Me]=0;var Ge=8*this.o;for(Me=Ze.length-8;Me<Ze.length;++Me)Ze[Me]=255&Ge,Ge/=256;for(this.u(Ze),Ze=Array(16),Me=Ge=0;4>Me;++Me)for(var et=0;32>et;et+=8)Ze[Ge++]=this.g[Me]>>>et&255;return Ze};var L={};function G(Ze){return-128<=Ze&&128>Ze?function w(Ze,Me){var Ge=L;return Object.prototype.hasOwnProperty.call(Ge,Ze)?Ge[Ze]:Ge[Ze]=Me(Ze)}(Ze,function(Me){return new T([0|Me],0>Me?-1:0)}):new T([0|Ze],0>Ze?-1:0)}function Q(Ze){if(isNaN(Ze)||!isFinite(Ze))return we;if(0>Ze)return jt(Q(-Ze));for(var Me=[],Ge=1,et=0;Ze>=Ge;et++)Me[et]=Ze/Ge|0,Ge*=4294967296;return new T(Me,0)}var we=G(0),Fe=G(1),pt=G(16777216);function Lt(Ze){if(0!=Ze.h)return!1;for(var Me=0;Me<Ze.g.length;Me++)if(0!=Ze.g[Me])return!1;return!0}function en(Ze){return-1==Ze.h}function jt(Ze){for(var Me=Ze.g.length,Ge=[],et=0;et<Me;et++)Ge[et]=~Ze.g[et];return new T(Ge,~Ze.h).add(Fe)}function Sn(Ze,Me){return Ze.add(jt(Me))}function zn(Ze,Me){for(;(65535&Ze[Me])!=Ze[Me];)Ze[Me+1]+=Ze[Me]>>>16,Ze[Me]&=65535,Me++}function Fn(Ze,Me){this.g=Ze,this.h=Me}function vr(Ze,Me){if(Lt(Me))throw Error("division by zero");if(Lt(Ze))return new Fn(we,we);if(en(Ze))return Me=vr(jt(Ze),Me),new Fn(jt(Me.g),jt(Me.h));if(en(Me))return Me=vr(Ze,jt(Me)),new Fn(jt(Me.g),Me.h);if(30<Ze.g.length){if(en(Ze)||en(Me))throw Error("slowDivide_ only works with positive integers.");for(var Ge=Fe,et=Me;0>=et.l(Ze);)Ge=ci(Ge),et=ci(et);var ot=Or(Ge,1),yt=Or(et,1);for(et=Or(et,2),Ge=Or(Ge,2);!Lt(et);){var Be=yt.add(et);0>=Be.l(Ze)&&(ot=ot.add(Ge),yt=Be),et=Or(et,1),Ge=Or(Ge,1)}return Me=Sn(Ze,ot.j(Me)),new Fn(ot,Me)}for(ot=we;0<=Ze.l(Me);){for(Ge=Math.max(1,Math.floor(Ze.m()/Me.m())),et=48>=(et=Math.ceil(Math.log(Ge)/Math.LN2))?1:Math.pow(2,et-48),Be=(yt=Q(Ge)).j(Me);en(Be)||0<Be.l(Ze);)Be=(yt=Q(Ge-=et)).j(Me);Lt(yt)&&(yt=Fe),ot=ot.add(yt),Ze=Sn(Ze,Be)}return new Fn(ot,Ze)}function ci(Ze){for(var Me=Ze.g.length+1,Ge=[],et=0;et<Me;et++)Ge[et]=Ze.i(et)<<1|Ze.i(et-1)>>>31;return new T(Ge,Ze.h)}function Or(Ze,Me){var Ge=Me>>5;Me%=32;for(var et=Ze.g.length-Ge,ot=[],yt=0;yt<et;yt++)ot[yt]=0<Me?Ze.i(yt+Ge)>>>Me|Ze.i(yt+Ge+1)<<32-Me:Ze.i(yt+Ge);return new T(ot,Ze.h)}(p=T.prototype).m=function(){if(en(this))return-jt(this).m();for(var Ze=0,Me=1,Ge=0;Ge<this.g.length;Ge++){var et=this.i(Ge);Ze+=(0<=et?et:4294967296+et)*Me,Me*=4294967296}return Ze},p.toString=function(Ze){if(2>(Ze=Ze||10)||36<Ze)throw Error("radix out of range: "+Ze);if(Lt(this))return"0";if(en(this))return"-"+jt(this).toString(Ze);for(var Me=Q(Math.pow(Ze,6)),Ge=this,et="";;){var ot=vr(Ge,Me).g,yt=((0<(Ge=Sn(Ge,ot.j(Me))).g.length?Ge.g[0]:Ge.h)>>>0).toString(Ze);if(Lt(Ge=ot))return yt+et;for(;6>yt.length;)yt="0"+yt;et=yt+et}},p.i=function(Ze){return 0>Ze?0:Ze<this.g.length?this.g[Ze]:this.h},p.l=function(Ze){return en(Ze=Sn(this,Ze))?-1:Lt(Ze)?0:1},p.abs=function(){return en(this)?jt(this):this},p.add=function(Ze){for(var Me=Math.max(this.g.length,Ze.g.length),Ge=[],et=0,ot=0;ot<=Me;ot++){var yt=et+(65535&this.i(ot))+(65535&Ze.i(ot)),Be=(yt>>>16)+(this.i(ot)>>>16)+(Ze.i(ot)>>>16);et=Be>>>16,Ge[ot]=(Be&=65535)<<16|(yt&=65535)}return new T(Ge,-2147483648&Ge[Ge.length-1]?-1:0)},p.j=function(Ze){if(Lt(this)||Lt(Ze))return we;if(en(this))return en(Ze)?jt(this).j(jt(Ze)):jt(jt(this).j(Ze));if(en(Ze))return jt(this.j(jt(Ze)));if(0>this.l(pt)&&0>Ze.l(pt))return Q(this.m()*Ze.m());for(var Me=this.g.length+Ze.g.length,Ge=[],et=0;et<2*Me;et++)Ge[et]=0;for(et=0;et<this.g.length;et++)for(var ot=0;ot<Ze.g.length;ot++){var yt=this.i(et)>>>16,Be=65535&this.i(et),wd=Ze.i(ot)>>>16,Ug=65535&Ze.i(ot);Ge[2*et+2*ot]+=Be*Ug,zn(Ge,2*et+2*ot),Ge[2*et+2*ot+1]+=yt*Ug,zn(Ge,2*et+2*ot+1),Ge[2*et+2*ot+1]+=Be*wd,zn(Ge,2*et+2*ot+1),Ge[2*et+2*ot+2]+=yt*wd,zn(Ge,2*et+2*ot+2)}for(et=0;et<Me;et++)Ge[et]=Ge[2*et+1]<<16|Ge[2*et];for(et=Me;et<2*Me;et++)Ge[et]=0;return new T(Ge,0)},p.A=function(Ze){return vr(this,Ze).h},p.and=function(Ze){for(var Me=Math.max(this.g.length,Ze.g.length),Ge=[],et=0;et<Me;et++)Ge[et]=this.i(et)&Ze.i(et);return new T(Ge,this.h&Ze.h)},p.or=function(Ze){for(var Me=Math.max(this.g.length,Ze.g.length),Ge=[],et=0;et<Me;et++)Ge[et]=this.i(et)|Ze.i(et);return new T(Ge,this.h|Ze.h)},p.xor=function(Ze){for(var Me=Math.max(this.g.length,Ze.g.length),Ge=[],et=0;et<Me;et++)Ge[et]=this.i(et)^Ze.i(et);return new T(Ge,this.h^Ze.h)},f.prototype.digest=f.prototype.v,f.prototype.reset=f.prototype.s,f.prototype.update=f.prototype.u,ze=Oe.Md5=f,T.prototype.add=T.prototype.add,T.prototype.multiply=T.prototype.j,T.prototype.modulo=T.prototype.A,T.prototype.compare=T.prototype.l,T.prototype.toNumber=T.prototype.m,T.prototype.toString=T.prototype.toString,T.prototype.getBits=T.prototype.i,T.fromNumber=Q,T.fromString=function ce(Ze,Me){if(0==Ze.length)throw Error("number format error: empty string");if(2>(Me=Me||10)||36<Me)throw Error("radix out of range: "+Me);if("-"==Ze.charAt(0))return jt(ce(Ze.substring(1),Me));if(0<=Ze.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ge=Q(Math.pow(Me,8)),et=we,ot=0;ot<Ze.length;ot+=8){var yt=Math.min(8,Ze.length-ot),Be=parseInt(Ze.substring(ot,ot+yt),Me);8>yt?(yt=Q(Math.pow(Me,yt)),et=et.j(yt).add(Q(Be))):et=(et=et.j(Ge)).add(Q(Be))}return et},vt=Oe.Integer=T}).apply(typeof be<"u"?be:typeof self<"u"?self:typeof window<"u"?window:{});var pn,$t,Xn,cr,Ot,wt,dt,kt,xt,At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ut={};(function(){var p,o="function"==typeof Object.defineProperties?Object.defineProperty:function(I,$,ee){return I==Array.prototype||I==Object.prototype||(I[$]=ee.value),I},f=function u(I){I=["object"==typeof globalThis&&globalThis,I,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof At&&At];for(var $=0;$<I.length;++$){var ee=I[$];if(ee&&ee.Math==Math)return ee}throw Error("Cannot find global object")}(this);!function _(I,$){if($)e:{var ee=f;I=I.split(".");for(var me=0;me<I.length-1;me++){var at=I[me];if(!(at in ee))break e;ee=ee[at]}($=$(me=ee[I=I[I.length-1]]))!=me&&null!=$&&o(ee,I,{configurable:!0,writable:!0,value:$})}}("Array.prototype.values",function(I){return I||function(){return function w(I,$){I instanceof String&&(I+="");var ee=0,me=!1,at={next:function(){if(!me&&ee<I.length){var Tt=ee++;return{value:$(Tt,I[Tt]),done:!1}}return me=!0,{done:!0,value:void 0}}};return at[Symbol.iterator]=function(){return at},at}(this,function($,ee){return ee})}});var T=T||{},L=this||self;function G(I){var $=typeof I;return"array"==($="object"!=$?$:I?Array.isArray(I)?"array":$:"null")||"object"==$&&"number"==typeof I.length}function Q(I){var $=typeof I;return"object"==$&&null!=I||"function"==$}function ce(I,$,ee){return I.call.apply(I.bind,arguments)}function we(I,$,ee){if(!I)throw Error();if(2<arguments.length){var me=Array.prototype.slice.call(arguments,2);return function(){var at=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(at,me),I.apply($,at)}}return function(){return I.apply($,arguments)}}function Fe(I,$,ee){return(Fe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ce:we).apply(null,arguments)}function pt(I,$){var ee=Array.prototype.slice.call(arguments,1);return function(){var me=ee.slice();return me.push.apply(me,arguments),I.apply(this,me)}}function Lt(I,$){function ee(){}ee.prototype=$.prototype,I.aa=$.prototype,I.prototype=new ee,I.prototype.constructor=I,I.Qb=function(me,at,Tt){for(var fn=Array(arguments.length-2),io=2;io<arguments.length;io++)fn[io-2]=arguments[io];return $.prototype[at].apply(me,fn)}}function en(I){const $=I.length;if(0<$){const ee=Array($);for(let me=0;me<$;me++)ee[me]=I[me];return ee}return[]}function jt(I,$){for(let ee=1;ee<arguments.length;ee++){const me=arguments[ee];if(G(me)){const at=I.length||0,Tt=me.length||0;I.length=at+Tt;for(let fn=0;fn<Tt;fn++)I[at+fn]=me[fn]}else I.push(me)}}function zn(I){return/^[\s\xa0]*$/.test(I)}function Fn(){var I=L.navigator;return I&&(I=I.userAgent)?I:""}function vr(I){return vr[" "](I),I}vr[" "]=function(){};var ci=!(-1==Fn().indexOf("Gecko")||-1!=Fn().toLowerCase().indexOf("webkit")&&-1==Fn().indexOf("Edge")||-1!=Fn().indexOf("Trident")||-1!=Fn().indexOf("MSIE")||-1!=Fn().indexOf("Edge"));function Or(I,$,ee){for(const me in I)$.call(ee,I[me],me,I)}function Me(I){const $={};for(const ee in I)$[ee]=I[ee];return $}const Ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(I,$){let ee,me;for(let at=1;at<arguments.length;at++){for(ee in me=arguments[at],me)I[ee]=me[ee];for(let Tt=0;Tt<Ge.length;Tt++)ee=Ge[Tt],Object.prototype.hasOwnProperty.call(me,ee)&&(I[ee]=me[ee])}}function ot(I){var $=1;I=I.split(":");const ee=[];for(;0<$&&I.length;)ee.push(I.shift()),$--;return I.length&&ee.push(I.join(":")),ee}function yt(I){L.setTimeout(()=>{throw I},0)}function Be(){var I=D_;let $=null;return I.g&&($=I.g,I.g=I.g.next,I.g||(I.h=null),$.next=null),$}var Ug=new class Sn{constructor($,ee){this.i=$,this.j=ee,this.h=0,this.g=null}get(){let $;return 0<this.h?(this.h--,$=this.g,this.g=$.next,$.next=null):$=this.i(),$}}(()=>new DE,I=>I.reset());class DE{constructor(){this.next=this.g=this.h=null}set($,ee){this.h=$,this.g=ee,this.next=null}reset(){this.next=this.g=this.h=null}}let jg,Ip=!1,D_=new class wd{constructor(){this.h=this.g=null}add($,ee){const me=Ug.get();me.set($,ee),this.h?this.h.next=me:this.g=me,this.h=me}},L1=()=>{const I=L.Promise.resolve(void 0);jg=()=>{I.then(RE)}};var RE=()=>{for(var I;I=Be();){try{I.h.call(I.g)}catch(ee){yt(ee)}var $=Ug;$.j(I),100>$.h&&($.h++,I.next=$.g,$.g=I)}Ip=!1};function gs(){this.s=this.s,this.C=this.C}function ja(I,$){this.type=I,this.g=this.target=$,this.defaultPrevented=!1}gs.prototype.s=!1,gs.prototype.ma=function(){this.s||(this.s=!0,this.N())},gs.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ja.prototype.h=function(){this.defaultPrevented=!0};var ME=function(){if(!L.addEventListener||!Object.defineProperty)return!1;var I=!1,$=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const ee=()=>{};L.addEventListener("test",ee,$),L.removeEventListener("test",ee,$)}catch{}return I}();function R_(I,$){if(ja.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var ee=this.type=I.type,me=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=$,$=I.relatedTarget){if(ci){e:{try{vr($.nodeName);var at=!0;break e}catch{}at=!1}at||($=null)}}else"mouseover"==ee?$=I.fromElement:"mouseout"==ee&&($=I.toElement);this.relatedTarget=$,me?(this.clientX=void 0!==me.clientX?me.clientX:me.pageX,this.clientY=void 0!==me.clientY?me.clientY:me.pageY,this.screenX=me.screenX||0,this.screenY=me.screenY||0):(this.clientX=void 0!==I.clientX?I.clientX:I.pageX,this.clientY=void 0!==I.clientY?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType="string"==typeof I.pointerType?I.pointerType:cv[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&R_.aa.h.call(this)}}Lt(R_,ja);var cv={2:"touch",3:"pen",4:"mouse"};R_.prototype.h=function(){R_.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var Ap="closure_listenable_"+(1e6*Math.random()|0),OE=0;function PE(I,$,ee,me,at){this.listener=I,this.proxy=null,this.src=$,this.type=ee,this.capture=!!me,this.ha=at,this.key=++OE,this.da=this.fa=!1}function M_(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function Hg(I){this.src=I,this.g={},this.h=0}function uv(I,$){var ee=$.type;if(ee in I.g){var Tt,me=I.g[ee],at=Array.prototype.indexOf.call(me,$,void 0);(Tt=0<=at)&&Array.prototype.splice.call(me,at,1),Tt&&(M_($),0==I.g[ee].length&&(delete I.g[ee],I.h--))}}function lv(I,$,ee,me){for(var at=0;at<I.length;++at){var Tt=I[at];if(!Tt.da&&Tt.listener==$&&Tt.capture==!!ee&&Tt.ha==me)return at}return-1}Hg.prototype.add=function(I,$,ee,me,at){var Tt=I.toString();(I=this.g[Tt])||(I=this.g[Tt]=[],this.h++);var fn=lv(I,$,me,at);return-1<fn?($=I[fn],ee||($.fa=!1)):(($=new PE($,this.src,Tt,!!me,at)).fa=ee,I.push($)),$};var Gg="closure_lm_"+(1e6*Math.random()|0),dv={};function V1(I,$,ee,me,at){if(me&&me.once)return U1(I,$,ee,me,at);if(Array.isArray($)){for(var Tt=0;Tt<$.length;Tt++)V1(I,$[Tt],ee,me,at);return null}return ee=bp(ee),I&&I[Ap]?I.K($,ee,Q(me)?!!me.capture:!!me,at):B1(I,$,ee,!1,me,at)}function B1(I,$,ee,me,at,Tt){if(!$)throw Error("Invalid event type");var fn=Q(at)?!!at.capture:!!at,io=O_(I);if(io||(I[Gg]=io=new Hg(I)),(ee=io.add($,ee,me,fn,Tt)).proxy)return ee;if(me=function NE(){const $=kE;return function I(ee){return $.call(I.src,I.listener,ee)}}(),ee.proxy=me,me.src=I,me.listener=ee,I.addEventListener)ME||(at=fn),void 0===at&&(at=!1),I.addEventListener($.toString(),me,at);else if(I.attachEvent)I.attachEvent(j1($.toString()),me);else{if(!I.addListener||!I.removeListener)throw Error("addEventListener and attachEvent are unavailable.");I.addListener(me)}return ee}function U1(I,$,ee,me,at){if(Array.isArray($)){for(var Tt=0;Tt<$.length;Tt++)U1(I,$[Tt],ee,me,at);return null}return ee=bp(ee),I&&I[Ap]?I.L($,ee,Q(me)?!!me.capture:!!me,at):B1(I,$,ee,!0,me,at)}function ll(I,$,ee,me,at){if(Array.isArray($))for(var Tt=0;Tt<$.length;Tt++)ll(I,$[Tt],ee,me,at);else me=Q(me)?!!me.capture:!!me,ee=bp(ee),I&&I[Ap]?(I=I.i,($=String($).toString())in I.g&&-1<(ee=lv(Tt=I.g[$],ee,me,at))&&(M_(Tt[ee]),Array.prototype.splice.call(Tt,ee,1),0==Tt.length&&(delete I.g[$],I.h--))):I&&(I=O_(I))&&($=I.g[$.toString()],I=-1,$&&(I=lv($,ee,me,at)),(ee=-1<I?$[I]:null)&&$g(ee))}function $g(I){if("number"!=typeof I&&I&&!I.da){var $=I.src;if($&&$[Ap])uv($.i,I);else{var ee=I.type,me=I.proxy;$.removeEventListener?$.removeEventListener(ee,me,I.capture):$.detachEvent?$.detachEvent(j1(ee),me):$.addListener&&$.removeListener&&$.removeListener(me),(ee=O_($))?(uv(ee,I),0==ee.h&&(ee.src=null,$[Gg]=null)):M_(I)}}}function j1(I){return I in dv?dv[I]:dv[I]="on"+I}function kE(I,$){if(I.da)I=!0;else{$=new R_($,this);var ee=I.listener,me=I.ha||I.src;I.fa&&$g(I),I=ee.call(me,$)}return I}function O_(I){return(I=I[Gg])instanceof Hg?I:null}var P_="__closure_events_fn_"+(1e9*Math.random()>>>0);function bp(I){return"function"==typeof I?I:(I[P_]||(I[P_]=function($){return I.handleEvent($)}),I[P_])}function oa(){gs.call(this),this.i=new Hg(this),this.M=this,this.F=null}function kc(I,$){var ee,me=I.F;if(me)for(ee=[];me;me=me.F)ee.push(me);if(I=I.M,me=$.type||$,"string"==typeof $)$=new ja($,I);else if($ instanceof ja)$.target=$.target||I;else{var at=$;et($=new ja(me,I),at)}if(at=!0,ee)for(var Tt=ee.length-1;0<=Tt;Tt--){var fn=$.g=ee[Tt];at=zg(fn,me,!0,$)&&at}if(at=zg(fn=$.g=I,me,!0,$)&&at,at=zg(fn,me,!1,$)&&at,ee)for(Tt=0;Tt<ee.length;Tt++)at=zg(fn=$.g=ee[Tt],me,!1,$)&&at}function zg(I,$,ee,me){if(!($=I.i.g[String($)]))return!0;$=$.concat();for(var at=!0,Tt=0;Tt<$.length;++Tt){var fn=$[Tt];if(fn&&!fn.da&&fn.capture==ee){var io=fn.listener,Aa=fn.ha||fn.src;fn.fa&&uv(I.i,fn),at=!1!==io.call(Aa,me)&&at}}return at&&!me.defaultPrevented}function fv(I,$,ee){if("function"==typeof I)ee&&(I=Fe(I,ee));else{if(!I||"function"!=typeof I.handleEvent)throw Error("Invalid listener argument");I=Fe(I.handleEvent,I)}return 2147483647<Number($)?-1:L.setTimeout(I,$||0)}function hv(I){I.g=fv(()=>{I.g=null,I.i&&(I.i=!1,hv(I))},I.l);const $=I.h;I.h=null,I.m.apply(null,$)}Lt(oa,gs),oa.prototype[Ap]=!0,oa.prototype.removeEventListener=function(I,$,ee,me){ll(this,I,$,ee,me)},oa.prototype.N=function(){if(oa.aa.N.call(this),this.i){var $,I=this.i;for($ in I.g){for(var ee=I.g[$],me=0;me<ee.length;me++)M_(ee[me]);delete I.g[$],I.h--}}this.F=null},oa.prototype.K=function(I,$,ee,me){return this.i.add(String(I),$,!1,ee,me)},oa.prototype.L=function(I,$,ee,me){return this.i.add(String(I),$,!0,ee,me)};class N_ extends gs{constructor($,ee){super(),this.m=$,this.l=ee,this.h=null,this.i=!1,this.g=null}j($){this.h=arguments,this.g?this.i=!0:hv(this)}N(){super.N(),this.g&&(L.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mh(I){gs.call(this),this.h=I,this.g={}}Lt(mh,gs);var Fl=[];function H1(I){Or(I.g,function($,ee){this.g.hasOwnProperty(ee)&&$g($)},I),I.g={}}mh.prototype.N=function(){mh.aa.N.call(this),H1(this)},mh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pv=L.JSON.stringify,gv=L.JSON.parse,FE=class{stringify(I){return L.JSON.stringify(I,void 0)}parse(I){return L.JSON.parse(I,void 0)}};function ff(){}function hf(){}ff.prototype.h=null;var Ll={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wg(){ja.call(this,"d")}function _h(){ja.call(this,"c")}Lt(Wg,ja),Lt(_h,ja);var pf={},_v=null;function k_(){return _v=_v||new oa}function G1(I){ja.call(this,pf.La,I)}function qg(I){const $=k_();kc($,new G1($))}function $1(I,$){ja.call(this,pf.STAT_EVENT,I),this.stat=$}function dc(I){const $=k_();kc($,new $1($,I))}function Kg(I,$){ja.call(this,pf.Ma,I),this.size=$}function Xg(I,$){if("function"!=typeof I)throw Error("Fn must not be null and must be a function");return L.setTimeout(function(){I()},$)}function Tp(){this.g=!0}function vh(I,$,ee,me){I.info(function(){return"XMLHTTP TEXT ("+$+"): "+function UE(I,$){if(!I.g)return $;if(!$)return null;try{var ee=JSON.parse($);if(ee)for(I=0;I<ee.length;I++)if(Array.isArray(ee[I])){var me=ee[I];if(!(2>me.length)){var at=me[1];if(Array.isArray(at)&&!(1>at.length)){var Tt=at[0];if("noop"!=Tt&&"stop"!=Tt&&"close"!=Tt)for(var fn=1;fn<at.length;fn++)at[fn]=""}}}return pv(ee)}catch{return $}}(I,ee)+(me?" "+me:"")})}pf.La="serverreachability",Lt(G1,ja),pf.STAT_EVENT="statevent",Lt($1,ja),pf.Ma="timingevent",Lt(Kg,ja),Tp.prototype.xa=function(){this.g=!1},Tp.prototype.info=function(){};var L_,Qg={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},F_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function gf(){}function Uu(I,$,ee,me){this.j=I,this.i=$,this.l=ee,this.R=me||1,this.U=new mh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xp}function xp(){this.i=null,this.g="",this.h=!1}Lt(gf,ff),gf.prototype.g=function(){return new XMLHttpRequest},gf.prototype.i=function(){return{}},L_=new gf;var z1={},vv={};function yv(I,$,ee){I.L=1,I.v=U_(Vl($)),I.m=ee,I.P=!0,Yg(I,null)}function Yg(I,$){I.F=Date.now(),Ev(I),I.A=Vl(I.v);var ee=I.A,me=I.R;Array.isArray(me)||(me=[String(me)]),iy(ee.i,"t",me),I.C=0,ee=I.j.J,I.h=new xp,I.g=Ey(I.j,ee?$:null,!I.m),0<I.O&&(I.M=new N_(Fe(I.Y,I,I.g),I.O)),$=I.U,ee=I.g,me=I.ca;var at="readystatechange";Array.isArray(at)||(at&&(Fl[0]=at.toString()),at=Fl);for(var Tt=0;Tt<at.length;Tt++){var fn=V1(ee,at[Tt],me||$.handleEvent,!1,$.h||$);if(!fn)break;$.g[fn.key]=fn}$=I.H?Me(I.H):{},I.m?(I.u||(I.u="POST"),$["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,$)):(I.u="GET",I.g.ea(I.A,I.u,null,$)),qg(),function LE(I,$,ee,me,at,Tt){I.info(function(){if(I.g)if(Tt)for(var fn="",io=Tt.split("&"),Aa=0;Aa<io.length;Aa++){var bi=io[Aa].split("=");if(1<bi.length){var sa=bi[0];bi=bi[1];var fc=sa.split("_");fn=2<=fc.length&&"type"==fc[1]?fn+(sa+"=")+bi+"&":fn+(sa+"=redacted&")}}else fn=null;else fn=Tt;return"XMLHTTP REQ ("+me+") [attempt "+at+"]: "+$+"\n"+ee+"\n"+fn})}(I.i,I.u,I.A,I.l,I.R,I.m)}function V_(I){return!!I.g&&"GET"==I.u&&2!=I.L&&I.j.Ca}function jE(I,$){var ee=I.C,me=$.indexOf("\n",ee);return-1==me?vv:(ee=Number($.substring(ee,me)),isNaN(ee)?z1:(me+=1)+ee>$.length?vv:($=$.slice(me,me+ee),I.C=me+ee,$))}function Ev(I){I.S=Date.now()+I.I,HE(I,I.I)}function HE(I,$){if(null!=I.B)throw Error("WatchDog timer not null");I.B=Xg(Fe(I.ba,I),$)}function wv(I){I.B&&(L.clearTimeout(I.B),I.B=null)}function Zg(I){0==I.j.G||I.J||hm(I.j,I)}function Sp(I){wv(I);var $=I.M;$&&"function"==typeof $.ma&&$.ma(),I.M=null,H1(I.U),I.g&&($=I.g,I.g=null,$.abort(),$.ma())}function Cv(I,$){try{var ee=I.j;if(0!=ee.G&&(ee.g==I||Jg(ee.h,I)))if(!I.K&&Jg(ee.h,I)&&3==ee.G){try{var me=ee.Da.g.parse($)}catch{me=null}if(Array.isArray(me)&&3==me.length){var at=me;if(0==at[0]){e:if(!ee.u){if(ee.g){if(!(ee.g.F+3e3<I.F))break e;fm(ee),Mp(ee)}Dv(ee),dc(18)}}else ee.za=at[1],0<ee.za-ee.T&&37500>at[2]&&ee.F&&0==ee.v&&!ee.C&&(ee.C=Xg(Fe(ee.Za,ee),6e3));if(1>=K1(ee.h)&&ee.ca){try{ee.ca()}catch{}ee.ca=void 0}}else wh(ee,11)}else if((I.K||ee.g==I)&&fm(ee),!zn($))for(at=ee.Da.g.parse($),$=0;$<at.length;$++){let bi=at[$];if(ee.T=bi[0],bi=bi[1],2==ee.G)if("c"==bi[0]){ee.K=bi[1],ee.ia=bi[2];const sa=bi[3];null!=sa&&(ee.la=sa,ee.j.info("VER="+ee.la));const fc=bi[4];null!=fc&&(ee.Aa=fc,ee.j.info("SVER="+ee.Aa));const Ch=bi[5];null!=Ch&&"number"==typeof Ch&&0<Ch&&(ee.L=me=1.5*Ch,ee.j.info("backChannelRequestTimeoutMs_="+me)),me=ee;const $o=I.g;if($o){const pm=$o.g?$o.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pm){var Tt=me.h;Tt.g||-1==pm.indexOf("spdy")&&-1==pm.indexOf("quic")&&-1==pm.indexOf("h2")||(Tt.j=Tt.l,Tt.g=new Set,Tt.h&&(yh(Tt,Tt.h),Tt.h=null))}if(me.D){const K_=$o.g?$o.g.getResponseHeader("X-HTTP-Session-Id"):null;K_&&(me.ya=K_,wo(me.I,me.D,K_))}}ee.G=3,ee.l&&ee.l.ua(),ee.ba&&(ee.R=Date.now()-I.F,ee.j.info("Handshake RTT: "+ee.R+"ms"));var fn=I;if((me=ee).qa=yy(me,me.J?me.ia:null,me.W),fn.K){B_(me.h,fn);var io=fn,Aa=me.L;Aa&&(io.I=Aa),io.B&&(wv(io),Ev(io)),me.g=fn}else my(me);0<ee.i.length&&bd(ee)}else"stop"!=bi[0]&&"close"!=bi[0]||wh(ee,7);else 3==ee.G&&("stop"==bi[0]||"close"==bi[0]?"stop"==bi[0]?wh(ee,7):lm(ee):"noop"!=bi[0]&&ee.l&&ee.l.ta(bi),ee.v=0)}qg()}catch{}}Uu.prototype.ca=function(I){I=I.target;const $=this.M;$&&3==Ad(I)?$.j():this.Y(I)},Uu.prototype.Y=function(I){try{if(I==this.g)e:{const fc=Ad(this.g);var $=this.g.Ba();if(this.g.Z(),!(3>fc)&&(3!=fc||this.g&&(this.h.h||this.g.oa()||dy(this.g)))){this.J||4!=fc||7==$||qg(),wv(this);var ee=this.g.Z();this.X=ee;t:if(V_(this)){var me=dy(this.g);I="";var at=me.length,Tt=4==Ad(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Sp(this),Zg(this);var fn="";break t}this.h.i=new L.TextDecoder}for($=0;$<at;$++)this.h.h=!0,I+=this.h.i.decode(me[$],{stream:!(Tt&&$==at-1)});me.length=0,this.h.g+=I,this.C=0,fn=this.h.g}else fn=this.g.oa();if(this.o=200==ee,function VE(I,$,ee,me,at,Tt,fn){I.info(function(){return"XMLHTTP RESP ("+me+") [ attempt "+at+"]: "+$+"\n"+ee+"\n"+Tt+" "+fn})}(this.i,this.u,this.A,this.l,this.R,fc,ee),this.o){if(this.T&&!this.K){t:{if(this.g){var io,Aa=this.g;if((io=Aa.g?Aa.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zn(io)){var bi=io;break t}}bi=null}if(!(ee=bi)){this.o=!1,this.s=3,dc(12),Sp(this),Zg(this);break e}vh(this.i,this.l,ee,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cv(this,ee)}if(this.P){let $o;for(ee=!0;!this.J&&this.C<fn.length;){if($o=jE(this,fn),$o==vv){4==fc&&(this.s=4,dc(14),ee=!1),vh(this.i,this.l,null,"[Incomplete Response]");break}if($o==z1){this.s=4,dc(15),vh(this.i,this.l,fn,"[Invalid Chunk]"),ee=!1;break}vh(this.i,this.l,$o,null),Cv(this,$o)}if(V_(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=fc||0!=fn.length||this.h.h||(this.s=1,dc(16),ee=!1),this.o=this.o&&ee,ee){if(0<fn.length&&!this.W){this.W=!0;var sa=this.j;sa.g==this&&sa.ba&&!sa.M&&(sa.j.info("Great, no buffering proxy detected. Bytes received: "+fn.length),q_(sa),sa.M=!0,dc(11))}}else vh(this.i,this.l,fn,"[Invalid Chunked Response]"),Sp(this),Zg(this)}else vh(this.i,this.l,fn,null),Cv(this,fn);4==fc&&Sp(this),this.o&&!this.J&&(4==fc?hm(this.j,this):(this.o=!1,Ev(this)))}else(function Sv(I){const $={};I=(I.g&&2<=Ad(I)&&I.g.getAllResponseHeaders()||"").split("\r\n");for(let me=0;me<I.length;me++){if(zn(I[me]))continue;var ee=ot(I[me]);const at=ee[0];if("string"!=typeof(ee=ee[1]))continue;ee=ee.trim();const Tt=$[at]||[];$[at]=Tt,Tt.push(ee)}!function Ze(I,$){for(const ee in I)$.call(void 0,I[ee],ee,I)}($,function(me){return me.join(", ")})})(this.g),400==ee&&0<fn.indexOf("Unknown SID")?(this.s=3,dc(12)):(this.s=0,dc(13)),Sp(this),Zg(this)}}}catch{}},Uu.prototype.cancel=function(){this.J=!0,Sp(this)},Uu.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(function BE(I,$){I.info(function(){return"TIMEOUT: "+$})}(this.i,this.A),2!=this.L&&(qg(),dc(17)),Sp(this),this.s=2,Zg(this)):HE(this,this.S-I)};var AC=class{constructor(I,$){this.g=I,this.map=$}};function W1(I){this.l=I||10,I=L.PerformanceNavigationTiming?0<(I=L.performance.getEntriesByType("navigation")).length&&("hq"==I[0].nextHopProtocol||"h2"==I[0].nextHopProtocol):!!(L.chrome&&L.chrome.loadTimes&&L.chrome.loadTimes()&&L.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function q1(I){return!!I.h||!!I.g&&I.g.size>=I.j}function K1(I){return I.h?1:I.g?I.g.size:0}function Jg(I,$){return I.h?I.h==$:!!I.g&&I.g.has($)}function yh(I,$){I.g?I.g.add($):I.h=$}function B_(I,$){I.h&&I.h==$?I.h=null:I.g&&I.g.has($)&&I.g.delete($)}function em(I){if(null!=I.h)return I.i.concat(I.h.D);if(null!=I.g&&0!==I.g.size){let $=I.i;for(const ee of I.g.values())$=$.concat(ee.D);return $}return en(I.i)}function Iv(I,$){if(I.forEach&&"function"==typeof I.forEach)I.forEach($,void 0);else if(G(I)||"string"==typeof I)Array.prototype.forEach.call(I,$,void 0);else for(var ee=function tm(I){if(I.na&&"function"==typeof I.na)return I.na();if(!I.V||"function"!=typeof I.V){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(G(I)||"string"==typeof I){var $=[];I=I.length;for(var ee=0;ee<I;ee++)$.push(ee);return $}$=[],ee=0;for(const me in I)$[ee++]=me;return $}}}(I),me=function X1(I){if(I.V&&"function"==typeof I.V)return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if("string"==typeof I)return I.split("");if(G(I)){for(var $=[],ee=I.length,me=0;me<ee;me++)$.push(I[me]);return $}for(me in $=[],ee=0,I)$[ee++]=I[me];return $}(I),at=me.length,Tt=0;Tt<at;Tt++)$.call(void 0,me[Tt],ee&&ee[Tt],I)}W1.prototype.cancel=function(){if(this.i=em(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const I of this.g.values())I.cancel();this.g.clear()}};var Q1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mf(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof mf){this.h=I.h,rm(this,I.j),this.o=I.o,this.g=I.g,im(this,I.s),this.l=I.l;var $=I.i,ee=new sm;ee.i=$.i,$.g&&(ee.g=new Map($.g),ee.h=$.h),Y1(this,ee),this.m=I.m}else I&&($=String(I).match(Q1))?(this.h=!1,rm(this,$[1]||"",!0),this.o=Cd($[2]||""),this.g=Cd($[3]||"",!0),im(this,$[4]),this.l=Cd($[5]||"",!0),Y1(this,$[6]||"",!0),this.m=Cd($[7]||"")):(this.h=!1,this.i=new sm(null,this.h))}function Vl(I){return new mf(I)}function rm(I,$,ee){I.j=ee?Cd($,!0):$,I.j&&(I.j=I.j.replace(/:$/,""))}function im(I,$){if($){if($=Number($),isNaN($)||0>$)throw Error("Bad port number "+$);I.s=$}else I.s=null}function Y1(I,$,ee){$ instanceof sm?(I.i=$,function Av(I,$){$&&!I.j&&(Id(I),I.i=null,I.g.forEach(function(ee,me){var at=me.toLowerCase();me!=at&&(ny(this,me),iy(this,at,ee))},I)),I.j=$}(I.i,I.h)):(ee||($=om($,ey)),I.i=new sm($,I.h))}function wo(I,$,ee){I.i.set($,ee)}function U_(I){return wo(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function Cd(I,$){return I?$?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function om(I,$,ee){return"string"==typeof I?(I=encodeURI(I).replace($,GE),ee&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function GE(I){return"%"+((I=I.charCodeAt(0))>>4&15).toString(16)+(15&I).toString(16)}mf.prototype.toString=function(){var I=[],$=this.j;$&&I.push(om($,Z1,!0),":");var ee=this.g;return(ee||"file"==$)&&(I.push("//"),($=this.o)&&I.push(om($,Z1,!0),"@"),I.push(encodeURIComponent(String(ee)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(ee=this.s)&&I.push(":",String(ee))),(ee=this.l)&&(this.g&&"/"!=ee.charAt(0)&&I.push("/"),I.push(om(ee,"/"==ee.charAt(0)?J1:j_,!0))),(ee=this.i.toString())&&I.push("?",ee),(ee=this.m)&&I.push("#",om(ee,ty)),I.join("")};var Z1=/[#\/\?@]/g,j_=/[#\?:]/g,J1=/[#\?]/g,ey=/[#\?@]/g,ty=/#/g;function sm(I,$){this.h=this.g=null,this.i=I||null,this.j=!!$}function Id(I){I.g||(I.g=new Map,I.h=0,I.i&&function nm(I,$){if(I){I=I.split("&");for(var ee=0;ee<I.length;ee++){var me=I[ee].indexOf("="),at=null;if(0<=me){var Tt=I[ee].substring(0,me);at=I[ee].substring(me+1)}else Tt=I[ee];$(Tt,at?decodeURIComponent(at.replace(/\+/g," ")):"")}}}(I.i,function($,ee){I.add(decodeURIComponent($.replace(/\+/g," ")),ee)}))}function ny(I,$){Id(I),$=Dp(I,$),I.g.has($)&&(I.i=null,I.h-=I.g.get($).length,I.g.delete($))}function ry(I,$){return Id(I),$=Dp(I,$),I.g.has($)}function iy(I,$,ee){ny(I,$),0<ee.length&&(I.i=null,I.g.set(Dp(I,$),en(ee)),I.h+=ee.length)}function Dp(I,$){return $=String($),I.j&&($=$.toLowerCase()),$}function _f(I,$,ee,me,at){try{at&&(at.onload=null,at.onerror=null,at.onabort=null,at.ontimeout=null),me(ee)}catch{}}function cm(){this.g=new FE}function H_(I,$,ee){const me=ee||"";try{Iv(I,function(at,Tt){let fn=at;Q(at)&&(fn=pv(at)),$.push(me+Tt+"="+encodeURIComponent(fn))})}catch(at){throw $.push(me+"type="+encodeURIComponent("_badmap")),at}}function G_(I){this.l=I.Ub||null,this.j=I.eb||!1}function $_(I,$){oa.call(this),this.D=I,this.o=$,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function bv(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}function Eh(I){I.readyState=4,I.l=null,I.j=null,I.v=null,um(I)}function um(I){I.onreadystatechange&&I.onreadystatechange.call(I)}function Tv(I){let $="";return Or(I,function(ee,me){$+=me,$+=":",$+=ee,$+="\r\n"}),$}function xv(I,$,ee){e:{for(me in ee){var me=!1;break e}me=!0}me||(ee=Tv(ee),"string"==typeof I?null!=ee&&encodeURIComponent(String(ee)):wo(I,$,ee))}function Go(I){oa.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(p=sm.prototype).add=function(I,$){Id(this),this.i=null,I=Dp(this,I);var ee=this.g.get(I);return ee||this.g.set(I,ee=[]),ee.push($),this.h+=1,this},p.forEach=function(I,$){Id(this),this.g.forEach(function(ee,me){ee.forEach(function(at){I.call($,at,me,this)},this)},this)},p.na=function(){Id(this);const I=Array.from(this.g.values()),$=Array.from(this.g.keys()),ee=[];for(let me=0;me<$.length;me++){const at=I[me];for(let Tt=0;Tt<at.length;Tt++)ee.push($[me])}return ee},p.V=function(I){Id(this);let $=[];if("string"==typeof I)ry(this,I)&&($=$.concat(this.g.get(Dp(this,I))));else{I=Array.from(this.g.values());for(let ee=0;ee<I.length;ee++)$=$.concat(I[ee])}return $},p.set=function(I,$){return Id(this),this.i=null,ry(this,I=Dp(this,I))&&(this.h-=this.g.get(I).length),this.g.set(I,[$]),this.h+=1,this},p.get=function(I,$){return I&&0<(I=this.V(I)).length?String(I[0]):$},p.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],$=Array.from(this.g.keys());for(var ee=0;ee<$.length;ee++){var me=$[ee];const Tt=encodeURIComponent(String(me)),fn=this.V(me);for(me=0;me<fn.length;me++){var at=Tt;""!==fn[me]&&(at+="="+encodeURIComponent(String(fn[me]))),I.push(at)}}return this.i=I.join("&")},Lt(G_,ff),G_.prototype.g=function(){return new $_(this.l,this.j)},G_.prototype.i=function(I){return function(){return I}}({}),Lt($_,oa),(p=$_.prototype).open=function(I,$){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=$,this.readyState=1,um(this)},p.send=function(I){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const $={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&($.body=I),(this.D||L).fetch(new Request(this.A,$)).then(this.Sa.bind(this),this.ga.bind(this))},p.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Eh(this)),this.readyState=0},p.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,um(this)),this.g&&(this.readyState=3,um(this),this.g)))if("arraybuffer"===this.responseType)I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof L.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bv(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))},p.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var $=I.value?I.value:new Uint8Array(0);($=this.v.decode($,{stream:!I.done}))&&(this.response=this.responseText+=$)}I.done?Eh(this):um(this),3==this.readyState&&bv(this)}},p.Ra=function(I){this.g&&(this.response=this.responseText=I,Eh(this))},p.Qa=function(I){this.g&&(this.response=I,Eh(this))},p.ga=function(){this.g&&Eh(this)},p.setRequestHeader=function(I,$){this.u.append(I,$)},p.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},p.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],$=this.h.entries();for(var ee=$.next();!ee.done;)I.push((ee=ee.value)[0]+": "+ee[1]),ee=$.next();return I.join("\r\n")},Object.defineProperty($_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(I){this.m=I?"include":"same-origin"}}),Lt(Go,oa);var sy=/^https?$/i,ay=["POST","PUT"];function z_(I,$){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=$,I.m=5,cy(I),W_(I)}function cy(I){I.A||(I.A=!0,kc(I,"complete"),kc(I,"error"))}function uy(I){if(I.h&&typeof T<"u"&&(!I.v[1]||4!=Ad(I)||2!=I.Z()))if(I.u&&4==Ad(I))fv(I.Ea,0,I);else if(kc(I,"readystatechange"),4==Ad(I)){I.h=!1;try{const fn=I.Z();e:switch(fn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var $=!0;break e;default:$=!1}var ee;if(!(ee=$)){var me;if(me=0===fn){var at=String(I.D).match(Q1)[1]||null;!at&&L.self&&L.self.location&&(at=L.self.location.protocol.slice(0,-1)),me=!sy.test(at?at.toLowerCase():"")}ee=me}if(ee)kc(I,"complete"),kc(I,"success");else{I.m=6;try{var Tt=2<Ad(I)?I.g.statusText:""}catch{Tt=""}I.l=Tt+" ["+I.Z()+"]",cy(I)}}finally{W_(I)}}}function W_(I,$){if(I.g){ly(I);const ee=I.g,me=I.v[0]?()=>{}:null;I.g=null,I.v=null,$||kc(I,"ready");try{ee.onreadystatechange=me}catch{}}}function ly(I){I.I&&(L.clearTimeout(I.I),I.I=null)}function Ad(I){return I.g?I.g.readyState:0}function dy(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function dl(I,$,ee){return ee&&ee.internalChannelParams&&ee.internalChannelParams[I]||$}function Rp(I){this.Aa=0,this.i=[],this.j=new Tp,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dl("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dl("baseRetryDelayMs",5e3,I),this.cb=dl("retryDelaySeedMs",1e4,I),this.Wa=dl("forwardChannelMaxRetries",2,I),this.wa=dl("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new W1(I&&I.concurrentRequestLimit),this.Da=new cm,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function lm(I){if(fy(I),3==I.G){var $=I.U++,ee=Vl(I.I);if(wo(ee,"SID",I.K),wo(ee,"RID",$),wo(ee,"TYPE","terminate"),dm(I,ee),($=new Uu(I,I.j,$)).L=2,$.v=U_(Vl(ee)),ee=!1,L.navigator&&L.navigator.sendBeacon)try{ee=L.navigator.sendBeacon($.v.toString(),"")}catch{}!ee&&L.Image&&((new Image).src=$.v,ee=!0),ee||($.g=Ey($.j,null),$.g.ea($.v)),$.F=Date.now(),Ev($)}Rv(I)}function Mp(I){I.g&&(q_(I),I.g.cancel(),I.g=null)}function fy(I){Mp(I),I.u&&(L.clearTimeout(I.u),I.u=null),fm(I),I.h.cancel(),I.s&&("number"==typeof I.s&&L.clearTimeout(I.s),I.s=null)}function bd(I){if(!q1(I.h)&&!I.s){I.s=!0;var $=I.Ga;jg||L1(),Ip||(jg(),Ip=!0),D_.add($,I),I.B=0}}function py(I,$){var ee;ee=$?$.l:I.U++;const me=Vl(I.I);wo(me,"SID",I.K),wo(me,"RID",ee),wo(me,"AID",I.T),dm(I,me),I.m&&I.o&&xv(me,I.m,I.o),ee=new Uu(I,I.j,ee,I.B+1),null===I.m&&(ee.H=I.o),$&&(I.i=$.D.concat(I.i)),$=gy(I,ee,1e3),ee.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),yh(I.h,ee),yv(ee,me,$)}function dm(I,$){I.H&&Or(I.H,function(ee,me){wo($,me,ee)}),I.l&&Iv({},function(ee,me){wo($,me,ee)})}function gy(I,$,ee){ee=Math.min(I.i.length,ee);var me=I.l?Fe(I.l.Na,I.l,I):null;e:{var at=I.i;let Tt=-1;for(;;){const fn=["count="+ee];-1==Tt?0<ee?(Tt=at[0].g,fn.push("ofs="+Tt)):Tt=0:fn.push("ofs="+Tt);let io=!0;for(let Aa=0;Aa<ee;Aa++){let bi=at[Aa].g;const sa=at[Aa].map;if(bi-=Tt,0>bi)Tt=Math.max(0,at[Aa].g-100),io=!1;else try{H_(sa,fn,"req"+bi+"_")}catch{me&&me(sa)}}if(io){me=fn.join("&");break e}}}return I=I.i.splice(0,ee),$.D=I,me}function my(I){if(!I.g&&!I.u){I.Y=1;var $=I.Fa;jg||L1(),Ip||(jg(),Ip=!0),D_.add($,I),I.v=0}}function Dv(I){return!(I.g||I.u||3<=I.v||(I.Y++,I.u=Xg(Fe(I.Fa,I),vy(I,I.v)),I.v++,0))}function q_(I){null!=I.A&&(L.clearTimeout(I.A),I.A=null)}function _y(I){I.g=new Uu(I,I.j,"rpc",I.Y),null===I.m&&(I.g.H=I.o),I.g.O=0;var $=Vl(I.qa);wo($,"RID","rpc"),wo($,"SID",I.K),wo($,"AID",I.T),wo($,"CI",I.F?"0":"1"),!I.F&&I.ja&&wo($,"TO",I.ja),wo($,"TYPE","xmlhttp"),dm(I,$),I.m&&I.o&&xv($,I.m,I.o),I.L&&(I.g.I=I.L);var ee=I.g;I=I.ia,ee.L=1,ee.v=U_(Vl($)),ee.m=null,ee.P=!0,Yg(ee,I)}function fm(I){null!=I.C&&(L.clearTimeout(I.C),I.C=null)}function hm(I,$){var ee=null;if(I.g==$){fm(I),q_(I),I.g=null;var me=2}else{if(!Jg(I.h,$))return;ee=$.D,B_(I.h,$),me=1}if(0!=I.G)if($.o)if(1==me){ee=$.m?$.m.length:0,$=Date.now()-$.F;var at=I.B;kc(me=k_(),new Kg(me,ee)),bd(I)}else my(I);else if(3==(at=$.s)||0==at&&0<$.X||!(1==me&&function hy(I,$){return!(K1(I.h)>=I.h.j-(I.s?1:0)||(I.s?(I.i=$.D.concat(I.i),0):1==I.G||2==I.G||I.B>=(I.Va?0:I.Wa)||(I.s=Xg(Fe(I.Ga,I,$),vy(I,I.B)),I.B++,0)))}(I,$)||2==me&&Dv(I)))switch(ee&&0<ee.length&&($=I.h,$.i=$.i.concat(ee)),at){case 1:wh(I,5);break;case 4:wh(I,10);break;case 3:wh(I,6);break;default:wh(I,2)}}function vy(I,$){let ee=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(ee*=2),ee*$}function wh(I,$){if(I.j.info("Error code "+$),2==$){var ee=Fe(I.fb,I),me=I.Xa;const at=!me;me=new mf(me||"//www.google.com/images/cleardot.gif"),L.location&&"http"==L.location.protocol||rm(me,"https"),U_(me),at?function am(I,$){const ee=new Tp;if(L.Image){const me=new Image;me.onload=pt(_f,ee,"TestLoadImage: loaded",!0,$,me),me.onerror=pt(_f,ee,"TestLoadImage: error",!1,$,me),me.onabort=pt(_f,ee,"TestLoadImage: abort",!1,$,me),me.ontimeout=pt(_f,ee,"TestLoadImage: timeout",!1,$,me),L.setTimeout(function(){me.ontimeout&&me.ontimeout()},1e4),me.src=I}else $(!1)}(me.toString(),ee):function oy(I,$){new Tp;const me=new AbortController,at=setTimeout(()=>{me.abort(),_f(0,0,!1,$)},1e4);fetch(I,{signal:me.signal}).then(Tt=>{clearTimeout(at),_f(0,0,!!Tt.ok,$)}).catch(()=>{clearTimeout(at),_f(0,0,!1,$)})}(me.toString(),ee)}else dc(2);I.G=0,I.l&&I.l.sa($),Rv(I),fy(I)}function Rv(I){if(I.G=0,I.ka=[],I.l){const $=em(I.h);(0!=$.length||0!=I.i.length)&&(jt(I.ka,$),jt(I.ka,I.i),I.h.i.length=0,en(I.i),I.i.length=0),I.l.ra()}}function yy(I,$,ee){var me=ee instanceof mf?Vl(ee):new mf(ee);if(""!=me.g)$&&(me.g=$+"."+me.g),im(me,me.s);else{var at=L.location;me=at.protocol,$=$?$+"."+at.hostname:at.hostname,at=+at.port;var Tt=new mf(null);me&&rm(Tt,me),$&&(Tt.g=$),at&&im(Tt,at),ee&&(Tt.l=ee),me=Tt}return $=I.ya,(ee=I.D)&&$&&wo(me,ee,$),wo(me,"VER",I.la),dm(I,me),me}function Ey(I,$,ee){if($&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return($=new Go(I.Ca&&!I.pa?new G_({eb:ee}):I.pa)).Ha(I.J),$}function vf(){}function Td(){}function Ia(I,$){oa.call(this),this.g=new Rp($),this.l=I,this.h=$&&$.messageUrlParams||null,I=$&&$.messageHeaders||null,$&&$.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=$&&$.initMessageHeaders||null,$&&$.messageContentType&&(I?I["X-WebChannel-Content-Type"]=$.messageContentType:I={"X-WebChannel-Content-Type":$.messageContentType}),$&&$.va&&(I?I["X-WebChannel-Client-Profile"]=$.va:I={"X-WebChannel-Client-Profile":$.va}),this.g.S=I,(I=$&&$.Sb)&&!zn(I)&&(this.g.m=I),this.v=$&&$.supportsCrossDomainXhr||!1,this.u=$&&$.sendRawJson||!1,($=$&&$.httpSessionIdParam)&&!zn($)&&(this.g.D=$,null!==(I=this.h)&&$ in I&&$ in(I=this.h)&&delete I[$]),this.j=new Op(this)}function $E(I){Wg.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var $=I.__sm__;if($){e:{for(const ee in $){I=ee;break e}I=void 0}(this.i=I)&&(I=this.i,$=null!==$&&I in $?$[I]:void 0),this.data=$}else this.data=I}function Mv(){_h.call(this),this.status=1}function Op(I){this.g=I}(p=Go.prototype).Ha=function(I){this.J=I},p.ea=function(I,$,ee,me){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);$=$?$.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():L_.g(),this.v=function mv(I){return I.h||(I.h=I.i())}(this.o?this.o:L_),this.g.onreadystatechange=Fe(this.Ea,this);try{this.B=!0,this.g.open($,String(I),!0),this.B=!1}catch(Tt){return void z_(this,Tt)}if(I=ee||"",ee=new Map(this.headers),me)if(Object.getPrototypeOf(me)===Object.prototype)for(var at in me)ee.set(at,me[at]);else{if("function"!=typeof me.keys||"function"!=typeof me.get)throw Error("Unknown input type for opt_headers: "+String(me));for(const Tt of me.keys())ee.set(Tt,me.get(Tt))}me=Array.from(ee.keys()).find(Tt=>"content-type"==Tt.toLowerCase()),at=L.FormData&&I instanceof L.FormData,!(0<=Array.prototype.indexOf.call(ay,$,void 0))||me||at||ee.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Tt,fn]of ee)this.g.setRequestHeader(Tt,fn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ly(this),this.u=!0,this.g.send(I),this.u=!1}catch(Tt){z_(this,Tt)}},p.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,kc(this,"complete"),kc(this,"abort"),W_(this))},p.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),W_(this,!0)),Go.aa.N.call(this)},p.Ea=function(){this.s||(this.B||this.u||this.j?uy(this):this.bb())},p.bb=function(){uy(this)},p.isActive=function(){return!!this.g},p.Z=function(){try{return 2<Ad(this)?this.g.status:-1}catch{return-1}},p.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},p.Oa=function(I){if(this.g){var $=this.g.responseText;return I&&0==$.indexOf(I)&&($=$.substring(I.length)),gv($)}},p.Ba=function(){return this.m},p.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(p=Rp.prototype).la=8,p.G=1,p.connect=function(I,$,ee,me){dc(0),this.W=I,this.H=$||{},ee&&void 0!==me&&(this.H.OSID=ee,this.H.OAID=me),this.F=this.X,this.I=yy(this,null,this.W),bd(this)},p.Ga=function(I){if(this.s)if(this.s=null,1==this.G){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const at=new Uu(this,this.j,I);let Tt=this.o;if(this.S&&(Tt?(Tt=Me(Tt),et(Tt,this.S)):Tt=this.S),null!==this.m||this.O||(at.H=Tt,Tt=null),this.P)e:{for(var $=0,ee=0;ee<this.i.length;ee++){var me=this.i[ee];if(void 0===(me="__data__"in me.map&&"string"==typeof(me=me.map.__data__)?me.length:void 0))break;if(4096<($+=me)){$=ee;break e}if(4096===$||ee===this.i.length-1){$=ee+1;break e}}$=1e3}else $=1e3;$=gy(this,at,$),wo(ee=Vl(this.I),"RID",I),wo(ee,"CVER",22),this.D&&wo(ee,"X-HTTP-Session-Id",this.D),dm(this,ee),Tt&&(this.O?$="headers="+encodeURIComponent(String(Tv(Tt)))+"&"+$:this.m&&xv(ee,this.m,Tt)),yh(this.h,at),this.Ua&&wo(ee,"TYPE","init"),this.P?(wo(ee,"$req",$),wo(ee,"SID","null"),at.T=!0,yv(at,ee,null)):yv(at,ee,$),this.G=2}}else 3==this.G&&(I?py(this,I):0==this.i.length||q1(this.h)||py(this))},p.Fa=function(){if(this.u=null,_y(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=Xg(Fe(this.ab,this),I)}},p.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dc(10),Mp(this),_y(this))},p.Za=function(){null!=this.C&&(this.C=null,Mp(this),Dv(this),dc(19))},p.fb=function(I){I?(this.j.info("Successfully pinged google.com"),dc(2)):(this.j.info("Failed to ping google.com"),dc(1))},p.isActive=function(){return!!this.l&&this.l.isActive(this)},(p=vf.prototype).ua=function(){},p.ta=function(){},p.sa=function(){},p.ra=function(){},p.isActive=function(){return!0},p.Na=function(){},Td.prototype.g=function(I,$){return new Ia(I,$)},Lt(Ia,oa),Ia.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ia.prototype.close=function(){lm(this.g)},Ia.prototype.o=function(I){var $=this.g;if("string"==typeof I){var ee={};ee.__data__=I,I=ee}else this.u&&((ee={}).__data__=pv(I),I=ee);$.i.push(new AC($.Ya++,I)),3==$.G&&bd($)},Ia.prototype.N=function(){this.g.l=null,delete this.j,lm(this.g),delete this.g,Ia.aa.N.call(this)},Lt($E,Wg),Lt(Mv,_h),Lt(Op,vf),Op.prototype.ua=function(){kc(this.g,"a")},Op.prototype.ta=function(I){kc(this.g,new $E(I))},Op.prototype.sa=function(I){kc(this.g,new Mv)},Op.prototype.ra=function(){kc(this.g,"b")},Td.prototype.createWebChannel=Td.prototype.g,Ia.prototype.send=Ia.prototype.o,Ia.prototype.open=Ia.prototype.m,Ia.prototype.close=Ia.prototype.close,xt=Ut.createWebChannelTransport=function(){return new Td},kt=Ut.getStatEventTarget=function(){return k_()},dt=Ut.Event=pf,wt=Ut.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qg.NO_ERROR=0,Qg.TIMEOUT=8,Qg.HTTP_ERROR=6,Ot=Ut.ErrorCode=Qg,F_.COMPLETE="complete",cr=Ut.EventType=F_,hf.EventType=Ll,Ll.OPEN="a",Ll.CLOSE="b",Ll.ERROR="c",Ll.MESSAGE="d",oa.prototype.listen=oa.prototype.K,Xn=Ut.WebChannel=hf,$t=Ut.FetchXmlHttpFactory=G_,Go.prototype.listenOnce=Go.prototype.L,Go.prototype.getLastError=Go.prototype.Ka,Go.prototype.getLastErrorCode=Go.prototype.Ba,Go.prototype.getStatus=Go.prototype.Z,Go.prototype.getResponseJson=Go.prototype.Oa,Go.prototype.getResponseText=Go.prototype.oa,Go.prototype.send=Go.prototype.ea,Go.prototype.setWithCredentials=Go.prototype.Ha,pn=Ut.XhrIo=Go}).apply(typeof At<"u"?At:typeof self<"u"?self:typeof window<"u"?window:{});const Ht="@firebase/firestore";class De{constructor(o){this.uid=o}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(o){return o.uid===this.uid}}De.UNAUTHENTICATED=new De(null),De.GOOGLE_CREDENTIALS=new De("google-credentials-uid"),De.FIRST_PARTY=new De("first-party-uid"),De.MOCK_USER=new De("mock-user");let tn="10.12.1";const gt=new ct.Vy("@firebase/firestore");function Yt(){return gt.logLevel}function Je(p,...o){if(gt.logLevel<=ct.$b.DEBUG){const u=o.map(ki);gt.debug(`Firestore (${tn}): ${p}`,...u)}}function Xt(p,...o){if(gt.logLevel<=ct.$b.ERROR){const u=o.map(ki);gt.error(`Firestore (${tn}): ${p}`,...u)}}function Tr(p,...o){if(gt.logLevel<=ct.$b.WARN){const u=o.map(ki);gt.warn(`Firestore (${tn}): ${p}`,...u)}}function ki(p){if("string"==typeof p)return p;try{return JSON.stringify(p)}catch{return p}}function Ne(p="Unexpected state"){const o=`FIRESTORE (${tn}) INTERNAL ASSERTION FAILED: `+p;throw Xt(o),new Error(o)}function Ue(p,o){p||Ne()}function Le(p,o){return p}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ee.g{constructor(o,u){super(o,u),this.code=o,this.message=u,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _t{constructor(){this.promise=new Promise((o,u)=>{this.resolve=o,this.reject=u})}}class Wt{constructor(o,u){this.user=u,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${o}`)}}class Un{getToken(){return Promise.resolve(null)}invalidateToken(){}start(o,u){o.enqueueRetryable(()=>u(De.UNAUTHENTICATED))}shutdown(){}}class nn{constructor(o){this.token=o,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(o,u){this.changeListener=u,o.enqueueRetryable(()=>u(this.token.user))}shutdown(){this.changeListener=null}}class Qn{constructor(o){this.t=o,this.currentUser=De.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(o,u){var f=this;let _=this.i;const w=Q=>this.i!==_?(_=this.i,u(Q)):Promise.resolve();let T=new _t;this.o=()=>{this.i++,this.currentUser=this.u(),T.resolve(),T=new _t,o.enqueueRetryable(()=>w(this.currentUser))};const L=()=>{const Q=T;o.enqueueRetryable((0,ye.A)(function*(){yield Q.promise,yield w(f.currentUser)}))},G=Q=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Q,this.auth.addAuthTokenListener(this.o),L()};this.t.onInit(Q=>G(Q)),setTimeout(()=>{if(!this.auth){const Q=this.t.getImmediate({optional:!0});Q?G(Q):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),T.resolve(),T=new _t)}},0),L()}getToken(){const o=this.i,u=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(u).then(f=>this.i!==o?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):f?(Ue("string"==typeof f.accessToken),new Wt(f.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const o=this.auth&&this.auth.getUid();return Ue(null===o||"string"==typeof o),new De(o)}}class Pr{constructor(o,u,f){this.l=o,this.h=u,this.P=f,this.type="FirstParty",this.user=De.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const o=this.T();return o&&this.I.set("Authorization",o),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class no{constructor(o,u,f){this.l=o,this.h=u,this.P=f}getToken(){return Promise.resolve(new Pr(this.l,this.h,this.P))}start(o,u){o.enqueueRetryable(()=>u(De.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mr{constructor(o){this.value=o,this.type="AppCheck",this.headers=new Map,o&&o.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Br{constructor(o){this.A=o,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(o,u){const f=w=>{null!=w.error&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${w.error.message}`);const T=w.token!==this.R;return this.R=w.token,Je("FirebaseAppCheckTokenProvider",`Received ${T?"new":"existing"} token.`),T?u(w.token):Promise.resolve()};this.o=w=>{o.enqueueRetryable(()=>f(w))};const _=w=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=w,this.appCheck.addTokenListener(this.o)};this.A.onInit(w=>_(w)),setTimeout(()=>{if(!this.appCheck){const w=this.A.getImmediate({optional:!0});w?_(w):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const o=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(o).then(u=>u?(Ue("string"==typeof u.token),this.R=u.token,new mr(u.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ln(p){const o=typeof self<"u"&&(self.crypto||self.msCrypto),u=new Uint8Array(p);if(o&&"function"==typeof o.getRandomValues)o.getRandomValues(u);else for(let f=0;f<p;f++)u[f]=Math.floor(256*Math.random());return u}class Gr{static newId(){const u=62*Math.floor(256/62);let f="";for(;f.length<20;){const _=ln(40);for(let w=0;w<_.length;++w)f.length<20&&_[w]<u&&(f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(_[w]%62))}return f}}function Dn(p,o){return p<o?-1:p>o?1:0}function yr(p,o,u){return p.length===o.length&&p.every((f,_)=>u(f,o[_]))}class lr{constructor(o,u){if(this.seconds=o,this.nanoseconds=u,u<0)throw new pe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+u);if(u>=1e9)throw new pe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+u);if(o<-62135596800)throw new pe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+o);if(o>=253402300800)throw new pe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+o)}static now(){return lr.fromMillis(Date.now())}static fromDate(o){return lr.fromMillis(o.getTime())}static fromMillis(o){const u=Math.floor(o/1e3),f=Math.floor(1e6*(o-1e3*u));return new lr(u,f)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(o){return this.seconds===o.seconds?Dn(this.nanoseconds,o.nanoseconds):Dn(this.seconds,o.seconds)}isEqual(o){return o.seconds===this.seconds&&o.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sn{constructor(o){this.timestamp=o}static fromTimestamp(o){return new sn(o)}static min(){return new sn(new lr(0,0))}static max(){return new sn(new lr(253402300799,999999999))}compareTo(o){return this.timestamp._compareTo(o.timestamp)}isEqual(o){return this.timestamp.isEqual(o.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Co{constructor(o,u,f){void 0===u?u=0:u>o.length&&Ne(),void 0===f?f=o.length-u:f>o.length-u&&Ne(),this.segments=o,this.offset=u,this.len=f}get length(){return this.len}isEqual(o){return 0===Co.comparator(this,o)}child(o){const u=this.segments.slice(this.offset,this.limit());return o instanceof Co?o.forEach(f=>{u.push(f)}):u.push(o),this.construct(u)}limit(){return this.offset+this.length}popFirst(o){return this.construct(this.segments,this.offset+(o=void 0===o?1:o),this.length-o)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(o){return this.segments[this.offset+o]}isEmpty(){return 0===this.length}isPrefixOf(o){if(o.length<this.length)return!1;for(let u=0;u<this.length;u++)if(this.get(u)!==o.get(u))return!1;return!0}isImmediateParentOf(o){if(this.length+1!==o.length)return!1;for(let u=0;u<this.length;u++)if(this.get(u)!==o.get(u))return!1;return!0}forEach(o){for(let u=this.offset,f=this.limit();u<f;u++)o(this.segments[u])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(o,u){const f=Math.min(o.length,u.length);for(let _=0;_<f;_++){const w=o.get(_),T=u.get(_);if(w<T)return-1;if(w>T)return 1}return o.length<u.length?-1:o.length>u.length?1:0}}class Pt extends Co{construct(o,u,f){return new Pt(o,u,f)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...o){const u=[];for(const f of o){if(f.indexOf("//")>=0)throw new pe(le.INVALID_ARGUMENT,`Invalid segment (${f}). Paths must not contain // in them.`);u.push(...f.split("/").filter(_=>_.length>0))}return new Pt(u)}static emptyPath(){return new Pt([])}}const sr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Co{construct(o,u,f){return new an(o,u,f)}static isValidIdentifier(o){return sr.test(o)}canonicalString(){return this.toArray().map(o=>(o=o.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(o)||(o="`"+o+"`"),o)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new an(["__name__"])}static fromServerFormat(o){const u=[];let f="",_=0;const w=()=>{if(0===f.length)throw new pe(le.INVALID_ARGUMENT,`Invalid field path (${o}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);u.push(f),f=""};let T=!1;for(;_<o.length;){const L=o[_];if("\\"===L){if(_+1===o.length)throw new pe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+o);const G=o[_+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new pe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+o);f+=G,_+=2}else"`"===L?(T=!T,_++):"."!==L||T?(f+=L,_++):(w(),_++)}if(w(),T)throw new pe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+o);return new an(u)}static emptyPath(){return new an([])}}class zt{constructor(o){this.path=o}static fromPath(o){return new zt(Pt.fromString(o))}static fromName(o){return new zt(Pt.fromString(o).popFirst(5))}static empty(){return new zt(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(o){return this.path.length>=2&&this.path.get(this.path.length-2)===o}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(o){return null!==o&&0===Pt.comparator(this.path,o.path)}toString(){return this.path.toString()}static comparator(o,u){return Pt.comparator(o.path,u.path)}static isDocumentKey(o){return o.length%2==0}static fromSegments(o){return new zt(new Pt(o.slice()))}}class Wn{constructor(o,u,f){this.readTime=o,this.documentKey=u,this.largestBatchId=f}static min(){return new Wn(sn.min(),zt.empty(),-1)}static max(){return new Wn(sn.max(),zt.empty(),-1)}}function gi(p,o){let u=p.readTime.compareTo(o.readTime);return 0!==u?u:(u=zt.comparator(p.documentKey,o.documentKey),0!==u?u:Dn(p.largestBatchId,o.largestBatchId))}const Wo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(o){this.onCommittedListeners.push(o)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(o=>o())}}function Si(p){return fr.apply(this,arguments)}function fr(){return(fr=(0,ye.A)(function*(p){if(p.code!==le.FAILED_PRECONDITION||p.message!==Wo)throw p;Je("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class he{constructor(o){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,o(u=>{this.isDone=!0,this.result=u,this.nextCallback&&this.nextCallback(u)},u=>{this.isDone=!0,this.error=u,this.catchCallback&&this.catchCallback(u)})}catch(o){return this.next(void 0,o)}next(o,u){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(u,this.error):this.wrapSuccess(o,this.result):new he((f,_)=>{this.nextCallback=w=>{this.wrapSuccess(o,w).next(f,_)},this.catchCallback=w=>{this.wrapFailure(u,w).next(f,_)}})}toPromise(){return new Promise((o,u)=>{this.next(o,u)})}wrapUserFunction(o){try{const u=o();return u instanceof he?u:he.resolve(u)}catch(u){return he.reject(u)}}wrapSuccess(o,u){return o?this.wrapUserFunction(()=>o(u)):he.resolve(u)}wrapFailure(o,u){return o?this.wrapUserFunction(()=>o(u)):he.reject(u)}static resolve(o){return new he((u,f)=>{u(o)})}static reject(o){return new he((u,f)=>{f(o)})}static waitFor(o){return new he((u,f)=>{let _=0,w=0,T=!1;o.forEach(L=>{++_,L.next(()=>{++w,T&&w===_&&u()},G=>f(G))}),T=!0,w===_&&u()})}static or(o){let u=he.resolve(!1);for(const f of o)u=u.next(_=>_?he.resolve(_):f());return u}static forEach(o,u){const f=[];return o.forEach((_,w)=>{f.push(u.call(this,_,w))}),this.waitFor(f)}static mapArray(o,u){return new he((f,_)=>{const w=o.length,T=new Array(w);let L=0;for(let G=0;G<w;G++){const Q=G;u(o[Q]).next(ce=>{T[Q]=ce,++L,L===w&&f(T)},ce=>_(ce))}})}static doWhile(o,u){return new he((f,_)=>{const w=()=>{!0===o()?u().next(()=>{w()},_):f()};w()})}}function Se(p){return"IndexedDbTransactionError"===p.name}let wr=(()=>{class p{constructor(u,f){this.previousValue=u,f&&(f.sequenceNumberHandler=_=>this.ie(_),this.se=_=>f.writeSequenceNumber(_))}ie(u){return this.previousValue=Math.max(u,this.previousValue),this.previousValue}next(){const u=++this.previousValue;return this.se&&this.se(u),u}}return p.oe=-1,p})();function ri(p){return null==p}function qn(p){return 0===p&&1/p==-1/0}function or(p){let o=0;for(const u in p)Object.prototype.hasOwnProperty.call(p,u)&&o++;return o}function Bi(p,o){for(const u in p)Object.prototype.hasOwnProperty.call(p,u)&&o(u,p[u])}function Io(p){for(const o in p)if(Object.prototype.hasOwnProperty.call(p,o))return!1;return!0}class Zn{constructor(o,u){this.comparator=o,this.root=u||di.EMPTY}insert(o,u){return new Zn(this.comparator,this.root.insert(o,u,this.comparator).copy(null,null,di.BLACK,null,null))}remove(o){return new Zn(this.comparator,this.root.remove(o,this.comparator).copy(null,null,di.BLACK,null,null))}get(o){let u=this.root;for(;!u.isEmpty();){const f=this.comparator(o,u.key);if(0===f)return u.value;f<0?u=u.left:f>0&&(u=u.right)}return null}indexOf(o){let u=0,f=this.root;for(;!f.isEmpty();){const _=this.comparator(o,f.key);if(0===_)return u+f.left.size;_<0?f=f.left:(u+=f.left.size+1,f=f.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(o){return this.root.inorderTraversal(o)}forEach(o){this.inorderTraversal((u,f)=>(o(u,f),!1))}toString(){const o=[];return this.inorderTraversal((u,f)=>(o.push(`${u}:${f}`),!1)),`{${o.join(", ")}}`}reverseTraversal(o){return this.root.reverseTraversal(o)}getIterator(){return new Js(this.root,null,this.comparator,!1)}getIteratorFrom(o){return new Js(this.root,o,this.comparator,!1)}getReverseIterator(){return new Js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(o){return new Js(this.root,o,this.comparator,!0)}}class Js{constructor(o,u,f,_){this.isReverse=_,this.nodeStack=[];let w=1;for(;!o.isEmpty();)if(w=u?f(o.key,u):1,u&&_&&(w*=-1),w<0)o=this.isReverse?o.left:o.right;else{if(0===w){this.nodeStack.push(o);break}this.nodeStack.push(o),o=this.isReverse?o.right:o.left}}getNext(){let o=this.nodeStack.pop();const u={key:o.key,value:o.value};if(this.isReverse)for(o=o.left;!o.isEmpty();)this.nodeStack.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack.push(o),o=o.left;return u}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const o=this.nodeStack[this.nodeStack.length-1];return{key:o.key,value:o.value}}}class di{constructor(o,u,f,_,w){this.key=o,this.value=u,this.color=f??di.RED,this.left=_??di.EMPTY,this.right=w??di.EMPTY,this.size=this.left.size+1+this.right.size}copy(o,u,f,_,w){return new di(o??this.key,u??this.value,f??this.color,_??this.left,w??this.right)}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,u,f){let _=this;const w=f(o,_.key);return _=w<0?_.copy(null,null,null,_.left.insert(o,u,f),null):0===w?_.copy(null,u,null,null,null):_.copy(null,null,null,null,_.right.insert(o,u,f)),_.fixUp()}removeMin(){if(this.left.isEmpty())return di.EMPTY;let o=this;return o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.removeMin(),null),o.fixUp()}remove(o,u){let f,_=this;if(u(o,_.key)<0)_.left.isEmpty()||_.left.isRed()||_.left.left.isRed()||(_=_.moveRedLeft()),_=_.copy(null,null,null,_.left.remove(o,u),null);else{if(_.left.isRed()&&(_=_.rotateRight()),_.right.isEmpty()||_.right.isRed()||_.right.left.isRed()||(_=_.moveRedRight()),0===u(o,_.key)){if(_.right.isEmpty())return di.EMPTY;f=_.right.min(),_=_.copy(f.key,f.value,null,null,_.right.removeMin())}_=_.copy(null,null,null,null,_.right.remove(o,u))}return _.fixUp()}isRed(){return this.color}fixUp(){let o=this;return o.right.isRed()&&!o.left.isRed()&&(o=o.rotateLeft()),o.left.isRed()&&o.left.left.isRed()&&(o=o.rotateRight()),o.left.isRed()&&o.right.isRed()&&(o=o.colorFlip()),o}moveRedLeft(){let o=this.colorFlip();return o.right.left.isRed()&&(o=o.copy(null,null,null,null,o.right.rotateRight()),o=o.rotateLeft(),o=o.colorFlip()),o}moveRedRight(){let o=this.colorFlip();return o.left.left.isRed()&&(o=o.rotateRight(),o=o.colorFlip()),o}rotateLeft(){const o=this.copy(null,null,di.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight(){const o=this.copy(null,null,di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip(){const o=this.left.copy(null,null,!this.left.color,null,null),u=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,u)}checkMaxDepth(){const o=this.check();return Math.pow(2,o)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const o=this.left.check();if(o!==this.right.check())throw Ne();return o+(this.isRed()?0:1)}}di.EMPTY=null,di.RED=!0,di.BLACK=!1,di.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(o,u,f,_,w){return this}insert(o,u,f){return new di(o,u)}remove(o,u){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(o){this.comparator=o,this.data=new Zn(this.comparator)}has(o){return null!==this.data.get(o)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(o){return this.data.indexOf(o)}forEach(o){this.data.inorderTraversal((u,f)=>(o(u),!1))}forEachInRange(o,u){const f=this.data.getIteratorFrom(o[0]);for(;f.hasNext();){const _=f.getNext();if(this.comparator(_.key,o[1])>=0)return;u(_.key)}}forEachWhile(o,u){let f;for(f=void 0!==u?this.data.getIteratorFrom(u):this.data.getIterator();f.hasNext();)if(!o(f.getNext().key))return}firstAfterOrEqual(o){const u=this.data.getIteratorFrom(o);return u.hasNext()?u.getNext().key:null}getIterator(){return new ea(this.data.getIterator())}getIteratorFrom(o){return new ea(this.data.getIteratorFrom(o))}add(o){return this.copy(this.data.remove(o).insert(o,!0))}delete(o){return this.has(o)?this.copy(this.data.remove(o)):this}isEmpty(){return this.data.isEmpty()}unionWith(o){let u=this;return u.size<o.size&&(u=o,o=this),o.forEach(f=>{u=u.add(f)}),u}isEqual(o){if(!(o instanceof Bn)||this.size!==o.size)return!1;const u=this.data.getIterator(),f=o.data.getIterator();for(;u.hasNext();){const _=u.getNext().key,w=f.getNext().key;if(0!==this.comparator(_,w))return!1}return!0}toArray(){const o=[];return this.forEach(u=>{o.push(u)}),o}toString(){const o=[];return this.forEach(u=>o.push(u)),"SortedSet("+o.toString()+")"}copy(o){const u=new Bn(this.comparator);return u.data=o,u}}class ea{constructor(o){this.iter=o}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Di{constructor(o){this.fields=o,o.sort(an.comparator)}static empty(){return new Di([])}unionWith(o){let u=new Bn(an.comparator);for(const f of this.fields)u=u.add(f);for(const f of o)u=u.add(f);return new Di(u.toArray())}covers(o){for(const u of this.fields)if(u.isPrefixOf(o))return!0;return!1}isEqual(o){return yr(this.fields,o.fields,(u,f)=>u.isEqual(f))}}class ks extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ui{constructor(o){this.binaryString=o}static fromBase64String(o){const u=function(_){try{return atob(_)}catch(w){throw typeof DOMException<"u"&&w instanceof DOMException?new ks("Invalid base64 string: "+w):w}}(o);return new Ui(u)}static fromUint8Array(o){const u=function(_){let w="";for(let T=0;T<_.length;++T)w+=String.fromCharCode(_[T]);return w}(o);return new Ui(u)}[Symbol.iterator](){let o=0;return{next:()=>o<this.binaryString.length?{value:this.binaryString.charCodeAt(o++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(u){const f=new Uint8Array(u.length);for(let _=0;_<u.length;_++)f[_]=u.charCodeAt(_);return f}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(o){return Dn(this.binaryString,o.binaryString)}isEqual(o){return this.binaryString===o.binaryString}}Ui.EMPTY_BYTE_STRING=new Ui("");const ko=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(p){if(Ue(!!p),"string"==typeof p){let o=0;const u=ko.exec(p);if(Ue(!!u),u[1]){let _=u[1];_=(_+"000000000").substr(0,9),o=Number(_)}const f=new Date(p);return{seconds:Math.floor(f.getTime()/1e3),nanos:o}}return{seconds:Ri(p.seconds),nanos:Ri(p.nanos)}}function Ri(p){return"number"==typeof p?p:"string"==typeof p?Number(p):0}function _s(p){return"string"==typeof p?Ui.fromBase64String(p):Ui.fromUint8Array(p)}function Vc(p){var o,u;return"server_timestamp"===(null===(u=((null===(o=p?.mapValue)||void 0===o?void 0:o.fields)||{}).__type__)||void 0===u?void 0:u.stringValue)}function Oa(p){const o=p.mapValue.fields.__previous_value__;return Vc(o)?Oa(o):o}function Fo(p){const o=qo(p.mapValue.fields.__local_write_time__.timestampValue);return new lr(o.seconds,o.nanos)}class ua{constructor(o,u,f,_,w,T,L,G,Q){this.databaseId=o,this.appId=u,this.persistenceKey=f,this.host=_,this.ssl=w,this.forceLongPolling=T,this.autoDetectLongPolling=L,this.longPollingOptions=G,this.useFetchStreams=Q}}class es{constructor(o,u){this.projectId=o,this.database=u||"(default)"}static empty(){return new es("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(o){return o instanceof es&&o.projectId===this.projectId&&o.database===this.database}}const vs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Lo(p){return"nullValue"in p?0:"booleanValue"in p?1:"integerValue"in p||"doubleValue"in p?2:"timestampValue"in p?3:"stringValue"in p?5:"bytesValue"in p?6:"referenceValue"in p?7:"geoPointValue"in p?8:"arrayValue"in p?9:"mapValue"in p?Vc(p)?4:la(p)?9007199254740991:10:Ne()}function so(p,o){if(p===o)return!0;const u=Lo(p);if(u!==Lo(o))return!1;switch(u){case 0:case 9007199254740991:return!0;case 1:return p.booleanValue===o.booleanValue;case 4:return Fo(p).isEqual(Fo(o));case 3:return function(_,w){if("string"==typeof _.timestampValue&&"string"==typeof w.timestampValue&&_.timestampValue.length===w.timestampValue.length)return _.timestampValue===w.timestampValue;const T=qo(_.timestampValue),L=qo(w.timestampValue);return T.seconds===L.seconds&&T.nanos===L.nanos}(p,o);case 5:return p.stringValue===o.stringValue;case 6:return w=o,_s(p.bytesValue).isEqual(_s(w.bytesValue));case 7:return p.referenceValue===o.referenceValue;case 8:return function(_,w){return Ri(_.geoPointValue.latitude)===Ri(w.geoPointValue.latitude)&&Ri(_.geoPointValue.longitude)===Ri(w.geoPointValue.longitude)}(p,o);case 2:return function(_,w){if("integerValue"in _&&"integerValue"in w)return Ri(_.integerValue)===Ri(w.integerValue);if("doubleValue"in _&&"doubleValue"in w){const T=Ri(_.doubleValue),L=Ri(w.doubleValue);return T===L?qn(T)===qn(L):isNaN(T)&&isNaN(L)}return!1}(p,o);case 9:return yr(p.arrayValue.values||[],o.arrayValue.values||[],so);case 10:return function(_,w){const T=_.mapValue.fields||{},L=w.mapValue.fields||{};if(or(T)!==or(L))return!1;for(const G in T)if(T.hasOwnProperty(G)&&(void 0===L[G]||!so(T[G],L[G])))return!1;return!0}(p,o);default:return Ne()}var w}function ys(p,o){return void 0!==(p.values||[]).find(u=>so(u,o))}function Es(p,o){if(p===o)return 0;const u=Lo(p),f=Lo(o);if(u!==f)return Dn(u,f);switch(u){case 0:case 9007199254740991:return 0;case 1:return Dn(p.booleanValue,o.booleanValue);case 2:return function(w,T){const L=Ri(w.integerValue||w.doubleValue),G=Ri(T.integerValue||T.doubleValue);return L<G?-1:L>G?1:L===G?0:isNaN(L)?isNaN(G)?0:-1:1}(p,o);case 3:return ao(p.timestampValue,o.timestampValue);case 4:return ao(Fo(p),Fo(o));case 5:return Dn(p.stringValue,o.stringValue);case 6:return function(w,T){const L=_s(w),G=_s(T);return L.compareTo(G)}(p.bytesValue,o.bytesValue);case 7:return function(w,T){const L=w.split("/"),G=T.split("/");for(let Q=0;Q<L.length&&Q<G.length;Q++){const ce=Dn(L[Q],G[Q]);if(0!==ce)return ce}return Dn(L.length,G.length)}(p.referenceValue,o.referenceValue);case 8:return function(w,T){const L=Dn(Ri(w.latitude),Ri(T.latitude));return 0!==L?L:Dn(Ri(w.longitude),Ri(T.longitude))}(p.geoPointValue,o.geoPointValue);case 9:return function(w,T){const L=w.values||[],G=T.values||[];for(let Q=0;Q<L.length&&Q<G.length;++Q){const ce=Es(L[Q],G[Q]);if(ce)return ce}return Dn(L.length,G.length)}(p.arrayValue,o.arrayValue);case 10:return function(w,T){if(w===vs.mapValue&&T===vs.mapValue)return 0;if(w===vs.mapValue)return 1;if(T===vs.mapValue)return-1;const L=w.fields||{},G=Object.keys(L),Q=T.fields||{},ce=Object.keys(Q);G.sort(),ce.sort();for(let we=0;we<G.length&&we<ce.length;++we){const Fe=Dn(G[we],ce[we]);if(0!==Fe)return Fe;const pt=Es(L[G[we]],Q[ce[we]]);if(0!==pt)return pt}return Dn(G.length,ce.length)}(p.mapValue,o.mapValue);default:throw Ne()}}function ao(p,o){if("string"==typeof p&&"string"==typeof o&&p.length===o.length)return Dn(p,o);const u=qo(p),f=qo(o),_=Dn(u.seconds,f.seconds);return 0!==_?_:Dn(u.nanos,f.nanos)}function ts(p){return Pa(p)}function Pa(p){return"nullValue"in p?"null":"booleanValue"in p?""+p.booleanValue:"integerValue"in p?""+p.integerValue:"doubleValue"in p?""+p.doubleValue:"timestampValue"in p?function(u){const f=qo(u);return`time(${f.seconds},${f.nanos})`}(p.timestampValue):"stringValue"in p?p.stringValue:"bytesValue"in p?_s(p.bytesValue).toBase64():"referenceValue"in p?zt.fromName(p.referenceValue).toString():"geoPointValue"in p?function(u){return`geo(${u.latitude},${u.longitude})`}(p.geoPointValue):"arrayValue"in p?function(u){let f="[",_=!0;for(const w of u.values||[])_?_=!1:f+=",",f+=Pa(w);return f+"]"}(p.arrayValue):"mapValue"in p?function(u){const f=Object.keys(u.fields||{}).sort();let _="{",w=!0;for(const T of f)w?w=!1:_+=",",_+=`${T}:${Pa(u.fields[T])}`;return _+"}"}(p.mapValue):Ne()}function Vo(p,o){return{referenceValue:`projects/${p.projectId}/databases/${p.database}/documents/${o.path.canonicalString()}`}}function Ko(p){return!!p&&"integerValue"in p}function ns(p){return!!p&&"arrayValue"in p}function mc(p){return!!p&&"nullValue"in p}function go(p){return!!p&&"doubleValue"in p&&isNaN(Number(p.doubleValue))}function Na(p){return!!p&&"mapValue"in p}function rs(p){if(p.geoPointValue)return{geoPointValue:Object.assign({},p.geoPointValue)};if(p.timestampValue&&"object"==typeof p.timestampValue)return{timestampValue:Object.assign({},p.timestampValue)};if(p.mapValue){const o={mapValue:{fields:{}}};return Bi(p.mapValue.fields,(u,f)=>o.mapValue.fields[u]=rs(f)),o}if(p.arrayValue){const o={arrayValue:{values:[]}};for(let u=0;u<(p.arrayValue.values||[]).length;++u)o.arrayValue.values[u]=rs(p.arrayValue.values[u]);return o}return Object.assign({},p)}function la(p){return"__max__"===(((p.mapValue||{}).fields||{}).__type__||{}).stringValue}class Qi{constructor(o){this.value=o}static empty(){return new Qi({mapValue:{}})}field(o){if(o.isEmpty())return this.value;{let u=this.value;for(let f=0;f<o.length-1;++f)if(u=(u.mapValue.fields||{})[o.get(f)],!Na(u))return null;return u=(u.mapValue.fields||{})[o.lastSegment()],u||null}}set(o,u){this.getFieldsMap(o.popLast())[o.lastSegment()]=rs(u)}setAll(o){let u=an.emptyPath(),f={},_=[];o.forEach((T,L)=>{if(!u.isImmediateParentOf(L)){const G=this.getFieldsMap(u);this.applyChanges(G,f,_),f={},_=[],u=L.popLast()}T?f[L.lastSegment()]=rs(T):_.push(L.lastSegment())});const w=this.getFieldsMap(u);this.applyChanges(w,f,_)}delete(o){const u=this.field(o.popLast());Na(u)&&u.mapValue.fields&&delete u.mapValue.fields[o.lastSegment()]}isEqual(o){return so(this.value,o.value)}getFieldsMap(o){let u=this.value;u.mapValue.fields||(u.mapValue={fields:{}});for(let f=0;f<o.length;++f){let _=u.mapValue.fields[o.get(f)];Na(_)&&_.mapValue.fields||(_={mapValue:{fields:{}}},u.mapValue.fields[o.get(f)]=_),u=_}return u.mapValue.fields}applyChanges(o,u,f){Bi(u,(_,w)=>o[_]=w);for(const _ of f)delete o[_]}clone(){return new Qi(rs(this.value))}}function _c(p){const o=[];return Bi(p.fields,(u,f)=>{const _=new an([u]);if(Na(f)){const w=_c(f.mapValue).fields;if(0===w.length)o.push(_);else for(const T of w)o.push(_.child(T))}else o.push(_)}),new Di(o)}class fi{constructor(o,u,f,_,w,T,L){this.key=o,this.documentType=u,this.version=f,this.readTime=_,this.createTime=w,this.data=T,this.documentState=L}static newInvalidDocument(o){return new fi(o,0,sn.min(),sn.min(),sn.min(),Qi.empty(),0)}static newFoundDocument(o,u,f,_){return new fi(o,1,u,sn.min(),f,_,0)}static newNoDocument(o,u){return new fi(o,2,u,sn.min(),sn.min(),Qi.empty(),0)}static newUnknownDocument(o,u){return new fi(o,3,u,sn.min(),sn.min(),Qi.empty(),2)}convertToFoundDocument(o,u){return!this.createTime.isEqual(sn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=o),this.version=o,this.documentType=1,this.data=u,this.documentState=0,this}convertToNoDocument(o){return this.version=o,this.documentType=2,this.data=Qi.empty(),this.documentState=0,this}convertToUnknownDocument(o){return this.version=o,this.documentType=3,this.data=Qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(o){return this.readTime=o,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(o){return o instanceof fi&&this.key.isEqual(o.key)&&this.version.isEqual(o.version)&&this.documentType===o.documentType&&this.documentState===o.documentState&&this.data.isEqual(o.data)}mutableCopy(){return new fi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zi{constructor(o,u){this.position=o,this.inclusive=u}}function Gu(p,o,u){let f=0;for(let _=0;_<p.position.length;_++){const w=o[_],T=p.position[_];if(f=w.field.isKeyField()?zt.comparator(zt.fromName(T.referenceValue),u.key):Es(T,u.data.field(w.field)),"desc"===w.dir&&(f*=-1),0!==f)break}return f}function qa(p,o){if(null===p)return null===o;if(null===o||p.inclusive!==o.inclusive||p.position.length!==o.position.length)return!1;for(let u=0;u<p.position.length;u++)if(!so(p.position[u],o.position[u]))return!1;return!0}class Ka{constructor(o,u="asc"){this.field=o,this.dir=u}}function Bc(p,o){return p.dir===o.dir&&p.field.isEqual(o.field)}class on{}class Gn extends on{constructor(o,u,f){super(),this.field=o,this.op=u,this.value=f}static create(o,u,f){return o.isKeyField()?"in"===u||"not-in"===u?this.createKeyFieldInFilter(o,u,f):new gu(o,u,f):"array-contains"===u?new xr(o,f):"in"===u?new Uc(o,f):"not-in"===u?new jc(o,f):"array-contains-any"===u?new Wr(o,f):new Gn(o,u,f)}static createKeyFieldInFilter(o,u,f){return"in"===u?new vc(o,f):new Xa(o,f)}matches(o){const u=o.data.field(this.field);return"!="===this.op?null!==u&&this.matchesComparison(Es(u,this.value)):null!==u&&Lo(this.value)===Lo(u)&&this.matchesComparison(Es(u,this.value))}matchesComparison(o){switch(this.op){case"<":return o<0;case"<=":return o<=0;case"==":return 0===o;case"!=":return 0!==o;case">":return o>0;case">=":return o>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends on{constructor(o,u){super(),this.filters=o,this.op=u,this.ae=null}static create(o,u){return new hr(o,u)}matches(o){return Fs(this)?void 0===this.filters.find(u=>!u.matches(o)):void 0!==this.filters.find(u=>u.matches(o))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((o,u)=>o.concat(u.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Fs(p){return"and"===p.op}function fa(p){return function pu(p){for(const o of p.filters)if(o instanceof hr)return!1;return!0}(p)&&Fs(p)}function ro(p){if(p instanceof Gn)return p.field.canonicalString()+p.op.toString()+ts(p.value);if(fa(p))return p.filters.map(o=>ro(o)).join(",");{const o=p.filters.map(u=>ro(u)).join(",");return`${p.op}(${o})`}}function ha(p,o){return p instanceof Gn?(f=p,(_=o)instanceof Gn&&f.op===_.op&&f.field.isEqual(_.field)&&so(f.value,_.value)):p instanceof hr?function(f,_){return _ instanceof hr&&f.op===_.op&&f.filters.length===_.filters.length&&f.filters.reduce((w,T,L)=>w&&ha(T,_.filters[L]),!0)}(p,o):void Ne();var f,_}function Ls(p){return p instanceof Gn?`${(u=p).field.canonicalString()} ${u.op} ${ts(u.value)}`:p instanceof hr?function(u){return u.op.toString()+" {"+u.getFilters().map(Ls).join(" ,")+"}"}(p):"Filter";var u}class gu extends Gn{constructor(o,u,f){super(o,u,f),this.key=zt.fromName(f.referenceValue)}matches(o){const u=zt.comparator(o.key,this.key);return this.matchesComparison(u)}}class vc extends Gn{constructor(o,u){super(o,"in",u),this.keys=Vs(0,u)}matches(o){return this.keys.some(u=>u.isEqual(o.key))}}class Xa extends Gn{constructor(o,u){super(o,"not-in",u),this.keys=Vs(0,u)}matches(o){return!this.keys.some(u=>u.isEqual(o.key))}}function Vs(p,o){var u;return((null===(u=o.arrayValue)||void 0===u?void 0:u.values)||[]).map(f=>zt.fromName(f.referenceValue))}class xr extends Gn{constructor(o,u){super(o,"array-contains",u)}matches(o){const u=o.data.field(this.field);return ns(u)&&ys(u.arrayValue,this.value)}}class Uc extends Gn{constructor(o,u){super(o,"in",u)}matches(o){const u=o.data.field(this.field);return null!==u&&ys(this.value.arrayValue,u)}}class jc extends Gn{constructor(o,u){super(o,"not-in",u)}matches(o){if(ys(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const u=o.data.field(this.field);return null!==u&&!ys(this.value.arrayValue,u)}}class Wr extends Gn{constructor(o,u){super(o,"array-contains-any",u)}matches(o){const u=o.data.field(this.field);return!(!ns(u)||!u.arrayValue.values)&&u.arrayValue.values.some(f=>ys(this.value.arrayValue,f))}}class Hc{constructor(o,u=null,f=[],_=[],w=null,T=null,L=null){this.path=o,this.collectionGroup=u,this.orderBy=f,this.filters=_,this.limit=w,this.startAt=T,this.endAt=L,this.ue=null}}function Sr(p,o=null,u=[],f=[],_=null,w=null,T=null){return new Hc(p,o,u,f,_,w,T)}function is(p){const o=Le(p);if(null===o.ue){let u=o.path.canonicalString();null!==o.collectionGroup&&(u+="|cg:"+o.collectionGroup),u+="|f:",u+=o.filters.map(f=>ro(f)).join(","),u+="|ob:",u+=o.orderBy.map(f=>{return(w=f).field.canonicalString()+w.dir;var w}).join(","),ri(o.limit)||(u+="|l:",u+=o.limit),o.startAt&&(u+="|lb:",u+=o.startAt.inclusive?"b:":"a:",u+=o.startAt.position.map(f=>ts(f)).join(",")),o.endAt&&(u+="|ub:",u+=o.endAt.inclusive?"a:":"b:",u+=o.endAt.position.map(f=>ts(f)).join(",")),o.ue=u}return o.ue}function Gc(p,o){if(p.limit!==o.limit||p.orderBy.length!==o.orderBy.length)return!1;for(let u=0;u<p.orderBy.length;u++)if(!Bc(p.orderBy[u],o.orderBy[u]))return!1;if(p.filters.length!==o.filters.length)return!1;for(let u=0;u<p.filters.length;u++)if(!ha(p.filters[u],o.filters[u]))return!1;return p.collectionGroup===o.collectionGroup&&!!p.path.isEqual(o.path)&&!!qa(p.startAt,o.startAt)&&qa(p.endAt,o.endAt)}function $c(p){return zt.isDocumentKey(p.path)&&null===p.collectionGroup&&0===p.filters.length}class Yi{constructor(o,u=null,f=[],_=[],w=null,T="F",L=null,G=null){this.path=o,this.collectionGroup=u,this.explicitOrderBy=f,this.filters=_,this.limit=w,this.limitType=T,this.startAt=L,this.endAt=G,this.ce=null,this.le=null,this.he=null}}function Bo(p){return new Yi(p)}function kr(p){return 0===p.filters.length&&null===p.limit&&null==p.startAt&&null==p.endAt&&(0===p.explicitOrderBy.length||1===p.explicitOrderBy.length&&p.explicitOrderBy[0].field.isKeyField())}function Is(p){return null!==p.collectionGroup}function yc(p){const o=Le(p);if(null===o.ce){o.ce=[];const u=new Set;for(const w of o.explicitOrderBy)o.ce.push(w),u.add(w.field.canonicalString());const f=o.explicitOrderBy.length>0?o.explicitOrderBy[o.explicitOrderBy.length-1].dir:"asc";(function(T){let L=new Bn(an.comparator);return T.filters.forEach(G=>{G.getFlattenedFilters().forEach(Q=>{Q.isInequality()&&(L=L.add(Q.field))})}),L})(o).forEach(w=>{u.has(w.canonicalString())||w.isKeyField()||o.ce.push(new Ka(w,f))}),u.has(an.keyField().canonicalString())||o.ce.push(new Ka(an.keyField(),f))}return o.ce}function Ao(p){const o=Le(p);return o.le||(o.le=function hl(p,o){if("F"===p.limitType)return Sr(p.path,p.collectionGroup,o,p.filters,p.limit,p.startAt,p.endAt);{o=o.map(_=>new Ka(_.field,"desc"===_.dir?"asc":"desc"));const u=p.endAt?new zi(p.endAt.position,p.endAt.inclusive):null,f=p.startAt?new zi(p.startAt.position,p.startAt.inclusive):null;return Sr(p.path,p.collectionGroup,o,p.filters,p.limit,u,f)}}(o,yc(p))),o.le}function Y(p,o){const u=p.filters.concat([o]);return new Yi(p.path,p.collectionGroup,p.explicitOrderBy.slice(),u,p.limit,p.limitType,p.startAt,p.endAt)}function Z(p,o,u){return new Yi(p.path,p.collectionGroup,p.explicitOrderBy.slice(),p.filters.slice(),o,u,p.startAt,p.endAt)}function H(p,o){return Gc(Ao(p),Ao(o))&&p.limitType===o.limitType}function oe(p){return`${is(Ao(p))}|lt:${p.limitType}`}function Te(p){return`Query(target=${function(u){let f=u.path.canonicalString();return null!==u.collectionGroup&&(f+=" collectionGroup="+u.collectionGroup),u.filters.length>0&&(f+=`, filters: [${u.filters.map(_=>Ls(_)).join(", ")}]`),ri(u.limit)||(f+=", limit: "+u.limit),u.orderBy.length>0&&(f+=`, orderBy: [${u.orderBy.map(_=>{return`${(T=_).field.canonicalString()} (${T.dir})`;var T}).join(", ")}]`),u.startAt&&(f+=", startAt: ",f+=u.startAt.inclusive?"b:":"a:",f+=u.startAt.position.map(_=>ts(_)).join(",")),u.endAt&&(f+=", endAt: ",f+=u.endAt.inclusive?"a:":"b:",f+=u.endAt.position.map(_=>ts(_)).join(",")),`Target(${f})`}(Ao(p))}; limitType=${p.limitType})`}function Mt(p,o){return o.isFoundDocument()&&function(f,_){const w=_.key.path;return null!==f.collectionGroup?_.key.hasCollectionId(f.collectionGroup)&&f.path.isPrefixOf(w):zt.isDocumentKey(f.path)?f.path.isEqual(w):f.path.isImmediateParentOf(w)}(p,o)&&function(f,_){for(const w of yc(f))if(!w.field.isKeyField()&&null===_.data.field(w.field))return!1;return!0}(p,o)&&function(f,_){for(const w of f.filters)if(!w.matches(_))return!1;return!0}(p,o)&&(_=o,!((f=p).startAt&&!function(T,L,G){const Q=Gu(T,L,G);return T.inclusive?Q<=0:Q<0}(f.startAt,yc(f),_)||f.endAt&&!function(T,L,G){const Q=Gu(T,L,G);return T.inclusive?Q>=0:Q>0}(f.endAt,yc(f),_)));var f,_}function Uo(p){return(o,u)=>{let f=!1;for(const _ of yc(p)){const w=pa(_,o,u);if(0!==w)return w;f=f||_.field.isKeyField()}return 0}}function pa(p,o,u){const f=p.field.isKeyField()?zt.comparator(o.key,u.key):function(w,T,L){const G=T.data.field(w),Q=L.data.field(w);return null!==G&&null!==Q?Es(G,Q):Ne()}(p.field,o,u);switch(p.dir){case"asc":return f;case"desc":return-1*f;default:return Ne()}}class bo{constructor(o,u){this.mapKeyFn=o,this.equalsFn=u,this.inner={},this.innerSize=0}get(o){const u=this.mapKeyFn(o),f=this.inner[u];if(void 0!==f)for(const[_,w]of f)if(this.equalsFn(_,o))return w}has(o){return void 0!==this.get(o)}set(o,u){const f=this.mapKeyFn(o),_=this.inner[f];if(void 0===_)return this.inner[f]=[[o,u]],void this.innerSize++;for(let w=0;w<_.length;w++)if(this.equalsFn(_[w][0],o))return void(_[w]=[o,u]);_.push([o,u]),this.innerSize++}delete(o){const u=this.mapKeyFn(o),f=this.inner[u];if(void 0===f)return!1;for(let _=0;_<f.length;_++)if(this.equalsFn(f[_][0],o))return 1===f.length?delete this.inner[u]:f.splice(_,1),this.innerSize--,!0;return!1}forEach(o){Bi(this.inner,(u,f)=>{for(const[_,w]of f)o(_,w)})}isEmpty(){return Io(this.inner)}size(){return this.innerSize}}const Bs=new Zn(zt.comparator);function Tn(){return Bs}const _u=new Zn(zt.comparator);function Us(...p){let o=_u;for(const u of p)o=o.insert(u.key,u);return o}function qr(p){let o=_u;return p.forEach((u,f)=>o=o.insert(u,f.overlayedDocument)),o}function js(){return yn()}function Ec(){return yn()}function yn(){return new bo(p=>p.toString(),(p,o)=>p.isEqual(o))}const As=new Zn(zt.comparator),vu=new Bn(zt.comparator);function Yn(...p){let o=vu;for(const u of p)o=o.add(u);return o}const Rd=new Bn(Dn);function tr(p,o){if(p.useProto3Json){if(isNaN(o))return{doubleValue:"NaN"};if(o===1/0)return{doubleValue:"Infinity"};if(o===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qn(o)?"-0":o}}function zc(p){return{integerValue:""+p}}function yu(p,o){return function Vi(p){return"number"==typeof p&&Number.isInteger(p)&&!qn(p)&&p<=Number.MAX_SAFE_INTEGER&&p>=Number.MIN_SAFE_INTEGER}(o)?zc(o):tr(p,o)}class Hr{constructor(){this._=void 0}}function zu(p,o,u){return p instanceof Eu?function(_,w){const T={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:_.seconds,nanos:_.nanoseconds}}}};return w&&Vc(w)&&(w=Oa(w)),w&&(T.fields.__previous_value__=w),{mapValue:T}}(u,o):p instanceof Qa?wu(p,o):p instanceof Cu?Cc(p,o):function(_,w){const T=wc(_,w),L=Wc(T)+Wc(_.Pe);return Ko(T)&&Ko(_.Pe)?zc(L):tr(_.serializer,L)}(p,o)}function Wu(p,o,u){return p instanceof Qa?wu(p,o):p instanceof Cu?Cc(p,o):u}function wc(p,o){return p instanceof Yr?Ko(f=o)||(w=f)&&"doubleValue"in w?o:{integerValue:0}:null;var f,w}class Eu extends Hr{}class Qa extends Hr{constructor(o){super(),this.elements=o}}function wu(p,o){const u=ar(o);for(const f of p.elements)u.some(_=>so(_,f))||u.push(f);return{arrayValue:{values:u}}}class Cu extends Hr{constructor(o){super(),this.elements=o}}function Cc(p,o){let u=ar(o);for(const f of p.elements)u=u.filter(_=>!so(_,f));return{arrayValue:{values:u}}}class Yr extends Hr{constructor(o,u){super(),this.serializer=o,this.Pe=u}}function Wc(p){return Ri(p.integerValue||p.doubleValue)}function ar(p){return ns(p)&&p.arrayValue.values?p.arrayValue.values.slice():[]}class Za{constructor(o,u){this.version=o,this.transformResults=u}}class Vn{constructor(o,u){this.updateTime=o,this.exists=u}static none(){return new Vn}static exists(o){return new Vn(void 0,o)}static updateTime(o){return new Vn(o)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(o){return this.exists===o.exists&&(this.updateTime?!!o.updateTime&&this.updateTime.isEqual(o.updateTime):!o.updateTime)}}function Kn(p,o){return void 0!==p.updateTime?o.isFoundDocument()&&o.version.isEqual(p.updateTime):void 0===p.exists||p.exists===o.isFoundDocument()}class Dr{}function Jt(p,o){if(!p.hasLocalMutations||o&&0===o.fields.length)return null;if(null===o)return p.isNoDocument()?new ut(p.key,Vn.none()):new F(p.key,p.data,Vn.none());{const u=p.data,f=Qi.empty();let _=new Bn(an.comparator);for(let w of o.fields)if(!_.has(w)){let T=u.field(w);null===T&&w.length>1&&(w=w.popLast(),T=u.field(w)),null===T?f.delete(w):f.set(w,T),_=_.add(w)}return new re(p.key,f,new Di(_.toArray()),Vn.none())}}function Cf(p,o,u){p instanceof F?function(_,w,T){const L=_.value.clone(),G=ne(_.fieldTransforms,w,T.transformResults);L.setAll(G),w.convertToFoundDocument(T.version,L).setHasCommittedMutations()}(p,o,u):p instanceof re?function(_,w,T){if(!Kn(_.precondition,w))return void w.convertToUnknownDocument(T.version);const L=ne(_.fieldTransforms,w,T.transformResults),G=w.data;G.setAll(W(_)),G.setAll(L),w.convertToFoundDocument(T.version,G).setHasCommittedMutations()}(p,o,u):o.convertToNoDocument(u.version).setHasCommittedMutations()}function Er(p,o,u,f){return p instanceof F?function(w,T,L,G){if(!Kn(w.precondition,T))return L;const Q=w.value.clone(),ce=Ce(w.fieldTransforms,G,T);return Q.setAll(ce),T.convertToFoundDocument(T.version,Q).setHasLocalMutations(),null}(p,o,u,f):p instanceof re?function(w,T,L,G){if(!Kn(w.precondition,T))return L;const Q=Ce(w.fieldTransforms,G,T),ce=T.data;return ce.setAll(W(w)),ce.setAll(Q),T.convertToFoundDocument(T.version,ce).setHasLocalMutations(),null===L?null:L.unionWith(w.fieldMask.fields).unionWith(w.fieldTransforms.map(we=>we.field))}(p,o,u,f):(L=u,Kn(p.precondition,T=o)?(T.convertToNoDocument(T.version).setHasLocalMutations(),null):L);var T,L}function If(p,o){let u=null;for(const f of p.fieldTransforms){const _=o.data.field(f.field),w=wc(f.transform,_||null);null!=w&&(null===u&&(u=Qi.empty()),u.set(f.field,w))}return u||null}function co(p,o){return p.type===o.type&&!!p.key.isEqual(o.key)&&!!p.precondition.isEqual(o.precondition)&&(_=o.fieldTransforms,!!(void 0===(f=p.fieldTransforms)&&void 0===_||f&&_&&yr(f,_,(w,T)=>function _i(p,o){return p.field.isEqual(o.field)&&(_=o.transform,(f=p.transform)instanceof Qa&&_ instanceof Qa||f instanceof Cu&&_ instanceof Cu?yr(f.elements,_.elements,so):f instanceof Yr&&_ instanceof Yr?so(f.Pe,_.Pe):f instanceof Eu&&_ instanceof Eu);var f,_}(w,T))))&&(0===p.type?p.value.isEqual(o.value):1!==p.type||p.data.isEqual(o.data)&&p.fieldMask.isEqual(o.fieldMask));var f,_}class F extends Dr{constructor(o,u,f,_=[]){super(),this.key=o,this.value=u,this.precondition=f,this.fieldTransforms=_,this.type=0}getFieldMask(){return null}}class re extends Dr{constructor(o,u,f,_,w=[]){super(),this.key=o,this.data=u,this.fieldMask=f,this.precondition=_,this.fieldTransforms=w,this.type=1}getFieldMask(){return this.fieldMask}}function W(p){const o=new Map;return p.fieldMask.fields.forEach(u=>{if(!u.isEmpty()){const f=p.data.field(u);o.set(u,f)}}),o}function ne(p,o,u){const f=new Map;Ue(p.length===u.length);for(let _=0;_<u.length;_++){const w=p[_],T=w.transform,L=o.data.field(w.field);f.set(w.field,Wu(T,L,u[_]))}return f}function Ce(p,o,u){const f=new Map;for(const _ of p){const w=_.transform,T=u.data.field(_.field);f.set(_.field,zu(w,T,o))}return f}class ut extends Dr{constructor(o,u){super(),this.key=o,this.precondition=u,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mt extends Dr{constructor(o,u){super(),this.key=o,this.precondition=u,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mn{constructor(o,u,f,_){this.batchId=o,this.localWriteTime=u,this.baseMutations=f,this.mutations=_}applyToRemoteDocument(o,u){const f=u.mutationResults;for(let _=0;_<this.mutations.length;_++){const w=this.mutations[_];w.key.isEqual(o.key)&&Cf(w,o,f[_])}}applyToLocalView(o,u){for(const f of this.baseMutations)f.key.isEqual(o.key)&&(u=Er(f,o,u,this.localWriteTime));for(const f of this.mutations)f.key.isEqual(o.key)&&(u=Er(f,o,u,this.localWriteTime));return u}applyToLocalDocumentSet(o,u){const f=Ec();return this.mutations.forEach(_=>{const w=o.get(_.key),T=w.overlayedDocument;let L=this.applyToLocalView(T,w.mutatedFields);L=u.has(_.key)?null:L;const G=Jt(T,L);null!==G&&f.set(_.key,G),T.isValidDocument()||T.convertToNoDocument(sn.min())}),f}keys(){return this.mutations.reduce((o,u)=>o.add(u.key),Yn())}isEqual(o){return this.batchId===o.batchId&&yr(this.mutations,o.mutations,(u,f)=>co(u,f))&&yr(this.baseMutations,o.baseMutations,(u,f)=>co(u,f))}}class gn{constructor(o,u,f,_){this.batch=o,this.commitVersion=u,this.mutationResults=f,this.docVersions=_}static from(o,u,f){Ue(o.mutations.length===f.length);let _=function(){return As}();const w=o.mutations;for(let T=0;T<w.length;T++)_=_.insert(w[T].key,f[T].version);return new gn(o,u,f,_)}}class Kr{constructor(o,u){this.largestBatchId=o,this.mutation=u}getKey(){return this.mutation.key}isEqual(o){return null!==o&&this.mutation===o.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class pr{constructor(o,u){this.count=o,this.unchangedNames=u}}var dr,Ke;function Qo(p){if(void 0===p)return Xt("GRPC error has no .code"),le.UNKNOWN;switch(p){case dr.OK:return le.OK;case dr.CANCELLED:return le.CANCELLED;case dr.UNKNOWN:return le.UNKNOWN;case dr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case dr.INTERNAL:return le.INTERNAL;case dr.UNAVAILABLE:return le.UNAVAILABLE;case dr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case dr.NOT_FOUND:return le.NOT_FOUND;case dr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case dr.ABORTED:return le.ABORTED;case dr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case dr.DATA_LOSS:return le.DATA_LOSS;default:return Ne()}}(Ke=dr||(dr={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";const na=new vt([4294967295,4294967295],0);function Mi(p){const o=function Yo(){return new TextEncoder}().encode(p),u=new ze;return u.update(o),new Uint8Array(u.digest())}function ga(p){const o=new DataView(p.buffer),u=o.getUint32(0,!0),f=o.getUint32(4,!0),_=o.getUint32(8,!0),w=o.getUint32(12,!0);return[new vt([u,f],0),new vt([_,w],0)]}class En{constructor(o,u,f){if(this.bitmap=o,this.padding=u,this.hashCount=f,u<0||u>=8)throw new bs(`Invalid padding: ${u}`);if(f<0)throw new bs(`Invalid hash count: ${f}`);if(o.length>0&&0===this.hashCount)throw new bs(`Invalid hash count: ${f}`);if(0===o.length&&0!==u)throw new bs(`Invalid padding when bitmap length is 0: ${u}`);this.Ie=8*o.length-u,this.Te=vt.fromNumber(this.Ie)}Ee(o,u,f){let _=o.add(u.multiply(vt.fromNumber(f)));return 1===_.compare(na)&&(_=new vt([_.getBits(0),_.getBits(1)],0)),_.modulo(this.Te).toNumber()}de(o){return!!(this.bitmap[Math.floor(o/8)]&1<<o%8)}mightContain(o){if(0===this.Ie)return!1;const u=Mi(o),[f,_]=ga(u);for(let w=0;w<this.hashCount;w++){const T=this.Ee(f,_,w);if(!this.de(T))return!1}return!0}static create(o,u,f){const _=o%8==0?0:8-o%8,w=new Uint8Array(Math.ceil(o/8)),T=new En(w,_,u);return f.forEach(L=>T.insert(L)),T}insert(o){if(0===this.Ie)return;const u=Mi(o),[f,_]=ga(u);for(let w=0;w<this.hashCount;w++){const T=this.Ee(f,_,w);this.Ae(T)}}Ae(o){const u=Math.floor(o/8);this.bitmap[u]|=1<<o%8}}class bs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ts{constructor(o,u,f,_,w){this.snapshotVersion=o,this.targetChanges=u,this.targetMismatches=f,this.documentUpdates=_,this.resolvedLimboDocuments=w}static createSynthesizedRemoteEventForCurrentChange(o,u,f){const _=new Map;return _.set(o,xs.createSynthesizedTargetChangeForCurrentChange(o,u,f)),new Ts(sn.min(),_,new Zn(Dn),Tn(),Yn())}}class xs{constructor(o,u,f,_,w){this.resumeToken=o,this.current=u,this.addedDocuments=f,this.modifiedDocuments=_,this.removedDocuments=w}static createSynthesizedTargetChangeForCurrentChange(o,u,f){return new xs(f,u,Yn(),Yn(),Yn())}}class qc{constructor(o,u,f,_){this.Re=o,this.removedTargetIds=u,this.key=f,this.Ve=_}}class jl{constructor(o,u){this.targetId=o,this.me=u}}class Md{constructor(o,u,f=Ui.EMPTY_BYTE_STRING,_=null){this.state=o,this.targetIds=u,this.resumeToken=f,this.cause=_}}class ss{constructor(){this.fe=0,this.ge=ia(),this.pe=Ui.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(o){o.approximateByteSize()>0&&(this.we=!0,this.pe=o)}Ce(){let o=Yn(),u=Yn(),f=Yn();return this.ge.forEach((_,w)=>{switch(w){case 0:o=o.add(_);break;case 2:u=u.add(_);break;case 1:f=f.add(_);break;default:Ne()}}),new xs(this.pe,this.ye,o,u,f)}ve(){this.we=!1,this.ge=ia()}Fe(o,u){this.we=!0,this.ge=this.ge.insert(o,u)}Me(o){this.we=!0,this.ge=this.ge.remove(o)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class To{constructor(o){this.Le=o,this.Be=new Map,this.ke=Tn(),this.qe=ra(),this.Qe=new Zn(Dn)}Ke(o){for(const u of o.Re)o.Ve&&o.Ve.isFoundDocument()?this.$e(u,o.Ve):this.Ue(u,o.key,o.Ve);for(const u of o.removedTargetIds)this.Ue(u,o.key,o.Ve)}We(o){this.forEachTarget(o,u=>{const f=this.Ge(u);switch(o.state){case 0:this.ze(u)&&f.De(o.resumeToken);break;case 1:f.Oe(),f.Se||f.ve(),f.De(o.resumeToken);break;case 2:f.Oe(),f.Se||this.removeTarget(u);break;case 3:this.ze(u)&&(f.Ne(),f.De(o.resumeToken));break;case 4:this.ze(u)&&(this.je(u),f.De(o.resumeToken));break;default:Ne()}})}forEachTarget(o,u){o.targetIds.length>0?o.targetIds.forEach(u):this.Be.forEach((f,_)=>{this.ze(_)&&u(_)})}He(o){const u=o.targetId,f=o.me.count,_=this.Je(u);if(_){const w=_.target;if($c(w))if(0===f){const T=new zt(w.path);this.Ue(u,T,fi.newNoDocument(T,sn.min()))}else Ue(1===f);else{const T=this.Ye(u);if(T!==f){const L=this.Ze(o),G=L?this.Xe(L,o,T):1;0!==G&&(this.je(u),this.Qe=this.Qe.insert(u,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(o){const u=o.me.unchangedNames;if(!u||!u.bits)return null;const{bits:{bitmap:f="",padding:_=0},hashCount:w=0}=u;let T,L;try{T=_s(f).toUint8Array()}catch(G){if(G instanceof ks)return Tr("Decoding the base64 bloom filter in existence filter failed ("+G.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw G}try{L=new En(T,_,w)}catch(G){return Tr(G instanceof bs?"BloomFilter error: ":"Applying bloom filter failed: ",G),null}return 0===L.Ie?null:L}Xe(o,u,f){return u.me.count===f-this.nt(o,u.targetId)?0:2}nt(o,u){const f=this.Le.getRemoteKeysForTarget(u);let _=0;return f.forEach(w=>{const T=this.Le.tt(),L=`projects/${T.projectId}/databases/${T.database}/documents/${w.path.canonicalString()}`;o.mightContain(L)||(this.Ue(u,w,null),_++)}),_}rt(o){const u=new Map;this.Be.forEach((w,T)=>{const L=this.Je(T);if(L){if(w.current&&$c(L.target)){const G=new zt(L.target.path);null!==this.ke.get(G)||this.it(T,G)||this.Ue(T,G,fi.newNoDocument(G,o))}w.be&&(u.set(T,w.Ce()),w.ve())}});let f=Yn();this.qe.forEach((w,T)=>{let L=!0;T.forEachWhile(G=>{const Q=this.Je(G);return!Q||"TargetPurposeLimboResolution"===Q.purpose||(L=!1,!1)}),L&&(f=f.add(w))}),this.ke.forEach((w,T)=>T.setReadTime(o));const _=new Ts(o,u,this.Qe,this.ke,f);return this.ke=Tn(),this.qe=ra(),this.Qe=new Zn(Dn),_}$e(o,u){if(!this.ze(o))return;const f=this.it(o,u.key)?2:0;this.Ge(o).Fe(u.key,f),this.ke=this.ke.insert(u.key,u),this.qe=this.qe.insert(u.key,this.st(u.key).add(o))}Ue(o,u,f){if(!this.ze(o))return;const _=this.Ge(o);this.it(o,u)?_.Fe(u,1):_.Me(u),this.qe=this.qe.insert(u,this.st(u).delete(o)),f&&(this.ke=this.ke.insert(u,f))}removeTarget(o){this.Be.delete(o)}Ye(o){const u=this.Ge(o).Ce();return this.Le.getRemoteKeysForTarget(o).size+u.addedDocuments.size-u.removedDocuments.size}xe(o){this.Ge(o).xe()}Ge(o){let u=this.Be.get(o);return u||(u=new ss,this.Be.set(o,u)),u}st(o){let u=this.qe.get(o);return u||(u=new Bn(Dn),this.qe=this.qe.insert(o,u)),u}ze(o){const u=null!==this.Je(o);return u||Je("WatchChangeAggregator","Detected inactive target",o),u}Je(o){const u=this.Be.get(o);return u&&u.Se?null:this.Le.ot(o)}je(o){this.Be.set(o,new ss),this.Le.getRemoteKeysForTarget(o).forEach(u=>{this.Ue(o,u,null)})}it(o,u){return this.Le.getRemoteKeysForTarget(o).has(u)}}function ra(){return new Zn(zt.comparator)}function ia(){return new Zn(zt.comparator)}const Hl={asc:"ASCENDING",desc:"DESCENDING"},qi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qu={and:"AND",or:"OR"};class dn{constructor(o,u){this.databaseId=o,this.useProto3Json=u}}function ka(p,o){return p.useProto3Json||ri(o)?o:{value:o}}function Zi(p,o){return p.useProto3Json?`${new Date(1e3*o.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+o.nanoseconds).slice(-9)}Z`:{seconds:""+o.seconds,nanos:o.nanoseconds}}function pl(p,o){return p.useProto3Json?o.toBase64():o.toUint8Array()}function Iu(p,o){return Zi(p,o.toTimestamp())}function Oi(p){return Ue(!!p),sn.fromTimestamp(function(u){const f=qo(u);return new lr(f.seconds,f.nanos)}(p))}function Au(p,o){return Ku(p,o).canonicalString()}function Ku(p,o){const u=(_=p,new Pt(["projects",_.projectId,"databases",_.database])).child("documents");var _;return void 0===o?u:u.child(o)}function Ja(p){const o=Pt.fromString(p);return Ue(Od(o)),o}function vi(p,o){return Au(p.databaseId,o.path)}function as(p,o){const u=Ja(o);if(u.get(1)!==p.databaseId.projectId)throw new pe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+u.get(1)+" vs "+p.databaseId.projectId);if(u.get(3)!==p.databaseId.database)throw new pe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+u.get(3)+" vs "+p.databaseId.database);return new zt(hi(u))}function Kc(p,o){return Au(p.databaseId,o)}function Gl(p){return new Pt(["projects",p.databaseId.projectId,"databases",p.databaseId.database]).canonicalString()}function hi(p){return Ue(p.length>4&&"documents"===p.get(4)),p.popFirst(5)}function Fr(p,o,u){return{name:vi(p,o),fields:u.value.mapValue.fields}}function Fa(p,o){return{documents:[Kc(p,o.path)]}}function Ji(p,o){const u={structuredQuery:{}},f=o.path;let _;null!==o.collectionGroup?(_=f,u.structuredQuery.from=[{collectionId:o.collectionGroup,allDescendants:!0}]):(_=f.popLast(),u.structuredQuery.from=[{collectionId:f.lastSegment()}]),u.parent=Kc(p,_);const w=function(Q){if(0!==Q.length)return ml(hr.create(Q,"and"))}(o.filters);w&&(u.structuredQuery.where=w);const T=function(Q){if(0!==Q.length)return Q.map(ce=>{return{field:_n((Fe=ce).field),direction:Zu(Fe.dir)};var Fe})}(o.orderBy);T&&(u.structuredQuery.orderBy=T);const L=ka(p,o.limit);return null!==L&&(u.structuredQuery.limit=L),o.startAt&&(u.structuredQuery.startAt={before:(Q=o.startAt).inclusive,values:Q.position}),o.endAt&&(u.structuredQuery.endAt=function(Q){return{before:!Q.inclusive,values:Q.position}}(o.endAt)),{_t:u,parent:_};var Q}function Qu(p){let o=function _o(p){const o=Ja(p);return 4===o.length?Pt.emptyPath():hi(o)}(p.parent);const u=p.structuredQuery,f=u.from?u.from.length:0;let _=null;if(f>0){Ue(1===f);const ce=u.from[0];ce.allDescendants?_=ce.collectionId:o=o.child(ce.collectionId)}let w=[];u.where&&(w=function(we){const Fe=Ar(we);return Fe instanceof hr&&fa(Fe)?Fe.getFilters():[Fe]}(u.where));let T=[];u.orderBy&&(T=u.orderBy.map(Fe=>{return new Ka(Tu((Lt=Fe).field),function(jt){switch(jt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Lt.direction));var Lt}));let L=null;u.limit&&(L=function(we){let Fe;return Fe="object"==typeof we?we.value:we,ri(Fe)?null:Fe}(u.limit));let G=null;var we;u.startAt&&(G=new zi((we=u.startAt).values||[],!!we.before));let Q=null;return u.endAt&&(Q=function(we){return new zi(we.values||[],!we.before)}(u.endAt)),function mu(p,o,u,f,_,w,T,L){return new Yi(p,o,u,f,_,w,T,L)}(o,_,T,w,L,"F",G,Q)}function Ar(p){return void 0!==p.unaryFilter?function(u){switch(u.unaryFilter.op){case"IS_NAN":const f=Tu(u.unaryFilter.field);return Gn.create(f,"==",{doubleValue:NaN});case"IS_NULL":const _=Tu(u.unaryFilter.field);return Gn.create(_,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const w=Tu(u.unaryFilter.field);return Gn.create(w,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const T=Tu(u.unaryFilter.field);return Gn.create(T,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(p):void 0!==p.fieldFilter?Gn.create(Tu((u=p).fieldFilter.field),function(_){switch(_){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(u.fieldFilter.op),u.fieldFilter.value):void 0!==p.compositeFilter?function(u){return hr.create(u.compositeFilter.filters.map(f=>Ar(f)),function(_){switch(_){case"AND":return"and";case"OR":return"or";default:return Ne()}}(u.compositeFilter.op))}(p):Ne();var u}function Zu(p){return Hl[p]}function gl(p){return qi[p]}function zl(p){return qu[p]}function _n(p){return{fieldPath:p.canonicalString()}}function Tu(p){return an.fromServerFormat(p.fieldPath)}function ml(p){return p instanceof Gn?function(u){if("=="===u.op){if(go(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NAN"}};if(mc(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NULL"}}}else if("!="===u.op){if(go(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NOT_NAN"}};if(mc(u.value))return{unaryFilter:{field:_n(u.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_n(u.field),op:gl(u.op),value:u.value}}}(p):p instanceof hr?function(u){const f=u.getFilters().map(_=>ml(_));return 1===f.length?f[0]:{compositeFilter:{op:zl(u.op),filters:f}}}(p):Ne()}function La(p){const o=[];return p.fields.forEach(u=>o.push(u.canonicalString())),{fieldPaths:o}}function Od(p){return p.length>=4&&"projects"===p.get(0)&&"databases"===p.get(2)}class _a{constructor(o,u,f,_,w=sn.min(),T=sn.min(),L=Ui.EMPTY_BYTE_STRING,G=null){this.target=o,this.targetId=u,this.purpose=f,this.sequenceNumber=_,this.snapshotVersion=w,this.lastLimboFreeSnapshotVersion=T,this.resumeToken=L,this.expectedCount=G}withSequenceNumber(o){return new _a(this.target,this.targetId,this.purpose,o,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(o,u){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,u,this.lastLimboFreeSnapshotVersion,o,null)}withExpectedCount(o){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,o)}withLastLimboFreeSnapshotVersion(o){return new _a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,o,this.resumeToken,this.expectedCount)}}class Pd{constructor(o){this.ct=o}}function M(p){const o=Qu({parent:p.parent,structuredQuery:p.structuredQuery});return"LAST"===p.limitType?Z(o,o.limit,"L"):o}class Mn{constructor(){}Pt(o,u){this.It(o,u),u.Tt()}It(o,u){if("nullValue"in o)this.Et(u,5);else if("booleanValue"in o)this.Et(u,10),u.dt(o.booleanValue?1:0);else if("integerValue"in o)this.Et(u,15),u.dt(Ri(o.integerValue));else if("doubleValue"in o){const f=Ri(o.doubleValue);isNaN(f)?this.Et(u,13):(this.Et(u,15),qn(f)?u.dt(0):u.dt(f))}else if("timestampValue"in o){let f=o.timestampValue;this.Et(u,20),"string"==typeof f&&(f=qo(f)),u.At(`${f.seconds||""}`),u.dt(f.nanos||0)}else if("stringValue"in o)this.Rt(o.stringValue,u),this.Vt(u);else if("bytesValue"in o)this.Et(u,30),u.ft(_s(o.bytesValue)),this.Vt(u);else if("referenceValue"in o)this.gt(o.referenceValue,u);else if("geoPointValue"in o){const f=o.geoPointValue;this.Et(u,45),u.dt(f.latitude||0),u.dt(f.longitude||0)}else"mapValue"in o?la(o)?this.Et(u,Number.MAX_SAFE_INTEGER):(this.yt(o.mapValue,u),this.Vt(u)):"arrayValue"in o?(this.wt(o.arrayValue,u),this.Vt(u)):Ne()}Rt(o,u){this.Et(u,25),this.St(o,u)}St(o,u){u.At(o)}yt(o,u){const f=o.fields||{};this.Et(u,55);for(const _ of Object.keys(f))this.Rt(_,u),this.It(f[_],u)}wt(o,u){const f=o.values||[];this.Et(u,50);for(const _ of f)this.It(_,u)}gt(o,u){this.Et(u,37),zt.fromName(o).path.forEach(f=>{this.Et(u,60),this.St(f,u)})}Et(o,u){o.dt(u)}Vt(o){o.dt(2)}}Mn.bt=new Mn;class Kl{constructor(){this._n=new Xl}addToCollectionParentIndex(o,u){return this._n.add(u),he.resolve()}getCollectionParents(o,u){return he.resolve(this._n.getEntries(u))}addFieldIndex(o,u){return he.resolve()}deleteFieldIndex(o,u){return he.resolve()}deleteAllFieldIndexes(o){return he.resolve()}createTargetIndexes(o,u){return he.resolve()}getDocumentsMatchingTarget(o,u){return he.resolve(null)}getIndexType(o,u){return he.resolve(0)}getFieldIndexes(o,u){return he.resolve([])}getNextCollectionGroupToUpdate(o){return he.resolve(null)}getMinOffset(o,u){return he.resolve(Wn.min())}getMinOffsetFromCollectionGroup(o,u){return he.resolve(Wn.min())}updateCollectionGroup(o,u,f){return he.resolve()}updateIndexEntries(o,u){return he.resolve()}}class Xl{constructor(){this.index={}}add(o){const u=o.lastSegment(),f=o.popLast(),_=this.index[u]||new Bn(Pt.comparator),w=!_.has(f);return this.index[u]=_.add(f),w}has(o){const u=o.lastSegment(),f=o.popLast(),_=this.index[u];return _&&_.has(f)}getEntries(o){return(this.index[o]||new Bn(Pt.comparator)).toArray()}}new Uint8Array(0);class Lr{constructor(o,u,f){this.cacheSizeCollectionThreshold=o,this.percentileToCollect=u,this.maximumSequenceNumbersToCollect=f}static withCacheSize(o){return new Lr(o,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(41943040,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);class nc{constructor(o){this.On=o}next(){return this.On+=2,this.On}static Nn(){return new nc(0)}static Ln(){return new nc(-1)}}class Df{constructor(){this.changes=new bo(o=>o.toString(),(o,u)=>o.isEqual(u)),this.changesApplied=!1}addEntry(o){this.assertNotApplied(),this.changes.set(o.key,o)}removeEntry(o,u){this.assertNotApplied(),this.changes.set(o,fi.newInvalidDocument(o).setReadTime(u))}getEntry(o,u){this.assertNotApplied();const f=this.changes.get(u);return void 0!==f?he.resolve(f):this.getFromCache(o,u)}getEntries(o,u){return this.getAllFromCache(o,u)}apply(o){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(o)}assertNotApplied(){}}class ls{constructor(o,u){this.overlayedDocument=o,this.mutatedFields=u}}class ds{constructor(o,u,f,_){this.remoteDocumentCache=o,this.mutationQueue=u,this.documentOverlayCache=f,this.indexManager=_}getDocument(o,u){let f=null;return this.documentOverlayCache.getOverlay(o,u).next(_=>(f=_,this.remoteDocumentCache.getEntry(o,u))).next(_=>(null!==f&&Er(f.mutation,_,Di.empty(),lr.now()),_))}getDocuments(o,u){return this.remoteDocumentCache.getEntries(o,u).next(f=>this.getLocalViewOfDocuments(o,f,Yn()).next(()=>f))}getLocalViewOfDocuments(o,u,f=Yn()){const _=js();return this.populateOverlays(o,_,u).next(()=>this.computeViews(o,u,_,f).next(w=>{let T=Us();return w.forEach((L,G)=>{T=T.insert(L,G.overlayedDocument)}),T}))}getOverlayedDocuments(o,u){const f=js();return this.populateOverlays(o,f,u).next(()=>this.computeViews(o,u,f,Yn()))}populateOverlays(o,u,f){const _=[];return f.forEach(w=>{u.has(w)||_.push(w)}),this.documentOverlayCache.getOverlays(o,_).next(w=>{w.forEach((T,L)=>{u.set(T,L)})})}computeViews(o,u,f,_){let w=Tn();const T=yn(),L=yn();return u.forEach((G,Q)=>{const ce=f.get(Q.key);_.has(Q.key)&&(void 0===ce||ce.mutation instanceof re)?w=w.insert(Q.key,Q):void 0!==ce?(T.set(Q.key,ce.mutation.getFieldMask()),Er(ce.mutation,Q,ce.mutation.getFieldMask(),lr.now())):T.set(Q.key,Di.empty())}),this.recalculateAndSaveOverlays(o,w).next(G=>(G.forEach((Q,ce)=>T.set(Q,ce)),u.forEach((Q,ce)=>{var we;return L.set(Q,new ls(ce,null!==(we=T.get(Q))&&void 0!==we?we:null))}),L))}recalculateAndSaveOverlays(o,u){const f=yn();let _=new Zn((T,L)=>T-L),w=Yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(o,u).next(T=>{for(const L of T)L.keys().forEach(G=>{const Q=u.get(G);if(null===Q)return;let ce=f.get(G)||Di.empty();ce=L.applyToLocalView(Q,ce),f.set(G,ce);const we=(_.get(L.batchId)||Yn()).add(G);_=_.insert(L.batchId,we)})}).next(()=>{const T=[],L=_.getReverseIterator();for(;L.hasNext();){const G=L.getNext(),Q=G.key,ce=G.value,we=Ec();ce.forEach(Fe=>{if(!w.has(Fe)){const pt=Jt(u.get(Fe),f.get(Fe));null!==pt&&we.set(Fe,pt),w=w.add(Fe)}}),T.push(this.documentOverlayCache.saveOverlays(o,Q,we))}return he.waitFor(T)}).next(()=>f)}recalculateAndSaveOverlaysForDocumentKeys(o,u){return this.remoteDocumentCache.getEntries(o,u).next(f=>this.recalculateAndSaveOverlays(o,f))}getDocumentsMatchingQuery(o,u,f,_){return zt.isDocumentKey((T=u).path)&&null===T.collectionGroup&&0===T.filters.length?this.getDocumentsMatchingDocumentQuery(o,u.path):Is(u)?this.getDocumentsMatchingCollectionGroupQuery(o,u,f,_):this.getDocumentsMatchingCollectionQuery(o,u,f,_);var T}getNextDocuments(o,u,f,_){return this.remoteDocumentCache.getAllFromCollectionGroup(o,u,f,_).next(w=>{const T=_-w.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(o,u,f.largestBatchId,_-w.size):he.resolve(js());let L=-1,G=w;return T.next(Q=>he.forEach(Q,(ce,we)=>(L<we.largestBatchId&&(L=we.largestBatchId),w.get(ce)?he.resolve():this.remoteDocumentCache.getEntry(o,ce).next(Fe=>{G=G.insert(ce,Fe)}))).next(()=>this.populateOverlays(o,Q,w)).next(()=>this.computeViews(o,G,Q,Yn())).next(ce=>({batchId:L,changes:qr(ce)})))})}getDocumentsMatchingDocumentQuery(o,u){return this.getDocument(o,new zt(u)).next(f=>{let _=Us();return f.isFoundDocument()&&(_=_.insert(f.key,f)),_})}getDocumentsMatchingCollectionGroupQuery(o,u,f,_){const w=u.collectionGroup;let T=Us();return this.indexManager.getCollectionParents(o,w).next(L=>he.forEach(L,G=>{const Q=(we=u,Fe=G.child(w),new Yi(Fe,null,we.explicitOrderBy.slice(),we.filters.slice(),we.limit,we.limitType,we.startAt,we.endAt));var we,Fe;return this.getDocumentsMatchingCollectionQuery(o,Q,f,_).next(ce=>{ce.forEach((we,Fe)=>{T=T.insert(we,Fe)})})}).next(()=>T))}getDocumentsMatchingCollectionQuery(o,u,f,_){let w;return this.documentOverlayCache.getOverlaysForCollection(o,u.path,f.largestBatchId).next(T=>(w=T,this.remoteDocumentCache.getDocumentsMatchingQuery(o,u,f,w,_))).next(T=>{w.forEach((G,Q)=>{const ce=Q.getKey();null===T.get(ce)&&(T=T.insert(ce,fi.newInvalidDocument(ce)))});let L=Us();return T.forEach((G,Q)=>{const ce=w.get(G);void 0!==ce&&Er(ce.mutation,Q,Di.empty(),lr.now()),Mt(u,Q)&&(L=L.insert(G,Q))}),L})}}class El{constructor(o){this.serializer=o,this.cr=new Map,this.lr=new Map}getBundleMetadata(o,u){return he.resolve(this.cr.get(u))}saveBundleMetadata(o,u){return this.cr.set(u.id,{id:(_=u).id,version:_.version,createTime:Oi(_.createTime)}),he.resolve();var _}getNamedQuery(o,u){return he.resolve(this.lr.get(u))}saveNamedQuery(o,u){return this.lr.set(u.name,{name:(_=u).name,query:M(_.bundledQuery),readTime:Oi(_.readTime)}),he.resolve();var _}}class Ei{constructor(){this.overlays=new Zn(zt.comparator),this.hr=new Map}getOverlay(o,u){return he.resolve(this.overlays.get(u))}getOverlays(o,u){const f=js();return he.forEach(u,_=>this.getOverlay(o,_).next(w=>{null!==w&&f.set(_,w)})).next(()=>f)}saveOverlays(o,u,f){return f.forEach((_,w)=>{this.ht(o,u,w)}),he.resolve()}removeOverlaysForBatchId(o,u,f){const _=this.hr.get(f);return void 0!==_&&(_.forEach(w=>this.overlays=this.overlays.remove(w)),this.hr.delete(f)),he.resolve()}getOverlaysForCollection(o,u,f){const _=js(),w=u.length+1,T=new zt(u.child("")),L=this.overlays.getIteratorFrom(T);for(;L.hasNext();){const G=L.getNext().value,Q=G.getKey();if(!u.isPrefixOf(Q.path))break;Q.path.length===w&&G.largestBatchId>f&&_.set(G.getKey(),G)}return he.resolve(_)}getOverlaysForCollectionGroup(o,u,f,_){let w=new Zn((Q,ce)=>Q-ce);const T=this.overlays.getIterator();for(;T.hasNext();){const Q=T.getNext().value;if(Q.getKey().getCollectionGroup()===u&&Q.largestBatchId>f){let ce=w.get(Q.largestBatchId);null===ce&&(ce=js(),w=w.insert(Q.largestBatchId,ce)),ce.set(Q.getKey(),Q)}}const L=js(),G=w.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((Q,ce)=>L.set(Q,ce)),!(L.size()>=_)););return he.resolve(L)}ht(o,u,f){const _=this.overlays.get(f.key);if(null!==_){const T=this.hr.get(_.largestBatchId).delete(f.key);this.hr.set(_.largestBatchId,T)}this.overlays=this.overlays.insert(f.key,new Kr(u,f));let w=this.hr.get(u);void 0===w&&(w=Yn(),this.hr.set(u,w)),this.hr.set(u,w.add(f.key))}}class Pi{constructor(){this.Pr=new Bn(Ni.Ir),this.Tr=new Bn(Ni.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(o,u){const f=new Ni(o,u);this.Pr=this.Pr.add(f),this.Tr=this.Tr.add(f)}dr(o,u){o.forEach(f=>this.addReference(f,u))}removeReference(o,u){this.Ar(new Ni(o,u))}Rr(o,u){o.forEach(f=>this.removeReference(f,u))}Vr(o){const u=new zt(new Pt([])),f=new Ni(u,o),_=new Ni(u,o+1),w=[];return this.Tr.forEachInRange([f,_],T=>{this.Ar(T),w.push(T.key)}),w}mr(){this.Pr.forEach(o=>this.Ar(o))}Ar(o){this.Pr=this.Pr.delete(o),this.Tr=this.Tr.delete(o)}gr(o){const u=new zt(new Pt([])),f=new Ni(u,o),_=new Ni(u,o+1);let w=Yn();return this.Tr.forEachInRange([f,_],T=>{w=w.add(T.key)}),w}containsKey(o){const u=new Ni(o,0),f=this.Pr.firstAfterOrEqual(u);return null!==f&&o.isEqual(f.key)}}class Ni{constructor(o,u){this.key=o,this.pr=u}static Ir(o,u){return zt.comparator(o.key,u.key)||Dn(o.pr,u.pr)}static Er(o,u){return Dn(o.pr,u.pr)||zt.comparator(o.key,u.key)}}class Jn{constructor(o,u){this.indexManager=o,this.referenceDelegate=u,this.mutationQueue=[],this.yr=1,this.wr=new Bn(Ni.Ir)}checkEmpty(o){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(o,u,f,_){const w=this.yr;this.yr++;const T=new mn(w,u,f,_);this.mutationQueue.push(T);for(const L of _)this.wr=this.wr.add(new Ni(L.key,w)),this.indexManager.addToCollectionParentIndex(o,L.key.path.popLast());return he.resolve(T)}lookupMutationBatch(o,u){return he.resolve(this.Sr(u))}getNextMutationBatchAfterBatchId(o,u){const _=this.br(u+1),w=_<0?0:_;return he.resolve(this.mutationQueue.length>w?this.mutationQueue[w]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(o){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(o,u){const f=new Ni(u,0),_=new Ni(u,Number.POSITIVE_INFINITY),w=[];return this.wr.forEachInRange([f,_],T=>{const L=this.Sr(T.pr);w.push(L)}),he.resolve(w)}getAllMutationBatchesAffectingDocumentKeys(o,u){let f=new Bn(Dn);return u.forEach(_=>{const w=new Ni(_,0),T=new Ni(_,Number.POSITIVE_INFINITY);this.wr.forEachInRange([w,T],L=>{f=f.add(L.pr)})}),he.resolve(this.Dr(f))}getAllMutationBatchesAffectingQuery(o,u){const f=u.path,_=f.length+1;let w=f;zt.isDocumentKey(w)||(w=w.child(""));const T=new Ni(new zt(w),0);let L=new Bn(Dn);return this.wr.forEachWhile(G=>{const Q=G.key.path;return!!f.isPrefixOf(Q)&&(Q.length===_&&(L=L.add(G.pr)),!0)},T),he.resolve(this.Dr(L))}Dr(o){const u=[];return o.forEach(f=>{const _=this.Sr(f);null!==_&&u.push(_)}),u}removeMutationBatch(o,u){Ue(0===this.Cr(u.batchId,"removed")),this.mutationQueue.shift();let f=this.wr;return he.forEach(u.mutations,_=>{const w=new Ni(_.key,u.batchId);return f=f.delete(w),this.referenceDelegate.markPotentiallyOrphaned(o,_.key)}).next(()=>{this.wr=f})}Mn(o){}containsKey(o,u){const f=new Ni(u,0),_=this.wr.firstAfterOrEqual(f);return he.resolve(u.isEqual(_&&_.key))}performConsistencyCheck(o){return he.resolve()}Cr(o,u){return this.br(o)}br(o){return 0===this.mutationQueue.length?0:o-this.mutationQueue[0].batchId}Sr(o){const u=this.br(o);return u<0||u>=this.mutationQueue.length?null:this.mutationQueue[u]}}class Zl{constructor(o){this.vr=o,this.docs=new Zn(zt.comparator),this.size=0}setIndexManager(o){this.indexManager=o}addEntry(o,u){const f=u.key,_=this.docs.get(f),w=_?_.size:0,T=this.vr(u);return this.docs=this.docs.insert(f,{document:u.mutableCopy(),size:T}),this.size+=T-w,this.indexManager.addToCollectionParentIndex(o,f.path.popLast())}removeEntry(o){const u=this.docs.get(o);u&&(this.docs=this.docs.remove(o),this.size-=u.size)}getEntry(o,u){const f=this.docs.get(u);return he.resolve(f?f.document.mutableCopy():fi.newInvalidDocument(u))}getEntries(o,u){let f=Tn();return u.forEach(_=>{const w=this.docs.get(_);f=f.insert(_,w?w.document.mutableCopy():fi.newInvalidDocument(_))}),he.resolve(f)}getDocumentsMatchingQuery(o,u,f,_){let w=Tn();const T=u.path,L=new zt(T.child("")),G=this.docs.getIteratorFrom(L);for(;G.hasNext();){const{key:Q,value:{document:ce}}=G.getNext();if(!T.isPrefixOf(Q.path))break;Q.path.length>T.length+1||gi(new Wn((p=ce).readTime,p.key,-1),f)<=0||(_.has(ce.key)||Mt(u,ce))&&(w=w.insert(ce.key,ce.mutableCopy()))}var p;return he.resolve(w)}getAllFromCollectionGroup(o,u,f,_){Ne()}Fr(o,u){return he.forEach(this.docs,f=>u(f))}newChangeBuffer(o){return new rc(this)}getSize(o){return he.resolve(this.size)}}class rc extends Df{constructor(o){super(),this.ar=o}applyChanges(o){const u=[];return this.changes.forEach((f,_)=>{_.isValidDocument()?u.push(this.ar.addEntry(o,_)):this.ar.removeEntry(f)}),he.waitFor(u)}getFromCache(o,u){return this.ar.getEntry(o,u)}getAllFromCache(o,u){return this.ar.getEntries(o,u)}}class wl{constructor(o){this.persistence=o,this.Mr=new bo(u=>is(u),Gc),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Pi,this.targetCount=0,this.Lr=nc.Nn()}forEachTarget(o,u){return this.Mr.forEach((f,_)=>u(_)),he.resolve()}getLastRemoteSnapshotVersion(o){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(o){return he.resolve(this.Or)}allocateTargetId(o){return this.highestTargetId=this.Lr.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(o,u,f){return f&&(this.lastRemoteSnapshotVersion=f),u>this.Or&&(this.Or=u),he.resolve()}qn(o){this.Mr.set(o.target,o);const u=o.targetId;u>this.highestTargetId&&(this.Lr=new nc(u),this.highestTargetId=u),o.sequenceNumber>this.Or&&(this.Or=o.sequenceNumber)}addTargetData(o,u){return this.qn(u),this.targetCount+=1,he.resolve()}updateTargetData(o,u){return this.qn(u),he.resolve()}removeTargetData(o,u){return this.Mr.delete(u.target),this.Nr.Vr(u.targetId),this.targetCount-=1,he.resolve()}removeTargets(o,u,f){let _=0;const w=[];return this.Mr.forEach((T,L)=>{L.sequenceNumber<=u&&null===f.get(L.targetId)&&(this.Mr.delete(T),w.push(this.removeMatchingKeysForTargetId(o,L.targetId)),_++)}),he.waitFor(w).next(()=>_)}getTargetCount(o){return he.resolve(this.targetCount)}getTargetData(o,u){const f=this.Mr.get(u)||null;return he.resolve(f)}addMatchingKeys(o,u,f){return this.Nr.dr(u,f),he.resolve()}removeMatchingKeys(o,u,f){this.Nr.Rr(u,f);const _=this.persistence.referenceDelegate,w=[];return _&&u.forEach(T=>{w.push(_.markPotentiallyOrphaned(o,T))}),he.waitFor(w)}removeMatchingKeysForTargetId(o,u){return this.Nr.Vr(u),he.resolve()}getMatchingKeysForTargetId(o,u){const f=this.Nr.gr(u);return he.resolve(f)}containsKey(o,u){return he.resolve(this.Nr.containsKey(u))}}class wi{constructor(o,u){this.Br={},this.overlays={},this.kr=new wr(0),this.qr=!1,this.qr=!0,this.referenceDelegate=o(this),this.Qr=new wl(this),this.indexManager=new Kl,this.remoteDocumentCache=new Zl(f=>this.referenceDelegate.Kr(f)),this.serializer=new Pd(u),this.$r=new El(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(o){return this.indexManager}getDocumentOverlayCache(o){let u=this.overlays[o.toKey()];return u||(u=new Ei,this.overlays[o.toKey()]=u),u}getMutationQueue(o,u){let f=this.Br[o.toKey()];return f||(f=new Jn(u,this.referenceDelegate),this.Br[o.toKey()]=f),f}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(o,u,f){Je("MemoryPersistence","Starting transaction:",o);const _=new nl(this.kr.next());return this.referenceDelegate.Ur(),f(_).next(w=>this.referenceDelegate.Wr(_).next(()=>w)).toPromise().then(w=>(_.raiseOnCommittedEvent(),w))}Gr(o,u){return he.or(Object.values(this.Br).map(f=>()=>f.containsKey(o,u)))}}class nl extends Zr{constructor(o){super(),this.currentSequenceNumber=o}}class Jc{constructor(o){this.persistence=o,this.zr=new Pi,this.jr=null}static Hr(o){return new Jc(o)}get Jr(){if(this.jr)return this.jr;throw Ne()}addReference(o,u,f){return this.zr.addReference(f,u),this.Jr.delete(f.toString()),he.resolve()}removeReference(o,u,f){return this.zr.removeReference(f,u),this.Jr.add(f.toString()),he.resolve()}markPotentiallyOrphaned(o,u){return this.Jr.add(u.toString()),he.resolve()}removeTarget(o,u){this.zr.Vr(u.targetId).forEach(_=>this.Jr.add(_.toString()));const f=this.persistence.getTargetCache();return f.getMatchingKeysForTargetId(o,u.targetId).next(_=>{_.forEach(w=>this.Jr.add(w.toString()))}).next(()=>f.removeTargetData(o,u))}Ur(){this.jr=new Set}Wr(o){const u=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Jr,f=>{const _=zt.fromPath(f);return this.Yr(o,_).next(w=>{w||u.removeEntry(_,sn.min())})}).next(()=>(this.jr=null,u.apply(o)))}updateLimboDocument(o,u){return this.Yr(o,u).next(f=>{f?this.Jr.delete(u.toString()):this.Jr.add(u.toString())})}Kr(o){return 0}Yr(o,u){return he.or([()=>he.resolve(this.zr.containsKey(u)),()=>this.persistence.getTargetCache().containsKey(o,u),()=>this.persistence.Gr(o,u)])}}class rl{constructor(o,u,f,_){this.targetId=o,this.fromCache=u,this.qi=f,this.Qi=_}static Ki(o,u){let f=Yn(),_=Yn();for(const w of u.docChanges)switch(w.type){case 0:f=f.add(w.doc.key);break;case 1:_=_.add(w.doc.key)}return new rl(o,u.fromCache,f,_)}}class Tc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(o){this._documentReadCount+=o}}class Il{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Ee.nr)()?8:function Qe(p){const o=p.match(/Android ([\d.]+)/i),u=o?o[1].split(".").slice(0,2).join("."):"-1";return Number(u)}((0,Ee.ZQ)())>0?6:4}initialize(o,u){this.zi=o,this.indexManager=u,this.$i=!0}getDocumentsMatchingQuery(o,u,f,_){const w={result:null};return this.ji(o,u).next(T=>{w.result=T}).next(()=>{if(!w.result)return this.Hi(o,u,_,f).next(T=>{w.result=T})}).next(()=>{if(w.result)return;const T=new Tc;return this.Ji(o,u,T).next(L=>{if(w.result=L,this.Ui)return this.Yi(o,u,T,L.size)})}).next(()=>w.result)}Yi(o,u,f,_){return f.documentReadCount<this.Wi?(Yt()<=ct.$b.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",Te(u),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),he.resolve()):(Yt()<=ct.$b.DEBUG&&Je("QueryEngine","Query:",Te(u),"scans",f.documentReadCount,"local documents and returns",_,"documents as results."),f.documentReadCount>this.Gi*_?(Yt()<=ct.$b.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",Te(u),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(o,Ao(u))):he.resolve())}ji(o,u){if(kr(u))return he.resolve(null);let f=Ao(u);return this.indexManager.getIndexType(o,f).next(_=>0===_?null:(null!==u.limit&&1===_&&(u=Z(u,null,"F"),f=Ao(u)),this.indexManager.getDocumentsMatchingTarget(o,f).next(w=>{const T=Yn(...w);return this.zi.getDocuments(o,T).next(L=>this.indexManager.getMinOffset(o,f).next(G=>{const Q=this.Zi(u,L);return this.Xi(u,Q,T,G.readTime)?this.ji(o,Z(u,null,"F")):this.es(o,Q,u,G)}))})))}Hi(o,u,f,_){return kr(u)||_.isEqual(sn.min())?he.resolve(null):this.zi.getDocuments(o,f).next(w=>{const T=this.Zi(u,w);return this.Xi(u,T,f,_)?he.resolve(null):(Yt()<=ct.$b.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",_.toString(),Te(u)),this.es(o,T,u,function jn(p,o){const u=p.toTimestamp().seconds,f=p.toTimestamp().nanoseconds+1,_=sn.fromTimestamp(1e9===f?new lr(u+1,0):new lr(u,f));return new Wn(_,zt.empty(),o)}(_,-1)).next(L=>L))})}Zi(o,u){let f=new Bn(Uo(o));return u.forEach((_,w)=>{Mt(o,w)&&(f=f.add(w))}),f}Xi(o,u,f,_){if(null===o.limit)return!1;if(f.size!==u.size)return!0;const w="F"===o.limitType?u.last():u.first();return!!w&&(w.hasPendingWrites||w.version.compareTo(_)>0)}Ji(o,u,f){return Yt()<=ct.$b.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",Te(u)),this.zi.getDocumentsMatchingQuery(o,u,Wn.min(),f)}es(o,u,f,_){return this.zi.getDocumentsMatchingQuery(o,f,_).next(w=>(u.forEach(T=>{w=w.insert(T.key,T)}),w))}}class eu{constructor(o,u,f,_){this.persistence=o,this.ts=u,this.serializer=_,this.ns=new Zn(Dn),this.rs=new bo(w=>is(w),Gc),this.ss=new Map,this.os=o.getRemoteDocumentCache(),this.Qr=o.getTargetCache(),this.$r=o.getBundleCache(),this._s(f)}_s(o){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(o),this.indexManager=this.persistence.getIndexManager(o),this.mutationQueue=this.persistence.getMutationQueue(o,this.indexManager),this.localDocuments=new ds(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(o){return this.persistence.runTransaction("Collect garbage","readwrite-primary",u=>o.collect(u,this.ns))}}function Al(p,o){return So.apply(this,arguments)}function So(){return(So=(0,ye.A)(function*(p,o){const u=Le(p);return yield u.persistence.runTransaction("Handle user change","readonly",f=>{let _;return u.mutationQueue.getAllMutationBatches(f).next(w=>(_=w,u._s(o),u.mutationQueue.getAllMutationBatches(f))).next(w=>{const T=[],L=[];let G=Yn();for(const Q of _){T.push(Q.batchId);for(const ce of Q.mutations)G=G.add(ce.key)}for(const Q of w){L.push(Q.batchId);for(const ce of Q.mutations)G=G.add(ce.key)}return u.localDocuments.getDocuments(f,G).next(Q=>({us:Q,removedBatchIds:T,addedBatchIds:L}))})})})).apply(this,arguments)}function zs(p){const o=Le(p);return o.persistence.runTransaction("Get last remote snapshot version","readonly",u=>o.Qr.getLastRemoteSnapshotVersion(u))}function wa(p,o){const u=Le(p);return u.persistence.runTransaction("Get next mutation batch","readonly",f=>(void 0===o&&(o=-1),u.mutationQueue.getNextMutationBatchAfterBatchId(f,o)))}function bl(p,o,u){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,ye.A)(function*(p,o,u){const f=Le(p),_=f.ns.get(o),w=u?"readwrite":"readwrite-primary";try{u||(yield f.persistence.runTransaction("Release target",w,T=>f.persistence.referenceDelegate.removeTarget(T,_)))}catch(T){if(!Se(T))throw T;Je("LocalStore",`Failed to update sequence numbers for target ${o}: ${T}`)}f.ns=f.ns.remove(o),f.rs.delete(_.target)})).apply(this,arguments)}function il(p,o,u){const f=Le(p);let _=sn.min(),w=Yn();return f.persistence.runTransaction("Execute query","readwrite",T=>function(G,Q,ce){const we=Le(G),Fe=we.rs.get(ce);return void 0!==Fe?he.resolve(we.ns.get(Fe)):we.Qr.getTargetData(Q,ce)}(f,T,Ao(o)).next(L=>{if(L)return _=L.lastLimboFreeSnapshotVersion,f.Qr.getMatchingKeysForTargetId(T,L.targetId).next(G=>{w=G})}).next(()=>f.ts.getDocumentsMatchingQuery(T,o,u?_:sn.min(),u?w:Yn())).next(L=>(function Tl(p,o,u){let f=p.ss.get(o)||sn.min();u.forEach((_,w)=>{w.readTime.compareTo(f)>0&&(f=w.readTime)}),p.ss.set(o,f)}(f,function $n(p){return p.collectionGroup||(p.path.length%2==1?p.path.lastSegment():p.path.get(p.path.length-2))}(o),L),{documents:L,hs:w})))}class Oh{constructor(){this.activeTargetIds=function mi(){return Rd}()}As(o){this.activeTargetIds=this.activeTargetIds.add(o)}Rs(o){this.activeTargetIds=this.activeTargetIds.delete(o)}ds(){const o={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(o)}}class O{constructor(){this.no=new Oh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(o){}updateMutationState(o,u,f){}addLocalQueryTarget(o){return this.no.As(o),this.ro[o]||"not-current"}updateQueryState(o,u,f){this.ro[o]=u}removeLocalQueryTarget(o){this.no.Rs(o)}isLocalQueryTarget(o){return this.no.activeTargetIds.has(o)}clearQueryState(o){delete this.ro[o]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(o){return this.no.activeTargetIds.has(o)}start(){return this.no=new Oh,Promise.resolve()}handleUserChange(o,u,f){}setOnlineState(o){}shutdown(){}writeSequenceNumber(o){}notifyBundleLoaded(o){}}class E{io(o){}shutdown(){}}class A{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(o){this.uo.push(o)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const o of this.uo)o(0)}ao(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const o of this.uo)o(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let k=null;function te(){return null===k?k=268435456+Math.round(2147483648*Math.random()):k++,"0x"+k.toString(16)}const ue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class He{constructor(o){this.lo=o.lo,this.ho=o.ho}Po(o){this.Io=o}To(o){this.Eo=o}Ao(o){this.Ro=o}onMessage(o){this.Vo=o}close(){this.ho()}send(o){this.lo(o)}mo(){this.Io()}fo(){this.Eo()}po(o){this.Ro(o)}yo(o){this.Vo(o)}}const it="WebChannelConnection";class Vt extends class{constructor(u){this.databaseInfo=u,this.databaseId=u.databaseId;const f=u.ssl?"https":"http",_=encodeURIComponent(this.databaseId.projectId),w=encodeURIComponent(this.databaseId.database);this.wo=f+"://"+u.host,this.So=`projects/${_}/databases/${w}`,this.bo="(default)"===this.databaseId.database?`project_id=${_}`:`project_id=${_}&database_id=${w}`}get Do(){return!1}Co(u,f,_,w,T){const L=te(),G=this.vo(u,f.toUriEncodedString());Je("RestConnection",`Sending RPC '${u}' ${L}:`,G,_);const Q={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(Q,w,T),this.Mo(u,G,Q,_).then(ce=>(Je("RestConnection",`Received RPC '${u}' ${L}: `,ce),ce),ce=>{throw Tr("RestConnection",`RPC '${u}' ${L} failed with error: `,ce,"url: ",G,"request:",_),ce})}xo(u,f,_,w,T,L){return this.Co(u,f,_,w,T)}Fo(u,f,_){u["X-Goog-Api-Client"]="gl-js/ fire/"+tn,u["Content-Type"]="text/plain",this.databaseInfo.appId&&(u["X-Firebase-GMPID"]=this.databaseInfo.appId),f&&f.headers.forEach((w,T)=>u[T]=w),_&&_.headers.forEach((w,T)=>u[T]=w)}vo(u,f){return`${this.wo}/v1/${f}:${ue[u]}`}terminate(){}}{constructor(o){super(o),this.forceLongPolling=o.forceLongPolling,this.autoDetectLongPolling=o.autoDetectLongPolling,this.useFetchStreams=o.useFetchStreams,this.longPollingOptions=o.longPollingOptions}Mo(o,u,f,_){const w=te();return new Promise((T,L)=>{const G=new pn;G.setWithCredentials(!0),G.listenOnce(cr.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Ot.NO_ERROR:const ce=G.getResponseJson();Je(it,`XHR for RPC '${o}' ${w} received:`,JSON.stringify(ce)),T(ce);break;case Ot.TIMEOUT:Je(it,`RPC '${o}' ${w} timed out`),L(new pe(le.DEADLINE_EXCEEDED,"Request time out"));break;case Ot.HTTP_ERROR:const we=G.getStatus();if(Je(it,`RPC '${o}' ${w} failed with status:`,we,"response text:",G.getResponseText()),we>0){let Fe=G.getResponseJson();Array.isArray(Fe)&&(Fe=Fe[0]);const pt=Fe?.error;if(pt&&pt.status&&pt.message){const Lt=function(jt){const Sn=jt.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(Sn)>=0?Sn:le.UNKNOWN}(pt.status);L(new pe(Lt,pt.message))}else L(new pe(le.UNKNOWN,"Server responded with status "+G.getStatus()))}else L(new pe(le.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{Je(it,`RPC '${o}' ${w} completed.`)}});const Q=JSON.stringify(_);Je(it,`RPC '${o}' ${w} sending request:`,_),G.send(u,"POST",Q,f,15)})}Oo(o,u,f){const _=te(),w=[this.wo,"/","google.firestore.v1.Firestore","/",o,"/channel"],T=xt(),L=kt(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},Q=this.longPollingOptions.timeoutSeconds;void 0!==Q&&(G.longPollingTimeout=Math.round(1e3*Q)),this.useFetchStreams&&(G.xmlHttpFactory=new $t({})),this.Fo(G.initMessageHeaders,u,f),G.encodeInitMessageHeaders=!0;const ce=w.join("");Je(it,`Creating RPC '${o}' stream ${_}: ${ce}`,G);const we=T.createWebChannel(ce,G);let Fe=!1,pt=!1;const Lt=new He({lo:jt=>{pt?Je(it,`Not sending because RPC '${o}' stream ${_} is closed:`,jt):(Fe||(Je(it,`Opening RPC '${o}' stream ${_} transport.`),we.open(),Fe=!0),Je(it,`RPC '${o}' stream ${_} sending:`,jt),we.send(jt))},ho:()=>we.close()}),en=(jt,Sn,zn)=>{jt.listen(Sn,Fn=>{try{zn(Fn)}catch(vr){setTimeout(()=>{throw vr},0)}})};return en(we,Xn.EventType.OPEN,()=>{pt||(Je(it,`RPC '${o}' stream ${_} transport opened.`),Lt.mo())}),en(we,Xn.EventType.CLOSE,()=>{pt||(pt=!0,Je(it,`RPC '${o}' stream ${_} transport closed`),Lt.po())}),en(we,Xn.EventType.ERROR,jt=>{pt||(pt=!0,Tr(it,`RPC '${o}' stream ${_} transport errored:`,jt),Lt.po(new pe(le.UNAVAILABLE,"The operation could not be completed")))}),en(we,Xn.EventType.MESSAGE,jt=>{var Sn;if(!pt){const zn=jt.data[0];Ue(!!zn);const vr=zn.error||(null===(Sn=zn[0])||void 0===Sn?void 0:Sn.error);if(vr){Je(it,`RPC '${o}' stream ${_} received error:`,vr);const ci=vr.status;let Or=function(Ge){const et=dr[Ge];if(void 0!==et)return Qo(et)}(ci),Ze=vr.message;void 0===Or&&(Or=le.INTERNAL,Ze="Unknown error status: "+ci+" with message "+vr.message),pt=!0,Lt.po(new pe(Or,Ze)),we.close()}else Je(it,`RPC '${o}' stream ${_} received:`,zn),Lt.yo(zn)}}),en(L,dt.STAT_EVENT,jt=>{jt.stat===wt.PROXY?Je(it,`RPC '${o}' stream ${_} detected buffering proxy`):jt.stat===wt.NOPROXY&&Je(it,`RPC '${o}' stream ${_} detected no buffering proxy`)}),setTimeout(()=>{Lt.fo()},0),Lt}}function bn(){return typeof document<"u"?document:null}function _r(p){return new dn(p,!0)}class fs{constructor(o,u,f=1e3,_=1.5,w=6e4){this.oi=o,this.timerId=u,this.No=f,this.Lo=_,this.Bo=w,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(o){this.cancel();const u=Math.floor(this.ko+this.Uo()),f=Math.max(0,Date.now()-this.Qo),_=Math.max(0,u-f);_>0&&Je("ExponentialBackoff",`Backing off for ${_} ms (base delay: ${this.ko} ms, delay with jitter: ${u} ms, last attempt: ${f} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,_,()=>(this.Qo=Date.now(),o())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class nu{constructor(o,u,f,_,w,T,L,G){this.oi=o,this.Go=f,this.zo=_,this.connection=w,this.authCredentialsProvider=T,this.appCheckCredentialsProvider=L,this.listener=G,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new fs(o,u)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var o=this;return(0,ye.A)(function*(){o.Zo()&&(yield o.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(o){this.s_(),this.stream.send(o)}r_(){var o=this;return(0,ye.A)(function*(){if(o.Xo())return o.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(o,u){var f=this;return(0,ye.A)(function*(){f.s_(),f.o_(),f.Yo.cancel(),f.jo++,4!==o?f.Yo.reset():u&&u.code===le.RESOURCE_EXHAUSTED?(Xt(u.toString()),Xt("Using maximum backoff delay to prevent overloading the backend."),f.Yo.Ko()):u&&u.code===le.UNAUTHENTICATED&&3!==f.state&&(f.authCredentialsProvider.invalidateToken(),f.appCheckCredentialsProvider.invalidateToken()),null!==f.stream&&(f.__(),f.stream.close(),f.stream=null),f.state=o,yield f.listener.Ao(u)})()}__(){}auth(){this.state=1;const o=this.a_(this.jo),u=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([f,_])=>{this.jo===u&&this.u_(f,_)},f=>{o(()=>{const _=new pe(le.UNKNOWN,"Fetching auth token failed: "+f.message);return this.c_(_)})})}u_(o,u){const f=this.a_(this.jo);this.stream=this.l_(o,u),this.stream.Po(()=>{f(()=>this.listener.Po())}),this.stream.To(()=>{f(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(_=>{f(()=>this.c_(_))}),this.stream.onMessage(_=>{f(()=>this.onMessage(_))})}e_(){var o=this;this.state=5,this.Yo.$o((0,ye.A)(function*(){o.state=0,o.start()}))}c_(o){return Je("PersistentStream",`close with error: ${o}`),this.stream=null,this.close(4,o)}a_(o){return u=>{this.oi.enqueueAndForget(()=>this.jo===o?u():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sl extends nu{constructor(o,u,f,_,w,T){super(o,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",u,f,_,T),this.serializer=w}l_(o,u){return this.connection.Oo("Listen",o,u)}onMessage(o){this.Yo.reset();const u=function $l(p,o){let u;if("targetChange"in o){const f="NO_CHANGE"===(Q=o.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Q?1:"REMOVE"===Q?2:"CURRENT"===Q?3:"RESET"===Q?4:Ne(),_=o.targetChange.targetIds||[],w=function(Q,ce){return Q.useProto3Json?(Ue(void 0===ce||"string"==typeof ce),Ui.fromBase64String(ce||"")):(Ue(void 0===ce||ce instanceof Buffer||ce instanceof Uint8Array),Ui.fromUint8Array(ce||new Uint8Array))}(p,o.targetChange.resumeToken),T=o.targetChange.cause,L=T&&function(Q){const ce=void 0===Q.code?le.UNKNOWN:Qo(Q.code);return new pe(ce,Q.message||"")}(T);u=new Md(f,_,w,L||null)}else if("documentChange"in o){const f=o.documentChange,_=as(p,f.document.name),w=Oi(f.document.updateTime),T=f.document.createTime?Oi(f.document.createTime):sn.min(),L=new Qi({mapValue:{fields:f.document.fields}}),G=fi.newFoundDocument(_,w,T,L);u=new qc(f.targetIds||[],f.removedTargetIds||[],G.key,G)}else if("documentDelete"in o){const f=o.documentDelete,_=as(p,f.document),w=f.readTime?Oi(f.readTime):sn.min(),T=fi.newNoDocument(_,w);u=new qc([],f.removedTargetIds||[],T.key,T)}else if("documentRemove"in o){const f=o.documentRemove,_=as(p,f.document);u=new qc([],f.removedTargetIds||[],_,null)}else{if(!("filter"in o))return Ne();{const f=o.filter,{count:_=0,unchangedNames:w}=f,T=new pr(_,w);u=new jl(f.targetId,T)}}var Q;return u}(this.serializer,o),f=function(w){if(!("targetChange"in w))return sn.min();const T=w.targetChange;return T.targetIds&&T.targetIds.length?sn.min():T.readTime?Oi(T.readTime):sn.min()}(o);return this.listener.h_(u,f)}P_(o){const u={};u.database=Gl(this.serializer),u.addTarget=function(w,T){let L;const G=T.target;if(L=$c(G)?{documents:Fa(w,G)}:{query:Ji(w,G)._t},L.targetId=T.targetId,T.resumeToken.approximateByteSize()>0){L.resumeToken=pl(w,T.resumeToken);const Q=ka(w,T.expectedCount);null!==Q&&(L.expectedCount=Q)}else if(T.snapshotVersion.compareTo(sn.min())>0){L.readTime=Zi(w,T.snapshotVersion.toTimestamp());const Q=ka(w,T.expectedCount);null!==Q&&(L.expectedCount=Q)}return L}(this.serializer,o);const f=function Yu(p,o){const u=function(_){switch(_){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(o.purpose);return null==u?null:{"goog-listen-tags":u}}(0,o);f&&(u.labels=f),this.i_(u)}I_(o){const u={};u.database=Gl(this.serializer),u.removeTarget=o,this.i_(u)}}class Ph extends nu{constructor(o,u,f,_,w,T){super(o,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",u,f,_,T),this.serializer=w,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(o,u){return this.connection.Oo("Write",o,u)}onMessage(o){if(Ue(!!o.streamToken),this.lastStreamToken=o.streamToken,this.T_){this.Yo.reset();const u=function ma(p,o){return p&&p.length>0?(Ue(void 0!==o),p.map(u=>function(_,w){let T=Oi(_.updateTime?_.updateTime:w);return T.isEqual(sn.min())&&(T=Oi(w)),new Za(T,_.transformResults||[])}(u,o))):[]}(o.writeResults,o.commitTime),f=Oi(o.commitTime);return this.listener.A_(f,u)}return Ue(!o.writeResults||0===o.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const o={};o.database=Gl(this.serializer),this.i_(o)}d_(o){const u={streamToken:this.lastStreamToken,writes:o.map(f=>function Ic(p,o){let u;if(o instanceof F)u={update:Fr(p,o.key,o.value)};else if(o instanceof ut)u={delete:vi(p,o.key)};else if(o instanceof re)u={update:Fr(p,o.key,o.data),updateMask:La(o.fieldMask)};else{if(!(o instanceof mt))return Ne();u={verify:vi(p,o.key)}}return o.fieldTransforms.length>0&&(u.updateTransforms=o.fieldTransforms.map(f=>function(w,T){const L=T.transform;if(L instanceof Eu)return{fieldPath:T.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(L instanceof Qa)return{fieldPath:T.field.canonicalString(),appendMissingElements:{values:L.elements}};if(L instanceof Cu)return{fieldPath:T.field.canonicalString(),removeAllFromArray:{values:L.elements}};if(L instanceof Yr)return{fieldPath:T.field.canonicalString(),increment:L.Pe};throw Ne()}(0,f))),o.precondition.isNone||(u.currentDocument=void 0!==(w=o.precondition).updateTime?{updateTime:Iu(p,w.updateTime)}:void 0!==w.exists?{exists:w.exists}:Ne()),u;var w}(this.serializer,f))};this.i_(u)}}class Ua extends class{}{constructor(o,u,f,_){super(),this.authCredentials=o,this.appCheckCredentials=u,this.connection=f,this.serializer=_,this.m_=!1}f_(){if(this.m_)throw new pe(le.FAILED_PRECONDITION,"The client has already been terminated.")}Co(o,u,f,_){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([w,T])=>this.connection.Co(o,Ku(u,f),_,w,T)).catch(w=>{throw"FirebaseError"===w.name?(w.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),w):new pe(le.UNKNOWN,w.toString())})}xo(o,u,f,_,w){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([T,L])=>this.connection.xo(o,Ku(u,f),_,T,L,w)).catch(T=>{throw"FirebaseError"===T.name?(T.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),T):new pe(le.UNKNOWN,T.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class ed{constructor(o,u){this.asyncQueue=o,this.onlineStateHandler=u,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(o){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${o.toString()}`),this.S_("Offline")))}set(o){this.C_(),this.g_=0,"Online"===o&&(this.y_=!1),this.S_(o)}S_(o){o!==this.state&&(this.state=o,this.onlineStateHandler(o))}b_(o){const u=`Could not reach Cloud Firestore backend. ${o}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Xt(u),this.y_=!1):Je("OnlineStateTracker",u)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Nf{constructor(o,u,f,_,w){var T=this;this.localStore=o,this.datastore=u,this.asyncQueue=f,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=w,this.O_.io(L=>{f.enqueueAndForget((0,ye.A)(function*(){var G;Rl(T)&&(Je("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,ye.A)(function*(ce){const we=Le(ce);we.M_.add(4),yield oc(we),we.N_.set("Unknown"),we.M_.delete(4),yield Rr(we)}),function Q(ce){return G.apply(this,arguments)})(T))}))}),this.N_=new ed(f,_)}}function Rr(p){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,ye.A)(function*(p){if(Rl(p))for(const o of p.x_)yield o(!0)})).apply(this,arguments)}function oc(p){return eo.apply(this,arguments)}function eo(){return(eo=(0,ye.A)(function*(p){for(const o of p.x_)yield o(!1)})).apply(this,arguments)}function td(p,o){const u=Le(p);u.F_.has(o.targetId)||(u.F_.set(o.targetId,o),kf(u)?ti(u):id(u).Xo()&&sc(u,o))}function ru(p,o){const u=Le(p),f=id(u);u.F_.delete(o),f.Xo()&&gr(u,o),0===u.F_.size&&(f.Xo()?f.n_():Rl(u)&&u.N_.set("Unknown"))}function sc(p,o){if(p.L_.xe(o.targetId),o.resumeToken.approximateByteSize()>0||o.snapshotVersion.compareTo(sn.min())>0){const u=p.remoteSyncer.getRemoteKeysForTarget(o.targetId).size;o=o.withExpectedCount(u)}id(p).P_(o)}function gr(p,o){p.L_.xe(o),id(p).I_(o)}function ti(p){p.L_=new To({getRemoteKeysForTarget:o=>p.remoteSyncer.getRemoteKeysForTarget(o),ot:o=>p.F_.get(o)||null,tt:()=>p.datastore.serializer.databaseId}),id(p).start(),p.N_.w_()}function kf(p){return Rl(p)&&!id(p).Zo()&&p.F_.size>0}function Rl(p){return 0===Le(p).M_.size}function ac(p){p.L_=void 0}function Am(p){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,ye.A)(function*(p){p.N_.set("Online")})).apply(this,arguments)}function bm(p){return nd.apply(this,arguments)}function nd(){return(nd=(0,ye.A)(function*(p){p.F_.forEach((o,u)=>{sc(p,o)})})).apply(this,arguments)}function Gp(p,o){return rd.apply(this,arguments)}function rd(){return(rd=(0,ye.A)(function*(p,o){ac(p),kf(p)?(p.N_.D_(o),ti(p)):p.N_.set("Unknown")})).apply(this,arguments)}function Ho(p,o,u){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,ye.A)(function*(p,o,u){if(p.N_.set("Online"),o instanceof Md&&2===o.state&&o.cause)try{yield(f=(0,ye.A)(function*(w,T){const L=T.cause;for(const G of T.targetIds)w.F_.has(G)&&(yield w.remoteSyncer.rejectListen(G,L),w.F_.delete(G),w.L_.removeTarget(G))}),function _(w,T){return f.apply(this,arguments)})(p,o)}catch(f){Je("RemoteStore","Failed to remove targets %s: %s ",o.targetIds.join(","),f),yield Pu(p,f)}else if(o instanceof qc?p.L_.Ke(o):o instanceof jl?p.L_.He(o):p.L_.We(o),!u.isEqual(sn.min()))try{const f=yield zs(p.localStore);u.compareTo(f)>=0&&(yield function(w,T){const L=w.L_.rt(T);return L.targetChanges.forEach((G,Q)=>{if(G.resumeToken.approximateByteSize()>0){const ce=w.F_.get(Q);ce&&w.F_.set(Q,ce.withResumeToken(G.resumeToken,T))}}),L.targetMismatches.forEach((G,Q)=>{const ce=w.F_.get(G);if(!ce)return;w.F_.set(G,ce.withResumeToken(Ui.EMPTY_BYTE_STRING,ce.snapshotVersion)),gr(w,G);const we=new _a(ce.target,G,Q,ce.sequenceNumber);sc(w,we)}),w.remoteSyncer.applyRemoteEvent(L)}(p,u))}catch(f){Je("RemoteStore","Failed to raise snapshot:",f),yield Pu(p,f)}var f}),Ff.apply(this,arguments)}function Pu(p,o,u){return rr.apply(this,arguments)}function rr(){return(rr=(0,ye.A)(function*(p,o,u){if(!Se(o))throw o;p.M_.add(1),yield oc(p),p.N_.set("Offline"),u||(u=()=>zs(p.localStore)),p.asyncQueue.enqueueRetryable((0,ye.A)(function*(){Je("RemoteStore","Retrying IndexedDB access"),yield u(),p.M_.delete(1),yield Rr(p)}))})).apply(this,arguments)}function Lf(p,o){return o().catch(u=>Pu(p,u,o))}function Ml(p){return kh.apply(this,arguments)}function kh(){return(kh=(0,ye.A)(function*(p){const o=Le(p),u=Sc(o);let f=o.v_.length>0?o.v_[o.v_.length-1].batchId:-1;for(;t1(o);)try{const _=yield wa(o.localStore,f);if(null===_){0===o.v_.length&&u.n_();break}f=_.batchId,E0(o,_)}catch(_){yield Pu(o,_)}Vf(o)&&Tm(o)})).apply(this,arguments)}function t1(p){return Rl(p)&&p.v_.length<10}function E0(p,o){p.v_.push(o);const u=Sc(p);u.Xo()&&u.E_&&u.d_(o.mutations)}function Vf(p){return Rl(p)&&!Sc(p).Zo()&&p.v_.length>0}function Tm(p){Sc(p).start()}function w0(p){return cc.apply(this,arguments)}function cc(){return(cc=(0,ye.A)(function*(p){Sc(p).V_()})).apply(this,arguments)}function C0(p){return iu.apply(this,arguments)}function iu(){return(iu=(0,ye.A)(function*(p){const o=Sc(p);for(const u of p.v_)o.d_(u.mutations)})).apply(this,arguments)}function I0(p,o,u){return $p.apply(this,arguments)}function $p(){return($p=(0,ye.A)(function*(p,o,u){const f=p.v_.shift(),_=gn.from(f,o,u);yield Lf(p,()=>p.remoteSyncer.applySuccessfulWrite(_)),yield Ml(p)})).apply(this,arguments)}function xm(p,o){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,ye.A)(function*(p,o){var u;o&&Sc(p).E_&&(yield(u=(0,ye.A)(function*(_,w){if(function Wi(p){switch(p){default:return Ne();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}(L=w.code)&&L!==le.ABORTED){const T=_.v_.shift();Sc(_).t_(),yield Lf(_,()=>_.remoteSyncer.rejectFailedWrite(T.batchId,w)),yield Ml(_)}var L}),function f(_,w){return u.apply(this,arguments)})(p,o)),Vf(p)&&Tm(p)}),Dt.apply(this,arguments)}function Vr(p,o){return ft.apply(this,arguments)}function ft(){return(ft=(0,ye.A)(function*(p,o){const u=Le(p);u.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const f=Rl(u);u.M_.add(3),yield oc(u),f&&u.N_.set("Unknown"),yield u.remoteSyncer.handleCredentialChange(o),u.M_.delete(3),yield Rr(u)})).apply(this,arguments)}function Fh(p,o){return _e.apply(this,arguments)}function _e(){return(_e=(0,ye.A)(function*(p,o){const u=Le(p);o?(u.M_.delete(2),yield Rr(u)):o||(u.M_.add(2),yield oc(u),u.N_.set("Unknown"))})).apply(this,arguments)}function id(p){return p.B_||(p.B_=function(u,f,_){const w=Le(u);return w.f_(),new Sl(f,w.connection,w.authCredentials,w.appCheckCredentials,w.serializer,_)}(p.datastore,p.asyncQueue,{Po:Am.bind(null,p),To:bm.bind(null,p),Ao:Gp.bind(null,p),h_:Ho.bind(null,p)}),p.x_.push(function(){var o=(0,ye.A)(function*(u){u?(p.B_.t_(),kf(p)?ti(p):p.N_.set("Unknown")):(yield p.B_.stop(),ac(p))});return function(u){return o.apply(this,arguments)}}())),p.B_}function Sc(p){return p.k_||(p.k_=function(u,f,_){const w=Le(u);return w.f_(),new Ph(f,w.connection,w.authCredentials,w.appCheckCredentials,w.serializer,_)}(p.datastore,p.asyncQueue,{Po:()=>Promise.resolve(),To:w0.bind(null,p),Ao:xm.bind(null,p),R_:C0.bind(null,p),A_:I0.bind(null,p)}),p.x_.push(function(){var o=(0,ye.A)(function*(u){u?(p.k_.t_(),yield Ml(p)):(yield p.k_.stop(),p.v_.length>0&&(Je("RemoteStore",`Stopping write stream with ${p.v_.length} pending writes`),p.v_=[]))});return function(u){return o.apply(this,arguments)}}())),p.k_}class Rs{constructor(o,u,f,_,w){this.asyncQueue=o,this.timerId=u,this.targetTimeMs=f,this.op=_,this.removalCallback=w,this.deferred=new _t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(T=>{})}get promise(){return this.deferred.promise}static createAndSchedule(o,u,f,_,w){const T=Date.now()+f,L=new Rs(o,u,T,_,w);return L.start(f),L}start(o){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),o)}skipDelay(){return this.handleDelayElapsed()}cancel(o){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new pe(le.CANCELLED,"Operation cancelled"+(o?": "+o:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(o=>this.deferred.resolve(o))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fo(p,o){if(Xt("AsyncQueue",`${o}: ${p}`),Se(p))return new pe(le.UNAVAILABLE,`${o}: ${p}`);throw p}class Ol{constructor(o){this.comparator=o?(u,f)=>o(u,f)||zt.comparator(u.key,f.key):(u,f)=>zt.comparator(u.key,f.key),this.keyedMap=Us(),this.sortedSet=new Zn(this.comparator)}static emptySet(o){return new Ol(o.comparator)}has(o){return null!=this.keyedMap.get(o)}get(o){return this.keyedMap.get(o)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(o){const u=this.keyedMap.get(o);return u?this.sortedSet.indexOf(u):-1}get size(){return this.sortedSet.size}forEach(o){this.sortedSet.inorderTraversal((u,f)=>(o(u),!1))}add(o){const u=this.delete(o.key);return u.copy(u.keyedMap.insert(o.key,o),u.sortedSet.insert(o,null))}delete(o){const u=this.get(o);return u?this.copy(this.keyedMap.remove(o),this.sortedSet.remove(u)):this}isEqual(o){if(!(o instanceof Ol)||this.size!==o.size)return!1;const u=this.sortedSet.getIterator(),f=o.sortedSet.getIterator();for(;u.hasNext();){const _=u.getNext().key,w=f.getNext().key;if(!_.isEqual(w))return!1}return!0}toString(){const o=[];return this.forEach(u=>{o.push(u.toString())}),0===o.length?"DocumentSet ()":"DocumentSet (\n  "+o.join("  \n")+"\n)"}copy(o,u){const f=new Ol;return f.comparator=this.comparator,f.keyedMap=o,f.sortedSet=u,f}}class zp{constructor(){this.q_=new Zn(zt.comparator)}track(o){const u=o.doc.key,f=this.q_.get(u);f?0!==o.type&&3===f.type?this.q_=this.q_.insert(u,o):3===o.type&&1!==f.type?this.q_=this.q_.insert(u,{type:f.type,doc:o.doc}):2===o.type&&2===f.type?this.q_=this.q_.insert(u,{type:2,doc:o.doc}):2===o.type&&0===f.type?this.q_=this.q_.insert(u,{type:0,doc:o.doc}):1===o.type&&0===f.type?this.q_=this.q_.remove(u):1===o.type&&2===f.type?this.q_=this.q_.insert(u,{type:1,doc:f.doc}):0===o.type&&1===f.type?this.q_=this.q_.insert(u,{type:2,doc:o.doc}):Ne():this.q_=this.q_.insert(u,o)}Q_(){const o=[];return this.q_.inorderTraversal((u,f)=>{o.push(f)}),o}}class Bf{constructor(o,u,f,_,w,T,L,G,Q){this.query=o,this.docs=u,this.oldDocs=f,this.docChanges=_,this.mutatedKeys=w,this.fromCache=T,this.syncStateChanged=L,this.excludesMetadataChanges=G,this.hasCachedResults=Q}static fromInitialDocuments(o,u,f,_,w){const T=[];return u.forEach(L=>{T.push({type:0,doc:L})}),new Bf(o,u,Ol.emptySet(u),T,f,_,!0,!1,w)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(o){if(!(this.fromCache===o.fromCache&&this.hasCachedResults===o.hasCachedResults&&this.syncStateChanged===o.syncStateChanged&&this.mutatedKeys.isEqual(o.mutatedKeys)&&H(this.query,o.query)&&this.docs.isEqual(o.docs)&&this.oldDocs.isEqual(o.oldDocs)))return!1;const u=this.docChanges,f=o.docChanges;if(u.length!==f.length)return!1;for(let _=0;_<u.length;_++)if(u[_].type!==f[_].type||!u[_].doc.isEqual(f[_].doc))return!1;return!0}}class n1{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(o=>o.G_())}}class Wp{constructor(){this.queries=new bo(o=>oe(o),H),this.onlineState="Unknown",this.z_=new Set}}function Lh(p,o){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,ye.A)(function*(p,o){const u=Le(p);let f=3;const _=o.query;let w=u.queries.get(_);w?!w.W_()&&o.G_()&&(f=2):(w=new n1,f=o.G_()?0:1);try{switch(f){case 0:w.K_=yield u.onListen(_,!0);break;case 1:w.K_=yield u.onListen(_,!1);break;case 2:yield u.onFirstRemoteStoreListen(_)}}catch(T){const L=fo(T,`Initialization of query '${Te(o.query)}' failed`);return void o.onError(L)}u.queries.set(_,w),w.U_.push(o),o.j_(u.onlineState),w.K_&&o.H_(w.K_)&&au(u)})).apply(this,arguments)}function Ki(p,o){return ou.apply(this,arguments)}function ou(){return(ou=(0,ye.A)(function*(p,o){const u=Le(p),f=o.query;let _=3;const w=u.queries.get(f);if(w){const T=w.U_.indexOf(o);T>=0&&(w.U_.splice(T,1),0===w.U_.length?_=o.G_()?0:1:!w.W_()&&o.G_()&&(_=2))}switch(_){case 0:return u.queries.delete(f),u.onUnlisten(f,!0);case 1:return u.queries.delete(f),u.onUnlisten(f,!1);case 2:return u.onLastRemoteStoreUnlisten(f);default:return}})).apply(this,arguments)}function to(p,o){const u=Le(p);let f=!1;for(const _ of o){const T=u.queries.get(_.query);if(T){for(const L of T.U_)L.H_(_)&&(f=!0);T.K_=_}}f&&au(u)}function su(p,o,u){const f=Le(p),_=f.queries.get(o);if(_)for(const w of _.U_)w.onError(u);f.queries.delete(o)}function au(p){p.z_.forEach(o=>{o.next()})}var qp,Bh;(Bh=qp||(qp={})).J_="default",Bh.Cache="cache";class Uh{constructor(o,u,f){this.query=o,this.Y_=u,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=f||{}}H_(o){if(!this.options.includeMetadataChanges){const f=[];for(const _ of o.docChanges)3!==_.type&&f.push(_);o=new Bf(o.query,o.docs,o.oldDocs,f,o.mutatedKeys,o.fromCache,o.syncStateChanged,!0,o.hasCachedResults)}let u=!1;return this.Z_?this.ea(o)&&(this.Y_.next(o),u=!0):this.ta(o,this.onlineState)&&(this.na(o),u=!0),this.X_=o,u}onError(o){this.Y_.error(o)}j_(o){this.onlineState=o;let u=!1;return this.X_&&!this.Z_&&this.ta(this.X_,o)&&(this.na(this.X_),u=!0),u}ta(o,u){return!o.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==u))&&(!o.docs.isEmpty()||o.hasCachedResults||"Offline"===u)}ea(o){return o.docChanges.length>0||!!(o.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==o.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(o){o=Bf.fromInitialDocuments(o.query,o.docs,o.mutatedKeys,o.fromCache,o.hasCachedResults),this.Z_=!0,this.Y_.next(o)}G_(){return this.options.source!==qp.Cache}}class Uf{constructor(o){this.key=o}}class Sm{constructor(o){this.key=o}}class Xp{constructor(o,u){this.query=o,this.la=u,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Yn(),this.mutatedKeys=Yn(),this.Ia=Uo(o),this.Ta=new Ol(this.Ia)}get Ea(){return this.la}da(o,u){const f=u?u.Aa:new zp,_=u?u.Ta:this.Ta;let w=u?u.mutatedKeys:this.mutatedKeys,T=_,L=!1;const G="F"===this.query.limitType&&_.size===this.query.limit?_.last():null,Q="L"===this.query.limitType&&_.size===this.query.limit?_.first():null;if(o.inorderTraversal((ce,we)=>{const Fe=_.get(ce),pt=Mt(this.query,we)?we:null,Lt=!!Fe&&this.mutatedKeys.has(Fe.key),en=!!pt&&(pt.hasLocalMutations||this.mutatedKeys.has(pt.key)&&pt.hasCommittedMutations);let jt=!1;Fe&&pt?Fe.data.isEqual(pt.data)?Lt!==en&&(f.track({type:3,doc:pt}),jt=!0):this.Ra(Fe,pt)||(f.track({type:2,doc:pt}),jt=!0,(G&&this.Ia(pt,G)>0||Q&&this.Ia(pt,Q)<0)&&(L=!0)):!Fe&&pt?(f.track({type:0,doc:pt}),jt=!0):Fe&&!pt&&(f.track({type:1,doc:Fe}),jt=!0,(G||Q)&&(L=!0)),jt&&(pt?(T=T.add(pt),w=en?w.add(ce):w.delete(ce)):(T=T.delete(ce),w=w.delete(ce)))}),null!==this.query.limit)for(;T.size>this.query.limit;){const ce="F"===this.query.limitType?T.last():T.first();T=T.delete(ce.key),w=w.delete(ce.key),f.track({type:1,doc:ce})}return{Ta:T,Aa:f,Xi:L,mutatedKeys:w}}Ra(o,u){return o.hasLocalMutations&&u.hasCommittedMutations&&!u.hasLocalMutations}applyChanges(o,u,f,_){const w=this.Ta;this.Ta=o.Ta,this.mutatedKeys=o.mutatedKeys;const T=o.Aa.Q_();T.sort((ce,we)=>function(pt,Lt){const en=jt=>{switch(jt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return en(pt)-en(Lt)}(ce.type,we.type)||this.Ia(ce.doc,we.doc)),this.Va(f),_=null!=_&&_;const L=u&&!_?this.ma():[],G=0===this.Pa.size&&this.current&&!_?1:0,Q=G!==this.ha;return this.ha=G,0!==T.length||Q?{snapshot:new Bf(this.query,o.Ta,w,T,o.mutatedKeys,0===G,Q,!1,!!f&&f.resumeToken.approximateByteSize()>0),fa:L}:{fa:L}}j_(o){return this.current&&"Offline"===o?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new zp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(o){return!this.la.has(o)&&!!this.Ta.has(o)&&!this.Ta.get(o).hasLocalMutations}Va(o){o&&(o.addedDocuments.forEach(u=>this.la=this.la.add(u)),o.modifiedDocuments.forEach(u=>{}),o.removedDocuments.forEach(u=>this.la=this.la.delete(u)),this.current=o.current)}ma(){if(!this.current)return[];const o=this.Pa;this.Pa=Yn(),this.Ta.forEach(f=>{this.ga(f.key)&&(this.Pa=this.Pa.add(f.key))});const u=[];return o.forEach(f=>{this.Pa.has(f)||u.push(new Sm(f))}),this.Pa.forEach(f=>{o.has(f)||u.push(new Uf(f))}),u}pa(o){this.la=o.hs,this.Pa=Yn();const u=this.da(o.documents);return this.applyChanges(u,!0)}ya(){return Bf.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Qp{constructor(o,u,f){this.query=o,this.targetId=u,this.view=f}}class Dm{constructor(o){this.key=o,this.wa=!1}}class Rm{constructor(o,u,f,_,w,T){this.localStore=o,this.remoteStore=u,this.eventManager=f,this.sharedClientState=_,this.currentUser=w,this.maxConcurrentLimboResolutions=T,this.Sa={},this.ba=new bo(L=>oe(L),H),this.Da=new Map,this.Ca=new Set,this.va=new Zn(zt.comparator),this.Fa=new Map,this.Ma=new Pi,this.xa={},this.Oa=new Map,this.Na=nc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Mm(p,o){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,ye.A)(function*(p,o,u=!0){const f=qf(p);let _;const w=f.ba.get(o);return w?(f.sharedClientState.addLocalQueryTarget(w.targetId),_=w.view.ya()):_=yield Ws(f,o,u,!0),_})).apply(this,arguments)}function Yp(p,o){return od.apply(this,arguments)}function od(){return(od=(0,ye.A)(function*(p,o){const u=qf(p);yield Ws(u,o,!0,!1)})).apply(this,arguments)}function Ws(p,o,u,f){return ol.apply(this,arguments)}function ol(){return(ol=(0,ye.A)(function*(p,o,u,f){const _=yield function xc(p,o){const u=Le(p);return u.persistence.runTransaction("Allocate target","readwrite",f=>{let _;return u.Qr.getTargetData(f,o).next(w=>w?(_=w,he.resolve(_)):u.Qr.allocateTargetId(f).next(T=>(_=new _a(o,T,"TargetPurposeListen",f.currentSequenceNumber),u.Qr.addTargetData(f,_).next(()=>_))))}).then(f=>{const _=u.ns.get(f.targetId);return(null===_||f.snapshotVersion.compareTo(_.snapshotVersion)>0)&&(u.ns=u.ns.insert(f.targetId,f),u.rs.set(o,f.targetId)),f})}(p.localStore,Ao(o)),w=_.targetId,T=u?p.sharedClientState.addLocalQueryTarget(w):"not-current";let L;return f&&(L=yield function Hi(p,o,u,f,_){return Zp.apply(this,arguments)}(p,o,w,"current"===T,_.resumeToken)),p.isPrimaryClient&&u&&td(p.remoteStore,_),L})).apply(this,arguments)}function Zp(){return Zp=(0,ye.A)(function*(p,o,u,f,_){p.Ba=(we,Fe,pt)=>{return(Lt=(0,ye.A)(function*(jt,Sn,zn,Fn){let vr=Sn.view.da(zn);vr.Xi&&(vr=yield il(jt.localStore,Sn.query,!1).then(({documents:Me})=>Sn.view.da(Me,vr)));const ci=Fn&&Fn.targetChanges.get(Sn.targetId),Or=Fn&&null!=Fn.targetMismatches.get(Sn.targetId),Ze=Sn.view.applyChanges(vr,jt.isPrimaryClient,ci,Or);return rg(jt,Sn.targetId,Ze.fa),Ze.snapshot}),function en(jt,Sn,zn,Fn){return Lt.apply(this,arguments)})(p,we,Fe,pt);var Lt};const w=yield il(p.localStore,o,!0),T=new Xp(o,w.hs),L=T.da(w.documents),G=xs.createSynthesizedTargetChangeForCurrentChange(u,f&&"Offline"!==p.onlineState,_),Q=T.applyChanges(L,p.isPrimaryClient,G);rg(p,u,Q.fa);const ce=new Qp(o,u,T);return p.ba.set(o,ce),p.Da.has(u)?p.Da.get(u).push(o):p.Da.set(u,[o]),Q.snapshot}),Zp.apply(this,arguments)}function b0(p,o,u){return zd.apply(this,arguments)}function zd(){return(zd=(0,ye.A)(function*(p,o,u){const f=Le(p),_=f.ba.get(o),w=f.Da.get(_.targetId);if(w.length>1)return f.Da.set(_.targetId,w.filter(T=>!H(T,o))),void f.ba.delete(o);f.isPrimaryClient?(f.sharedClientState.removeLocalQueryTarget(_.targetId),f.sharedClientState.isActiveQueryTarget(_.targetId)||(yield bl(f.localStore,_.targetId,!1).then(()=>{f.sharedClientState.clearQueryState(_.targetId),u&&ru(f.remoteStore,_.targetId),Kd(f,_.targetId)}).catch(Si))):(Kd(f,_.targetId),yield bl(f.localStore,_.targetId,!0))})).apply(this,arguments)}function T0(p,o){return $h.apply(this,arguments)}function $h(){return($h=(0,ye.A)(function*(p,o){const u=Le(p),f=u.ba.get(o),_=u.Da.get(f.targetId);u.isPrimaryClient&&1===_.length&&(u.sharedClientState.removeLocalQueryTarget(f.targetId),ru(u.remoteStore,f.targetId))})).apply(this,arguments)}function sd(){return(sd=(0,ye.A)(function*(p,o,u){const f=function cg(p){const o=Le(p);return o.remoteStore.remoteSyncer.applySuccessfulWrite=eg.bind(null,o),o.remoteStore.remoteSyncer.rejectFailedWrite=Om.bind(null,o),o}(p);try{const _=yield function(T,L){const G=Le(T),Q=lr.now(),ce=L.reduce((pt,Lt)=>pt.add(Lt.key),Yn());let we,Fe;return G.persistence.runTransaction("Locally write mutations","readwrite",pt=>{let Lt=Tn(),en=Yn();return G.os.getEntries(pt,ce).next(jt=>{Lt=jt,Lt.forEach((Sn,zn)=>{zn.isValidDocument()||(en=en.add(Sn))})}).next(()=>G.localDocuments.getOverlayedDocuments(pt,Lt)).next(jt=>{we=jt;const Sn=[];for(const zn of L){const Fn=If(zn,we.get(zn.key).overlayedDocument);null!=Fn&&Sn.push(new re(zn.key,Fn,_c(Fn.value.mapValue),Vn.exists(!0)))}return G.mutationQueue.addMutationBatch(pt,Q,Sn,L)}).next(jt=>{Fe=jt;const Sn=jt.applyToLocalDocumentSet(we,en);return G.documentOverlayCache.saveOverlays(pt,jt.batchId,Sn)})}).then(()=>({batchId:Fe.batchId,changes:qr(we)}))}(f.localStore,o);f.sharedClientState.addPendingMutation(_.batchId),function(T,L,G){let Q=T.xa[T.currentUser.toKey()];Q||(Q=new Zn(Dn)),Q=Q.insert(L,G),T.xa[T.currentUser.toKey()]=Q}(f,_.batchId,u),yield uu(f,_.changes),yield Ml(f.remoteStore)}catch(_){const w=fo(_,"Failed to persist write");u.reject(w)}})).apply(this,arguments)}function cu(p,o){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,ye.A)(function*(p,o){const u=Le(p);try{const f=yield function tu(p,o){const u=Le(p),f=o.snapshotVersion;let _=u.ns;return u.persistence.runTransaction("Apply remote event","readwrite-primary",w=>{const T=u.os.newChangeBuffer({trackRemovals:!0});_=u.ns;const L=[];o.targetChanges.forEach((ce,we)=>{const Fe=_.get(we);if(!Fe)return;L.push(u.Qr.removeMatchingKeys(w,ce.removedDocuments,we).next(()=>u.Qr.addMatchingKeys(w,ce.addedDocuments,we)));let pt=Fe.withSequenceNumber(w.currentSequenceNumber);var en,jt,Sn;null!==o.targetMismatches.get(we)?pt=pt.withResumeToken(Ui.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):ce.resumeToken.approximateByteSize()>0&&(pt=pt.withResumeToken(ce.resumeToken,f)),_=_.insert(we,pt),jt=pt,Sn=ce,(0===(en=Fe).resumeToken.approximateByteSize()||jt.snapshotVersion.toMicroseconds()-en.snapshotVersion.toMicroseconds()>=3e8||Sn.addedDocuments.size+Sn.modifiedDocuments.size+Sn.removedDocuments.size>0)&&L.push(u.Qr.updateTargetData(w,pt))});let G=Tn(),Q=Yn();if(o.documentUpdates.forEach(ce=>{o.resolvedLimboDocuments.has(ce)&&L.push(u.persistence.referenceDelegate.updateLimboDocument(w,ce))}),L.push(function Jl(p,o,u){let f=Yn(),_=Yn();return u.forEach(w=>f=f.add(w)),o.getEntries(p,f).next(w=>{let T=Tn();return u.forEach((L,G)=>{const Q=w.get(L);G.isFoundDocument()!==Q.isFoundDocument()&&(_=_.add(L)),G.isNoDocument()&&G.version.isEqual(sn.min())?(o.removeEntry(L,G.readTime),T=T.insert(L,G)):!Q.isValidDocument()||G.version.compareTo(Q.version)>0||0===G.version.compareTo(Q.version)&&Q.hasPendingWrites?(o.addEntry(G),T=T.insert(L,G)):Je("LocalStore","Ignoring outdated watch update for ",L,". Current version:",Q.version," Watch version:",G.version)}),{cs:T,ls:_}})}(w,T,o.documentUpdates).next(ce=>{G=ce.cs,Q=ce.ls})),!f.isEqual(sn.min())){const ce=u.Qr.getLastRemoteSnapshotVersion(w).next(we=>u.Qr.setTargetsMetadata(w,w.currentSequenceNumber,f));L.push(ce)}return he.waitFor(L).next(()=>T.apply(w)).next(()=>u.localDocuments.getLocalViewOfDocuments(w,G,Q)).next(()=>G)}).then(w=>(u.ns=_,w))}(u.localStore,o);o.targetChanges.forEach((_,w)=>{const T=u.Fa.get(w);T&&(Ue(_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size<=1),_.addedDocuments.size>0?T.wa=!0:_.modifiedDocuments.size>0?Ue(T.wa):_.removedDocuments.size>0&&(Ue(T.wa),T.wa=!1))}),yield uu(u,f,o)}catch(f){yield Si(f)}})).apply(this,arguments)}function jf(p,o,u){const f=Le(p);if(f.isPrimaryClient&&0===u||!f.isPrimaryClient&&1===u){const _=[];f.ba.forEach((w,T)=>{const L=T.view.j_(o);L.snapshot&&_.push(L.snapshot)}),function(T,L){const G=Le(T);G.onlineState=L;let Q=!1;G.queries.forEach((ce,we)=>{for(const Fe of we.U_)Fe.j_(L)&&(Q=!0)}),Q&&au(G)}(f.eventManager,o),_.length&&f.Sa.h_(_),f.onlineState=o,f.isPrimaryClient&&f.sharedClientState.setOnlineState(o)}}function zh(p,o,u){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,ye.A)(function*(p,o,u){const f=Le(p);f.sharedClientState.updateQueryState(o,"rejected",u);const _=f.Fa.get(o),w=_&&_.key;if(w){let T=new Zn(zt.comparator);T=T.insert(w,fi.newNoDocument(w,sn.min()));const L=Yn().add(w),G=new Ts(sn.min(),new Map,new Zn(Dn),T,L);yield cu(f,G),f.va=f.va.remove(w),f.Fa.delete(o),km(f)}else yield bl(f.localStore,o,!1).then(()=>Kd(f,o,u)).catch(Si)})).apply(this,arguments)}function eg(p,o){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,ye.A)(function*(p,o){const u=Le(p),f=o.batch.batchId;try{const _=yield function Ds(p,o){const u=Le(p);return u.persistence.runTransaction("Acknowledge batch","readwrite-primary",f=>{const _=o.batch.keys(),w=u.os.newChangeBuffer({trackRemovals:!0});return function(L,G,Q,ce){const we=Q.batch,Fe=we.keys();let pt=he.resolve();return Fe.forEach(Lt=>{pt=pt.next(()=>ce.getEntry(G,Lt)).next(en=>{const jt=Q.docVersions.get(Lt);Ue(null!==jt),en.version.compareTo(jt)<0&&(we.applyToRemoteDocument(en,Q),en.isValidDocument()&&(en.setReadTime(Q.commitVersion),ce.addEntry(en)))})}),pt.next(()=>L.mutationQueue.removeMutationBatch(G,we))}(u,f,o,w).next(()=>w.apply(f)).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,_,o.batch.batchId)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,function(L){let G=Yn();for(let Q=0;Q<L.mutationResults.length;++Q)L.mutationResults[Q].transformResults.length>0&&(G=G.add(L.batch.mutations[Q].key));return G}(o))).next(()=>u.localDocuments.getDocuments(f,_))})}(u.localStore,o);Hf(u,f,null),ng(u,f),u.sharedClientState.updateMutationState(f,"acknowledged"),yield uu(u,_)}catch(_){yield Si(_)}})).apply(this,arguments)}function Om(p,o,u){return tg.apply(this,arguments)}function tg(){return(tg=(0,ye.A)(function*(p,o,u){const f=Le(p);try{const _=yield function(T,L){const G=Le(T);return G.persistence.runTransaction("Reject batch","readwrite-primary",Q=>{let ce;return G.mutationQueue.lookupMutationBatch(Q,L).next(we=>(Ue(null!==we),ce=we.keys(),G.mutationQueue.removeMutationBatch(Q,we))).next(()=>G.mutationQueue.performConsistencyCheck(Q)).next(()=>G.documentOverlayCache.removeOverlaysForBatchId(Q,ce,L)).next(()=>G.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Q,ce)).next(()=>G.localDocuments.getDocuments(Q,ce))})}(f.localStore,o);Hf(f,o,u),ng(f,o),f.sharedClientState.updateMutationState(o,"rejected",u),yield uu(f,_)}catch(_){yield Si(_)}})).apply(this,arguments)}function ng(p,o){(p.Oa.get(o)||[]).forEach(u=>{u.resolve()}),p.Oa.delete(o)}function Hf(p,o,u){const f=Le(p);let _=f.xa[f.currentUser.toKey()];if(_){const w=_.get(o);w&&(u?w.reject(u):w.resolve(),_=_.remove(o)),f.xa[f.currentUser.toKey()]=_}}function Kd(p,o,u=null){p.sharedClientState.removeLocalQueryTarget(o);for(const f of p.Da.get(o))p.ba.delete(f),u&&p.Sa.ka(f,u);p.Da.delete(o),p.isPrimaryClient&&p.Ma.Vr(o).forEach(f=>{p.Ma.containsKey(f)||Pm(p,f)})}function Pm(p,o){p.Ca.delete(o.path.canonicalString());const u=p.va.get(o);null!==u&&(ru(p.remoteStore,u),p.va=p.va.remove(o),p.Fa.delete(u),km(p))}function rg(p,o,u){for(const f of u)f instanceof Uf?(p.Ma.addReference(f.key,o),Nm(p,f)):f instanceof Sm?(Je("SyncEngine","Document no longer in limbo: "+f.key),p.Ma.removeReference(f.key,o),p.Ma.containsKey(f.key)||Pm(p,f.key)):Ne()}function Nm(p,o){const u=o.key,f=u.path.canonicalString();p.va.get(u)||p.Ca.has(f)||(Je("SyncEngine","New document in limbo: "+u),p.Ca.add(f),km(p))}function km(p){for(;p.Ca.size>0&&p.va.size<p.maxConcurrentLimboResolutions;){const o=p.Ca.values().next().value;p.Ca.delete(o);const u=new zt(Pt.fromString(o)),f=p.Na.next();p.Fa.set(f,new Dm(u)),p.va=p.va.insert(u,f),td(p.remoteStore,new _a(Ao(Bo(u.path)),f,"TargetPurposeLimboResolution",wr.oe))}}function uu(p,o,u){return cd.apply(this,arguments)}function cd(){return cd=(0,ye.A)(function*(p,o,u){const f=Le(p),_=[],w=[],T=[];var L;f.ba.isEmpty()||(f.ba.forEach((L,G)=>{T.push(f.Ba(G,o,u).then(Q=>{if((Q||u)&&f.isPrimaryClient&&f.sharedClientState.updateQueryState(G.targetId,Q&&!Q.fromCache?"current":"not-current"),Q){_.push(Q);const ce=rl.Ki(G.targetId,Q);w.push(ce)}}))}),yield Promise.all(T),f.Sa.h_(_),yield(L=(0,ye.A)(function*(Q,ce){const we=Le(Q);try{yield we.persistence.runTransaction("notifyLocalViewChanges","readwrite",Fe=>he.forEach(ce,pt=>he.forEach(pt.qi,Lt=>we.persistence.referenceDelegate.addReference(Fe,pt.targetId,Lt)).next(()=>he.forEach(pt.Qi,Lt=>we.persistence.referenceDelegate.removeReference(Fe,pt.targetId,Lt)))))}catch(Fe){if(!Se(Fe))throw Fe;Je("LocalStore","Failed to update sequence numbers: "+Fe)}for(const Fe of ce){const pt=Fe.targetId;if(!Fe.fromCache){const Lt=we.ns.get(pt),jt=Lt.withLastLimboFreeSnapshotVersion(Lt.snapshotVersion);we.ns=we.ns.insert(pt,jt)}}}),function G(Q,ce){return L.apply(this,arguments)})(f.localStore,w))}),cd.apply(this,arguments)}function ig(p,o){return ud.apply(this,arguments)}function ud(){return(ud=(0,ye.A)(function*(p,o){const u=Le(p);if(!u.currentUser.isEqual(o)){Je("SyncEngine","User change. New user:",o.toKey());const f=yield Al(u.localStore,o);u.currentUser=o,(w=u).Oa.forEach(L=>{L.forEach(G=>{G.reject(new pe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),w.Oa.clear(),u.sharedClientState.handleUserChange(o,f.removedBatchIds,f.addedBatchIds),yield uu(u,f.us)}var w})).apply(this,arguments)}function og(p,o){const u=Le(p),f=u.Fa.get(o);if(f&&f.wa)return Yn().add(f.key);{let _=Yn();const w=u.Da.get(o);if(!w)return _;for(const T of w){const L=u.ba.get(T);_=_.unionWith(L.view.Ea)}return _}}function qf(p){const o=Le(p);return o.remoteStore.remoteSyncer.applyRemoteEvent=cu.bind(null,o),o.remoteStore.remoteSyncer.getRemoteKeysForTarget=og.bind(null,o),o.remoteStore.remoteSyncer.rejectListen=zh.bind(null,o),o.Sa.h_=to.bind(null,o.eventManager),o.Sa.ka=su.bind(null,o.eventManager),o}class uc{constructor(){this.synchronizeTabs=!1}initialize(o){var u=this;return(0,ye.A)(function*(){u.serializer=_r(o.databaseInfo.databaseId),u.sharedClientState=u.createSharedClientState(o),u.persistence=u.createPersistence(o),yield u.persistence.start(),u.localStore=u.createLocalStore(o),u.gcScheduler=u.createGarbageCollectionScheduler(o,u.localStore),u.indexBackfillerScheduler=u.createIndexBackfillerScheduler(o,u.localStore)})()}createGarbageCollectionScheduler(o,u){return null}createIndexBackfillerScheduler(o,u){return null}createLocalStore(o){return function lo(p,o,u,f){return new eu(p,o,u,f)}(this.persistence,new Il,o.initialUser,this.serializer)}createPersistence(o){return new wi(Jc.Hr,this.serializer)}createSharedClientState(o){return new O}terminate(){var o=this;return(0,ye.A)(function*(){var u,f;null===(u=o.gcScheduler)||void 0===u||u.stop(),null===(f=o.indexBackfillerScheduler)||void 0===f||f.stop(),o.sharedClientState.shutdown(),yield o.persistence.shutdown()})()}}class lu{initialize(o,u){var f=this;return(0,ye.A)(function*(){f.localStore||(f.localStore=o.localStore,f.sharedClientState=o.sharedClientState,f.datastore=f.createDatastore(u),f.remoteStore=f.createRemoteStore(u),f.eventManager=f.createEventManager(u),f.syncEngine=f.createSyncEngine(u,!o.synchronizeTabs),f.sharedClientState.onlineStateHandler=_=>jf(f.syncEngine,_,1),f.remoteStore.remoteSyncer.handleCredentialChange=ig.bind(null,f.syncEngine),yield Fh(f.remoteStore,f.syncEngine.isPrimaryClient))})()}createEventManager(o){return new Wp}createDatastore(o){const u=_r(o.databaseInfo.databaseId),f=new Vt(o.databaseInfo);return new Ua(o.authCredentials,o.appCheckCredentials,f,u)}createRemoteStore(o){return f=this.localStore,_=this.datastore,w=o.asyncQueue,T=u=>jf(this.syncEngine,u,0),L=A.D()?new A:new E,new Nf(f,_,w,T,L);var f,_,w,T,L}createSyncEngine(o,u){return function(_,w,T,L,G,Q,ce){const we=new Rm(_,w,T,L,G,Q);return ce&&(we.La=!0),we}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,o.initialUser,o.maxConcurrentLimboResolutions,u)}terminate(){var o=this;return(0,ye.A)(function*(){var u,f;yield(f=(0,ye.A)(function*(w){const T=Le(w);Je("RemoteStore","RemoteStore shutting down."),T.M_.add(5),yield oc(T),T.O_.shutdown(),T.N_.set("Unknown")}),function _(w){return f.apply(this,arguments)})(o.remoteStore),null===(u=o.datastore)||void 0===u||u.terminate()})()}}class Do{constructor(o){this.observer=o,this.muted=!1}next(o){this.observer.next&&this.Ka(this.observer.next,o)}error(o){this.observer.error?this.Ka(this.observer.error,o):Xt("Uncaught Error in snapshot listener:",o.toString())}$a(){this.muted=!0}Ka(o,u){this.muted||setTimeout(()=>{this.muted||o(u)},0)}}class R0{constructor(o,u,f,_){var w=this;this.authCredentials=o,this.appCheckCredentials=u,this.asyncQueue=f,this.databaseInfo=_,this.user=De.UNAUTHENTICATED,this.clientId=Gr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(f,function(){var T=(0,ye.A)(function*(L){Je("FirestoreClient","Received user=",L.uid),yield w.authCredentialListener(L),w.user=L});return function(L){return T.apply(this,arguments)}}()),this.appCheckCredentials.start(f,T=>(Je("FirestoreClient","Received new app check token=",T),this.appCheckCredentialListener(T,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(o){this.authCredentialListener=o}setAppCheckTokenChangeListener(o){this.appCheckCredentialListener=o}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new pe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var o=this;this.asyncQueue.enterRestrictedMode();const u=new _t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.A)(function*(){try{o._onlineComponents&&(yield o._onlineComponents.terminate()),o._offlineComponents&&(yield o._offlineComponents.terminate()),o.authCredentials.shutdown(),o.appCheckCredentials.shutdown(),u.resolve()}catch(f){const _=fo(f,"Failed to shutdown persistence");u.reject(_)}})),u.promise}}function Kf(p,o){return si.apply(this,arguments)}function si(){return si=(0,ye.A)(function*(p,o){p.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const u=p.configuration;yield o.initialize(u);let f=u.initialUser;p.setCredentialChangeListener(function(){var _=(0,ye.A)(function*(w){f.isEqual(w)||(yield Al(o.localStore,w),f=w)});return function(w){return _.apply(this,arguments)}}()),o.persistence.setDatabaseDeletedListener(()=>p.terminate()),p._offlineComponents=o}),si.apply(this,arguments)}function Zh(p,o){return dd.apply(this,arguments)}function dd(){return(dd=(0,ye.A)(function*(p,o){p.asyncQueue.verifyOperationInProgress();const u=yield function Qd(p){return Jh.apply(this,arguments)}(p);Je("FirestoreClient","Initializing OnlineComponentProvider"),yield o.initialize(u,p.configuration),p.setCredentialChangeListener(f=>Vr(o.remoteStore,f)),p.setAppCheckTokenChangeListener((f,_)=>Vr(o.remoteStore,_)),p._onlineComponents=o})).apply(this,arguments)}function Jh(){return(Jh=(0,ye.A)(function*(p){if(!p._offlineComponents)if(p._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kf(p,p._uninitializedComponentsProvider._offline)}catch(o){const u=o;if(!function du(p){return"FirebaseError"===p.name?p.code===le.FAILED_PRECONDITION||p.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code}(u))throw u;Tr("Error using user provided cache. Falling back to memory cache: "+u),yield Kf(p,new uc)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),yield Kf(p,new uc);return p._offlineComponents})).apply(this,arguments)}function ep(p){return fd.apply(this,arguments)}function fd(){return(fd=(0,ye.A)(function*(p){return p._onlineComponents||(p._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),yield Zh(p,p._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),yield Zh(p,new lu))),p._onlineComponents})).apply(this,arguments)}function Yd(p){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,ye.A)(function*(p){const o=yield ep(p),u=o.eventManager;return u.onListen=Mm.bind(null,o.syncEngine),u.onUnlisten=b0.bind(null,o.syncEngine),u.onFirstRemoteStoreListen=Yp.bind(null,o.syncEngine),u.onLastRemoteStoreUnlisten=T0.bind(null,o.syncEngine),u})).apply(this,arguments)}function gg(p){const o={};return void 0!==p.timeoutSeconds&&(o.timeoutSeconds=p.timeoutSeconds),o}const mg=new Map;function Zd(p,o,u){if(!u)throw new pe(le.INVALID_ARGUMENT,`Function ${p}() cannot be called with an empty ${o}.`)}function P0(p){if(!zt.isDocumentKey(p))throw new pe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${p} has ${p.length}.`)}function zm(p){if(zt.isDocumentKey(p))throw new pe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${p} has ${p.length}.`)}function _g(p){if(void 0===p)return"undefined";if(null===p)return"null";if("string"==typeof p)return p.length>20&&(p=`${p.substring(0,20)}...`),JSON.stringify(p);if("number"==typeof p||"boolean"==typeof p)return""+p;if("object"==typeof p){if(p instanceof Array)return"an array";{const o=(f=p).constructor?f.constructor.name:null;return o?`a custom ${o} object`:"an object"}}var f;return"function"==typeof p?"a function":Ne()}function Mr(p,o){if("_delegate"in p&&(p=p._delegate),!(p instanceof o)){if(o.name===p.constructor.name)throw new pe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const u=_g(p);throw new pe(le.INVALID_ARGUMENT,`Expected type '${o.name}', but it was: ${u}`)}}return p}class Jd{constructor(o){var u,f;if(void 0===o.host){if(void 0!==o.ssl)throw new pe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=o.host,this.ssl=null===(u=o.ssl)||void 0===u||u;if(this.credentials=o.credentials,this.ignoreUndefinedProperties=!!o.ignoreUndefinedProperties,this.localCache=o.localCache,void 0===o.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==o.cacheSizeBytes&&o.cacheSizeBytes<1048576)throw new pe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=o.cacheSizeBytes}(function i1(p,o,u,f){if(!0===o&&!0===f)throw new pe(le.INVALID_ARGUMENT,`${p} and ${u} cannot be used together.`)})("experimentalForceLongPolling",o.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",o.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!o.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==o.experimentalAutoDetectLongPolling&&!o.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=gg(null!==(f=o.experimentalLongPollingOptions)&&void 0!==f?f:{}),function(w){if(void 0!==w.timeoutSeconds){if(isNaN(w.timeoutSeconds))throw new pe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${w.timeoutSeconds} (must not be NaN)`);if(w.timeoutSeconds<5)throw new pe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${w.timeoutSeconds} (minimum allowed value is 5)`);if(w.timeoutSeconds>30)throw new pe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${w.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!o.useFetchStreams}isEqual(o){return this.host===o.host&&this.ssl===o.ssl&&this.credentials===o.credentials&&this.cacheSizeBytes===o.cacheSizeBytes&&this.experimentalForceLongPolling===o.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===o.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===o.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===o.ignoreUndefinedProperties&&this.useFetchStreams===o.useFetchStreams}}class Ci{constructor(o,u,f,_){this._authCredentials=o,this._appCheckCredentials=u,this._databaseId=f,this._app=_,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new pe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(o){if(this._settingsFrozen)throw new pe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jd(o),void 0!==o.credentials&&(this._authCredentials=function(f){if(!f)return new Un;switch(f.type){case"firstParty":return new no(f.sessionIndex||"0",f.iamToken||null,f.authTokenFactory||null);case"provider":return f.client;default:throw new pe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(o.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(u){const f=mg.get(u);f&&(Je("ComponentProvider","Removing Datastore"),mg.delete(u),f.terminate())}(this),Promise.resolve()}}class Jo{constructor(o,u,f){this.converter=u,this._query=f,this.type="query",this.firestore=o}withConverter(o){return new Jo(this.firestore,o,this._query)}}class Ii{constructor(o,u,f){this.converter=u,this._key=f,this.type="document",this.firestore=o}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(o){return new Ii(this.firestore,o,this._key)}}class Fu extends Jo{constructor(o,u,f){super(o,u,Bo(f)),this._path=f,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const o=this._path.popLast();return o.isEmpty()?null:new Ii(this.firestore,null,new zt(o))}withConverter(o){return new Fu(this.firestore,o,this._path)}}function np(p,o,...u){if(p=(0,Ee.Ku)(p),Zd("collection","path",o),p instanceof Ci){const f=Pt.fromString(o,...u);return zm(f),new Fu(p,null,f)}{if(!(p instanceof Ii||p instanceof Fu))throw new pe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=p._path.child(Pt.fromString(o,...u));return zm(f),new Fu(p.firestore,null,f)}}function Qf(p,o,...u){if(p=(0,Ee.Ku)(p),1===arguments.length&&(o=Gr.newId()),Zd("doc","path",o),p instanceof Ci){const f=Pt.fromString(o,...u);return P0(f),new Ii(p,null,new zt(f))}{if(!(p instanceof Ii||p instanceof Fu))throw new pe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=p._path.child(Pt.fromString(o,...u));return P0(f),new Ii(p.firestore,p instanceof Fu?p.converter:null,new zt(f))}}class ip{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new fs(this,"async_queue_retry"),this.hu=()=>{const u=bn();u&&Je("AsyncQueue","Visibility state changed to "+u.visibilityState),this.Yo.Wo()};const o=bn();o&&"function"==typeof o.addEventListener&&o.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(o){this.enqueue(o)}enqueueAndForgetEvenWhileRestricted(o){this.Pu(),this.Iu(o)}enterRestrictedMode(o){if(!this.ou){this.ou=!0,this.cu=o||!1;const u=bn();u&&"function"==typeof u.removeEventListener&&u.removeEventListener("visibilitychange",this.hu)}}enqueue(o){if(this.Pu(),this.ou)return new Promise(()=>{});const u=new _t;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(o().then(u.resolve,u.reject),u.promise)).then(()=>u.promise)}enqueueRetryable(o){this.enqueueAndForget(()=>(this.su.push(o),this.Tu()))}Tu(){var o=this;return(0,ye.A)(function*(){if(0!==o.su.length){try{yield o.su[0](),o.su.shift(),o.Yo.reset()}catch(u){if(!Se(u))throw u;Je("AsyncQueue","Operation failed with retryable error: "+u)}o.su.length>0&&o.Yo.$o(()=>o.Tu())}})()}Iu(o){const u=this.iu.then(()=>(this.uu=!0,o().catch(f=>{throw this.au=f,this.uu=!1,Xt("INTERNAL UNHANDLED ERROR: ",function(T){let L=T.message||"";return T.stack&&(L=T.stack.includes(T.message)?T.stack:T.message+"\n"+T.stack),L}(f)),f}).then(f=>(this.uu=!1,f))));return this.iu=u,u}enqueueAfterDelay(o,u,f){this.Pu(),this.lu.indexOf(o)>-1&&(u=0);const _=Rs.createAndSchedule(this,o,u,f,w=>this.Eu(w));return this._u.push(_),_}Pu(){this.au&&Ne()}verifyOperationInProgress(){}du(){var o=this;return(0,ye.A)(function*(){let u;do{u=o.iu,yield u}while(u!==o.iu)})()}Au(o){for(const u of this._u)if(u.timerId===o)return!0;return!1}Ru(o){return this.du().then(()=>{this._u.sort((u,f)=>u.targetTimeMs-f.targetTimeMs);for(const u of this._u)if(u.skipDelay(),"all"!==o&&u.timerId===o)break;return this.du()})}Vu(o){this.lu.push(o)}Eu(o){const u=this._u.indexOf(o);this._u.splice(u,1)}}function Yf(p){return function(u,f){if("object"!=typeof u||null===u)return!1;const _=u;for(const w of["next","error","complete"])if(w in _&&"function"==typeof _[w])return!0;return!1}(p)}class Xi extends Ci{constructor(o,u,f,_){super(o,u,f,_),this.type="firestore",this._queue=new ip,this._persistenceKey=_?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||k0(this),this._firestoreClient.terminate()}}function qm(p,o){const u="object"==typeof p?p:(0,Ct.Sx)(),f="string"==typeof p?p:o||"(default)",_=(0,Ct.j6)(u,"firestore").getImmediate({identifier:f});if(!_._initialized){const w=(0,Ee.yU)("firestore");w&&function N0(p,o,u,f={}){var _;const w=(p=Mr(p,Ci))._getSettings(),T=`${o}:${u}`;if("firestore.googleapis.com"!==w.host&&w.host!==T&&Tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),p._setSettings(Object.assign(Object.assign({},w),{host:T,ssl:!1})),f.mockUserToken){let L,G;if("string"==typeof f.mockUserToken)L=f.mockUserToken,G=De.MOCK_USER;else{L=(0,Ee.Fy)(f.mockUserToken,null===(_=p._app)||void 0===_?void 0:_.options.projectId);const Q=f.mockUserToken.sub||f.mockUserToken.user_id;if(!Q)throw new pe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");G=new De(Q)}p._authCredentials=new nn(new Wt(L,G))}}(_,...w)}return _}function Ro(p){return p._firestoreClient||k0(p),p._firestoreClient.verifyNotTerminated(),p._firestoreClient}function k0(p){var o,u,f;const _=p._freezeSettings(),w=(G=(null===(o=p._app)||void 0===o?void 0:o.options.appId)||"",new ua(p._databaseId,G,p._persistenceKey,(ce=_).host,ce.ssl,ce.experimentalForceLongPolling,ce.experimentalAutoDetectLongPolling,gg(ce.experimentalLongPollingOptions),ce.useFetchStreams));var G,ce;p._firestoreClient=new R0(p._authCredentials,p._appCheckCredentials,p._queue,w),null!==(u=_.localCache)&&void 0!==u&&u._offlineComponentProvider&&null!==(f=_.localCache)&&void 0!==f&&f._onlineComponentProvider&&(p._firestoreClient._uninitializedComponentsProvider={_offlineKind:_.localCache.kind,_offline:_.localCache._offlineComponentProvider,_online:_.localCache._onlineComponentProvider})}class sl{constructor(o){this._byteString=o}static fromBase64String(o){try{return new sl(Ui.fromBase64String(o))}catch(u){throw new pe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+u)}}static fromUint8Array(o){return new sl(Ui.fromUint8Array(o))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(o){return this._byteString.isEqual(o._byteString)}}class md{constructor(...o){for(let u=0;u<o.length;++u)if(0===o[u].length)throw new pe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(o)}isEqual(o){return this._internalPath.isEqual(o._internalPath)}}class _d{constructor(o){this._methodName=o}}class Eg{constructor(o,u){if(!isFinite(o)||o<-90||o>90)throw new pe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+o);if(!isFinite(u)||u<-180||u>180)throw new pe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+u);this._lat=o,this._long=u}get latitude(){return this._lat}get longitude(){return this._long}isEqual(o){return this._lat===o._lat&&this._long===o._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(o){return Dn(this._lat,o._lat)||Dn(this._long,o._long)}}const L0=/^__.*__$/;class V0{constructor(o,u,f){this.data=o,this.fieldMask=u,this.fieldTransforms=f}toMutation(o,u){return null!==this.fieldMask?new re(o,this.data,this.fieldMask,u,this.fieldTransforms):new F(o,this.data,u,this.fieldTransforms)}}class wg{constructor(o,u,f){this.data=o,this.fieldMask=u,this.fieldTransforms=f}toMutation(o,u){return new re(o,this.data,this.fieldMask,u,this.fieldTransforms)}}function Cg(p){switch(p){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class Jf{constructor(o,u,f,_,w,T){this.settings=o,this.databaseId=u,this.serializer=f,this.ignoreUndefinedProperties=_,void 0===w&&this.mu(),this.fieldTransforms=w||[],this.fieldMask=T||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(o){return new Jf(Object.assign(Object.assign({},this.settings),o),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(o){var u;const f=null===(u=this.path)||void 0===u?void 0:u.child(o),_=this.gu({path:f,yu:!1});return _.wu(o),_}Su(o){var u;const f=null===(u=this.path)||void 0===u?void 0:u.child(o),_=this.gu({path:f,yu:!1});return _.mu(),_}bu(o){return this.gu({path:void 0,yu:!0})}Du(o){return fu(o,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(o){return void 0!==this.fieldMask.find(u=>o.isPrefixOf(u))||void 0!==this.fieldTransforms.find(u=>o.isPrefixOf(u.field))}mu(){if(this.path)for(let o=0;o<this.path.length;o++)this.wu(this.path.get(o))}wu(o){if(0===o.length)throw this.Du("Document fields must not be empty");if(Cg(this.fu)&&L0.test(o))throw this.Du('Document fields cannot begin and end with "__"')}}class sp{constructor(o,u,f){this.databaseId=o,this.ignoreUndefinedProperties=u,this.serializer=f||_r(o)}Fu(o,u,f,_=!1){return new Jf({fu:o,methodName:u,vu:f,path:an.emptyPath(),yu:!1,Cu:_},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lu(p){const o=p._freezeSettings(),u=_r(p._databaseId);return new sp(p._databaseId,!!o.ignoreUndefinedProperties,u)}function eh(p,o,u,f,_,w={}){const T=p.Fu(w.merge||w.mergeFields?2:0,o,u,_);Ig("Data must be an object, but it was:",T,f);const L=Zm(f,T);let G,Q;if(w.merge)G=new Di(T.fieldMask),Q=T.fieldTransforms;else if(w.mergeFields){const ce=[];for(const we of w.mergeFields){const Fe=Pl(o,we,u);if(!T.contains(Fe))throw new pe(le.INVALID_ARGUMENT,`Field '${Fe}' is specified in your field mask but missing from your input data.`);ei(ce,Fe)||ce.push(Fe)}G=new Di(ce),Q=T.fieldTransforms.filter(we=>G.covers(we.field))}else G=null,Q=T.fieldTransforms;return new V0(new Qi(L),G,Q)}class al extends _d{_toFieldTransform(o){if(2!==o.fu)throw o.Du(1===o.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return o.fieldMask.push(o.path),null}isEqual(o){return o instanceof al}}function vd(p,o){if(B0(p=(0,Ee.Ku)(p)))return Ig("Unsupported field value:",o,p),Zm(p,o);if(p instanceof _d)return function(f,_){if(!Cg(_.fu))throw _.Du(`${f._methodName}() can only be used with update() and set()`);if(!_.path)throw _.Du(`${f._methodName}() is not currently supported inside arrays`);const w=f._toFieldTransform(_);w&&_.fieldTransforms.push(w)}(p,o),null;if(void 0===p&&o.ignoreUndefinedProperties)return null;if(o.path&&o.fieldMask.push(o.path),p instanceof Array){if(o.settings.yu&&4!==o.fu)throw o.Du("Nested arrays are not supported");return function(f,_){const w=[];let T=0;for(const L of f){let G=vd(L,_.bu(T));null==G&&(G={nullValue:"NULL_VALUE"}),w.push(G),T++}return{arrayValue:{values:w}}}(p,o)}return function(f,_){if(null===(f=(0,Ee.Ku)(f)))return{nullValue:"NULL_VALUE"};if("number"==typeof f)return yu(_.serializer,f);if("boolean"==typeof f)return{booleanValue:f};if("string"==typeof f)return{stringValue:f};if(f instanceof Date){const w=lr.fromDate(f);return{timestampValue:Zi(_.serializer,w)}}if(f instanceof lr){const w=new lr(f.seconds,1e3*Math.floor(f.nanoseconds/1e3));return{timestampValue:Zi(_.serializer,w)}}if(f instanceof Eg)return{geoPointValue:{latitude:f.latitude,longitude:f.longitude}};if(f instanceof sl)return{bytesValue:pl(_.serializer,f._byteString)};if(f instanceof Ii){const w=_.databaseId,T=f.firestore._databaseId;if(!T.isEqual(w))throw _.Du(`Document reference is for database ${T.projectId}/${T.database} but should be for database ${w.projectId}/${w.database}`);return{referenceValue:Au(f.firestore._databaseId||_.databaseId,f._key.path)}}throw _.Du(`Unsupported field value: ${_g(f)}`)}(p,o)}function Zm(p,o){const u={};return Io(p)?o.path&&o.path.length>0&&o.fieldMask.push(o.path):Bi(p,(f,_)=>{const w=vd(_,o.pu(f));null!=w&&(u[f]=w)}),{mapValue:{fields:u}}}function B0(p){return!("object"!=typeof p||null===p||p instanceof Array||p instanceof Date||p instanceof lr||p instanceof Eg||p instanceof sl||p instanceof Ii||p instanceof _d)}function Ig(p,o,u){if(!B0(u)||"object"!=typeof(_=u)||null===_||Object.getPrototypeOf(_)!==Object.prototype&&null!==Object.getPrototypeOf(_)){const f=_g(u);throw o.Du("an object"===f?p+" a custom object":p+" "+f)}var _}function Pl(p,o,u){if((o=(0,Ee.Ku)(o))instanceof md)return o._internalPath;if("string"==typeof o)return ap(p,o);throw fu("Field path arguments must be of type string or ",p,!1,void 0,u)}const Ag=new RegExp("[~\\*/\\[\\]]");function ap(p,o,u){if(o.search(Ag)>=0)throw fu(`Invalid field path (${o}). Paths must not contain '~', '*', '/', '[', or ']'`,p,!1,void 0,u);try{return new md(...o.split("."))._internalPath}catch{throw fu(`Invalid field path (${o}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,p,!1,void 0,u)}}function fu(p,o,u,f,_){const w=f&&!f.isEmpty(),T=void 0!==_;let L=`Function ${o}() called with invalid data`;u&&(L+=" (via `toFirestore()`)"),L+=". ";let G="";return(w||T)&&(G+=" (found",w&&(G+=` in field ${f}`),T&&(G+=` in document ${_}`),G+=")"),new pe(le.INVALID_ARGUMENT,L+p+G)}function ei(p,o){return p.some(u=>u.isEqual(o))}class rf{constructor(o,u,f,_,w){this._firestore=o,this._userDataWriter=u,this._key=f,this._document=_,this._converter=w}get id(){return this._key.path.lastSegment()}get ref(){return new Ii(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const o=new Jm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(o)}return this._userDataWriter.convertValue(this._document.data.value)}}get(o){if(this._document){const u=this._document.data.field(sf("DocumentSnapshot.get",o));if(null!==u)return this._userDataWriter.convertValue(u)}}}class Jm extends rf{data(){return super.data()}}function sf(p,o){return"string"==typeof o?ap(p,o):o instanceof md?o._internalPath:o._delegate._internalPath}function U0(p){if("L"===p.limitType&&0===p.explicitOrderBy.length)throw new pe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e_{}class th extends e_{}function j0(p,o,...u){let f=[];o instanceof e_&&f.push(o),f=f.concat(u),function(w){const T=w.filter(G=>G instanceof br).length,L=w.filter(G=>G instanceof nh).length;if(T>1||T>0&&L>0)throw new pe(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(f);for(const _ of f)p=_._apply(p);return p}class nh extends th{constructor(o,u,f){super(),this._field=o,this._op=u,this._value=f,this.type="where"}static _create(o,u,f){return new nh(o,u,f)}_apply(o){const u=this._parse(o);return sh(o._query,u),new Jo(o.firestore,o.converter,Y(o._query,u))}_parse(o){const u=Lu(o.firestore);return function(w,T,L,G,Q,ce,we){let Fe;if(Q.isKeyField()){if("array-contains"===ce||"array-contains-any"===ce)throw new pe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ce}' queries on documentId().`);if("in"===ce||"not-in"===ce){lp(we,ce);const pt=[];for(const Lt of we)pt.push(Mc(G,w,Lt));Fe={arrayValue:{values:pt}}}else Fe=Mc(G,w,we)}else"in"!==ce&&"not-in"!==ce&&"array-contains-any"!==ce||lp(we,ce),Fe=function Os(p,o,u,f=!1){return vd(u,p.Fu(f?4:3,o))}(L,"where",we,"in"===ce||"not-in"===ce);return Gn.create(Q,ce,Fe)}(o._query,0,u,o.firestore._databaseId,this._field,this._op,this._value)}}function c1(p,o,u){const f=o,_=sf("where",p);return nh._create(_,f,u)}class br extends e_{constructor(o,u){super(),this.type=o,this._queryConstraints=u}static _create(o,u){return new br(o,u)}_parse(o){const u=this._queryConstraints.map(f=>f._parse(o)).filter(f=>f.getFilters().length>0);return 1===u.length?u[0]:hr.create(u,this._getOperator())}_apply(o){const u=this._parse(o);return 0===u.getFilters().length?o:(function(_,w){let T=_;const L=w.getFlattenedFilters();for(const G of L)sh(T,G),T=Y(T,G)}(o._query,u),new Jo(o.firestore,o.converter,Y(o._query,u)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Mc(p,o,u){if("string"==typeof(u=(0,Ee.Ku)(u))){if(""===u)throw new pe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Is(o)&&-1!==u.indexOf("/"))throw new pe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${u}' contains a '/' character.`);const f=o.path.child(Pt.fromString(u));if(!zt.isDocumentKey(f))throw new pe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${f}' is not because it has an odd number of segments (${f.length}).`);return Vo(p,new zt(f))}if(u instanceof Ii)return Vo(p,u._key);throw new pe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_g(u)}.`)}function lp(p,o){if(!Array.isArray(p)||0===p.length)throw new pe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${o.toString()}' filters.`)}function sh(p,o){const u=function(_,w){for(const T of _)for(const L of T.getFlattenedFilters())if(w.indexOf(L.op)>=0)return L.op;return null}(p.filters,function(_){switch(_){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(o.op));if(null!==u)throw new pe(le.INVALID_ARGUMENT,u===o.op?`Invalid query. You cannot use more than one '${o.op.toString()}' filter.`:`Invalid query. You cannot use '${o.op.toString()}' filters with '${u.toString()}' filters.`)}class xg{convertValue(o,u="none"){switch(Lo(o)){case 0:return null;case 1:return o.booleanValue;case 2:return Ri(o.integerValue||o.doubleValue);case 3:return this.convertTimestamp(o.timestampValue);case 4:return this.convertServerTimestamp(o,u);case 5:return o.stringValue;case 6:return this.convertBytes(_s(o.bytesValue));case 7:return this.convertReference(o.referenceValue);case 8:return this.convertGeoPoint(o.geoPointValue);case 9:return this.convertArray(o.arrayValue,u);case 10:return this.convertObject(o.mapValue,u);default:throw Ne()}}convertObject(o,u){return this.convertObjectMap(o.fields,u)}convertObjectMap(o,u="none"){const f={};return Bi(o,(_,w)=>{f[_]=this.convertValue(w,u)}),f}convertGeoPoint(o){return new Eg(Ri(o.latitude),Ri(o.longitude))}convertArray(o,u){return(o.values||[]).map(f=>this.convertValue(f,u))}convertServerTimestamp(o,u){switch(u){case"previous":const f=Oa(o);return null==f?null:this.convertValue(f,u);case"estimate":return this.convertTimestamp(Fo(o));default:return null}}convertTimestamp(o){const u=qo(o);return new lr(u.seconds,u.nanos)}convertDocumentKey(o,u){const f=Pt.fromString(o);Ue(Od(f));const _=new es(f.get(1),f.get(3)),w=new zt(f.popFirst(5));return _.isEqual(u)||Xt(`Document ${w} contains a document reference within a different database (${_.projectId}/${_.database}) which is not supported. It will be treated as a reference in the current database (${u.projectId}/${u.database}) instead.`),w}}class Vu{constructor(o,u){this.hasPendingWrites=o,this.fromCache=u}isEqual(o){return this.hasPendingWrites===o.hasPendingWrites&&this.fromCache===o.fromCache}}class Nl extends rf{constructor(o,u,f,_,w,T){super(o,u,f,_,T),this._firestore=o,this._firestoreImpl=o,this.metadata=w}exists(){return super.exists()}data(o={}){if(this._document){if(this._converter){const u=new hp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(u,o)}return this._userDataWriter.convertValue(this._document.data.value,o.serverTimestamps)}}get(o,u={}){if(this._document){const f=this._document.data.field(sf("DocumentSnapshot.get",o));if(null!==f)return this._userDataWriter.convertValue(f,u.serverTimestamps)}}}class hp extends Nl{data(o={}){return super.data(o)}}class ah{constructor(o,u,f,_){this._firestore=o,this._userDataWriter=u,this._snapshot=_,this.metadata=new Vu(_.hasPendingWrites,_.fromCache),this.query=f}get docs(){const o=[];return this.forEach(u=>o.push(u)),o}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(o,u){this._snapshot.docs.forEach(f=>{o.call(u,new hp(this._firestore,this._userDataWriter,f.key,f,new Vu(this._snapshot.mutatedKeys.has(f.key),this._snapshot.fromCache),this.query.converter))})}docChanges(o={}){const u=!!o.includeMetadataChanges;if(u&&this._snapshot.excludesMetadataChanges)throw new pe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===u||(this._cachedChanges=function(_,w){if(_._snapshot.oldDocs.isEmpty()){let T=0;return _._snapshot.docChanges.map(L=>({type:"added",doc:new hp(_._firestore,_._userDataWriter,L.doc.key,L.doc,new Vu(_._snapshot.mutatedKeys.has(L.doc.key),_._snapshot.fromCache),_.query.converter),oldIndex:-1,newIndex:T++}))}{let T=_._snapshot.oldDocs;return _._snapshot.docChanges.filter(L=>w||3!==L.type).map(L=>{const G=new hp(_._firestore,_._userDataWriter,L.doc.key,L.doc,new Vu(_._snapshot.mutatedKeys.has(L.doc.key),_._snapshot.fromCache),_.query.converter);let Q=-1,ce=-1;return 0!==L.type&&(Q=T.indexOf(L.doc.key),T=T.delete(L.doc.key)),1!==L.type&&(T=T.add(L.doc),ce=T.indexOf(L.doc.key)),{type:l1(L.type),doc:G,oldIndex:Q,newIndex:ce}})}}(this,u),this._cachedChangesIncludeMetadataChanges=u),this._cachedChanges}}function l1(p){switch(p){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}function q0(p){p=Mr(p,Ii);const o=Mr(p.firestore,Xi);return function Gm(p,o,u={}){const f=new _t;return p.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return function(w,T,L,G,Q){const ce=new Do({next:Fe=>{T.enqueueAndForget(()=>Ki(w,we));const pt=Fe.docs.has(L);!pt&&Fe.fromCache?Q.reject(new pe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):pt&&Fe.fromCache&&G&&"server"===G.source?Q.reject(new pe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Q.resolve(Fe)},error:Fe=>Q.reject(Fe)}),we=new Uh(Bo(L.path),ce,{includeMetadataChanges:!0,ra:!0});return Lh(w,we)}(yield Yd(p),p.asyncQueue,o,u,f)})),f.promise}(Ro(o),p._key).then(u=>dh(o,p,u))}class Ps extends xg{constructor(o){super(),this.firestore=o}convertBytes(o){return new sl(o)}convertReference(o){const u=this.convertDocumentKey(o,this.firestore._databaseId);return new Ii(this.firestore,null,u)}}function r_(p){p=Mr(p,Jo);const o=Mr(p.firestore,Xi),u=Ro(o),f=new Ps(o);return U0(p._query),function r1(p,o,u={}){const f=new _t;return p.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return function(w,T,L,G,Q){const ce=new Do({next:Fe=>{T.enqueueAndForget(()=>Ki(w,we)),Fe.fromCache&&"server"===G.source?Q.reject(new pe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Q.resolve(Fe)},error:Fe=>Q.reject(Fe)}),we=new Uh(L,ce,{includeMetadataChanges:!0,ra:!0});return Lh(w,we)}(yield Yd(p),p.asyncQueue,o,u,f)})),f.promise}(u,p._query).then(_=>new ah(o,f,p,_))}function uh(p,o,u,...f){p=Mr(p,Ii);const _=Mr(p.firestore,Xi),w=Lu(_);let T;return T="string"==typeof(o=(0,Ee.Ku)(o))||o instanceof md?function ps(p,o,u,f,_,w){const T=p.Fu(1,o,u),L=[Pl(o,f,u)],G=[_];if(w.length%2!=0)throw new pe(le.INVALID_ARGUMENT,`Function ${o}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Fe=0;Fe<w.length;Fe+=2)L.push(Pl(o,w[Fe])),G.push(w[Fe+1]);const Q=[],ce=Qi.empty();for(let Fe=L.length-1;Fe>=0;--Fe)if(!ei(Q,L[Fe])){const pt=L[Fe];let Lt=G[Fe];Lt=(0,Ee.Ku)(Lt);const en=T.Su(pt);if(Lt instanceof al)Q.push(pt);else{const jt=vd(Lt,en);null!=jt&&(Q.push(pt),ce.set(pt,jt))}}const we=new Di(Q);return new wg(ce,we,T.fieldTransforms)}(w,"updateDoc",p._key,o,u,f):function Mo(p,o,u,f){const _=p.Fu(1,o,u);Ig("Data must be an object, but it was:",_,f);const w=[],T=Qi.empty();Bi(f,(G,Q)=>{const ce=ap(o,G,u);Q=(0,Ee.Ku)(Q);const we=_.Su(ce);if(Q instanceof al)w.push(ce);else{const Fe=vd(Q,we);null!=Fe&&(w.push(ce),T.set(ce,Fe))}});const L=new Di(w);return new wg(T,L,_.fieldTransforms)}(w,"updateDoc",p._key,o),af(_,[T.toMutation(p._key,Vn.exists(!0))])}function o_(p){return af(Mr(p.firestore,Xi),[new ut(p._key,Vn.none())])}function lh(p,o){const u=Mr(p.firestore,Xi),f=Qf(p),_=function dp(p,o,u){let f;return f=p?u&&(u.merge||u.mergeFields)?p.toFirestore(o,u):p.toFirestore(o):o,f}(p.converter,o);return af(u,[eh(Lu(p.firestore),"addDoc",f._key,_,null!==p.converter,{}).toMutation(f._key,Vn.exists(!1))]).then(()=>f)}function af(p,o){return function(f,_){const w=new _t;return f.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return function Jr(p,o,u){return sd.apply(this,arguments)}(yield function tp(p){return ep(p).then(o=>o.syncEngine)}(f),_,w)})),w.promise}(Ro(p),o)}function dh(p,o,u){const f=u.docs.get(o._key),_=new Ps(p);return new Nl(p,_,o._key,f,new Vu(u.hasPendingWrites,u.fromCache),o.converter)}!function(o,u=!0){tn=Ct.MF,(0,Ct.om)(new Xe.uA("firestore",(f,{instanceIdentifier:_,options:w})=>{const T=f.getProvider("app").getImmediate(),L=new Xi(new Qn(f.getProvider("auth-internal")),new Br(f.getProvider("app-check-internal")),function(Q,ce){if(!Object.prototype.hasOwnProperty.apply(Q.options,["projectId"]))throw new pe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new es(Q.options.projectId,ce)}(T,_),T);return w=Object.assign({useFetchStreams:u},w),L._setSettings(w),L},"PUBLIC").setMultipleInstances(!0)),(0,Ct.KO)(Ht,"4.6.3",o),(0,Ct.KO)(Ht,"4.6.3","esm2017")}();var g1=ie(1985),h_=ie(6354),yd=function(){return yd=Object.assign||function(o){for(var u,f=1,_=arguments.length;f<_;f++)for(var w in u=arguments[f])Object.prototype.hasOwnProperty.call(u,w)&&(o[w]=u[w]);return o},yd.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var m1={includeMetadataChanges:!1};function lf(p,o){return void 0===o&&(o={}),function J0(p){return function p_(p,o){return void 0===o&&(o=m1),new g1.c(function(u){var f=function s_(p,...o){var u,f,_;p=(0,Ee.Ku)(p);let w={includeMetadataChanges:!1,source:"default"},T=0;"object"!=typeof o[T]||Yf(o[T])||(w=o[T],T++);const L={includeMetadataChanges:w.includeMetadataChanges,source:w.source};if(Yf(o[T])){const we=o[T];o[T]=null===(u=we.next)||void 0===u?void 0:u.bind(we),o[T+1]=null===(f=we.error)||void 0===f?void 0:f.bind(we),o[T+2]=null===(_=we.complete)||void 0===_?void 0:_.bind(we)}let G,Q,ce;if(p instanceof Ii)Q=Mr(p.firestore,Xi),ce=Bo(p._key.path),G={next:we=>{o[T]&&o[T](dh(Q,p,we))},error:o[T+1],complete:o[T+2]};else{const we=Mr(p,Jo);Q=Mr(we.firestore,Xi),ce=we._query;const Fe=new Ps(Q);G={next:pt=>{o[T]&&o[T](new ah(Q,Fe,we,pt))},error:o[T+1],complete:o[T+2]},U0(p._query)}return function(Fe,pt,Lt,en){const jt=new Do(en),Sn=new Uh(pt,jt,Lt);return Fe.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return Lh(yield Yd(Fe),Sn)})),()=>{jt.$a(),Fe.asyncQueue.enqueueAndForget((0,ye.A)(function*(){return Ki(yield Yd(Fe),Sn)}))}}(Ro(Q),ce,L,G)}(p,o,{next:u.next.bind(u),error:u.error.bind(u),complete:u.complete.bind(u)});return{unsubscribe:f}})}(p,{includeMetadataChanges:!0}).pipe((0,h_.T)(function(o){return o.docs}))}(p).pipe((0,h_.T)(function(u){return u.map(function(f){return function m_(p,o){var u;void 0===o&&(o={});var f=p.data(o);return p.exists()&&"object"==typeof f&&null!==f&&o.idField?yd(yd({},f),((u={})[o.idField]=p.id,u)):f}(f,o)})}))}class df{constructor(o){return o}}const Fg="firestore",Lg=new R.nKC("angularfire2.firestore-instances");function I_(p){return(o,u)=>{const f=o.runOutsideAngular(()=>p(u));return new df(f)}}const w1={provide:class tv{constructor(){return(0,D.CA)(Fg)}},deps:[[new R.Xx1,Lg]]},C1={provide:df,useFactory:function C_(p,o){const u=(0,D.lR)(Fg,p,o);return u&&new df(u)},deps:[[new R.Xx1,Lg],V.XU]};function nv(p,...o){return(0,nt.KO)("angularfire",D.xv.full,"fst"),(0,R.EmA)([C1,w1,{provide:Lg,useFactory:I_(p),multi:!0,deps:[R.SKi,R.zZn,D.u0,V.gL,[new R.Xx1,We.DF],[new R.Xx1,D.Jv],...o]}])}const iv=(0,D.S3)(lf,!0),mE=(0,D.S3)(lh,!0),i=(0,D.S3)(np,!0),l=(0,D.S3)(o_,!0),b=(0,D.S3)(Qf,!0),Ye=(0,D.S3)(q0,!0),Gt=(0,D.S3)(r_,!0),er=(0,D.S3)(qm,!0),P1=(0,D.S3)(j0,!0),k1=(0,D.S3)(uh,!0),Bg=(0,D.S3)(c1,!0)},3586:(Cn,It,ie)=>{ie.d(It,{xv:()=>Ot,u0:()=>Yt,Jv:()=>xt,CA:()=>kt,lR:()=>dt,S3:()=>Le});var D=ie(3953),R=ie(2214),V=ie(8359);class We extends V.yU{constructor(pe,_t){super()}schedule(pe,_t=0){return this}}const nt={setInterval(le,pe,..._t){const{delegate:Wt}=nt;return Wt?.setInterval?Wt.setInterval(le,pe,..._t):setInterval(le,pe,..._t)},clearInterval(le){const{delegate:pe}=nt;return(pe?.clearInterval||clearInterval)(le)},delegate:void 0};var ye=ie(7908);class Ct extends We{constructor(pe,_t){super(pe,_t),this.scheduler=pe,this.work=_t,this.pending=!1}schedule(pe,_t=0){var Wt;if(this.closed)return this;this.state=pe;const Un=this.id,nn=this.scheduler;return null!=Un&&(this.id=this.recycleAsyncId(nn,Un,_t)),this.pending=!0,this.delay=_t,this.id=null!==(Wt=this.id)&&void 0!==Wt?Wt:this.requestAsyncId(nn,this.id,_t),this}requestAsyncId(pe,_t,Wt=0){return nt.setInterval(pe.flush.bind(pe,this),Wt)}recycleAsyncId(pe,_t,Wt=0){if(null!=Wt&&this.delay===Wt&&!1===this.pending)return _t;null!=_t&&nt.clearInterval(_t)}execute(pe,_t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Wt=this._execute(pe,_t);if(Wt)return Wt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,_t){let Un,Wt=!1;try{this.work(pe)}catch(nn){Wt=!0,Un=nn||new Error("Scheduled action threw falsy error")}if(Wt)return this.unsubscribe(),Un}unsubscribe(){if(!this.closed){const{id:pe,scheduler:_t}=this,{actions:Wt}=_t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ye.o)(Wt,this),null!=pe&&(this.id=this.recycleAsyncId(_t,pe,null)),this.delay=null,super.unsubscribe()}}}const ct={now:()=>(ct.delegate||Date).now(),delegate:void 0};class Ee{constructor(pe,_t=Ee.now){this.schedulerActionCtor=pe,this.now=_t}schedule(pe,_t=0,Wt){return new this.schedulerActionCtor(this,pe).schedule(Wt,_t)}}Ee.now=ct.now;class be extends Ee{constructor(pe,_t=Ee.now){super(pe,_t),this.actions=[],this._active=!1}flush(pe){const{actions:_t}=this;if(this._active)return void _t.push(pe);let Wt;this._active=!0;do{if(Wt=pe.execute(pe.state,pe.delay))break}while(pe=_t.shift());if(this._active=!1,Wt){for(;pe=_t.shift();)pe.unsubscribe();throw Wt}}}const vt=new class Oe extends be{}(class Xe extends Ct{constructor(pe,_t){super(pe,_t),this.scheduler=pe,this.work=_t}schedule(pe,_t=0){return _t>0?super.schedule(pe,_t):(this.delay=_t,this.state=pe,this.scheduler.flush(this),this)}execute(pe,_t){return _t>0||this.closed?super.execute(pe,_t):this._execute(pe,_t)}requestAsyncId(pe,_t,Wt=0){return null!=Wt&&Wt>0||null==Wt&&this.delay>0?super.requestAsyncId(pe,_t,Wt):(pe.flush(this),0)}}),At=new be(Ct);var pn=ie(1985),$t=ie(8141),Xn=ie(6745),cr=ie(941);const Ot=new D.RxE("ANGULARFIRE2_VERSION");function dt(le,pe,_t){if(pe){if(1===pe.length)return pe[0];const nn=pe.filter(Qn=>Qn.app===_t);if(1===nn.length)return nn[0]}return _t.container.getProvider(le).getImmediate({optional:!0})}const kt=(le,pe)=>{const _t=pe?[pe]:(0,R.Dk)(),Wt=[];return _t.forEach(Un=>{Un.container.getProvider(le).instances.forEach(Qn=>{Wt.includes(Qn)||Wt.push(Qn)})}),Wt};class xt{constructor(){return kt(Ht)}}const Ht="app-check";function De(){}class tn{zone;delegate;constructor(pe,_t=vt){this.zone=pe,this.delegate=_t}now(){return this.delegate.now()}schedule(pe,_t,Wt){const Un=this.zone;return this.delegate.schedule(function(Qn){Un.runGuarded(()=>{pe.apply(this,[Qn])})},_t,Wt)}}class gt{zone;task=null;constructor(pe){this.zone=pe}call(pe,_t){const Wt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",De,{},De,De)),_t.pipe((0,$t.M)({next:Wt,complete:Wt,error:Wt})).subscribe(pe).add(Wt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Yt=(()=>{class le{ngZone;outsideAngular;insideAngular;constructor(_t){this.ngZone=_t,this.outsideAngular=_t.runOutsideAngular(()=>new tn(Zone.current)),this.insideAngular=_t.run(()=>new tn(Zone.current,At)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Wt){return new(Wt||le)(D.KVO(D.SKi))};static \u0275prov=D.jDH({token:le,factory:le.\u0275fac,providedIn:"root"})}return le})();function In(){const le=globalThis.\u0275AngularFireScheduler;if(!le)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return le}function Xt(le){return In().ngZone.run(()=>le())}function Ne(le){return function Ue(le){return function(_t){return(_t=_t.lift(new gt(le.ngZone))).pipe((0,Xn._)(le.outsideAngular),(0,cr.Q)(le.insideAngular))}}(In())(le)}const bt=(le,pe)=>function(){const Wt=arguments;return pe&&setTimeout(()=>{"scheduled"===pe.state&&pe.invoke()},10),Xt(()=>le.apply(void 0,Wt))},Le=(le,pe)=>function(){let _t;const Wt=arguments;for(let nn=0;nn<arguments.length;nn++)"function"==typeof Wt[nn]&&(pe&&(_t||=Xt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",De,{},De,De))),Wt[nn]=bt(Wt[nn],_t));const Un=function Je(le){return In().ngZone.runOutsideAngular(()=>le())}(()=>le.apply(this,Wt));if(!pe){if(Un instanceof pn.c){const nn=In();return Un.pipe((0,Xn._)(nn.outsideAngular),(0,cr.Q)(nn.insideAngular))}return Xt(()=>Un)}return Un instanceof pn.c?Un.pipe(Ne):Un instanceof Promise?Xt(()=>new Promise((nn,Qn)=>Un.then(Pr=>Xt(()=>nn(Pr)),Pr=>Xt(()=>Qn(Pr))))):"function"==typeof Un&&_t?function(){return setTimeout(()=>{_t&&"scheduled"===_t.state&&_t.invoke()},10),Un.apply(this,arguments)}:Xt(()=>Un)}},4341:(Cn,It,ie)=>{ie.d(It,{me:()=>wt,ok:()=>kr,MJ:()=>ks,l_:()=>ns,JD:()=>Xo,j4:()=>go,YN:()=>$u,BC:()=>sr,cb:()=>an,xH:()=>Gu,X1:()=>hl,wz:()=>zi,k0:()=>tn,qT:()=>Ga,y7:()=>hr});var D=ie(3953),R=ie(177),V=ie(8455),We=ie(1985),nt=ie(3073),ye=ie(8750),Ct=ie(3794),Xe=ie(4360),ct=ie(6450),Ee=ie(8496),Oe=ie(1413),vt=ie(6354);let ze=(()=>{class Y{constructor(H,oe){this._renderer=H,this._elementRef=oe,this.onChange=Te=>{},this.onTouched=()=>{}}setProperty(H,oe){this._renderer.setProperty(this._elementRef.nativeElement,H,oe)}registerOnTouched(H){this.onTouched=H}registerOnChange(H){this.onChange=H}setDisabledState(H){this.setProperty("disabled",H)}static#e=this.\u0275fac=function(oe){return new(oe||Y)(D.rXU(D.sFG),D.rXU(D.aKT))};static#t=this.\u0275dir=D.FsC({type:Y})}return Y})(),At=(()=>{class Y extends ze{static#e=this.\u0275fac=(()=>{let H;return function(Te){return(H||(H=D.xGo(Y)))(Te||Y)}})();static#t=this.\u0275dir=D.FsC({type:Y,features:[D.Vt3]})}return Y})();const Ut=new D.nKC(""),Xn={provide:Ut,useExisting:(0,D.Rfq)(()=>wt),multi:!0},Ot=new D.nKC("");let wt=(()=>{class Y extends ze{constructor(H,oe,Te){super(H,oe),this._compositionMode=Te,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function cr(){const Y=(0,R.QT)()?(0,R.QT)().getUserAgent():"";return/android (\d+)/.test(Y.toLowerCase())}())}writeValue(H){this.setProperty("value",H??"")}_handleInput(H){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(H)}_compositionStart(){this._composing=!0}_compositionEnd(H){this._composing=!1,this._compositionMode&&this.onChange(H)}static#e=this.\u0275fac=function(oe){return new(oe||Y)(D.rXU(D.sFG),D.rXU(D.aKT),D.rXU(Ot,8))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(oe,Te){1&oe&&D.bIt("input",function($n){return Te._handleInput($n.target.value)})("blur",function(){return Te.onTouched()})("compositionstart",function(){return Te._compositionStart()})("compositionend",function($n){return Te._compositionEnd($n.target.value)})},features:[D.Jv_([Xn]),D.Vt3]})}return Y})();function dt(Y){return null==Y||("string"==typeof Y||Array.isArray(Y))&&0===Y.length}function kt(Y){return null!=Y&&"number"==typeof Y.length}const xt=new D.nKC(""),Ht=new D.nKC(""),De=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class tn{static min(Z){return function gt(Y){return Z=>{if(dt(Z.value)||dt(Y))return null;const H=parseFloat(Z.value);return!isNaN(H)&&H<Y?{min:{min:Y,actual:Z.value}}:null}}(Z)}static max(Z){return function Yt(Y){return Z=>{if(dt(Z.value)||dt(Y))return null;const H=parseFloat(Z.value);return!isNaN(H)&&H>Y?{max:{max:Y,actual:Z.value}}:null}}(Z)}static required(Z){return function In(Y){return dt(Y.value)?{required:!0}:null}(Z)}static requiredTrue(Z){return function Je(Y){return!0===Y.value?null:{required:!0}}(Z)}static email(Z){return function Xt(Y){return dt(Y.value)||De.test(Y.value)?null:{email:!0}}(Z)}static minLength(Z){return function Tr(Y){return Z=>dt(Z.value)||!kt(Z.value)?null:Z.value.length<Y?{minlength:{requiredLength:Y,actualLength:Z.value.length}}:null}(Z)}static maxLength(Z){return function ki(Y){return Z=>kt(Z.value)&&Z.value.length>Y?{maxlength:{requiredLength:Y,actualLength:Z.value.length}}:null}(Z)}static pattern(Z){return function Ne(Y){if(!Y)return Ue;let Z,H;return"string"==typeof Y?(H="","^"!==Y.charAt(0)&&(H+="^"),H+=Y,"$"!==Y.charAt(Y.length-1)&&(H+="$"),Z=new RegExp(H)):(H=Y.toString(),Z=Y),oe=>{if(dt(oe.value))return null;const Te=oe.value;return Z.test(Te)?null:{pattern:{requiredPattern:H,actualValue:Te}}}}(Z)}static nullValidator(Z){return null}static compose(Z){return Un(Z)}static composeAsync(Z){return Qn(Z)}}function Ue(Y){return null}function bt(Y){return null!=Y}function Le(Y){return(0,D.jNT)(Y)?(0,V.H)(Y):Y}function le(Y){let Z={};return Y.forEach(H=>{Z=null!=H?{...Z,...H}:Z}),0===Object.keys(Z).length?null:Z}function pe(Y,Z){return Z.map(H=>H(Y))}function Wt(Y){return Y.map(Z=>function _t(Y){return!Y.validate}(Z)?Z:H=>Z.validate(H))}function Un(Y){if(!Y)return null;const Z=Y.filter(bt);return 0==Z.length?null:function(H){return le(pe(H,Z))}}function nn(Y){return null!=Y?Un(Wt(Y)):null}function Qn(Y){if(!Y)return null;const Z=Y.filter(bt);return 0==Z.length?null:function(H){return function be(...Y){const Z=(0,Ct.ms)(Y),{args:H,keys:oe}=(0,nt.D)(Y),Te=new We.c(Mt=>{const{length:$n}=H;if(!$n)return void Mt.complete();const Uo=new Array($n);let pa=$n,bo=$n;for(let Bs=0;Bs<$n;Bs++){let Tn=!1;(0,ye.Tg)(H[Bs]).subscribe((0,Xe._)(Mt,_u=>{Tn||(Tn=!0,bo--),Uo[Bs]=_u},()=>pa--,void 0,()=>{(!pa||!Tn)&&(bo||Mt.next(oe?(0,Ee.e)(oe,Uo):Uo),Mt.complete())}))}});return Z?Te.pipe((0,ct.I)(Z)):Te}(pe(H,Z).map(Le)).pipe((0,vt.T)(le))}}function Pr(Y){return null!=Y?Qn(Wt(Y)):null}function no(Y,Z){return null===Y?[Z]:Array.isArray(Y)?[...Y,Z]:[Y,Z]}function mr(Y){return Y._rawValidators}function Br(Y){return Y._rawAsyncValidators}function Fi(Y){return Y?Array.isArray(Y)?Y:[Y]:[]}function ln(Y,Z){return Array.isArray(Y)?Y.includes(Z):Y===Z}function Gr(Y,Z){const H=Fi(Z);return Fi(Y).forEach(Te=>{ln(H,Te)||H.push(Te)}),H}function Dn(Y,Z){return Fi(Z).filter(H=>!ln(Y,H))}class yr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Z){this._rawValidators=Z||[],this._composedValidatorFn=nn(this._rawValidators)}_setAsyncValidators(Z){this._rawAsyncValidators=Z||[],this._composedAsyncValidatorFn=Pr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Z){this._onDestroyCallbacks.push(Z)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Z=>Z()),this._onDestroyCallbacks=[]}reset(Z=void 0){this.control&&this.control.reset(Z)}hasError(Z,H){return!!this.control&&this.control.hasError(Z,H)}getError(Z,H){return this.control?this.control.getError(Z,H):null}}class ni extends yr{get formDirective(){return null}get path(){return null}}class lr extends yr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class sn{constructor(Z){this._cd=Z}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let sr=(()=>{class Y extends sn{constructor(H){super(H)}static#e=this.\u0275fac=function(oe){return new(oe||Y)(D.rXU(lr,2))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(oe,Te){2&oe&&D.AVh("ng-untouched",Te.isUntouched)("ng-touched",Te.isTouched)("ng-pristine",Te.isPristine)("ng-dirty",Te.isDirty)("ng-valid",Te.isValid)("ng-invalid",Te.isInvalid)("ng-pending",Te.isPending)},features:[D.Vt3]})}return Y})(),an=(()=>{class Y extends sn{constructor(H){super(H)}static#e=this.\u0275fac=function(oe){return new(oe||Y)(D.rXU(ni,10))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(oe,Te){2&oe&&D.AVh("ng-untouched",Te.isUntouched)("ng-touched",Te.isTouched)("ng-pristine",Te.isPristine)("ng-dirty",Te.isDirty)("ng-valid",Te.isValid)("ng-invalid",Te.isInvalid)("ng-pending",Te.isPending)("ng-submitted",Te.isSubmitted)},features:[D.Vt3]})}return Y})();const Ae="VALID",Qe="INVALID",de="PENDING",ge="DISABLED";class Se{}class ht extends Se{constructor(Z,H){super(),this.value=Z,this.source=H}}class qe extends Se{constructor(Z,H){super(),this.pristine=Z,this.source=H}}class Kt extends Se{constructor(Z,H){super(),this.touched=Z,this.source=H}}class An extends Se{constructor(Z,H){super(),this.status=Z,this.source=H}}class Hn extends Se{constructor(Z){super(),this.source=Z}}class Xr extends Se{constructor(Z){super(),this.source=Z}}function wr(Y){return(Ur(Y)?Y.validators:Y)||null}function qn(Y,Z){return(Ur(Z)?Z.asyncValidators:Y)||null}function Ur(Y){return null!=Y&&!Array.isArray(Y)&&"object"==typeof Y}function ii(Y,Z,H){const oe=Y.controls;if(!(Z?Object.keys(oe):oe).length)throw new D.wOt(1e3,"");if(!oe[H])throw new D.wOt(1001,"")}function Ns(Y,Z,H){Y._forEachChild((oe,Te)=>{if(void 0===H[Te])throw new D.wOt(1002,"")})}class po{constructor(Z,H){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new Oe.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(Z),this._assignAsyncValidators(H)}get validator(){return this._composedValidatorFn}set validator(Z){this._rawValidators=this._composedValidatorFn=Z}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Z){this._rawAsyncValidators=this._composedAsyncValidatorFn=Z}get parent(){return this._parent}get valid(){return this.status===Ae}get invalid(){return this.status===Qe}get pending(){return this.status==de}get disabled(){return this.status===ge}get enabled(){return this.status!==ge}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Z){this._assignValidators(Z)}setAsyncValidators(Z){this._assignAsyncValidators(Z)}addValidators(Z){this.setValidators(Gr(Z,this._rawValidators))}addAsyncValidators(Z){this.setAsyncValidators(Gr(Z,this._rawAsyncValidators))}removeValidators(Z){this.setValidators(Dn(Z,this._rawValidators))}removeAsyncValidators(Z){this.setAsyncValidators(Dn(Z,this._rawAsyncValidators))}hasValidator(Z){return ln(this._rawValidators,Z)}hasAsyncValidator(Z){return ln(this._rawAsyncValidators,Z)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Z={}){const H=!1===this.touched;this.touched=!0;const oe=Z.sourceControl??this;this._parent&&!Z.onlySelf&&this._parent.markAsTouched({...Z,sourceControl:oe}),H&&!1!==Z.emitEvent&&this._events.next(new Kt(!0,oe))}markAllAsTouched(Z={}){this.markAsTouched({onlySelf:!0,emitEvent:Z.emitEvent,sourceControl:this}),this._forEachChild(H=>H.markAllAsTouched(Z))}markAsUntouched(Z={}){const H=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const oe=Z.sourceControl??this;this._forEachChild(Te=>{Te.markAsUntouched({onlySelf:!0,emitEvent:Z.emitEvent,sourceControl:oe})}),this._parent&&!Z.onlySelf&&this._parent._updateTouched(Z,oe),H&&!1!==Z.emitEvent&&this._events.next(new Kt(!1,oe))}markAsDirty(Z={}){const H=!0===this.pristine;this.pristine=!1;const oe=Z.sourceControl??this;this._parent&&!Z.onlySelf&&this._parent.markAsDirty({...Z,sourceControl:oe}),H&&!1!==Z.emitEvent&&this._events.next(new qe(!1,oe))}markAsPristine(Z={}){const H=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const oe=Z.sourceControl??this;this._forEachChild(Te=>{Te.markAsPristine({onlySelf:!0,emitEvent:Z.emitEvent})}),this._parent&&!Z.onlySelf&&this._parent._updatePristine(Z,oe),H&&!1!==Z.emitEvent&&this._events.next(new qe(!0,oe))}markAsPending(Z={}){this.status=de;const H=Z.sourceControl??this;!1!==Z.emitEvent&&(this._events.next(new An(this.status,H)),this.statusChanges.emit(this.status)),this._parent&&!Z.onlySelf&&this._parent.markAsPending({...Z,sourceControl:H})}disable(Z={}){const H=this._parentMarkedDirty(Z.onlySelf);this.status=ge,this.errors=null,this._forEachChild(Te=>{Te.disable({...Z,onlySelf:!0})}),this._updateValue();const oe=Z.sourceControl??this;!1!==Z.emitEvent&&(this._events.next(new ht(this.value,oe)),this._events.next(new An(this.status,oe)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Z,skipPristineCheck:H},this),this._onDisabledChange.forEach(Te=>Te(!0))}enable(Z={}){const H=this._parentMarkedDirty(Z.onlySelf);this.status=Ae,this._forEachChild(oe=>{oe.enable({...Z,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Z.emitEvent}),this._updateAncestors({...Z,skipPristineCheck:H},this),this._onDisabledChange.forEach(oe=>oe(!1))}_updateAncestors(Z,H){this._parent&&!Z.onlySelf&&(this._parent.updateValueAndValidity(Z),Z.skipPristineCheck||this._parent._updatePristine({},H),this._parent._updateTouched({},H))}setParent(Z){this._parent=Z}getRawValue(){return this.value}updateValueAndValidity(Z={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const oe=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ae||this.status===de)&&this._runAsyncValidator(oe,Z.emitEvent)}const H=Z.sourceControl??this;!1!==Z.emitEvent&&(this._events.next(new ht(this.value,H)),this._events.next(new An(this.status,H)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Z.onlySelf&&this._parent.updateValueAndValidity({...Z,sourceControl:H})}_updateTreeValidity(Z={emitEvent:!0}){this._forEachChild(H=>H._updateTreeValidity(Z)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Z.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ge:Ae}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Z,H){if(this.asyncValidator){this.status=de,this._hasOwnPendingAsyncValidator={emitEvent:!1!==H};const oe=Le(this.asyncValidator(this));this._asyncValidationSubscription=oe.subscribe(Te=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(Te,{emitEvent:H,shouldHaveEmitted:Z})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const Z=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,Z}return!1}setErrors(Z,H={}){this.errors=Z,this._updateControlsErrors(!1!==H.emitEvent,this,H.shouldHaveEmitted)}get(Z){let H=Z;return null==H||(Array.isArray(H)||(H=H.split(".")),0===H.length)?null:H.reduce((oe,Te)=>oe&&oe._find(Te),this)}getError(Z,H){const oe=H?this.get(H):this;return oe&&oe.errors?oe.errors[Z]:null}hasError(Z,H){return!!this.getError(Z,H)}get root(){let Z=this;for(;Z._parent;)Z=Z._parent;return Z}_updateControlsErrors(Z,H,oe){this.status=this._calculateStatus(),Z&&this.statusChanges.emit(this.status),(Z||oe)&&this._events.next(new An(this.status,H)),this._parent&&this._parent._updateControlsErrors(Z,H,oe)}_initObservables(){this.valueChanges=new D.bkB,this.statusChanges=new D.bkB}_calculateStatus(){return this._allControlsDisabled()?ge:this.errors?Qe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(de)?de:this._anyControlsHaveStatus(Qe)?Qe:Ae}_anyControlsHaveStatus(Z){return this._anyControls(H=>H.status===Z)}_anyControlsDirty(){return this._anyControls(Z=>Z.dirty)}_anyControlsTouched(){return this._anyControls(Z=>Z.touched)}_updatePristine(Z,H){const oe=!this._anyControlsDirty(),Te=this.pristine!==oe;this.pristine=oe,this._parent&&!Z.onlySelf&&this._parent._updatePristine(Z,H),Te&&this._events.next(new qe(this.pristine,H))}_updateTouched(Z={},H){this.touched=this._anyControlsTouched(),this._events.next(new Kt(this.touched,H)),this._parent&&!Z.onlySelf&&this._parent._updateTouched(Z,H)}_registerOnCollectionChange(Z){this._onCollectionChange=Z}_setUpdateStrategy(Z){Ur(Z)&&null!=Z.updateOn&&(this._updateOn=Z.updateOn)}_parentMarkedDirty(Z){return!Z&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Z){return null}_assignValidators(Z){this._rawValidators=Array.isArray(Z)?Z.slice():Z,this._composedValidatorFn=function ri(Y){return Array.isArray(Y)?nn(Y):Y||null}(this._rawValidators)}_assignAsyncValidators(Z){this._rawAsyncValidators=Array.isArray(Z)?Z.slice():Z,this._composedAsyncValidatorFn=function Vi(Y){return Array.isArray(Y)?Pr(Y):Y||null}(this._rawAsyncValidators)}}class oo extends po{constructor(Z,H,oe){super(wr(H),qn(oe,H)),this.controls=Z,this._initObservables(),this._setUpdateStrategy(H),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Z,H){return this.controls[Z]?this.controls[Z]:(this.controls[Z]=H,H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange),H)}addControl(Z,H,oe={}){this.registerControl(Z,H),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}removeControl(Z,H={}){this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),delete this.controls[Z],this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}setControl(Z,H,oe={}){this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),delete this.controls[Z],H&&this.registerControl(Z,H),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}contains(Z){return this.controls.hasOwnProperty(Z)&&this.controls[Z].enabled}setValue(Z,H={}){Ns(this,0,Z),Object.keys(Z).forEach(oe=>{ii(this,!0,oe),this.controls[oe].setValue(Z[oe],{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H)}patchValue(Z,H={}){null!=Z&&(Object.keys(Z).forEach(oe=>{const Te=this.controls[oe];Te&&Te.patchValue(Z[oe],{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H))}reset(Z={},H={}){this._forEachChild((oe,Te)=>{oe.reset(Z?Z[Te]:null,{onlySelf:!0,emitEvent:H.emitEvent})}),this._updatePristine(H,this),this._updateTouched(H,this),this.updateValueAndValidity(H)}getRawValue(){return this._reduceChildren({},(Z,H,oe)=>(Z[oe]=H.getRawValue(),Z))}_syncPendingControls(){let Z=this._reduceChildren(!1,(H,oe)=>!!oe._syncPendingControls()||H);return Z&&this.updateValueAndValidity({onlySelf:!0}),Z}_forEachChild(Z){Object.keys(this.controls).forEach(H=>{const oe=this.controls[H];oe&&Z(oe,H)})}_setUpControls(){this._forEachChild(Z=>{Z.setParent(this),Z._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Z){for(const[H,oe]of Object.entries(this.controls))if(this.contains(H)&&Z(oe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(H,oe,Te)=>((oe.enabled||this.disabled)&&(H[Te]=oe.value),H))}_reduceChildren(Z,H){let oe=Z;return this._forEachChild((Te,Mt)=>{oe=H(oe,Te,Mt)}),oe}_allControlsDisabled(){for(const Z of Object.keys(this.controls))if(this.controls[Z].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Z){return this.controls.hasOwnProperty(Z)?this.controls[Z]:null}}class Da extends oo{}const $e=new D.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>St}),St="always";function Ln(Y,Z,H=St){jr(Y,Z),Z.valueAccessor.writeValue(Y.value),(Y.disabled||"always"===H)&&Z.valueAccessor.setDisabledState?.(Y.disabled),function No(Y,Z){Z.valueAccessor.registerOnChange(H=>{Y._pendingValue=H,Y._pendingChange=!0,Y._pendingDirty=!0,"change"===Y.updateOn&&pc(Y,Z)})}(Y,Z),function aa(Y,Z){const H=(oe,Te)=>{Z.valueAccessor.writeValue(oe),Te&&Z.viewToModelUpdate(oe)};Y.registerOnChange(H),Z._registerOnDestroy(()=>{Y._unregisterOnChange(H)})}(Y,Z),function Qr(Y,Z){Z.valueAccessor.registerOnTouched(()=>{Y._pendingTouched=!0,"blur"===Y.updateOn&&Y._pendingChange&&pc(Y,Z),"submit"!==Y.updateOn&&Y.markAsTouched()})}(Y,Z),function Ir(Y,Z){if(Z.valueAccessor.setDisabledState){const H=oe=>{Z.valueAccessor.setDisabledState(oe)};Y.registerOnDisabledChange(H),Z._registerOnDestroy(()=>{Y._unregisterOnDisabledChange(H)})}}(Y,Z)}function Rn(Y,Z,H=!0){const oe=()=>{};Z.valueAccessor&&(Z.valueAccessor.registerOnChange(oe),Z.valueAccessor.registerOnTouched(oe)),Gi(Y,Z),Y&&(Z._invokeOnDestroyCallbacks(),Y._registerOnCollectionChange(()=>{}))}function kn(Y,Z){Y.forEach(H=>{H.registerOnValidatorChange&&H.registerOnValidatorChange(Z)})}function jr(Y,Z){const H=mr(Y);null!==Z.validator?Y.setValidators(no(H,Z.validator)):"function"==typeof H&&Y.setValidators([H]);const oe=Br(Y);null!==Z.asyncValidator?Y.setAsyncValidators(no(oe,Z.asyncValidator)):"function"==typeof oe&&Y.setAsyncValidators([oe]);const Te=()=>Y.updateValueAndValidity();kn(Z._rawValidators,Te),kn(Z._rawAsyncValidators,Te)}function Gi(Y,Z){let H=!1;if(null!==Y){if(null!==Z.validator){const Te=mr(Y);if(Array.isArray(Te)&&Te.length>0){const Mt=Te.filter($n=>$n!==Z.validator);Mt.length!==Te.length&&(H=!0,Y.setValidators(Mt))}}if(null!==Z.asyncValidator){const Te=Br(Y);if(Array.isArray(Te)&&Te.length>0){const Mt=Te.filter($n=>$n!==Z.asyncValidator);Mt.length!==Te.length&&(H=!0,Y.setAsyncValidators(Mt))}}}const oe=()=>{};return kn(Z._rawValidators,oe),kn(Z._rawAsyncValidators,oe),H}function pc(Y,Z){Y._pendingDirty&&Y.markAsDirty(),Y.setValue(Y._pendingValue,{emitModelToViewChange:!1}),Z.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1}function or(Y,Z){if(!Y.hasOwnProperty("model"))return!1;const H=Y.model;return!!H.isFirstChange()||!Object.is(Z,H.currentValue)}function Io(Y,Z){if(!Z)return null;let H,oe,Te;return Array.isArray(Z),Z.forEach(Mt=>{Mt.constructor===wt?H=Mt:function Bi(Y){return Object.getPrototypeOf(Y.constructor)===At}(Mt)?oe=Mt:Te=Mt}),Te||oe||H||null}function $i(Y,Z){const H=Y.indexOf(Z);H>-1&&Y.splice(H,1)}function Di(Y){return"object"==typeof Y&&null!==Y&&2===Object.keys(Y).length&&"value"in Y&&"disabled"in Y}Promise.resolve();const ks=class extends po{constructor(Z=null,H,oe){super(wr(H),qn(oe,H)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Z),this._setUpdateStrategy(H),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ur(H)&&(H.nonNullable||H.initialValueIsDefault)&&(this.defaultValue=Di(Z)?Z.value:Z)}setValue(Z,H={}){this.value=this._pendingValue=Z,this._onChange.length&&!1!==H.emitModelToViewChange&&this._onChange.forEach(oe=>oe(this.value,!1!==H.emitViewToModelChange)),this.updateValueAndValidity(H)}patchValue(Z,H={}){this.setValue(Z,H)}reset(Z=this.defaultValue,H={}){this._applyFormState(Z),this.markAsPristine(H),this.markAsUntouched(H),this.setValue(this.value,H),this._pendingChange=!1}_updateValue(){}_anyControls(Z){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Z){this._onChange.push(Z)}_unregisterOnChange(Z){$i(this._onChange,Z)}registerOnDisabledChange(Z){this._onDisabledChange.push(Z)}_unregisterOnDisabledChange(Z){$i(this._onDisabledChange,Z)}_forEachChild(Z){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Z){Di(Z)?(this.value=this._pendingValue=Z.value,Z.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Z}};Promise.resolve();let Ga=(()=>{class Y{static#e=this.\u0275fac=function(oe){return new(oe||Y)};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return Y})();const Vo=new D.nKC(""),Ko={provide:lr,useExisting:(0,D.Rfq)(()=>ns)};let ns=(()=>{class Y extends lr{set isDisabled(H){}static#e=this._ngModelWarningSentOnce=!1;constructor(H,oe,Te,Mt,$n){super(),this._ngModelWarningConfig=Mt,this.callSetDisabledState=$n,this.update=new D.bkB,this._ngModelWarningSent=!1,this._setValidators(H),this._setAsyncValidators(oe),this.valueAccessor=Io(0,Te)}ngOnChanges(H){if(this._isControlChanged(H)){const oe=H.form.previousValue;oe&&Rn(oe,this,!1),Ln(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}or(H,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Rn(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}_isControlChanged(H){return H.hasOwnProperty("form")}static#t=this.\u0275fac=function(oe){return new(oe||Y)(D.rXU(xt,10),D.rXU(Ht,10),D.rXU(Ut,10),D.rXU(Vo,8),D.rXU($e,8))};static#n=this.\u0275dir=D.FsC({type:Y,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[D.Jv_([Ko]),D.Vt3,D.OA$]})}return Y})();const mc={provide:ni,useExisting:(0,D.Rfq)(()=>go)};let go=(()=>{class Y extends ni{constructor(H,oe,Te){super(),this.callSetDisabledState=Te,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new D.bkB,this._setValidators(H),this._setAsyncValidators(oe)}ngOnChanges(H){this._checkFormPresent(),H.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Gi(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(H){const oe=this.form.get(H.path);return Ln(oe,H,this.callSetDisabledState),oe.updateValueAndValidity({emitEvent:!1}),this.directives.push(H),oe}getControl(H){return this.form.get(H.path)}removeControl(H){Rn(H.control||null,H,!1),function Zn(Y,Z){const H=Y.indexOf(Z);H>-1&&Y.splice(H,1)}(this.directives,H)}addFormGroup(H){this._setUpFormContainer(H)}removeFormGroup(H){this._cleanUpFormContainer(H)}getFormGroup(H){return this.form.get(H.path)}addFormArray(H){this._setUpFormContainer(H)}removeFormArray(H){this._cleanUpFormContainer(H)}getFormArray(H){return this.form.get(H.path)}updateModel(H,oe){this.form.get(H.path).setValue(oe)}onSubmit(H){return this.submitted=!0,function Ma(Y,Z){Y._syncPendingControls(),Z.forEach(H=>{const oe=H.control;"submit"===oe.updateOn&&oe._pendingChange&&(H.viewToModelUpdate(oe._pendingValue),oe._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(H),this.form._events.next(new Hn(this.control)),"dialog"===H?.target?.method}onReset(){this.resetForm()}resetForm(H=void 0){this.form.reset(H),this.submitted=!1,this.form._events.next(new Xr(this.form))}_updateDomValue(){this.directives.forEach(H=>{const oe=H.control,Te=this.form.get(H.path);oe!==Te&&(Rn(oe||null,H),(Y=>Y instanceof ks)(Te)&&(Ln(Te,H,this.callSetDisabledState),H.control=Te))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(H){const oe=this.form.get(H.path);(function Ra(Y,Z){jr(Y,Z)})(oe,H),oe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(H){if(this.form){const oe=this.form.get(H.path);oe&&function Ha(Y,Z){return Gi(Y,Z)}(oe,H)&&oe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){jr(this.form,this),this._oldForm&&Gi(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(oe){return new(oe||Y)(D.rXU(xt,10),D.rXU(Ht,10),D.rXU($e,8))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["","formGroup",""]],hostBindings:function(oe,Te){1&oe&&D.bIt("submit",function($n){return Te.onSubmit($n)})("reset",function(){return Te.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D.Jv_([mc]),D.Vt3,D.OA$]})}return Y})();const Wa={provide:lr,useExisting:(0,D.Rfq)(()=>Xo)};let Xo=(()=>{class Y extends lr{set isDisabled(H){}static#e=this._ngModelWarningSentOnce=!1;constructor(H,oe,Te,Mt,$n){super(),this._ngModelWarningConfig=$n,this._added=!1,this.name=null,this.update=new D.bkB,this._ngModelWarningSent=!1,this._parent=H,this._setValidators(oe),this._setAsyncValidators(Te),this.valueAccessor=Io(0,Mt)}ngOnChanges(H){this._added||this._setUpControl(),or(H,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}get path(){return function rn(Y,Z){return[...Z.path,Y]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(oe){return new(oe||Y)(D.rXU(ni,13),D.rXU(xt,10),D.rXU(Ht,10),D.rXU(Ut,10),D.rXU(Vo,8))};static#n=this.\u0275dir=D.FsC({type:Y,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[D.Jv_([Wa]),D.Vt3,D.OA$]})}return Y})();const Qi={provide:Ut,useExisting:(0,D.Rfq)(()=>zi),multi:!0};function _c(Y,Z){return null==Y?`${Z}`:(Z&&"object"==typeof Z&&(Z="Object"),`${Y}: ${Z}`.slice(0,50))}let zi=(()=>{class Y extends At{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(H){this._compareWith=H}writeValue(H){this.value=H;const Te=_c(this._getOptionId(H),H);this.setProperty("value",Te)}registerOnChange(H){this.onChange=oe=>{this.value=this._getOptionValue(oe),H(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(H){for(const oe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(oe),H))return oe;return null}_getOptionValue(H){const oe=function fi(Y){return Y.split(":")[0]}(H);return this._optionMap.has(oe)?this._optionMap.get(oe):H}static#e=this.\u0275fac=(()=>{let H;return function(Te){return(H||(H=D.xGo(Y)))(Te||Y)}})();static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(oe,Te){1&oe&&D.bIt("change",function($n){return Te.onChange($n.target.value)})("blur",function(){return Te.onTouched()})},inputs:{compareWith:"compareWith"},features:[D.Jv_([Qi]),D.Vt3]})}return Y})(),Gu=(()=>{class Y{constructor(H,oe,Te){this._element=H,this._renderer=oe,this._select=Te,this._select&&(this.id=this._select._registerOption())}set ngValue(H){null!=this._select&&(this._select._optionMap.set(this.id,H),this._setElementValue(_c(this.id,H)),this._select.writeValue(this._select.value))}set value(H){this._setElementValue(H),this._select&&this._select.writeValue(this._select.value)}_setElementValue(H){this._renderer.setProperty(this._element.nativeElement,"value",H)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(oe){return new(oe||Y)(D.rXU(D.aKT),D.rXU(D.sFG),D.rXU(zi,9))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return Y})();const qa={provide:Ut,useExisting:(0,D.Rfq)(()=>Gn),multi:!0};function Ka(Y,Z){return null==Y?`${Z}`:("string"==typeof Z&&(Z=`'${Z}'`),Z&&"object"==typeof Z&&(Z="Object"),`${Y}: ${Z}`.slice(0,50))}let Gn=(()=>{class Y extends At{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(H){this._compareWith=H}writeValue(H){let oe;if(this.value=H,Array.isArray(H)){const Te=H.map(Mt=>this._getOptionId(Mt));oe=(Mt,$n)=>{Mt._setSelected(Te.indexOf($n.toString())>-1)}}else oe=(Te,Mt)=>{Te._setSelected(!1)};this._optionMap.forEach(oe)}registerOnChange(H){this.onChange=oe=>{const Te=[],Mt=oe.selectedOptions;if(void 0!==Mt){const $n=Mt;for(let Uo=0;Uo<$n.length;Uo++){const bo=this._getOptionValue($n[Uo].value);Te.push(bo)}}else{const $n=oe.options;for(let Uo=0;Uo<$n.length;Uo++){const pa=$n[Uo];if(pa.selected){const bo=this._getOptionValue(pa.value);Te.push(bo)}}}this.value=Te,H(Te)}}_registerOption(H){const oe=(this._idCounter++).toString();return this._optionMap.set(oe,H),oe}_getOptionId(H){for(const oe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(oe)._value,H))return oe;return null}_getOptionValue(H){const oe=function Bc(Y){return Y.split(":")[0]}(H);return this._optionMap.has(oe)?this._optionMap.get(oe)._value:H}static#e=this.\u0275fac=(()=>{let H;return function(Te){return(H||(H=D.xGo(Y)))(Te||Y)}})();static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(oe,Te){1&oe&&D.bIt("change",function($n){return Te.onChange($n.target)})("blur",function(){return Te.onTouched()})},inputs:{compareWith:"compareWith"},features:[D.Jv_([qa]),D.Vt3]})}return Y})(),hr=(()=>{class Y{constructor(H,oe,Te){this._element=H,this._renderer=oe,this._select=Te,this._select&&(this.id=this._select._registerOption(this))}set ngValue(H){null!=this._select&&(this._value=H,this._setElementValue(Ka(this.id,H)),this._select.writeValue(this._select.value))}set value(H){this._select?(this._value=H,this._setElementValue(Ka(this.id,H)),this._select.writeValue(this._select.value)):this._setElementValue(H)}_setElementValue(H){this._renderer.setProperty(this._element.nativeElement,"value",H)}_setSelected(H){this._renderer.setProperty(this._element.nativeElement,"selected",H)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(oe){return new(oe||Y)(D.rXU(D.aKT),D.rXU(D.sFG),D.rXU(Gn,9))};static#t=this.\u0275dir=D.FsC({type:Y,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return Y})(),On=(()=>{class Y{static#e=this.\u0275fac=function(oe){return new(oe||Y)};static#t=this.\u0275mod=D.$C({type:Y});static#n=this.\u0275inj=D.G2t({})}return Y})();class Cs extends po{constructor(Z,H,oe){super(wr(H),qn(oe,H)),this.controls=Z,this._initObservables(),this._setUpdateStrategy(H),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Z){return this.controls[this._adjustIndex(Z)]}push(Z,H={}){this.controls.push(Z),this._registerControl(Z),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}insert(Z,H,oe={}){this.controls.splice(Z,0,H),this._registerControl(H),this.updateValueAndValidity({emitEvent:oe.emitEvent})}removeAt(Z,H={}){let oe=this._adjustIndex(Z);oe<0&&(oe=0),this.controls[oe]&&this.controls[oe]._registerOnCollectionChange(()=>{}),this.controls.splice(oe,1),this.updateValueAndValidity({emitEvent:H.emitEvent})}setControl(Z,H,oe={}){let Te=this._adjustIndex(Z);Te<0&&(Te=0),this.controls[Te]&&this.controls[Te]._registerOnCollectionChange(()=>{}),this.controls.splice(Te,1),H&&(this.controls.splice(Te,0,H),this._registerControl(H)),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Z,H={}){Ns(this,0,Z),Z.forEach((oe,Te)=>{ii(this,!1,Te),this.at(Te).setValue(oe,{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H)}patchValue(Z,H={}){null!=Z&&(Z.forEach((oe,Te)=>{this.at(Te)&&this.at(Te).patchValue(oe,{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H))}reset(Z=[],H={}){this._forEachChild((oe,Te)=>{oe.reset(Z[Te],{onlySelf:!0,emitEvent:H.emitEvent})}),this._updatePristine(H,this),this._updateTouched(H,this),this.updateValueAndValidity(H)}getRawValue(){return this.controls.map(Z=>Z.getRawValue())}clear(Z={}){this.controls.length<1||(this._forEachChild(H=>H._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Z.emitEvent}))}_adjustIndex(Z){return Z<0?Z+this.length:Z}_syncPendingControls(){let Z=this.controls.reduce((H,oe)=>!!oe._syncPendingControls()||H,!1);return Z&&this.updateValueAndValidity({onlySelf:!0}),Z}_forEachChild(Z){this.controls.forEach((H,oe)=>{Z(H,oe)})}_updateValue(){this.value=this.controls.filter(Z=>Z.enabled||this.disabled).map(Z=>Z.value)}_anyControls(Z){return this.controls.some(H=>H.enabled&&Z(H))}_setUpControls(){this._forEachChild(Z=>this._registerControl(Z))}_allControlsDisabled(){for(const Z of this.controls)if(Z.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Z){Z.setParent(this),Z._registerOnCollectionChange(this._onCollectionChange)}_find(Z){return this.at(Z)??null}}function Bo(Y){return!!Y&&(void 0!==Y.asyncValidators||void 0!==Y.validators||void 0!==Y.updateOn)}let kr=(()=>{class Y{constructor(){this.useNonNullable=!1}get nonNullable(){const H=new Y;return H.useNonNullable=!0,H}group(H,oe=null){const Te=this._reduceControls(H);let Mt={};return Bo(oe)?Mt=oe:null!==oe&&(Mt.validators=oe.validator,Mt.asyncValidators=oe.asyncValidator),new oo(Te,Mt)}record(H,oe=null){const Te=this._reduceControls(H);return new Da(Te,oe)}control(H,oe,Te){let Mt={};return this.useNonNullable?(Bo(oe)?Mt=oe:(Mt.validators=oe,Mt.asyncValidators=Te),new ks(H,{...Mt,nonNullable:!0})):new ks(H,oe,Te)}array(H,oe,Te){const Mt=H.map($n=>this._createControl($n));return new Cs(Mt,oe,Te)}_reduceControls(H){const oe={};return Object.keys(H).forEach(Te=>{oe[Te]=this._createControl(H[Te])}),oe}_createControl(H){return H instanceof ks||H instanceof po?H:Array.isArray(H)?this.control(H[0],H.length>1?H[1]:null,H.length>2?H[2]:null):this.control(H)}static#e=this.\u0275fac=function(oe){return new(oe||Y)};static#t=this.\u0275prov=D.jDH({token:Y,factory:Y.\u0275fac,providedIn:"root"})}return Y})(),$u=(()=>{class Y{static withConfig(H){return{ngModule:Y,providers:[{provide:$e,useValue:H.callSetDisabledState??St}]}}static#e=this.\u0275fac=function(oe){return new(oe||Y)};static#t=this.\u0275mod=D.$C({type:Y});static#n=this.\u0275inj=D.G2t({imports:[On]})}return Y})(),hl=(()=>{class Y{static withConfig(H){return{ngModule:Y,providers:[{provide:Vo,useValue:H.warnOnNgModelWithFormControl??"always"},{provide:$e,useValue:H.callSetDisabledState??St}]}}static#e=this.\u0275fac=function(oe){return new(oe||Y)};static#t=this.\u0275mod=D.$C({type:Y});static#n=this.\u0275inj=D.G2t({imports:[On]})}return Y})()},345:(Cn,It,ie)=>{ie.d(It,{B8:()=>bt,hE:()=>Gr});var D=ie(177),R=ie(3953);class V extends D.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class We extends V{static makeCurrent(){(0,D.ZD)(new We)}onAndCancel(tt,Ae,Qe){return tt.addEventListener(Ae,Qe),()=>{tt.removeEventListener(Ae,Qe)}}dispatchEvent(tt,Ae){tt.dispatchEvent(Ae)}remove(tt){tt.parentNode&&tt.parentNode.removeChild(tt)}createElement(tt,Ae){return(Ae=Ae||this.getDefaultDocument()).createElement(tt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(tt){return tt.nodeType===Node.ELEMENT_NODE}isShadowRoot(tt){return tt instanceof DocumentFragment}getGlobalEventTarget(tt,Ae){return"window"===Ae?window:"document"===Ae?tt:"body"===Ae?tt.body:null}getBaseHref(tt){const Ae=function ye(){return nt=nt||document.querySelector("base"),nt?nt.getAttribute("href"):null}();return null==Ae?null:function Ct(he){return new URL(he,document.baseURI).pathname}(Ae)}resetBaseElement(){nt=null}getUserAgent(){return window.navigator.userAgent}getCookie(tt){return(0,D._b)(document.cookie,tt)}}let nt=null,ct=(()=>{class he{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Qe){return new(Qe||he)};static#t=this.\u0275prov=R.jDH({token:he,factory:he.\u0275fac})}return he})();const Ee=new R.nKC("");let be=(()=>{class he{constructor(Ae,Qe){this._zone=Qe,this._eventNameToPlugin=new Map,Ae.forEach(de=>{de.manager=this}),this._plugins=Ae.slice().reverse()}addEventListener(Ae,Qe,de){return this._findPluginFor(Qe).addEventListener(Ae,Qe,de)}getZone(){return this._zone}_findPluginFor(Ae){let Qe=this._eventNameToPlugin.get(Ae);if(Qe)return Qe;if(Qe=this._plugins.find(ge=>ge.supports(Ae)),!Qe)throw new R.wOt(5101,!1);return this._eventNameToPlugin.set(Ae,Qe),Qe}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(R.KVO(Ee),R.KVO(R.SKi))};static#t=this.\u0275prov=R.jDH({token:he,factory:he.\u0275fac})}return he})();class Oe{constructor(tt){this._doc=tt}}const vt="ng-app-id";let ze=(()=>{class he{constructor(Ae,Qe,de,ge={}){this.doc=Ae,this.appId=Qe,this.nonce=de,this.platformId=ge,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,D.Vy)(ge),this.resetHostNodes()}addStyles(Ae){for(const Qe of Ae)1===this.changeUsageCount(Qe,1)&&this.onStyleAdded(Qe)}removeStyles(Ae){for(const Qe of Ae)this.changeUsageCount(Qe,-1)<=0&&this.onStyleRemoved(Qe)}ngOnDestroy(){const Ae=this.styleNodesInDOM;Ae&&(Ae.forEach(Qe=>Qe.remove()),Ae.clear());for(const Qe of this.getAllStyles())this.onStyleRemoved(Qe);this.resetHostNodes()}addHost(Ae){this.hostNodes.add(Ae);for(const Qe of this.getAllStyles())this.addStyleToHost(Ae,Qe)}removeHost(Ae){this.hostNodes.delete(Ae)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Ae){for(const Qe of this.hostNodes)this.addStyleToHost(Qe,Ae)}onStyleRemoved(Ae){const Qe=this.styleRef;Qe.get(Ae)?.elements?.forEach(de=>de.remove()),Qe.delete(Ae)}collectServerRenderedStyles(){const Ae=this.doc.head?.querySelectorAll(`style[${vt}="${this.appId}"]`);if(Ae?.length){const Qe=new Map;return Ae.forEach(de=>{null!=de.textContent&&Qe.set(de.textContent,de)}),Qe}return null}changeUsageCount(Ae,Qe){const de=this.styleRef;if(de.has(Ae)){const ge=de.get(Ae);return ge.usage+=Qe,ge.usage}return de.set(Ae,{usage:Qe,elements:[]}),Qe}getStyleElement(Ae,Qe){const de=this.styleNodesInDOM,ge=de?.get(Qe);if(ge?.parentNode===Ae)return de.delete(Qe),ge.removeAttribute(vt),ge;{const Se=this.doc.createElement("style");return this.nonce&&Se.setAttribute("nonce",this.nonce),Se.textContent=Qe,this.platformIsServer&&Se.setAttribute(vt,this.appId),Ae.appendChild(Se),Se}}addStyleToHost(Ae,Qe){const de=this.getStyleElement(Ae,Qe),ge=this.styleRef,Se=ge.get(Qe)?.elements;Se?Se.push(de):ge.set(Qe,{elements:[de],usage:1})}resetHostNodes(){const Ae=this.hostNodes;Ae.clear(),Ae.add(this.doc.head)}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(R.KVO(D.qQ),R.KVO(R.sZ2),R.KVO(R.BIS,8),R.KVO(R.Agw))};static#t=this.\u0275prov=R.jDH({token:he,factory:he.\u0275fac})}return he})();const At={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ut=/%COMP%/g,Ot=new R.nKC("",{providedIn:"root",factory:()=>!0});function kt(he,tt){return tt.map(Ae=>Ae.replace(Ut,he))}let xt=(()=>{class he{constructor(Ae,Qe,de,ge,Se,ht,qe,Kt=null){this.eventManager=Ae,this.sharedStylesHost=Qe,this.appId=de,this.removeStylesOnCompDestroy=ge,this.doc=Se,this.platformId=ht,this.ngZone=qe,this.nonce=Kt,this.rendererByCompId=new Map,this.platformIsServer=(0,D.Vy)(ht),this.defaultRenderer=new Ht(Ae,Se,qe,this.platformIsServer)}createRenderer(Ae,Qe){if(!Ae||!Qe)return this.defaultRenderer;this.platformIsServer&&Qe.encapsulation===R.gXe.ShadowDom&&(Qe={...Qe,encapsulation:R.gXe.Emulated});const de=this.getOrCreateRenderer(Ae,Qe);return de instanceof Je?de.applyToHost(Ae):de instanceof In&&de.applyStyles(),de}getOrCreateRenderer(Ae,Qe){const de=this.rendererByCompId;let ge=de.get(Qe.id);if(!ge){const Se=this.doc,ht=this.ngZone,qe=this.eventManager,Kt=this.sharedStylesHost,An=this.removeStylesOnCompDestroy,Hn=this.platformIsServer;switch(Qe.encapsulation){case R.gXe.Emulated:ge=new Je(qe,Kt,Qe,this.appId,An,Se,ht,Hn);break;case R.gXe.ShadowDom:return new Yt(qe,Kt,Ae,Qe,Se,ht,this.nonce,Hn);default:ge=new In(qe,Kt,Qe,An,Se,ht,Hn)}de.set(Qe.id,ge)}return ge}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(R.KVO(be),R.KVO(ze),R.KVO(R.sZ2),R.KVO(Ot),R.KVO(D.qQ),R.KVO(R.Agw),R.KVO(R.SKi),R.KVO(R.BIS))};static#t=this.\u0275prov=R.jDH({token:he,factory:he.\u0275fac})}return he})();class Ht{constructor(tt,Ae,Qe,de){this.eventManager=tt,this.doc=Ae,this.ngZone=Qe,this.platformIsServer=de,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(tt,Ae){return Ae?this.doc.createElementNS(At[Ae]||Ae,tt):this.doc.createElement(tt)}createComment(tt){return this.doc.createComment(tt)}createText(tt){return this.doc.createTextNode(tt)}appendChild(tt,Ae){(gt(tt)?tt.content:tt).appendChild(Ae)}insertBefore(tt,Ae,Qe){tt&&(gt(tt)?tt.content:tt).insertBefore(Ae,Qe)}removeChild(tt,Ae){tt&&tt.removeChild(Ae)}selectRootElement(tt,Ae){let Qe="string"==typeof tt?this.doc.querySelector(tt):tt;if(!Qe)throw new R.wOt(-5104,!1);return Ae||(Qe.textContent=""),Qe}parentNode(tt){return tt.parentNode}nextSibling(tt){return tt.nextSibling}setAttribute(tt,Ae,Qe,de){if(de){Ae=de+":"+Ae;const ge=At[de];ge?tt.setAttributeNS(ge,Ae,Qe):tt.setAttribute(Ae,Qe)}else tt.setAttribute(Ae,Qe)}removeAttribute(tt,Ae,Qe){if(Qe){const de=At[Qe];de?tt.removeAttributeNS(de,Ae):tt.removeAttribute(`${Qe}:${Ae}`)}else tt.removeAttribute(Ae)}addClass(tt,Ae){tt.classList.add(Ae)}removeClass(tt,Ae){tt.classList.remove(Ae)}setStyle(tt,Ae,Qe,de){de&(R.czy.DashCase|R.czy.Important)?tt.style.setProperty(Ae,Qe,de&R.czy.Important?"important":""):tt.style[Ae]=Qe}removeStyle(tt,Ae,Qe){Qe&R.czy.DashCase?tt.style.removeProperty(Ae):tt.style[Ae]=""}setProperty(tt,Ae,Qe){null!=tt&&(tt[Ae]=Qe)}setValue(tt,Ae){tt.nodeValue=Ae}listen(tt,Ae,Qe){if("string"==typeof tt&&!(tt=(0,D.QT)().getGlobalEventTarget(this.doc,tt)))throw new Error(`Unsupported event target ${tt} for event ${Ae}`);return this.eventManager.addEventListener(tt,Ae,this.decoratePreventDefault(Qe))}decoratePreventDefault(tt){return Ae=>{if("__ngUnwrap__"===Ae)return tt;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>tt(Ae)):tt(Ae))&&Ae.preventDefault()}}}function gt(he){return"TEMPLATE"===he.tagName&&void 0!==he.content}class Yt extends Ht{constructor(tt,Ae,Qe,de,ge,Se,ht,qe){super(tt,ge,Se,qe),this.sharedStylesHost=Ae,this.hostEl=Qe,this.shadowRoot=Qe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Kt=kt(de.id,de.styles);for(const An of Kt){const Hn=document.createElement("style");ht&&Hn.setAttribute("nonce",ht),Hn.textContent=An,this.shadowRoot.appendChild(Hn)}}nodeOrShadowRoot(tt){return tt===this.hostEl?this.shadowRoot:tt}appendChild(tt,Ae){return super.appendChild(this.nodeOrShadowRoot(tt),Ae)}insertBefore(tt,Ae,Qe){return super.insertBefore(this.nodeOrShadowRoot(tt),Ae,Qe)}removeChild(tt,Ae){return super.removeChild(this.nodeOrShadowRoot(tt),Ae)}parentNode(tt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(tt)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class In extends Ht{constructor(tt,Ae,Qe,de,ge,Se,ht,qe){super(tt,ge,Se,ht),this.sharedStylesHost=Ae,this.removeStylesOnCompDestroy=de,this.styles=qe?kt(qe,Qe.styles):Qe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Je extends In{constructor(tt,Ae,Qe,de,ge,Se,ht,qe){const Kt=de+"-"+Qe.id;super(tt,Ae,Qe,ge,Se,ht,qe,Kt),this.contentAttr=function wt(he){return"_ngcontent-%COMP%".replace(Ut,he)}(Kt),this.hostAttr=function dt(he){return"_nghost-%COMP%".replace(Ut,he)}(Kt)}applyToHost(tt){this.applyStyles(),this.setAttribute(tt,this.hostAttr,"")}createElement(tt,Ae){const Qe=super.createElement(tt,Ae);return super.setAttribute(Qe,this.contentAttr,""),Qe}}let Xt=(()=>{class he extends Oe{constructor(Ae){super(Ae)}supports(Ae){return!0}addEventListener(Ae,Qe,de){return Ae.addEventListener(Qe,de,!1),()=>this.removeEventListener(Ae,Qe,de)}removeEventListener(Ae,Qe,de){return Ae.removeEventListener(Qe,de)}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(R.KVO(D.qQ))};static#t=this.\u0275prov=R.jDH({token:he,factory:he.\u0275fac})}return he})();const Tr=["alt","control","meta","shift"],ki={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ne={alt:he=>he.altKey,control:he=>he.ctrlKey,meta:he=>he.metaKey,shift:he=>he.shiftKey};let Ue=(()=>{class he extends Oe{constructor(Ae){super(Ae)}supports(Ae){return null!=he.parseEventName(Ae)}addEventListener(Ae,Qe,de){const ge=he.parseEventName(Qe),Se=he.eventCallback(ge.fullKey,de,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,D.QT)().onAndCancel(Ae,ge.domEventName,Se))}static parseEventName(Ae){const Qe=Ae.toLowerCase().split("."),de=Qe.shift();if(0===Qe.length||"keydown"!==de&&"keyup"!==de)return null;const ge=he._normalizeKey(Qe.pop());let Se="",ht=Qe.indexOf("code");if(ht>-1&&(Qe.splice(ht,1),Se="code."),Tr.forEach(Kt=>{const An=Qe.indexOf(Kt);An>-1&&(Qe.splice(An,1),Se+=Kt+".")}),Se+=ge,0!=Qe.length||0===ge.length)return null;const qe={};return qe.domEventName=de,qe.fullKey=Se,qe}static matchEventFullKeyCode(Ae,Qe){let de=ki[Ae.key]||Ae.key,ge="";return Qe.indexOf("code.")>-1&&(de=Ae.code,ge="code."),!(null==de||!de)&&(de=de.toLowerCase()," "===de?de="space":"."===de&&(de="dot"),Tr.forEach(Se=>{Se!==de&&(0,Ne[Se])(Ae)&&(ge+=Se+".")}),ge+=de,ge===Qe)}static eventCallback(Ae,Qe,de){return ge=>{he.matchEventFullKeyCode(ge,Ae)&&de.runGuarded(()=>Qe(ge))}}static _normalizeKey(Ae){return"esc"===Ae?"escape":Ae}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(R.KVO(D.qQ))};static#t=this.\u0275prov=R.jDH({token:he,factory:he.\u0275fac})}return he})();function bt(he,tt){return(0,R.TL3)({rootComponent:he,...le(tt)})}function le(he){return{appProviders:[...mr,...he?.providers??[]],platformProviders:nn}}const nn=[{provide:R.Agw,useValue:D.AJ},{provide:R.PLl,useValue:function _t(){We.makeCurrent()},multi:!0},{provide:D.qQ,useFactory:function Un(){return(0,R.TL$)(document),document},deps:[]}],mr=[{provide:R.H8p,useValue:"root"},{provide:R.zcH,useFactory:function Wt(){return new R.zcH},deps:[]},{provide:Ee,useClass:Xt,multi:!0,deps:[D.qQ,R.SKi,R.Agw]},{provide:Ee,useClass:Ue,multi:!0,deps:[D.qQ]},xt,ze,be,{provide:R._9s,useExisting:xt},{provide:D.N0,useClass:ct,deps:[]},[]];let Gr=(()=>{class he{constructor(Ae){this._doc=Ae}getTitle(){return this._doc.title}setTitle(Ae){this._doc.title=Ae||""}static#e=this.\u0275fac=function(Qe){return new(Qe||he)(R.KVO(D.qQ))};static#t=this.\u0275prov=R.jDH({token:he,factory:he.\u0275fac,providedIn:"root"})}return he})()},5379:(Cn,It,ie)=>{ie.d(It,{nX:()=>Ko,wF:()=>Io,Ix:()=>ra,iI:()=>zl,n3:()=>Wa,lh:()=>Ku,lG:()=>Qu,qQ:()=>Yu});var D=ie(467),R=ie(3953),V=ie(1985),We=ie(8071),ye=ie(8455),Ct=ie(3794);function Xe(...S){const U=(0,Ct.lI)(S);return(0,ye.H)(S,U)}var ct=ie(4412),Ee=ie(4572);const Oe=(0,ie(1853).L)(S=>function(){S(this),this.name="EmptyError",this.message="no elements in sequence"});var vt=ie(8793),ze=ie(8750);function At(S){return new V.c(U=>{(0,ze.Tg)(S()).subscribe(U)})}var Ut=ie(1203);function pn(S,U){const M=(0,We.T)(S)?S:()=>S,j=X=>X.error(M());return new V.c(U?X=>U.schedule(j,0,X):j)}const $t=new V.c(S=>S.complete());var Ot=ie(8359),wt=ie(9974),dt=ie(4360);function kt(){return(0,wt.N)((S,U)=>{let M=null;S._refCount++;const j=(0,dt._)(U,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(M=null);const X=S._connection,se=M;M=null,X&&(!se||X===se)&&X.unsubscribe(),U.unsubscribe()});S.subscribe(j),j.closed||(M=S.connect())})}class xt extends V.c{constructor(U,M){super(),this.source=U,this.subjectFactory=M,this._subject=null,this._refCount=0,this._connection=null,(0,wt.S)(U)&&(this.lift=U.lift)}_subscribe(U){return this.getSubject().subscribe(U)}getSubject(){const U=this._subject;return(!U||U.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:U}=this;this._subject=this._connection=null,U?.unsubscribe()}connect(){let U=this._connection;if(!U){U=this._connection=new Ot.yU;const M=this.getSubject();U.add(this.source.subscribe((0,dt._)(M,void 0,()=>{this._teardown(),M.complete()},j=>{this._teardown(),M.error(j)},()=>this._teardown()))),U.closed&&(this._connection=null,U=Ot.yU.EMPTY)}return U}refCount(){return kt()(this)}}var Ht=ie(1413),De=ie(177),tn=ie(6354);function gt(S,U){return(0,wt.N)((M,j)=>{let X=null,se=0,Ie=!1;const lt=()=>Ie&&!X&&j.complete();M.subscribe((0,dt._)(j,ke=>{X?.unsubscribe();let Bt=0;const hn=se++;(0,ze.Tg)(S(ke,hn)).subscribe(X=(0,dt._)(j,Mn=>j.next(U?U(ke,Mn,hn,Bt++):Mn),()=>{X=null,lt()}))},()=>{Ie=!0,lt()}))})}function Yt(S){return S<=0?()=>$t:(0,wt.N)((U,M)=>{let j=0;U.subscribe((0,dt._)(M,X=>{++j<=S&&(M.next(X),S<=j&&M.complete())}))})}var In=ie(9172);function Je(S,U){return(0,wt.N)((M,j)=>{let X=0;M.subscribe((0,dt._)(j,se=>S.call(U,se,X++)&&j.next(se)))})}var Xt=ie(1397);function Tr(S){return(0,wt.N)((U,M)=>{let j=!1;U.subscribe((0,dt._)(M,X=>{j=!0,M.next(X)},()=>{j||M.next(S),M.complete()}))})}function ki(S=Ne){return(0,wt.N)((U,M)=>{let j=!1;U.subscribe((0,dt._)(M,X=>{j=!0,M.next(X)},()=>j?M.complete():M.error(S())))})}function Ne(){return new Oe}var Ue=ie(3669);function bt(S,U){const M=arguments.length>=2;return j=>j.pipe(S?Je((X,se)=>S(X,se,j)):Ue.D,Yt(1),M?Tr(U):ki(()=>new Oe))}function Le(S,U){return(0,We.T)(U)?(0,Xt.Z)(S,U,1):(0,Xt.Z)(S,1)}var le=ie(8141);function pe(S){return(0,wt.N)((U,M)=>{let se,j=null,X=!1;j=U.subscribe((0,dt._)(M,void 0,void 0,Ie=>{se=(0,ze.Tg)(S(Ie,pe(S)(U))),j?(j.unsubscribe(),j=null,se.subscribe(M)):X=!0})),X&&(j.unsubscribe(),j=null,se.subscribe(M))})}function Un(S){return S<=0?()=>$t:(0,wt.N)((U,M)=>{let j=[];U.subscribe((0,dt._)(M,X=>{j.push(X),S<j.length&&j.shift()},()=>{for(const X of j)M.next(X);M.complete()},void 0,()=>{j=null}))})}function Pr(S){return(0,wt.N)((U,M)=>{try{U.subscribe(M)}finally{M.add(S)}})}var no=ie(5343),Br=ie(6365),Fi=ie(345);const ln="primary",Gr=Symbol("RouteTitle");class Dn{constructor(U){this.params=U||{}}has(U){return Object.prototype.hasOwnProperty.call(this.params,U)}get(U){if(this.has(U)){const M=this.params[U];return Array.isArray(M)?M[0]:M}return null}getAll(U){if(this.has(U)){const M=this.params[U];return Array.isArray(M)?M:[M]}return[]}get keys(){return Object.keys(this.params)}}function yr(S){return new Dn(S)}function ni(S,U,M){const j=M.path.split("/");if(j.length>S.length||"full"===M.pathMatch&&(U.hasChildren()||j.length<S.length))return null;const X={};for(let se=0;se<j.length;se++){const Ie=j[se],lt=S[se];if(":"===Ie[0])X[Ie.substring(1)]=lt;else if(Ie!==lt.path)return null}return{consumed:S.slice(0,j.length),posParams:X}}function sn(S,U){const M=S?Co(S):void 0,j=U?Co(U):void 0;if(!M||!j||M.length!=j.length)return!1;let X;for(let se=0;se<M.length;se++)if(X=M[se],!Pt(S[X],U[X]))return!1;return!0}function Co(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}function Pt(S,U){if(Array.isArray(S)&&Array.isArray(U)){if(S.length!==U.length)return!1;const M=[...S].sort(),j=[...U].sort();return M.every((X,se)=>j[se]===X)}return S===U}function sr(S){return S.length>0?S[S.length-1]:null}function an(S){return function nt(S){return!!S&&(S instanceof V.c||(0,We.T)(S.lift)&&(0,We.T)(S.subscribe))}(S)?S:(0,R.jNT)(S)?(0,ye.H)(Promise.resolve(S)):Xe(S)}const zt={exact:function ui(S,U,M){if(!Zr(S.segments,U.segments)||!jn(S.segments,U.segments,M)||S.numberOfChildren!==U.numberOfChildren)return!1;for(const j in U.children)if(!S.children[j]||!ui(S.children[j],U.children[j],M))return!1;return!0},subset:zr},$r={exact:function Nr(S,U){return sn(S,U)},subset:function li(S,U){return Object.keys(U).length<=Object.keys(S).length&&Object.keys(U).every(M=>Pt(S[M],U[M]))},ignored:()=>!0};function xi(S,U,M){return zt[M.paths](S.root,U.root,M.matrixParams)&&$r[M.queryParams](S.queryParams,U.queryParams)&&!("exact"===M.fragment&&S.fragment!==U.fragment)}function zr(S,U,M){return Li(S,U,U.segments,M)}function Li(S,U,M,j){if(S.segments.length>M.length){const X=S.segments.slice(0,M.length);return!(!Zr(X,M)||U.hasChildren()||!jn(X,M,j))}if(S.segments.length===M.length){if(!Zr(S.segments,M)||!jn(S.segments,M,j))return!1;for(const X in U.children)if(!S.children[X]||!zr(S.children[X],U.children[X],j))return!1;return!0}{const X=M.slice(0,S.segments.length),se=M.slice(S.segments.length);return!!(Zr(S.segments,X)&&jn(S.segments,X,j)&&S.children[ln])&&Li(S.children[ln],U,se,j)}}function jn(S,U,M){return U.every((j,X)=>$r[M](S[X].parameters,j.parameters))}class Po{constructor(U=new Wn([],{}),M={},j=null){this.root=U,this.queryParams=M,this.fragment=j}get queryParamMap(){return this._queryParamMap??=yr(this.queryParams),this._queryParamMap}toString(){return tt.serialize(this)}}class Wn{constructor(U,M){this.segments=U,this.children=M,this.parent=null,Object.values(M).forEach(j=>j.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ae(this)}}class gi{constructor(U,M){this.path=U,this.parameters=M}get parameterMap(){return this._parameterMap??=yr(this.parameters),this._parameterMap}toString(){return An(this)}}function Zr(S,U){return S.length===U.length&&S.every((M,j)=>M.path===U[j].path)}let fr=(()=>{class S{static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=R.jDH({token:S,factory:()=>new he,providedIn:"root"})}return S})();class he{parse(U){const M=new oo(U);return new Po(M.parseRootSegment(),M.parseQueryParams(),M.parseFragment())}serialize(U){const M=`/${Qe(U.root,!0)}`,j=function Xr(S){const U=Object.entries(S).map(([M,j])=>Array.isArray(j)?j.map(X=>`${ge(M)}=${ge(X)}`).join("&"):`${ge(M)}=${ge(j)}`).filter(M=>M);return U.length?`?${U.join("&")}`:""}(U.queryParams);return`${M}${j}${"string"==typeof U.fragment?`#${function Se(S){return encodeURI(S)}(U.fragment)}`:""}`}}const tt=new he;function Ae(S){return S.segments.map(U=>An(U)).join("/")}function Qe(S,U){if(!S.hasChildren())return Ae(S);if(U){const M=S.children[ln]?Qe(S.children[ln],!1):"",j=[];return Object.entries(S.children).forEach(([X,se])=>{X!==ln&&j.push(`${X}:${Qe(se,!1)}`)}),j.length>0?`${M}(${j.join("//")})`:M}{const M=function Si(S,U){let M=[];return Object.entries(S.children).forEach(([j,X])=>{j===ln&&(M=M.concat(U(X,j)))}),Object.entries(S.children).forEach(([j,X])=>{j!==ln&&(M=M.concat(U(X,j)))}),M}(S,(j,X)=>X===ln?[Qe(S.children[ln],!1)]:[`${X}:${Qe(j,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[ln]?`${Ae(S)}/${M[0]}`:`${Ae(S)}/(${M.join("//")})`}}function de(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ge(S){return de(S).replace(/%3B/gi,";")}function ht(S){return de(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qe(S){return decodeURIComponent(S)}function Kt(S){return qe(S.replace(/\+/g,"%20"))}function An(S){return`${ht(S.path)}${function Hn(S){return Object.entries(S).map(([U,M])=>`;${ht(U)}=${ht(M)}`).join("")}(S.parameters)}`}const wr=/^[^\/()?;#]+/;function ri(S){const U=S.match(wr);return U?U[0]:""}const qn=/^[^\/()?;=#]+/,Ur=/^[^=?&#]+/,Ns=/^[^&#]+/;class oo{constructor(U){this.url=U,this.remaining=U}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wn([],{}):new Wn([],this.parseChildren())}parseQueryParams(){const U={};if(this.consumeOptional("?"))do{this.parseQueryParam(U)}while(this.consumeOptional("&"));return U}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const U=[];for(this.peekStartsWith("(")||U.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),U.push(this.parseSegment());let M={};this.peekStartsWith("/(")&&(this.capture("/"),M=this.parseParens(!0));let j={};return this.peekStartsWith("(")&&(j=this.parseParens(!1)),(U.length>0||Object.keys(M).length>0)&&(j[ln]=new Wn(U,M)),j}parseSegment(){const U=ri(this.remaining);if(""===U&&this.peekStartsWith(";"))throw new R.wOt(4009,!1);return this.capture(U),new gi(qe(U),this.parseMatrixParams())}parseMatrixParams(){const U={};for(;this.consumeOptional(";");)this.parseParam(U);return U}parseParam(U){const M=function Vi(S){const U=S.match(qn);return U?U[0]:""}(this.remaining);if(!M)return;this.capture(M);let j="";if(this.consumeOptional("=")){const X=ri(this.remaining);X&&(j=X,this.capture(j))}U[qe(M)]=qe(j)}parseQueryParam(U){const M=function ii(S){const U=S.match(Ur);return U?U[0]:""}(this.remaining);if(!M)return;this.capture(M);let j="";if(this.consumeOptional("=")){const Ie=function po(S){const U=S.match(Ns);return U?U[0]:""}(this.remaining);Ie&&(j=Ie,this.capture(j))}const X=Kt(M),se=Kt(j);if(U.hasOwnProperty(X)){let Ie=U[X];Array.isArray(Ie)||(Ie=[Ie],U[X]=Ie),Ie.push(se)}else U[X]=se}parseParens(U){const M={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const j=ri(this.remaining),X=this.remaining[j.length];if("/"!==X&&")"!==X&&";"!==X)throw new R.wOt(4010,!1);let se;j.indexOf(":")>-1?(se=j.slice(0,j.indexOf(":")),this.capture(se),this.capture(":")):U&&(se=ln);const Ie=this.parseChildren();M[se]=1===Object.keys(Ie).length?Ie[ln]:new Wn([],Ie),this.consumeOptional("//")}return M}peekStartsWith(U){return this.remaining.startsWith(U)}consumeOptional(U){return!!this.peekStartsWith(U)&&(this.remaining=this.remaining.substring(U.length),!0)}capture(U){if(!this.consumeOptional(U))throw new R.wOt(4011,!1)}}function ms(S){return S.segments.length>0?new Wn([],{[ln]:S}):S}function hc(S){const U={};for(const[j,X]of Object.entries(S.children)){const se=hc(X);if(j===ln&&0===se.segments.length&&se.hasChildren())for(const[Ie,lt]of Object.entries(se.children))U[Ie]=lt;else(se.segments.length>0||se.hasChildren())&&(U[j]=se)}return function Sa(S){if(1===S.numberOfChildren&&S.children[ln]){const U=S.children[ln];return new Wn(S.segments.concat(U.segments),U.children)}return S}(new Wn(S.segments,U))}function Da(S){return S instanceof Po}function $e(S){let U;const X=ms(function M(se){const Ie={};for(const ke of se.children){const Bt=M(ke);Ie[ke.outlet]=Bt}const lt=new Wn(se.url,Ie);return se===S&&(U=lt),lt}(S.root));return U??X}function St(S,U,M,j){let X=S;for(;X.parent;)X=X.parent;if(0===U.length)return Rn(X,X,X,M,j);const se=function jr(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new Ir(!0,0,S);let U=0,M=!1;const j=S.reduce((X,se,Ie)=>{if("object"==typeof se&&null!=se){if(se.outlets){const lt={};return Object.entries(se.outlets).forEach(([ke,Bt])=>{lt[ke]="string"==typeof Bt?Bt.split("/"):Bt}),[...X,{outlets:lt}]}if(se.segmentPath)return[...X,se.segmentPath]}return"string"!=typeof se?[...X,se]:0===Ie?(se.split("/").forEach((lt,ke)=>{0==ke&&"."===lt||(0==ke&&""===lt?M=!0:".."===lt?U++:""!=lt&&X.push(lt))}),X):[...X,se]},[]);return new Ir(M,U,j)}(U);if(se.toRoot())return Rn(X,X,new Wn([],{}),M,j);const Ie=function No(S,U,M){if(S.isAbsolute)return new Gi(U,!0,0);if(!M)return new Gi(U,!1,NaN);if(null===M.parent)return new Gi(M,!0,0);const j=rn(S.commands[0])?0:1;return function Qr(S,U,M){let j=S,X=U,se=M;for(;se>X;){if(se-=X,j=j.parent,!j)throw new R.wOt(4005,!1);X=j.segments.length}return new Gi(j,!1,X-se)}(M,M.segments.length-1+j,S.numberOfDoubleDots)}(se,X,S),lt=Ie.processChildren?Ra(Ie.segmentGroup,Ie.index,se.commands):aa(Ie.segmentGroup,Ie.index,se.commands);return Rn(X,Ie.segmentGroup,lt,M,j)}function rn(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function Ln(S){return"object"==typeof S&&null!=S&&S.outlets}function Rn(S,U,M,j,X){let Ie,se={};j&&Object.entries(j).forEach(([ke,Bt])=>{se[ke]=Array.isArray(Bt)?Bt.map(hn=>`${hn}`):`${Bt}`}),Ie=S===U?M:kn(S,U,M);const lt=ms(hc(Ie));return new Po(lt,se,X)}function kn(S,U,M){const j={};return Object.entries(S.children).forEach(([X,se])=>{j[X]=se===U?M:kn(se,U,M)}),new Wn(S.segments,j)}class Ir{constructor(U,M,j){if(this.isAbsolute=U,this.numberOfDoubleDots=M,this.commands=j,U&&j.length>0&&rn(j[0]))throw new R.wOt(4003,!1);const X=j.find(Ln);if(X&&X!==sr(j))throw new R.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gi{constructor(U,M,j){this.segmentGroup=U,this.processChildren=M,this.index=j}}function aa(S,U,M){if(S??=new Wn([],{}),0===S.segments.length&&S.hasChildren())return Ra(S,U,M);const j=function Ha(S,U,M){let j=0,X=U;const se={match:!1,pathIndex:0,commandIndex:0};for(;X<S.segments.length;){if(j>=M.length)return se;const Ie=S.segments[X],lt=M[j];if(Ln(lt))break;const ke=`${lt}`,Bt=j<M.length-1?M[j+1]:null;if(X>0&&void 0===ke)break;if(ke&&Bt&&"object"==typeof Bt&&void 0===Bt.outlets){if(!ca(ke,Bt,Ie))return se;j+=2}else{if(!ca(ke,{},Ie))return se;j++}X++}return{match:!0,pathIndex:X,commandIndex:j}}(S,U,M),X=M.slice(j.commandIndex);if(j.match&&j.pathIndex<S.segments.length){const se=new Wn(S.segments.slice(0,j.pathIndex),{});return se.children[ln]=new Wn(S.segments.slice(j.pathIndex),S.children),Ra(se,0,X)}return j.match&&0===X.length?new Wn(S.segments,{}):j.match&&!S.hasChildren()?Fc(S,U,M):j.match?Ra(S,0,X):Fc(S,U,M)}function Ra(S,U,M){if(0===M.length)return new Wn(S.segments,{});{const j=function pc(S){return Ln(S[0])?S[0].outlets:{[ln]:S}}(M),X={};if(Object.keys(j).some(se=>se!==ln)&&S.children[ln]&&1===S.numberOfChildren&&0===S.children[ln].segments.length){const se=Ra(S.children[ln],U,M);return new Wn(S.segments,se.children)}return Object.entries(j).forEach(([se,Ie])=>{"string"==typeof Ie&&(Ie=[Ie]),null!==Ie&&(X[se]=aa(S.children[se],U,Ie))}),Object.entries(S.children).forEach(([se,Ie])=>{void 0===j[se]&&(X[se]=Ie)}),new Wn(S.segments,X)}}function Fc(S,U,M){const j=S.segments.slice(0,U);let X=0;for(;X<M.length;){const se=M[X];if(Ln(se)){const ke=Lc(se.outlets);return new Wn(j,ke)}if(0===X&&rn(M[0])){j.push(new gi(S.segments[U].path,gc(M[0]))),X++;continue}const Ie=Ln(se)?se.outlets[ln]:`${se}`,lt=X<M.length-1?M[X+1]:null;Ie&&lt&&rn(lt)?(j.push(new gi(Ie,gc(lt))),X+=2):(j.push(new gi(Ie,{})),X++)}return new Wn(j,{})}function Lc(S){const U={};return Object.entries(S).forEach(([M,j])=>{"string"==typeof j&&(j=[j]),null!==j&&(U[M]=Fc(new Wn([],{}),0,j))}),U}function gc(S){const U={};return Object.entries(S).forEach(([M,j])=>U[M]=`${j}`),U}function ca(S,U,M){return S==M.path&&sn(U,M.parameters)}const oi="imperative";var or=function(S){return S[S.NavigationStart=0]="NavigationStart",S[S.NavigationEnd=1]="NavigationEnd",S[S.NavigationCancel=2]="NavigationCancel",S[S.NavigationError=3]="NavigationError",S[S.RoutesRecognized=4]="RoutesRecognized",S[S.ResolveStart=5]="ResolveStart",S[S.ResolveEnd=6]="ResolveEnd",S[S.GuardsCheckStart=7]="GuardsCheckStart",S[S.GuardsCheckEnd=8]="GuardsCheckEnd",S[S.RouteConfigLoadStart=9]="RouteConfigLoadStart",S[S.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",S[S.ChildActivationStart=11]="ChildActivationStart",S[S.ChildActivationEnd=12]="ChildActivationEnd",S[S.ActivationStart=13]="ActivationStart",S[S.ActivationEnd=14]="ActivationEnd",S[S.Scroll=15]="Scroll",S[S.NavigationSkipped=16]="NavigationSkipped",S}(or||{});class Bi{constructor(U,M){this.id=U,this.url=M}}class Ma extends Bi{constructor(U,M,j="imperative",X=null){super(U,M),this.type=or.NavigationStart,this.navigationTrigger=j,this.restoredState=X}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Io extends Bi{constructor(U,M,j){super(U,M),this.urlAfterRedirects=j,this.type=or.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Zn=function(S){return S[S.Redirect=0]="Redirect",S[S.SupersededByNewNavigation=1]="SupersededByNewNavigation",S[S.NoDataFromResolver=2]="NoDataFromResolver",S[S.GuardRejected=3]="GuardRejected",S}(Zn||{}),Js=function(S){return S[S.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",S[S.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",S}(Js||{});class di extends Bi{constructor(U,M,j,X){super(U,M),this.reason=j,this.code=X,this.type=or.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bn extends Bi{constructor(U,M,j,X){super(U,M),this.reason=j,this.code=X,this.type=or.NavigationSkipped}}class ea extends Bi{constructor(U,M,j,X){super(U,M),this.error=j,this.target=X,this.type=or.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $i extends Bi{constructor(U,M,j,X){super(U,M),this.urlAfterRedirects=j,this.state=X,this.type=or.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Di extends Bi{constructor(U,M,j,X){super(U,M),this.urlAfterRedirects=j,this.state=X,this.type=or.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ks extends Bi{constructor(U,M,j,X,se){super(U,M),this.urlAfterRedirects=j,this.state=X,this.shouldActivate=se,this.type=or.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ul extends Bi{constructor(U,M,j,X){super(U,M),this.urlAfterRedirects=j,this.state=X,this.type=or.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ui extends Bi{constructor(U,M,j,X){super(U,M),this.urlAfterRedirects=j,this.state=X,this.type=or.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ko{constructor(U){this.route=U,this.type=or.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qo{constructor(U){this.route=U,this.type=or.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ri{constructor(U){this.snapshot=U,this.type=or.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _s{constructor(U){this.snapshot=U,this.type=or.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vc{constructor(U){this.snapshot=U,this.type=or.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oa{constructor(U){this.snapshot=U,this.type=or.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fo{constructor(U,M,j){this.routerEvent=U,this.position=M,this.anchor=j,this.type=or.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ua{}class es{constructor(U,M){this.url=U,this.navigationBehaviorOptions=M}}class Ga{constructor(U){this.injector=U,this.outlet=null,this.route=null,this.children=new Lo(this.injector),this.attachRef=null}}let Lo=(()=>{class S{constructor(M){this.parentInjector=M,this.contexts=new Map}onChildOutletCreated(M,j){const X=this.getOrCreateContext(M);X.outlet=j,this.contexts.set(M,X)}onChildOutletDestroyed(M){const j=this.getContext(M);j&&(j.outlet=null,j.attachRef=null)}onOutletDeactivated(){const M=this.contexts;return this.contexts=new Map,M}onOutletReAttached(M){this.contexts=M}getOrCreateContext(M){let j=this.getContext(M);return j||(j=new Ga(this.parentInjector),this.contexts.set(M,j)),j}getContext(M){return this.contexts.get(M)||null}static#e=this.\u0275fac=function(j){return new(j||S)(R.KVO(R.uvJ))};static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();class so{constructor(U){this._root=U}get root(){return this._root.value}parent(U){const M=this.pathFromRoot(U);return M.length>1?M[M.length-2]:null}children(U){const M=ys(U,this._root);return M?M.children.map(j=>j.value):[]}firstChild(U){const M=ys(U,this._root);return M&&M.children.length>0?M.children[0].value:null}siblings(U){const M=Es(U,this._root);return M.length<2?[]:M[M.length-2].children.map(X=>X.value).filter(X=>X!==U)}pathFromRoot(U){return Es(U,this._root).map(M=>M.value)}}function ys(S,U){if(S===U.value)return U;for(const M of U.children){const j=ys(S,M);if(j)return j}return null}function Es(S,U){if(S===U.value)return[U];for(const M of U.children){const j=Es(S,M);if(j.length)return j.unshift(U),j}return[]}class ao{constructor(U,M){this.value=U,this.children=M}toString(){return`TreeNode(${this.value})`}}function ts(S){const U={};return S&&S.children.forEach(M=>U[M.value.outlet]=M),U}class Pa extends so{constructor(U,M){super(U),this.snapshot=M,Na(this,U)}toString(){return this.snapshot.toString()}}function $a(S){const U=function Vo(S){const se=new mc([],{},{},"",{},ln,S,null,{});return new go("",new ao(se,[]))}(S),M=new ct.t([new gi("",{})]),j=new ct.t({}),X=new ct.t({}),se=new ct.t({}),Ie=new ct.t(""),lt=new Ko(M,j,se,Ie,X,ln,S,U.root);return lt.snapshot=U.root,new Pa(new ao(lt,[]),U)}class Ko{constructor(U,M,j,X,se,Ie,lt,ke){this.urlSubject=U,this.paramsSubject=M,this.queryParamsSubject=j,this.fragmentSubject=X,this.dataSubject=se,this.outlet=Ie,this.component=lt,this._futureSnapshot=ke,this.title=this.dataSubject?.pipe((0,tn.T)(Bt=>Bt[Gr]))??Xe(void 0),this.url=U,this.params=M,this.queryParams=j,this.fragment=X,this.data=se}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,tn.T)(U=>yr(U))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,tn.T)(U=>yr(U))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ns(S,U,M="emptyOnly"){let j;const{routeConfig:X}=S;return j=null===U||"always"!==M&&""!==X?.path&&(U.component||U.routeConfig?.loadComponent)?{params:{...S.params},data:{...S.data},resolve:{...S.data,...S._resolvedData??{}}}:{params:{...U.params,...S.params},data:{...U.data,...S.data},resolve:{...S.data,...U.data,...X?.data,...S._resolvedData}},X&&za(X)&&(j.resolve[Gr]=X.title),j}class mc{get title(){return this.data?.[Gr]}constructor(U,M,j,X,se,Ie,lt,ke,Bt){this.url=U,this.params=M,this.queryParams=j,this.fragment=X,this.data=se,this.outlet=Ie,this.component=lt,this.routeConfig=ke,this._resolve=Bt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yr(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(j=>j.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class go extends so{constructor(U,M){super(M),this.url=U,Na(this,M)}toString(){return rs(this._root)}}function Na(S,U){U.value._routerState=S,U.children.forEach(M=>Na(S,M))}function rs(S){const U=S.children.length>0?` { ${S.children.map(rs).join(", ")} } `:"";return`${S.value}${U}`}function la(S){if(S.snapshot){const U=S.snapshot,M=S._futureSnapshot;S.snapshot=M,sn(U.queryParams,M.queryParams)||S.queryParamsSubject.next(M.queryParams),U.fragment!==M.fragment&&S.fragmentSubject.next(M.fragment),sn(U.params,M.params)||S.paramsSubject.next(M.params),function lr(S,U){if(S.length!==U.length)return!1;for(let M=0;M<S.length;++M)if(!sn(S[M],U[M]))return!1;return!0}(U.url,M.url)||S.urlSubject.next(M.url),sn(U.data,M.data)||S.dataSubject.next(M.data)}else S.snapshot=S._futureSnapshot,S.dataSubject.next(S._futureSnapshot.data)}function mo(S,U){const M=sn(S.params,U.params)&&function Wo(S,U){return Zr(S,U)&&S.every((M,j)=>sn(M.parameters,U[j].parameters))}(S.url,U.url);return M&&!(!S.parent!=!U.parent)&&(!S.parent||mo(S.parent,U.parent))}function za(S){return"string"==typeof S.title||null===S.title}let Wa=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=ln,this.activateEvents=new R.bkB,this.deactivateEvents=new R.bkB,this.attachEvents=new R.bkB,this.detachEvents=new R.bkB,this.parentContexts=(0,R.WQX)(Lo),this.location=(0,R.WQX)(R.c1b),this.changeDetector=(0,R.WQX)(R.gRc),this.inputBinder=(0,R.WQX)(Qi,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(M){if(M.name){const{firstChange:j,previousValue:X}=M.name;if(j)return;this.isTrackedInParentContexts(X)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(X)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(M){return this.parentContexts.getContext(M)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const M=this.parentContexts.getContext(this.name);M?.route&&(M.attachRef?this.attach(M.attachRef,M.route):this.activateWith(M.route,M.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R.wOt(4012,!1);this.location.detach();const M=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(M.instance),M}attach(M,j){this.activated=M,this._activatedRoute=j,this.location.insert(M.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(M.instance)}deactivate(){if(this.activated){const M=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(M)}}activateWith(M,j){if(this.isActivated)throw new R.wOt(4013,!1);this._activatedRoute=M;const X=this.location,Ie=M.snapshot.component,lt=this.parentContexts.getOrCreateContext(this.name).children,ke=new Xo(M,lt,X.injector);this.activated=X.createComponent(Ie,{index:X.length,injector:ke,environmentInjector:j}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275dir=R.FsC({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[R.OA$]})}return S})();class Xo{__ngOutletInjector(U){return new Xo(this.route,this.childContexts,U)}constructor(U,M,j){this.route=U,this.childContexts=M,this.parent=j}get(U,M){return U===Ko?this.route:U===Lo?this.childContexts:this.parent.get(U,M)}}const Qi=new R.nKC("");let _c=(()=>{class S{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(M){this.unsubscribeFromRouteData(M),this.subscribeToRouteData(M)}unsubscribeFromRouteData(M){this.outletDataSubscriptions.get(M)?.unsubscribe(),this.outletDataSubscriptions.delete(M)}subscribeToRouteData(M){const{activatedRoute:j}=M,X=(0,Ee.z)([j.queryParams,j.params,j.data]).pipe(gt(([se,Ie,lt],ke)=>(lt={...se,...Ie,...lt},0===ke?Xe(lt):Promise.resolve(lt)))).subscribe(se=>{if(!M.isActivated||!M.activatedComponentRef||M.activatedRoute!==j||null===j.component)return void this.unsubscribeFromRouteData(M);const Ie=(0,R.HJs)(j.component);if(Ie)for(const{templateName:lt}of Ie.inputs)M.activatedComponentRef.setInput(lt,se[lt]);else this.unsubscribeFromRouteData(M)});this.outletDataSubscriptions.set(M,X)}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac})}return S})();function zi(S,U,M){if(M&&S.shouldReuseRoute(U.value,M.value.snapshot)){const j=M.value;j._futureSnapshot=U.value;const X=function Gu(S,U,M){return U.children.map(j=>{for(const X of M.children)if(S.shouldReuseRoute(j.value,X.value.snapshot))return zi(S,j,X);return zi(S,j)})}(S,U,M);return new ao(j,X)}{if(S.shouldAttach(U.value)){const se=S.retrieve(U.value);if(null!==se){const Ie=se.route;return Ie.value._futureSnapshot=U.value,Ie.children=U.children.map(lt=>zi(S,lt)),Ie}}const j=function qa(S){return new Ko(new ct.t(S.url),new ct.t(S.params),new ct.t(S.queryParams),new ct.t(S.fragment),new ct.t(S.data),S.outlet,S.component,S)}(U.value),X=U.children.map(se=>zi(S,se));return new ao(j,X)}}class Ka{constructor(U,M){this.redirectTo=U,this.navigationBehaviorOptions=M}}const Bc="ngNavigationCancelingError";function on(S,U){const{redirectTo:M,navigationBehaviorOptions:j}=Da(U)?{redirectTo:U,navigationBehaviorOptions:void 0}:U,X=Gn(!1,Zn.Redirect);return X.url=M,X.navigationBehaviorOptions=j,X}function Gn(S,U){const M=new Error(`NavigationCancelingError: ${S||""}`);return M[Bc]=!0,M.cancellationCode=U,M}function Fs(S){return!!S&&S[Bc]}let da=(()=>{class S{static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275cmp=R.VBU({type:S,selectors:[["ng-component"]],standalone:!0,features:[R.aNF],decls:1,vars:0,template:function(j,X){1&j&&R.nrm(0,"router-outlet")},dependencies:[Wa],encapsulation:2})}return S})();function Vs(S){const U=S.children&&S.children.map(Vs),M=U?{...S,children:U}:{...S};return!M.component&&!M.loadComponent&&(U||M.loadChildren)&&M.outlet&&M.outlet!==ln&&(M.component=da),M}function xr(S){return S.outlet||ln}function jc(S){if(!S)return null;if(S.routeConfig?._injector)return S.routeConfig._injector;for(let U=S.parent;U;U=U.parent){const M=U.routeConfig;if(M?._loadedInjector)return M._loadedInjector;if(M?._injector)return M._injector}return null}class Sr{constructor(U,M,j,X,se){this.routeReuseStrategy=U,this.futureState=M,this.currState=j,this.forwardEvent=X,this.inputBindingEnabled=se}activate(U){const M=this.futureState._root,j=this.currState?this.currState._root:null;this.deactivateChildRoutes(M,j,U),la(this.futureState.root),this.activateChildRoutes(M,j,U)}deactivateChildRoutes(U,M,j){const X=ts(M);U.children.forEach(se=>{const Ie=se.value.outlet;this.deactivateRoutes(se,X[Ie],j),delete X[Ie]}),Object.values(X).forEach(se=>{this.deactivateRouteAndItsChildren(se,j)})}deactivateRoutes(U,M,j){const X=U.value,se=M?M.value:null;if(X===se)if(X.component){const Ie=j.getContext(X.outlet);Ie&&this.deactivateChildRoutes(U,M,Ie.children)}else this.deactivateChildRoutes(U,M,j);else se&&this.deactivateRouteAndItsChildren(M,j)}deactivateRouteAndItsChildren(U,M){U.value.component&&this.routeReuseStrategy.shouldDetach(U.value.snapshot)?this.detachAndStoreRouteSubtree(U,M):this.deactivateRouteAndOutlet(U,M)}detachAndStoreRouteSubtree(U,M){const j=M.getContext(U.value.outlet),X=j&&U.value.component?j.children:M,se=ts(U);for(const Ie of Object.values(se))this.deactivateRouteAndItsChildren(Ie,X);if(j&&j.outlet){const Ie=j.outlet.detach(),lt=j.children.onOutletDeactivated();this.routeReuseStrategy.store(U.value.snapshot,{componentRef:Ie,route:U,contexts:lt})}}deactivateRouteAndOutlet(U,M){const j=M.getContext(U.value.outlet),X=j&&U.value.component?j.children:M,se=ts(U);for(const Ie of Object.values(se))this.deactivateRouteAndItsChildren(Ie,X);j&&(j.outlet&&(j.outlet.deactivate(),j.children.onOutletDeactivated()),j.attachRef=null,j.route=null)}activateChildRoutes(U,M,j){const X=ts(M);U.children.forEach(se=>{this.activateRoutes(se,X[se.value.outlet],j),this.forwardEvent(new Oa(se.value.snapshot))}),U.children.length&&this.forwardEvent(new _s(U.value.snapshot))}activateRoutes(U,M,j){const X=U.value,se=M?M.value:null;if(la(X),X===se)if(X.component){const Ie=j.getOrCreateContext(X.outlet);this.activateChildRoutes(U,M,Ie.children)}else this.activateChildRoutes(U,M,j);else if(X.component){const Ie=j.getOrCreateContext(X.outlet);if(this.routeReuseStrategy.shouldAttach(X.snapshot)){const lt=this.routeReuseStrategy.retrieve(X.snapshot);this.routeReuseStrategy.store(X.snapshot,null),Ie.children.onOutletReAttached(lt.contexts),Ie.attachRef=lt.componentRef,Ie.route=lt.route.value,Ie.outlet&&Ie.outlet.attach(lt.componentRef,lt.route.value),la(lt.route.value),this.activateChildRoutes(U,null,Ie.children)}else{const lt=jc(X.snapshot);Ie.attachRef=null,Ie.route=X,Ie.injector=lt??Ie.injector,Ie.outlet&&Ie.outlet.activateWith(X,Ie.injector),this.activateChildRoutes(U,null,Ie.children)}}else this.activateChildRoutes(U,null,j)}}class is{constructor(U){this.path=U,this.route=this.path[this.path.length-1]}}class Gc{constructor(U,M){this.component=U,this.route=M}}function $c(S,U,M){const j=S._root;return Cs(j,U?U._root:null,M,[j.value])}function On(S,U){const M=Symbol(),j=U.get(S,M);return j===M?"function"!=typeof S||(0,R.LfX)(S)?U.get(S):S:j}function Cs(S,U,M,j,X={canDeactivateChecks:[],canActivateChecks:[]}){const se=ts(U);return S.children.forEach(Ie=>{(function Yi(S,U,M,j,X={canDeactivateChecks:[],canActivateChecks:[]}){const se=S.value,Ie=U?U.value:null,lt=M?M.getContext(S.value.outlet):null;if(Ie&&se.routeConfig===Ie.routeConfig){const ke=function mu(S,U,M){if("function"==typeof M)return M(S,U);switch(M){case"pathParamsChange":return!Zr(S.url,U.url);case"pathParamsOrQueryParamsChange":return!Zr(S.url,U.url)||!sn(S.queryParams,U.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mo(S,U)||!sn(S.queryParams,U.queryParams);default:return!mo(S,U)}}(Ie,se,se.routeConfig.runGuardsAndResolvers);ke?X.canActivateChecks.push(new is(j)):(se.data=Ie.data,se._resolvedData=Ie._resolvedData),Cs(S,U,se.component?lt?lt.children:null:M,j,X),ke&&lt&&lt.outlet&&lt.outlet.isActivated&&X.canDeactivateChecks.push(new Gc(lt.outlet.component,Ie))}else Ie&&Bo(U,lt,X),X.canActivateChecks.push(new is(j)),Cs(S,null,se.component?lt?lt.children:null:M,j,X)})(Ie,se[Ie.value.outlet],M,j.concat([Ie.value]),X),delete se[Ie.value.outlet]}),Object.entries(se).forEach(([Ie,lt])=>Bo(lt,M.getContext(Ie),X)),X}function Bo(S,U,M){const j=ts(S),X=S.value;Object.entries(j).forEach(([se,Ie])=>{Bo(Ie,X.component?U?U.children.getContext(se):null:U,M)}),M.canDeactivateChecks.push(new Gc(X.component&&U&&U.outlet&&U.outlet.isActivated?U.outlet.component:null,X))}function kr(S){return"function"==typeof S}function Z(S){return S instanceof Oe||"EmptyError"===S?.name}const H=Symbol("INITIAL_VALUE");function oe(){return gt(S=>(0,Ee.z)(S.map(U=>U.pipe(Yt(1),(0,In.Z)(H)))).pipe((0,tn.T)(U=>{for(const M of U)if(!0!==M){if(M===H)return H;if(!1===M||Te(M))return M}return!0}),Je(U=>U!==H),Yt(1)))}function Te(S){return Da(S)||S instanceof Ka}function qr(S){return(0,Ut.F)((0,le.M)(U=>{if("boolean"!=typeof U)throw on(0,U)}),(0,tn.T)(U=>!0===U))}class Ec{constructor(U){this.segmentGroup=U||null}}class yn extends Error{constructor(U){super(),this.urlTree=U}}function As(S){return pn(new Ec(S))}class mi{constructor(U,M){this.urlSerializer=U,this.urlTree=M}lineralizeSegments(U,M){let j=[],X=M.root;for(;;){if(j=j.concat(X.segments),0===X.numberOfChildren)return Xe(j);if(X.numberOfChildren>1||!X.children[ln])return pn(new R.wOt(4e3,!1));X=X.children[ln]}}applyRedirectCommands(U,M,j,X,se){if("string"!=typeof M){const lt=M,{queryParams:ke,fragment:Bt,routeConfig:hn,url:Mn,outlet:Pn,params:va,data:xo,title:ya}=X,Hs=(0,R.N4e)(se,()=>lt({params:va,data:xo,queryParams:ke,fragment:Bt,routeConfig:hn,url:Mn,outlet:Pn,title:ya}));if(Hs instanceof Po)throw new yn(Hs);M=Hs}const Ie=this.applyRedirectCreateUrlTree(M,this.urlSerializer.parse(M),U,j);if("/"===M[0])throw new yn(Ie);return Ie}applyRedirectCreateUrlTree(U,M,j,X){const se=this.createSegmentGroup(U,M.root,j,X);return new Po(se,this.createQueryParams(M.queryParams,this.urlTree.queryParams),M.fragment)}createQueryParams(U,M){const j={};return Object.entries(U).forEach(([X,se])=>{if("string"==typeof se&&":"===se[0]){const lt=se.substring(1);j[X]=M[lt]}else j[X]=se}),j}createSegmentGroup(U,M,j,X){const se=this.createSegments(U,M.segments,j,X);let Ie={};return Object.entries(M.children).forEach(([lt,ke])=>{Ie[lt]=this.createSegmentGroup(U,ke,j,X)}),new Wn(se,Ie)}createSegments(U,M,j,X){return M.map(se=>":"===se.path[0]?this.findPosParam(U,se,X):this.findOrReturn(se,j))}findPosParam(U,M,j){const X=j[M.path.substring(1)];if(!X)throw new R.wOt(4001,!1);return X}findOrReturn(U,M){let j=0;for(const X of M){if(X.path===U.path)return M.splice(j),X;j++}return U}}const tr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zc(S,U,M,j,X){const se=yu(S,U,M);return se.matched?(j=function fa(S,U){return S.providers&&!S._injector&&(S._injector=(0,R.Ol2)(S.providers,U,`Route: ${S.path}`)),S._injector??U}(U,j),function js(S,U,M,j){const X=U.canMatch;return X&&0!==X.length?Xe(X.map(Ie=>{const lt=On(Ie,S);return an(function Y(S){return S&&kr(S.canMatch)}(lt)?lt.canMatch(U,M):(0,R.N4e)(S,()=>lt(U,M)))})).pipe(oe(),qr()):Xe(!0)}(j,U,M).pipe((0,tn.T)(Ie=>!0===Ie?se:{...tr}))):Xe(se)}function yu(S,U,M){if("**"===U.path)return function Hr(S){return{matched:!0,parameters:S.length>0?sr(S).parameters:{},consumedSegments:S,remainingSegments:[],positionalParamSegments:{}}}(M);if(""===U.path)return"full"===U.pathMatch&&(S.hasChildren()||M.length>0)?{...tr}:{matched:!0,consumedSegments:[],remainingSegments:M,parameters:{},positionalParamSegments:{}};const X=(U.matcher||ni)(M,S,U);if(!X)return{...tr};const se={};Object.entries(X.posParams??{}).forEach(([lt,ke])=>{se[lt]=ke.path});const Ie=X.consumed.length>0?{...se,...X.consumed[X.consumed.length-1].parameters}:se;return{matched:!0,consumedSegments:X.consumed,remainingSegments:M.slice(X.consumed.length),parameters:Ie,positionalParamSegments:X.posParams??{}}}function zu(S,U,M,j){return M.length>0&&function Eu(S,U,M){return M.some(j=>wu(S,U,j)&&xr(j)!==ln)}(S,M,j)?{segmentGroup:new Wn(U,wc(j,new Wn(M,S.children))),slicedSegments:[]}:0===M.length&&function Qa(S,U,M){return M.some(j=>wu(S,U,j))}(S,M,j)?{segmentGroup:new Wn(S.segments,Wu(S,M,j,S.children)),slicedSegments:M}:{segmentGroup:new Wn(S.segments,S.children),slicedSegments:M}}function Wu(S,U,M,j){const X={};for(const se of M)if(wu(S,U,se)&&!j[xr(se)]){const Ie=new Wn([],{});X[xr(se)]=Ie}return{...j,...X}}function wc(S,U){const M={};M[ln]=U;for(const j of S)if(""===j.path&&xr(j)!==ln){const X=new Wn([],{});M[xr(j)]=X}return M}function wu(S,U,M){return(!(S.hasChildren()||U.length>0)||"full"!==M.pathMatch)&&""===M.path}class Yr{}class Ya{constructor(U,M,j,X,se,Ie,lt){this.injector=U,this.configLoader=M,this.rootComponentType=j,this.config=X,this.urlTree=se,this.paramsInheritanceStrategy=Ie,this.urlSerializer=lt,this.applyRedirects=new mi(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(U){return new R.wOt(4002,`'${U.segmentGroup}'`)}recognize(){const U=zu(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(U).pipe((0,tn.T)(({children:M,rootSnapshot:j})=>{const X=new ao(j,M),se=new go("",X),Ie=function Et(S,U,M=null,j=null){return St($e(S),U,M,j)}(j,[],this.urlTree.queryParams,this.urlTree.fragment);return Ie.queryParams=this.urlTree.queryParams,se.url=this.urlSerializer.serialize(Ie),{state:se,tree:Ie}}))}match(U){const M=new mc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),ln,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,U,ln,M).pipe((0,tn.T)(j=>({children:j,rootSnapshot:M})),pe(j=>{if(j instanceof yn)return this.urlTree=j.urlTree,this.match(j.urlTree.root);throw j instanceof Ec?this.noMatchError(j):j}))}processSegmentGroup(U,M,j,X,se){return 0===j.segments.length&&j.hasChildren()?this.processChildren(U,M,j,se):this.processSegment(U,M,j,j.segments,X,!0,se).pipe((0,tn.T)(Ie=>Ie instanceof ao?[Ie]:[]))}processChildren(U,M,j,X){const se=[];for(const Ie of Object.keys(j.children))"primary"===Ie?se.unshift(Ie):se.push(Ie);return(0,ye.H)(se).pipe(Le(Ie=>{const lt=j.children[Ie],ke=function Uc(S,U){const M=S.filter(j=>xr(j)===U);return M.push(...S.filter(j=>xr(j)!==U)),M}(M,Ie);return this.processSegmentGroup(U,ke,lt,Ie,X)}),function Wt(S,U){return(0,wt.N)(function _t(S,U,M,j,X){return(se,Ie)=>{let lt=M,ke=U,Bt=0;se.subscribe((0,dt._)(Ie,hn=>{const Mn=Bt++;ke=lt?S(ke,hn,Mn):(lt=!0,hn),j&&Ie.next(ke)},X&&(()=>{lt&&Ie.next(ke),Ie.complete()})))}}(S,U,arguments.length>=2,!0))}((Ie,lt)=>(Ie.push(...lt),Ie)),Tr(null),function nn(S,U){const M=arguments.length>=2;return j=>j.pipe(S?Je((X,se)=>S(X,se,j)):Ue.D,Un(1),M?Tr(U):ki(()=>new Oe))}(),(0,Xt.Z)(Ie=>{if(null===Ie)return As(j);const lt=Vn(Ie);return function _i(S){S.sort((U,M)=>U.value.outlet===ln?-1:M.value.outlet===ln?1:U.value.outlet.localeCompare(M.value.outlet))}(lt),Xe(lt)}))}processSegment(U,M,j,X,se,Ie,lt){return(0,ye.H)(M).pipe(Le(ke=>this.processSegmentAgainstRoute(ke._injector??U,M,ke,j,X,se,Ie,lt).pipe(pe(Bt=>{if(Bt instanceof Ec)return Xe(null);throw Bt}))),bt(ke=>!!ke),pe(ke=>{if(Z(ke))return function Cc(S,U,M){return 0===U.length&&!S.children[M]}(j,X,se)?Xe(new Yr):As(j);throw ke}))}processSegmentAgainstRoute(U,M,j,X,se,Ie,lt,ke){return function Cu(S,U,M,j){return!!(xr(S)===j||j!==ln&&wu(U,M,S))&&yu(U,S,M).matched}(j,X,se,Ie)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(U,X,j,se,Ie,ke):this.allowRedirects&&lt?this.expandSegmentAgainstRouteUsingRedirect(U,X,M,j,se,Ie,ke):As(X):As(X)}expandSegmentAgainstRouteUsingRedirect(U,M,j,X,se,Ie,lt){const{matched:ke,parameters:Bt,consumedSegments:hn,positionalParamSegments:Mn,remainingSegments:Pn}=yu(M,X,se);if(!ke)return As(M);"string"==typeof X.redirectTo&&"/"===X.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const va=new mc(se,Bt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Dr(X),xr(X),X.component??X._loadedComponent??null,X,Jt(X)),xo=ns(va,lt,this.paramsInheritanceStrategy);va.params=Object.freeze(xo.params),va.data=Object.freeze(xo.data);const ya=this.applyRedirects.applyRedirectCommands(hn,X.redirectTo,Mn,va,U);return this.applyRedirects.lineralizeSegments(X,ya).pipe((0,Xt.Z)(Hs=>this.processSegment(U,j,M,Hs.concat(Pn),Ie,!1,lt)))}matchSegmentAgainstRoute(U,M,j,X,se,Ie){const lt=zc(M,j,X,U);return"**"===j.path&&(M.children={}),lt.pipe(gt(ke=>ke.matched?this.getChildConfig(U=j._injector??U,j,X).pipe(gt(({routes:Bt})=>{const hn=j._loadedInjector??U,{parameters:Mn,consumedSegments:Pn,remainingSegments:va}=ke,xo=new mc(Pn,Mn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Dr(j),xr(j),j.component??j._loadedComponent??null,j,Jt(j)),ya=ns(xo,Ie,this.paramsInheritanceStrategy);xo.params=Object.freeze(ya.params),xo.data=Object.freeze(ya.data);const{segmentGroup:Hs,slicedSegments:Gs}=zu(M,Pn,va,Bt);if(0===Gs.length&&Hs.hasChildren())return this.processChildren(hn,Bt,Hs,xo).pipe((0,tn.T)(Ea=>new ao(xo,Ea)));if(0===Bt.length&&0===Gs.length)return Xe(new ao(xo,[]));const $s=xr(j)===se;return this.processSegment(hn,Bt,Hs,Gs,$s?ln:se,!0,xo).pipe((0,tn.T)(Ea=>new ao(xo,Ea instanceof ao?[Ea]:[])))})):As(M)))}getChildConfig(U,M,j){return M.children?Xe({routes:M.children,injector:U}):M.loadChildren?void 0!==M._loadedRoutes?Xe({routes:M._loadedRoutes,injector:M._loadedInjector}):function Us(S,U,M,j){const X=U.canLoad;return void 0===X||0===X.length?Xe(!0):Xe(X.map(Ie=>{const lt=On(Ie,S);return an(function yc(S){return S&&kr(S.canLoad)}(lt)?lt.canLoad(U,M):(0,R.N4e)(S,()=>lt(U,M)))})).pipe(oe(),qr())}(U,M,j).pipe((0,Xt.Z)(X=>X?this.configLoader.loadChildren(U,M).pipe((0,le.M)(se=>{M._loadedRoutes=se.routes,M._loadedInjector=se.injector})):function Rd(S){return pn(Gn(!1,Zn.GuardRejected))}())):Xe({routes:[],injector:U})}}function Za(S){const U=S.value.routeConfig;return U&&""===U.path}function Vn(S){const U=[],M=new Set;for(const j of S){if(!Za(j)){U.push(j);continue}const X=U.find(se=>j.value.routeConfig===se.value.routeConfig);void 0!==X?(X.children.push(...j.children),M.add(X)):U.push(j)}for(const j of M){const X=Vn(j.children);U.push(new ao(j.value,X))}return U.filter(j=>!M.has(j))}function Dr(S){return S.data||{}}function Jt(S){return S.resolve||{}}function If(S){const U=S.children.map(M=>If(M)).flat();return[S,...U]}function W(S){return gt(U=>{const M=S(U);return M?(0,ye.H)(M).pipe((0,tn.T)(()=>U)):Xe(U)})}let ne=(()=>{class S{buildTitle(M){let j,X=M.root;for(;void 0!==X;)j=this.getResolvedTitleForRoute(X)??j,X=X.children.find(se=>se.outlet===ln);return j}getResolvedTitleForRoute(M){return M.data[Gr]}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=R.jDH({token:S,factory:()=>(0,R.WQX)(Ce),providedIn:"root"})}return S})(),Ce=(()=>{class S extends ne{constructor(M){super(),this.title=M}updateTitle(M){const j=this.buildTitle(M);void 0!==j&&this.title.setTitle(j)}static#e=this.\u0275fac=function(j){return new(j||S)(R.KVO(Fi.hE))};static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const ut=new R.nKC("",{providedIn:"root",factory:()=>({})}),mt=new R.nKC("");let mn=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,R.WQX)(R.Ql9)}loadComponent(M){if(this.componentLoaders.get(M))return this.componentLoaders.get(M);if(M._loadedComponent)return Xe(M._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(M);const j=an(M.loadComponent()).pipe((0,tn.T)(nr),(0,le.M)(se=>{this.onLoadEndListener&&this.onLoadEndListener(M),M._loadedComponent=se}),Pr(()=>{this.componentLoaders.delete(M)})),X=new xt(j,()=>new Ht.B).pipe(kt());return this.componentLoaders.set(M,X),X}loadChildren(M,j){if(this.childrenLoaders.get(j))return this.childrenLoaders.get(j);if(j._loadedRoutes)return Xe({routes:j._loadedRoutes,injector:j._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(j);const se=function gn(S,U,M,j){return an(S.loadChildren()).pipe((0,tn.T)(nr),(0,Xt.Z)(X=>X instanceof R.Co$||Array.isArray(X)?Xe(X):(0,ye.H)(U.compileModuleAsync(X))),(0,tn.T)(X=>{j&&j(S);let se,Ie,lt=!1;return Array.isArray(X)?(Ie=X,!0):(se=X.create(M).injector,Ie=se.get(mt,[],{optional:!0,self:!0}).flat()),{routes:Ie.map(Vs),injector:se}}))}(j,this.compiler,M,this.onLoadEndListener).pipe(Pr(()=>{this.childrenLoaders.delete(j)})),Ie=new xt(se,()=>new Ht.B).pipe(kt());return this.childrenLoaders.set(j,Ie),Ie}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function nr(S){return function Kr(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let pr=(()=>{class S{static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=R.jDH({token:S,factory:()=>(0,R.WQX)(dr),providedIn:"root"})}return S})(),dr=(()=>{class S{shouldProcessUrl(M){return!0}extract(M){return M}merge(M,j){return M}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const Ke=new R.nKC(""),Wi=new R.nKC("");function Qo(S,U,M){const j=S.get(Wi),X=S.get(De.qQ);return S.get(R.SKi).runOutsideAngular(()=>{if(!X.startViewTransition||j.skipNextTransition)return j.skipNextTransition=!1,new Promise(Bt=>setTimeout(Bt));let se;const Ie=new Promise(Bt=>{se=Bt}),lt=X.startViewTransition(()=>(se(),function os(S){return new Promise(U=>{(0,R.mal)(U,{injector:S})})}(S))),{onViewTransitionCreated:ke}=j;return ke&&(0,R.N4e)(S,()=>ke({transition:lt,from:U,to:M})),Ie})}const Yo=new R.nKC("");let na=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ht.B,this.transitionAbortSubject=new Ht.B,this.configLoader=(0,R.WQX)(mn),this.environmentInjector=(0,R.WQX)(R.uvJ),this.urlSerializer=(0,R.WQX)(fr),this.rootContexts=(0,R.WQX)(Lo),this.location=(0,R.WQX)(De.aZ),this.inputBindingEnabled=null!==(0,R.WQX)(Qi,{optional:!0}),this.titleStrategy=(0,R.WQX)(ne),this.options=(0,R.WQX)(ut,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,R.WQX)(pr),this.createViewTransition=(0,R.WQX)(Ke,{optional:!0}),this.navigationErrorHandler=(0,R.WQX)(Yo,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Xe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=X=>this.events.next(new qo(X)),this.configLoader.onLoadStartListener=X=>this.events.next(new ko(X))}complete(){this.transitions?.complete()}handleNavigationRequest(M){const j=++this.navigationId;this.transitions?.next({...this.transitions.value,...M,id:j})}setupNavigations(M,j,X){return this.transitions=new ct.t({id:0,currentUrlTree:j,currentRawUrl:j,extractedUrl:this.urlHandlingStrategy.extract(j),urlAfterRedirects:this.urlHandlingStrategy.extract(j),rawUrl:j,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:oi,restoredState:null,currentSnapshot:X.snapshot,targetSnapshot:null,currentRouterState:X,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Je(se=>0!==se.id),(0,tn.T)(se=>({...se,extractedUrl:this.urlHandlingStrategy.extract(se.rawUrl)})),gt(se=>{let Ie=!1,lt=!1;return Xe(se).pipe(gt(ke=>{if(this.navigationId>se.id)return this.cancelNavigationTransition(se,"",Zn.SupersededByNewNavigation),$t;this.currentTransition=se,this.currentNavigation={id:ke.id,initialUrl:ke.rawUrl,extractedUrl:ke.extractedUrl,trigger:ke.source,extras:ke.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Bt=!M.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!Bt&&"reload"!==(ke.extras.onSameUrlNavigation??M.onSameUrlNavigation)){const Mn="";return this.events.next(new Bn(ke.id,this.urlSerializer.serialize(ke.rawUrl),Mn,Js.IgnoredSameUrlNavigation)),ke.resolve(!1),$t}if(this.urlHandlingStrategy.shouldProcessUrl(ke.rawUrl))return Xe(ke).pipe(gt(Mn=>{const Pn=this.transitions?.getValue();return this.events.next(new Ma(Mn.id,this.urlSerializer.serialize(Mn.extractedUrl),Mn.source,Mn.restoredState)),Pn!==this.transitions?.getValue()?$t:Promise.resolve(Mn)}),function Cf(S,U,M,j,X,se){return(0,Xt.Z)(Ie=>function Wc(S,U,M,j,X,se,Ie="emptyOnly"){return new Ya(S,U,M,j,X,Ie,se).recognize()}(S,U,M,j,Ie.extractedUrl,X,se).pipe((0,tn.T)(({state:lt,tree:ke})=>({...Ie,targetSnapshot:lt,urlAfterRedirects:ke}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,M.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,le.M)(Mn=>{se.targetSnapshot=Mn.targetSnapshot,se.urlAfterRedirects=Mn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Mn.urlAfterRedirects};const Pn=new $i(Mn.id,this.urlSerializer.serialize(Mn.extractedUrl),this.urlSerializer.serialize(Mn.urlAfterRedirects),Mn.targetSnapshot);this.events.next(Pn)}));if(Bt&&this.urlHandlingStrategy.shouldProcessUrl(ke.currentRawUrl)){const{id:Mn,extractedUrl:Pn,source:va,restoredState:xo,extras:ya}=ke,Hs=new Ma(Mn,this.urlSerializer.serialize(Pn),va,xo);this.events.next(Hs);const Gs=$a(this.rootComponentType).snapshot;return this.currentTransition=se={...ke,targetSnapshot:Gs,urlAfterRedirects:Pn,extras:{...ya,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Pn,Xe(se)}{const Mn="";return this.events.next(new Bn(ke.id,this.urlSerializer.serialize(ke.extractedUrl),Mn,Js.IgnoredByUrlHandlingStrategy)),ke.resolve(!1),$t}}),(0,le.M)(ke=>{const Bt=new Di(ke.id,this.urlSerializer.serialize(ke.extractedUrl),this.urlSerializer.serialize(ke.urlAfterRedirects),ke.targetSnapshot);this.events.next(Bt)}),(0,tn.T)(ke=>(this.currentTransition=se={...ke,guards:$c(ke.targetSnapshot,ke.currentSnapshot,this.rootContexts)},se)),function Mt(S,U){return(0,Xt.Z)(M=>{const{targetSnapshot:j,currentSnapshot:X,guards:{canActivateChecks:se,canDeactivateChecks:Ie}}=M;return 0===Ie.length&&0===se.length?Xe({...M,guardsResult:!0}):function $n(S,U,M,j){return(0,ye.H)(S).pipe((0,Xt.Z)(X=>function _u(S,U,M,j,X){const se=U&&U.routeConfig?U.routeConfig.canDeactivate:null;return se&&0!==se.length?Xe(se.map(lt=>{const ke=jc(U)??X,Bt=On(lt,ke);return an(function hl(S){return S&&kr(S.canDeactivate)}(Bt)?Bt.canDeactivate(S,U,M,j):(0,R.N4e)(ke,()=>Bt(S,U,M,j))).pipe(bt())})).pipe(oe()):Xe(!0)}(X.component,X.route,M,U,j)),bt(X=>!0!==X,!0))}(Ie,j,X,S).pipe((0,Xt.Z)(lt=>lt&&function Is(S){return"boolean"==typeof S}(lt)?function Uo(S,U,M,j){return(0,ye.H)(U).pipe(Le(X=>(0,vt.x)(function bo(S,U){return null!==S&&U&&U(new Ri(S)),Xe(!0)}(X.route.parent,j),function pa(S,U){return null!==S&&U&&U(new Vc(S)),Xe(!0)}(X.route,j),function Tn(S,U,M){const j=U[U.length-1],se=U.slice(0,U.length-1).reverse().map(Ie=>function ta(S){const U=S.routeConfig?S.routeConfig.canActivateChild:null;return U&&0!==U.length?{node:S,guards:U}:null}(Ie)).filter(Ie=>null!==Ie).map(Ie=>At(()=>Xe(Ie.guards.map(ke=>{const Bt=jc(Ie.node)??M,hn=On(ke,Bt);return an(function $u(S){return S&&kr(S.canActivateChild)}(hn)?hn.canActivateChild(j,S):(0,R.N4e)(Bt,()=>hn(j,S))).pipe(bt())})).pipe(oe())));return Xe(se).pipe(oe())}(S,X.path,M),function Bs(S,U,M){const j=U.routeConfig?U.routeConfig.canActivate:null;if(!j||0===j.length)return Xe(!0);const X=j.map(se=>At(()=>{const Ie=jc(U)??M,lt=On(se,Ie);return an(function Ao(S){return S&&kr(S.canActivate)}(lt)?lt.canActivate(U,S):(0,R.N4e)(Ie,()=>lt(U,S))).pipe(bt())}));return Xe(X).pipe(oe())}(S,X.route,M))),bt(X=>!0!==X,!0))}(j,se,S,U):Xe(lt)),(0,tn.T)(lt=>({...M,guardsResult:lt})))})}(this.environmentInjector,ke=>this.events.next(ke)),(0,le.M)(ke=>{if(se.guardsResult=ke.guardsResult,ke.guardsResult&&"boolean"!=typeof ke.guardsResult)throw on(0,ke.guardsResult);const Bt=new ks(ke.id,this.urlSerializer.serialize(ke.extractedUrl),this.urlSerializer.serialize(ke.urlAfterRedirects),ke.targetSnapshot,!!ke.guardsResult);this.events.next(Bt)}),Je(ke=>!!ke.guardsResult||(this.cancelNavigationTransition(ke,"",Zn.GuardRejected),!1)),W(ke=>{if(ke.guards.canActivateChecks.length)return Xe(ke).pipe((0,le.M)(Bt=>{const hn=new Ul(Bt.id,this.urlSerializer.serialize(Bt.extractedUrl),this.urlSerializer.serialize(Bt.urlAfterRedirects),Bt.targetSnapshot);this.events.next(hn)}),gt(Bt=>{let hn=!1;return Xe(Bt).pipe(function Er(S,U){return(0,Xt.Z)(M=>{const{targetSnapshot:j,guards:{canActivateChecks:X}}=M;if(!X.length)return Xe(M);const se=new Set(X.map(ke=>ke.route)),Ie=new Set;for(const ke of se)if(!Ie.has(ke))for(const Bt of If(ke))Ie.add(Bt);let lt=0;return(0,ye.H)(Ie).pipe(Le(ke=>se.has(ke)?function co(S,U,M,j){const X=S.routeConfig,se=S._resolve;return void 0!==X?.title&&!za(X)&&(se[Gr]=X.title),function F(S,U,M,j){const X=Co(S);if(0===X.length)return Xe({});const se={};return(0,ye.H)(X).pipe((0,Xt.Z)(Ie=>function re(S,U,M,j){const X=jc(U)??j,se=On(S,X);return an(se.resolve?se.resolve(U,M):(0,R.N4e)(X,()=>se(U,M)))}(S[Ie],U,M,j).pipe(bt(),(0,le.M)(lt=>{if(lt instanceof Ka)throw on(new he,lt);se[Ie]=lt}))),Un(1),function Qn(S){return(0,tn.T)(()=>S)}(se),pe(Ie=>Z(Ie)?$t:pn(Ie)))}(se,S,U,j).pipe((0,tn.T)(Ie=>(S._resolvedData=Ie,S.data=ns(S,S.parent,M).resolve,null)))}(ke,j,S,U):(ke.data=ns(ke,ke.parent,S).resolve,Xe(void 0))),(0,le.M)(()=>lt++),Un(1),(0,Xt.Z)(ke=>lt===Ie.size?Xe(M):$t))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,le.M)({next:()=>hn=!0,complete:()=>{hn||this.cancelNavigationTransition(Bt,"",Zn.NoDataFromResolver)}}))}),(0,le.M)(Bt=>{const hn=new Ui(Bt.id,this.urlSerializer.serialize(Bt.extractedUrl),this.urlSerializer.serialize(Bt.urlAfterRedirects),Bt.targetSnapshot);this.events.next(hn)}))}),W(ke=>{const Bt=hn=>{const Mn=[];hn.routeConfig?.loadComponent&&!hn.routeConfig._loadedComponent&&Mn.push(this.configLoader.loadComponent(hn.routeConfig).pipe((0,le.M)(Pn=>{hn.component=Pn}),(0,tn.T)(()=>{})));for(const Pn of hn.children)Mn.push(...Bt(Pn));return Mn};return(0,Ee.z)(Bt(ke.targetSnapshot.root)).pipe(Tr(null),Yt(1))}),W(()=>this.afterPreactivation()),gt(()=>{const{currentSnapshot:ke,targetSnapshot:Bt}=se,hn=this.createViewTransition?.(this.environmentInjector,ke.root,Bt.root);return hn?(0,ye.H)(hn).pipe((0,tn.T)(()=>se)):Xe(se)}),(0,tn.T)(ke=>{const Bt=function fi(S,U,M){const j=zi(S,U._root,M?M._root:void 0);return new Pa(j,U)}(M.routeReuseStrategy,ke.targetSnapshot,ke.currentRouterState);return this.currentTransition=se={...ke,targetRouterState:Bt},this.currentNavigation.targetRouterState=Bt,se}),(0,le.M)(()=>{this.events.next(new ua)}),((S,U,M,j)=>(0,tn.T)(X=>(new Sr(U,X.targetRouterState,X.currentRouterState,M,j).activate(S),X)))(this.rootContexts,M.routeReuseStrategy,ke=>this.events.next(ke),this.inputBindingEnabled),Yt(1),(0,le.M)({next:ke=>{Ie=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Io(ke.id,this.urlSerializer.serialize(ke.extractedUrl),this.urlSerializer.serialize(ke.urlAfterRedirects))),this.titleStrategy?.updateTitle(ke.targetRouterState.snapshot),ke.resolve(!0)},complete:()=>{Ie=!0}}),function mr(S){return(0,wt.N)((U,M)=>{(0,ze.Tg)(S).subscribe((0,dt._)(M,()=>M.complete(),no.l)),!M.closed&&U.subscribe(M)})}(this.transitionAbortSubject.pipe((0,le.M)(ke=>{throw ke}))),Pr(()=>{!Ie&&!lt&&this.cancelNavigationTransition(se,"",Zn.SupersededByNewNavigation),this.currentTransition?.id===se.id&&(this.currentNavigation=null,this.currentTransition=null)}),pe(ke=>{if(lt=!0,Fs(ke))this.events.next(new di(se.id,this.urlSerializer.serialize(se.extractedUrl),ke.message,ke.cancellationCode)),function hr(S){return Fs(S)&&Da(S.url)}(ke)?this.events.next(new es(ke.url,ke.navigationBehaviorOptions)):se.resolve(!1);else{const Bt=new ea(se.id,this.urlSerializer.serialize(se.extractedUrl),ke,se.targetSnapshot??void 0);try{const hn=(0,R.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(Bt));if(hn instanceof Ka){const{message:Mn,cancellationCode:Pn}=on(0,hn);this.events.next(new di(se.id,this.urlSerializer.serialize(se.extractedUrl),Mn,Pn)),this.events.next(new es(hn.redirectTo,hn.navigationBehaviorOptions))}else{this.events.next(Bt);const Mn=M.errorHandler(ke);se.resolve(!!Mn)}}catch(hn){this.options.resolveNavigationPromiseOnError?se.resolve(!1):se.reject(hn)}}return $t}))}))}cancelNavigationTransition(M,j,X){const se=new di(M.id,this.urlSerializer.serialize(M.extractedUrl),j,X);this.events.next(se),M.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function Mi(S){return S!==oi}let ga=(()=>{class S{static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=R.jDH({token:S,factory:()=>(0,R.WQX)(bs),providedIn:"root"})}return S})();class En{shouldDetach(U){return!1}store(U,M){}shouldAttach(U){return!1}retrieve(U){return null}shouldReuseRoute(U,M){return U.routeConfig===M.routeConfig}}let bs=(()=>{class S extends En{static#e=this.\u0275fac=(()=>{let M;return function(X){return(M||(M=R.xGo(S)))(X||S)}})();static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),Ts=(()=>{class S{static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=R.jDH({token:S,factory:()=>(0,R.WQX)(xs),providedIn:"root"})}return S})(),xs=(()=>{class S extends Ts{constructor(){super(...arguments),this.location=(0,R.WQX)(De.aZ),this.urlSerializer=(0,R.WQX)(fr),this.options=(0,R.WQX)(ut,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,R.WQX)(pr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Po,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=$a(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(M){return this.location.subscribe(j=>{"popstate"===j.type&&M(j.url,j.state)})}handleRouterEvent(M,j){if(M instanceof Ma)this.stateMemento=this.createStateMemento();else if(M instanceof Bn)this.rawUrlTree=j.initialUrl;else if(M instanceof $i){if("eager"===this.urlUpdateStrategy&&!j.extras.skipLocationChange){const X=this.urlHandlingStrategy.merge(j.finalUrl,j.initialUrl);this.setBrowserUrl(X,j)}}else M instanceof ua?(this.currentUrlTree=j.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(j.finalUrl,j.initialUrl),this.routerState=j.targetRouterState,"deferred"===this.urlUpdateStrategy&&(j.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,j))):M instanceof di&&(M.code===Zn.GuardRejected||M.code===Zn.NoDataFromResolver)?this.restoreHistory(j):M instanceof ea?this.restoreHistory(j,!0):M instanceof Io&&(this.lastSuccessfulId=M.id,this.currentPageId=this.browserPageId)}setBrowserUrl(M,j){const X=this.urlSerializer.serialize(M);if(this.location.isCurrentPathEqualTo(X)||j.extras.replaceUrl){const Ie={...j.extras.state,...this.generateNgRouterState(j.id,this.browserPageId)};this.location.replaceState(X,"",Ie)}else{const se={...j.extras.state,...this.generateNgRouterState(j.id,this.browserPageId+1)};this.location.go(X,"",se)}}restoreHistory(M,j=!1){if("computed"===this.canceledNavigationResolution){const se=this.currentPageId-this.browserPageId;0!==se?this.location.historyGo(se):this.currentUrlTree===M.finalUrl&&0===se&&(this.resetState(M),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(j&&this.resetState(M),this.resetUrlToCurrentUrlTree())}resetState(M){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,M.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(M,j){return"computed"===this.canceledNavigationResolution?{navigationId:M,\u0275routerPageId:j}:{navigationId:M}}static#e=this.\u0275fac=(()=>{let M;return function(X){return(M||(M=R.xGo(S)))(X||S)}})();static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();var qc=function(S){return S[S.COMPLETE=0]="COMPLETE",S[S.FAILED=1]="FAILED",S[S.REDIRECTING=2]="REDIRECTING",S}(qc||{});function jl(S,U){S.events.pipe(Je(M=>M instanceof Io||M instanceof di||M instanceof ea||M instanceof Bn),(0,tn.T)(M=>M instanceof Io||M instanceof Bn?qc.COMPLETE:M instanceof di&&(M.code===Zn.Redirect||M.code===Zn.SupersededByNewNavigation)?qc.REDIRECTING:qc.FAILED),Je(M=>M!==qc.REDIRECTING),Yt(1)).subscribe(()=>{U()})}function Md(S){throw S}const ss={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},To={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ra=(()=>{class S{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,R.WQX)(R.H3F),this.stateManager=(0,R.WQX)(Ts),this.options=(0,R.WQX)(ut,{optional:!0})||{},this.pendingTasks=(0,R.WQX)(R.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,R.WQX)(na),this.urlSerializer=(0,R.WQX)(fr),this.location=(0,R.WQX)(De.aZ),this.urlHandlingStrategy=(0,R.WQX)(pr),this._events=new Ht.B,this.errorHandler=this.options.errorHandler||Md,this.navigated=!1,this.routeReuseStrategy=(0,R.WQX)(ga),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,R.WQX)(mt,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,R.WQX)(Qi,{optional:!0}),this.eventsSubscription=new Ot.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:M=>{this.console.warn(M)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const M=this.navigationTransitions.events.subscribe(j=>{try{const X=this.navigationTransitions.currentTransition,se=this.navigationTransitions.currentNavigation;if(null!==X&&null!==se)if(this.stateManager.handleRouterEvent(j,se),j instanceof di&&j.code!==Zn.Redirect&&j.code!==Zn.SupersededByNewNavigation)this.navigated=!0;else if(j instanceof Io)this.navigated=!0;else if(j instanceof es){const Ie=j.navigationBehaviorOptions,lt=this.urlHandlingStrategy.merge(j.url,X.currentRawUrl),ke={info:X.extras.info,skipLocationChange:X.extras.skipLocationChange,replaceUrl:X.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Mi(X.source),...Ie};this.scheduleNavigation(lt,oi,null,ke,{resolve:X.resolve,reject:X.reject,promise:X.promise})}(function Hl(S){return!(S instanceof ua||S instanceof es)})(j)&&this._events.next(j)}catch(X){this.navigationTransitions.transitionAbortSubject.next(X)}});this.eventsSubscription.add(M)}resetRootComponentType(M){this.routerState.root.component=M,this.navigationTransitions.rootComponentType=M}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((M,j)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(M,"popstate",j)},0)})}navigateToSyncWithBrowser(M,j,X){const se={replaceUrl:!0},Ie=X?.navigationId?X:null;if(X){const ke={...X};delete ke.navigationId,delete ke.\u0275routerPageId,0!==Object.keys(ke).length&&(se.state=ke)}const lt=this.parseUrl(M);this.scheduleNavigation(lt,j,Ie,se)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(M){this.config=M.map(Vs),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(M,j={}){const{relativeTo:X,queryParams:se,fragment:Ie,queryParamsHandling:lt,preserveFragment:ke}=j,Bt=ke?this.currentUrlTree.fragment:Ie;let Mn,hn=null;switch(lt){case"merge":hn={...this.currentUrlTree.queryParams,...se};break;case"preserve":hn=this.currentUrlTree.queryParams;break;default:hn=se||null}null!==hn&&(hn=this.removeEmptyProps(hn));try{Mn=$e(X?X.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof M[0]||"/"!==M[0][0])&&(M=[]),Mn=this.currentUrlTree.root}return St(Mn,M,hn,Bt??null)}navigateByUrl(M,j={skipLocationChange:!1}){const X=Da(M)?M:this.parseUrl(M),se=this.urlHandlingStrategy.merge(X,this.rawUrlTree);return this.scheduleNavigation(se,oi,null,j)}navigate(M,j={skipLocationChange:!1}){return function ia(S){for(let U=0;U<S.length;U++)if(null==S[U])throw new R.wOt(4008,!1)}(M),this.navigateByUrl(this.createUrlTree(M,j),j)}serializeUrl(M){return this.urlSerializer.serialize(M)}parseUrl(M){try{return this.urlSerializer.parse(M)}catch{return this.urlSerializer.parse("/")}}isActive(M,j){let X;if(X=!0===j?{...ss}:!1===j?{...To}:j,Da(M))return xi(this.currentUrlTree,M,X);const se=this.parseUrl(M);return xi(this.currentUrlTree,se,X)}removeEmptyProps(M){return Object.entries(M).reduce((j,[X,se])=>(null!=se&&(j[X]=se),j),{})}scheduleNavigation(M,j,X,se,Ie){if(this.disposed)return Promise.resolve(!1);let lt,ke,Bt;Ie?(lt=Ie.resolve,ke=Ie.reject,Bt=Ie.promise):Bt=new Promise((Mn,Pn)=>{lt=Mn,ke=Pn});const hn=this.pendingTasks.add();return jl(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(hn))}),this.navigationTransitions.handleNavigationRequest({source:j,restoredState:X,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:M,extras:se,resolve:lt,reject:ke,promise:Bt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Bt.catch(Mn=>Promise.reject(Mn))}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();class ka{}let Iu=(()=>{class S{constructor(M,j,X,se,Ie){this.router=M,this.injector=X,this.preloadingStrategy=se,this.loader=Ie}setUpPreloading(){this.subscription=this.router.events.pipe(Je(M=>M instanceof Io),Le(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(M,j){const X=[];for(const se of j){se.providers&&!se._injector&&(se._injector=(0,R.Ol2)(se.providers,M,`Route: ${se.path}`));const Ie=se._injector??M,lt=se._loadedInjector??Ie;(se.loadChildren&&!se._loadedRoutes&&void 0===se.canLoad||se.loadComponent&&!se._loadedComponent)&&X.push(this.preloadConfig(Ie,se)),(se.children||se._loadedRoutes)&&X.push(this.processRoutes(lt,se.children??se._loadedRoutes))}return(0,ye.H)(X).pipe((0,Br.U)())}preloadConfig(M,j){return this.preloadingStrategy.preload(j,()=>{let X;X=j.loadChildren&&void 0===j.canLoad?this.loader.loadChildren(M,j):Xe(null);const se=X.pipe((0,Xt.Z)(Ie=>null===Ie?Xe(void 0):(j._loadedRoutes=Ie.routes,j._loadedInjector=Ie.injector,this.processRoutes(Ie.injector??M,Ie.routes))));if(j.loadComponent&&!j._loadedComponent){const Ie=this.loader.loadComponent(j);return(0,ye.H)([se,Ie]).pipe((0,Br.U)())}return se})}static#e=this.\u0275fac=function(j){return new(j||S)(R.KVO(ra),R.KVO(R.Ql9),R.KVO(R.uvJ),R.KVO(ka),R.KVO(mn))};static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const Oi=new R.nKC("");let Au=(()=>{class S{constructor(M,j,X,se,Ie={}){this.urlSerializer=M,this.transitions=j,this.viewportScroller=X,this.zone=se,this.options=Ie,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,R.WQX)(R.uvJ),Ie.scrollPositionRestoration||="disabled",Ie.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(M=>{M instanceof Ma?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=M.navigationTrigger,this.restoredId=M.restoredState?M.restoredState.navigationId:0):M instanceof Io?(this.lastId=M.id,this.scheduleScrollEvent(M,this.urlSerializer.parse(M.urlAfterRedirects).fragment)):M instanceof Bn&&M.code===Js.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(M,this.urlSerializer.parse(M.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(M=>{M instanceof Fo&&(M.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(M.position):M.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(M.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(M,j){var X=this;this.zone.runOutsideAngular((0,D.A)(function*(){yield new Promise(se=>{setTimeout(()=>{se()}),(0,R.mal)(()=>{se()},{injector:X.environmentInjector})}),X.zone.run(()=>{X.transitions.events.next(new Fo(M,"popstate"===X.lastSource?X.store[X.restoredId]:null,j))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(j){R.QTQ()};static#t=this.\u0275prov=R.jDH({token:S,factory:S.\u0275fac})}return S})();function Ku(S,...U){return(0,R.EmA)([{provide:mt,multi:!0,useValue:S},[],{provide:Ko,useFactory:Ja,deps:[ra]},{provide:R.iLQ,multi:!0,useFactory:hi},U.map(M=>M.\u0275providers)])}function Ja(S){return S.routerState.root}function vi(S,U){return{\u0275kind:S,\u0275providers:U}}function hi(){const S=(0,R.WQX)(R.zZn);return U=>{const M=S.get(R.o8S);if(U!==M.components[0])return;const j=S.get(ra),X=S.get(Fr);1===S.get(cs)&&j.initialNavigation(),S.get(Zo,null,R.$GK.Optional)?.setUpPreloading(),S.get(Oi,null,R.$GK.Optional)?.init(),j.resetRootComponentType(M.componentTypes[0]),X.closed||(X.next(),X.complete(),X.unsubscribe())}}const Fr=new R.nKC("",{factory:()=>new Ht.B}),cs=new R.nKC("",{providedIn:"root",factory:()=>1}),Zo=new R.nKC("");function ma(S){return vi(0,[{provide:Zo,useExisting:Iu},{provide:ka,useExisting:S}])}function Qu(){return vi(8,[_c,{provide:Qi,useExisting:_c}])}function Yu(S){return vi(9,[{provide:Ke,useValue:Qo},{provide:Wi,useValue:{skipNextTransition:!!S?.skipInitialTransition,...S}}])}const Zu=new R.nKC("ROUTER_FORROOT_GUARD"),gl=[De.aZ,{provide:fr,useClass:he},ra,Lo,{provide:Ko,useFactory:Ja,deps:[ra]},mn,[]];let zl=(()=>{class S{constructor(M){}static forRoot(M,j){return{ngModule:S,providers:[gl,[],{provide:mt,multi:!0,useValue:M},{provide:Zu,useFactory:La,deps:[[ra,new R.Xx1,new R.kdw]]},{provide:ut,useValue:j||{}},j?.useHash?{provide:De.hb,useClass:De.fw}:{provide:De.hb,useClass:De.Sm},{provide:Oi,useFactory:()=>{const S=(0,R.WQX)(De.Xr),U=(0,R.WQX)(R.SKi),M=(0,R.WQX)(ut),j=(0,R.WQX)(na),X=(0,R.WQX)(fr);return M.scrollOffset&&S.setOffset(M.scrollOffset),new Au(X,j,S,U,M)}},j?.preloadingStrategy?ma(j.preloadingStrategy).\u0275providers:[],j?.initialNavigation?Od(j):[],j?.bindToComponentInputs?Qu().\u0275providers:[],j?.enableViewTransitions?Yu().\u0275providers:[],[{provide:_a,useFactory:hi},{provide:R.iLQ,multi:!0,useExisting:_a}]]}}static forChild(M){return{ngModule:S,providers:[{provide:mt,multi:!0,useValue:M}]}}static#e=this.\u0275fac=function(j){return new(j||S)(R.KVO(Zu,8))};static#t=this.\u0275mod=R.$C({type:S});static#n=this.\u0275inj=R.G2t({})}return S})();function La(S){return"guarded"}function Od(S){return["disabled"===S.initialNavigation?vi(3,[{provide:R.hnV,multi:!0,useFactory:()=>{const U=(0,R.WQX)(ra);return()=>{U.setUpLocationChangeListener()}}},{provide:cs,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?vi(2,[{provide:cs,useValue:0},{provide:R.hnV,multi:!0,deps:[R.zZn],useFactory:U=>{const M=U.get(De.hj,Promise.resolve());return()=>M.then(()=>new Promise(j=>{const X=U.get(ra),se=U.get(Fr);jl(X,()=>{j(!0)}),U.get(na).afterPreactivation=()=>(j(!0),se.closed?Xe(void 0):se),X.initialNavigation()}))}}]).\u0275providers:[]]}const _a=new R.nKC("")},7852:(Cn,It,ie)=>{ie.d(It,{MF:()=>Si,j6:()=>li,xZ:()=>jn,om:()=>ui,Sx:()=>tt,Dk:()=>Ae,Wp:()=>fr,KO:()=>ge});var D=ie(467),R=ie(1362),V=ie(8041),We=ie(1076);const nt=(Et,$e)=>$e.some(St=>Et instanceof St);let ye,Ct;const Ee=new WeakMap,be=new WeakMap,Oe=new WeakMap,vt=new WeakMap,ze=new WeakMap;let pn={get(Et,$e,St){if(Et instanceof IDBTransaction){if("done"===$e)return be.get(Et);if("objectStoreNames"===$e)return Et.objectStoreNames||Oe.get(Et);if("store"===$e)return St.objectStoreNames[1]?void 0:St.objectStore(St.objectStoreNames[0])}return Ot(Et[$e])},set:(Et,$e,St)=>(Et[$e]=St,!0),has:(Et,$e)=>Et instanceof IDBTransaction&&("done"===$e||"store"===$e)||$e in Et};function cr(Et){return"function"==typeof Et?function Xn(Et){return Et!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ct(){return Ct||(Ct=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Et)?function(...$e){return Et.apply(wt(this),$e),Ot(Ee.get(this))}:function(...$e){return Ot(Et.apply(wt(this),$e))}:function($e,...St){const rn=Et.call(wt(this),$e,...St);return Oe.set(rn,$e.sort?$e.sort():[$e]),Ot(rn)}}(Et):(Et instanceof IDBTransaction&&function Ut(Et){if(be.has(Et))return;const $e=new Promise((St,rn)=>{const Ln=()=>{Et.removeEventListener("complete",Rn),Et.removeEventListener("error",kn),Et.removeEventListener("abort",kn)},Rn=()=>{St(),Ln()},kn=()=>{rn(Et.error||new DOMException("AbortError","AbortError")),Ln()};Et.addEventListener("complete",Rn),Et.addEventListener("error",kn),Et.addEventListener("abort",kn)});be.set(Et,$e)}(Et),nt(Et,function Xe(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Et,pn):Et)}function Ot(Et){if(Et instanceof IDBRequest)return function At(Et){const $e=new Promise((St,rn)=>{const Ln=()=>{Et.removeEventListener("success",Rn),Et.removeEventListener("error",kn)},Rn=()=>{St(Ot(Et.result)),Ln()},kn=()=>{rn(Et.error),Ln()};Et.addEventListener("success",Rn),Et.addEventListener("error",kn)});return $e.then(St=>{St instanceof IDBCursor&&Ee.set(St,Et)}).catch(()=>{}),ze.set($e,Et),$e}(Et);if(vt.has(Et))return vt.get(Et);const $e=cr(Et);return $e!==Et&&(vt.set(Et,$e),ze.set($e,Et)),$e}const wt=Et=>ze.get(Et),xt=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],De=new Map;function tn(Et,$e){if(!(Et instanceof IDBDatabase)||$e in Et||"string"!=typeof $e)return;if(De.get($e))return De.get($e);const St=$e.replace(/FromIndex$/,""),rn=$e!==St,Ln=Ht.includes(St);if(!(St in(rn?IDBIndex:IDBObjectStore).prototype)||!Ln&&!xt.includes(St))return;const Rn=function(){var kn=(0,D.A)(function*(Ir,...jr){const Gi=this.transaction(Ir,Ln?"readwrite":"readonly");let No=Gi.store;return rn&&(No=No.index(jr.shift())),(yield Promise.all([No[St](...jr),Ln&&Gi.done]))[0]});return function(jr){return kn.apply(this,arguments)}}();return De.set($e,Rn),Rn}!function $t(Et){pn=Et(pn)}(Et=>({...Et,get:($e,St,rn)=>tn($e,St)||Et.get($e,St,rn),has:($e,St)=>!!tn($e,St)||Et.has($e,St)}));class gt{constructor($e){this.container=$e}getPlatformInfoString(){return this.container.getProviders().map(St=>{if(function Yt(Et){const $e=Et.getComponent();return"VERSION"===$e?.type}(St)){const rn=St.getImmediate();return`${rn.library}/${rn.version}`}return null}).filter(St=>St).join(" ")}}const In="@firebase/app",Xt=new V.Vy("@firebase/app"),Tr="@firebase/app-compat",ki="@firebase/analytics-compat",Ne="@firebase/analytics",Ue="@firebase/app-check-compat",bt="@firebase/app-check",Le="@firebase/auth",le="@firebase/auth-compat",pe="@firebase/database",_t="@firebase/database-compat",Wt="@firebase/functions",Un="@firebase/functions-compat",nn="@firebase/installations",Qn="@firebase/installations-compat",Pr="@firebase/messaging",no="@firebase/messaging-compat",mr="@firebase/performance",Br="@firebase/performance-compat",Fi="@firebase/remote-config",ln="@firebase/remote-config-compat",Gr="@firebase/storage",Dn="@firebase/storage-compat",yr="@firebase/firestore",ni="@firebase/vertexai-preview",lr="@firebase/firestore-compat",sn="firebase",Pt="[DEFAULT]",sr={[In]:"fire-core",[Tr]:"fire-core-compat",[Ne]:"fire-analytics",[ki]:"fire-analytics-compat",[bt]:"fire-app-check",[Ue]:"fire-app-check-compat",[Le]:"fire-auth",[le]:"fire-auth-compat",[pe]:"fire-rtdb",[_t]:"fire-rtdb-compat",[Wt]:"fire-fn",[Un]:"fire-fn-compat",[nn]:"fire-iid",[Qn]:"fire-iid-compat",[Pr]:"fire-fcm",[no]:"fire-fcm-compat",[mr]:"fire-perf",[Br]:"fire-perf-compat",[Fi]:"fire-rc",[ln]:"fire-rc-compat",[Gr]:"fire-gcs",[Dn]:"fire-gcs-compat",[yr]:"fire-fst",[lr]:"fire-fst-compat",[ni]:"fire-vertex","fire-js":"fire-js",[sn]:"fire-js-all"},an=new Map,zt=new Map,$r=new Map;function xi(Et,$e){try{Et.container.addComponent($e)}catch(St){Xt.debug(`Component ${$e.name} failed to register with FirebaseApp ${Et.name}`,St)}}function ui(Et){const $e=Et.name;if($r.has($e))return Xt.debug(`There were multiple attempts to register component ${$e}.`),!1;$r.set($e,Et);for(const St of an.values())xi(St,Et);for(const St of zt.values())xi(St,Et);return!0}function li(Et,$e){const St=Et.container.getProvider("heartbeat").getImmediate({optional:!0});return St&&St.triggerHeartbeat(),Et.container.getProvider($e)}function jn(Et){return void 0!==Et.settings}const gi=new We.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Wo{constructor($e,St,rn){this._isDeleted=!1,this._options=Object.assign({},$e),this._config=Object.assign({},St),this._name=St.name,this._automaticDataCollectionEnabled=St.automaticDataCollectionEnabled,this._container=rn,this.container.addComponent(new R.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($e){this.checkDestroyed(),this._automaticDataCollectionEnabled=$e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($e){this._isDeleted=$e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}const Si="10.12.2";function fr(Et,$e={}){let St=Et;"object"!=typeof $e&&($e={name:$e});const rn=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},$e),Ln=rn.name;if("string"!=typeof Ln||!Ln)throw gi.create("bad-app-name",{appName:String(Ln)});if(St||(St=(0,We.T9)()),!St)throw gi.create("no-options");const Rn=an.get(Ln);if(Rn){if((0,We.bD)(St,Rn.options)&&(0,We.bD)(rn,Rn.config))return Rn;throw gi.create("duplicate-app",{appName:Ln})}const kn=new R.h1(Ln);for(const jr of $r.values())kn.addComponent(jr);const Ir=new Wo(St,rn,kn);return an.set(Ln,Ir),Ir}function tt(Et=Pt){const $e=an.get(Et);if(!$e&&Et===Pt&&(0,We.T9)())return fr();if(!$e)throw gi.create("no-app",{appName:Et});return $e}function Ae(){return Array.from(an.values())}function ge(Et,$e,St){var rn;let Ln=null!==(rn=sr[Et])&&void 0!==rn?rn:Et;St&&(Ln+=`-${St}`);const Rn=Ln.match(/\s|\//),kn=$e.match(/\s|\//);if(Rn||kn){const Ir=[`Unable to register library "${Ln}" with version "${$e}":`];return Rn&&Ir.push(`library name "${Ln}" contains illegal characters (whitespace or "/")`),Rn&&kn&&Ir.push("and"),kn&&Ir.push(`version name "${$e}" contains illegal characters (whitespace or "/")`),void Xt.warn(Ir.join(" "))}ui(new R.uA(`${Ln}-version`,()=>({library:Ln,version:$e}),"VERSION"))}const qe="firebase-heartbeat-database",Kt=1,An="firebase-heartbeat-store";let Hn=null;function Xr(){return Hn||(Hn=function dt(Et,$e,{blocked:St,upgrade:rn,blocking:Ln,terminated:Rn}={}){const kn=indexedDB.open(Et,$e),Ir=Ot(kn);return rn&&kn.addEventListener("upgradeneeded",jr=>{rn(Ot(kn.result),jr.oldVersion,jr.newVersion,Ot(kn.transaction),jr)}),St&&kn.addEventListener("blocked",jr=>St(jr.oldVersion,jr.newVersion,jr)),Ir.then(jr=>{Rn&&jr.addEventListener("close",()=>Rn()),Ln&&jr.addEventListener("versionchange",Gi=>Ln(Gi.oldVersion,Gi.newVersion,Gi))}).catch(()=>{}),Ir}(qe,Kt,{upgrade:(Et,$e)=>{if(0===$e)try{Et.createObjectStore(An)}catch(St){console.warn(St)}}}).catch(Et=>{throw gi.create("idb-open",{originalErrorMessage:Et.message})})),Hn}function ri(){return(ri=(0,D.A)(function*(Et){try{const St=(yield Xr()).transaction(An),rn=yield St.objectStore(An).get(Ur(Et));return yield St.done,rn}catch($e){if($e instanceof We.g)Xt.warn($e.message);else{const St=gi.create("idb-get",{originalErrorMessage:$e?.message});Xt.warn(St.message)}}})).apply(this,arguments)}function qn(Et,$e){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,D.A)(function*(Et,$e){try{const rn=(yield Xr()).transaction(An,"readwrite");yield rn.objectStore(An).put($e,Ur(Et)),yield rn.done}catch(St){if(St instanceof We.g)Xt.warn(St.message);else{const rn=gi.create("idb-set",{originalErrorMessage:St?.message});Xt.warn(rn.message)}}})).apply(this,arguments)}function Ur(Et){return`${Et.name}!${Et.options.appId}`}class po{constructor($e){this.container=$e,this._heartbeatsCache=null;const St=this.container.getProvider("app").getImmediate();this._storage=new hc(St),this._heartbeatsCachePromise=this._storage.read().then(rn=>(this._heartbeatsCache=rn,rn))}triggerHeartbeat(){var $e=this;return(0,D.A)(function*(){var St,rn;const Rn=$e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kn=oo();if((null!=(null===(St=$e._heartbeatsCache)||void 0===St?void 0:St.heartbeats)||($e._heartbeatsCache=yield $e._heartbeatsCachePromise,null!=(null===(rn=$e._heartbeatsCache)||void 0===rn?void 0:rn.heartbeats)))&&$e._heartbeatsCache.lastSentHeartbeatDate!==kn&&!$e._heartbeatsCache.heartbeats.some(Ir=>Ir.date===kn))return $e._heartbeatsCache.heartbeats.push({date:kn,agent:Rn}),$e._heartbeatsCache.heartbeats=$e._heartbeatsCache.heartbeats.filter(Ir=>{const jr=new Date(Ir.date).valueOf();return Date.now()-jr<=2592e6}),$e._storage.overwrite($e._heartbeatsCache)})()}getHeartbeatsHeader(){var $e=this;return(0,D.A)(function*(){var St;if(null===$e._heartbeatsCache&&(yield $e._heartbeatsCachePromise),null==(null===(St=$e._heartbeatsCache)||void 0===St?void 0:St.heartbeats)||0===$e._heartbeatsCache.heartbeats.length)return"";const rn=oo(),{heartbeatsToSend:Ln,unsentEntries:Rn}=function ms(Et,$e=1024){const St=[];let rn=Et.slice();for(const Ln of Et){const Rn=St.find(kn=>kn.agent===Ln.agent);if(Rn){if(Rn.dates.push(Ln.date),Sa(St)>$e){Rn.dates.pop();break}}else if(St.push({agent:Ln.agent,dates:[Ln.date]}),Sa(St)>$e){St.pop();break}rn=rn.slice(1)}return{heartbeatsToSend:St,unsentEntries:rn}}($e._heartbeatsCache.heartbeats),kn=(0,We.Uj)(JSON.stringify({version:2,heartbeats:Ln}));return $e._heartbeatsCache.lastSentHeartbeatDate=rn,Rn.length>0?($e._heartbeatsCache.heartbeats=Rn,yield $e._storage.overwrite($e._heartbeatsCache)):($e._heartbeatsCache.heartbeats=[],$e._storage.overwrite($e._heartbeatsCache)),kn})()}}function oo(){return(new Date).toISOString().substring(0,10)}class hc{constructor($e){this.app=$e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!(0,We.zW)()&&(0,We.eX)().then(()=>!0).catch(()=>!1)})()}read(){var $e=this;return(0,D.A)(function*(){if(yield $e._canUseIndexedDBPromise){const rn=yield function wr(Et){return ri.apply(this,arguments)}($e.app);return rn?.heartbeats?rn:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite($e){var St=this;return(0,D.A)(function*(){var rn;if(yield St._canUseIndexedDBPromise){const Rn=yield St.read();return qn(St.app,{lastSentHeartbeatDate:null!==(rn=$e.lastSentHeartbeatDate)&&void 0!==rn?rn:Rn.lastSentHeartbeatDate,heartbeats:$e.heartbeats})}})()}add($e){var St=this;return(0,D.A)(function*(){var rn;if(yield St._canUseIndexedDBPromise){const Rn=yield St.read();return qn(St.app,{lastSentHeartbeatDate:null!==(rn=$e.lastSentHeartbeatDate)&&void 0!==rn?rn:Rn.lastSentHeartbeatDate,heartbeats:[...Rn.heartbeats,...$e.heartbeats]})}})()}}function Sa(Et){return(0,We.Uj)(JSON.stringify({version:2,heartbeats:Et})).length}!function Da(Et){ui(new R.uA("platform-logger",$e=>new gt($e),"PRIVATE")),ui(new R.uA("heartbeat",$e=>new po($e),"PRIVATE")),ge(In,"0.10.5",Et),ge(In,"0.10.5","esm2017"),ge("fire-js","")}("")},1362:(Cn,It,ie)=>{ie.d(It,{h1:()=>Xe,uA:()=>V});var D=ie(467),R=ie(1076);class V{constructor(Ee,be,Oe){this.name=Ee,this.instanceFactory=be,this.type=Oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ee){return this.instantiationMode=Ee,this}setMultipleInstances(Ee){return this.multipleInstances=Ee,this}setServiceProps(Ee){return this.serviceProps=Ee,this}setInstanceCreatedCallback(Ee){return this.onInstanceCreated=Ee,this}}const We="[DEFAULT]";class nt{constructor(Ee,be){this.name=Ee,this.container=be,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ee){const be=this.normalizeInstanceIdentifier(Ee);if(!this.instancesDeferred.has(be)){const Oe=new R.cY;if(this.instancesDeferred.set(be,Oe),this.isInitialized(be)||this.shouldAutoInitialize())try{const vt=this.getOrInitializeService({instanceIdentifier:be});vt&&Oe.resolve(vt)}catch{}}return this.instancesDeferred.get(be).promise}getImmediate(Ee){var be;const Oe=this.normalizeInstanceIdentifier(Ee?.identifier),vt=null!==(be=Ee?.optional)&&void 0!==be&&be;if(!this.isInitialized(Oe)&&!this.shouldAutoInitialize()){if(vt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Oe})}catch(ze){if(vt)return null;throw ze}}getComponent(){return this.component}setComponent(Ee){if(Ee.name!==this.name)throw Error(`Mismatching Component ${Ee.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ee,this.shouldAutoInitialize()){if(function Ct(ct){return"EAGER"===ct.instantiationMode}(Ee))try{this.getOrInitializeService({instanceIdentifier:We})}catch{}for(const[be,Oe]of this.instancesDeferred.entries()){const vt=this.normalizeInstanceIdentifier(be);try{const ze=this.getOrInitializeService({instanceIdentifier:vt});Oe.resolve(ze)}catch{}}}}clearInstance(Ee=We){this.instancesDeferred.delete(Ee),this.instancesOptions.delete(Ee),this.instances.delete(Ee)}delete(){var Ee=this;return(0,D.A)(function*(){const be=Array.from(Ee.instances.values());yield Promise.all([...be.filter(Oe=>"INTERNAL"in Oe).map(Oe=>Oe.INTERNAL.delete()),...be.filter(Oe=>"_delete"in Oe).map(Oe=>Oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ee=We){return this.instances.has(Ee)}getOptions(Ee=We){return this.instancesOptions.get(Ee)||{}}initialize(Ee={}){const{options:be={}}=Ee,Oe=this.normalizeInstanceIdentifier(Ee.instanceIdentifier);if(this.isInitialized(Oe))throw Error(`${this.name}(${Oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const vt=this.getOrInitializeService({instanceIdentifier:Oe,options:be});for(const[ze,At]of this.instancesDeferred.entries())Oe===this.normalizeInstanceIdentifier(ze)&&At.resolve(vt);return vt}onInit(Ee,be){var Oe;const vt=this.normalizeInstanceIdentifier(be),ze=null!==(Oe=this.onInitCallbacks.get(vt))&&void 0!==Oe?Oe:new Set;ze.add(Ee),this.onInitCallbacks.set(vt,ze);const At=this.instances.get(vt);return At&&Ee(At,vt),()=>{ze.delete(Ee)}}invokeOnInitCallbacks(Ee,be){const Oe=this.onInitCallbacks.get(be);if(Oe)for(const vt of Oe)try{vt(Ee,be)}catch{}}getOrInitializeService({instanceIdentifier:Ee,options:be={}}){let Oe=this.instances.get(Ee);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:(ct=Ee,ct===We?void 0:ct),options:be}),this.instances.set(Ee,Oe),this.instancesOptions.set(Ee,be),this.invokeOnInitCallbacks(Oe,Ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ee,Oe)}catch{}var ct;return Oe||null}normalizeInstanceIdentifier(Ee=We){return this.component?this.component.multipleInstances?Ee:We:Ee}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Xe{constructor(Ee){this.name=Ee,this.providers=new Map}addComponent(Ee){const be=this.getProvider(Ee.name);if(be.isComponentSet())throw new Error(`Component ${Ee.name} has already been registered with ${this.name}`);be.setComponent(Ee)}addOrOverwriteComponent(Ee){this.getProvider(Ee.name).isComponentSet()&&this.providers.delete(Ee.name),this.addComponent(Ee)}getProvider(Ee){if(this.providers.has(Ee))return this.providers.get(Ee);const be=new nt(Ee,this);return this.providers.set(Ee,be),be}getProviders(){return Array.from(this.providers.values())}}},8041:(Cn,It,ie)=>{ie.d(It,{$b:()=>R,Vy:()=>Ct});const D=[];var R=function(Ee){return Ee[Ee.DEBUG=0]="DEBUG",Ee[Ee.VERBOSE=1]="VERBOSE",Ee[Ee.INFO=2]="INFO",Ee[Ee.WARN=3]="WARN",Ee[Ee.ERROR=4]="ERROR",Ee[Ee.SILENT=5]="SILENT",Ee}(R||{});const V={debug:R.DEBUG,verbose:R.VERBOSE,info:R.INFO,warn:R.WARN,error:R.ERROR,silent:R.SILENT},We=R.INFO,nt={[R.DEBUG]:"log",[R.VERBOSE]:"log",[R.INFO]:"info",[R.WARN]:"warn",[R.ERROR]:"error"},ye=(Ee,be,...Oe)=>{if(be<Ee.logLevel)return;const vt=(new Date).toISOString(),ze=nt[be];if(!ze)throw new Error(`Attempted to log a message with an invalid logType (value: ${be})`);console[ze](`[${vt}]  ${Ee.name}:`,...Oe)};class Ct{constructor(be){this.name=be,this._logLevel=We,this._logHandler=ye,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(be){if(!(be in R))throw new TypeError(`Invalid value "${be}" assigned to \`logLevel\``);this._logLevel=be}setLogLevel(be){this._logLevel="string"==typeof be?V[be]:be}get logHandler(){return this._logHandler}set logHandler(be){if("function"!=typeof be)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=be}get userLogHandler(){return this._userLogHandler}set userLogHandler(be){this._userLogHandler=be}debug(...be){this._userLogHandler&&this._userLogHandler(this,R.DEBUG,...be),this._logHandler(this,R.DEBUG,...be)}log(...be){this._userLogHandler&&this._userLogHandler(this,R.VERBOSE,...be),this._logHandler(this,R.VERBOSE,...be)}info(...be){this._userLogHandler&&this._userLogHandler(this,R.INFO,...be),this._logHandler(this,R.INFO,...be)}warn(...be){this._userLogHandler&&this._userLogHandler(this,R.WARN,...be),this._logHandler(this,R.WARN,...be)}error(...be){this._userLogHandler&&this._userLogHandler(this,R.ERROR,...be),this._logHandler(this,R.ERROR,...be)}}},2214:(Cn,It,ie)=>{ie.d(It,{Dk:()=>D.Dk,KO:()=>D.KO,Sx:()=>D.Sx,Wp:()=>D.Wp});var D=ie(7852);(0,D.KO)("firebase","10.12.2","app")},6114:(Cn,It,ie)=>{ie.d(It,{Dt:()=>vc,HF:()=>gu,eJ:()=>zu,xI:()=>Oh,hg:()=>os,x9:()=>wc,df:()=>Qc});var D=ie(467),R=ie(7852),V=ie(1076),We=ie(8041),nt=ie(1635),ye=ie(1362);const At=function vt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ut=new V.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$t=new We.Vy("@firebase/auth");function cr(O,...E){$t.logLevel<=We.$b.ERROR&&$t.error(`Auth (${R.MF}): ${O}`,...E)}function Ot(O,...E){throw Ht(O,...E)}function wt(O,...E){return Ht(O,...E)}function dt(O,E,A){const k=Object.assign(Object.assign({},At()),{[E]:A});return new V.FA("auth","Firebase",k).create(E,{appName:O.name})}function kt(O){return dt(O,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ht(O,...E){if("string"!=typeof O){const A=E[0],k=[...E.slice(1)];return k[0]&&(k[0].appName=O.name),O._errorFactory.create(A,...k)}return Ut.create(O,...E)}function De(O,E,...A){if(!O)throw Ht(E,...A)}function tn(O){const E="INTERNAL ASSERTION FAILED: "+O;throw cr(E),new Error(E)}function gt(O,E){O||tn(E)}function Yt(){var O;return typeof self<"u"&&(null===(O=self.location)||void 0===O?void 0:O.href)||""}function Je(){var O;return typeof self<"u"&&(null===(O=self.location)||void 0===O?void 0:O.protocol)||null}class ki{constructor(E,A){this.shortDelay=E,this.longDelay=A,gt(A>E,"Short delay should be less than long delay!"),this.isMobile=(0,V.jZ)()||(0,V.lV)()}get(){return function Xt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function In(){return"http:"===Je()||"https:"===Je()}()||(0,V.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ne(O,E){gt(O.emulator,"Emulator should always be set here");const{url:A}=O.emulator;return E?`${A}${E.startsWith("/")?E.slice(1):E}`:A}class Ue{static initialize(E,A,k){this.fetchImpl=E,A&&(this.headersImpl=A),k&&(this.responseImpl=k)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Le=new ki(3e4,6e4);function le(O,E){return O.tenantId&&!E.tenantId?Object.assign(Object.assign({},E),{tenantId:O.tenantId}):E}function pe(O,E,A,k){return _t.apply(this,arguments)}function _t(){return(_t=(0,D.A)(function*(O,E,A,k,te={}){return Wt(O,te,(0,D.A)(function*(){let ue={},He={};k&&("GET"===E?He=k:ue={body:JSON.stringify(k)});const it=(0,V.Am)(Object.assign({key:O.config.apiKey},He)).slice(1),Vt=yield O._getAdditionalHeaders();return Vt["Content-Type"]="application/json",O.languageCode&&(Vt["X-Firebase-Locale"]=O.languageCode),Ue.fetch()(Pr(O,O.config.apiHost,A,it),Object.assign({method:E,headers:Vt,referrerPolicy:"no-referrer"},ue))}))})).apply(this,arguments)}function Wt(O,E,A){return Un.apply(this,arguments)}function Un(){return(Un=(0,D.A)(function*(O,E,A){O._canInitEmulator=!1;const k=Object.assign(Object.assign({},bt),E);try{const te=new mr(O),ue=yield Promise.race([A(),te.promise]);te.clearNetworkTimeout();const He=yield ue.json();if("needConfirmation"in He)throw Br(O,"account-exists-with-different-credential",He);if(ue.ok&&!("errorMessage"in He))return He;{const it=ue.ok?He.errorMessage:He.error.message,[Vt,wn]=it.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Vt)throw Br(O,"credential-already-in-use",He);if("EMAIL_EXISTS"===Vt)throw Br(O,"email-already-in-use",He);if("USER_DISABLED"===Vt)throw Br(O,"user-disabled",He);const bn=k[Vt]||Vt.toLowerCase().replace(/[_\s]+/g,"-");if(wn)throw dt(O,bn,wn);Ot(O,bn)}}catch(te){if(te instanceof V.g)throw te;Ot(O,"network-request-failed",{message:String(te)})}})).apply(this,arguments)}function nn(O,E,A,k){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,D.A)(function*(O,E,A,k,te={}){const ue=yield pe(O,E,A,k,te);return"mfaPendingCredential"in ue&&Ot(O,"multi-factor-auth-required",{_serverResponse:ue}),ue})).apply(this,arguments)}function Pr(O,E,A,k){const te=`${E}${A}?${k}`;return O.config.emulator?Ne(O.config,te):`${O.config.apiScheme}://${te}`}function no(O){switch(O){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mr{constructor(E){this.auth=E,this.timer=null,this.promise=new Promise((A,k)=>{this.timer=setTimeout(()=>k(wt(this.auth,"network-request-failed")),Le.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Br(O,E,A){const k={appName:O.name};A.email&&(k.email=A.email),A.phoneNumber&&(k.phoneNumber=A.phoneNumber);const te=wt(O,E,k);return te.customData._tokenResponse=A,te}function ln(O){return void 0!==O&&void 0!==O.enterprise}class Gr{constructor(E){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===E.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=E.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=E.recaptchaEnforcementState}getProviderEnforcementState(E){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const A of this.recaptchaEnforcementState)if(A.provider&&A.provider===E)return no(A.enforcementState);return null}isProviderEnabled(E){return"ENFORCE"===this.getProviderEnforcementState(E)||"AUDIT"===this.getProviderEnforcementState(E)}}function ni(O,E){return lr.apply(this,arguments)}function lr(){return(lr=(0,D.A)(function*(O,E){return pe(O,"GET","/v2/recaptchaConfig",le(O,E))})).apply(this,arguments)}function Co(){return(Co=(0,D.A)(function*(O,E){return pe(O,"POST","/v1/accounts:delete",E)})).apply(this,arguments)}function an(O,E){return zt.apply(this,arguments)}function zt(){return(zt=(0,D.A)(function*(O,E){return pe(O,"POST","/v1/accounts:lookup",E)})).apply(this,arguments)}function $r(O){if(O)try{const E=new Date(Number(O));if(!isNaN(E.getTime()))return E.toUTCString()}catch{}}function ui(){return(ui=(0,D.A)(function*(O,E=!1){const A=(0,V.Ku)(O),k=yield A.getIdToken(E),te=zr(k);De(te&&te.exp&&te.auth_time&&te.iat,A.auth,"internal-error");const ue="object"==typeof te.firebase?te.firebase:void 0,He=ue?.sign_in_provider;return{claims:te,token:k,authTime:$r(li(te.auth_time)),issuedAtTime:$r(li(te.iat)),expirationTime:$r(li(te.exp)),signInProvider:He||null,signInSecondFactor:ue?.sign_in_second_factor||null}})).apply(this,arguments)}function li(O){return 1e3*Number(O)}function zr(O){const[E,A,k]=O.split(".");if(void 0===E||void 0===A||void 0===k)return cr("JWT malformed, contained fewer than 3 sections"),null;try{const te=(0,V.u)(A);return te?JSON.parse(te):(cr("Failed to decode base64 JWT payload"),null)}catch(te){return cr("Caught error parsing JWT payload as JSON",te?.toString()),null}}function Li(O){const E=zr(O);return De(E,"internal-error"),De(typeof E.exp<"u","internal-error"),De(typeof E.iat<"u","internal-error"),Number(E.exp)-Number(E.iat)}function jn(O,E){return Po.apply(this,arguments)}function Po(){return(Po=(0,D.A)(function*(O,E,A=!1){if(A)return E;try{return yield E}catch(k){throw k instanceof V.g&&function Wn({code:O}){return"auth/user-disabled"===O||"auth/user-token-expired"===O}(k)&&O.auth.currentUser===O&&(yield O.auth.signOut()),k}})).apply(this,arguments)}class gi{constructor(E){this.user=E,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(E){var A;if(E){const k=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),k}{this.errorBackoff=3e4;const te=(null!==(A=this.user.stsTokenManager.expirationTime)&&void 0!==A?A:0)-Date.now()-3e5;return Math.max(0,te)}}schedule(E=!1){var A=this;if(!this.isRunning)return;const k=this.getInterval(E);this.timerId=setTimeout((0,D.A)(function*(){yield A.iteration()}),k)}iteration(){var E=this;return(0,D.A)(function*(){try{yield E.user.getIdToken(!0)}catch(A){return void("auth/network-request-failed"===A?.code&&E.schedule(!0))}E.schedule()})()}}class Wo{constructor(E,A){this.createdAt=E,this.lastLoginAt=A,this._initializeTime()}_initializeTime(){this.lastSignInTime=$r(this.lastLoginAt),this.creationTime=$r(this.createdAt)}_copy(E){this.createdAt=E.createdAt,this.lastLoginAt=E.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zr(O){return Si.apply(this,arguments)}function Si(){return(Si=(0,D.A)(function*(O){var E;const A=O.auth,k=yield O.getIdToken(),te=yield jn(O,an(A,{idToken:k}));De(te?.users.length,A,"internal-error");const ue=te.users[0];O._notifyReloadListener(ue);const He=null!==(E=ue.providerUserInfo)&&void 0!==E&&E.length?Ae(ue.providerUserInfo):[],it=function tt(O,E){return[...O.filter(k=>!E.some(te=>te.providerId===k.providerId)),...E]}(O.providerData,He),bn=!!O.isAnonymous&&!(O.email&&ue.passwordHash||it?.length),_r={uid:ue.localId,displayName:ue.displayName||null,photoURL:ue.photoUrl||null,email:ue.email||null,emailVerified:ue.emailVerified||!1,phoneNumber:ue.phoneNumber||null,tenantId:ue.tenantId||null,providerData:it,metadata:new Wo(ue.createdAt,ue.lastLoginAt),isAnonymous:bn};Object.assign(O,_r)})).apply(this,arguments)}function he(){return(he=(0,D.A)(function*(O){const E=(0,V.Ku)(O);yield Zr(E),yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)})).apply(this,arguments)}function Ae(O){return O.map(E=>{var{providerId:A}=E,k=(0,nt.Tt)(E,["providerId"]);return{providerId:A,uid:k.rawId||"",displayName:k.displayName||null,email:k.email||null,phoneNumber:k.phoneNumber||null,photoURL:k.photoUrl||null}})}function de(){return(de=(0,D.A)(function*(O,E){const A=yield Wt(O,{},(0,D.A)(function*(){const k=(0,V.Am)({grant_type:"refresh_token",refresh_token:E}).slice(1),{tokenApiHost:te,apiKey:ue}=O.config,He=Pr(O,te,"/v1/token",`key=${ue}`),it=yield O._getAdditionalHeaders();return it["Content-Type"]="application/x-www-form-urlencoded",Ue.fetch()(He,{method:"POST",headers:it,body:k})}));return{accessToken:A.access_token,expiresIn:A.expires_in,refreshToken:A.refresh_token}})).apply(this,arguments)}function Se(){return(Se=(0,D.A)(function*(O,E){return pe(O,"POST","/v2/accounts:revokeToken",le(O,E))})).apply(this,arguments)}class ht{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(E){De(E.idToken,"internal-error"),De(typeof E.idToken<"u","internal-error"),De(typeof E.refreshToken<"u","internal-error");const A="expiresIn"in E&&typeof E.expiresIn<"u"?Number(E.expiresIn):Li(E.idToken);this.updateTokensAndExpiration(E.idToken,E.refreshToken,A)}updateFromIdToken(E){De(0!==E.length,"internal-error");const A=Li(E);this.updateTokensAndExpiration(E,null,A)}getToken(E,A=!1){var k=this;return(0,D.A)(function*(){return A||!k.accessToken||k.isExpired?(De(k.refreshToken,E,"user-token-expired"),k.refreshToken?(yield k.refresh(E,k.refreshToken),k.accessToken):null):k.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(E,A){var k=this;return(0,D.A)(function*(){const{accessToken:te,refreshToken:ue,expiresIn:He}=yield function Qe(O,E){return de.apply(this,arguments)}(E,A);k.updateTokensAndExpiration(te,ue,Number(He))})()}updateTokensAndExpiration(E,A,k){this.refreshToken=A||null,this.accessToken=E||null,this.expirationTime=Date.now()+1e3*k}static fromJSON(E,A){const{refreshToken:k,accessToken:te,expirationTime:ue}=A,He=new ht;return k&&(De("string"==typeof k,"internal-error",{appName:E}),He.refreshToken=k),te&&(De("string"==typeof te,"internal-error",{appName:E}),He.accessToken=te),ue&&(De("number"==typeof ue,"internal-error",{appName:E}),He.expirationTime=ue),He}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(E){this.accessToken=E.accessToken,this.refreshToken=E.refreshToken,this.expirationTime=E.expirationTime}_clone(){return Object.assign(new ht,this.toJSON())}_performRefresh(){return tn("not implemented")}}function qe(O,E){De("string"==typeof O||typeof O>"u","internal-error",{appName:E})}class Kt{constructor(E){var{uid:A,auth:k,stsTokenManager:te}=E,ue=(0,nt.Tt)(E,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=A,this.auth=k,this.stsTokenManager=te,this.accessToken=te.accessToken,this.displayName=ue.displayName||null,this.email=ue.email||null,this.emailVerified=ue.emailVerified||!1,this.phoneNumber=ue.phoneNumber||null,this.photoURL=ue.photoURL||null,this.isAnonymous=ue.isAnonymous||!1,this.tenantId=ue.tenantId||null,this.providerData=ue.providerData?[...ue.providerData]:[],this.metadata=new Wo(ue.createdAt||void 0,ue.lastLoginAt||void 0)}getIdToken(E){var A=this;return(0,D.A)(function*(){const k=yield jn(A,A.stsTokenManager.getToken(A.auth,E));return De(k,A.auth,"internal-error"),A.accessToken!==k&&(A.accessToken=k,yield A.auth._persistUserIfCurrent(A),A.auth._notifyListenersIfCurrent(A)),k})()}getIdTokenResult(E){return function Nr(O){return ui.apply(this,arguments)}(this,E)}reload(){return function fr(O){return he.apply(this,arguments)}(this)}_assign(E){this!==E&&(De(this.uid===E.uid,this.auth,"internal-error"),this.displayName=E.displayName,this.photoURL=E.photoURL,this.email=E.email,this.emailVerified=E.emailVerified,this.phoneNumber=E.phoneNumber,this.isAnonymous=E.isAnonymous,this.tenantId=E.tenantId,this.providerData=E.providerData.map(A=>Object.assign({},A)),this.metadata._copy(E.metadata),this.stsTokenManager._assign(E.stsTokenManager))}_clone(E){const A=new Kt(Object.assign(Object.assign({},this),{auth:E,stsTokenManager:this.stsTokenManager._clone()}));return A.metadata._copy(this.metadata),A}_onReload(E){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=E,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(E){this.reloadListener?this.reloadListener(E):this.reloadUserInfo=E}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(E,A=!1){var k=this;return(0,D.A)(function*(){let te=!1;E.idToken&&E.idToken!==k.stsTokenManager.accessToken&&(k.stsTokenManager.updateFromServerResponse(E),te=!0),A&&(yield Zr(k)),yield k.auth._persistUserIfCurrent(k),te&&k.auth._notifyListenersIfCurrent(k)})()}delete(){var E=this;return(0,D.A)(function*(){if((0,R.xZ)(E.auth.app))return Promise.reject(kt(E.auth));const A=yield E.getIdToken();return yield jn(E,function sn(O,E){return Co.apply(this,arguments)}(E.auth,{idToken:A})),E.stsTokenManager.clearRefreshToken(),E.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(E=>Object.assign({},E)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(E,A){var k,te,ue,He,it,Vt,wn,bn;const _r=null!==(k=A.displayName)&&void 0!==k?k:void 0,fs=null!==(te=A.email)&&void 0!==te?te:void 0,nu=null!==(ue=A.phoneNumber)&&void 0!==ue?ue:void 0,Sl=null!==(He=A.photoURL)&&void 0!==He?He:void 0,Ph=null!==(it=A.tenantId)&&void 0!==it?it:void 0,Ua=null!==(Vt=A._redirectEventId)&&void 0!==Vt?Vt:void 0,ed=null!==(wn=A.createdAt)&&void 0!==wn?wn:void 0,Nf=null!==(bn=A.lastLoginAt)&&void 0!==bn?bn:void 0,{uid:Rr,emailVerified:Dl,isAnonymous:oc,providerData:eo,stsTokenManager:td}=A;De(Rr&&td,E,"internal-error");const ru=ht.fromJSON(this.name,td);De("string"==typeof Rr,E,"internal-error"),qe(_r,E.name),qe(fs,E.name),De("boolean"==typeof Dl,E,"internal-error"),De("boolean"==typeof oc,E,"internal-error"),qe(nu,E.name),qe(Sl,E.name),qe(Ph,E.name),qe(Ua,E.name),qe(ed,E.name),qe(Nf,E.name);const sc=new Kt({uid:Rr,auth:E,email:fs,emailVerified:Dl,displayName:_r,isAnonymous:oc,photoURL:Sl,phoneNumber:nu,tenantId:Ph,stsTokenManager:ru,createdAt:ed,lastLoginAt:Nf});return eo&&Array.isArray(eo)&&(sc.providerData=eo.map(gr=>Object.assign({},gr))),Ua&&(sc._redirectEventId=Ua),sc}static _fromIdTokenResponse(E,A,k=!1){return(0,D.A)(function*(){const te=new ht;te.updateFromServerResponse(A);const ue=new Kt({uid:A.localId,auth:E,stsTokenManager:te,isAnonymous:k});return yield Zr(ue),ue})()}static _fromGetAccountInfoResponse(E,A,k){return(0,D.A)(function*(){const te=A.users[0];De(void 0!==te.localId,"internal-error");const ue=void 0!==te.providerUserInfo?Ae(te.providerUserInfo):[],He=!(te.email&&te.passwordHash||ue?.length),it=new ht;it.updateFromIdToken(k);const Vt=new Kt({uid:te.localId,auth:E,stsTokenManager:it,isAnonymous:He}),wn={uid:te.localId,displayName:te.displayName||null,photoURL:te.photoUrl||null,email:te.email||null,emailVerified:te.emailVerified||!1,phoneNumber:te.phoneNumber||null,tenantId:te.tenantId||null,providerData:ue,metadata:new Wo(te.createdAt,te.lastLoginAt),isAnonymous:!(te.email&&te.passwordHash||ue?.length)};return Object.assign(Vt,wn),Vt})()}}const An=new Map;function Hn(O){gt(O instanceof Function,"Expected a class definition");let E=An.get(O);return E?(gt(E instanceof O,"Instance stored in cache mismatched with class"),E):(E=new O,An.set(O,E),E)}const wr=(()=>{class O{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(A,k){var te=this;return(0,D.A)(function*(){te.storage[A]=k})()}_get(A){var k=this;return(0,D.A)(function*(){const te=k.storage[A];return void 0===te?null:te})()}_remove(A){var k=this;return(0,D.A)(function*(){delete k.storage[A]})()}_addListener(A,k){}_removeListener(A,k){}}return O.type="NONE",O})();function ri(O,E,A){return`firebase:${O}:${E}:${A}`}class qn{constructor(E,A,k){this.persistence=E,this.auth=A,this.userKey=k;const{config:te,name:ue}=this.auth;this.fullUserKey=ri(this.userKey,te.apiKey,ue),this.fullPersistenceKey=ri("persistence",te.apiKey,ue),this.boundEventHandler=A._onStorageEvent.bind(A),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(E){return this.persistence._set(this.fullUserKey,E.toJSON())}getCurrentUser(){var E=this;return(0,D.A)(function*(){const A=yield E.persistence._get(E.fullUserKey);return A?Kt._fromJSON(E.auth,A):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(E){var A=this;return(0,D.A)(function*(){if(A.persistence===E)return;const k=yield A.getCurrentUser();return yield A.removeCurrentUser(),A.persistence=E,k?A.setCurrentUser(k):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(E,A,k="authUser"){return(0,D.A)(function*(){if(!A.length)return new qn(Hn(wr),E,k);const te=(yield Promise.all(A.map(function(){var wn=(0,D.A)(function*(bn){if(yield bn._isAvailable())return bn});return function(bn){return wn.apply(this,arguments)}}()))).filter(wn=>wn);let ue=te[0]||Hn(wr);const He=ri(k,E.config.apiKey,E.name);let it=null;for(const wn of A)try{const bn=yield wn._get(He);if(bn){const _r=Kt._fromJSON(E,bn);wn!==ue&&(it=_r),ue=wn;break}}catch{}const Vt=te.filter(wn=>wn._shouldAllowMigration);return ue._shouldAllowMigration&&Vt.length?(ue=Vt[0],it&&(yield ue._set(He,it.toJSON())),yield Promise.all(A.map(function(){var wn=(0,D.A)(function*(bn){if(bn!==ue)try{yield bn._remove(He)}catch{}});return function(bn){return wn.apply(this,arguments)}}())),new qn(ue,E,k)):new qn(ue,E,k)})()}}function Vi(O){const E=O.toLowerCase();if(E.includes("opera/")||E.includes("opr/")||E.includes("opios/"))return"Opera";if(po(E))return"IEMobile";if(E.includes("msie")||E.includes("trident/"))return"IE";if(E.includes("edge/"))return"Edge";if(Ur(E))return"Firefox";if(E.includes("silk/"))return"Silk";if(ms(E))return"Blackberry";if(hc(E))return"Webos";if(ii(E))return"Safari";if((E.includes("chrome/")||Ns(E))&&!E.includes("edge/"))return"Chrome";if(oo(E))return"Android";{const k=O.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===k?.length)return k[1]}return"Other"}function Ur(O=(0,V.ZQ)()){return/firefox\//i.test(O)}function ii(O=(0,V.ZQ)()){const E=O.toLowerCase();return E.includes("safari/")&&!E.includes("chrome/")&&!E.includes("crios/")&&!E.includes("android")}function Ns(O=(0,V.ZQ)()){return/crios\//i.test(O)}function po(O=(0,V.ZQ)()){return/iemobile/i.test(O)}function oo(O=(0,V.ZQ)()){return/android/i.test(O)}function ms(O=(0,V.ZQ)()){return/blackberry/i.test(O)}function hc(O=(0,V.ZQ)()){return/webos/i.test(O)}function Sa(O=(0,V.ZQ)()){return/iphone|ipad|ipod/i.test(O)||/macintosh/i.test(O)&&/mobile/i.test(O)}function St(O=(0,V.ZQ)()){return Sa(O)||oo(O)||hc(O)||ms(O)||/windows phone/i.test(O)||po(O)}function Ln(O,E=[]){let A;switch(O){case"Browser":A=Vi((0,V.ZQ)());break;case"Worker":A=`${Vi((0,V.ZQ)())}-${O}`;break;default:A=O}const k=E.length?E.join(","):"FirebaseCore-web";return`${A}/JsCore/${R.MF}/${k}`}class Rn{constructor(E){this.auth=E,this.queue=[]}pushCallback(E,A){const k=ue=>new Promise((He,it)=>{try{He(E(ue))}catch(Vt){it(Vt)}});k.onAbort=A,this.queue.push(k);const te=this.queue.length-1;return()=>{this.queue[te]=()=>Promise.resolve()}}runMiddleware(E){var A=this;return(0,D.A)(function*(){if(A.auth.currentUser===E)return;const k=[];try{for(const te of A.queue)yield te(E),te.onAbort&&k.push(te.onAbort)}catch(te){k.reverse();for(const ue of k)try{ue()}catch{}throw A.auth._errorFactory.create("login-blocked",{originalMessage:te?.message})}})()}}function Ir(){return(Ir=(0,D.A)(function*(O,E={}){return pe(O,"GET","/v2/passwordPolicy",le(O,E))})).apply(this,arguments)}class Gi{constructor(E){var A,k,te,ue;const He=E.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(A=He.minPasswordLength)&&void 0!==A?A:6,He.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=He.maxPasswordLength),void 0!==He.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=He.containsLowercaseCharacter),void 0!==He.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=He.containsUppercaseCharacter),void 0!==He.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=He.containsNumericCharacter),void 0!==He.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=He.containsNonAlphanumericCharacter),this.enforcementState=E.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(te=null===(k=E.allowedNonAlphanumericCharacters)||void 0===k?void 0:k.join(""))&&void 0!==te?te:"",this.forceUpgradeOnSignin=null!==(ue=E.forceUpgradeOnSignin)&&void 0!==ue&&ue,this.schemaVersion=E.schemaVersion}validatePassword(E){var A,k,te,ue,He,it;const Vt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(E,Vt),this.validatePasswordCharacterOptions(E,Vt),Vt.isValid&&(Vt.isValid=null===(A=Vt.meetsMinPasswordLength)||void 0===A||A),Vt.isValid&&(Vt.isValid=null===(k=Vt.meetsMaxPasswordLength)||void 0===k||k),Vt.isValid&&(Vt.isValid=null===(te=Vt.containsLowercaseLetter)||void 0===te||te),Vt.isValid&&(Vt.isValid=null===(ue=Vt.containsUppercaseLetter)||void 0===ue||ue),Vt.isValid&&(Vt.isValid=null===(He=Vt.containsNumericCharacter)||void 0===He||He),Vt.isValid&&(Vt.isValid=null===(it=Vt.containsNonAlphanumericCharacter)||void 0===it||it),Vt}validatePasswordLengthOptions(E,A){const k=this.customStrengthOptions.minPasswordLength,te=this.customStrengthOptions.maxPasswordLength;k&&(A.meetsMinPasswordLength=E.length>=k),te&&(A.meetsMaxPasswordLength=E.length<=te)}validatePasswordCharacterOptions(E,A){let k;this.updatePasswordCharacterOptionsStatuses(A,!1,!1,!1,!1);for(let te=0;te<E.length;te++)k=E.charAt(te),this.updatePasswordCharacterOptionsStatuses(A,k>="a"&&k<="z",k>="A"&&k<="Z",k>="0"&&k<="9",this.allowedNonAlphanumericCharacters.includes(k))}updatePasswordCharacterOptionsStatuses(E,A,k,te,ue){this.customStrengthOptions.containsLowercaseLetter&&(E.containsLowercaseLetter||(E.containsLowercaseLetter=A)),this.customStrengthOptions.containsUppercaseLetter&&(E.containsUppercaseLetter||(E.containsUppercaseLetter=k)),this.customStrengthOptions.containsNumericCharacter&&(E.containsNumericCharacter||(E.containsNumericCharacter=te)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(E.containsNonAlphanumericCharacter||(E.containsNonAlphanumericCharacter=ue))}}class No{constructor(E,A,k,te){this.app=E,this.heartbeatServiceProvider=A,this.appCheckServiceProvider=k,this.config=te,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pc(this),this.idTokenSubscription=new pc(this),this.beforeStateQueue=new Rn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ut,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=E.name,this.clientVersion=te.sdkClientVersion}_initializeWithPersistence(E,A){var k=this;return A&&(this._popupRedirectResolver=Hn(A)),this._initializationPromise=this.queue((0,D.A)(function*(){var te,ue;if(!k._deleted&&(k.persistenceManager=yield qn.create(k,E),!k._deleted)){if(null!==(te=k._popupRedirectResolver)&&void 0!==te&&te._shouldInitProactively)try{yield k._popupRedirectResolver._initialize(k)}catch{}yield k.initializeCurrentUser(A),k.lastNotifiedUid=(null===(ue=k.currentUser)||void 0===ue?void 0:ue.uid)||null,!k._deleted&&(k._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var E=this;return(0,D.A)(function*(){if(E._deleted)return;const A=yield E.assertedPersistence.getCurrentUser();if(E.currentUser||A){if(E.currentUser&&A&&E.currentUser.uid===A.uid)return E._currentUser._assign(A),void(yield E.currentUser.getIdToken());yield E._updateCurrentUser(A,!0)}})()}initializeCurrentUserFromIdToken(E){var A=this;return(0,D.A)(function*(){try{const k=yield an(A,{idToken:E}),te=yield Kt._fromGetAccountInfoResponse(A,k,E);yield A.directlySetCurrentUser(te)}catch(k){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",k),yield A.directlySetCurrentUser(null)}})()}initializeCurrentUser(E){var A=this;return(0,D.A)(function*(){var k;if((0,R.xZ)(A.app)){const it=A.app.settings.authIdToken;return it?new Promise(Vt=>{setTimeout(()=>A.initializeCurrentUserFromIdToken(it).then(Vt,Vt))}):A.directlySetCurrentUser(null)}const te=yield A.assertedPersistence.getCurrentUser();let ue=te,He=!1;if(E&&A.config.authDomain){yield A.getOrInitRedirectPersistenceManager();const it=null===(k=A.redirectUser)||void 0===k?void 0:k._redirectEventId,Vt=ue?._redirectEventId,wn=yield A.tryRedirectSignIn(E);(!it||it===Vt)&&wn?.user&&(ue=wn.user,He=!0)}if(!ue)return A.directlySetCurrentUser(null);if(!ue._redirectEventId){if(He)try{yield A.beforeStateQueue.runMiddleware(ue)}catch(it){ue=te,A._popupRedirectResolver._overrideRedirectResult(A,()=>Promise.reject(it))}return ue?A.reloadAndSetCurrentUserOrClear(ue):A.directlySetCurrentUser(null)}return De(A._popupRedirectResolver,A,"argument-error"),yield A.getOrInitRedirectPersistenceManager(),A.redirectUser&&A.redirectUser._redirectEventId===ue._redirectEventId?A.directlySetCurrentUser(ue):A.reloadAndSetCurrentUserOrClear(ue)})()}tryRedirectSignIn(E){var A=this;return(0,D.A)(function*(){let k=null;try{k=yield A._popupRedirectResolver._completeRedirectFn(A,E,!0)}catch{yield A._setRedirectUser(null)}return k})()}reloadAndSetCurrentUserOrClear(E){var A=this;return(0,D.A)(function*(){try{yield Zr(E)}catch(k){if("auth/network-request-failed"!==k?.code)return A.directlySetCurrentUser(null)}return A.directlySetCurrentUser(E)})()}useDeviceLanguage(){this.languageCode=function Tr(){if(typeof navigator>"u")return null;const O=navigator;return O.languages&&O.languages[0]||O.language||null}()}_delete(){var E=this;return(0,D.A)(function*(){E._deleted=!0})()}updateCurrentUser(E){var A=this;return(0,D.A)(function*(){if((0,R.xZ)(A.app))return Promise.reject(kt(A));const k=E?(0,V.Ku)(E):null;return k&&De(k.auth.config.apiKey===A.config.apiKey,A,"invalid-user-token"),A._updateCurrentUser(k&&k._clone(A))})()}_updateCurrentUser(E,A=!1){var k=this;return(0,D.A)(function*(){if(!k._deleted)return E&&De(k.tenantId===E.tenantId,k,"tenant-id-mismatch"),A||(yield k.beforeStateQueue.runMiddleware(E)),k.queue((0,D.A)(function*(){yield k.directlySetCurrentUser(E),k.notifyAuthListeners()}))})()}signOut(){var E=this;return(0,D.A)(function*(){return(0,R.xZ)(E.app)?Promise.reject(kt(E)):(yield E.beforeStateQueue.runMiddleware(null),(E.redirectPersistenceManager||E._popupRedirectResolver)&&(yield E._setRedirectUser(null)),E._updateCurrentUser(null,!0))})()}setPersistence(E){var A=this;return(0,R.xZ)(this.app)?Promise.reject(kt(this)):this.queue((0,D.A)(function*(){yield A.assertedPersistence.setPersistence(Hn(E))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(E){var A=this;return(0,D.A)(function*(){A._getPasswordPolicyInternal()||(yield A._updatePasswordPolicy());const k=A._getPasswordPolicyInternal();return k.schemaVersion!==A.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(A._errorFactory.create("unsupported-password-policy-schema-version",{})):k.validatePassword(E)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var E=this;return(0,D.A)(function*(){const A=yield function kn(O){return Ir.apply(this,arguments)}(E),k=new Gi(A);null===E.tenantId?E._projectPasswordPolicy=k:E._tenantPasswordPolicies[E.tenantId]=k})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(E){this._errorFactory=new V.FA("auth","Firebase",E())}onAuthStateChanged(E,A,k){return this.registerStateListener(this.authStateSubscription,E,A,k)}beforeAuthStateChanged(E,A){return this.beforeStateQueue.pushCallback(E,A)}onIdTokenChanged(E,A,k){return this.registerStateListener(this.idTokenSubscription,E,A,k)}authStateReady(){return new Promise((E,A)=>{if(this.currentUser)E();else{const k=this.onAuthStateChanged(()=>{k(),E()},A)}})}revokeAccessToken(E){var A=this;return(0,D.A)(function*(){if(A.currentUser){const k=yield A.currentUser.getIdToken(),te={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:E,idToken:k};null!=A.tenantId&&(te.tenantId=A.tenantId),yield function ge(O,E){return Se.apply(this,arguments)}(A,te)}})()}toJSON(){var E;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(E=this._currentUser)||void 0===E?void 0:E.toJSON()}}_setRedirectUser(E,A){var k=this;return(0,D.A)(function*(){const te=yield k.getOrInitRedirectPersistenceManager(A);return null===E?te.removeCurrentUser():te.setCurrentUser(E)})()}getOrInitRedirectPersistenceManager(E){var A=this;return(0,D.A)(function*(){if(!A.redirectPersistenceManager){const k=E&&Hn(E)||A._popupRedirectResolver;De(k,A,"argument-error"),A.redirectPersistenceManager=yield qn.create(A,[Hn(k._redirectPersistence)],"redirectUser"),A.redirectUser=yield A.redirectPersistenceManager.getCurrentUser()}return A.redirectPersistenceManager})()}_redirectUserForId(E){var A=this;return(0,D.A)(function*(){var k,te;return A._isInitialized&&(yield A.queue((0,D.A)(function*(){}))),(null===(k=A._currentUser)||void 0===k?void 0:k._redirectEventId)===E?A._currentUser:(null===(te=A.redirectUser)||void 0===te?void 0:te._redirectEventId)===E?A.redirectUser:null})()}_persistUserIfCurrent(E){var A=this;return(0,D.A)(function*(){if(E===A.currentUser)return A.queue((0,D.A)(function*(){return A.directlySetCurrentUser(E)}))})()}_notifyListenersIfCurrent(E){E===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var E,A;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const k=null!==(A=null===(E=this.currentUser)||void 0===E?void 0:E.uid)&&void 0!==A?A:null;this.lastNotifiedUid!==k&&(this.lastNotifiedUid=k,this.authStateSubscription.next(this.currentUser))}registerStateListener(E,A,k,te){if(this._deleted)return()=>{};const ue="function"==typeof A?A:A.next.bind(A);let He=!1;const it=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(it,this,"internal-error"),it.then(()=>{He||ue(this.currentUser)}),"function"==typeof A){const Vt=E.addObserver(A,k,te);return()=>{He=!0,Vt()}}{const Vt=E.addObserver(A);return()=>{He=!0,Vt()}}}directlySetCurrentUser(E){var A=this;return(0,D.A)(function*(){A.currentUser&&A.currentUser!==E&&A._currentUser._stopProactiveRefresh(),E&&A.isProactiveRefreshEnabled&&E._startProactiveRefresh(),A.currentUser=E,E?yield A.assertedPersistence.setCurrentUser(E):yield A.assertedPersistence.removeCurrentUser()})()}queue(E){return this.operations=this.operations.then(E,E),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(E){!E||this.frameworks.includes(E)||(this.frameworks.push(E),this.frameworks.sort(),this.clientVersion=Ln(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var E=this;return(0,D.A)(function*(){var A;const k={"X-Client-Version":E.clientVersion};E.app.options.appId&&(k["X-Firebase-gmpid"]=E.app.options.appId);const te=yield null===(A=E.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===A?void 0:A.getHeartbeatsHeader();te&&(k["X-Firebase-Client"]=te);const ue=yield E._getAppCheckToken();return ue&&(k["X-Firebase-AppCheck"]=ue),k})()}_getAppCheckToken(){var E=this;return(0,D.A)(function*(){var A;const k=yield null===(A=E.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===A?void 0:A.getToken();return k?.error&&function Xn(O,...E){$t.logLevel<=We.$b.WARN&&$t.warn(`Auth (${R.MF}): ${O}`,...E)}(`Error while retrieving App Check token: ${k.error}`),k?.token})()}}function Qr(O){return(0,V.Ku)(O)}class pc{constructor(E){this.auth=E,this.observer=null,this.addObserver=(0,V.tD)(A=>this.observer=A)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let aa={loadJS:()=>(0,D.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ha(O){return aa.loadJS(O)}function ca(O){return`__${O}${Math.floor(1e6*Math.random())}`}class Bi{constructor(E){this.type="recaptcha-enterprise",this.auth=Qr(E)}verify(E="verify",A=!1){var k=this;return(0,D.A)(function*(){function ue(){return ue=(0,D.A)(function*(it){if(!A){if(null==it.tenantId&&null!=it._agentRecaptchaConfig)return it._agentRecaptchaConfig.siteKey;if(null!=it.tenantId&&void 0!==it._tenantRecaptchaConfigs[it.tenantId])return it._tenantRecaptchaConfigs[it.tenantId].siteKey}return new Promise(function(){var Vt=(0,D.A)(function*(wn,bn){ni(it,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_r=>{if(void 0!==_r.recaptchaKey){const fs=new Gr(_r);return null==it.tenantId?it._agentRecaptchaConfig=fs:it._tenantRecaptchaConfigs[it.tenantId]=fs,wn(fs.siteKey)}bn(new Error("recaptcha Enterprise site key undefined"))}).catch(_r=>{bn(_r)})});return function(wn,bn){return Vt.apply(this,arguments)}}())}),ue.apply(this,arguments)}function He(it,Vt,wn){const bn=window.grecaptcha;ln(bn)?bn.enterprise.ready(()=>{bn.enterprise.execute(it,{action:E}).then(_r=>{Vt(_r)}).catch(()=>{Vt("NO_RECAPTCHA")})}):wn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((it,Vt)=>{(function te(it){return ue.apply(this,arguments)})(k.auth).then(wn=>{if(!A&&ln(window.grecaptcha))He(wn,it,Vt);else{if(typeof window>"u")return void Vt(new Error("RecaptchaVerifier is only supported in browser"));let bn=function Lc(){return aa.recaptchaEnterpriseScript}();0!==bn.length&&(bn+=wn),Ha(bn).then(()=>{He(wn,it,Vt)}).catch(_r=>{Vt(_r)})}}).catch(wn=>{Vt(wn)})})})()}}function Ma(O,E,A){return Io.apply(this,arguments)}function Io(){return(Io=(0,D.A)(function*(O,E,A,k=!1){const te=new Bi(O);let ue;try{ue=yield te.verify(A)}catch{ue=yield te.verify(A,!0)}const He=Object.assign({},E);return Object.assign(He,k?{captchaResp:ue}:{captchaResponse:ue}),Object.assign(He,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(He,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),He})).apply(this,arguments)}function Zn(O,E,A,k){return Js.apply(this,arguments)}function Js(){return Js=(0,D.A)(function*(O,E,A,k){var te;if(null!==(te=O._getRecaptchaConfig())&&void 0!==te&&te.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const ue=yield Ma(O,E,A,"getOobCode"===A);return k(O,ue)}return k(O,E).catch(function(){var ue=(0,D.A)(function*(He){if("auth/missing-recaptcha-token"===He.code){console.log(`${A} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const it=yield Ma(O,E,A,"getOobCode"===A);return k(O,it)}return Promise.reject(He)});return function(He){return ue.apply(this,arguments)}}())}),Js.apply(this,arguments)}function ks(O){const E=O.indexOf(":");return E<0?"":O.substr(0,E+1)}function Ui(O){if(!O)return null;const E=Number(O);return isNaN(E)?null:E}class qo{constructor(E,A){this.providerId=E,this.signInMethod=A}toJSON(){return tn("not implemented")}_getIdTokenResponse(E){return tn("not implemented")}_linkToIdToken(E,A){return tn("not implemented")}_getReauthenticationResolver(E){return tn("not implemented")}}function Fo(O,E){return ua.apply(this,arguments)}function ua(){return(ua=(0,D.A)(function*(O,E){return pe(O,"POST","/v1/accounts:signUp",E)})).apply(this,arguments)}function Ga(O,E){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,D.A)(function*(O,E){return nn(O,"POST","/v1/accounts:signInWithPassword",le(O,E))})).apply(this,arguments)}function go(){return(go=(0,D.A)(function*(O,E){return nn(O,"POST","/v1/accounts:signInWithEmailLink",le(O,E))})).apply(this,arguments)}function rs(){return(rs=(0,D.A)(function*(O,E){return nn(O,"POST","/v1/accounts:signInWithEmailLink",le(O,E))})).apply(this,arguments)}class la extends qo{constructor(E,A,k,te=null){super("password",k),this._email=E,this._password=A,this._tenantId=te}static _fromEmailAndPassword(E,A){return new la(E,A,"password")}static _fromEmailAndCode(E,A,k=null){return new la(E,A,"emailLink",k)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(E){const A="string"==typeof E?JSON.parse(E):E;if(A?.email&&A?.password){if("password"===A.signInMethod)return this._fromEmailAndPassword(A.email,A.password);if("emailLink"===A.signInMethod)return this._fromEmailAndCode(A.email,A.password,A.tenantId)}return null}_getIdTokenResponse(E){var A=this;return(0,D.A)(function*(){switch(A.signInMethod){case"password":return Zn(E,{returnSecureToken:!0,email:A._email,password:A._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ga);case"emailLink":return function mc(O,E){return go.apply(this,arguments)}(E,{email:A._email,oobCode:A._password});default:Ot(E,"internal-error")}})()}_linkToIdToken(E,A){var k=this;return(0,D.A)(function*(){switch(k.signInMethod){case"password":return Zn(E,{idToken:A,returnSecureToken:!0,email:k._email,password:k._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fo);case"emailLink":return function Na(O,E){return rs.apply(this,arguments)}(E,{idToken:A,email:k._email,oobCode:k._password});default:Ot(E,"internal-error")}})()}_getReauthenticationResolver(E){return this._getIdTokenResponse(E)}}function mo(O,E){return za.apply(this,arguments)}function za(){return(za=(0,D.A)(function*(O,E){return nn(O,"POST","/v1/accounts:signInWithIdp",le(O,E))})).apply(this,arguments)}class Xo extends qo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(E){const A=new Xo(E.providerId,E.signInMethod);return E.idToken||E.accessToken?(E.idToken&&(A.idToken=E.idToken),E.accessToken&&(A.accessToken=E.accessToken),E.nonce&&!E.pendingToken&&(A.nonce=E.nonce),E.pendingToken&&(A.pendingToken=E.pendingToken)):E.oauthToken&&E.oauthTokenSecret?(A.accessToken=E.oauthToken,A.secret=E.oauthTokenSecret):Ot("argument-error"),A}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(E){const A="string"==typeof E?JSON.parse(E):E,{providerId:k,signInMethod:te}=A,ue=(0,nt.Tt)(A,["providerId","signInMethod"]);if(!k||!te)return null;const He=new Xo(k,te);return He.idToken=ue.idToken||void 0,He.accessToken=ue.accessToken||void 0,He.secret=ue.secret,He.nonce=ue.nonce,He.pendingToken=ue.pendingToken||null,He}_getIdTokenResponse(E){return mo(E,this.buildRequest())}_linkToIdToken(E,A){const k=this.buildRequest();return k.idToken=A,mo(E,k)}_getReauthenticationResolver(E){const A=this.buildRequest();return A.autoCreate=!1,mo(E,A)}buildRequest(){const E={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)E.pendingToken=this.pendingToken;else{const A={};this.idToken&&(A.id_token=this.idToken),this.accessToken&&(A.access_token=this.accessToken),this.secret&&(A.oauth_token_secret=this.secret),A.providerId=this.providerId,this.nonce&&!this.pendingToken&&(A.nonce=this.nonce),E.postBody=(0,V.Am)(A)}return E}}class da{constructor(E){var A,k,te,ue,He,it;const Vt=(0,V.I9)((0,V.hp)(E)),wn=null!==(A=Vt.apiKey)&&void 0!==A?A:null,bn=null!==(k=Vt.oobCode)&&void 0!==k?k:null,_r=function hr(O){switch(O){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(te=Vt.mode)&&void 0!==te?te:null);De(wn&&bn&&_r,"argument-error"),this.apiKey=wn,this.operation=_r,this.code=bn,this.continueUrl=null!==(ue=Vt.continueUrl)&&void 0!==ue?ue:null,this.languageCode=null!==(He=Vt.languageCode)&&void 0!==He?He:null,this.tenantId=null!==(it=Vt.tenantId)&&void 0!==it?it:null}static parseLink(E){const A=function Fs(O){const E=(0,V.I9)((0,V.hp)(O)).link,A=E?(0,V.I9)((0,V.hp)(E)).deep_link_id:null,k=(0,V.I9)((0,V.hp)(O)).deep_link_id;return(k?(0,V.I9)((0,V.hp)(k)).link:null)||k||A||E||O}(E);try{return new da(A)}catch{return null}}}let pu=(()=>{class O{constructor(){this.providerId=O.PROVIDER_ID}static credential(A,k){return la._fromEmailAndPassword(A,k)}static credentialWithLink(A,k){const te=da.parseLink(k);return De(te,"argument-error"),la._fromEmailAndCode(A,te.code,te.tenantId)}}return O.PROVIDER_ID="password",O.EMAIL_PASSWORD_SIGN_IN_METHOD="password",O.EMAIL_LINK_SIGN_IN_METHOD="emailLink",O})();class ro{constructor(E){this.providerId=E,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(E){this.defaultLanguageCode=E}setCustomParameters(E){return this.customParameters=E,this}getCustomParameters(){return this.customParameters}}class ha extends ro{constructor(){super(...arguments),this.scopes=[]}addScope(E){return this.scopes.includes(E)||this.scopes.push(E),this}getScopes(){return[...this.scopes]}}let gu=(()=>{class O extends ha{constructor(){super("google.com"),this.addScope("profile")}static credential(A,k){return Xo._fromParams({providerId:O.PROVIDER_ID,signInMethod:O.GOOGLE_SIGN_IN_METHOD,idToken:A,accessToken:k})}static credentialFromResult(A){return O.credentialFromTaggedObject(A)}static credentialFromError(A){return O.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A)return null;const{oauthIdToken:k,oauthAccessToken:te}=A;if(!k&&!te)return null;try{return O.credential(k,te)}catch{return null}}}return O.GOOGLE_SIGN_IN_METHOD="google.com",O.PROVIDER_ID="google.com",O})(),vc=(()=>{class O extends ha{constructor(){super("github.com")}static credential(A){return Xo._fromParams({providerId:O.PROVIDER_ID,signInMethod:O.GITHUB_SIGN_IN_METHOD,accessToken:A})}static credentialFromResult(A){return O.credentialFromTaggedObject(A)}static credentialFromError(A){return O.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A||!("oauthAccessToken"in A)||!A.oauthAccessToken)return null;try{return O.credential(A.oauthAccessToken)}catch{return null}}}return O.GITHUB_SIGN_IN_METHOD="github.com",O.PROVIDER_ID="github.com",O})();function Wr(O,E){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,D.A)(function*(O,E){return nn(O,"POST","/v1/accounts:signUp",le(O,E))})).apply(this,arguments)}class Sr{constructor(E){this.user=E.user,this.providerId=E.providerId,this._tokenResponse=E._tokenResponse,this.operationType=E.operationType}static _fromIdTokenResponse(E,A,k,te=!1){return(0,D.A)(function*(){const ue=yield Kt._fromIdTokenResponse(E,k,te),He=is(k);return new Sr({user:ue,providerId:He,_tokenResponse:k,operationType:A})})()}static _forOperation(E,A,k){return(0,D.A)(function*(){yield E._updateTokensIfNecessary(k,!0);const te=is(k);return new Sr({user:E,providerId:te,_tokenResponse:k,operationType:A})})()}}function is(O){return O.providerId?O.providerId:"phoneNumber"in O?"phone":null}class ta extends V.g{constructor(E,A,k,te){var ue;super(A.code,A.message),this.operationType=k,this.user=te,Object.setPrototypeOf(this,ta.prototype),this.customData={appName:E.name,tenantId:null!==(ue=E.tenantId)&&void 0!==ue?ue:void 0,_serverResponse:A.customData._serverResponse,operationType:k}}static _fromErrorAndOperation(E,A,k,te){return new ta(E,A,k,te)}}function On(O,E,A,k){return("reauthenticate"===E?A._getReauthenticationResolver(O):A._getIdTokenResponse(O)).catch(ue=>{throw"auth/multi-factor-auth-required"===ue.code?ta._fromErrorAndOperation(O,ue,E,k):ue})}function kr(){return(kr=(0,D.A)(function*(O,E,A=!1){const k=yield jn(O,E._linkToIdToken(O.auth,yield O.getIdToken()),A);return Sr._forOperation(O,"link",k)})).apply(this,arguments)}function $u(){return($u=(0,D.A)(function*(O,E,A=!1){const{auth:k}=O;if((0,R.xZ)(k.app))return Promise.reject(kt(k));const te="reauthenticate";try{const ue=yield jn(O,On(k,te,E,O),A);De(ue.idToken,k,"internal-error");const He=zr(ue.idToken);De(He,k,"internal-error");const{sub:it}=He;return De(O.uid===it,k,"user-mismatch"),Sr._forOperation(O,te,ue)}catch(ue){throw"auth/user-not-found"===ue?.code&&Ot(k,"user-mismatch"),ue}})).apply(this,arguments)}function hl(O,E){return Y.apply(this,arguments)}function Y(){return(Y=(0,D.A)(function*(O,E,A=!1){if((0,R.xZ)(O.app))return Promise.reject(kt(O));const k="signIn",te=yield On(O,k,E),ue=yield Sr._fromIdTokenResponse(O,k,te);return A||(yield O._updateCurrentUser(ue.user)),ue})).apply(this,arguments)}function H(){return(H=(0,D.A)(function*(O,E){return hl(Qr(O),E)})).apply(this,arguments)}function js(O){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,D.A)(function*(O){const E=Qr(O);E._getPasswordPolicyInternal()&&(yield E._updatePasswordPolicy())})).apply(this,arguments)}function zu(O,E,A){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,D.A)(function*(O,E,A){if((0,R.xZ)(O.app))return Promise.reject(kt(O));const k=Qr(O),He=yield Zn(k,{returnSecureToken:!0,email:E,password:A,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wr).catch(Vt=>{throw"auth/password-does-not-meet-requirements"===Vt.code&&js(O),Vt}),it=yield Sr._fromIdTokenResponse(k,"signIn",He);return yield k._updateCurrentUser(it.user),it})).apply(this,arguments)}function wc(O,E,A){return(0,R.xZ)(O.app)?Promise.reject(kt(O)):function Z(O,E){return H.apply(this,arguments)}((0,V.Ku)(O),pu.credential(E,A)).catch(function(){var k=(0,D.A)(function*(te){throw"auth/password-does-not-meet-requirements"===te.code&&js(O),te});return function(te){return k.apply(this,arguments)}}())}function os(O,E,A,k){return(0,V.Ku)(O).onAuthStateChanged(E,A,k)}const qu="__sak";class dn{constructor(E,A){this.storageRetriever=E,this.type=A}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(E,A){return this.storage.setItem(E,JSON.stringify(A)),Promise.resolve()}_get(E){const A=this.storage.getItem(E);return Promise.resolve(A?JSON.parse(A):null)}_remove(E){return this.storage.removeItem(E),Promise.resolve()}get storage(){return this.storageRetriever()}}const Oi=(()=>{class O extends dn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(A,k)=>this.onStorageEvent(A,k),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ka(){const O=(0,V.ZQ)();return ii(O)||Sa(O)}()&&function rn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=St(),this._shouldAllowMigration=!0}forAllChangedKeys(A){for(const k of Object.keys(this.listeners)){const te=this.storage.getItem(k),ue=this.localCache[k];te!==ue&&A(k,ue,te)}}onStorageEvent(A,k=!1){if(!A.key)return void this.forAllChangedKeys((it,Vt,wn)=>{this.notifyListeners(it,wn)});const te=A.key;if(k?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const it=this.storage.getItem(te);if(A.newValue!==it)null!==A.newValue?this.storage.setItem(te,A.newValue):this.storage.removeItem(te);else if(this.localCache[te]===A.newValue&&!k)return}const ue=()=>{const it=this.storage.getItem(te);!k&&this.localCache[te]===it||this.notifyListeners(te,it)},He=this.storage.getItem(te);!function $e(){return(0,V.lT)()&&10===document.documentMode}()||He===A.newValue||A.newValue===A.oldValue?ue():setTimeout(ue,10)}notifyListeners(A,k){this.localCache[A]=k;const te=this.listeners[A];if(te)for(const ue of Array.from(te))ue(k&&JSON.parse(k))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((A,k,te)=>{this.onStorageEvent(new StorageEvent("storage",{key:A,oldValue:k,newValue:te}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(A,k){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[A]||(this.listeners[A]=new Set,this.localCache[A]=this.storage.getItem(A)),this.listeners[A].add(k)}_removeListener(A,k){this.listeners[A]&&(this.listeners[A].delete(k),0===this.listeners[A].size&&delete this.listeners[A]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(A,k){var te=()=>super._set,ue=this;return(0,D.A)(function*(){yield te().call(ue,A,k),ue.localCache[A]=JSON.stringify(k)})()}_get(A){var k=()=>super._get,te=this;return(0,D.A)(function*(){const ue=yield k().call(te,A);return te.localCache[A]=JSON.stringify(ue),ue})()}_remove(A){var k=()=>super._remove,te=this;return(0,D.A)(function*(){yield k().call(te,A),delete te.localCache[A]})()}}return O.type="LOCAL",O})(),Ku=(()=>{class O extends dn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(A,k){}_removeListener(A,k){}}return O.type="SESSION",O})();let vi=(()=>{class O{constructor(A){this.eventTarget=A,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(A){const k=this.receivers.find(ue=>ue.isListeningto(A));if(k)return k;const te=new O(A);return this.receivers.push(te),te}isListeningto(A){return this.eventTarget===A}handleEvent(A){var k=this;return(0,D.A)(function*(){const te=A,{eventId:ue,eventType:He,data:it}=te.data,Vt=k.handlersMap[He];if(!Vt?.size)return;te.ports[0].postMessage({status:"ack",eventId:ue,eventType:He});const wn=Array.from(Vt).map(function(){var _r=(0,D.A)(function*(fs){return fs(te.origin,it)});return function(fs){return _r.apply(this,arguments)}}()),bn=yield function Ja(O){return Promise.all(O.map(function(){var E=(0,D.A)(function*(A){try{return{fulfilled:!0,value:yield A}}catch(k){return{fulfilled:!1,reason:k}}});return function(A){return E.apply(this,arguments)}}()))}(wn);te.ports[0].postMessage({status:"done",eventId:ue,eventType:He,response:bn})})()}_subscribe(A,k){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[A]||(this.handlersMap[A]=new Set),this.handlersMap[A].add(k)}_unsubscribe(A,k){this.handlersMap[A]&&k&&this.handlersMap[A].delete(k),(!k||0===this.handlersMap[A].size)&&delete this.handlersMap[A],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return O.receivers=[],O})();function as(O="",E=10){let A="";for(let k=0;k<E;k++)A+=Math.floor(10*Math.random());return O+A}class Kc{constructor(E){this.target=E,this.handlers=new Set}removeMessageHandler(E){E.messageChannel&&(E.messageChannel.port1.removeEventListener("message",E.onMessage),E.messageChannel.port1.close()),this.handlers.delete(E)}_send(E,A,k=50){var te=this;return(0,D.A)(function*(){const ue=typeof MessageChannel<"u"?new MessageChannel:null;if(!ue)throw new Error("connection_unavailable");let He,it;return new Promise((Vt,wn)=>{const bn=as("",20);ue.port1.start();const _r=setTimeout(()=>{wn(new Error("unsupported_event"))},k);it={messageChannel:ue,onMessage(fs){const nu=fs;if(nu.data.eventId===bn)switch(nu.data.status){case"ack":clearTimeout(_r),He=setTimeout(()=>{wn(new Error("timeout"))},3e3);break;case"done":clearTimeout(He),Vt(nu.data.response);break;default:clearTimeout(_r),clearTimeout(He),wn(new Error("invalid_response"))}}},te.handlers.add(it),ue.port1.addEventListener("message",it.onMessage),te.target.postMessage({eventType:E,eventId:bn,data:A},[ue.port2])}).finally(()=>{it&&te.removeMessageHandler(it)})})()}}function _o(){return window}function hi(){return typeof _o().WorkerGlobalScope<"u"&&"function"==typeof _o().importScripts}function cs(){return(cs=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ic="firebaseLocalStorageDb",ma="firebaseLocalStorage",Fa="fbase_key";class Ji{constructor(E){this.request=E}toPromise(){return new Promise((E,A)=>{this.request.addEventListener("success",()=>{E(this.request.result)}),this.request.addEventListener("error",()=>{A(this.request.error)})})}}function bu(O,E){return O.transaction([ma],E?"readwrite":"readonly").objectStore(ma)}function Yu(){const O=indexedDB.open(Ic,1);return new Promise((E,A)=>{O.addEventListener("error",()=>{A(O.error)}),O.addEventListener("upgradeneeded",()=>{const k=O.result;try{k.createObjectStore(ma,{keyPath:Fa})}catch(te){A(te)}}),O.addEventListener("success",(0,D.A)(function*(){const k=O.result;k.objectStoreNames.contains(ma)?E(k):(k.close(),yield function Qu(){const O=indexedDB.deleteDatabase(Ic);return new Ji(O).toPromise()}(),E(yield Yu()))}))})}function Ar(O,E,A){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,D.A)(function*(O,E,A){const k=bu(O,!0).put({[Fa]:E,value:A});return new Ji(k).toPromise()})).apply(this,arguments)}function zl(){return(zl=(0,D.A)(function*(O,E){const A=bu(O,!1).get(E),k=yield new Ji(A).toPromise();return void 0===k?null:k.value})).apply(this,arguments)}function _n(O,E){const A=bu(O,!0).delete(E);return new Ji(A).toPromise()}const Od=(()=>{class O{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var A=this;return(0,D.A)(function*(){return A.db||(A.db=yield Yu()),A.db})()}_withRetries(A){var k=this;return(0,D.A)(function*(){let te=0;for(;;)try{const ue=yield k._openDb();return yield A(ue)}catch(ue){if(te++>3)throw ue;k.db&&(k.db.close(),k.db=void 0)}})()}initializeServiceWorkerMessaging(){var A=this;return(0,D.A)(function*(){return hi()?A.initializeReceiver():A.initializeSender()})()}initializeReceiver(){var A=this;return(0,D.A)(function*(){A.receiver=vi._getInstance(function $l(){return hi()?self:null}()),A.receiver._subscribe("keyChanged",function(){var k=(0,D.A)(function*(te,ue){return{keyProcessed:(yield A._poll()).includes(ue.key)}});return function(te,ue){return k.apply(this,arguments)}}()),A.receiver._subscribe("ping",function(){var k=(0,D.A)(function*(te,ue){return["keyChanged"]});return function(te,ue){return k.apply(this,arguments)}}())})()}initializeSender(){var A=this;return(0,D.A)(function*(){var k,te;if(A.activeServiceWorker=yield function Fr(){return cs.apply(this,arguments)}(),!A.activeServiceWorker)return;A.sender=new Kc(A.activeServiceWorker);const ue=yield A.sender._send("ping",{},800);ue&&null!==(k=ue[0])&&void 0!==k&&k.fulfilled&&null!==(te=ue[0])&&void 0!==te&&te.value.includes("keyChanged")&&(A.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(A){var k=this;return(0,D.A)(function*(){if(k.sender&&k.activeServiceWorker&&function Xu(){var O;return(null===(O=navigator?.serviceWorker)||void 0===O?void 0:O.controller)||null}()===k.activeServiceWorker)try{yield k.sender._send("keyChanged",{key:A},k.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const A=yield Yu();return yield Ar(A,qu,"1"),yield _n(A,qu),!0}catch{}return!1})()}_withPendingWrite(A){var k=this;return(0,D.A)(function*(){k.pendingWrites++;try{yield A()}finally{k.pendingWrites--}})()}_set(A,k){var te=this;return(0,D.A)(function*(){return te._withPendingWrite((0,D.A)(function*(){return yield te._withRetries(ue=>Ar(ue,A,k)),te.localCache[A]=k,te.notifyServiceWorker(A)}))})()}_get(A){var k=this;return(0,D.A)(function*(){const te=yield k._withRetries(ue=>function gl(O,E){return zl.apply(this,arguments)}(ue,A));return k.localCache[A]=te,te})()}_remove(A){var k=this;return(0,D.A)(function*(){return k._withPendingWrite((0,D.A)(function*(){return yield k._withRetries(te=>_n(te,A)),delete k.localCache[A],k.notifyServiceWorker(A)}))})()}_poll(){var A=this;return(0,D.A)(function*(){const k=yield A._withRetries(He=>{const it=bu(He,!1).getAll();return new Ji(it).toPromise()});if(!k)return[];if(0!==A.pendingWrites)return[];const te=[],ue=new Set;if(0!==k.length)for(const{fbase_key:He,value:it}of k)ue.add(He),JSON.stringify(A.localCache[He])!==JSON.stringify(it)&&(A.notifyListeners(He,it),te.push(He));for(const He of Object.keys(A.localCache))A.localCache[He]&&!ue.has(He)&&(A.notifyListeners(He,null),te.push(He));return te})()}notifyListeners(A,k){this.localCache[A]=k;const te=this.listeners[A];if(te)for(const ue of Array.from(te))ue(k)}startPolling(){var A=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return A._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(A,k){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[A]||(this.listeners[A]=new Set,this._get(A)),this.listeners[A].add(k)}_removeListener(A,k){this.listeners[A]&&(this.listeners[A].delete(k),0===this.listeners[A].size&&delete this.listeners[A]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return O.type="LOCAL",O})();function ec(O,E){return E?Hn(E):(De(O._popupRedirectResolver,O,"argument-error"),O._popupRedirectResolver)}ca("rcb"),new ki(3e4,6e4);class bf extends qo{constructor(E){super("custom","custom"),this.params=E}_getIdTokenResponse(E){return mo(E,this._buildIdpRequest())}_linkToIdToken(E,A){return mo(E,this._buildIdpRequest(A))}_getReauthenticationResolver(E){return mo(E,this._buildIdpRequest())}_buildIdpRequest(E){const A={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return E&&(A.idToken=E),A}}function Wl(O){return hl(O.auth,new bf(O),O.bypassAuthState)}function Tf(O){const{auth:E,user:A}=O;return De(A,E,"internal-error"),function Ao(O,E){return $u.apply(this,arguments)}(A,new bf(O),O.bypassAuthState)}function Fd(O){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,D.A)(function*(O){const{auth:E,user:A}=O;return De(A,E,"internal-error"),function Bo(O,E){return kr.apply(this,arguments)}(A,new bf(O),O.bypassAuthState)})).apply(this,arguments)}class ql{constructor(E,A,k,te,ue=!1){this.auth=E,this.resolver=k,this.user=te,this.bypassAuthState=ue,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(A)?A:[A]}execute(){var E=this;return new Promise(function(){var A=(0,D.A)(function*(k,te){E.pendingPromise={resolve:k,reject:te};try{E.eventManager=yield E.resolver._initialize(E.auth),yield E.onExecution(),E.eventManager.registerConsumer(E)}catch(ue){E.reject(ue)}});return function(k,te){return A.apply(this,arguments)}}())}onAuthEvent(E){var A=this;return(0,D.A)(function*(){const{urlResponse:k,sessionId:te,postBody:ue,tenantId:He,error:it,type:Vt}=E;if(it)return void A.reject(it);const wn={auth:A.auth,requestUri:k,sessionId:te,tenantId:He||void 0,postBody:ue||void 0,user:A.user,bypassAuthState:A.bypassAuthState};try{A.resolve(yield A.getIdpTask(Vt)(wn))}catch(bn){A.reject(bn)}})()}onError(E){this.reject(E)}getIdpTask(E){switch(E){case"signInViaPopup":case"signInViaRedirect":return Wl;case"linkViaPopup":case"linkViaRedirect":return Fd;case"reauthViaPopup":case"reauthViaRedirect":return Tf;default:Ot(this.auth,"internal-error")}}resolve(E){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(E),this.unregisterAndCleanUp()}reject(E){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(E),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Su=new ki(2e3,1e4);function Qc(O,E,A){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,D.A)(function*(O,E,A){if((0,R.xZ)(O.app))return Promise.reject(wt(O,"operation-not-supported-in-this-environment"));const k=Qr(O);!function xt(O,E,A){if(!(E instanceof A))throw A.name!==E.constructor.name&&Ot(O,"argument-error"),dt(O,"argument-error",`Type of ${E.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(O,E,ro);const te=ec(k,A);return new jo(k,"signInViaPopup",E,te).executeNotNull()})).apply(this,arguments)}let jo=(()=>{class O extends ql{constructor(A,k,te,ue,He){super(A,k,ue,He),this.provider=te,this.authWindow=null,this.pollId=null,O.currentPopupAction&&O.currentPopupAction.cancel(),O.currentPopupAction=this}executeNotNull(){var A=this;return(0,D.A)(function*(){const k=yield A.execute();return De(k,A.auth,"internal-error"),k})()}onExecution(){var A=this;return(0,D.A)(function*(){gt(1===A.filter.length,"Popup operations only handle one event");const k=as();A.authWindow=yield A.resolver._openPopup(A.auth,A.provider,A.filter[0],k),A.authWindow.associatedEvent=k,A.resolver._originValidation(A.auth).catch(te=>{A.reject(te)}),A.resolver._isIframeWebStorageSupported(A.auth,te=>{te||A.reject(wt(A.auth,"web-storage-unsupported"))}),A.pollUserCancellation()})()}get eventId(){var A;return(null===(A=this.authWindow)||void 0===A?void 0:A.associatedEvent)||null}cancel(){this.reject(wt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,O.currentPopupAction=null}pollUserCancellation(){const A=()=>{var k,te;this.pollId=null!==(te=null===(k=this.authWindow)||void 0===k?void 0:k.window)&&void 0!==te&&te.closed?window.setTimeout(()=>{this.pollId=null,this.reject(wt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(A,Su.get())};A()}}return O.currentPopupAction=null,O})();const Ac="pendingRedirect",Ba=new Map;class Ah extends ql{constructor(E,A,k=!1){super(E,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],A,void 0,k),this.eventId=null}execute(){var E=()=>super.execute,A=this;return(0,D.A)(function*(){let k=Ba.get(A.auth._key());if(!k){try{const ue=(yield function bh(O,E){return Lr.apply(this,arguments)}(A.resolver,A.auth))?yield E().call(A):null;k=()=>Promise.resolve(ue)}catch(te){k=()=>Promise.reject(te)}Ba.set(A.auth._key(),k)}return A.bypassAuthState||Ba.set(A.auth._key(),()=>Promise.resolve(null)),k()})()}onAuthEvent(E){var A=()=>super.onAuthEvent,k=this;return(0,D.A)(function*(){if("signInViaRedirect"===E.type)return A().call(k,E);if("unknown"!==E.type){if(E.eventId){const te=yield k.auth._redirectUserForId(E.eventId);if(te)return k.user=te,A().call(k,E);k.resolve(null)}}else k.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function Lr(){return(Lr=(0,D.A)(function*(O,E){const A=function bc(O){return ri(Ac,O.config.apiKey,O.name)}(E),k=function tc(O){return Hn(O._redirectPersistence)}(O);if(!(yield k._isAvailable()))return!1;const te="true"===(yield k._get(A));return yield k._remove(A),te})).apply(this,arguments)}function Ld(O,E){Ba.set(O._key(),E)}function Sh(O,E){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,D.A)(function*(O,E,A=!1){if((0,R.xZ)(O.app))return Promise.reject(kt(O));const k=Qr(O),te=ec(k,E),He=yield new Ah(k,te,A).execute();return He&&!A&&(delete He.user._redirectEventId,yield k._persistUserIfCurrent(He.user),yield k._setRedirectUser(null,E)),He})).apply(this,arguments)}class Bd{constructor(E){this.auth=E,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(E){this.consumers.add(E),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,E)&&(this.sendToConsumer(this.queuedRedirectEvent,E),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(E){this.consumers.delete(E)}onEvent(E){if(this.hasEventBeenHandled(E))return!1;let A=!1;return this.consumers.forEach(k=>{this.isEventForConsumer(E,k)&&(A=!0,this.sendToConsumer(E,k),this.saveEventToCache(E))}),this.hasHandledPotentialRedirect||!function xn(O){switch(O.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qt(O);default:return!1}}(E)||(this.hasHandledPotentialRedirect=!0,A||(this.queuedRedirectEvent=E,A=!0)),A}sendToConsumer(E,A){var k;if(E.error&&!qt(E)){const te=(null===(k=E.error.code)||void 0===k?void 0:k.split("auth/")[1])||"internal-error";A.onError(wt(this.auth,te))}else A.onAuthEvent(E)}isEventForConsumer(E,A){const k=null===A.eventId||!!E.eventId&&E.eventId===A.eventId;return A.filter.includes(E.type)&&k}hasEventBeenHandled(E){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ji(E))}saveEventToCache(E){this.cachedEventUids.add(ji(E)),this.lastProcessedEventTime=Date.now()}}function ji(O){return[O.type,O.eventId,O.sessionId,O.tenantId].filter(E=>E).join("-")}function qt({type:O,error:E}){return"unknown"===O&&"auth/no-auth-event"===E?.code}function us(){return(us=(0,D.A)(function*(O,E={}){return pe(O,"GET","/v1/projects",E)})).apply(this,arguments)}const ls=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ds=/^https?/;function Ei(){return Ei=(0,D.A)(function*(O){if(O.config.emulator)return;const{authorizedDomains:E}=yield function vo(O){return us.apply(this,arguments)}(O);for(const A of E)try{if(Pi(A))return}catch{}Ot(O,"unauthorized-domain")}),Ei.apply(this,arguments)}function Pi(O){const E=Yt(),{protocol:A,hostname:k}=new URL(E);if(O.startsWith("chrome-extension://")){const He=new URL(O);return""===He.hostname&&""===k?"chrome-extension:"===A&&O.replace("chrome-extension://","")===E.replace("chrome-extension://",""):"chrome-extension:"===A&&He.hostname===k}if(!ds.test(A))return!1;if(ls.test(O))return k===O;const te=O.replace(/\./g,"\\.");return new RegExp("^(.+\\."+te+"|"+te+")$","i").test(k)}const Ni=new ki(3e4,6e4);function Jn(){const O=_o().___jsl;if(O?.H)for(const E of Object.keys(O.H))if(O.H[E].r=O.H[E].r||[],O.H[E].L=O.H[E].L||[],O.H[E].r=[...O.H[E].L],O.CP)for(let A=0;A<O.CP.length;A++)O.CP[A]=null}let rc=null;const wi=new ki(5e3,15e3),nl="__/auth/iframe",Jc="emulator/auth/iframe",uo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mf(O){const E=O.config;De(E.authDomain,O,"auth-domain-config-required");const A=E.emulator?Ne(E,Jc):`https://${O.config.authDomain}/${nl}`,k={apiKey:E.apiKey,appName:O.name,v:R.MF},te=Cl.get(O.config.apiHost);te&&(k.eid=te);const ue=O._getFrameworks();return ue.length&&(k.fw=ue.join(",")),`${A}?${(0,V.Am)(k).slice(1)}`}function Mu(){return Mu=(0,D.A)(function*(O){const E=yield function wl(O){return rc=rc||function Zl(O){return new Promise((E,A)=>{var k,te,ue;function He(){Jn(),gapi.load("gapi.iframes",{callback:()=>{E(gapi.iframes.getContext())},ontimeout:()=>{Jn(),A(wt(O,"network-request-failed"))},timeout:Ni.get()})}if(null!==(te=null===(k=_o().gapi)||void 0===k?void 0:k.iframes)&&void 0!==te&&te.Iframe)E(gapi.iframes.getContext());else{if(null===(ue=_o().gapi)||void 0===ue||!ue.load){const it=ca("iframefcb");return _o()[it]=()=>{gapi.load?He():A(wt(O,"network-request-failed"))},Ha(`${function gc(){return aa.gapiScript}()}?onload=${it}`).catch(Vt=>A(Vt))}He()}}).catch(E=>{throw rc=null,E})}(O),rc}(O),A=_o().gapi;return De(A,O,"internal-error"),E.open({where:document.body,url:Mf(O),messageHandlersFilter:A.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uo,dontclear:!0},k=>new Promise(function(){var te=(0,D.A)(function*(ue,He){yield k.restyle({setHideOnLeave:!1});const it=wt(O,"network-request-failed"),Vt=_o().setTimeout(()=>{He(it)},wi.get());function wn(){_o().clearTimeout(Vt),ue(k)}k.ping(wn).then(wn,()=>{He(it)})});return function(ue,He){return te.apply(this,arguments)}}()))}),Mu.apply(this,arguments)}const ic={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Il{constructor(E){this.window=E,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Al="__/auth/handler",So="emulator/auth/handler",Ds=encodeURIComponent("fac");function zs(O,E,A,k,te,ue){return tu.apply(this,arguments)}function tu(){return(tu=(0,D.A)(function*(O,E,A,k,te,ue){De(O.config.authDomain,O,"auth-domain-config-required"),De(O.config.apiKey,O,"invalid-api-key");const He={apiKey:O.config.apiKey,appName:O.name,authType:A,redirectUrl:k,v:R.MF,eventId:te};if(E instanceof ro){E.setDefaultLanguage(O.languageCode),He.providerId=E.providerId||"",(0,V.Im)(E.getCustomParameters())||(He.customParameters=JSON.stringify(E.getCustomParameters()));for(const[bn,_r]of Object.entries(ue||{}))He[bn]=_r}if(E instanceof ha){const bn=E.getScopes().filter(_r=>""!==_r);bn.length>0&&(He.scopes=bn.join(","))}O.tenantId&&(He.tid=O.tenantId);const it=He;for(const bn of Object.keys(it))void 0===it[bn]&&delete it[bn];const Vt=yield O._getAppCheckToken(),wn=Vt?`#${Ds}=${encodeURIComponent(Vt)}`:"";return`${function Jl({config:O}){return O.emulator?Ne(O,So):`https://${O.authDomain}/${Al}`}(O)}?${(0,V.Am)(it).slice(1)}${wn}`})).apply(this,arguments)}const wa="webStorageSupport",bl=class xc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ku,this._completeRedirectFn=Sh,this._overrideRedirectResult=Ld}_openPopup(E,A,k,te){var ue=this;return(0,D.A)(function*(){var He;gt(null===(He=ue.eventManagers[E._key()])||void 0===He?void 0:He.manager,"_initialize() not called before _openPopup()");const it=yield zs(E,A,k,Yt(),te);return function eu(O,E,A,k=500,te=600){const ue=Math.max((window.screen.availHeight-te)/2,0).toString(),He=Math.max((window.screen.availWidth-k)/2,0).toString();let it="";const Vt=Object.assign(Object.assign({},ic),{width:k.toString(),height:te.toString(),top:ue,left:He}),wn=(0,V.ZQ)().toLowerCase();A&&(it=Ns(wn)?"_blank":A),Ur(wn)&&(E=E||"http://localhost",Vt.scrollbars="yes");const bn=Object.entries(Vt).reduce((fs,[nu,Sl])=>`${fs}${nu}=${Sl},`,"");if(function Et(O=(0,V.ZQ)()){var E;return Sa(O)&&!(null===(E=window.navigator)||void 0===E||!E.standalone)}(wn)&&"_self"!==it)return function lo(O,E){const A=document.createElement("a");A.href=O,A.target=E;const k=document.createEvent("MouseEvent");k.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),A.dispatchEvent(k)}(E||"",it),new Il(null);const _r=window.open(E||"",it,bn);De(_r,O,"popup-blocked");try{_r.focus()}catch{}return new Il(_r)}(E,it,as())})()}_openRedirect(E,A,k,te){var ue=this;return(0,D.A)(function*(){return yield ue._originValidation(E),function Gl(O){_o().location.href=O}(yield zs(E,A,k,Yt(),te)),new Promise(()=>{})})()}_initialize(E){const A=E._key();if(this.eventManagers[A]){const{manager:te,promise:ue}=this.eventManagers[A];return te?Promise.resolve(te):(gt(ue,"If manager is not set, promise should be"),ue)}const k=this.initAndGetManager(E);return this.eventManagers[A]={promise:k},k.catch(()=>{delete this.eventManagers[A]}),k}initAndGetManager(E){var A=this;return(0,D.A)(function*(){const k=yield function Ss(O){return Mu.apply(this,arguments)}(E),te=new Bd(E);return k.register("authEvent",ue=>(De(ue?.authEvent,E,"invalid-auth-event"),{status:te.onEvent(ue.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),A.eventManagers[E._key()]={manager:te},A.iframes[E._key()]=k,te})()}_isIframeWebStorageSupported(E,A){this.iframes[E._key()].send(wa,{type:wa},te=>{var ue;const He=null===(ue=te?.[0])||void 0===ue?void 0:ue[wa];void 0!==He&&A(!!He),Ot(E,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(E){const A=E._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=function El(O){return Ei.apply(this,arguments)}(E)),this.originValidationPromises[A]}get _shouldInitProactively(){return St()||ii()||Sa()}};var Up="@firebase/auth";class jp{constructor(E){this.auth=E,this.internalListeners=new Map}getUid(){var E;return this.assertAuthConfigured(),(null===(E=this.auth.currentUser)||void 0===E?void 0:E.uid)||null}getToken(E){var A=this;return(0,D.A)(function*(){return A.assertAuthConfigured(),yield A.auth._initializationPromise,A.auth.currentUser?{accessToken:yield A.auth.currentUser.getIdToken(E)}:null})()}addAuthTokenListener(E){if(this.assertAuthConfigured(),this.internalListeners.has(E))return;const A=this.auth.onIdTokenChanged(k=>{E(k?.stsTokenManager.accessToken||null)});this.internalListeners.set(E,A),this.updateProactiveRefresh()}removeAuthTokenListener(E){this.assertAuthConfigured();const A=this.internalListeners.get(E);A&&(this.internalListeners.delete(E),A(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Hd=(0,V.XA)("authIdTokenMaxAge")||300;let Gd=null;const Mh=O=>function(){var E=(0,D.A)(function*(A){const k=A&&(yield A.getIdTokenResult()),te=k&&((new Date).getTime()-Date.parse(k.issuedAtTime))/1e3;if(te&&te>Hd)return;const ue=k?.token;Gd!==ue&&(Gd=ue,yield fetch(O,{method:ue?"POST":"DELETE",headers:ue?{Authorization:`Bearer ${ue}`}:{}}))});return function(A){return E.apply(this,arguments)}}();function Oh(O=(0,R.Sx)()){const E=(0,R.j6)(O,"auth");if(E.isInitialized())return E.getImmediate();const A=function ea(O,E){const A=(0,R.j6)(O,"auth");if(A.isInitialized()){const te=A.getImmediate(),ue=A.getOptions();if((0,V.bD)(ue,E??{}))return te;Ot(te,"already-initialized")}return A.initialize({options:E})}(O,{popupRedirectResolver:bl,persistence:[Od,Oi,Ku]}),k=(0,V.XA)("authTokenSyncURL");if(k&&"boolean"==typeof isSecureContext&&isSecureContext){const ue=new URL(k,location.origin);if(location.origin===ue.origin){const He=Mh(ue.toString());(function Qo(O,E,A){(0,V.Ku)(O).beforeAuthStateChanged(E,A)})(A,He,()=>He(A.currentUser)),function Wi(O,E,A,k){(0,V.Ku)(O).onIdTokenChanged(E,A,k)}(A,it=>He(it))}}const te=(0,V.Tj)("auth");return te&&function Di(O,E,A){const k=Qr(O);De(k._canInitEmulator,k,"emulator-config-failed"),De(/^https?:\/\//.test(E),k,"invalid-emulator-scheme");const te=!!A?.disableWarnings,ue=ks(E),{host:He,port:it}=function Ul(O){const E=ks(O),A=/(\/\/)?([^?#/]+)/.exec(O.substr(E.length));if(!A)return{host:"",port:null};const k=A[2].split("@").pop()||"",te=/^(\[[^\]]+\])(:|$)/.exec(k);if(te){const ue=te[1];return{host:ue,port:Ui(k.substr(ue.length+1))}}{const[ue,He]=k.split(":");return{host:ue,port:Ui(He)}}}(E);k.config.emulator={url:`${ue}//${He}${null===it?"":`:${it}`}/`},k.settings.appVerificationDisabledForTesting=!0,k.emulatorConfig=Object.freeze({host:He,port:it,protocol:ue.replace(":",""),options:Object.freeze({disableWarnings:te})}),te||function ko(){function O(){const E=document.createElement("p"),A=E.style;E.innerText="Running in emulator mode. Do not use with production credentials.",A.position="fixed",A.width="100%",A.backgroundColor="#ffffff",A.border=".1em solid #000000",A.color="#b50000",A.bottom="0px",A.left="0px",A.margin="0px",A.zIndex="10000",A.textAlign="center",E.classList.add("firebase-emulator-warning"),document.body.appendChild(E)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",O):O())}()}(A,`http://${te}`),A}(function Ra(O){aa=O})({loadJS:O=>new Promise((E,A)=>{const k=document.createElement("script");k.setAttribute("src",O),k.onload=E,k.onerror=te=>{const ue=wt("internal-error");ue.customData=te,A(ue)},k.type="text/javascript",k.charset="UTF-8",function $d(){var O,E;return null!==(E=null===(O=document.getElementsByTagName("head"))||void 0===O?void 0:O[0])&&void 0!==E?E:document}().appendChild(k)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Rh(O){(0,R.om)(new ye.uA("auth",(E,{options:A})=>{const k=E.getProvider("app").getImmediate(),te=E.getProvider("heartbeat"),ue=E.getProvider("app-check-internal"),{apiKey:He,authDomain:it}=k.options;De(He&&!He.includes(":"),"invalid-api-key",{appName:k.name});const Vt={apiKey:He,authDomain:it,clientPlatform:O,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ln(O)},wn=new No(k,te,ue,Vt);return function $i(O,E){const A=E?.persistence||[],k=(Array.isArray(A)?A:[A]).map(Hn);E?.errorMap&&O._updateErrorMap(E.errorMap),O._initializeWithPersistence(k,E?.popupRedirectResolver)}(wn,A),wn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((E,A,k)=>{E.getProvider("auth-internal").initialize()})),(0,R.om)(new ye.uA("auth-internal",E=>{const A=Qr(E.getProvider("auth").getImmediate());return new jp(A)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.KO)(Up,"1.7.4",function Hp(O){switch(O){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(O)),(0,R.KO)(Up,"1.7.4","esm2017")}("Browser")},467:(Cn,It,ie)=>{function D(V,We,nt,ye,Ct,Xe,ct){try{var Ee=V[Xe](ct),be=Ee.value}catch(Oe){return void nt(Oe)}Ee.done?We(be):Promise.resolve(be).then(ye,Ct)}function R(V){return function(){var We=this,nt=arguments;return new Promise(function(ye,Ct){var Xe=V.apply(We,nt);function ct(be){D(Xe,ye,Ct,ct,Ee,"next",be)}function Ee(be){D(Xe,ye,Ct,ct,Ee,"throw",be)}ct(void 0)})}}ie.d(It,{A:()=>R})},1635:(Cn,It,ie)=>{function We(Ne,Ue){var bt={};for(var Le in Ne)Object.prototype.hasOwnProperty.call(Ne,Le)&&Ue.indexOf(Le)<0&&(bt[Le]=Ne[Le]);if(null!=Ne&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(Le=Object.getOwnPropertySymbols(Ne);le<Le.length;le++)Ue.indexOf(Le[le])<0&&Object.prototype.propertyIsEnumerable.call(Ne,Le[le])&&(bt[Le[le]]=Ne[Le[le]])}return bt}function Oe(Ne,Ue,bt,Le){return new(bt||(bt=Promise))(function(pe,_t){function Wt(Qn){try{nn(Le.next(Qn))}catch(Pr){_t(Pr)}}function Un(Qn){try{nn(Le.throw(Qn))}catch(Pr){_t(Pr)}}function nn(Qn){Qn.done?pe(Qn.value):function le(pe){return pe instanceof bt?pe:new bt(function(_t){_t(pe)})}(Qn.value).then(Wt,Un)}nn((Le=Le.apply(Ne,Ue||[])).next())})}function Ot(Ne){return this instanceof Ot?(this.v=Ne,this):new Ot(Ne)}function wt(Ne,Ue,bt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,Le=bt.apply(Ne,Ue||[]),pe=[];return le={},Wt("next"),Wt("throw"),Wt("return",function _t(mr){return function(Br){return Promise.resolve(Br).then(mr,Pr)}}),le[Symbol.asyncIterator]=function(){return this},le;function Wt(mr,Br){Le[mr]&&(le[mr]=function(Fi){return new Promise(function(ln,Gr){pe.push([mr,Fi,ln,Gr])>1||Un(mr,Fi)})},Br&&(le[mr]=Br(le[mr])))}function Un(mr,Br){try{!function nn(mr){mr.value instanceof Ot?Promise.resolve(mr.value.v).then(Qn,Pr):no(pe[0][2],mr)}(Le[mr](Br))}catch(Fi){no(pe[0][3],Fi)}}function Qn(mr){Un("next",mr)}function Pr(mr){Un("throw",mr)}function no(mr,Br){mr(Br),pe.shift(),pe.length&&Un(pe[0][0],pe[0][1])}}function kt(Ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bt,Ue=Ne[Symbol.asyncIterator];return Ue?Ue.call(Ne):(Ne=function Ut(Ne){var Ue="function"==typeof Symbol&&Symbol.iterator,bt=Ue&&Ne[Ue],Le=0;if(bt)return bt.call(Ne);if(Ne&&"number"==typeof Ne.length)return{next:function(){return Ne&&Le>=Ne.length&&(Ne=void 0),{value:Ne&&Ne[Le++],done:!Ne}}};throw new TypeError(Ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ne),bt={},Le("next"),Le("throw"),Le("return"),bt[Symbol.asyncIterator]=function(){return this},bt);function Le(pe){bt[pe]=Ne[pe]&&function(_t){return new Promise(function(Wt,Un){!function le(pe,_t,Wt,Un){Promise.resolve(Un).then(function(nn){pe({value:nn,done:Wt})},_t)}(Wt,Un,(_t=Ne[pe](_t)).done,_t.value)})}}}ie.d(It,{AQ:()=>wt,N3:()=>Ot,Tt:()=>We,sH:()=>Oe,xN:()=>kt}),"function"==typeof SuppressedError&&SuppressedError}},Cn=>{Cn(Cn.s=6184)}]);